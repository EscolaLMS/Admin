(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{"3fxf":function(le,U,e){"use strict";var L=e("DjyN"),N=e("NUBc"),y=e("Mwp2"),J=e("VXEj"),x=e("+L6B"),u=e("2/Rp"),V=e("5NDa"),B=e("5rEg"),Y=e("oBTY"),a=e("k1fw"),A=e("tJVT"),F=e("DYRE"),v=e("zeV3"),I=e("tU7J"),_=e("wFql"),j=e("q1tI"),E=e.n(j),d=e("BAh9"),X=e("/MfK"),S=e("mAF4"),k=e("dF/Y"),p=e("9kvl"),P=e("DBJ/"),ae=e("lLVY"),z=e.n(ae),b=e("nKUr"),re=e.n(b),je=function(oe){var ce=oe.directory,q=oe.onUploaded;return Object(b.jsxs)(v.b,{align:"start",children:[Object(b.jsxs)(_.a.Text,{children:[Object(b.jsx)(p.a,{id:"pages.files.filesBrowser"}),Object(b.jsx)(_.a.Text,{code:!0,children:ce})]}),Object(b.jsx)(P.a,{url:"/api/admin/file/upload",name:"file[]",data:{target:ce},onUpload:function(me){me.success&&q(ce,me.data)}})]})},ve=function(oe){var ce=oe.defaultDirectory,q=ce===void 0?"/":ce,Oe=oe.onFile,me=oe.hideDeleteBtn,Ie=me===void 0?!1:me,Ce=oe.forceLoading,Ae=Ce===void 0?!1:Ce,Fe=Object(p.l)(),_e=Object(j.useState)({loading:!1,name:"",directory:q,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),Ee=Object(A.a)(_e,2),Q=Ee[0],pe=Ee[1],de=Object(j.useRef)(),ne=Object(j.useCallback)(function($){pe(function(c){return Object(a.a)(Object(a.a)({},c),{},{loading:$})})},[]),Pe=Object(j.useCallback)(function($,c){$.success&&pe(function(G){return Object(a.a)(Object(a.a)(Object(a.a)({},G),$.data),{},{data:[{url:c.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(Y.a)($.data.data.map(function(H){return Object(a.a)(Object(a.a)({},H),{},{url:H.mime==="directory"?"".concat(c,"/").concat(H.name):H.url})}))).filter(function(H){return c==="/"||c===q?H.name!=="..":!0}),directory:c,loading:!1})})},[ne]),ue=Object(j.useCallback)(function($){var c,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,H=function(){return de.current&&de.current.abort()};return H(),de.current=new AbortController,ne(!0),Object(d.a)({directory:$,page:G},{signal:(c=de.current)===null||c===void 0?void 0:c.signal}).then(function(se){se.success&&Pe(se,$)}).catch(function(){return ne(!1)}),function(){H()}},[ne]);Object(j.useEffect)(function(){return ue(q)},[q,ue]);var De=Object(j.useCallback)(function($){ne(!0),Object(d.c)($).then(function(){ue(Q.directory)}).catch(function(){ne(!1)})},[ue,ne,Q.directory]),Le=Object(j.useCallback)(function($,c){var G,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,se=function(){return de.current&&de.current.abort()};return se(),de.current=new AbortController,ne(!0),Object(d.b)({directory:$,name:c,page:H},{signal:(G=de.current)===null||G===void 0?void 0:G.signal}).then(function(Me){Me.success&&Pe(Me,$)}).catch(function(){return ne(!1)}),function(){se()}},[ne]);return Object(b.jsxs)("div",{className:"file-browser",children:[Object(b.jsxs)("div",{className:"file-browser__header",children:[Object(b.jsx)(B.a,{placeholder:Fe.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(c){return pe(function(G){return Object(a.a)(Object(a.a)({},G),{},{name:c.target.value})})},value:Q.name}),Object(b.jsxs)("div",{children:[Object(b.jsx)(u.a,{className:"file-browser__button",onClick:function(){return ue(Q.directory)},children:Object(b.jsx)(p.a,{id:"reset"})}),Object(b.jsx)(u.a,{className:"file-browser__button",type:"primary",onClick:function(){return Le(Q.directory,Q.name)},children:Object(b.jsx)(p.a,{id:"query"})})]})]}),Object(b.jsx)(J.b,{loading:Q.loading||Ae,size:"small",itemLayout:"horizontal",dataSource:Q.data,header:Object(b.jsx)(je,{directory:Q.directory,onUploaded:function(c,G){G&&(ue(c),Oe&&Oe(G,c))}}),footer:Object(b.jsx)(je,{directory:Q.directory,onUploaded:function(c,G){ue(c),G&&Oe&&Oe(G,c)}}),renderItem:function(c){return Object(b.jsx)(J.b.Item,{actions:c.mime!=="directory"&&!Ie?[Object(b.jsx)(u.a,{type:"default",danger:!0,icon:Object(b.jsx)(X.a,{}),size:"small",onClick:function(){return De(c.url)}},"dir")]:[],children:Object(b.jsx)(J.b.Item.Meta,{avatar:c.mime==="directory"?Object(b.jsx)(u.a,{type:"primary",icon:Object(b.jsx)(S.a,{}),size:"small",onClick:function(){return ue(c.url)}}):Object(b.jsx)("a",{href:c.url,target:"_blank",rel:"noreferrer",children:Object(b.jsx)(u.a,{type:"default",icon:Object(b.jsx)(k.a,{}),size:"small"})}),description:Object(b.jsx)(E.a.Fragment,{children:Object(b.jsx)(u.a,{type:"text",size:"small",onClick:function(){return c.mime==="directory"?ue(c.url):Oe&&Oe(c,Q.directory)},children:c.name})})})})}}),Object(b.jsx)(N.a,{pageSizeOptions:[],current:Q.current_page,total:Q.total,pageSize:Q.per_page,onChange:function(c){return ue(Q.directory,c)}})]})};U.a=ve},"5qq5":function(le,U,e){"use strict";var L=e("7Kak"),N=e("9yH6"),y=e("VTBJ"),J=e("Ff2n"),x=e("nKUr"),u=e.n(x),V=e("uX+g"),B=e("q1tI"),Y=e.n(B),a=e("WFLz"),A=e("adzw"),F=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],v=Y.a.forwardRef(function(E,d){var X=E.fieldProps,S=E.options,k=E.radioType,p=E.layout,P=E.proFieldProps,ae=E.valueEnum,z=Object(J.a)(E,F);return Object(x.jsx)(A.a,Object(y.a)(Object(y.a)({valueType:k==="button"?"radioButton":"radio",ref:d,valueEnum:Object(V.a)(ae,void 0)},z),{},{fieldProps:Object(y.a)({options:S,layout:p},X),proFieldProps:P,filedConfig:{customLightMode:!0}}))}),I=Y.a.forwardRef(function(E,d){var X=E.fieldProps,S=E.children;return Object(x.jsx)(N.a,Object(y.a)(Object(y.a)({},X),{},{ref:d,children:S}))}),_=Object(a.a)(I,{valuePropName:"checked",ignoreWidth:!0}),j=_;j.Group=v,j.Button=N.a.Button,j.displayName="ProFormComponent",U.a=j},BAh9:function(le,U,e){"use strict";e.d(U,"a",function(){return x}),e.d(U,"b",function(){return V}),e.d(U,"e",function(){return Y}),e.d(U,"d",function(){return A}),e.d(U,"c",function(){return F});var L=e("qLMh"),N=e("k1fw"),y=e("9og8"),J=e("9kvl");function x(I,_){return u.apply(this,arguments)}function u(){return u=Object(y.a)(Object(L.a)().mark(function I(_,j){return Object(L.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(J.i)("/api/admin/file/list",Object(N.a)({method:"GET",params:_},j||{})));case 1:case"end":return d.stop()}},I)})),u.apply(this,arguments)}function V(I,_){return B.apply(this,arguments)}function B(){return B=Object(y.a)(Object(L.a)().mark(function I(_,j){return Object(L.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(J.i)("/api/admin/file/find",Object(N.a)({method:"GET",params:_},j||{})));case 1:case"end":return d.stop()}},I)})),B.apply(this,arguments)}function Y(I,_,j){return a.apply(this,arguments)}function a(){return a=Object(y.a)(Object(L.a)().mark(function I(_,j,E){var d;return Object(L.a)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return d=new FormData,d.append("file[]",_),d.append("target",j),S.abrupt("return",Object(J.i)("/api/admin/file/upload",Object(N.a)({method:"POST",data:d},E||{})));case 4:case"end":return S.stop()}},I)})),a.apply(this,arguments)}var A=function(_){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/images/img?path=").concat(_,"&w=").concat(j)};function F(I,_){return v.apply(this,arguments)}function v(){return v=Object(y.a)(Object(L.a)().mark(function I(_,j){return Object(L.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(J.i)("/api/admin/file/delete",Object(N.a)({method:"DELETE",data:{url:_}},j||{})));case 1:case"end":return d.stop()}},I)})),v.apply(this,arguments)}},BiO0:function(le,U,e){"use strict";var L=e("VTBJ"),N=e("Ff2n"),y=e("nKUr"),J=e.n(y),x=e("q1tI"),u=e.n(x),V=e("adzw"),B=["fieldProps","proFieldProps"],Y=function(A,F){var v=A.fieldProps,I=A.proFieldProps,_=Object(N.a)(A,B);return Object(y.jsx)(V.a,Object(L.a)({ref:F,valueType:"textarea",fieldProps:v,proFieldProps:I},_))};U.a=u.a.forwardRef(Y)},"DBJ/":function(le,U,e){"use strict";var L=e("k1fw"),N=e("y8nQ"),y=e("Vl3Y"),J=e("tJVT"),x=e("etVw"),u=e("q1tI"),V=e.n(u),B=e("9kvl"),Y=e("qFDU"),a=e("nKUr"),A=e.n(a);function F(v){var I=v.onChange,_=v.onUpload,j=v.url,E=v.name,d=v.extra,X=v.accept,S=v.data,k=v.wrapInForm,p=k===void 0?!0:k,P=v.title,ae=v.formProps,z=v.maxFiles,b=v.clearListAfterUpload,re=Object(u.useState)(),je=Object(J.a)(re,2),ve=je[0],he=je[1],oe=Object(B.l)();return S&&S[E]&&delete S[E],Object(a.jsx)(Y.a,{condition:p,wrap:function(q){return Object(a.jsx)(y.a,Object(L.a)(Object(L.a)({},ae),{},{children:q}))},children:Object(a.jsx)(x.a,{title:P||" ".concat(oe.formatMessage({id:"upload_click_here"})),placeholder:oe.formatMessage({id:"upload_click_here"}),onChange:function(q){he(q),I&&I(q),q.file.status==="done"&&(_&&_(q.file.response),b&&he(void 0))},label:Object(a.jsx)(B.a,{id:"upload"}),max:z!=null?z:2,fieldProps:{data:S,accept:X,name:E,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(j),extra:d,fileList:ve==null?void 0:ve.fileList})})}U.a=F},FJDo:function(le,U,e){"use strict";var L=e("VTBJ"),N=e("Ff2n"),y=e("nKUr"),J=e.n(y),x=e("q1tI"),u=e.n(x),V=e("adzw"),B=["fieldProps","min","proFieldProps","max"],Y=function(A,F){var v=A.fieldProps,I=A.min,_=A.proFieldProps,j=A.max,E=Object(N.a)(A,B);return Object(y.jsx)(V.a,Object(L.a)({valueType:"digit",fieldProps:Object(L.a)({min:I,max:j},v),ref:F,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:_},E))};U.a=u.a.forwardRef(Y)},"O/iA":function(le,U,e){},Qurx:function(le,U,e){"use strict";var L=e("VTBJ"),N=e("Ff2n"),y=e("nKUr"),J=e.n(y),x=e("adzw"),u=["fieldProps","proFieldProps"],V=["fieldProps","proFieldProps"],B="text",Y=function(v){var I=v.fieldProps,_=v.proFieldProps,j=Object(N.a)(v,u);return Object(y.jsx)(x.a,Object(L.a)({valueType:B,fieldProps:I,filedConfig:{valueType:B},proFieldProps:_},j))},a=function(v){var I=v.fieldProps,_=v.proFieldProps,j=Object(N.a)(v,V);return Object(y.jsx)(x.a,Object(L.a)({valueType:"password",fieldProps:I,proFieldProps:_,filedConfig:{valueType:B}},j))},A=Y;A.Password=a,A.displayName="ProFormComponent",U.a=A},YjuE:function(le,U,e){"use strict";e.r(U);var L=e("fOrg"),N=e("+KLJ"),y=e("T2oS"),J=e("W9HT"),x=e("tJVT"),u=e("q1tI"),V=e.n(u),B=e("nhC9"),Y=e("Ty5D"),a=e("9kvl"),A=e("tMyG"),F=e("+up7"),v=e("P2fV"),I=e("NJEC"),_=e("5Dmo"),j=e("3S7+"),E=e("+L6B"),d=e("2/Rp"),X=e("+BJd"),S=e("mr32"),k=e("jrin"),p=e("qLMh"),P=e("k1fw"),ae=e("miYZ"),z=e("tsqr"),b=e("9og8"),re=e("xvlK"),je=e("Qiat"),ve=e("EFp3"),he=e("O/iA"),oe=e("OaEy"),ce=e("wx14"),q=e("U8pU"),Oe=e("ODXe"),me=e("TSYQ"),Ie=e.n(me),Ce=e("Zm9Q"),Ae=e("bT9E"),Fe=e("H84U"),_e=e("2fM7"),Ee=e("0n0R"),Q=_e.a.Option;function pe(O){return O&&O.type&&(O.type.isSelectOption||O.type.isSelectOptGroup)}var de=function(r,n){var l=r.prefixCls,f=r.className,C=r.popupClassName,s=r.dropdownClassName,M=r.children,D=r.dataSource,m=Object(Ce.a)(M),W;if(m.length===1&&Object(Ee.c)(m[0])&&!pe(m[0])){var R=Object(Oe.a)(m,1);W=R[0]}var g=W?function(){return W}:void 0,T;return m.length&&pe(m[0])?T=M:T=D?D.map(function(i){if(Object(Ee.c)(i))return i;switch(Object(q.a)(i)){case"string":return u.createElement(Q,{key:i,value:i},i);case"object":{var o=i.value;return u.createElement(Q,{key:o,value:o},i.text)}default:return}}):[],u.createElement(Fe.a,null,function(i){var o=i.getPrefixCls,h=o("select",l);return u.createElement(_e.a,Object(ce.a)({ref:n},Object(Ae.a)(r,["dataSource"]),{prefixCls:h,popupClassName:C||s,className:Ie()("".concat(h,"-auto-complete"),f),mode:_e.a.SECRET_COMBOBOX_MODE_DO_NOT_USE},{getInputElement:g}),T)})},ne=u.forwardRef(de);ne.Option=Q;var Pe=ne,ue=e("y8nQ"),De=e("Vl3Y"),Le=e("5NDa"),$=e("5rEg"),c=e("VMEa"),G=e("rmhi"),H=e("Qurx"),se=e("F/zT"),Me=e("5qq5"),Ke=e("BiO0"),Ve=e("tneF"),ze=e("FJDo"),$e=e("hd5d"),Ge=e("3fxf"),Je=e("ovOe"),Te=e.n(Je),Ye=e("bRQS"),we=e("4i/N"),t=e("nKUr"),Qe=function(r){var n=r.value,l=r.onChange,f=r.type,C=f===void 0?"file":f,s=Object(u.useState)(!1),M=Object(x.a)(s,2),D=M[0],m=M[1];return Object(t.jsxs)(V.a.Fragment,{children:[Object(t.jsxs)(c.a.Group,{children:[Object(t.jsx)($.a,{value:n,readOnly:!0}),Object(t.jsxs)(d.a,{size:"small",type:"primary",onClick:function(){return m(!D)},children:["toggle ",C," browser"]})]}),D&&Object(t.jsx)(Ge.a,{onFile:function(R,g){return l&&l("".concat(g,"/").concat(R.name))}})]})},Xe=function(r){var n=Object(a.l)(),l=r.visible,f=r.onVisibleChange,C=r.onFinish,s=r.id,M=r.initialData,D=r.groups,m=De.a.useForm(),W=Object(x.a)(m,1),R=W[0],g=!s||s===-1,T=Object(u.useState)("text"),i=Object(x.a)(T,2),o=i[0],h=i[1],w=Object(u.useCallback)(function(){return!!(R.getFieldValue("group")==="global"||M)},[R,M]),K=Object(u.useState)(""),ee=Object(x.a)(K,2),Z=ee[0],ie=ee[1];Object(u.useEffect)(function(){if(typeof s=="object"){var te;R.setFieldsValue(s),h((te=s.type)!==null&&te!==void 0?te:"text")}else s&&s!==-1?Object(F.d)(Number(s)).then(function(fe){fe.success&&(R.setFieldsValue(fe.data),h(fe.data.type),ie(fe.data.group))}):(R.resetFields(),h("text"))},[s,R,M]);var ge=Object(u.useCallback)(function(te){te.type&&te.type!==o&&h(te.type)},[o]);return Object(t.jsxs)(G.a,{form:R,title:n.formatMessage({id:s?"editSetting":"newSetting",defaultMessage:s?"editSetting":"newSetting"}),width:"60vw",visible:!!l,onVisibleChange:f,onFinish:C,onValuesChange:ge,children:[Object(t.jsxs)(c.a.Group,{children:[M?Object(t.jsx)(H.a,{label:Object(t.jsx)(a.a,{id:"group",defaultMessage:"group"}),rules:[{required:!0}],width:"md",name:"group",disabled:w()}):Object(t.jsx)(c.a.Item,{label:Object(t.jsx)(a.a,{id:"group",defaultMessage:"group"}),name:"group",children:Object(t.jsx)(Pe,{style:{width:"300px"},autoFocus:!0,value:Z,onChange:function(fe){return ie(fe)},filterOption:function(fe,Ue){var Be;return(Ue==null||(Be=Ue.children)===null||Be===void 0?void 0:Be.toString().toLowerCase().indexOf(fe.toLowerCase()))!==-1},children:D.map(function(te){return Object(t.jsx)(Pe.Option,{value:te,children:te},te)})})}),Object(t.jsx)(H.a,{label:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key",disabled:w()})]}),Object(t.jsxs)(c.a.Group,{children:[Object(t.jsx)(se.a,{name:"enumerable",disabled:w(),label:Object(t.jsx)(a.a,{id:"enumerable",defaultMessage:"enumerable"})}),Object(t.jsx)(se.a,{name:"public",disabled:w(),label:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"})})]}),Object(t.jsx)(c.a.Group,{children:Object(t.jsx)(Me.a.Group,{disabled:!!(!g||M),name:"type",label:Object(t.jsx)(a.a,{id:"type"}),options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"},{label:"json",value:"json"},{label:"file",value:"file"},{label:"image",value:"image"},{label:"boolean",value:"boolean"},{label:"number",value:"number"}]})}),Object(t.jsxs)("div",{children:[o==="text"&&Object(t.jsx)(H.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"})}),o==="json"&&Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(Ke.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"}),tooltip:"".concat(n.formatMessage({id:"example_json"}),': {"name":"John", "age":30, "city":["New York","Warsaw"]}')}),Object(t.jsx)(c.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(Te.a,{src:JSON.parse(R.getFieldValue("value"))})}catch(fe){return Object(t.jsx)(Te.a,{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]}),(o==="file"||o==="image")&&Object(t.jsx)(c.a.Item,{name:"value",label:"value",tooltip:"select file from current repository or upload new one",valuePropName:"value",children:Object(t.jsx)(Qe,{type:o})}),o==="markdown"&&Object(t.jsx)(c.a.Item,{name:"value",label:"value",tooltip:"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.",valuePropName:"value",children:Object(t.jsx)($e.a,{directory:"settings/wysiwyg"})}),o==="boolean"?Object(t.jsx)(se.a,{name:"data",label:Object(t.jsx)(a.a,{id:"value"}),checkedChildren:Object(t.jsx)(Ye.a,{}),unCheckedChildren:Object(t.jsx)(we.a,{})}):Object(t.jsx)(c.a.Item,{noStyle:!0,hidden:!0,children:Object(t.jsx)(Ve.a,{name:"data",valuePropName:"data"})}),o==="number"&&Object(t.jsx)(ze.a,{name:"data",label:Object(t.jsx)(a.a,{id:"value"})})]})]})},We=Xe,Re=e("G3dp"),Ne=e("/MfK"),He=function(){var O=Object(b.a)(Object(p.a)().mark(function r(n,l,f){var C;return Object(p.a)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return C=z.b.loading(n.formatMessage({id:"loading"})),M.prev=1,M.next=4,f&&f!==-1?Object(F.h)(f,Object(P.a)({},l)):Object(F.b)(Object(P.a)({},l));case 4:return C(),z.b.success(n.formatMessage({id:"success"})),M.abrupt("return",!0);case 9:return M.prev=9,M.t0=M.catch(1),C(),z.b.error(n.formatMessage({id:"error"})),M.abrupt("return",!1);case 14:case"end":return M.stop()}},r,null,[[1,9]])}));return function(n,l,f){return O.apply(this,arguments)}}(),Ze=function(){var O=Object(b.a)(Object(p.a)().mark(function r(n,l){var f;return Object(p.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return f=z.b.loading(n.formatMessage({id:"loading"})),s.prev=1,s.next=4,Object(F.c)(l);case 4:return f(),z.b.success(n.formatMessage({id:"success"})),s.abrupt("return",!0);case 9:return s.prev=9,s.t0=s.catch(1),f(),z.b.error(n.formatMessage({id:"error"})),s.abrupt("return",!1);case 14:case"end":return s.stop()}},r,null,[[1,9]])}));return function(n,l){return O.apply(this,arguments)}}(),ke=function(){var r=Object(u.useState)(!1),n=Object(x.a)(r,2),l=n[0],f=n[1],C=Object(u.useState)([]),s=Object(x.a)(C,2),M=s[0],D=s[1],m=Object(u.useRef)(),W=Object(a.l)(),R=Object(a.m)("@@initialState"),g=R.setInitialState;Object(u.useEffect)(function(){Object(F.e)().then(function(i){i.success&&D(i.data.filter(function(o){return o!=="global"}))})},[]);var T=[{title:Object(t.jsx)(a.a,{id:"group",defaultMessage:"group"}),dataIndex:"group",hideInSearch:!1,key:"group",valueType:"select",width:100,valueEnum:M.sort().reduce(function(i,o){return Object(P.a)(Object(P.a)({},i),{},Object(k.a)({},o,o))},{})},{title:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"enumerable",defaultMessage:"enumerable"}),dataIndex:"enumerable",hideInForm:!0,hideInSearch:!0,render:function(o,h){return Object(t.jsx)(S.a,{color:h.enumerable?"success":"error",children:Object(t.jsx)(a.a,{id:h.enumerable?"true":"false",defaultMessage:h.enumerable?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(o,h){return Object(t.jsx)(S.a,{color:h.public?"success":"error",children:Object(t.jsx)(a.a,{id:h.public?"true":"false",defaultMessage:h.public?"true":"false"})})}},{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(o,h){return[Object(t.jsx)(j.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(d.a,{type:"primary",icon:Object(t.jsx)(Re.a,{}),onClick:function(){return f(h.id)}})},"edit"),Object(t.jsx)(I.a,{title:Object(t.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(b.a)(Object(p.a)().mark(function w(){var K;return Object(p.a)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,Ze(W,h.id);case 2:K=Z.sent,K&&(f(!1),m.current&&m.current.reload());case 4:case"end":return Z.stop()}},w)})),okText:Object(t.jsx)(a.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(a.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(j.a,{title:Object(t.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(d.a,{type:"primary",icon:Object(t.jsx)(Ne.a,{}),danger:!0})})},"delete")]}}];return Object(t.jsxs)(V.a.Fragment,{children:[Object(t.jsx)(je.a,{headerTitle:W.formatMessage({id:"menu.settings"}),actionRef:m,rowKey:"id",search:{},toolBarRender:function(){return[Object(t.jsxs)(d.a,{type:"primary",onClick:function(){f(-1)},children:[Object(t.jsx)(re.a,{})," ",Object(t.jsx)(a.a,{id:"pages.searchTable.new"})]},"primary")]},request:function(o){var h=o.pageSize,w=o.current,K=o.group;return Object(F.f)({pageSize:h,current:w,group:K}).then(function(ee){return ee.success?{data:ee.data.filter(function(Z){return Z.group!=="global"}),total:ee.meta.total,success:!0}:[]})},columns:T}),Object(t.jsx)(We,{groups:M,id:l,visible:Number.isInteger(l),onVisibleChange:function(o){return!o&&f(!1)},onFinish:function(){var i=Object(b.a)(Object(p.a)().mark(function o(h){var w,K,ee;return Object(p.a)().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return w=h,ie.next=3,He(W,w,Number(l));case 3:if(K=ie.sent,!K){ie.next=12;break}if(f(!1),m.current&&m.current.reload(),w.group!=="global"){ie.next=12;break}return ie.next=10,Object(F.f)({current:1,pageSize:100,group:"global"});case 10:ee=ie.sent,g(function(ge){return Object(P.a)(Object(P.a)({},ge),{},{config:ee.success?ee.data:ge==null?void 0:ge.config})});case 12:case"end":return ie.stop()}},o)}));return function(o){return i.apply(this,arguments)}}()})]})},qe=ke,Pt=e("tU7J"),et=e("wFql"),Se=e("Fghh"),tt=function(r){var n=r.field,l=r.name;return n!=null&&n.includes("boolean")?Object(t.jsx)(se.a,{name:l,checkedChildren:Object(t.jsx)(Se.a,{id:"true"}),unCheckedChildren:Object(t.jsx)(Se.a,{id:"false"})}):Object(t.jsx)(H.a,{width:"lg",name:l})},at=tt,rt=et.a.Text,be;(function(O){O.Array="array",O.String="string"})(be||(be={}));var nt=function(r,n){return n===be.Array?r&&Array.isArray(r)?JSON.stringify(r):"[]":r},st=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;if(n===be.Array){var l=JSON.parse(r);return l&&Array.isArray(l)?l:[]}return r},lt=function(r){var n=Object(Se.k)(),l=r.visible,f=r.onVisibleChange,C=r.onFinish,s=r.value,M=De.a.useForm(),D=Object(x.a)(M,1),m=D[0],W=Object(u.useMemo)(function(){return(s.rules||[]).includes(be.Array)?be.Array:be.String},[s.rules]);return Object(u.useEffect)(function(){m.setFieldsValue(Object(P.a)(Object(P.a)({},s),{},{value:nt(s.value,W)}))},[W,s,m]),Object(t.jsxs)(G.a,{form:m,title:s.full_key,width:"60vw",visible:l,onVisibleChange:f,onFinish:Object(b.a)(Object(p.a)().mark(function R(){var g;return Object(p.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(F.g)({key:s.full_key,value:st(m.getFieldsValue().value,W)});case 2:if(g=i.sent,!g.success){i.next=6;break}return C(g.success===!0),i.abrupt("return",g.success);case 6:return i.abrupt("return");case 7:case"end":return i.stop()}},R)})),children:[Object(t.jsxs)(c.a.Group,{children:[Object(t.jsx)(se.a,{disabled:!0,name:"public",label:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"})}),Object(t.jsx)(se.a,{disabled:!0,name:"readonly",label:Object(t.jsx)(a.a,{id:"readonly",defaultMessage:"readonly"})}),Object(t.jsx)(c.a.Item,{shouldUpdate:!0,label:Object(t.jsx)(a.a,{id:"rules",defaultMessage:"rules"}),children:function(){return Object(t.jsx)(rt,{code:!0,children:JSON.stringify(m.getFieldValue("rules"))})}})]}),W===be.Array?Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(Ke.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"}),tooltip:"".concat(n.formatMessage({id:"example_json"}),': ["first_field_name", "second_field_name"]')}),Object(t.jsx)(c.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(Te.a,{src:JSON.parse(m.getFieldValue("value"))})}catch(g){return Object(t.jsx)(Te.a,{src:JSON.parse('{ "error": "cannot parse this array" }')})}}})]}):Object(t.jsx)(t.Fragment,{children:Object(t.jsx)(c.a.Item,{shouldUpdate:!0,label:Object(t.jsx)(a.a,{id:"value"}),children:function(){return Object(t.jsx)(at,{field:m.getFieldValue("rules"),name:"value"})}})})]})},it=lt,ot=[{title:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"readonly",defaultMessage:"readonly"}),dataIndex:"readonly",hideInForm:!0,hideInSearch:!0,render:function(r,n){return Object(t.jsx)(S.a,{color:n.readonly?"success":"error",children:Object(t.jsx)(a.a,{id:n.readonly?"true":"false",defaultMessage:n.readonly?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(r,n){return Object(t.jsx)(S.a,{color:n.public?"success":"error",children:Object(t.jsx)(a.a,{id:n.public?"true":"false",defaultMessage:n.public?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0,render:function(r,n){return typeof n.value=="boolean"?Object(t.jsx)(S.a,{color:n.value?"success":"error",children:Object(t.jsx)(a.a,{id:n.value?"true":"false",defaultMessage:n.value?"true":"false"})}):n.value}}],ut=function O(r,n){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return!r||typeof r!="object"?!1:(Object.keys(r).forEach(function(f){var C=r[f];f===n?l.push(r):typeof C=="object"&&O(C,n,l)}),l)},ct=function(r){var n=r.packageName,l=r.values,f=r.onValueUpdated,C=Object(a.l)(),s=Object(u.useState)(),M=Object(x.a)(s,2),D=M[0],m=M[1],W=Object(u.useMemo)(function(){var R=l[n];return ut(R,"rules")},[l,n]);return Object(t.jsxs)(V.a.Fragment,{children:[Object(t.jsx)(je.a,{headerTitle:C.formatMessage({id:"menu.settings"}),rowKey:"key",search:{},dataSource:W,columns:[].concat(ot,[{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(g,T){return[Object(t.jsx)(j.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(d.a,{type:"primary",icon:Object(t.jsx)(Re.a,{}),onClick:function(){return m(T)}})},"edit")]}}])}),D&&Object(t.jsx)(it,{value:D,visible:D!==void 0,onVisibleChange:function(g){return g===!1&&m(void 0)},onFinish:Object(b.a)(Object(p.a)().mark(function R(){return Object(p.a)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:f();case 1:case"end":return T.stop()}},R)}))})]})},dt=ct,ye=e("oBTY"),jt=e("ujla"),Ot=function(){var O=Object(b.a)(Object(p.a)().mark(function r(n,l,f){var C,s;return Object(p.a)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return C=z.b.loading(n.formatMessage({id:"loading"})),D.prev=1,D.next=4,f&&f!==-1?Object(F.h)(f,Object(P.a)({},l)):Object(F.b)(Object(P.a)({},l));case 4:return s=D.sent,C(),z.b.success(n.formatMessage({id:"success"})),D.abrupt("return",{success:!0,updatedSettings:s});case 10:return D.prev=10,D.t0=D.catch(1),C(),z.b.error(n.formatMessage({id:"error"})),D.abrupt("return",{success:!1,updateSettings:null});case 15:case"end":return D.stop()}},r,null,[[1,10]])}));return function(n,l,f){return O.apply(this,arguments)}}(),ft=function(){var O=Object(b.a)(Object(p.a)().mark(function r(n,l){var f;return Object(p.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return f=z.b.loading(n.formatMessage({id:"loading"})),s.prev=1,s.next=4,Object(F.c)(l);case 4:return f(),z.b.success(n.formatMessage({id:"success"})),s.abrupt("return",!0);case 9:return s.prev=9,s.t0=s.catch(1),f(),z.b.error(n.formatMessage({id:"error"})),s.abrupt("return",!1);case 14:case"end":return s.stop()}},r,null,[[1,9]])}));return function(n,l){return O.apply(this,arguments)}}(),bt=function(r){return r.toLowerCase().replace(/(_\w)/g,function(n){return n.toUpperCase().substr(1)})},mt=function O(r){return r.reduce(function(n,l){return[].concat(Object(ye.a)(n),Object(ye.a)(l.routes?O(l.routes):[]),[l])},[]).filter(function(n){return n.layout!==!1&&n.hideInMenu!==!0})},vt=function(r){return"hideInMenu-".concat(bt(r.split("/").join("_")))},pt=Object(ye.a)(mt(Object(jt.a)()).filter(function(O){return O.path&&O.path!=="/"}).map(function(O,r){return{id:-1*(r+100),path:O.path,key:vt(O.path),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})).reduce(function(O,r){return Object(P.a)(Object(P.a)({},O),{},Object(k.a)({},r.key,r))},{}),xe=Object(P.a)({logo:{id:-1,key:"logo",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"image",data:"EscolaLMS"},frontURL:{id:-2,key:"frontURL",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},showProjectTypeInProgram:{id:-3,key:"showProjectTypeInProgram",group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1},maxLessonsNestingInProgram:{id:-4,key:"maxLessonsNestingInProgram",group:"global",value:"0",public:!0,enumerable:!0,sort:1,type:"number",data:0}},pt),gt=function(){var r=Object(u.useState)(!1),n=Object(x.a)(r,2),l=n[0],f=n[1],C=Object(u.useRef)(),s=Object(a.l)(),M=Object(a.m)("@@initialState"),D=M.setInitialState,m=M.initialState,W=[{title:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0,render:function(T,i){return i.value}},{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(T,i){return[i.id>0?Object(t.jsx)(j.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(d.a,{type:"primary",icon:Object(t.jsx)(Re.a,{}),onClick:function(){return f(i.id)}})},"edit"):Object(t.jsx)(j.a,{title:Object(t.jsx)(a.a,{id:"create",defaultMessage:"create"}),children:Object(t.jsx)(d.a,{type:"primary",icon:Object(t.jsx)(re.a,{}),onClick:function(){f(xe[i.key]||-1)}})},"create"),Object(t.jsx)(I.a,{title:Object(t.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(b.a)(Object(p.a)().mark(function o(){var h;return Object(p.a)().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,ft(s,i.id);case 2:h=K.sent,h&&(f(!1),C.current&&C.current.reload());case 4:case"end":return K.stop()}},o)})),okText:Object(t.jsx)(a.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(a.a,{id:"no",defaultMessage:"No"}),children:i.id>0?Object(t.jsx)(j.a,{title:Object(t.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(d.a,{type:"primary",icon:Object(t.jsx)(Ne.a,{}),danger:!0})}):null},"delete")]}}],R=function(T){var i;if(!!T&&(!(m!=null&&(i=m.config)!==null&&i!==void 0&&i.length)&&T&&D(Object(P.a)(Object(P.a)({},m),{},{config:[T]})),!!(m!=null&&m.config))){var o=m==null?void 0:m.config.map(function(h){return h.key===T.key?Object(P.a)(Object(P.a)({},h),T):h});D(Object(P.a)(Object(P.a)({},m),{},{config:o}))}};return Object(t.jsxs)(V.a.Fragment,{children:[Object(t.jsx)(je.a,{headerTitle:s.formatMessage({id:"menu.settings"}),search:!1,toolBarRender:!1,actionRef:C,rowKey:"id",request:function(T){var i=T.pageSize,o=T.current;return Object(F.f)({pageSize:i,current:o,group:"global"}).then(function(h){if(h.success){var w=[].concat(Object(ye.a)(Object.keys(xe).map(function(K){return h.data.find(function(ee){return ee.key===K})||xe[K]})),Object(ye.a)(h.data.filter(function(K){return!Object.keys(xe).includes(K.key)})));return{data:w,total:w.length,success:!0}}return[]})},columns:W}),Object(t.jsx)(We,{groups:[],id:l,visible:l,initialData:xe,onVisibleChange:function(T){return!T&&f(!1)},onFinish:function(){var g=Object(b.a)(Object(p.a)().mark(function T(i){var o,h,w,K;return Object(p.a)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return o=i,o.type==="number"&&(o=Object(P.a)(Object(P.a)({},o),{},{value:String(o.data)})),o.type==="boolean"&&(o=Object(P.a)(Object(P.a)({},o),{},{value:o.data})),Z.next=5,Ot(s,o,Number(l));case 5:h=Z.sent,w=h.success,K=h.updatedSettings,w&&(K!=null&&K.success&&R(K.data),f(!1),C.current&&C.current.reload());case 9:case"end":return Z.stop()}},T)}));return function(T){return g.apply(this,arguments)}}()})]})},ht=gt,_t=e("I5X1"),Et=function(r){return r.replaceAll("escolalms","").split("_").join("")},Mt=U.default=function(){var O=Object(Y.l)(),r=Object(a.l)(),n=O.tab,l=n===void 0?"user_settings":n,f=Object(u.useState)(),C=Object(x.a)(f,2),s=C[0],M=C[1],D=Object(u.useCallback)(function(){Object(F.a)().then(function(g){g.success&&M(g.data)})},[]),m=Object(_t.a)("@@initialState"),W=m.initialState,R=Object(u.useCallback)(function(){var g;return(W==null||(g=W.config)===null||g===void 0?void 0:g.length)!==0},[W]);return Object(u.useEffect)(function(){D()},[]),s?Object(t.jsxs)(A.a,{title:Object(t.jsx)(a.a,{id:"settings"}),header:{breadcrumb:{routes:[{path:"settings",breadcrumbName:r.formatMessage({id:"menu.Configuration.settings"})},{path:String(l),breadcrumbName:String(l)}]}},children:[!R()&&Object(t.jsx)(N.a,{message:Object(t.jsx)(a.a,{id:"global_settings_alert_title",defaultMessage:"Add global settings"}),description:Object(t.jsx)(a.a,{id:"global_settings_alert_description",defaultMessage:"Global settings are used to configure the entire LMS. You can add global settings by clicking the button below."}),type:"warning",showIcon:!0,style:{marginBottom:"20px"}}),Object(t.jsxs)(B.a,{tabs:{type:"card",activeKey:l,onChange:function(T){return a.f.push("/configuration/settings/".concat(T))}},children:[Object(t.jsx)(B.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"user.settings"}),children:Object(t.jsx)(qe,{})},"user_settings"),Object(t.jsx)(B.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"global_settings"}),children:Object(t.jsx)(ht,{})},"global_settings"),Object.keys(s).map(function(g){return Object(t.jsxs)(B.a.TabPane,{tab:Object(t.jsxs)("span",{children:[Object(t.jsx)(a.a,{id:"package"})," ",Et(g)]}),children:[Object(t.jsx)(dt,{values:s,packageName:g,onValueUpdated:function(){return D()}}),g]},g)})]})]}):Object(t.jsx)(J.a,{})}},hd5d:function(le,U,e){"use strict";var L=e("qLMh"),N=e("9og8"),y=e("q1tI"),J=e.n(y),x=e("3Ef1"),u=e.n(x),V=e("BAh9"),B=e("vtG9"),Y=e.n(B),a=e("9kvl"),A=e("nKUr"),F=e.n(A),v=function(_){var j=_.value,E=_.onChange,d=_.directory,X=d===void 0?"/wysiwyg":d,S=Object(a.l)();return Object(A.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(A.jsx)(u.a,{uploadImage:function(){var k=Object(N.a)(Object(L.a)().mark(function p(P){var ae,z;return Object(L.a)().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,Object(V.e)(P,X);case 2:if(ae=re.sent,!ae.success){re.next=6;break}return z=ae.data[0].name.includes("/")?ae.data[0].name:"".concat(X).concat(ae.data[0].name),re.abrupt("return",Object(V.d)(z,1e3));case 6:throw new Error("Error while uploading");case 7:case"end":return re.stop()}},p)}));return function(p){return k.apply(this,arguments)}}(),defaultValue:j||"",onChange:function(p){return E&&E(p())},placeholder:S.formatMessage({id:"wysiwyg_placeholder"})})})};U.a=v},lLVY:function(le,U,e){},tneF:function(le,U,e){"use strict";var L=e("sRBo"),N=e("kaz8"),y=e("VTBJ"),J=e("Ff2n"),x=e("nKUr"),u=e.n(x),V=e("uX+g"),B=e("q1tI"),Y=e.n(B),a=e("WFLz"),A=e("adzw"),F=["options","fieldProps","proFieldProps","valueEnum"],v=Y.a.forwardRef(function(E,d){var X=E.options,S=E.fieldProps,k=E.proFieldProps,p=E.valueEnum,P=Object(J.a)(E,F);return Object(x.jsx)(A.a,Object(y.a)({ref:d,valueType:"checkbox",valueEnum:Object(V.a)(p,void 0),fieldProps:Object(y.a)({options:X},S),lightProps:Object(y.a)({labelFormatter:function(){return Object(x.jsx)(A.a,Object(y.a)({ref:d,valueType:"checkbox",mode:"read",valueEnum:Object(V.a)(p,void 0),filedConfig:{customLightMode:!0},fieldProps:Object(y.a)({options:X},S),proFieldProps:k},P))}},P.lightProps),proFieldProps:k},P))}),I=Y.a.forwardRef(function(E,d){var X=E.fieldProps,S=E.children;return Object(x.jsx)(N.a,Object(y.a)(Object(y.a)({ref:d},X),{},{children:S}))}),_=Object(a.a)(I,{valuePropName:"checked"}),j=_;j.Group=v,U.a=j},vtG9:function(le,U,e){}}]);
