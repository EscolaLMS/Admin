(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{"0TUn":function(W,E,e){"use strict";e.d(E,"c",function(){return c}),e.d(E,"a",function(){return d}),e.d(E,"b",function(){return s});var f=e("qLMh"),P=e("k1fw"),O=e("9og8"),u=e("9kvl");function c(i,n){return v.apply(this,arguments)}function v(){return v=Object(O.a)(Object(f.a)().mark(function i(n,b){return Object(f.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(u.i)("/api/model-fields",Object(P.a)({method:"GET",params:n},b||{})));case 1:case"end":return l.stop()}},i)})),v.apply(this,arguments)}function d(i,n){return j.apply(this,arguments)}function j(){return j=Object(O.a)(Object(f.a)().mark(function i(n,b){return Object(f.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(u.i)("/api/admin/model-fields",Object(P.a)({method:"POST",data:n},b||{})));case 1:case"end":return l.stop()}},i)})),j.apply(this,arguments)}function s(i,n){return r.apply(this,arguments)}function r(){return r=Object(O.a)(Object(f.a)().mark(function i(n,b){return Object(f.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(u.i)("/api/admin/model-fields",Object(P.a)({method:"DELETE",data:n},b||{})));case 1:case"end":return l.stop()}},i)})),r.apply(this,arguments)}},BiO0:function(W,E,e){"use strict";var f=e("VTBJ"),P=e("Ff2n"),O=e("nKUr"),u=e.n(O),c=e("q1tI"),v=e.n(c),d=e("adzw"),j=["fieldProps","proFieldProps"],s=function(i,n){var b=i.fieldProps,o=i.proFieldProps,l=Object(P.a)(i,j);return Object(O.jsx)(d.a,Object(f.a)({ref:n,valueType:"textarea",fieldProps:b,proFieldProps:o},l))};E.a=v.a.forwardRef(s)},Jfn2:function(W,E,e){"use strict";var f=e("k1fw"),P=e("XCrF"),O=e("1GRj"),u=e("PpiC"),c=e("q1tI"),v=e.n(c),d=e("nKUr"),j=e.n(d),s=["path","size","srcSizes","alt"],r=function(n){var b=n.path,o=n.size,l=n.srcSizes,p=n.alt,h=p===void 0?"LMS Image":p,x=Object(u.a)(n,s),a="".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/images/img?path=").concat(b,"&w=").concat(l?l[0]:o),m=l&&l.map(function(g){return"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/images/img?path=").concat(b,"&w=").concat(g," ").concat(g,"w")});return Object(d.jsx)("div",{className:"escolalms-image",children:Object(d.jsx)(O.a,Object(f.a)({src:a,srcSet:m&&m.join(","),alt:h},x))})};E.a=r},TpMl:function(W,E,e){"use strict";var f=e("tJVT"),P=e("q1tI"),O=e.n(P),u=e("0TUn"),c=function(d){var j=Object(P.useState)({state:"initial"}),s=Object(f.a)(j,2),r=s[0],i=s[1];return Object(P.useEffect)(function(){i({state:"loading"}),Object(u.c)({class_type:d}).then(function(n){n.success&&i({state:"loaded",list:n.data})})},[d]),r};E.a=c},YDZB:function(W,E,e){"use strict";var f=e("2qtc"),P=e("kLXV"),O=e("7Kak"),u=e("9yH6"),c=e("+L6B"),v=e("2/Rp"),d=e("tJVT"),j=e("q1tI"),s=e.n(j),r=e("gU/Y"),i=e("9kvl"),n=e("u95b"),b=e.n(n),o=e("nKUr"),l=e.n(o),p=function(x){var a=x.value,m=x.onChange,g=Object(j.useState)(!1),F=Object(d.a)(g,2),y=F[0],z=F[1],Z=Object(j.useCallback)(function(){z(!1)},[]),k=Object(j.useState)("code"),w=Object(d.a)(k,2),t=w[0],q=w[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)(v.a,{type:"primary",onClick:function(){return z(!0)},size:"small",children:Object(o.jsx)(i.a,{id:"json_editor"})}),Object(o.jsxs)(P.a,{title:"JSON",visible:y,onOk:Z,onCancel:Z,children:[Object(o.jsxs)(u.a.Group,{onChange:function(N){return q(N.target.value)},value:t,children:[Object(o.jsx)(u.a,{value:"tree",children:"tree"}),Object(o.jsx)(u.a,{value:"view",children:"view"}),Object(o.jsx)(u.a,{value:"form",children:"form"}),Object(o.jsx)(u.a,{value:"code",children:"code"}),Object(o.jsx)(u.a,{value:"text",children:"text"})]}),Object(o.jsx)(r.a,{mode:t,value:a,onChange:function(N){return m&&m(N)}},t)]})]})};E.a=p},YDsB:function(W,E,e){"use strict";var f=e("YDZB"),P=e("FJDo"),O=e("tneF"),u=e("Qurx"),c=e("VMEa"),v=e("BiO0"),d=e("q1tI"),j=e.n(d),s=e("9kvl"),r=e("nKUr"),i=e.n(r),n=function(o){var l=o.field,p=Object(s.l)(),h=function(a){var m=a&&a.extra&&a.extra.find(function(g){return g[Object(s.e)()]});switch(a.type){case"number":return Object(r.jsx)(P.a,{width:"md",name:a.name,label:m?m[Object(s.e)()]:Object(r.jsx)(s.a,{id:a.name}),tooltip:Object(r.jsx)(s.a,{id:a.name}),placeholder:p.formatMessage({id:a.name,defaultMessage:a.name}),min:1,max:1024,fieldProps:{step:1}});case"boolean":return Object(r.jsx)(O.a,{name:a.name,children:m?m[Object(s.e)()]:Object(r.jsx)(s.a,{id:a.name})});case"varchar":return Object(r.jsx)(u.a,{width:"md",name:a.name,label:m?m[Object(s.e)()]:Object(r.jsx)(s.a,{id:a.name}),tooltip:Object(r.jsx)(s.a,{id:a.name}),placeholder:p.formatMessage({id:a.name})});case"json":return Object(r.jsx)(c.a.Item,{name:a.name,label:m?m[Object(s.e)()]:Object(r.jsx)(s.a,{id:a.name}),tooltip:Object(r.jsx)(s.a,{id:a.name}),valuePropName:"value",children:Object(r.jsx)(f.a,{})});case"text":default:return Object(r.jsx)(v.a,{width:"md",name:a.name,label:m?m[Object(s.e)()]:Object(r.jsx)(s.a,{id:a.name}),tooltip:Object(r.jsx)(s.a,{id:a.name}),placeholder:p.formatMessage({id:a.name})})}};return Object(r.jsx)(r.Fragment,{children:h(l)})};E.a=n},fWLy:function(W,E,e){"use strict";e.r(E);var f=e("T2oS"),P=e("W9HT"),O=e("miYZ"),u=e("tsqr"),c=e("qLMh"),v=e("k1fw"),d=e("9og8"),j=e("tJVT"),s=e("q1tI"),r=e.n(s),i=e("VMEa"),n=e("Qurx"),b=e("nhC9"),o=e("VK58"),l=e("TpMl"),p=e("tMyG"),h=e("Jfn2"),x=e("Ty5D"),a=e("9kvl"),m=e("+L6B"),g=e("2/Rp"),F=e("Qiat"),y=e("xvlK"),z=e("Xcxh"),Z=e("y8nQ"),k=e("Vl3Y"),w=e("rmhi"),t=e("nKUr"),q=function(M){var L=Object(a.l)(),B=M.visible,G=M.onVisibleChange,S=M.onFinish,J=k.a.useForm(),D=Object(j.a)(J,1),V=D[0];return Object(s.useEffect)(function(){return function(){V.resetFields()}},[]),Object(t.jsx)(w.a,{form:V,title:L.formatMessage({id:"newSetting",defaultMessage:"newSetting"}),width:"30vw",visible:B,onVisibleChange:G,onFinish:S,children:Object(t.jsxs)(i.a.Group,{children:[Object(t.jsx)(n.a,{label:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"}),Object(t.jsx)(n.a,{label:Object(t.jsx)(a.a,{id:"value",defaultMessage:"value"}),rules:[{required:!0}],width:"md",name:"value"})]})})},H=q,N=function(M){var L=M.user,B=M.isProfile,G=B===void 0?!1:B,S=Object(s.useRef)(),J=Object(a.l)(),D=Object(s.useState)(!1),V=Object(j.a)(D,2),Q=V[0],$=V[1],T=Object(s.useState)("PATCH"),C=Object(j.a)(T,2),I=C[0],A=C[1],K=[{title:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInSearch:!0}],R=Object(s.useCallback)(function(_){var U=_&&Object.entries(_).map(function(X){return{key:X[0],value:X[1]}});return U},[L]);return Object(t.jsxs)(r.a.Fragment,{children:[Object(t.jsx)(F.a,{headerTitle:J.formatMessage({id:"menu.settings"}),actionRef:S,rowKey:"id",search:!1,toolBarRender:G?function(){return[Object(t.jsxs)(g.a,{type:"primary",onClick:function(){$(-1),A("PATCH")},children:[Object(t.jsx)(y.a,{})," ",Object(t.jsx)(a.a,{id:"pages.searchTable.new"})]},"primary"),Object(t.jsxs)(g.a,{color:"yellow",type:"primary",onClick:function(){$(-1),A("PUT")},children:[Object(t.jsx)(z.a,{})," ",Object(t.jsx)(a.a,{id:"user.settings.overwrite"})]},"primary")]}:!1,request:function(){return Object(o.e)(Number(L)).then(function(U){return U.success?{data:R(U.data)}:[]})},columns:K}),Object(t.jsx)(H,{id:Q,visible:Number.isInteger(Q),onVisibleChange:function(U){return U===!1&&$(!1)},onFinish:function(){var _=Object(d.a)(Object(c.a)().mark(function U(X){var te;return Object(c.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,Object(o.h)(Number(L),I,X);case 2:te=Y.sent,te.success&&($(!1),S.current&&S.current.reload());case 4:case"end":return Y.stop()}},U)}));return function(U){return _.apply(this,arguments)}}()})]})},ae=N,se=e("YDsB"),re=e("02ly"),ne=E.default=function(){var ee=Object(x.l)(),M=Object(a.l)(),L=ee.tab,B=L===void 0?"general":L,G=Object(l.a)("EscolaLms\\Auth\\Models\\User"),S=Object(s.useState)(),J=Object(j.a)(S,2),D=J[0],V=J[1];Object(s.useEffect)(function(){var T=function(){var C=Object(d.a)(Object(c.a)().mark(function I(){var A;return Object(c.a)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,Object(o.f)();case 2:A=R.sent,A.success&&V(Object(v.a)(Object(v.a)({},A.data),{},{bio:A.data.bio||""}));case 4:case"end":return R.stop()}},I)}));return function(){return C.apply(this,arguments)}}();T()},[]);var Q=Object(s.useMemo)(function(){return{onFinish:function(){var T=Object(d.a)(Object(c.a)().mark(function I(A){var K;return Object(c.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,Object(o.i)(A);case 2:K=_.sent,u.b.success(K.message);case 4:case"end":return _.stop()}},I)}));function C(I){return T.apply(this,arguments)}return C}(),initialValues:D}},[D]),$=Object(s.useMemo)(function(){return{onFinish:function(){var T=Object(d.a)(Object(c.a)().mark(function I(A){var K;return Object(c.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,Object(o.j)(A);case 2:K=_.sent,u.b.success(K.message);case 4:case"end":return _.stop()}},I)}));function C(I){return T.apply(this,arguments)}return C}(),initialValues:D}},[D]);return D?Object(t.jsx)(p.a,{title:Object(t.jsx)(a.a,{id:"my_profile"}),header:{breadcrumb:{routes:[{path:"users",breadcrumbName:M.formatMessage({id:"menu.Users"})},{path:"me",breadcrumbName:M.formatMessage({id:"my_profile"})},{path:String(B),breadcrumbName:M.formatMessage({id:String(B)})}]}},children:Object(t.jsxs)(b.a,{tabs:{type:"card",activeKey:B,onChange:function(C){return a.f.push("/users/me/".concat(C))}},children:[Object(t.jsx)(b.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"general"}),children:Object(t.jsxs)(i.a,Object(v.a)(Object(v.a)({},Q),{},{children:[Object(t.jsxs)(i.a.Group,{children:[Object(t.jsx)(n.a,{width:"md",name:"first_name",label:Object(t.jsx)(a.a,{id:"first_name"}),tooltip:Object(t.jsx)(a.a,{id:"first_name"}),placeholder:M.formatMessage({id:"first_name"}),required:!0}),Object(t.jsx)(n.a,{width:"md",name:"last_name",label:Object(t.jsx)(a.a,{id:"last_name"}),tooltip:Object(t.jsx)(a.a,{id:"last_name"}),placeholder:M.formatMessage({id:"last_name"}),required:!0})]}),Object(t.jsx)(i.a.Group,{children:G.state==="loaded"&&G.list.map(function(T){return Object(t.jsx)(se.a,{field:T},T.id)})}),Object(t.jsx)(i.a.Group,{children:Object(t.jsxs)(i.a.Item,{name:"avatar",label:Object(t.jsx)(a.a,{id:"avatar"}),children:[D.path_avatar&&Object(t.jsx)(h.a,{path:D.path_avatar,size:600,width:200}),Object(t.jsx)(re.a,{folder:"avatars/".concat(D.id),url:"/api/profile/upload-avatar",name:"avatar",accept:"image/*",onUpload:function(C){C.success}})]})})]}))},"general"),Object(t.jsx)(b.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"change_password"}),children:Object(t.jsxs)(i.a,Object(v.a)(Object(v.a)({},$),{},{children:[Object(t.jsx)(i.a.Group,{children:Object(t.jsx)(n.a.Password,{width:"md",name:"current_password",label:Object(t.jsx)(a.a,{id:"current_password"}),placeholder:M.formatMessage({id:"current_password"}),required:!0})}),Object(t.jsxs)(i.a.Group,{children:[Object(t.jsx)(n.a.Password,{width:"md",name:"new_password",label:Object(t.jsx)(a.a,{id:"new_password"}),placeholder:M.formatMessage({id:"new_password"}),required:!0}),Object(t.jsx)(n.a.Password,{width:"md",name:"new_confirm_password",label:Object(t.jsx)(a.a,{id:"new_confirm_password"}),placeholder:M.formatMessage({id:"new_confirm_password"}),required:!0})]})]}))},"change_password"),Object(t.jsx)(b.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"user.settings"}),children:Object(t.jsx)(ae,{user:String(D.id),isProfile:!0})},"user_settings")]})}):Object(t.jsx)(P.a,{})}},tneF:function(W,E,e){"use strict";var f=e("sRBo"),P=e("kaz8"),O=e("VTBJ"),u=e("Ff2n"),c=e("nKUr"),v=e.n(c),d=e("uX+g"),j=e("q1tI"),s=e.n(j),r=e("WFLz"),i=e("adzw"),n=["options","fieldProps","proFieldProps","valueEnum"],b=s.a.forwardRef(function(h,x){var a=h.options,m=h.fieldProps,g=h.proFieldProps,F=h.valueEnum,y=Object(u.a)(h,n);return Object(c.jsx)(i.a,Object(O.a)({ref:x,valueType:"checkbox",valueEnum:Object(d.a)(F,void 0),fieldProps:Object(O.a)({options:a},m),lightProps:Object(O.a)({labelFormatter:function(){return Object(c.jsx)(i.a,Object(O.a)({ref:x,valueType:"checkbox",mode:"read",valueEnum:Object(d.a)(F,void 0),filedConfig:{customLightMode:!0},fieldProps:Object(O.a)({options:a},m),proFieldProps:g},y))}},y.lightProps),proFieldProps:g},y))}),o=s.a.forwardRef(function(h,x){var a=h.fieldProps,m=h.children;return Object(c.jsx)(P.a,Object(O.a)(Object(O.a)({ref:x},a),{},{children:m}))}),l=Object(r.a)(o,{valuePropName:"checked"}),p=l;p.Group=b,E.a=p}}]);
