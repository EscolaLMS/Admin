{"version":3,"sources":["webpack:///./src/services/escola-lms/enums.ts","webpack:///./src/pages/CompetencyChallenges/components/MainForm.tsx","webpack:///./src/pages/CompetencyChallenges/components/Scales.tsx","webpack:///./src/pages/CompetencyChallenges/components/DiagnosticTest.tsx","webpack:///./src/pages/CompetencyChallenges/form.tsx","webpack:///./src/services/escola-lms/competency-challenges.ts","webpack:///./src/pages/CompetencyChallenges/components/CompetencyChallengeCategoryTree.tsx","webpack:///./src/components/WysiwygMarkdown/index.tsx","webpack:///./src/pages/CompetencyChallenges/context.tsx","webpack:///./src/components/GiftQuizQuestions/editor/question/MultipleChoice.tsx","webpack:///./src/components/GiftQuizQuestions/editor/question/TrueFalse.tsx","webpack:///./src/components/GiftQuizQuestions/editor/question/ShortAnswers.tsx","webpack:///./src/components/GiftQuizQuestions/editor/question/Matching.tsx","webpack:///./src/components/GiftQuizQuestions/editor/question/Numerical.tsx","webpack:///./src/components/GiftQuizQuestions/editor/question/Essay.tsx","webpack:///./src/components/GiftQuizQuestions/editor/question/index.tsx","webpack:///./src/components/GiftQuizQuestions/editor/utils.ts","webpack:///./src/components/GiftQuizQuestions/editor/index.tsx","webpack:///./src/components/GiftQuizQuestions/table.tsx"],"names":["TopicType","EventTypes","CourseStatus","TemplateChannelValue","TemplateEvents","VouchersTypes","QuestionType","AttendanceValue","ExamGradeType","CompetencyChallengeType","typeOptions","Object","values","map","value","label","MainForm","useCompetencyChallengeContext","competencyChallenge","categoryDepths","refreshData","params","useParams","competency_challenge_id","Number","id","intl","useIntl","ProForm","useForm","form","selectedType","useWatch","isNew","isNaN","initialValues","useMemo","data","authors","category","restValues","category_id","addCompetencyChallenge","useCallback","name","type","is_active","createCompetencyChallenge","res","success","error","message","formatMessage","history","push","changeCompetencyChallenge","formValues","getFieldsValue","image_url","image_path","updateCompetencyChallenge","changedValues","setFieldValue","required","main","width","maxWidth","info","file","response","paths","setFieldsValue","staticColumns","title","dataIndex","editable","render","_n","record","split","state","valueType","formItemProps","rules","min","max","fieldProps","category_name","renderFormItem","_s","_c","disabledNodes","getFieldValue","getDefaultData","scales","scale_min","name_with_breadcrumbs","Scales","useState","editableKeys","setEditableRowKeys","formRef","useRef","editableFormRef","actionRef","defaultData","columns","_i","action","startEditable","idStr","currentData","current","filter","deleteCompetencyChallengeScale","table","r","creatorButtonText","disabled","length","index","onlyOneLineEditorAlertMessage","onSave","_k","createCompetencyChallengeScale","updateCompetencyChallengeScale","deletePopconfirmMessage","actionRender","dom","save","delete","cancel","onChange","DiagnosticTest","loading","setLoading","quizData","setQuizData","fetchQuiz","quiz_id","undefined","getGiftQuiz","then","finally","onFormFinish","formData","updateGiftQuiz","useEffect","position","paddingBottom","_p","reset","submit","bottom","left","defaultMessage","questions","CompetencyChallengeContent","tab","pageTitle","breadcrumb","routes","path","breadcrumbName","String","padding","cardProps","activeKey","key","CompetencyChallenge","options","request","method","useCache","body","headers","competency_challenge_scale_id","treeConvert","enabledDepth","depth","subcategories","includes","children","cat","CompetencyChallengeCategoryTree","categories","setCategories","categoriesToShow","treeData","categoryTree","maxHeight","overflow","EmbedUploaded","attrs","href","filename","pop","FormWysiwyg","directory","matcher","url","component","upload","result","resizePath","resizedImage","Error","v","scale","question","console","warn","Context","React","createContext","useContext","CompetencyChallengeContextProvider","setCompetencyChallenge","setCategoryDepths","prev","getCompetencyChallenge","errors","fetchCategoryDepths","getConfig","escolalms_competency_challenge","INITIAL_VALUES","MULTIPLE_CHOICE","isCorrect","MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS","weight","GiftQuizQuestionMultipleChoiceEditor","field","i","count","ordinalNumber","remove","display","justifyContent","validator","answers","answer","Promise","reject","resolve","MAX_SAFE_INTEGER","addonAfter","GiftQuizQuestionTrueFalseEditor","GiftQuizQuestionShortEditor","tooltipText","_f","_a","deleteButton","firstOfPair","secondOfPair","GiftQuizQuestionMatchingEditor","style","flexWrap","GiftQuizQuestionNumericalEditor","GiftQuizQuestionEssayEditor","GiftQuizQuestion","TRUE_FALSE","SHORT_ANSWERS","MATCHING","NUMERICAL_QUESTION","ESSAY","DESCRIPTION","parseMultipleChoice","giftString","sign","trim","parseMultipleChoiceWithMultipleRightAnswers","parseTrueFalse","parseShortAnswers","parseMatching","parseNumerical","errorMargin","parseEssay","parseDescription","parseToGIFT","parseMultipleChoiceToFormData","parsedValue","score","stem","text","isMultipleChoice","choices","every","reduce","acc","parseTrueFalseToFormData","isTrue","parseShortAnswersToFormData","parseMatchingToFormData","matchPairs","subquestion","subanswer","parseNumericalToFormData","Array","isArray","number","range","parseDescriptionEssayToFormData","questionBase","parse","VALUES_NOT_TO_RESET","TYPE_OPTIONS","q","GiftQuizQuestionEditor","onSubmit","competencyChallengeCategoryTreeProps","parseToFormData","onFinish","status","resetFields","fields","fieldsToReset","keys","DragHandle","SortableHandle","cursor","color","SortableItem","SortableElement","props","SortContainer","SortableContainer","className","hideInForm","hideInSearch","hideInSetting","_","row","obj","categoryColumn","Table","onAdded","onRemoved","onEdited","quizId","tableLoading","tableHeader","questionsCategory","newQuestion","setNewQuestion","editQuestion","setEditQuestion","debug","setDebug","dataSource","setDataSource","reload","onSortEnd","oldIndex","newIndex","newData","arrayMoveImmutable","slice","Boolean","order","forEach","newRow","updateQuestion","topic_gift_quiz_id","DraggableContainer","DraggableBodyRow","restProps","findIndex","x","onNewQuestionSubmit","createQuestion","log","onEditQuestionSubmit","bodyStyle","settings","deleteQuestion","wrapper","marginTop"],"mappings":"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","file":"p__CompetencyChallenges__form.14178d04.async.js","sourcesContent":["export enum TopicType {\n  Unselected = '',\n  RichText = 'EscolaLms\\\\TopicTypes\\\\Models\\\\TopicContent\\\\RichText',\n  OEmbed = 'EscolaLms\\\\TopicTypes\\\\Models\\\\TopicContent\\\\OEmbed',\n  Audio = 'EscolaLms\\\\TopicTypes\\\\Models\\\\TopicContent\\\\Audio',\n  Video = 'EscolaLms\\\\TopicTypes\\\\Models\\\\TopicContent\\\\Video',\n  H5P = 'EscolaLms\\\\TopicTypes\\\\Models\\\\TopicContent\\\\H5P',\n  Image = 'EscolaLms\\\\TopicTypes\\\\Models\\\\TopicContent\\\\Image',\n  PDF = 'EscolaLms\\\\TopicTypes\\\\Models\\\\TopicContent\\\\PDF',\n  SCORM = 'EscolaLms\\\\TopicTypes\\\\Models\\\\TopicContent\\\\ScormSco',\n  Project = 'EscolaLms\\\\TopicTypeProject\\\\Models\\\\Project',\n  GiftQuiz = 'EscolaLms\\\\TopicTypeGift\\\\Models\\\\GiftQuiz',\n}\n\nexport enum EventTypes {\n  OrderPaid = 'EscolaLms\\\\Cart\\\\Events\\\\OrderPaid',\n  UserLogged = 'EscolaLms\\\\Auth\\\\Events\\\\UserLogged',\n}\n\nexport enum CourseStatus {\n  draft = 'draft',\n  published = 'published',\n  archived = 'archived',\n}\n\nexport enum TemplateChannelValue {\n  email = 'EscolaLms\\\\TemplatesEmail\\\\Core\\\\EmailChannel',\n  pdf = 'EscolaLms\\\\TemplatesPdf\\\\Core\\\\PdfChannel',\n  sms = 'EscolaLms\\\\TemplatesSms\\\\Core\\\\SmsChannel',\n}\n\nexport enum TemplateEvents {\n  ManuallyTriggeredEvent = 'EscolaLms\\\\Templates\\\\Events\\\\ManuallyTriggeredEvent',\n}\n\nexport enum VouchersTypes {\n  cart_fixed = 'cart_fixed',\n  cart_percent = 'cart_percent',\n  product_fixed = 'product_fixed',\n  product_percent = 'product_percent',\n}\n\nexport type BuyableTypes =\n  | 'App\\\\Models\\\\Course'\n  | 'App\\\\Models\\\\Consultation'\n  | 'App\\\\Models\\\\Webinar'\n  | 'App\\\\Models\\\\StationaryEvent'\n  | 'EscolaLms\\\\Courses\\\\Models\\\\Course'\n  | 'EscolaLms\\\\Consultations\\\\Models\\\\Consultation'\n  | 'EscolaLms\\\\Webinars\\\\Models\\\\Webinar'\n  | 'EscolaLms\\\\StationaryEvents\\\\Models\\\\StationaryEvent';\n\nexport enum QuestionType {\n  MULTIPLE_CHOICE = 'multiple_choice',\n  MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS = 'multiple_choice_with_multiple_right_answers',\n  TRUE_FALSE = 'true_false',\n  SHORT_ANSWERS = 'short_answers',\n  MATCHING = 'matching',\n  NUMERICAL_QUESTION = 'numerical_question',\n  ESSAY = 'essay',\n  DESCRIPTION = 'description',\n}\n\nexport enum AttendanceValue {\n  PRESENT = 'present',\n  PRESENT_NOT_EXERCISING = 'present_not_exercising',\n  ABSENT = 'absent',\n  EXCUSED_ABSENCE = 'excused_absence',\n}\n\nexport enum ExamGradeType {\n  Manual = 'manual',\n  TeamsForms = 'teams_forms',\n  TeamsLecture = 'teams_lecture',\n  TestPortal = 'test_portal',\n}\n\nexport enum CompetencyChallengeType {\n  Simple = 'simple',\n  Complex = 'complex',\n}\n","import React, { useCallback, useMemo } from 'react';\nimport { FormattedMessage, history, useIntl, useParams } from 'umi';\nimport { message } from 'antd';\nimport ProForm, {\n  ProFormSelect,\n  ProFormSwitch,\n  ProFormText,\n  ProFormTextArea,\n} from '@ant-design/pro-form';\n\nimport CategoryTree from '@/components/CategoryTree';\nimport UserSelect from '@/components/UserSelect';\nimport ProFormImageUpload from '@/components/ProFormImageUpload';\nimport WysiwygMarkdown from '@/components/WysiwygMarkdown';\nimport {\n  createCompetencyChallenge,\n  updateCompetencyChallenge,\n} from '@/services/escola-lms/competency-challenges';\nimport { CompetencyChallengeType } from '@/services/escola-lms/enums';\nimport { useCompetencyChallengeContext } from '../context';\n\nconst typeOptions = Object.values(CompetencyChallengeType).map((value) => ({\n  value,\n  label: <FormattedMessage id={`CompetencyChallenges.types.${value}`} />,\n}));\n\nexport const MainForm: React.FC = () => {\n  const { competencyChallenge, categoryDepths, refreshData } = useCompetencyChallengeContext();\n  const params = useParams<{ id?: string }>();\n  const competency_challenge_id = Number(params.id);\n\n  const intl = useIntl();\n  const [form] = ProForm.useForm();\n  const selectedType = ProForm.useWatch('type', form);\n\n  const isNew = Number.isNaN(competency_challenge_id);\n\n  const initialValues = useMemo(() => {\n    if (!competencyChallenge?.data) return {};\n    const { authors, category, ...restValues } = competencyChallenge?.data;\n\n    return { ...restValues, authors: authors.map(({ id }) => id), category_id: category?.id };\n  }, [competencyChallenge?.data]);\n\n  const addCompetencyChallenge = useCallback(\n    async ({ name, type, is_active = false, category_id }: API.CreateCompetencyChallenge) => {\n      try {\n        const res = await createCompetencyChallenge({ name, is_active, type, category_id });\n\n        if (!res.success) {\n          message.error(res.message);\n          return;\n        }\n\n        message.success(intl.formatMessage({ id: res.message }));\n        history.push(`/competency-challenges/${res.data.id}/main`);\n        await refreshData();\n      } catch {\n        message.error(intl.formatMessage({ id: 'error' }));\n      }\n    },\n    [],\n  );\n\n  const changeCompetencyChallenge = useCallback(\n    async (formValues: API.UpdateCompetencyChallenge) => {\n      try {\n        // those values don't have inputs, so we have to do it manually\n        const { image_url, image_path }: { image_url: string; image_path: string } =\n          form.getFieldsValue(['image_url', 'image_path']);\n\n        const res = await updateCompetencyChallenge(competency_challenge_id, {\n          ...formValues,\n          image_url,\n          image_path,\n        });\n\n        if (!res.success) {\n          message.error(res.message);\n          return;\n        }\n\n        message.success(intl.formatMessage({ id: res.message }));\n        await refreshData();\n      } catch {\n        message.error(intl.formatMessage({ id: 'error' }));\n      }\n    },\n    [competency_challenge_id],\n  );\n\n  return (\n    <ProForm\n      form={form}\n      initialValues={initialValues}\n      onFinish={isNew ? addCompetencyChallenge : changeCompetencyChallenge}\n      onValuesChange={(changedValues) => {\n        if (changedValues?.type === 'complex') {\n          form.setFieldValue('category', null);\n        }\n      }}\n    >\n      <ProForm.Group title={<FormattedMessage id=\"CompetencyChallenges.base\" />}>\n        <ProFormText\n          width=\"md\"\n          name=\"name\"\n          label={<FormattedMessage id=\"name\" />}\n          placeholder={intl.formatMessage({ id: 'name' })}\n          required\n          rules={[{ required: true, message: intl.formatMessage({ id: 'field_required' }) }]}\n        />\n        <ProFormSelect\n          width=\"md\"\n          name=\"type\"\n          label={<FormattedMessage id=\"type\" />}\n          options={typeOptions}\n          required\n          rules={[{ required: true, message: intl.formatMessage({ id: 'field_required' }) }]}\n        />\n        {selectedType === 'simple' && (\n          <ProForm.Item\n            name=\"category_id\"\n            required\n            label={<FormattedMessage id=\"category\" />}\n            rules={[{ required: true, message: intl.formatMessage({ id: 'field_required' }) }]}\n          >\n            <CategoryTree enabledDepth={categoryDepths.main} />\n          </ProForm.Item>\n        )}\n        <ProFormSwitch name=\"is_active\" label={<FormattedMessage id=\"is_active\" />} />\n      </ProForm.Group>\n      {!isNew && (\n        <>\n          <ProForm.Group title={<FormattedMessage id=\"CompetencyChallenges.additional\" />}>\n            <ProForm.Item\n              name=\"description\"\n              label={<FormattedMessage id=\"description\" />}\n              valuePropName=\"value\"\n              style={{\n                width: 440,\n              }}\n            >\n              <WysiwygMarkdown directory={`competency-challenges/${competency_challenge_id}`} />\n            </ProForm.Item>\n            <ProFormTextArea width=\"lg\" name=\"summary\" label={<FormattedMessage id=\"summary\" />} />\n            <ProForm.Item\n              name=\"authors\"\n              label={<FormattedMessage id=\"author\" />}\n              style={{ width: '100%', maxWidth: 440 }}\n            >\n              <UserSelect multiple />\n            </ProForm.Item>\n          </ProForm.Group>\n          <ProFormImageUpload\n            wrapInForm={false}\n            folder={`/competency-challenges/${competency_challenge_id}`}\n            title=\"image\"\n            action={`/api/admin/competency-challenges/${competency_challenge_id}?_method=PATCH`}\n            src_name=\"image_url\"\n            form_name=\"image\"\n            getUploadedSrcField={(info) => info.file.response.data.image_url}\n            setPath={(paths) => form.setFieldsValue(paths)}\n          />\n        </>\n      )}\n    </ProForm>\n  );\n};\n","import React, { useMemo, useRef, useState } from 'react';\nimport { FormattedMessage, useIntl, useParams } from 'umi';\nimport { Button, Popconfirm, Tooltip } from 'antd';\nimport { DeleteOutlined, EditOutlined } from '@ant-design/icons';\nimport ProForm, { type ProFormInstance } from '@ant-design/pro-form';\nimport { EditableProTable } from '@ant-design/pro-table';\nimport type { ActionType, EditableFormInstance, ProColumns } from '@ant-design/pro-table';\n\nimport {\n  createCompetencyChallengeScale,\n  deleteCompetencyChallengeScale,\n  updateCompetencyChallengeScale,\n} from '@/services/escola-lms/competency-challenges';\nimport { CompetencyChallengeCategoryTree } from './CompetencyChallengeCategoryTree';\nimport { useCompetencyChallengeContext } from '../context';\n\ntype DataSourceType = {\n  id: React.Key;\n  scale_min: number;\n  category_id: number;\n  category_name: string;\n};\n\nconst staticColumns: ProColumns<DataSourceType>[] = [\n  {\n    title: <FormattedMessage id=\"ID\" />,\n    dataIndex: 'id',\n    editable: false,\n    render: (_n, record) => {\n      if (typeof record.id !== 'string') return '-';\n      const [state, id] = record.id.split('-');\n\n      if (state === 'new') return '-';\n\n      return id;\n    },\n  },\n  {\n    title: <FormattedMessage id=\"min_points\" />,\n    dataIndex: 'scale_min',\n    valueType: 'digit',\n    formItemProps: {\n      rules: [\n        {\n          required: true,\n          message: <FormattedMessage id=\"field_required\" />,\n        },\n        {\n          type: 'number',\n          min: 0,\n          max: 100,\n          message: <FormattedMessage id=\"number_between\" values={{ min: 0 }} />,\n        },\n      ],\n    },\n    fieldProps: {\n      min: 0,\n    },\n  },\n  {\n    title: <FormattedMessage id=\"category\" />,\n    dataIndex: 'category_id',\n    render: (_n, record) => record.category_name,\n    formItemProps: {\n      rules: [\n        {\n          required: true,\n          message: <FormattedMessage id=\"field_required\" />,\n        },\n      ],\n    },\n    renderFormItem: (_s, _c, form) => {\n      const disabledNodes: number[] = (form.getFieldValue('table') ?? []).map(\n        (record: DataSourceType) => record.category_id,\n      );\n\n      return <CompetencyChallengeCategoryTree disabledNodes={disabledNodes} />;\n    },\n  },\n];\n\nconst getDefaultData = (scales: API.CompetencyChallengeScale[]): DataSourceType[] =>\n  scales.map(({ id, scale_min, category }) => ({\n    // due to key errors\n    id: `old-${id}`,\n    scale_min,\n    category_id: category.id,\n    category_name: category.name_with_breadcrumbs,\n  }));\n\nexport const Scales: React.FC = () => {\n  const { competencyChallenge, refreshData } = useCompetencyChallengeContext();\n  const params = useParams<{ id?: string }>();\n  const competency_challenge_id = Number(params.id);\n  const scales = competencyChallenge?.data?.scales ?? [];\n\n  const [editableKeys, setEditableRowKeys] = useState<React.Key[]>([]);\n\n  const intl = useIntl();\n  const formRef = useRef<ProFormInstance>();\n  const editableFormRef = useRef<EditableFormInstance>();\n  const actionRef = useRef<ActionType>();\n\n  const defaultData = useMemo(() => getDefaultData(scales), [scales]);\n\n  const columns: ProColumns<DataSourceType>[] = useMemo(() => {\n    return [\n      ...staticColumns,\n\n      {\n        valueType: 'option',\n        title: <FormattedMessage id=\"options\" />,\n        render: (_n, record, _i, action) => [\n          <Tooltip key=\"edit\" title={<FormattedMessage id=\"edit\" defaultMessage=\"edit\" />}>\n            <Button\n              type=\"primary\"\n              icon={<EditOutlined />}\n              onClick={() => action?.startEditable(record.id)}\n            />\n          </Tooltip>,\n          <Popconfirm\n            key=\"delete\"\n            title={\n              <FormattedMessage\n                id=\"deleteQuestion\"\n                defaultMessage=\"Are you sure to delete this record?\"\n              />\n            }\n            onConfirm={async () => {\n              if (typeof record.id !== 'string') return;\n              const [state, idStr] = record.id.split('-');\n\n              if (state === 'new') {\n                const currentData: DataSourceType[] = formRef.current?.getFieldValue('table');\n\n                formRef.current?.setFieldValue(\n                  'table',\n                  currentData.filter(({ id }) => id !== record.id),\n                );\n                return;\n              }\n\n              const response = await deleteCompetencyChallengeScale(+idStr);\n              if (response.success) {\n                await refreshData();\n              }\n            }}\n            okText={<FormattedMessage id=\"ok\" />}\n            cancelText={<FormattedMessage id=\"cancel\" />}\n          >\n            <Tooltip title={<FormattedMessage id=\"delete\" defaultMessage=\"delete\" />}>\n              <Button type=\"primary\" icon={<DeleteOutlined />} danger />\n            </Tooltip>\n          </Popconfirm>,\n        ],\n      },\n    ];\n  }, []);\n\n  return (\n    <ProForm<{\n      table: DataSourceType[];\n    }>\n      formRef={formRef}\n      initialValues={{\n        table: defaultData,\n      }}\n      submitter={false}\n    >\n      <EditableProTable<DataSourceType>\n        rowKey={(r) => r.id}\n        editableFormRef={editableFormRef}\n        controlled\n        actionRef={actionRef}\n        name=\"table\"\n        columns={columns}\n        recordCreatorProps={{\n          creatorButtonText: <FormattedMessage id=\"CompetencyChallenges.addNewRow\" />,\n          disabled: editableKeys.length > 0,\n          record: (index) => ({ id: `new-${index}` } as DataSourceType),\n        }}\n        editable={{\n          onlyOneLineEditorAlertMessage: intl.formatMessage({\n            id: 'CompetencyChallenges.onlyOneRowIsEditable',\n          }),\n          onSave: async (_k, { scale_min, category_id, ...record }) => {\n            if (typeof record.id !== 'string') return;\n\n            const [state, idStr] = record.id.split('-');\n            if (state === 'new') {\n              const res = await createCompetencyChallengeScale({\n                scale_min,\n                category_id,\n                competency_challenge_id,\n              });\n\n              if (res.success) {\n                await refreshData();\n              }\n\n              return;\n            }\n\n            const res = await updateCompetencyChallengeScale(+idStr, {\n              scale_min,\n              category_id,\n              competency_challenge_id,\n            });\n            if (res.success) {\n              await refreshData();\n            }\n            return;\n          },\n          deletePopconfirmMessage: <FormattedMessage id=\"deleteQuestion\" />,\n          actionRender: (record, _c, dom) => {\n            if (typeof record.id !== 'string') return [];\n\n            const [state] = record.id.split('-');\n            if (state === 'new') return [dom.save, dom.delete];\n\n            return [dom.save, dom.cancel];\n          },\n          type: 'single',\n          editableKeys,\n          onChange: setEditableRowKeys,\n        }}\n      />\n    </ProForm>\n  );\n};\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { useIntl, FormattedMessage } from 'umi';\nimport { Divider, Space, Spin } from 'antd';\nimport ProForm, { ProFormDigit, ProFormGroup } from '@ant-design/pro-form';\n\nimport { Table } from '@/components/GiftQuizQuestions/table';\nimport { getGiftQuiz, updateGiftQuiz } from '@/services/escola-lms/gift_quiz';\nimport { useCompetencyChallengeContext } from '../context';\n\ninterface FormData {\n  max_attempts: number;\n  max_execution_time: number;\n}\n\nexport const DiagnosticTest: React.FC = () => {\n  const {\n    competencyChallenge: { data },\n  } = useCompetencyChallengeContext();\n\n  const [loading, setLoading] = useState(false);\n  const [quizData, setQuizData] = useState<API.GiftQuiz>();\n  const intl = useIntl();\n\n  const fetchQuiz = useCallback(() => {\n    if (data?.quiz_id === undefined) return;\n\n    setLoading(true);\n    getGiftQuiz(data?.quiz_id)\n      .then((res) => {\n        if (res.success) {\n          setQuizData(res.data);\n        }\n      })\n      .finally(() => setLoading(false));\n  }, [data?.quiz_id]);\n\n  const onFormFinish = useCallback(async (formData: FormData) => {\n    if (data?.quiz_id === undefined) return;\n\n    setLoading(true);\n    updateGiftQuiz(data?.quiz_id, { ...formData, value: 'diagnostic-test' })\n      .then((res) => {\n        if (res.success) {\n          setQuizData(res.data);\n        }\n      })\n      .finally(() => setLoading(false));\n  }, []);\n\n  useEffect(() => {\n    fetchQuiz();\n  }, [fetchQuiz]);\n\n  if (!quizData) return <Spin />;\n\n  return (\n    <div style={{ position: 'relative', paddingBottom: '64px' }}>\n      <ProForm<FormData>\n        submitter={{\n          render: (_p, [reset, submit]) => (\n            <Space style={{ position: 'absolute', bottom: 0, left: 0 }}>\n              {reset}\n              {submit}\n            </Space>\n          ),\n        }}\n        initialValues={quizData}\n        onFinish={onFormFinish}\n      >\n        <ProFormGroup>\n          <ProFormDigit\n            name=\"max_attempts\"\n            label={<FormattedMessage id=\"max_attempts\" />}\n            tooltip={<FormattedMessage id=\"max_attempts\" />}\n            placeholder={intl.formatMessage({\n              id: 'max_attempts',\n              defaultMessage: 'max_attempts',\n            })}\n          />\n          <ProFormDigit\n            name=\"max_execution_time\"\n            label={<FormattedMessage id=\"max_execution_time\" />}\n            tooltip={<FormattedMessage id=\"max_execution_time\" />}\n            placeholder={intl.formatMessage({\n              id: 'max_execution_time',\n              defaultMessage: 'max_execution_time',\n            })}\n          />\n        </ProFormGroup>\n      </ProForm>\n      <Divider />\n      <Table\n        questions={quizData.questions}\n        quizId={quizData.id}\n        onAdded={fetchQuiz}\n        onEdited={fetchQuiz}\n        onRemoved={fetchQuiz}\n        tableHeader={<FormattedMessage id=\"questions\" />}\n        tableLoading={loading}\n        questionsCategory={{ type: 'question' }}\n      />\n    </div>\n  );\n};\n","import React, { useMemo } from 'react';\nimport { history, FormattedMessage, useIntl, useParams } from 'umi';\nimport { Spin } from 'antd';\nimport { PageContainer } from '@ant-design/pro-layout';\nimport ProCard from '@ant-design/pro-card';\n\nimport { CompetencyChallengeContextProvider, useCompetencyChallengeContext } from './context';\nimport { MainForm } from './components/MainForm';\nimport { Scales } from './components/Scales';\nimport { DiagnosticTest } from './components/DiagnosticTest';\n\nconst CompetencyChallengeContent: React.FC = () => {\n  const { competencyChallenge } = useCompetencyChallengeContext();\n  const intl = useIntl();\n  const { id, tab = 'main' } = useParams<{ id?: string; tab?: string }>();\n  const isNew = id === 'new';\n\n  const pageTitle = useMemo(() => {\n    if (isNew) return intl.formatMessage({ id: 'CompetencyChallenges.new_challenge' });\n    if (competencyChallenge.data?.name) return competencyChallenge.data.name;\n\n    return intl.formatMessage({ id: 'menu.Competency challenges' });\n  }, [intl, competencyChallenge.data?.name]);\n\n  return (\n    <PageContainer\n      title={pageTitle}\n      header={{\n        breadcrumb: {\n          routes: [\n            {\n              path: 'competency-challenges',\n              breadcrumbName: intl.formatMessage({\n                id: 'menu.Competency challenges',\n              }),\n            },\n            {\n              path: String(id),\n              breadcrumbName: pageTitle,\n            },\n            {\n              path: tab,\n              breadcrumbName: intl.formatMessage({ id: `CompetencyChallenges.${tab}` }),\n            },\n          ],\n        },\n      }}\n    >\n      <ProCard\n        bodyStyle={{ padding: '24px' }}\n        tabs={{\n          type: 'card',\n          cardProps: { loading: competencyChallenge.loading && <Spin /> },\n          activeKey: tab,\n          onChange: (key) => {\n            history.push(`/competency-challenges/${id}/${key}`);\n          },\n        }}\n      >\n        <ProCard.TabPane key=\"main\" tab={<FormattedMessage id=\"CompetencyChallenges.main\" />}>\n          <MainForm />\n        </ProCard.TabPane>\n        <ProCard.TabPane\n          key=\"scales\"\n          tab={<FormattedMessage id=\"CompetencyChallenges.scales\" />}\n          disabled={isNew}\n        >\n          <Scales />\n        </ProCard.TabPane>\n        <ProCard.TabPane\n          key=\"diagnostic-test\"\n          tab={<FormattedMessage id=\"CompetencyChallenges.diagnostic-test\" />}\n          disabled={isNew}\n        >\n          <DiagnosticTest />\n        </ProCard.TabPane>\n      </ProCard>\n    </PageContainer>\n  );\n};\n\nconst CompetencyChallenge: React.FC = () => (\n  <CompetencyChallengeContextProvider>\n    <CompetencyChallengeContent />\n  </CompetencyChallengeContextProvider>\n);\n\nexport default CompetencyChallenge;\n","import { request } from 'umi';\nimport type { RequestOptionsInit } from 'umi-request';\n\n/**  GET /api/admin/competency-challenges */\nexport async function getCompetencyChallenges(\n  params?: API.CompetencyChallengesParams,\n  options?: RequestOptionsInit,\n) {\n  return request<API.DefaultMetaResponse<API.CompetencyChallenge>>(\n    `/api/admin/competency-challenges`,\n    {\n      method: 'GET',\n      /* useCache: true */ useCache: false,\n      params,\n      ...(options || {}),\n    },\n  );\n}\n\n/** GET /api/admin/competency-challenges/:competency_challenge_id */\nexport async function getCompetencyChallenge(\n  competency_challenge_id: number,\n  options?: RequestOptionsInit,\n) {\n  return request<API.DefaultResponse<API.CompetencyChallenge>>(\n    `/api/admin/competency-challenges/${competency_challenge_id}`,\n    {\n      method: 'GET',\n      /* useCache: true */ useCache: false,\n      ...(options || {}),\n    },\n  );\n}\n\n/** POST /api/admin/competency-challenges */\nexport async function createCompetencyChallenge(\n  body: API.CreateCompetencyChallenge,\n  options?: RequestOptionsInit,\n) {\n  return request<API.DefaultResponse<API.CompetencyChallenge>>(`/api/admin/competency-challenges`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    data: body,\n    ...(options || {}),\n  });\n}\n\n/** PUT /api/admin/competency-challenges/:competency_challenge_id */\nexport async function updateCompetencyChallenge(\n  competency_challenge_id: number,\n  body: API.UpdateCompetencyChallenge,\n  options?: RequestOptionsInit,\n) {\n  return request<API.DefaultResponse<API.CompetencyChallenge>>(\n    `/api/admin/competency-challenges/${competency_challenge_id}`,\n    {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      data: body,\n      ...(options || {}),\n    },\n  );\n}\n\n/**  DELETE /api/admin/competency-challenges/:competency_challenge_id */\nexport async function deleteCompetencyChallenge(\n  competency_challenge_id: number,\n  options?: RequestOptionsInit,\n) {\n  return request<API.DeleteResponse>(\n    `/api/admin/competency-challenges/${competency_challenge_id}`,\n    {\n      method: 'DELETE',\n      ...(options || {}),\n    },\n  );\n}\n\n/** POST /api/admin/competency-challenges/scales */\nexport async function createCompetencyChallengeScale(\n  body: API.CreateCompetencyChallengeScale,\n  options?: RequestOptionsInit,\n) {\n  return request<API.DefaultResponse<API.CompetencyChallengeScale>>(\n    `/api/admin/competency-challenges/scales`,\n    {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      data: body,\n      ...(options || {}),\n    },\n  );\n}\n\n/** PATCH /api/admin/competency-challenges/scales/:competency_challenge_scale_id */\nexport async function updateCompetencyChallengeScale(\n  competency_challenge_scale_id: number,\n  body: API.CreateCompetencyChallengeScale,\n  options?: RequestOptionsInit,\n) {\n  return request<API.DefaultResponse<API.CompetencyChallengeScale>>(\n    `/api/admin/competency-challenges/scales/${competency_challenge_scale_id}`,\n    {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      data: body,\n      ...(options || {}),\n    },\n  );\n}\n\n/**  DELETE /api/admin/competency-challenges/scales/:competency_challenge_scale_id */\nexport async function deleteCompetencyChallengeScale(\n  competency_challenge_scale_id: number,\n  options?: RequestOptionsInit,\n) {\n  return request<API.DeleteResponse>(\n    `/api/admin/competency-challenges/scales/${competency_challenge_scale_id}`,\n    {\n      method: 'DELETE',\n      ...(options || {}),\n    },\n  );\n}\n","import React, { useState, useEffect, useMemo } from 'react';\nimport { FormattedMessage } from 'umi';\nimport { TreeSelect } from 'antd';\n\nimport { categoryTree } from '@/services/escola-lms/category';\nimport { useCompetencyChallengeContext } from '../context';\n\ntype TreeNodeType = {\n  title: string;\n  value: number;\n  disabled?: boolean;\n  children?: TreeNodeType[];\n};\n\nconst treeConvert = (\n  category: API.Category,\n  disabledNodes: number[],\n  enabledDepth: number,\n  depth: number = 0,\n): TreeNodeType => {\n  return category.subcategories?.length\n    ? {\n        title: category.name,\n        value: category.id,\n        disabled: depth !== enabledDepth || disabledNodes.includes(category.id),\n        children: category.subcategories.map((cat) =>\n          treeConvert(cat, disabledNodes, enabledDepth, depth + 1),\n        ),\n      }\n    : {\n        title: category.name,\n        value: category.id,\n        disabled: depth !== enabledDepth || disabledNodes.includes(category.id),\n      };\n};\n\nexport interface CompetencyChallengeCategoryTreeProps {\n  value?: string | string[] | number | number[];\n  onChange?: (value: string | string[] | number | number[]) => void;\n  type?: 'scale' | 'question';\n  disabledNodes?: number[]; // categories id arr\n}\n\nexport const CompetencyChallengeCategoryTree: React.FC<CompetencyChallengeCategoryTreeProps> = ({\n  value,\n  onChange,\n  type = 'scale',\n  disabledNodes = [],\n}) => {\n  const [categories, setCategories] = useState<API.Category[]>([]);\n  const { categoryDepths, competencyChallenge } = useCompetencyChallengeContext();\n\n  const categoriesToShow = useMemo(\n    () =>\n      competencyChallenge.data?.type === 'simple'\n        ? categories.filter((category) => category.id === competencyChallenge.data?.category?.id)\n        : categories,\n    [categories, competencyChallenge.data?.type, competencyChallenge.data?.category?.id],\n  );\n\n  const treeData = useMemo(\n    () => categoriesToShow.map((cat) => treeConvert(cat, disabledNodes, categoryDepths[type])),\n    [categoriesToShow, disabledNodes, type],\n  );\n\n  useEffect(() => {\n    categoryTree().then((response) => {\n      if (response.success) {\n        setCategories(response.data);\n      }\n    });\n  }, []);\n\n  return (\n    <TreeSelect<string | string[] | number | number[]>\n      loading={categories.length === 0}\n      showSearch\n      value={value}\n      dropdownStyle={{ maxHeight: 400, overflow: 'auto' }}\n      placeholder={<FormattedMessage id=\"select\" defaultMessage=\"Please select\" />}\n      allowClear\n      treeDefaultExpandAll\n      onChange={onChange}\n      treeData={treeData}\n      disabled={categories.length === 0}\n    />\n  );\n};\n","import React from 'react';\nimport RichMarkdownEditor2 from 'traverse-markdown-editor';\nimport { upload, resizedImage } from '@/services/escola-lms/files';\nimport './index.css';\nimport { useIntl } from 'umi';\n\ninterface FormWysiwygProps {\n  value?: string;\n  defaultValue?: string;\n  onChange?: (value: string) => void;\n  directory?: string;\n}\n\nexport const EmbedUploaded: React.FC<{ attrs: { href: string } }> = ({ attrs }) => {\n  const href = attrs.href;\n  const filename = href.split('/').pop();\n  return (\n    <p>\n      <a rel=\"noreferrer\" href={href} target=\"_blank\">\n        {filename}\n      </a>\n    </p>\n  );\n};\n\nexport const FormWysiwyg: React.FC<FormWysiwygProps> = ({\n  value,\n  onChange,\n  directory = '/wysiwyg',\n}) => {\n  const intl = useIntl();\n\n  return (\n    <div className=\"form-wysiwyg-markdown\">\n      <RichMarkdownEditor2\n        excludeBlockMenuItems={['Sketch']}\n        embeds={[\n          {\n            matcher: (url) => {\n              return true;\n            },\n            component: EmbedUploaded,\n          },\n        ]}\n        uploadImage={async (file) => {\n          const result = await upload(file, directory);\n\n          if (result.success) {\n            if (file.type.includes('image/')) {\n              const resizePath = result.data[0].name.includes('/')\n                ? result.data[0].name\n                : `${directory}${result.data[0].name}`;\n              return resizedImage(resizePath, 1000);\n            }\n            return result.data[0].url;\n          }\n          throw new Error('Error while uploading');\n        }}\n        defaultValue={value || ''}\n        onChange={(v) => onChange && onChange(v())}\n        placeholder={intl.formatMessage({\n          id: 'wysiwyg_placeholder',\n        })}\n      />\n    </div>\n  );\n};\n\nexport default FormWysiwyg;\n","import React, { useCallback, useContext, useEffect, useState } from 'react';\nimport { useParams } from 'umi';\n\nimport { getCompetencyChallenge } from '@/services/escola-lms/competency-challenges';\nimport { configs as getConfig } from '@/services/escola-lms/settings';\n\ninterface CategoryDepths {\n  main: number;\n  scale: number;\n  question: number;\n}\n\ninterface CompetencyChallengeContextData {\n  data: API.CompetencyChallenge | null;\n  loading: boolean;\n  error?: unknown;\n}\n\nexport interface CompetencyChallengeContext {\n  categoryDepths: CategoryDepths;\n  competencyChallenge: CompetencyChallengeContextData;\n  refreshData: () => Promise<void>;\n}\n\nconst initialValues: CompetencyChallengeContext = {\n  categoryDepths: { scale: 2, question: 1, main: 0 },\n  competencyChallenge: { data: null, loading: false },\n  refreshData: async () => console.warn('CONTEXT INIT'),\n};\n\nconst Context = React.createContext<CompetencyChallengeContext>(initialValues);\n\nexport const useCompetencyChallengeContext = () => useContext(Context);\n\nexport const CompetencyChallengeContextProvider: React.FC<React.PropsWithChildren> = ({\n  children,\n}) => {\n  const [competencyChallenge, setCompetencyChallenge] = useState<CompetencyChallengeContextData>(\n    initialValues.competencyChallenge,\n  );\n  const [categoryDepths, setCategoryDepths] = useState<CategoryDepths>(\n    initialValues.categoryDepths,\n  );\n\n  const { id } = useParams<{ id?: string }>();\n  const competency_challenge_id = Number(id);\n\n  const refreshData = useCallback(async () => {\n    if (Number.isNaN(competency_challenge_id)) return;\n\n    try {\n      setCompetencyChallenge((prev) => ({ ...prev, loading: true }));\n      const res = await getCompetencyChallenge(competency_challenge_id);\n\n      if (!res.success) {\n        setCompetencyChallenge((prev) => ({ ...prev, error: res.errors }));\n        return;\n      }\n\n      setCompetencyChallenge((prev) => ({ ...prev, data: res.data }));\n    } catch (error) {\n      setCompetencyChallenge((prev) => ({ ...prev, error }));\n    } finally {\n      setCompetencyChallenge((prev) => ({ ...prev, loading: false }));\n    }\n  }, [competency_challenge_id]);\n\n  const fetchCategoryDepths = useCallback(async () => {\n    try {\n      const res = await getConfig();\n      if (!res.success) return;\n\n      const scale = Number(\n        (res.data?.escolalms_competency_challenge as any)?.category?.scale?.depth?.value,\n      );\n      const question = Number(\n        (res.data?.escolalms_competency_challenge as any)?.category?.question?.depth?.value,\n      );\n      const main = Number(\n        (res.data?.escolalms_competency_challenge as any)?.category?.main?.depth?.value,\n      );\n\n      setCategoryDepths({\n        scale: Number.isNaN(scale) ? 2 : scale,\n        question: Number.isNaN(question) ? 1 : question,\n        main: Number.isNaN(main) ? 0 : main,\n      });\n    } catch (e) {\n      console.error(e);\n    }\n  }, []);\n\n  useEffect(() => {\n    refreshData();\n    fetchCategoryDepths();\n  }, [refreshData, fetchCategoryDepths]);\n\n  return (\n    <Context.Provider value={{ categoryDepths, competencyChallenge, refreshData }}>\n      {children}\n    </Context.Provider>\n  );\n};\n","import React from 'react';\nimport { FormattedMessage, useIntl } from 'umi';\nimport { Button, Tooltip } from 'antd';\nimport ProForm, {\n  ProFormCheckbox,\n  ProFormDigit,\n  ProFormList,\n  ProFormText,\n} from '@ant-design/pro-form';\nimport { DeleteOutlined } from '@ant-design/icons';\n\nimport { QuestionType } from '@/services/escola-lms/enums';\n\nconst INITIAL_VALUES = {\n  [QuestionType.MULTIPLE_CHOICE]: [\n    { isCorrect: false, value: '' },\n    { isCorrect: false, value: '' },\n  ],\n  [QuestionType.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS]: [\n    { value: '', weight: '' },\n    { value: '', weight: '' },\n  ],\n};\n\ninterface Props {\n  type: QuestionType.MULTIPLE_CHOICE | QuestionType.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS;\n}\n\nexport const GiftQuizQuestionMultipleChoiceEditor: React.FC<Props> = ({ type }) => {\n  const intl = useIntl();\n\n  return (\n    <>\n      <ProFormText\n        name=\"question\"\n        label={<FormattedMessage id=\"question\" />}\n        rules={[{ required: true, message: <FormattedMessage id=\"field_required\" /> }]}\n        required\n      />\n      <ProFormList\n        name=\"answers\"\n        creatorButtonProps={{\n          creatorButtonText: intl.formatMessage({ id: 'Questions.addAnswer' }),\n        }}\n        actionRender={() => []}\n        initialValue={INITIAL_VALUES[type] ?? []}\n      >\n        {(field, i, action, count) => (\n          <ProForm.Group\n            title={\n              <>\n                <FormattedMessage id=\"Questions.answer\" values={{ ordinalNumber: i + 1 }} />\n                {count > 2 && (\n                  <Tooltip title={intl.formatMessage({ id: 'Questions.deleteAnswer' })}>\n                    <Button\n                      type=\"text\"\n                      icon={<DeleteOutlined />}\n                      onClick={() => action.remove(field.name)}\n                    />\n                  </Tooltip>\n                )}\n              </>\n            }\n            titleStyle={{ width: '100%', display: 'flex', justifyContent: 'space-between' }}\n          >\n            {type === QuestionType.MULTIPLE_CHOICE && (\n              <ProFormCheckbox\n                name=\"isCorrect\"\n                label={\n                  <FormattedMessage\n                    id=\"Questions.correctAnswer\"\n                    defaultMessage=\"Is Correct Answer?\"\n                  />\n                }\n                rules={[\n                  ({ getFieldValue }) => ({\n                    validator: () => {\n                      const answers = getFieldValue('answers') ?? [];\n                      if (\n                        answers.filter((answer: { isCorrect: boolean }) => answer?.isCorrect)\n                          .length > 1\n                      ) {\n                        return Promise.reject('Only one answer can be correct');\n                      }\n\n                      return Promise.resolve();\n                    },\n                    message: <FormattedMessage id=\"Questions.onlyOneAnswerIsCorrect\" />,\n                  }),\n                ]}\n              />\n            )}\n            <ProFormText\n              name=\"value\"\n              rules={[{ required: true, message: <FormattedMessage id=\"field_required\" /> }]}\n              label={<FormattedMessage id=\"content\" defaultMessage=\"Content\" />}\n            />\n            {type === QuestionType.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS && (\n              <ProFormDigit\n                name=\"weight\"\n                rules={[{ required: true, message: <FormattedMessage id=\"field_required\" /> }]}\n                fieldProps={{ min: -Number.MAX_SAFE_INTEGER, addonAfter: '%' }}\n                label={<FormattedMessage id=\"weight\" defaultMessage=\"Weight\" />}\n              />\n            )}\n          </ProForm.Group>\n        )}\n      </ProFormList>\n    </>\n  );\n};\n","import React from 'react';\nimport { FormattedMessage } from 'umi';\nimport { ProFormCheckbox, ProFormText } from '@ant-design/pro-form';\n\nexport const GiftQuizQuestionTrueFalseEditor: React.FC = () => (\n  <>\n    <ProFormText\n      name=\"question\"\n      label={<FormattedMessage id=\"question\" />}\n      rules={[{ required: true, message: <FormattedMessage id=\"field_required\" /> }]}\n      required\n    />\n    <ProFormCheckbox name=\"isCorrect\" label={<FormattedMessage id=\"Questions.correctAnswer\" />} />\n  </>\n);\n","import React from 'react';\nimport { useIntl, FormattedMessage } from 'umi';\nimport { ProFormList, ProFormText } from '@ant-design/pro-form';\n\nconst INITIAL_VALUES = [{ value: '' }];\n\nexport const GiftQuizQuestionShortEditor: React.FC = () => {\n  const intl = useIntl();\n\n  return (\n    <>\n      <ProFormText\n        name=\"question\"\n        label={<FormattedMessage id=\"question\" />}\n        rules={[{ required: true, message: <FormattedMessage id=\"field_required\" /> }]}\n        required\n      />\n      <ProFormList\n        name=\"answers\"\n        creatorButtonProps={{\n          creatorButtonText: intl.formatMessage({ id: 'Questions.addAnswer' }),\n        }}\n        deleteIconProps={{ tooltipText: intl.formatMessage({ id: 'Questions.deleteAnswer' }) }}\n        actionRender={(_f, _a, [, deleteButton]) => [deleteButton]}\n        min={1}\n        initialValue={INITIAL_VALUES}\n      >\n        {(_f, i) => (\n          <ProFormText\n            name=\"value\"\n            rules={[{ required: true, message: <FormattedMessage id=\"field_required\" /> }]}\n            label={\n              <FormattedMessage\n                id=\"Questions.answer\"\n                values={{ ordinalNumber: i + 1 }}\n                defaultMessage={`Answer ${i + 1}`}\n              />\n            }\n          />\n        )}\n      </ProFormList>\n    </>\n  );\n};\n","import React from 'react';\nimport { FormattedMessage, useIntl } from 'umi';\nimport ProForm, { ProFormList, ProFormText } from '@ant-design/pro-form';\n\nconst INITIAL_VALUES = [\n  {\n    firstOfPair: '',\n    secondOfPair: '',\n  },\n];\n\nexport const GiftQuizQuestionMatchingEditor: React.FC = () => {\n  const intl = useIntl();\n\n  return (\n    <>\n      <ProFormText\n        name=\"question\"\n        label={<FormattedMessage id=\"question\" />}\n        rules={[{ required: true, message: <FormattedMessage id=\"field_required\" /> }]}\n        required\n      />\n      <ProFormList\n        name=\"answers\"\n        creatorButtonProps={{\n          creatorButtonText: intl.formatMessage({\n            id: 'Questions.addMatchingPair',\n            defaultMessage: 'Add Matching Pair',\n          }),\n        }}\n        deleteIconProps={{ tooltipText: intl.formatMessage({ id: 'Questions.deletePair' }) }}\n        actionRender={(_f, _a, [, deleteButton]) => [deleteButton]}\n        min={1}\n        initialValue={INITIAL_VALUES}\n      >\n        {(_f, i) => (\n          <ProForm.Group\n            direction=\"horizontal\"\n            align=\"baseline\"\n            size=\"small\"\n            spaceProps={{ style: { flexWrap: 'nowrap' } }}\n            title={\n              <FormattedMessage\n                id=\"Questions.pair\"\n                values={{ ordinalNumber: i + 1 }}\n                defaultMessage={`Pair ${i + 1}`}\n              />\n            }\n          >\n            <ProFormText\n              name=\"firstOfPair\"\n              rules={[{ required: true, message: <FormattedMessage id=\"field_required\" /> }]}\n            />\n            <ProFormText\n              name=\"secondOfPair\"\n              rules={[{ required: true, message: <FormattedMessage id=\"field_required\" /> }]}\n            />\n          </ProForm.Group>\n        )}\n      </ProFormList>\n    </>\n  );\n};\n","import React from 'react';\nimport { FormattedMessage } from 'umi';\nimport { ProFormDigit, ProFormText } from '@ant-design/pro-form';\n\nexport const GiftQuizQuestionNumericalEditor: React.FC = () => (\n  <>\n    <ProFormText\n      name=\"question\"\n      label={<FormattedMessage id=\"question\" />}\n      rules={[{ required: true, message: <FormattedMessage id=\"field_required\" /> }]}\n      required\n    />\n    <ProFormDigit\n      name=\"answer\"\n      label={<FormattedMessage id=\"answer\" />}\n      rules={[{ required: true, message: <FormattedMessage id=\"field_required\" /> }]}\n      required\n    />\n    <ProFormDigit\n      name=\"errorMargin\"\n      fieldProps={{ addonAfter: '+/-' }}\n      label={<FormattedMessage id=\"Questions.errorMargin\" />}\n      rules={[{ required: true, message: <FormattedMessage id=\"field_required\" /> }]}\n      required\n    />\n  </>\n);\n","import React from 'react';\nimport { FormattedMessage } from 'umi';\nimport { ProFormTextArea } from '@ant-design/pro-form';\n\nexport const GiftQuizQuestionEssayEditor: React.FC = () => (\n  <ProFormTextArea\n    name=\"question\"\n    label={<FormattedMessage id=\"question\" />}\n    rules={[{ required: true, message: <FormattedMessage id=\"field_required\" /> }]}\n    required\n  />\n);\n","import React from 'react';\n\nimport { QuestionType } from '@/services/escola-lms/enums';\nimport { GiftQuizQuestionMultipleChoiceEditor } from './MultipleChoice';\nimport { GiftQuizQuestionTrueFalseEditor } from './TrueFalse';\nimport { GiftQuizQuestionShortEditor } from './ShortAnswers';\nimport { GiftQuizQuestionMatchingEditor } from './Matching';\nimport { GiftQuizQuestionNumericalEditor } from './Numerical';\nimport { GiftQuizQuestionEssayEditor } from './Essay';\n\ninterface Props {\n  type: QuestionType | undefined;\n}\n\nexport const GiftQuizQuestion: React.FC<Props> = ({ type }) => {\n  if (!type) return null;\n\n  switch (type) {\n    case QuestionType.MULTIPLE_CHOICE:\n    case QuestionType.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS:\n      return <GiftQuizQuestionMultipleChoiceEditor type={type} />;\n    case QuestionType.TRUE_FALSE:\n      return <GiftQuizQuestionTrueFalseEditor />;\n    case QuestionType.SHORT_ANSWERS:\n      return <GiftQuizQuestionShortEditor />;\n    case QuestionType.MATCHING:\n      return <GiftQuizQuestionMatchingEditor />;\n    case QuestionType.NUMERICAL_QUESTION:\n      return <GiftQuizQuestionNumericalEditor />;\n    case QuestionType.ESSAY:\n    case QuestionType.DESCRIPTION:\n      return <GiftQuizQuestionEssayEditor />;\n  }\n\n  return <pre>Unsupported type {type}</pre>;\n};\n","import { parse } from '@escolalms/gift-pegjs';\nimport type {\n  Description,\n  Essay,\n  Matching,\n  Numerical,\n  ShortAnswer,\n  TrueFalse,\n  MultipleChoice,\n} from '@escolalms/gift-pegjs';\n\nimport { QuestionType } from '@/services/escola-lms/enums';\nimport type {\n  DescriptionFormData,\n  EssayFormData,\n  GiftQuizFormData,\n  MatchingFormData,\n  MultipleChoiceFormData,\n  MultipleChoiceWithMultipleRightAnswersFormData,\n  NumericalFormData,\n  ShortAnswersFormData,\n  TrueFalseFormData,\n} from './types';\n\nconst parseMultipleChoice = ({ question, answers }: MultipleChoiceFormData): string => {\n  if (answers.length === 0) return `${question}{}`;\n\n  let giftString = `${question}{`;\n\n  for (const { isCorrect, value } of answers) {\n    const sign = isCorrect ? '=' : '~';\n\n    giftString += `${sign}${value}`;\n  }\n\n  giftString += '}';\n\n  return giftString.trim();\n};\n\nconst parseMultipleChoiceWithMultipleRightAnswers = ({\n  question,\n  answers,\n}: MultipleChoiceWithMultipleRightAnswersFormData): string => {\n  if (answers.length == 0) return `${question}{}`;\n\n  let giftString = `${question}{`;\n\n  for (const { value, weight } of answers) {\n    giftString += `~%${weight}%${value}`;\n  }\n\n  giftString += '}';\n\n  return giftString.trim();\n};\n\nconst parseTrueFalse = ({ question, isCorrect }: TrueFalseFormData): string =>\n  `${question}{${isCorrect ? 'T' : 'F'}}`;\n\nconst parseShortAnswers = ({ question, answers }: ShortAnswersFormData): string => {\n  if (answers.length === 0) return `${question}{}`;\n\n  let giftString = `${question}{`;\n\n  for (const { value } of answers) {\n    giftString += `=${value}`;\n  }\n\n  giftString += '}';\n\n  return giftString.trim();\n};\n\nconst parseMatching = ({ question, answers }: MatchingFormData): string => {\n  if (answers.length === 0) return `${question}{}`;\n\n  let giftString = `${question}{`;\n\n  for (const { firstOfPair, secondOfPair } of answers) {\n    giftString += `=${firstOfPair}->${secondOfPair}`;\n  }\n\n  giftString += '}';\n\n  return giftString.trim();\n};\n\nconst parseNumerical = ({ question, answer, errorMargin }: NumericalFormData): string =>\n  `${question}{#${answer}:${errorMargin}}`;\n\nconst parseEssay = ({ question }: EssayFormData): string => `${question}{}`;\n\nconst parseDescription = ({ question }: DescriptionFormData): string => question;\n\nexport const parseToGIFT = (formData: GiftQuizFormData): string => {\n  switch (formData.type) {\n    case QuestionType.MULTIPLE_CHOICE:\n      return parseMultipleChoice(formData);\n    case QuestionType.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS:\n      return parseMultipleChoiceWithMultipleRightAnswers(formData);\n    case QuestionType.TRUE_FALSE:\n      return parseTrueFalse(formData);\n    case QuestionType.SHORT_ANSWERS:\n      return parseShortAnswers(formData);\n    case QuestionType.MATCHING:\n      return parseMatching(formData);\n    case QuestionType.NUMERICAL_QUESTION:\n      return parseNumerical(formData);\n    case QuestionType.ESSAY:\n      return parseEssay(formData);\n    case QuestionType.DESCRIPTION:\n      return parseDescription(formData);\n    default:\n      throw new Error(`Unsupported type: ${(formData as GiftQuizFormData).type}`);\n  }\n};\n\nconst parseMultipleChoiceToFormData = (\n  parsedValue: MultipleChoice,\n  { type, score, category_id }: API.QuizQuestion,\n): MultipleChoiceFormData | MultipleChoiceWithMultipleRightAnswersFormData => {\n  const question = parsedValue?.stem.text;\n\n  const isMultipleChoice = parsedValue.choices.every(({ weight }) => weight === null);\n\n  if (isMultipleChoice) {\n    const answers: MultipleChoiceFormData['answers'] = parsedValue.choices.map(\n      ({ isCorrect, text }) => ({\n        isCorrect,\n        value: text.text,\n      }),\n    );\n\n    return { type, score, category_id, question, answers };\n  }\n\n  const answers = parsedValue.choices.reduce<\n    MultipleChoiceWithMultipleRightAnswersFormData['answers']\n  >(\n    (acc, { weight, text }) => (weight !== null ? [...acc, { weight, value: text.text }] : acc),\n    [],\n  );\n\n  return { type, score, category_id, question, answers };\n};\n\nconst parseTrueFalseToFormData = (\n  parsedValue: TrueFalse,\n  { type, score, category_id }: API.QuizQuestion,\n): TrueFalseFormData => {\n  const question = parsedValue?.stem.text;\n  const isCorrect = parsedValue.isTrue;\n\n  return { type, score, category_id, question, isCorrect };\n};\n\nconst parseShortAnswersToFormData = (\n  parsedValue: ShortAnswer,\n  { type, score, category_id }: API.QuizQuestion,\n): ShortAnswersFormData => {\n  const question = parsedValue?.stem.text;\n\n  const answers: ShortAnswersFormData['answers'] = parsedValue.choices.map(({ text }) => ({\n    value: text.text,\n  }));\n\n  return { type, score, category_id, question, answers };\n};\n\nconst parseMatchingToFormData = (\n  parsedValue: Matching,\n  { type, score, category_id }: API.QuizQuestion,\n): MatchingFormData => {\n  const question = parsedValue?.stem.text;\n  const answers: MatchingFormData['answers'] = parsedValue.matchPairs.map(\n    ({ subquestion, subanswer }) => ({ firstOfPair: subquestion.text, secondOfPair: subanswer }),\n  );\n\n  return { type, score, category_id, question, answers };\n};\n\nconst parseNumericalToFormData = (\n  parsedValue: Numerical,\n  { type, score, category_id }: API.QuizQuestion,\n): NumericalFormData => {\n  const question = parsedValue?.stem.text;\n\n  // TODO\n  if (Array.isArray(parsedValue?.choices)) {\n    throw new Error('Unsupported choices type: array');\n  }\n\n  const answer = parsedValue?.choices.number;\n  const errorMargin = parsedValue?.choices.range;\n\n  if (answer === undefined || errorMargin === undefined) {\n    throw new Error(`Value undefined - answer: ${answer} errorMargin: ${errorMargin}`);\n  }\n\n  return { type, score, category_id, question, answer, errorMargin };\n};\n\nconst parseDescriptionEssayToFormData = (\n  parsedValue: Description | Essay,\n  { type, score, category_id }: API.QuizQuestion,\n): DescriptionFormData | EssayFormData => {\n  const question = parsedValue?.stem.text;\n\n  return { type, score, category_id, question };\n};\n\nexport function parseToFormData(\n  questionBase: API.QuizQuestion | undefined,\n): GiftQuizFormData | undefined {\n  if (!questionBase) return;\n\n  const [parsedValue] = parse(questionBase.value);\n\n  switch (parsedValue.type) {\n    case 'MC':\n      return parseMultipleChoiceToFormData(parsedValue, questionBase);\n    case 'TF':\n      return parseTrueFalseToFormData(parsedValue, questionBase);\n    case 'Short':\n      return parseShortAnswersToFormData(parsedValue, questionBase);\n    case 'Matching':\n      return parseMatchingToFormData(parsedValue, questionBase);\n    case 'Numerical':\n      return parseNumericalToFormData(parsedValue, questionBase);\n    case 'Description':\n    case 'Essay':\n      return parseDescriptionEssayToFormData(parsedValue, questionBase);\n    default:\n      throw new Error(`Unsupported type: ${parsedValue?.type}`);\n  }\n}\n","import React, { useCallback, useEffect, useMemo } from 'react';\nimport { FormattedMessage, useIntl } from 'umi';\nimport { Space, Divider } from 'antd';\nimport ProForm, { ProFormDigit, ProFormSelect } from '@ant-design/pro-form';\n\nimport { QuestionType } from '@/services/escola-lms/enums';\nimport {\n  CompetencyChallengeCategoryTree,\n  type CompetencyChallengeCategoryTreeProps,\n} from '@/pages/CompetencyChallenges/components/CompetencyChallengeCategoryTree';\nimport { GiftQuizQuestion } from './question';\nimport type { QuizQuestionSubmitData, GiftQuizFormData } from './types';\nimport { parseToFormData, parseToGIFT } from './utils';\n\nconst VALUES_NOT_TO_RESET = ['type', 'score', 'category'];\n\nconst TYPE_OPTIONS = Object.values(QuestionType).reduce<\n  { value: QuestionType; label: React.ReactNode }[]\n>(\n  (acc, q) => (q ? [...acc, { value: q, label: <FormattedMessage id={`gift_type.${q}`} /> }] : acc),\n  [],\n);\n\ninterface Props {\n  onSubmit: (quizQuestion: QuizQuestionSubmitData) => Promise<boolean>;\n  values?: API.QuizQuestion;\n  competencyChallengeCategoryTreeProps?:\n    | boolean\n    | Omit<CompetencyChallengeCategoryTreeProps, 'value' | 'onChange'>;\n}\n\nexport const GiftQuizQuestionEditor: React.FC<Props> = ({\n  onSubmit,\n  values,\n  competencyChallengeCategoryTreeProps = false,\n}) => {\n  const intl = useIntl();\n\n  const [form] = ProForm.useForm<GiftQuizFormData>();\n  const type: API.QuestionType | undefined = ProForm.useWatch('type', form);\n\n  const initialValues = useMemo(() => parseToFormData(values), [values]);\n\n  const onFinish = useCallback(async (formData: GiftQuizFormData) => {\n    const value = parseToGIFT(formData);\n\n    const { score, category_id } = formData;\n    const status = await onSubmit({ value, score, category_id });\n\n    if (!status) {\n      return;\n    }\n\n    form.resetFields();\n  }, []);\n\n  useEffect(() => {\n    form.resetFields();\n  }, [initialValues]);\n\n  useEffect(() => {\n    if (type) {\n      const fields = form.getFieldsValue();\n      const fieldsToReset = Object.keys(fields).filter((key) => !VALUES_NOT_TO_RESET.includes(key));\n\n      form.resetFields(fieldsToReset);\n    }\n  }, [type]);\n\n  return (\n    <Space direction=\"vertical\" style={{ display: 'flex' }}>\n      <Divider>\n        <FormattedMessage id={initialValues ? 'Questions.edit' : 'addNewQuestion'} />\n      </Divider>\n      <ProForm layout=\"horizontal\" form={form} onFinish={onFinish} initialValues={initialValues}>\n        <ProFormSelect\n          name=\"type\"\n          placeholder={intl.formatMessage({\n            id: 'selectNewQuestionType',\n            defaultMessage: 'Select new question type',\n          })}\n          label={<FormattedMessage id=\"type\" defaultMessage=\"Type:\" />}\n          options={TYPE_OPTIONS}\n          rules={[{ required: true, message: <FormattedMessage id=\"field_required\" /> }]}\n          required\n        />\n        <GiftQuizQuestion type={type} />\n        <ProFormDigit\n          name=\"score\"\n          label={<FormattedMessage id=\"Questions.score\" defaultMessage=\"Score\" />}\n          rules={[{ required: true, message: <FormattedMessage id=\"field_required\" /> }]}\n        />\n        {competencyChallengeCategoryTreeProps && (\n          <ProForm.Item\n            name=\"category_id\"\n            label={<FormattedMessage id=\"category\" defaultMessage=\"Category\" />}\n            rules={[{ required: true, message: <FormattedMessage id=\"field_required\" /> }]}\n            required\n          >\n            <CompetencyChallengeCategoryTree\n              {...(typeof competencyChallengeCategoryTreeProps === 'object'\n                ? competencyChallengeCategoryTreeProps\n                : {})}\n            />\n          </ProForm.Item>\n        )}\n      </ProForm>\n    </Space>\n  );\n};\n","import React, { useState, useCallback, useRef, useEffect } from 'react';\nimport { FormattedMessage } from 'umi';\nimport { SortableContainer, SortableElement, SortableHandle } from 'react-sortable-hoc';\nimport { arrayMoveImmutable } from 'array-move';\nimport { parse } from '@escolalms/gift-pegjs';\nimport { Button, Drawer, Typography, Switch } from 'antd';\nimport { MenuOutlined, PlusCircleOutlined } from '@ant-design/icons';\nimport { ProTable } from '@ant-design/pro-table';\nimport type { ProColumns, ActionType } from '@ant-design/pro-table';\n\nimport TypeButtonDrawer from '@/components/TypeButtonDrawer';\nimport type { CompetencyChallengeCategoryTreeProps } from '@/pages/CompetencyChallenges/components/CompetencyChallengeCategoryTree';\nimport { createQuestion, deleteQuestion, updateQuestion } from '@/services/escola-lms/gift_quiz';\nimport { GiftQuizQuestionEditor } from './editor';\nimport type { QuizQuestionSubmitData } from './editor/types';\nimport './index.css';\n\nconst DragHandle = SortableHandle(() => <MenuOutlined style={{ cursor: 'grab', color: '#999' }} />);\nconst SortableItem = SortableElement((props: React.HTMLAttributes<HTMLTableRowElement>) => (\n  <tr {...props} />\n));\nconst SortContainer = SortableContainer((props: React.HTMLAttributes<HTMLTableSectionElement>) => (\n  <tbody {...props} />\n));\n\nconst staticColumns: ProColumns<API.QuizQuestion>[] = [\n  {\n    title: <FormattedMessage id=\"sort\" defaultMessage=\"sort\" />,\n    dataIndex: 'id',\n    width: 60,\n    className: 'drag-visible',\n    render: () => <DragHandle />,\n  },\n  {\n    title: <FormattedMessage id=\"type\" defaultMessage=\"Type\" />,\n    dataIndex: 'type',\n    hideInForm: true,\n    hideInSearch: true,\n    hideInSetting: true,\n    render: (_, row) => <FormattedMessage id={`gift_type.${row.type}`} />,\n  },\n  {\n    title: <FormattedMessage id=\"question\" defaultMessage=\"Question\" />,\n    dataIndex: 'question',\n    hideInForm: true,\n    hideInSearch: true,\n    hideInSetting: true,\n    render: (_, row) => {\n      const obj = parse(row.value);\n\n      if (obj?.[0] && 'stem' in obj[0]) {\n        return obj[0].stem.text;\n      }\n      return 'question';\n    },\n  },\n];\n\nconst categoryColumn: ProColumns<API.QuizQuestion> = {\n  title: <FormattedMessage id=\"category\" defaultMessage=\"Category\" />,\n  dataIndex: 'category_id',\n  hideInForm: true,\n  hideInSearch: true,\n  hideInSetting: true,\n  render: (_, row) =>\n    typeof row.category_id === 'number' ? (\n      <TypeButtonDrawer type=\"Category\" type_id={row.category_id} />\n    ) : (\n      '-'\n    ),\n};\n\ninterface OnSortEndParams {\n  oldIndex: number;\n  newIndex: number;\n}\n\ninterface Props {\n  quizId: number;\n  questions: API.QuizQuestion[];\n  onAdded?: () => void;\n  onRemoved?: () => void;\n  onEdited?: () => void;\n  tableHeader?: React.ReactNode;\n  tableLoading?: boolean;\n  questionsCategory?: boolean | Omit<CompetencyChallengeCategoryTreeProps, 'value' | 'onChange'>;\n}\n\nexport const Table: React.FC<Props> = ({\n  questions,\n  onAdded,\n  onRemoved,\n  onEdited,\n  quizId,\n  tableLoading,\n  tableHeader,\n  questionsCategory,\n}) => {\n  const [loading, setLoading] = useState(false);\n  const [newQuestion, setNewQuestion] = useState(false);\n  const [editQuestion, setEditQuestion] = useState<API.QuizQuestion>();\n\n  const [debug, setDebug] = useState(false);\n\n  const [dataSource, setDataSource] = useState(questions);\n\n  const actionRef = useRef<ActionType>();\n\n  useEffect(() => {\n    actionRef.current?.reload();\n    setDataSource(questions);\n  }, [questions]);\n\n  const onSortEnd = ({ oldIndex, newIndex }: OnSortEndParams) => {\n    if (oldIndex !== newIndex) {\n      const newData = arrayMoveImmutable(dataSource.slice(), oldIndex, newIndex)\n        .filter(Boolean)\n        .map((row, index) => ({ ...row, order: index }));\n\n      newData.forEach((newRow, index) => {\n        if (newRow.id !== dataSource[index].id) {\n          updateQuestion(newRow.id, { ...newRow, order: index + 1, topic_gift_quiz_id: quizId });\n        }\n      });\n\n      setDataSource(newData);\n    }\n  };\n\n  // TODO types & refactor https://react.dev/learn/your-first-component#nesting-and-organizing-components\n  const DraggableContainer = (props: any) => (\n    <SortContainer\n      useDragHandle\n      disableAutoscroll\n      helperClass=\"row-dragging\"\n      onSortEnd={onSortEnd}\n      {...props}\n    />\n  );\n\n  // TODO types & refactor https://react.dev/learn/your-first-component#nesting-and-organizing-components\n  const DraggableBodyRow = (props: any) => {\n    const { className, style, ...restProps } = props;\n    // function findIndex base on Table rowKey props and should always be a right array index\n    const index = dataSource.findIndex((x) => x.id === restProps['data-row-key']);\n    return <SortableItem index={index} {...restProps} />;\n  };\n\n  const onNewQuestionSubmit = useCallback(\n    async (data: QuizQuestionSubmitData) => {\n      try {\n        setLoading(true);\n\n        const response = await createQuestion({ topic_gift_quiz_id: quizId, ...data });\n        setNewQuestion(false);\n        onAdded?.();\n        return response.success;\n      } catch (err) {\n        console.log(err);\n        return false;\n      } finally {\n        setLoading(false);\n      }\n    },\n    [newQuestion, quizId],\n  );\n\n  const onEditQuestionSubmit = useCallback(\n    async (data: QuizQuestionSubmitData) => {\n      if (editQuestion?.id === undefined) return false;\n\n      try {\n        setLoading(true);\n\n        const response = await updateQuestion(editQuestion.id, {\n          topic_gift_quiz_id: quizId,\n          ...data,\n        });\n        setEditQuestion(undefined);\n        onEdited?.();\n        return response.success;\n      } catch (err) {\n        console.log(err);\n        return false;\n      } finally {\n        setLoading(false);\n      }\n    },\n    [editQuestion?.id, quizId],\n  );\n\n  return (\n    <>\n      <Drawer open={newQuestion} onClose={() => setNewQuestion(false)}>\n        <GiftQuizQuestionEditor\n          onSubmit={onNewQuestionSubmit}\n          competencyChallengeCategoryTreeProps={questionsCategory}\n        />\n      </Drawer>\n      <Drawer open={!!editQuestion} onClose={() => setEditQuestion(undefined)}>\n        <GiftQuizQuestionEditor\n          onSubmit={onEditQuestionSubmit}\n          competencyChallengeCategoryTreeProps={questionsCategory}\n          values={editQuestion}\n        />\n      </Drawer>\n      <ProTable\n        search={false}\n        cardProps={{ bodyStyle: { padding: 0 } }}\n        loading={tableLoading}\n        headerTitle={tableHeader}\n        toolbar={{ settings: [] }}\n        toolBarRender={() => [\n          <Button\n            key=\"add\"\n            icon={<PlusCircleOutlined />}\n            type=\"primary\"\n            onClick={() => setNewQuestion(true)}\n          >\n            {' '}\n            <FormattedMessage id=\"addNewQuestion\" defaultMessage=\"Add new question\" />\n          </Button>,\n        ]}\n        columns={[\n          ...staticColumns,\n          ...(questionsCategory ? [categoryColumn] : []),\n          {\n            title: <FormattedMessage id=\"actions\" defaultMessage=\"Actions\" />,\n            dataIndex: 'address',\n            valueType: 'option',\n            render: (_, row) => [\n              <Button\n                key=\"edit\"\n                size=\"small\"\n                type=\"primary\"\n                onClick={() => {\n                  setEditQuestion(row);\n                }}\n              >\n                <FormattedMessage id=\"Questions.edit\" defaultMessage=\"Edit Question\" />\n              </Button>,\n              <Button\n                loading={loading}\n                key=\"delete\"\n                size=\"small\"\n                danger\n                onClick={() => {\n                  setLoading(true);\n                  deleteQuestion(row.id)\n                    .then(() => {\n                      if (onRemoved) {\n                        onRemoved();\n                      }\n                    })\n                    .finally(() => {\n                      setLoading(false);\n                    });\n                }}\n              >\n                <FormattedMessage id=\"Questions.delete\" defaultMessage=\"Delete Question\" />\n              </Button>,\n            ],\n          },\n        ]}\n        rowKey={(record) => record.id}\n        pagination={false}\n        dataSource={dataSource}\n        components={{\n          body: {\n            wrapper: DraggableContainer,\n            row: DraggableBodyRow,\n          },\n        }}\n      />\n      <Typography style={{ marginTop: '3em' }}>\n        Debug GIFT: <Switch checked={debug} onChange={(v) => setDebug(v)} />\n      </Typography>\n    </>\n  );\n};\n"],"sourceRoot":""}