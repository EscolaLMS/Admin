(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"5ddx":function(G,E,e){"use strict";var T=e("9og8"),g=e("+L6B"),I=e("2/Rp"),c=e("tJVT"),O=e("WmNS"),b=e.n(O),d=e("q1tI"),p=e.n(d),o=e("9kvl"),D=e("Qiat"),_=e("VK58"),n=e("xvlK"),h=e("Xcxh"),r=e("y8nQ"),i=e("Vl3Y"),l=e("rmhi"),m=e("VMEa"),u=e("Qurx"),a=e("nKUr"),M=function(P){var v=Object(o.i)(),L=P.visible,f=P.onVisibleChange,x=P.onFinish,V=i.a.useForm(),A=Object(c.a)(V,1),W=A[0];return Object(d.useEffect)(function(){return function(){W.resetFields()}},[]),Object(a.jsx)(l.a,{form:W,title:v.formatMessage({id:"newSetting",defaultMessage:"newSetting"}),width:"30vw",visible:L,onVisibleChange:f,onFinish:x,children:Object(a.jsxs)(m.b.Group,{children:[Object(a.jsx)(u.a,{label:Object(a.jsx)(o.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"}),Object(a.jsx)(u.a,{label:Object(a.jsx)(o.a,{id:"value",defaultMessage:"value"}),rules:[{required:!0}],width:"md",name:"value"})]})})},s=M,y=function(P){var v=P.user,L=P.isProfile,f=L===void 0?!1:L,x=Object(d.useRef)(),V=Object(o.i)(),A=Object(d.useState)(!1),W=Object(c.a)(A,2),N=W[0],K=W[1],S=Object(d.useState)("PATCH"),C=Object(c.a)(S,2),R=C[0],U=C[1],$=[{title:Object(a.jsx)(o.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(a.jsx)(o.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInSearch:!0}],F=Object(d.useCallback)(function(j){var w=j&&Object.entries(j).map(function(J){return{key:J[0],value:J[1]}});return w},[v]);return Object(a.jsxs)(p.a.Fragment,{children:[Object(a.jsx)(D.a,{headerTitle:V.formatMessage({id:"menu.settings"}),actionRef:x,rowKey:"id",search:!1,toolBarRender:f?function(){return[Object(a.jsxs)(I.a,{type:"primary",onClick:function(){K(-1),U("PATCH")},children:[Object(a.jsx)(n.a,{})," ",Object(a.jsx)(o.a,{id:"pages.searchTable.new"})]},"primary"),Object(a.jsxs)(I.a,{color:"yellow",type:"primary",onClick:function(){K(-1),U("PUT")},children:[Object(a.jsx)(h.a,{})," ",Object(a.jsx)(o.a,{id:"user.settings.overwrite"})]},"primary")]}:!1,request:function(){return Object(_.c)(Number(v)).then(function(w){return w.success?{data:F(w.data)}:[]})},columns:$}),Object(a.jsx)(s,{id:N,visible:Number.isInteger(N),onVisibleChange:function(w){return w===!1&&K(!1)},onFinish:function(){var j=Object(T.a)(b.a.mark(function w(J){var Q;return b.a.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,Object(_.f)(Number(v),R,J);case 2:Q=z.sent,Q.success&&(K(!1),x.current&&x.current.reload());case 4:case"end":return z.stop()}},w)}));return function(w){return j.apply(this,arguments)}}()})]})},t=E.a=y},BAh9:function(G,E,e){"use strict";e.d(E,"a",function(){return b}),e.d(E,"b",function(){return p}),e.d(E,"e",function(){return D}),e.d(E,"d",function(){return n}),e.d(E,"c",function(){return h});var T=e("k1fw"),g=e("9og8"),I=e("WmNS"),c=e.n(I),O=e("9kvl");function b(i,l){return d.apply(this,arguments)}function d(){return d=Object(g.a)(c.a.mark(function i(l,m){return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(O.f)("/api/admin/file/list",Object(T.a)({method:"GET",params:l},m||{})));case 1:case"end":return a.stop()}},i)})),d.apply(this,arguments)}function p(i,l){return o.apply(this,arguments)}function o(){return o=Object(g.a)(c.a.mark(function i(l,m){return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(O.f)("/api/admin/file/find",Object(T.a)({method:"GET",params:l},m||{})));case 1:case"end":return a.stop()}},i)})),o.apply(this,arguments)}function D(i,l,m){return _.apply(this,arguments)}function _(){return _=Object(g.a)(c.a.mark(function i(l,m,u){var a;return c.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a=new FormData,a.append("file[]",l),a.append("target",m),s.abrupt("return",Object(O.f)("/api/admin/file/upload",Object(T.a)({method:"POST",data:a},u||{})));case 4:case"end":return s.stop()}},i)})),_.apply(this,arguments)}var n=function(l){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(l,"&w=").concat(m)};function h(i,l){return r.apply(this,arguments)}function r(){return r=Object(g.a)(c.a.mark(function i(l,m){return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(O.f)("/api/admin/file/delete",Object(T.a)({method:"DELETE",data:{url:l}},m||{})));case 1:case"end":return a.stop()}},i)})),r.apply(this,arguments)}},"DBJ/":function(G,E,e){"use strict";var T=e("y8nQ"),g=e("Vl3Y"),I=e("etVw"),c=e("q1tI"),O=e.n(c),b=e("9kvl"),d=function(_){var n=_.condition,h=_.children,r=_.wrap;return n?O.a.cloneElement(r(h)):h},p=e("nKUr"),o=function(n){var h=n.onChange,r=n.url,i=n.name,l=n.extra,m=n.accept,u=n.data,a=n.wrapInForm,M=a===void 0?!0:a,s=Object(b.i)();return u&&u[i]&&delete u[i],Object(p.jsx)(d,{condition:M,wrap:function(t){return Object(p.jsx)(g.a,{children:t})},children:Object(p.jsx)(I.a,{title:Object(p.jsx)(b.a,{id:"upload_click_here"}),placeholder:s.formatMessage({id:"upload_click_here"}),onChange:h,label:Object(p.jsx)(b.a,{id:"upload"}),max:2,fieldProps:{data:u,accept:m,name:i,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(r),extra:l})})},D=E.a=o},Jfn2:function(G,E,e){"use strict";var T=e("k1fw"),g=e("XCrF"),I=e("1GRj"),c=e("PpiC"),O=e("q1tI"),b=e.n(O),d=e("nKUr"),p=e.n(d),o=function(_){var n=_.path,h=_.size,r=_.srcSizes,i=_.alt,l=i===void 0?"LMS Image":i,m=Object(c.a)(_,["path","size","srcSizes","alt"]),u="".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(n,"&w=").concat(r?r[0]:h),a=r&&r.map(function(M){return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(n,"&w=").concat(M," ").concat(M,"w")});return Object(d.jsx)("div",{className:"escolalms-image",children:Object(d.jsx)(I.a,Object(T.a)({src:u,srcSet:a&&a.join(","),alt:l},m))})};E.a=o},etVw:function(G,E,e){"use strict";var T=e("DZo9"),g=e("8z0m"),I=e("+L6B"),c=e("2/Rp"),O=e("wx14"),b=e("q1tI"),d=e.n(b),p=e("z7Xi"),o=e("WFLz"),D=function(n,h){var r=n.fieldProps,i=n.name,l=n.action,m=n.accept,u=n.listType,a=n.title,M=a===void 0?"\u5355\u51FB\u4E0A\u4F20":a,s=n.max,y=n.icon,t=y===void 0?d.a.createElement(p.a,null):y,B=n.value,P=n.buttonProps,v=n.onChange,L=n.disabled,f=n.proFieldProps,x=n.fileList,V=(s===void 0||!B||(B==null?void 0:B.length)<s)&&(f==null?void 0:f.mode)!=="read",A=(u!=null?u:r==null?void 0:r.listType)==="picture-card";return d.a.createElement(g.a,Object(O.a)({action:l,accept:m,ref:h,name:i||"file",listType:u||"picture",fileList:x!=null?x:B},r,{onChange:function(N){var K;v==null||v(N),r==null||(K=r.onChange)===null||K===void 0||K.call(r,N)}}),V&&(A?d.a.createElement("span",null,t," ",M):d.a.createElement(c.a,Object(O.a)({disabled:L||(r==null?void 0:r.disabled)},P),t,M)))};E.a=Object(o.a)(d.a.forwardRef(D),{getValueFromEvent:function(n){return n.fileList}})},fWLy:function(G,E,e){"use strict";e.r(E);var T=e("T2oS"),g=e("W9HT"),I=e("miYZ"),c=e("tsqr"),O=e("k1fw"),b=e("9og8"),d=e("tJVT"),p=e("WmNS"),o=e.n(p),D=e("q1tI"),_=e.n(D),n=e("VMEa"),h=e("Qurx"),r=e("nhC9"),i=e("VK58"),l=e("hd5d"),m=e("tMyG"),u=e("DBJ/"),a=e("Jfn2"),M=e("Ty5D"),s=e("9kvl"),y=e("5ddx"),t=e("nKUr"),B=e.n(t);E.default=function(){var P=Object(M.g)(),v=Object(s.i)(),L=P.tab,f=L===void 0?"general":L,x=Object(D.useState)(),V=Object(d.a)(x,2),A=V[0],W=V[1];Object(D.useEffect)(function(){var S=function(){var C=Object(b.a)(o.a.mark(function R(){var U;return o.a.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,Object(i.d)();case 2:U=F.sent,U.success&&W(Object(O.a)(Object(O.a)({},U.data),{},{bio:U.data.bio||""}));case 4:case"end":return F.stop()}},R)}));return function(){return C.apply(this,arguments)}}();S()},[]);var N=Object(D.useMemo)(function(){return{onFinish:function(){var S=Object(b.a)(o.a.mark(function R(U){var $;return o.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,Object(i.g)(U);case 2:$=j.sent,c.default.success($.message);case 4:case"end":return j.stop()}},R)}));function C(R){return S.apply(this,arguments)}return C}(),initialValues:A}},[A]),K=Object(D.useMemo)(function(){return{onFinish:function(){var S=Object(b.a)(o.a.mark(function R(U){var $;return o.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,Object(i.h)(U);case 2:$=j.sent,c.default.success($.message);case 4:case"end":return j.stop()}},R)}));function C(R){return S.apply(this,arguments)}return C}(),initialValues:A}},[A]);return A?Object(t.jsx)(m.a,{title:Object(t.jsx)(s.a,{id:"my_profile"}),header:{breadcrumb:{routes:[{path:"users",breadcrumbName:v.formatMessage({id:"menu.Users"})},{path:"me",breadcrumbName:v.formatMessage({id:"my_profile"})},{path:String(f),breadcrumbName:v.formatMessage({id:String(f)})}]}},children:Object(t.jsxs)(r.a,{tabs:{type:"card",activeKey:f,onChange:function(C){return s.d.push("/users/me/".concat(C))}},children:[Object(t.jsx)(r.a.TabPane,{tab:Object(t.jsx)(s.a,{id:"general"}),children:Object(t.jsxs)(n.b,Object(O.a)(Object(O.a)({},N),{},{children:[Object(t.jsxs)(n.b.Group,{children:[Object(t.jsx)(h.a,{width:"md",name:"first_name",label:Object(t.jsx)(s.a,{id:"first_name"}),tooltip:Object(t.jsx)(s.a,{id:"first_name"}),placeholder:v.formatMessage({id:"first_name"}),required:!0}),Object(t.jsx)(h.a,{width:"md",name:"last_name",label:Object(t.jsx)(s.a,{id:"last_name"}),tooltip:Object(t.jsx)(s.a,{id:"last_name"}),placeholder:v.formatMessage({id:"last_name"}),required:!0})]}),Object(t.jsx)(n.b.Item,{name:"bio",label:Object(t.jsx)(s.a,{id:"bio"}),tooltip:Object(t.jsx)(s.a,{id:"bio_tooltip"}),valuePropName:"value",children:Object(t.jsx)(l.a,{directory:"users/wysiwyg"})}),Object(t.jsx)(n.b.Group,{children:Object(t.jsxs)(n.b.Item,{name:"avatar",label:Object(t.jsx)(s.a,{id:"avatar"}),children:[A.path_avatar&&Object(t.jsx)(a.a,{path:A.path_avatar,size:600,width:200}),Object(t.jsx)(u.a,{url:"/api/profile/upload-avatar",name:"avatar",accept:"image/*",onChange:function(C){C.file.status==="done"&&C.file.response.success&&W(C.file.response.data)}})]})})]}))},"general"),Object(t.jsx)(r.a.TabPane,{tab:Object(t.jsx)(s.a,{id:"change_password"}),children:Object(t.jsxs)(n.b,Object(O.a)(Object(O.a)({},K),{},{children:[Object(t.jsx)(n.b.Group,{children:Object(t.jsx)(h.a.Password,{width:"md",name:"current_password",label:Object(t.jsx)(s.a,{id:"current_password"}),placeholder:v.formatMessage({id:"current_password"}),required:!0})}),Object(t.jsxs)(n.b.Group,{children:[Object(t.jsx)(h.a.Password,{width:"md",name:"new_password",label:Object(t.jsx)(s.a,{id:"new_password"}),placeholder:v.formatMessage({id:"new_password"}),required:!0}),Object(t.jsx)(h.a.Password,{width:"md",name:"new_confirm_password",label:Object(t.jsx)(s.a,{id:"new_confirm_password"}),placeholder:v.formatMessage({id:"new_confirm_password"}),required:!0})]})]}))},"change_password"),Object(t.jsx)(r.a.TabPane,{tab:Object(t.jsx)(s.a,{id:"user.settings"}),children:Object(t.jsx)(y.a,{user:String(A.id),isProfile:!0})},"user_settings")]})}):Object(t.jsx)(g.a,{})}},hd5d:function(G,E,e){"use strict";var T=e("9og8"),g=e("WmNS"),I=e.n(g),c=e("q1tI"),O=e.n(c),b=e("3Ef1"),d=e.n(b),p=e("BAh9"),o=e("vtG9"),D=e.n(o),_=e("9kvl"),n=e("nKUr"),h=e.n(n),r=function(l){var m=l.value,u=l.onChange,a=l.directory,M=a===void 0?"/wysiwyg":a,s=Object(_.i)();return Object(n.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(n.jsx)(d.a,{uploadImage:function(){var y=Object(T.a)(I.a.mark(function t(B){var P,v;return I.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Object(p.e)(B,M);case 2:if(P=f.sent,!P.success){f.next=6;break}return v=P.data[0].name.includes("/")?P.data[0].name:"".concat(M).concat(P.data[0].name),f.abrupt("return",Object(p.d)(v,1e3));case 6:throw new Error("Error while uploading");case 7:case"end":return f.stop()}},t)}));return function(t){return y.apply(this,arguments)}}(),defaultValue:m||"",onChange:function(t){return u&&u(t())},placeholder:s.formatMessage({id:"wysiwyg_placeholder"})})})};E.a=r},vtG9:function(G,E,e){}}]);
