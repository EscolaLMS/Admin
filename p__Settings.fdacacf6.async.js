(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"+up7":function(ee,v,e){"use strict";e.d(v,"f",function(){return D}),e.d(v,"d",function(){return a}),e.d(v,"b",function(){return O}),e.d(v,"h",function(){return o}),e.d(v,"c",function(){return b}),e.d(v,"e",function(){return s}),e.d(v,"a",function(){return h}),e.d(v,"g",function(){return K});var F=e("k1fw"),y=e("9og8"),U=e("WmNS"),r=e.n(U),E=e("9kvl");function D(u,i){return M.apply(this,arguments)}function M(){return M=Object(y.a)(r.a.mark(function u(i,C){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(E.f)("/api/admin/settings",Object(F.a)({method:"GET",useCache:!1,params:Object(F.a)(Object(F.a)({},i),{},{per_page:i.pageSize,page:i.current})},C||{})));case 1:case"end":return n.stop()}},u)})),M.apply(this,arguments)}function a(u,i){return P.apply(this,arguments)}function P(){return P=Object(y.a)(r.a.mark(function u(i,C){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(E.f)("/api/admin/settings/".concat(i),Object(F.a)({method:"GET",useCache:!1},C||{})));case 1:case"end":return n.stop()}},u)})),P.apply(this,arguments)}function O(u,i){return R.apply(this,arguments)}function R(){return R=Object(y.a)(r.a.mark(function u(i,C){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(E.f)("/api/admin/settings",Object(F.a)({method:"POST",headers:{"Content-Type":"application/json"},data:i},C||{})));case 1:case"end":return n.stop()}},u)})),R.apply(this,arguments)}function o(u,i,C){return S.apply(this,arguments)}function S(){return S=Object(y.a)(r.a.mark(function u(i,C,d){return r.a.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.abrupt("return",Object(E.f)("/api/admin/settings/".concat(i),Object(F.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:C},d||{})));case 1:case"end":return Z.stop()}},u)})),S.apply(this,arguments)}function b(u,i){return f.apply(this,arguments)}function f(){return f=Object(y.a)(r.a.mark(function u(i,C){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(E.f)("/api/admin/settings/".concat(i),Object(F.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},C||{})));case 1:case"end":return n.stop()}},u)})),f.apply(this,arguments)}function s(u){return I.apply(this,arguments)}function I(){return I=Object(y.a)(r.a.mark(function u(i){return r.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(E.f)("/api/admin/settings/groups",Object(F.a)({method:"GET",useCache:!1},i||{})));case 1:case"end":return d.stop()}},u)})),I.apply(this,arguments)}function h(u){return c.apply(this,arguments)}function c(){return c=Object(y.a)(r.a.mark(function u(i){return r.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(E.f)("/api/admin/config",Object(F.a)({method:"GET",useCache:!1},i||{})));case 1:case"end":return d.stop()}},u)})),c.apply(this,arguments)}function K(u,i){return V.apply(this,arguments)}function V(){return V=Object(y.a)(r.a.mark(function u(i,C){var d,n;return r.a.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return d=i.key,n=i.value,N.abrupt("return",Object(E.f)("/api/admin/config",Object(F.a)({method:"POST",data:{config:[{key:d,value:n}]}},C||{})));case 2:case"end":return N.stop()}},u)})),V.apply(this,arguments)}},"3fxf":function(ee,v,e){"use strict";var F=e("DjyN"),y=e("NUBc"),U=e("Mwp2"),r=e("VXEj"),E=e("+L6B"),D=e("2/Rp"),M=e("5NDa"),a=e("5rEg"),P=e("oBTY"),O=e("k1fw"),R=e("tJVT"),o=e("DYRE"),S=e("zeV3"),b=e("tU7J"),f=e("wFql"),s=e("q1tI"),I=e.n(s),h=e("BAh9"),c=e("/MfK"),K=e("mAF4"),V=e("dF/Y"),u=e("9kvl"),i=e("DBJ/"),C=e("lLVY"),d=e.n(C),n=e("nKUr"),Z=e.n(n),N=function(se){var w=se.directory,te=se.onUploaded;return Object(n.jsxs)(S.b,{align:"start",children:[Object(n.jsxs)(f.a.Text,{children:[Object(n.jsx)(u.a,{id:"pages.files.filesBrowser"}),Object(n.jsx)(f.a.Text,{code:!0,children:w})]}),Object(n.jsx)(i.a,{url:"/api/admin/file/upload",name:"file[]",data:{target:w},onChange:function(oe){return oe.file.status==="done"&&te(w)}})]})},ue=function(se){var w=se.defaultDirectory,te=w===void 0?"/":w,k=se.onFile,oe=Object(u.i)(),he=Object(s.useState)({loading:!1,name:"",directory:te,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),fe=Object(R.a)(he,2),G=fe[0],je=fe[1],ne=Object(s.useRef)(),X=Object(s.useCallback)(function(L){je(function(x){return Object(O.a)(Object(O.a)({},x),{},{loading:L})})},[]),t=Object(s.useCallback)(function(L){var x,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,Oe=function(){return ne.current&&ne.current.abort()};return Oe(),ne.current=new AbortController,X(!0),Object(h.a)({directory:L,page:q},{signal:(x=ne.current)===null||x===void 0?void 0:x.signal}).then(function(ie){ie.success&&je(function(ce){return Object(O.a)(Object(O.a)(Object(O.a)({},ce),ie.data),{},{data:[{url:L.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(P.a)(ie.data.data.map(function(re){return Object(O.a)(Object(O.a)({},re),{},{url:re.mime==="directory"?"".concat(L,"/").concat(re.name):re.url})}))).filter(function(re){return L==="/"?re.name!=="..":!0}),directory:L,loading:!1})})}).catch(function(){return X(!1)}),function(){Oe()}},[X]);Object(s.useEffect)(function(){return t(te)},[te,t]);var pe=Object(s.useCallback)(function(L){X(!0),Object(h.c)(L).then(function(){t(G.directory)}).catch(function(){X(!1)})},[t,X,G.directory]),ge=Object(s.useCallback)(function(L,x){var q,Oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,ie=function(){return ne.current&&ne.current.abort()};return ie(),ne.current=new AbortController,X(!0),Object(h.b)({directory:L,name:x,page:Oe},{signal:(q=ne.current)===null||q===void 0?void 0:q.signal}).then(function(ce){ce.success&&je(function(re){return Object(O.a)(Object(O.a)(Object(O.a)({},re),ce.data),{},{data:[{url:L.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(P.a)(ce.data.data.map(function(me){return Object(O.a)(Object(O.a)({},me),{},{url:me.mime==="directory"?"".concat(L,"/").concat(me.name):me.url})}))).filter(function(me){return L==="/"?me.name!=="..":!0}),directory:L,loading:!1})})}).catch(function(){return X(!1)}),function(){ie()}},[X]);return Object(n.jsxs)("div",{className:"file-browser",children:[Object(n.jsxs)("div",{className:"file-browser__header",children:[Object(n.jsx)(a.a,{placeholder:oe.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(x){return je(function(q){return Object(O.a)(Object(O.a)({},q),{},{name:x.target.value})})},value:G.name}),Object(n.jsxs)("div",{children:[Object(n.jsx)(D.a,{className:"file-browser__button",onClick:function(){return t(G.directory)},children:Object(n.jsx)(u.a,{id:"reset"})}),Object(n.jsx)(D.a,{className:"file-browser__button",type:"primary",onClick:function(){return ge(G.directory,G.name)},children:Object(n.jsx)(u.a,{id:"query"})})]})]}),Object(n.jsx)(r.b,{loading:G.loading,size:"small",itemLayout:"horizontal",dataSource:G.data,header:Object(n.jsx)(N,{directory:G.directory,onUploaded:function(x){return t(x)}}),footer:Object(n.jsx)(N,{directory:G.directory,onUploaded:function(x){return t(x)}}),renderItem:function(x){return Object(n.jsx)(r.b.Item,{actions:x.mime!=="directory"?[Object(n.jsx)(D.a,{type:"default",danger:!0,icon:Object(n.jsx)(c.a,{}),size:"small",onClick:function(){return pe(x.url)}})]:[],children:Object(n.jsx)(r.b.Item.Meta,{avatar:x.mime==="directory"?Object(n.jsx)(D.a,{type:"primary",icon:Object(n.jsx)(K.a,{}),size:"small",onClick:function(){return t(x.url)}}):Object(n.jsx)("a",{href:x.url,target:"_blank",children:Object(n.jsx)(D.a,{type:"default",icon:Object(n.jsx)(V.a,{}),size:"small"})}),description:Object(n.jsx)(I.a.Fragment,{children:Object(n.jsx)(D.a,{type:"text",size:"small",onClick:function(){return x.mime==="directory"?t(x.url):k&&k(x,G.directory)},children:x.name})})})})}}),Object(n.jsx)(y.a,{pageSizeOptions:[],current:G.current_page,total:G.total,pageSize:G.per_page,onChange:function(x){return t(G.directory,x)}})]})};v.a=ue},"5qq5":function(ee,v,e){"use strict";var F=e("7Kak"),y=e("9yH6"),U=e("wx14"),r=e("VTBJ"),E=e("Ff2n"),D=e("q1tI"),M=e.n(D),a=e("adzw"),P=e("uX+g"),O=e("WFLz"),R=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],o=M.a.forwardRef(function(s,I){var h=s.fieldProps,c=s.options,K=s.radioType,V=s.layout,u=s.proFieldProps,i=s.valueEnum,C=Object(E.a)(s,R);return M.a.createElement(a.a,Object(U.a)({mode:"edit",valueType:K==="button"?"radioButton":"radio",ref:I,valueEnum:Object(P.a)(i,void 0)},C,{fieldProps:Object(r.a)({options:c,layout:V},h),proFieldProps:u,filedConfig:{customLightMode:!0}}))}),S=M.a.forwardRef(function(s,I){var h=s.fieldProps,c=s.children;return M.a.createElement(y.a,Object(U.a)({},h,{ref:I}),c)}),b=Object(O.a)(S,{valuePropName:"checked",ignoreWidth:!0}),f=b;f.Group=o,f.Button=y.a.Button,f.displayName="ProFormComponent",v.a=f},BAh9:function(ee,v,e){"use strict";e.d(v,"a",function(){return D}),e.d(v,"b",function(){return a}),e.d(v,"e",function(){return O}),e.d(v,"d",function(){return o}),e.d(v,"c",function(){return S});var F=e("k1fw"),y=e("9og8"),U=e("WmNS"),r=e.n(U),E=e("9kvl");function D(f,s){return M.apply(this,arguments)}function M(){return M=Object(y.a)(r.a.mark(function f(s,I){return r.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(E.f)("/api/admin/file/list",Object(F.a)({method:"GET",params:s},I||{})));case 1:case"end":return c.stop()}},f)})),M.apply(this,arguments)}function a(f,s){return P.apply(this,arguments)}function P(){return P=Object(y.a)(r.a.mark(function f(s,I){return r.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(E.f)("/api/admin/file/find",Object(F.a)({method:"GET",params:s},I||{})));case 1:case"end":return c.stop()}},f)})),P.apply(this,arguments)}function O(f,s,I){return R.apply(this,arguments)}function R(){return R=Object(y.a)(r.a.mark(function f(s,I,h){var c;return r.a.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return c=new FormData,c.append("file[]",s),c.append("target",I),V.abrupt("return",Object(E.f)("/api/admin/file/upload",Object(F.a)({method:"POST",data:c},h||{})));case 4:case"end":return V.stop()}},f)})),R.apply(this,arguments)}var o=function(s){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(s,"&w=").concat(I)};function S(f,s){return b.apply(this,arguments)}function b(){return b=Object(y.a)(r.a.mark(function f(s,I){return r.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(E.f)("/api/admin/file/delete",Object(F.a)({method:"DELETE",data:{url:s}},I||{})));case 1:case"end":return c.stop()}},f)})),b.apply(this,arguments)}},BiO0:function(ee,v,e){"use strict";var F=e("wx14"),y=e("Ff2n"),U=e("q1tI"),r=e.n(U),E=e("adzw"),D=["fieldProps","proFieldProps"],M=function(P,O){var R=P.fieldProps,o=P.proFieldProps,S=Object(y.a)(P,D);return r.a.createElement(E.a,Object(F.a)({ref:O,mode:"edit",valueType:"textarea",fieldProps:R,proFieldProps:o},S))};v.a=r.a.forwardRef(M)},"DBJ/":function(ee,v,e){"use strict";var F=e("y8nQ"),y=e("Vl3Y"),U=e("etVw"),r=e("q1tI"),E=e.n(r),D=e("9kvl"),M=function(R){var o=R.condition,S=R.children,b=R.wrap;return o?E.a.cloneElement(b(S)):S},a=e("nKUr"),P=function(o){var S=o.onChange,b=o.url,f=o.name,s=o.extra,I=o.accept,h=o.data,c=o.wrapInForm,K=c===void 0?!0:c,V=Object(D.i)();return h&&h[f]&&delete h[f],Object(a.jsx)(M,{condition:K,wrap:function(i){return Object(a.jsx)(y.a,{children:i})},children:Object(a.jsx)(U.a,{title:Object(a.jsx)(D.a,{id:"upload_click_here"}),placeholder:V.formatMessage({id:"upload_click_here"}),onChange:S,label:Object(a.jsx)(D.a,{id:"upload"}),max:2,fieldProps:{data:h,accept:I,name:f,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(b),extra:s})})},O=v.a=P},"F/zT":function(ee,v,e){"use strict";var F=e("wx14"),y=e("VTBJ"),U=e("Ff2n"),r=e("q1tI"),E=e.n(r),D=e("adzw"),M=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],a=E.a.forwardRef(function(P,O){var R=P.fieldProps,o=P.unCheckedChildren,S=P.checkedChildren,b=P.proFieldProps,f=Object(U.a)(P,M);return E.a.createElement(D.a,Object(F.a)({valueType:"switch",mode:"edit",fieldProps:Object(y.a)({unCheckedChildren:o,checkedChildren:S},R),ref:O,valuePropName:"checked",proFieldProps:b,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},f))});v.a=a},YjuE:function(ee,v,e){"use strict";e.r(v);var F=e("T2oS"),y=e("W9HT"),U=e("tJVT"),r=e("q1tI"),E=e.n(r),D=e("nhC9"),M=e("Ty5D"),a=e("9kvl"),P=e("tMyG"),O=e("+up7"),R=e("P2fV"),o=e("NJEC"),S=e("5Dmo"),b=e("3S7+"),f=e("+L6B"),s=e("2/Rp"),I=e("+BJd"),h=e("mr32"),c=e("jrin"),K=e("k1fw"),V=e("miYZ"),u=e("tsqr"),i=e("9og8"),C=e("WmNS"),d=e.n(C),n=e("xvlK"),Z=e("Qiat"),N=e("y8nQ"),ue=e("Vl3Y"),be=e("5NDa"),se=e("5rEg"),w=e("VMEa"),te=e("rmhi"),k=e("Qurx"),oe=e("F/zT"),he=e("5qq5"),fe=e("BiO0"),G=e("hd5d"),je=e("3fxf"),ne=e("ovOe"),X=e.n(ne),t=e("nKUr"),pe=function(l){var m=l.value,p=l.onChange,T=l.type,z=T===void 0?"file":T,j=Object(r.useState)(!1),W=Object(U.a)(j,2),Y=W[0],g=W[1];return Object(t.jsxs)(E.a.Fragment,{children:[Object(t.jsxs)(w.b.Group,{children:[Object(t.jsx)(se.a,{value:m,readOnly:!0}),Object(t.jsxs)(s.a,{size:"small",type:"primary",onClick:function(){return g(!Y)},children:["toggle ",z," browser"]})]}),Y&&Object(t.jsx)(je.a,{onFile:function(Q,B){return p&&p("".concat(B,"/").concat(Q.name))}})]})},ge=function(l){var m=Object(a.i)(),p=l.visible,T=l.onVisibleChange,z=l.onFinish,j=l.id,W=ue.a.useForm(),Y=Object(U.a)(W,1),g=Y[0],J=!j||j===-1,Q=Object(r.useState)("text"),B=Object(U.a)(Q,2),_=B[0],A=B[1];Object(r.useEffect)(function(){j&&j!==-1?Object(O.d)(j).then(function(H){H.success&&(g.setFieldsValue(H.data),A(H.data.type))}):(g.resetFields(),A("text"))},[j,g]);var le=Object(r.useCallback)(function(H){H.type&&H.type!==_&&A(H.type)},[_]);return Object(t.jsxs)(te.a,{form:g,title:m.formatMessage({id:j?"editSetting":"newSetting",defaultMessage:j?"editSetting":"newSetting"}),width:"60vw",visible:p,onVisibleChange:T,onFinish:z,onValuesChange:le,children:[Object(t.jsxs)(w.b.Group,{children:[Object(t.jsx)(k.a,{label:Object(t.jsx)(a.a,{id:"group",defaultMessage:"group"}),rules:[{required:!0}],width:"md",name:"group"})," ",Object(t.jsx)(k.a,{label:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"})]}),Object(t.jsxs)(w.b.Group,{children:[Object(t.jsx)(oe.a,{name:"enumerable",label:Object(t.jsx)(a.a,{id:"enumerable",defaultMessage:"enumerable"})}),Object(t.jsx)(oe.a,{name:"public",label:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"})})]}),Object(t.jsx)(w.b.Group,{children:Object(t.jsx)(he.a.Group,{disabled:!J,name:"type",label:Object(t.jsx)(a.a,{id:"type"}),options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"},{label:"json",value:"json"},{label:"file",value:"file"},{label:"image",value:"image"}]})}),Object(t.jsxs)("div",{children:[_==="text"&&Object(t.jsx)(k.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"})}),_==="json"&&Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(fe.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"}),tooltip:"".concat(m.formatMessage({id:"example_json"}),': {"name":"John", "age":30, "city":["New York","Warsaw"]}')}),Object(t.jsx)(w.b.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(X.a,{src:JSON.parse(g.getFieldValue("value"))})}catch(ae){return Object(t.jsx)(X.a,{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]}),(_==="file"||_==="image")&&Object(t.jsx)(w.b.Item,{name:"value",label:"value",tooltip:"select file from current repository or upload new one",valuePropName:"value",children:Object(t.jsx)(pe,{type:_})}),_==="markdown"&&Object(t.jsx)(w.b.Item,{name:"value",label:"value",tooltip:"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.",valuePropName:"value",children:Object(t.jsx)(G.a,{directory:"settings/wysiwyg"})})]})]})},L=ge,x=e("G3dp"),q=e("/MfK"),Oe=function(){var $=Object(i.a)(d.a.mark(function l(m,p,T){var z;return d.a.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return z=u.default.loading(m.formatMessage({id:"loading"})),W.prev=1,W.next=4,T&&T!==-1?Object(O.h)(T,Object(K.a)({},p)):Object(O.b)(Object(K.a)({},p));case 4:return z(),u.default.success(m.formatMessage({id:"success"})),W.abrupt("return",!0);case 9:return W.prev=9,W.t0=W.catch(1),z(),u.default.error(m.formatMessage({id:"error"})),W.abrupt("return",!1);case 14:case"end":return W.stop()}},l,null,[[1,9]])}));return function(m,p,T){return $.apply(this,arguments)}}(),ie=function(){var $=Object(i.a)(d.a.mark(function l(m,p){var T;return d.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return T=u.default.loading(m.formatMessage({id:"loading"})),j.prev=1,j.next=4,Object(O.c)(p);case 4:return T(),u.default.success(m.formatMessage({id:"success"})),j.abrupt("return",!0);case 9:return j.prev=9,j.t0=j.catch(1),T(),u.default.error(m.formatMessage({id:"error"})),j.abrupt("return",!1);case 14:case"end":return j.stop()}},l,null,[[1,9]])}));return function(m,p){return $.apply(this,arguments)}}(),ce=function(){var l=Object(r.useState)(!1),m=Object(U.a)(l,2),p=m[0],T=m[1],z=Object(r.useState)([]),j=Object(U.a)(z,2),W=j[0],Y=j[1],g=Object(r.useRef)(),J=Object(a.i)();Object(r.useEffect)(function(){Object(O.e)().then(function(B){B.success&&Y(B.data)})},[]);var Q=[{title:Object(t.jsx)(a.a,{id:"group",defaultMessage:"group"}),dataIndex:"group",hideInSearch:!1,key:"group",valueType:"select",width:100,valueEnum:W.sort().reduce(function(B,_){return Object(K.a)(Object(K.a)({},B),{},Object(c.a)({},_,_))},{})},{title:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"enumerable",defaultMessage:"enumerable"}),dataIndex:"enumerable",hideInForm:!0,hideInSearch:!0,render:function(_,A){return Object(t.jsx)(h.a,{color:A.enumerable?"success":"error",children:Object(t.jsx)(a.a,{id:A.enumerable?"true":"false",defaultMessage:A.enumerable?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(_,A){return Object(t.jsx)(h.a,{color:A.public?"success":"error",children:Object(t.jsx)(a.a,{id:A.public?"true":"false",defaultMessage:A.public?"true":"false"})})}},{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(_,A){return[Object(t.jsx)(b.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(s.a,{type:"primary",icon:Object(t.jsx)(x.a,{}),onClick:function(){return T(A.id)}})},"edit"),Object(t.jsx)(o.a,{title:Object(t.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(i.a)(d.a.mark(function le(){var H;return d.a.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return ve.next=2,ie(J,A.id);case 2:H=ve.sent,H&&(T(!1),g.current&&g.current.reload());case 4:case"end":return ve.stop()}},le)})),okText:Object(t.jsx)(a.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(a.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(b.a,{title:Object(t.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(s.a,{type:"primary",icon:Object(t.jsx)(q.a,{}),danger:!0})})},"delete")]}}];return Object(t.jsxs)(E.a.Fragment,{children:[Object(t.jsx)(Z.a,{headerTitle:J.formatMessage({id:"menu.settings"}),actionRef:g,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[Object(t.jsxs)(s.a,{type:"primary",onClick:function(){T(-1)},children:[Object(t.jsx)(n.a,{})," ",Object(t.jsx)(a.a,{id:"pages.searchTable.new"})]},"primary")]},request:function(_){var A=_.pageSize,le=_.current,H=_.group;return Object(O.f)({pageSize:A,current:le,group:H}).then(function(ae){return ae.success?{data:ae.data,total:ae.meta.total,success:!0}:[]})},columns:Q}),Object(t.jsx)(L,{groups:W,id:p,visible:Number.isInteger(p),onVisibleChange:function(_){return _===!1&&T(!1)},onFinish:function(){var B=Object(i.a)(d.a.mark(function _(A){var le;return d.a.wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,Oe(J,A,Number(p));case 2:le=ae.sent,le&&(T(!1),g.current&&g.current.reload());case 4:case"end":return ae.stop()}},_)}));return function(_){return B.apply(this,arguments)}}()})]})},re=ce,me=e("tU7J"),Ee=e("wFql"),_e=e("Fghh"),ye=Ee.a.Text,de;(function($){$.Array="array",$.String="string"})(de||(de={}));var Pe=function(l,m){return m===de.Array?l&&Array.isArray(l)?JSON.stringify(l):"[]":l},Me=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",m=arguments.length>1?arguments[1]:void 0;if(m===de.Array){var p=JSON.parse(l);return p&&Array.isArray(p)?p:[]}return l},De=function(l){var m=Object(_e.j)(),p=l.visible,T=l.onVisibleChange,z=l.onFinish,j=l.value,W=ue.a.useForm(),Y=Object(U.a)(W,1),g=Y[0],J=Object(r.useMemo)(function(){return(j.rules||[]).includes(de.Array)?de.Array:de.String},[j.rules]);return Object(r.useEffect)(function(){g.setFieldsValue(Object(K.a)(Object(K.a)({},j),{},{value:Pe(j.value,J)}))},[J,j,g]),Object(t.jsxs)(te.a,{form:g,title:j.full_key,width:"60vw",visible:p,onVisibleChange:T,onFinish:Object(i.a)(d.a.mark(function Q(){var B;return d.a.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,Object(O.g)({key:j.full_key,value:Me(g.getFieldsValue().value,J)});case 2:if(B=A.sent,!B.success){A.next=6;break}return z(B.success===!0),A.abrupt("return",B.success);case 6:return A.abrupt("return");case 7:case"end":return A.stop()}},Q)})),children:[Object(t.jsxs)(w.b.Group,{children:[Object(t.jsx)(oe.a,{disabled:!0,name:"public",label:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"})}),Object(t.jsx)(oe.a,{disabled:!0,name:"readonly",label:Object(t.jsx)(a.a,{id:"readonly",defaultMessage:"readonly"})}),Object(t.jsx)(w.b.Item,{shouldUpdate:!0,label:Object(t.jsx)(a.a,{id:"rules",defaultMessage:"rules"}),children:function(){return Object(t.jsx)(ye,{code:!0,children:JSON.stringify(g.getFieldValue("rules"))})}})]}),J===de.Array?Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(fe.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"}),tooltip:"".concat(m.formatMessage({id:"example_json"}),': ["first_field_name", "second_field_name"]')}),Object(t.jsx)(w.b.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(X.a,{src:JSON.parse(g.getFieldValue("value"))})}catch(B){return Object(t.jsx)(X.a,{src:JSON.parse('{ "error": "cannot parse this array" }')})}}})]}):Object(t.jsx)(k.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"})})]})},Ce=De,xe=[{title:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"readonly",defaultMessage:"readonly"}),dataIndex:"readonly",hideInForm:!0,hideInSearch:!0,render:function(l,m){return Object(t.jsx)(h.a,{color:m.readonly?"success":"error",children:Object(t.jsx)(a.a,{id:m.readonly?"true":"false",defaultMessage:m.readonly?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(l,m){return Object(t.jsx)(h.a,{color:m.public?"success":"error",children:Object(t.jsx)(a.a,{id:m.public?"true":"false",defaultMessage:m.public?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0}],Te=function $(l,m){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return!l||typeof l!="object"?!1:(Object.keys(l).forEach(function(T){var z=l[T];T===m?p.push(l):typeof z=="object"&&$(z,m,p)}),p)},Ae=function(l){var m=l.packageName,p=l.values,T=l.onValueUpdated,z=Object(a.i)(),j=Object(r.useState)(),W=Object(U.a)(j,2),Y=W[0],g=W[1],J=Object(r.useMemo)(function(){var Q=p[m];return Te(Q,"rules")},[p,m]);return Object(t.jsxs)(E.a.Fragment,{children:[Object(t.jsx)(Z.a,{headerTitle:z.formatMessage({id:"menu.settings"}),rowKey:"key",search:{labelWidth:120},dataSource:J,columns:[].concat(xe,[{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(B,_){return[Object(t.jsx)(b.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(s.a,{type:"primary",icon:Object(t.jsx)(x.a,{}),onClick:function(){return g(_)}})},"edit")]}}])}),Y&&Object(t.jsx)(Ce,{value:Y,visible:Y!==void 0,onVisibleChange:function(B){return B===!1&&g(void 0)},onFinish:Object(i.a)(d.a.mark(function Q(){return d.a.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:T();case 1:case"end":return _.stop()}},Q)}))})]})},Ie=Ae,Be=function(l){return l.replaceAll("escolalms","").split("_").join("")},Fe=v.default=function(){var $=Object(M.g)(),l=Object(a.i)(),m=$.tab,p=m===void 0?"user_settings":m,T=Object(r.useState)(),z=Object(U.a)(T,2),j=z[0],W=z[1],Y=Object(r.useCallback)(function(){Object(O.a)().then(function(g){g.success&&W(g.data)})},[]);return Object(r.useEffect)(function(){Y()},[]),j?Object(t.jsx)(P.a,{title:Object(t.jsx)(a.a,{id:"settings"}),header:{breadcrumb:{routes:[{path:"settings",breadcrumbName:l.formatMessage({id:"menu.Settings"})},{path:String(p),breadcrumbName:String(p)}]}},children:Object(t.jsxs)(D.a,{tabs:{type:"card",activeKey:p,onChange:function(J){return a.d.push("/settings/".concat(J))}},children:[Object(t.jsx)(D.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"user.settings"}),children:Object(t.jsx)(re,{})},"user_settings"),Object.keys(j).map(function(g){return Object(t.jsxs)(D.a.TabPane,{tab:Object(t.jsxs)("span",{children:[Object(t.jsx)(a.a,{id:"package"})," ",Be(g)]}),children:[Object(t.jsx)(Ie,{values:j,packageName:g,onValueUpdated:function(){return Y()}}),g]},g)})]})}):Object(t.jsx)(y.a,{})}},etVw:function(ee,v,e){"use strict";var F=e("DZo9"),y=e("8z0m"),U=e("+L6B"),r=e("2/Rp"),E=e("wx14"),D=e("q1tI"),M=e.n(D),a=e("z7Xi"),P=e("WFLz"),O=function(o,S){var b=o.fieldProps,f=o.name,s=o.action,I=o.accept,h=o.listType,c=o.title,K=c===void 0?"\u5355\u51FB\u4E0A\u4F20":c,V=o.max,u=o.icon,i=u===void 0?M.a.createElement(a.a,null):u,C=o.value,d=o.buttonProps,n=o.onChange,Z=o.disabled,N=o.proFieldProps,ue=o.fileList,be=(V===void 0||!C||(C==null?void 0:C.length)<V)&&(N==null?void 0:N.mode)!=="read",se=(h!=null?h:b==null?void 0:b.listType)==="picture-card";return M.a.createElement(y.a,Object(E.a)({action:s,accept:I,ref:S,name:f||"file",listType:h||"picture",fileList:ue!=null?ue:C},b,{onChange:function(te){var k;n==null||n(te),b==null||(k=b.onChange)===null||k===void 0||k.call(b,te)}}),be&&(se?M.a.createElement("span",null,i," ",K):M.a.createElement(r.a,Object(E.a)({disabled:Z||(b==null?void 0:b.disabled)},d),i,K)))};v.a=Object(P.a)(M.a.forwardRef(O),{getValueFromEvent:function(o){return o.fileList}})},hd5d:function(ee,v,e){"use strict";var F=e("9og8"),y=e("WmNS"),U=e.n(y),r=e("q1tI"),E=e.n(r),D=e("3Ef1"),M=e.n(D),a=e("BAh9"),P=e("vtG9"),O=e.n(P),R=e("9kvl"),o=e("nKUr"),S=e.n(o),b=function(s){var I=s.value,h=s.onChange,c=s.directory,K=c===void 0?"/wysiwyg":c,V=Object(R.i)();return Object(o.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(o.jsx)(M.a,{uploadImage:function(){var u=Object(F.a)(U.a.mark(function i(C){var d,n;return U.a.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,Object(a.e)(C,K);case 2:if(d=N.sent,!d.success){N.next=6;break}return n=d.data[0].name.includes("/")?d.data[0].name:"".concat(K).concat(d.data[0].name),N.abrupt("return",Object(a.d)(n,1e3));case 6:throw new Error("Error while uploading");case 7:case"end":return N.stop()}},i)}));return function(i){return u.apply(this,arguments)}}(),defaultValue:I||"",onChange:function(i){return h&&h(i())},placeholder:V.formatMessage({id:"wysiwyg_placeholder"})})})};v.a=b},lLVY:function(ee,v,e){},vtG9:function(ee,v,e){}}]);
