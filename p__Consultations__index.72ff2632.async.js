"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2923,8047],{47389:function(ie,U,e){var V=e(1413),j=e(67294),z=e(27363),A=e(84089),J=function(Q,Y){return j.createElement(A.Z,(0,V.Z)((0,V.Z)({},Q),{},{ref:Y,icon:z.Z}))},D=j.forwardRef(J);U.Z=D},86273:function(ie,U,e){var V=e(5574),j=e.n(V),z=e(64631),A=e(67294),J=e(80854),D=e(94116),x=e(85893),Q=function w(M,g){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return M.subcategories&&M.subcategories.length?{title:M.name,value:M.id,disabled:typeof g=="number"&&I!==g,children:M.subcategories.map(function(W){return w(W,g,I+1)})}:{title:M.name,value:M.id,disabled:typeof g=="number"&&I!==g}},Y=function(M){var g=M.value,I=M.onChange,W=M.multiple,ne=W===void 0?!1:W,n=M.enabledDepth,y=(0,A.useState)([]),k=j()(y,2),b=k[0],q=k[1];(0,A.useEffect)(function(){(0,D.CL)().then(function(K){K.success&&q(K.data)})},[]);var H=(0,A.useMemo)(function(){return b.map(function(K){return Q(K,n)})},[b]);return(0,x.jsx)(z.Z,{loading:b.length===0,multiple:ne,showSearch:!0,value:g,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:(0,x.jsx)(J.FormattedMessage,{id:"select",defaultMessage:"Please select"}),allowClear:!0,treeDefaultExpandAll:!0,onChange:I,treeData:H,disabled:b.length===0})};U.Z=Y},80004:function(ie,U,e){e.d(U,{ZP:function(){return F}});var V=e(15009),j=e.n(V),z=e(99289),A=e.n(z),J=e(5574),D=e.n(J),x=e(67294),Q=e(51042),Y=e(47389),w=e(82061),M=e(16894),g=e(2453),I=e(14726),W=e(83062),ne=e(86738),n=e(80854),y=e(36309),k=e(97857),b=e.n(k),q=e(37476),H=e(5966),K=e(86615),s=e(952),ue=e(31199),_e=e(75842),le=e(95486),a=e(85893),ee=function(p){return p.BOOLEAN="boolean",p.NUMBER="number",p.VARCHAR="varchar",p.TEXT="text",p.JSON="json",p}(ee||{}),re=function(L){var S=L.visible,$=L.onVisibleChange,de=L.onResponse,N=L.class_type,B=L.name,t=B===void 0?"new":B,ae=L.fields,X=ae===void 0?[]:ae,Z=(0,n.useIntl)(),R=_e.Z.useForm(),m=D()(R,1),r=m[0],O=(0,x.useCallback)(function(){var i=A()(j()().mark(function v(C){return j()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,y.kB)(b()(b()({},C),{},{class_type:N,rules:JSON.stringify(C.rules),extra:JSON.stringify(C.extra)})).then(function(h){h.success&&de(h.data)});case 2:return o.abrupt("return",!1);case 3:case"end":return o.stop()}},v)}));return function(v){return i.apply(this,arguments)}}(),[r]);return(0,x.useEffect)(function(){if(t!=="new"){var i=X.find(function(v){return v.name===t});i&&r.setFieldsValue(i)}else r.resetFields()},[t,r,X]),(0,a.jsxs)(q.Y,{form:r,title:Z.formatMessage({id:t==="new"?"newModelField":"editModelField",defaultMessage:t==="new"?"new Model Field":"edit Model Field"}),width:"800px",visible:S,onVisibleChange:$,onFinish:O,children:[(0,a.jsx)(H.Z,{required:!0,label:(0,a.jsx)(n.FormattedMessage,{id:"name",defaultMessage:"name"}),tooltip:(0,a.jsx)(n.FormattedMessage,{id:"name_tooltip",defaultMessage:"name_tooltip"}),rules:[{required:!0}],width:"md",name:"name"}),(0,a.jsx)(K.Z.Group,{rules:[{required:!0}],name:"type",label:(0,a.jsx)(n.FormattedMessage,{id:"type",defaultMessage:"type"}),tooltip:(0,a.jsx)(n.FormattedMessage,{id:"type_tooltip",defaultMessage:"type_tooltip"}),options:Object.keys(ee).map(function(i){return{label:Z.formatMessage({id:"model.".concat(ee[i])}),value:ee[i]}})}),(0,a.jsx)(H.Z,{width:"md",name:"default",label:(0,a.jsx)(n.FormattedMessage,{id:"default",defaultMessage:"default"}),tooltip:(0,a.jsx)(n.FormattedMessage,{id:"default_tooltip",defaultMessage:"default_tooltip"}),placeholder:Z.formatMessage({id:"default"})}),(0,a.jsx)(s.ZP.Item,{name:"rules",label:(0,a.jsxs)("span",{children:[(0,a.jsx)(n.FormattedMessage,{id:"rules",defaultMessage:"rules"})," ",(0,a.jsx)("a",{rel:"noreferrer",href:"https://laravel.com/docs/9.x/validation#available-validation-rules",target:"_blank",children:(0,a.jsx)(n.FormattedMessage,{id:"available-validation-rules",defaultMessage:"available-validation-rules"})})]}),tooltip:(0,a.jsx)(n.FormattedMessage,{id:"available-validation-rules-tooltip"}),valuePropName:"value",children:(0,a.jsx)(le.Z,{})}),(0,a.jsx)(ue.Z,{width:"md",name:"visibility",label:(0,a.jsx)(n.FormattedMessage,{id:"visibility"}),tooltip:(0,a.jsx)(n.FormattedMessage,{id:"visibility_tooltip"}),placeholder:Z.formatMessage({id:"visibility",defaultMessage:"visibility"}),min:1,max:1024,fieldProps:{step:1},rules:[{validator:function(){var i=A()(j()().mark(function C(c,o){return j()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(!(Math.pow(2,Math.ceil(Math.log2(o)))-o)){E.next=2;break}return E.abrupt("return",Promise.reject(new Error(Z.formatMessage({id:"notPowerOfTwo",defaultMessage:"notPowerOfTwo"}))));case 2:return E.abrupt("return",Promise.resolve());case 3:case"end":return E.stop()}},C)}));function v(C,c){return i.apply(this,arguments)}return v}()}]}),(0,a.jsx)(s.ZP.Item,{name:"extra",label:(0,a.jsx)(n.FormattedMessage,{id:"extra"}),tooltip:(0,a.jsx)(n.FormattedMessage,{id:"extra_tooltip"}),valuePropName:"value",children:(0,a.jsx)(le.Z,{})})]})},me=re,ce=[{title:(0,a.jsx)(n.FormattedMessage,{id:"name",defaultMessage:"name"}),dataIndex:"name",hideInSearch:!0,sorter:!0},{title:(0,a.jsx)(n.FormattedMessage,{id:"type",defaultMessage:"type"}),dataIndex:"type",sorter:!0},{title:(0,a.jsx)(n.FormattedMessage,{id:"default",defaultMessage:"default"}),dataIndex:"default",hideInSearch:!0}],te=function(L){var S=L.class_type,$=(0,x.useRef)(),de=(0,x.useState)(!1),N=D()(de,2),B=N[0],t=N[1],ae=(0,n.useIntl)(),X=(0,x.useState)(!1),Z=D()(X,2),R=Z[0],m=Z[1],r=(0,x.useState)([]),O=D()(r,2),i=O[0],v=O[1],C=(0,x.useCallback)(function(){var c=A()(j()().mark(function o(h){var E,se,_,d;return j()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return E=h.class_type_to_remove,se=h.name,t(!0),_=g.ZP.loading((0,a.jsx)(n.FormattedMessage,{id:"loading",defaultMessage:"loading"})),l.prev=3,l.next=6,(0,y.AK)({class_type:E,name:se}).then(function(T){t(!1),T.success&&g.ZP.success(T.message)});case 6:return _(),t(!1),(d=$.current)===null||d===void 0||d.reload(),l.abrupt("return",!0);case 12:return l.prev=12,l.t0=l.catch(3),_(),g.ZP.error((0,a.jsx)(n.FormattedMessage,{id:"error",defaultMessage:"error"})),t(!1),l.abrupt("return",!1);case 18:case"end":return l.stop()}},o,null,[[3,12]])}));return function(o){return c.apply(this,arguments)}}(),[$]);return(0,a.jsxs)(x.Fragment,{children:[(0,a.jsx)(me,{fields:i,onResponse:function(){var o;m(!1),(o=$.current)===null||o===void 0||o.reload()},class_type:S,name:R,visible:typeof R=="string",onVisibleChange:function(o){return o===!1&&m(!1)}}),(0,a.jsx)(M.ZP,{search:!1,headerTitle:ae.formatMessage({id:"ModelFields",defaultMessage:"Model Fields"}),toolBarRender:function(){return[(0,a.jsxs)(I.ZP,{type:"primary",onClick:function(){return m("new")},children:[(0,a.jsx)(Q.Z,{})," ",(0,a.jsx)(n.FormattedMessage,{id:"new",defaultMessage:"new"})]},"new")]},loading:B,actionRef:$,rowKey:"id",request:function(o,h){var E=o.pageSize,se=o.current,_=h&&Object.entries(h)[0];return t(!0),(0,y.XU)({page:se,per_page:E,class_type:S,order_by:_&&_[0],order:_?_[1]==="ascend"?"ASC":"DESC":void 0}).then(function(d){return t(!1),d.success?(v(d.data),{data:d.data,total:d.data.length,success:!0}):[]})},columns:[].concat(ce,[{title:(0,a.jsx)(n.FormattedMessage,{id:"options",defaultMessage:"options"}),dataIndex:"option",valueType:"option",width:"10%",render:function(o,h){return[(0,a.jsx)(W.Z,{title:(0,a.jsx)(n.FormattedMessage,{id:"edit",defaultMessage:"edit"}),children:(0,a.jsx)(I.ZP,{type:"primary",icon:(0,a.jsx)(Y.Z,{}),onClick:function(){return m(h.name)}})},"edit"),(0,a.jsx)(ne.Z,{title:(0,a.jsx)(n.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:function(){return h.name&&C({class_type_to_remove:S,name:h.name})},okText:(0,a.jsx)(n.FormattedMessage,{id:"yes",defaultMessage:"Yes"}),cancelText:(0,a.jsx)(n.FormattedMessage,{id:"no",defaultMessage:"No"}),children:(0,a.jsx)(W.Z,{title:(0,a.jsx)(n.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,a.jsx)(I.ZP,{type:"primary",icon:(0,a.jsx)(w.Z,{}),danger:!0})})},"delete")]}}])})]})},F=te},72777:function(ie,U,e){e.r(U),e.d(U,{TableColumns:function(){return X}});var V=e(15009),j=e.n(V),z=e(99289),A=e.n(z),J=e(19632),D=e.n(J),x=e(5574),Q=e.n(x),Y=e(52677),w=e.n(Y),M=e(97857),g=e.n(M),I=e(13769),W=e.n(I),ne=e(86273),n=e(80004),y=e(45919),k=e(28808),b=e(23961),q=e(51490),H=e(31472),K=e(66419),s=e(80854),ue=e(4795),_e=e(1832),le=e(51042),a=e(47389),ee=e(82061),re=e(26271),me=e(74453),ce=e(16894),te=e(83863),F=e(66309),p=e(14726),L=e(25043),S=e(2453),$=e(83062),de=e(86738),N=e(60943),B=e(67294),t=e(85893),ae=["type","defaultRender"],X=[{title:(0,t.jsx)(s.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:(0,t.jsx)(s.FormattedMessage,{id:"dateRange",defaultMessage:"Date Range"}),dataIndex:"dateRange",hideInSearch:!1,hideInForm:!0,hideInTable:!0,valueType:"dateRange",fieldProps:{allowEmpty:[!0,!0]}},{title:(0,t.jsx)(s.FormattedMessage,{id:"name",defaultMessage:"name"}),dataIndex:"name",sorter:!0},{title:(0,t.jsx)(s.FormattedMessage,{id:"status",defaultMessage:"status"}),dataIndex:"status",hideInSearch:!0,sorter:!0,renderFormItem:function(m){var r=m.type;return r==="form"?null:(0,t.jsxs)(te.default,{mode:"multiple",children:[(0,t.jsx)(te.default.Option,{value:"draft",children:(0,t.jsx)(F.Z,{children:(0,t.jsx)(s.FormattedMessage,{id:"draft",defaultMessage:"draft"})})}),(0,t.jsx)(te.default.Option,{value:"archived",children:(0,t.jsx)(F.Z,{color:"error",children:(0,t.jsx)(s.FormattedMessage,{id:"archived",defaultMessage:"archived"})})}),(0,t.jsx)(te.default.Option,{value:"published",children:(0,t.jsx)(F.Z,{color:"success",children:(0,t.jsx)(s.FormattedMessage,{id:"published",defaultMessage:"published"})})})]})},valueEnum:{draft:{text:(0,t.jsx)(F.Z,{children:(0,t.jsx)(s.FormattedMessage,{id:"draft",defaultMessage:"draft"})}),status:"draft"},archived:{text:(0,t.jsx)(F.Z,{color:"error",children:(0,t.jsx)(s.FormattedMessage,{id:"archived",defaultMessage:"archived"})}),status:"archived"},published:{text:(0,t.jsx)(F.Z,{color:"success",children:(0,t.jsx)(s.FormattedMessage,{id:"published",defaultMessage:"published"})}),status:"published"}}},{title:(0,t.jsx)(s.FormattedMessage,{id:"product",defaultMessage:"base_price"}),dataIndex:"product",valueType:"textarea",search:!1,render:function(m,r){return r.product&&r.product.price?(0,t.jsx)(s.Link,{to:"/other/consultations/".concat(r.id,"/product"),children:(0,t.jsx)(p.ZP,{type:"primary",icon:(0,t.jsx)(ue.Z,{}),children:(0,t.jsx)("span",{children:(0,K.RW)(r.product.price,2,100)})})}):(0,t.jsxs)(L.Z,{children:[(0,t.jsx)(_e.Z,{})," ",(0,t.jsx)(s.FormattedMessage,{id:"no_pricing",defaultMessage:"no pricing"})]})}},{title:(0,t.jsx)(s.FormattedMessage,{id:"duration",defaultMessage:"duration"}),dataIndex:"duration",hideInSearch:!0,sorter:!0},{title:(0,t.jsx)(s.FormattedMessage,{id:"active_from",defaultMessage:"active_from"}),dataIndex:"active_from",hideInSearch:!0,sorter:!0,render:function(m,r){return(0,N.WU)(new Date(r.active_from),y.GC)}},{title:(0,t.jsx)(s.FormattedMessage,{id:"active_to",defaultMessage:"active_to"}),dataIndex:"active_to",hideInSearch:!0,sorter:!0,render:function(m,r){return(0,N.WU)(new Date(r.active_to),y.GC)}},{title:(0,t.jsx)(s.FormattedMessage,{id:"categories",defaultMessage:"Categories"}),dataIndex:"category_id",key:"category_id",sorter:!1,renderFormItem:function(m,r,O){var i=r.type,v=r.defaultRender,C=W()(r,ae);if(i==="form")return null;var c=O.getFieldValue("state");return(0,t.jsx)(ne.Z,g()(g()({},C),{},{state:{type:c}}))},render:function(m,r){var O;return(0,t.jsx)(B.Fragment,{children:(O=r.categories)===null||O===void 0?void 0:O.map(function(i){return w()(i)==="object"?(0,t.jsx)(F.Z,{children:i.name},i.name):(0,t.jsx)(F.Z,{children:i},i)})})}}],Z=function(){var m=(0,B.useRef)(),r=(0,B.useState)(!1),O=Q()(r,2),i=O[0],v=O[1],C=(0,s.useIntl)(),c=(0,k.Z)("EscolaLms\\Consultations\\Models\\Consultation"),o=(0,B.useMemo)(function(){var _;return c.state!=="loaded"?[]:((_=c==null?void 0:c.list)!==null&&_!==void 0?_:[]).reduce(function(d,u){var l,T=(0,s.getLocale)(),P=u==null||(l=u.extra)===null||l===void 0||(l=l.find(function(f){return f==null?void 0:f[T]}))===null||l===void 0?void 0:l[T];switch(u.type){case H.fS.Boolean:return[].concat(D()(d),[{title:P!=null?P:(0,t.jsx)(s.FormattedMessage,{id:u.name}),dataIndex:u.name,hideInSearch:!0,width:100,render:function(oe,G){return(0,t.jsx)(F.Z,{color:G!=null&&G[u.name]?"green":"red",children:G!=null&&G[u.name]?(0,t.jsx)(s.FormattedMessage,{id:"true"}):(0,t.jsx)(s.FormattedMessage,{id:"false"})})}}]);case H.fS.Varchar:return[].concat(D()(d),[{title:P!=null?P:(0,t.jsx)(s.FormattedMessage,{id:u.name}),dataIndex:u.name,hideInSearch:!0}]);default:return d}},[])},[c]),h=(0,B.useCallback)(function(){var _=A()(j()().mark(function d(u){var l,T;return j()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return v(!0),l=S.ZP.loading((0,t.jsx)(s.FormattedMessage,{id:"loading",defaultMessage:"loading"})),f.prev=2,f.next=5,(0,q.SQ)(u).then(function(oe){v(!1),oe.success&&S.ZP.success(oe.message)});case 5:return l(),v(!1),(T=m.current)===null||T===void 0||T.reload(),f.abrupt("return",!0);case 11:return f.prev=11,f.t0=f.catch(2),l(),S.ZP.error((0,t.jsx)(s.FormattedMessage,{id:"error",defaultMessage:"error"})),v(!1),f.abrupt("return",!1);case 17:case"end":return f.stop()}},d,null,[[2,11]])}));return function(d){return _.apply(this,arguments)}}(),[m]),E=(0,s.useParams)(),se=E.consultation;return(0,t.jsx)(me._z,{children:(0,t.jsxs)(re.ZP,{tabs:{type:"card",activeKey:se,onChange:function(d){s.history.push("/other/consultations/".concat(d))}},children:[(0,t.jsx)(re.ZP.TabPane,{tab:(0,t.jsx)(s.FormattedMessage,{id:"list"}),children:(0,t.jsx)(ce.ZP,{headerTitle:C.formatMessage({id:"Consultations",defaultMessage:"Consultations"}),loading:i,actionRef:m,rowKey:"id",search:{layout:"vertical"},toolBarRender:function(){return[(0,t.jsx)(s.Link,{to:"/other/consultations/new/".concat(b.TabNames.ATTRIBUTES),children:(0,t.jsxs)(p.ZP,{type:"primary",children:[(0,t.jsx)(le.Z,{})," ",(0,t.jsx)(s.FormattedMessage,{id:"new",defaultMessage:"new"})]},"primary")},"addnew")]},request:function(d,u){var l=d.name,T=d.status,P=d.dateRange,f=d.category_id,oe=d.pageSize,G=d.current;v(!0);var Me=P&&P[0]?(0,N.WU)(new Date(P[0]),y.Cu):void 0,ve=P&&P[1]?(0,N.WU)(new Date(P[1]),y.Cu):void 0;return(0,q.sL)(g()({name:l||void 0,"categories[]":f,per_page:oe,page:G,date_from:Me,date_to:ve,status:T},(0,K.di)(u,"created_at"))).then(function(fe){return v(!1),fe.success?{data:fe.data,total:fe.meta.total,success:!0}:[]})},columns:[].concat(X,D()(o),[{title:(0,t.jsx)(s.FormattedMessage,{id:"options",defaultMessage:"options"}),dataIndex:"option",valueType:"option",width:"10%",render:function(d,u){return[(0,t.jsx)(s.Link,{to:"/other/consultations/".concat(u.id,"/").concat(b.TabNames.ATTRIBUTES),children:(0,t.jsx)($.Z,{title:(0,t.jsx)(s.FormattedMessage,{id:"edit",defaultMessage:"edit"}),children:(0,t.jsx)(p.ZP,{type:"primary",icon:(0,t.jsx)(a.Z,{})})})},"edit"),(0,t.jsx)(de.Z,{title:(0,t.jsx)(s.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:function(){return u.id&&h(u.id)},okText:(0,t.jsx)(s.FormattedMessage,{id:"yes",defaultMessage:"Yes"}),cancelText:(0,t.jsx)(s.FormattedMessage,{id:"no",defaultMessage:"No"}),children:(0,t.jsx)($.Z,{title:(0,t.jsx)(s.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,t.jsx)(p.ZP,{type:"primary",icon:(0,t.jsx)(ee.Z,{}),danger:!0})})},"delete")]}}])})},"list"),(0,t.jsx)(re.ZP.TabPane,{tab:(0,t.jsx)(s.FormattedMessage,{id:"ModelFields"}),children:(0,t.jsx)(n.ZP,{class_type:"EscolaLms\\Consultations\\Models\\Consultation"})},"fields")]})})};U.default=Z}}]);
