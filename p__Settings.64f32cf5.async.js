(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{"3fxf":function(de,I,e){"use strict";var z=e("DjyN"),J=e("NUBc"),A=e("Mwp2"),m=e("VXEj"),w=e("+L6B"),U=e("2/Rp"),V=e("5NDa"),n=e("5rEg"),S=e("oBTY"),h=e("k1fw"),y=e("tJVT"),te=e("DYRE"),c=e("zeV3"),Z=e("tU7J"),M=e("wFql"),j=e("q1tI"),P=e.n(j),B=e("BAh9"),f=e("/MfK"),q=e("mAF4"),L=e("dF/Y"),N=e("9kvl"),$=e("DBJ/"),ue=e("lLVY"),Y=e.n(ue),o=e("nKUr"),je=e.n(o),G=function(ae){var ce=ae.directory,ee=ae.onUploaded;return Object(o.jsxs)(c.b,{align:"start",children:[Object(o.jsxs)(M.a.Text,{children:[Object(o.jsx)(N.a,{id:"pages.files.filesBrowser"}),Object(o.jsx)(M.a.Text,{code:!0,children:ce})]}),Object(o.jsx)($.a,{url:"/api/admin/file/upload",name:"file[]",data:{target:ce},onChange:function(k){return k.file.status==="done"&&ee(ce,k.file)}})]})},fe=function(ae){var ce=ae.defaultDirectory,ee=ce===void 0?"/":ce,re=ae.onFile,k=ae.hideDeleteBtn,Me=k===void 0?!1:k,oe=ae.forceLoading,ye=oe===void 0?!1:oe,xe=Object(N.i)(),se=Object(j.useState)({loading:!1,name:"",directory:ee,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),he=Object(y.a)(se,2),D=he[0],ge=he[1],Q=Object(j.useRef)(),H=Object(j.useCallback)(function(E){ge(function(d){return Object(h.a)(Object(h.a)({},d),{},{loading:E})})},[]),ve=Object(j.useCallback)(function(E,d){ge(function(C){return Object(h.a)(Object(h.a)(Object(h.a)({},C),E.data),{},{data:[{url:d.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(S.a)(E.data.data.map(function(K){return Object(h.a)(Object(h.a)({},K),{},{url:K.mime==="directory"?"".concat(d,"/").concat(K.name):K.url})}))).filter(function(K){return d==="/"||d===ee?K.name!=="..":!0}),directory:d,loading:!1})})},[H]),x=Object(j.useCallback)(function(E){var d,C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,K=function(){return Q.current&&Q.current.abort()};return K(),Q.current=new AbortController,H(!0),Object(B.a)({directory:E,page:C},{signal:(d=Q.current)===null||d===void 0?void 0:d.signal}).then(function(ie){ie.success&&ve(ie,E)}).catch(function(){return H(!1)}),function(){K()}},[H]);Object(j.useEffect)(function(){return x(ee)},[ee,x]);var pe=Object(j.useCallback)(function(E){H(!0),Object(B.c)(E).then(function(){x(D.directory)}).catch(function(){H(!1)})},[x,H,D.directory]),me=Object(j.useCallback)(function(E,d){var C,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,ie=function(){return Q.current&&Q.current.abort()};return ie(),Q.current=new AbortController,H(!0),Object(B.b)({directory:E,name:d,page:K},{signal:(C=Q.current)===null||C===void 0?void 0:C.signal}).then(function(Oe){Oe.success&&ve(Oe,E)}).catch(function(){return H(!1)}),function(){ie()}},[H]);return Object(o.jsxs)("div",{className:"file-browser",children:[Object(o.jsxs)("div",{className:"file-browser__header",children:[Object(o.jsx)(n.a,{placeholder:xe.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(d){return ge(function(C){return Object(h.a)(Object(h.a)({},C),{},{name:d.target.value})})},value:D.name}),Object(o.jsxs)("div",{children:[Object(o.jsx)(U.a,{className:"file-browser__button",onClick:function(){return x(D.directory)},children:Object(o.jsx)(N.a,{id:"reset"})}),Object(o.jsx)(U.a,{className:"file-browser__button",type:"primary",onClick:function(){return me(D.directory,D.name)},children:Object(o.jsx)(N.a,{id:"query"})})]})]}),Object(o.jsx)(m.b,{loading:D.loading||ye,size:"small",itemLayout:"horizontal",dataSource:D.data,header:Object(o.jsx)(G,{directory:D.directory,onUploaded:function(d,C){return x(d)&&re&&re(C,d)}}),footer:Object(o.jsx)(G,{directory:D.directory,onUploaded:function(d){return x(d)&&re&&re(name,d)}}),renderItem:function(d){return Object(o.jsx)(m.b.Item,{actions:d.mime!=="directory"&&!Me?[Object(o.jsx)(U.a,{type:"default",danger:!0,icon:Object(o.jsx)(f.a,{}),size:"small",onClick:function(){return pe(d.url)}},"dir")]:[],children:Object(o.jsx)(m.b.Item.Meta,{avatar:d.mime==="directory"?Object(o.jsx)(U.a,{type:"primary",icon:Object(o.jsx)(q.a,{}),size:"small",onClick:function(){return x(d.url)}}):Object(o.jsx)("a",{href:d.url,target:"_blank",rel:"noreferrer",children:Object(o.jsx)(U.a,{type:"default",icon:Object(o.jsx)(L.a,{}),size:"small"})}),description:Object(o.jsx)(P.a.Fragment,{children:Object(o.jsx)(U.a,{type:"text",size:"small",onClick:function(){return d.mime==="directory"?x(d.url):re&&re(d,D.directory)},children:d.name})})})})}}),Object(o.jsx)(J.a,{pageSizeOptions:[],current:D.current_page,total:D.total,pageSize:D.per_page,onChange:function(d){return x(D.directory,d)}})]})};I.a=fe},BAh9:function(de,I,e){"use strict";e.d(I,"a",function(){return U}),e.d(I,"b",function(){return n}),e.d(I,"e",function(){return h}),e.d(I,"d",function(){return te}),e.d(I,"c",function(){return c});var z=e("k1fw"),J=e("9og8"),A=e("WmNS"),m=e.n(A),w=e("9kvl");function U(M,j){return V.apply(this,arguments)}function V(){return V=Object(J.a)(m.a.mark(function M(j,P){return m.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",Object(w.f)("/api/admin/file/list",Object(z.a)({method:"GET",params:j},P||{})));case 1:case"end":return f.stop()}},M)})),V.apply(this,arguments)}function n(M,j){return S.apply(this,arguments)}function S(){return S=Object(J.a)(m.a.mark(function M(j,P){return m.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",Object(w.f)("/api/admin/file/find",Object(z.a)({method:"GET",params:j},P||{})));case 1:case"end":return f.stop()}},M)})),S.apply(this,arguments)}function h(M,j,P){return y.apply(this,arguments)}function y(){return y=Object(J.a)(m.a.mark(function M(j,P,B){var f;return m.a.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return f=new FormData,f.append("file[]",j),f.append("target",P),L.abrupt("return",Object(w.f)("/api/admin/file/upload",Object(z.a)({method:"POST",data:f},B||{})));case 4:case"end":return L.stop()}},M)})),y.apply(this,arguments)}var te=function(j){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(j,"&w=").concat(P)};function c(M,j){return Z.apply(this,arguments)}function Z(){return Z=Object(J.a)(m.a.mark(function M(j,P){return m.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",Object(w.f)("/api/admin/file/delete",Object(z.a)({method:"DELETE",data:{url:j}},P||{})));case 1:case"end":return f.stop()}},M)})),Z.apply(this,arguments)}},"DBJ/":function(de,I,e){"use strict";var z=e("k1fw"),J=e("y8nQ"),A=e("Vl3Y"),m=e("etVw"),w=e("q1tI"),U=e.n(w),V=e("9kvl"),n=e("qFDU"),S=e("nKUr"),h=e.n(S),y=function(c){var Z=c.onChange,M=c.url,j=c.name,P=c.extra,B=c.accept,f=c.data,q=c.wrapInForm,L=q===void 0?!0:q,N=c.title,$=c.formProps,ue=Object(V.i)();return f&&f[j]&&delete f[j],Object(S.jsx)(n.a,{condition:L,wrap:function(o){return Object(S.jsx)(A.a,Object(z.a)(Object(z.a)({},$),{},{children:o}))},children:Object(S.jsx)(m.a,{title:N||Object(S.jsx)(V.a,{id:"upload_click_here"}),placeholder:ue.formatMessage({id:"upload_click_here"}),onChange:Z,label:Object(S.jsx)(V.a,{id:"upload"}),max:2,fieldProps:{data:f,accept:B,name:j,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(M),extra:P})})};I.a=y},YjuE:function(de,I,e){"use strict";e.r(I);var z=e("T2oS"),J=e("W9HT"),A=e("tJVT"),m=e("q1tI"),w=e.n(m),U=e("nhC9"),V=e("Ty5D"),n=e("9kvl"),S=e("tMyG"),h=e("k1fw"),y=e("9og8"),te=e("WmNS"),c=e.n(te);function Z(l,a){return M.apply(this,arguments)}function M(){return M=Object(y.a)(c.a.mark(function l(a,r){return c.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(n.f)("/api/admin/settings",Object(h.a)({method:"GET",useCache:!1,params:Object(h.a)(Object(h.a)({},a),{},{per_page:a.pageSize,page:a.current})},r||{})));case 1:case"end":return s.stop()}},l)})),M.apply(this,arguments)}function j(l,a){return P.apply(this,arguments)}function P(){return P=Object(y.a)(c.a.mark(function l(a,r){return c.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(n.f)("/api/admin/settings/".concat(a),Object(h.a)({method:"GET",useCache:!1},r||{})));case 1:case"end":return s.stop()}},l)})),P.apply(this,arguments)}function B(l,a){return f.apply(this,arguments)}function f(){return f=Object(y.a)(c.a.mark(function l(a,r){return c.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(n.f)("/api/admin/settings",Object(h.a)({method:"POST",headers:{"Content-Type":"application/json"},data:a},r||{})));case 1:case"end":return s.stop()}},l)})),f.apply(this,arguments)}function q(l,a,r){return L.apply(this,arguments)}function L(){return L=Object(y.a)(c.a.mark(function l(a,r,i){return c.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",Object(n.f)("/api/admin/settings/".concat(a),Object(h.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:r},i||{})));case 1:case"end":return p.stop()}},l)})),L.apply(this,arguments)}function N(l,a){return $.apply(this,arguments)}function $(){return $=Object(y.a)(c.a.mark(function l(a,r){return c.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(n.f)("/api/admin/settings/".concat(a),Object(h.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},r||{})));case 1:case"end":return s.stop()}},l)})),$.apply(this,arguments)}function ue(l){return Y.apply(this,arguments)}function Y(){return Y=Object(y.a)(c.a.mark(function l(a){return c.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(n.f)("/api/admin/settings/groups",Object(h.a)({method:"GET",useCache:!1},a||{})));case 1:case"end":return i.stop()}},l)})),Y.apply(this,arguments)}function o(l){return je.apply(this,arguments)}function je(){return je=Object(y.a)(c.a.mark(function l(a){return c.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(n.f)("/api/admin/config",Object(h.a)({method:"GET",useCache:!1},a||{})));case 1:case"end":return i.stop()}},l)})),je.apply(this,arguments)}function G(l,a){return fe.apply(this,arguments)}function fe(){return fe=Object(y.a)(c.a.mark(function l(a,r){var i,s;return c.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return i=a.key,s=a.value,u.abrupt("return",Object(n.f)("/api/admin/config",Object(h.a)({method:"POST",data:{config:[{key:i,value:s}]}},r||{})));case 2:case"end":return u.stop()}},l)})),fe.apply(this,arguments)}var Ee=e("P2fV"),ae=e("NJEC"),ce=e("5Dmo"),ee=e("3S7+"),re=e("+L6B"),k=e("2/Rp"),Me=e("+BJd"),oe=e("mr32"),ye=e("jrin"),xe=e("miYZ"),se=e("tsqr"),he=e("xvlK"),D=e("Qiat"),ge=e("y8nQ"),Q=e("Vl3Y"),H=e("5NDa"),ve=e("5rEg"),x=e("VMEa"),pe=e("rmhi"),me=e("Qurx"),E=e("F/zT"),d=e("5qq5"),C=e("BiO0"),K=e("hd5d"),ie=e("3fxf"),Oe=e("ovOe"),_e=e.n(Oe),t=e("nKUr"),De=function(a){var r=a.value,i=a.onChange,s=a.type,p=s===void 0?"file":s,u=Object(m.useState)(!1),_=Object(A.a)(u,2),F=_[0],O=_[1];return Object(t.jsxs)(w.a.Fragment,{children:[Object(t.jsxs)(x.a.Group,{children:[Object(t.jsx)(ve.a,{value:r,readOnly:!0}),Object(t.jsxs)(k.a,{size:"small",type:"primary",onClick:function(){return O(!F)},children:["toggle ",p," browser"]})]}),F&&Object(t.jsx)(ie.a,{onFile:function(R,v){return i&&i("".concat(v,"/").concat(R.name))}})]})},Ce=function(a){var r=Object(n.i)(),i=a.visible,s=a.onVisibleChange,p=a.onFinish,u=a.id,_=Q.a.useForm(),F=Object(A.a)(_,1),O=F[0],T=!u||u===-1,R=Object(m.useState)("text"),v=Object(A.a)(R,2),b=v[0],g=v[1];Object(m.useEffect)(function(){u&&u!==-1?j(u).then(function(W){W.success&&(O.setFieldsValue(W.data),g(W.data.type))}):(O.resetFields(),g("text"))},[u,O]);var ne=Object(m.useCallback)(function(W){W.type&&W.type!==b&&g(W.type)},[b]);return Object(t.jsxs)(pe.a,{form:O,title:r.formatMessage({id:u?"editSetting":"newSetting",defaultMessage:u?"editSetting":"newSetting"}),width:"60vw",visible:i,onVisibleChange:s,onFinish:p,onValuesChange:ne,children:[Object(t.jsxs)(x.a.Group,{children:[Object(t.jsx)(me.a,{label:Object(t.jsx)(n.a,{id:"group",defaultMessage:"group"}),rules:[{required:!0}],width:"md",name:"group"})," ",Object(t.jsx)(me.a,{label:Object(t.jsx)(n.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"})]}),Object(t.jsxs)(x.a.Group,{children:[Object(t.jsx)(E.a,{name:"enumerable",label:Object(t.jsx)(n.a,{id:"enumerable",defaultMessage:"enumerable"})}),Object(t.jsx)(E.a,{name:"public",label:Object(t.jsx)(n.a,{id:"public",defaultMessage:"public"})})]}),Object(t.jsx)(x.a.Group,{children:Object(t.jsx)(d.a.Group,{disabled:!T,name:"type",label:Object(t.jsx)(n.a,{id:"type"}),options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"},{label:"json",value:"json"},{label:"file",value:"file"},{label:"image",value:"image"}]})}),Object(t.jsxs)("div",{children:[b==="text"&&Object(t.jsx)(me.a,{width:"lg",name:"value",label:Object(t.jsx)(n.a,{id:"value"})}),b==="json"&&Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(C.a,{width:"lg",name:"value",label:Object(t.jsx)(n.a,{id:"value"}),tooltip:"".concat(r.formatMessage({id:"example_json"}),': {"name":"John", "age":30, "city":["New York","Warsaw"]}')}),Object(t.jsx)(x.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(_e.a,{src:JSON.parse(O.getFieldValue("value"))})}catch(X){return Object(t.jsx)(_e.a,{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]}),(b==="file"||b==="image")&&Object(t.jsx)(x.a.Item,{name:"value",label:"value",tooltip:"select file from current repository or upload new one",valuePropName:"value",children:Object(t.jsx)(De,{type:b})}),b==="markdown"&&Object(t.jsx)(x.a.Item,{name:"value",label:"value",tooltip:"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.",valuePropName:"value",children:Object(t.jsx)(K.a,{directory:"settings/wysiwyg"})})]})]})},Te=Ce,Pe=e("G3dp"),Ie=e("/MfK"),Ae=function(){var l=Object(y.a)(c.a.mark(function a(r,i,s){var p;return c.a.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return p=se.default.loading(r.formatMessage({id:"loading"})),_.prev=1,_.next=4,s&&s!==-1?q(s,Object(h.a)({},i)):B(Object(h.a)({},i));case 4:return p(),se.default.success(r.formatMessage({id:"success"})),_.abrupt("return",!0);case 9:return _.prev=9,_.t0=_.catch(1),p(),se.default.error(r.formatMessage({id:"error"})),_.abrupt("return",!1);case 14:case"end":return _.stop()}},a,null,[[1,9]])}));return function(r,i,s){return l.apply(this,arguments)}}(),Se=function(){var l=Object(y.a)(c.a.mark(function a(r,i){var s;return c.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return s=se.default.loading(r.formatMessage({id:"loading"})),u.prev=1,u.next=4,N(i);case 4:return s(),se.default.success(r.formatMessage({id:"success"})),u.abrupt("return",!0);case 9:return u.prev=9,u.t0=u.catch(1),s(),se.default.error(r.formatMessage({id:"error"})),u.abrupt("return",!1);case 14:case"end":return u.stop()}},a,null,[[1,9]])}));return function(r,i){return l.apply(this,arguments)}}(),Ue=function(){var a=Object(m.useState)(!1),r=Object(A.a)(a,2),i=r[0],s=r[1],p=Object(m.useState)([]),u=Object(A.a)(p,2),_=u[0],F=u[1],O=Object(m.useRef)(),T=Object(n.i)();Object(m.useEffect)(function(){ue().then(function(v){v.success&&F(v.data)})},[]);var R=[{title:Object(t.jsx)(n.a,{id:"group",defaultMessage:"group"}),dataIndex:"group",hideInSearch:!1,key:"group",valueType:"select",width:100,valueEnum:_.sort().reduce(function(v,b){return Object(h.a)(Object(h.a)({},v),{},Object(ye.a)({},b,b))},{})},{title:Object(t.jsx)(n.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(n.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(t.jsx)(n.a,{id:"enumerable",defaultMessage:"enumerable"}),dataIndex:"enumerable",hideInForm:!0,hideInSearch:!0,render:function(b,g){return Object(t.jsx)(oe.a,{color:g.enumerable?"success":"error",children:Object(t.jsx)(n.a,{id:g.enumerable?"true":"false",defaultMessage:g.enumerable?"true":"false"})})}},{title:Object(t.jsx)(n.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(b,g){return Object(t.jsx)(oe.a,{color:g.public?"success":"error",children:Object(t.jsx)(n.a,{id:g.public?"true":"false",defaultMessage:g.public?"true":"false"})})}},{hideInSearch:!0,title:Object(t.jsx)(n.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(b,g){return[Object(t.jsx)(ee.a,{title:Object(t.jsx)(n.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(k.a,{type:"primary",icon:Object(t.jsx)(Pe.a,{}),onClick:function(){return s(g.id)}})},"edit"),Object(t.jsx)(ae.a,{title:Object(t.jsx)(n.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(y.a)(c.a.mark(function ne(){var W;return c.a.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.next=2,Se(T,g.id);case 2:W=be.sent,W&&(s(!1),O.current&&O.current.reload());case 4:case"end":return be.stop()}},ne)})),okText:Object(t.jsx)(n.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(n.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(ee.a,{title:Object(t.jsx)(n.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(k.a,{type:"primary",icon:Object(t.jsx)(Ie.a,{}),danger:!0})})},"delete")]}}];return Object(t.jsxs)(w.a.Fragment,{children:[Object(t.jsx)(D.a,{headerTitle:T.formatMessage({id:"menu.settings"}),actionRef:O,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[Object(t.jsxs)(k.a,{type:"primary",onClick:function(){s(-1)},children:[Object(t.jsx)(he.a,{})," ",Object(t.jsx)(n.a,{id:"pages.searchTable.new"})]},"primary")]},request:function(b){var g=b.pageSize,ne=b.current,W=b.group;return Z({pageSize:g,current:ne,group:W}).then(function(X){return X.success?{data:X.data,total:X.meta.total,success:!0}:[]})},columns:R}),Object(t.jsx)(Te,{groups:_,id:i,visible:Number.isInteger(i),onVisibleChange:function(b){return b===!1&&s(!1)},onFinish:function(){var v=Object(y.a)(c.a.mark(function b(g){var ne;return c.a.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,Ae(T,g,Number(i));case 2:ne=X.sent,ne&&(s(!1),O.current&&O.current.reload());case 4:case"end":return X.stop()}},b)}));return function(b){return v.apply(this,arguments)}}()})]})},Be=Ue,Ye=e("tU7J"),Fe=e("wFql"),Re=e("Fghh"),Le=Fe.a.Text,le;(function(l){l.Array="array",l.String="string"})(le||(le={}));var We=function(a,r){return r===le.Array?a&&Array.isArray(a)?JSON.stringify(a):"[]":a},Ke=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;if(r===le.Array){var i=JSON.parse(a);return i&&Array.isArray(i)?i:[]}return a},we=function(a){var r=Object(Re.j)(),i=a.visible,s=a.onVisibleChange,p=a.onFinish,u=a.value,_=Q.a.useForm(),F=Object(A.a)(_,1),O=F[0],T=Object(m.useMemo)(function(){return(u.rules||[]).includes(le.Array)?le.Array:le.String},[u.rules]);return Object(m.useEffect)(function(){O.setFieldsValue(Object(h.a)(Object(h.a)({},u),{},{value:We(u.value,T)}))},[T,u,O]),Object(t.jsxs)(pe.a,{form:O,title:u.full_key,width:"60vw",visible:i,onVisibleChange:s,onFinish:Object(y.a)(c.a.mark(function R(){var v;return c.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,G({key:u.full_key,value:Ke(O.getFieldsValue().value,T)});case 2:if(v=g.sent,!v.success){g.next=6;break}return p(v.success===!0),g.abrupt("return",v.success);case 6:return g.abrupt("return");case 7:case"end":return g.stop()}},R)})),children:[Object(t.jsxs)(x.a.Group,{children:[Object(t.jsx)(E.a,{disabled:!0,name:"public",label:Object(t.jsx)(n.a,{id:"public",defaultMessage:"public"})}),Object(t.jsx)(E.a,{disabled:!0,name:"readonly",label:Object(t.jsx)(n.a,{id:"readonly",defaultMessage:"readonly"})}),Object(t.jsx)(x.a.Item,{shouldUpdate:!0,label:Object(t.jsx)(n.a,{id:"rules",defaultMessage:"rules"}),children:function(){return Object(t.jsx)(Le,{code:!0,children:JSON.stringify(O.getFieldValue("rules"))})}})]}),T===le.Array?Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(C.a,{width:"lg",name:"value",label:Object(t.jsx)(n.a,{id:"value"}),tooltip:"".concat(r.formatMessage({id:"example_json"}),': ["first_field_name", "second_field_name"]')}),Object(t.jsx)(x.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(_e.a,{src:JSON.parse(O.getFieldValue("value"))})}catch(v){return Object(t.jsx)(_e.a,{src:JSON.parse('{ "error": "cannot parse this array" }')})}}})]}):Object(t.jsx)(me.a,{width:"lg",name:"value",label:Object(t.jsx)(n.a,{id:"value"})})]})},Ve=we,Ne=[{title:Object(t.jsx)(n.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(n.a,{id:"readonly",defaultMessage:"readonly"}),dataIndex:"readonly",hideInForm:!0,hideInSearch:!0,render:function(a,r){return Object(t.jsx)(oe.a,{color:r.readonly?"success":"error",children:Object(t.jsx)(n.a,{id:r.readonly?"true":"false",defaultMessage:r.readonly?"true":"false"})})}},{title:Object(t.jsx)(n.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(a,r){return Object(t.jsx)(oe.a,{color:r.public?"success":"error",children:Object(t.jsx)(n.a,{id:r.public?"true":"false",defaultMessage:r.public?"true":"false"})})}},{title:Object(t.jsx)(n.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0}],$e=function l(a,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return!a||typeof a!="object"?!1:(Object.keys(a).forEach(function(s){var p=a[s];s===r?i.push(a):typeof p=="object"&&l(p,r,i)}),i)},Ge=function(a){var r=a.packageName,i=a.values,s=a.onValueUpdated,p=Object(n.i)(),u=Object(m.useState)(),_=Object(A.a)(u,2),F=_[0],O=_[1],T=Object(m.useMemo)(function(){var R=i[r];return $e(R,"rules")},[i,r]);return Object(t.jsxs)(w.a.Fragment,{children:[Object(t.jsx)(D.a,{headerTitle:p.formatMessage({id:"menu.settings"}),rowKey:"key",search:{labelWidth:120},dataSource:T,columns:[].concat(Ne,[{hideInSearch:!0,title:Object(t.jsx)(n.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(v,b){return[Object(t.jsx)(ee.a,{title:Object(t.jsx)(n.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(k.a,{type:"primary",icon:Object(t.jsx)(Pe.a,{}),onClick:function(){return O(b)}})},"edit")]}}])}),F&&Object(t.jsx)(Ve,{value:F,visible:F!==void 0,onVisibleChange:function(v){return v===!1&&O(void 0)},onFinish:Object(y.a)(c.a.mark(function R(){return c.a.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:s();case 1:case"end":return b.stop()}},R)}))})]})},ze=Ge,Je=function(a){return a.replaceAll("escolalms","").split("_").join("")},ke=I.default=function(){var l=Object(V.h)(),a=Object(n.i)(),r=l.tab,i=r===void 0?"user_settings":r,s=Object(m.useState)(),p=Object(A.a)(s,2),u=p[0],_=p[1],F=Object(m.useCallback)(function(){o().then(function(O){O.success&&_(O.data)})},[]);return Object(m.useEffect)(function(){F()},[]),u?Object(t.jsx)(S.a,{title:Object(t.jsx)(n.a,{id:"settings"}),header:{breadcrumb:{routes:[{path:"settings",breadcrumbName:a.formatMessage({id:"menu.Settings"})},{path:String(i),breadcrumbName:String(i)}]}},children:Object(t.jsxs)(U.a,{tabs:{type:"card",activeKey:i,onChange:function(T){return n.d.push("/settings/".concat(T))}},children:[Object(t.jsx)(U.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"user.settings"}),children:Object(t.jsx)(Be,{})},"user_settings"),Object.keys(u).map(function(O){return Object(t.jsxs)(U.a.TabPane,{tab:Object(t.jsxs)("span",{children:[Object(t.jsx)(n.a,{id:"package"})," ",Je(O)]}),children:[Object(t.jsx)(ze,{values:u,packageName:O,onValueUpdated:function(){return F()}}),O]},O)})]})}):Object(t.jsx)(J.a,{})}},hd5d:function(de,I,e){"use strict";var z=e("9og8"),J=e("WmNS"),A=e.n(J),m=e("q1tI"),w=e.n(m),U=e("3Ef1"),V=e.n(U),n=e("BAh9"),S=e("vtG9"),h=e.n(S),y=e("9kvl"),te=e("nKUr"),c=e.n(te),Z=function(j){var P=j.value,B=j.onChange,f=j.directory,q=f===void 0?"/wysiwyg":f,L=Object(y.i)();return Object(te.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(te.jsx)(V.a,{uploadImage:function(){var N=Object(z.a)(A.a.mark(function $(ue){var Y,o;return A.a.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,Object(n.e)(ue,q);case 2:if(Y=G.sent,!Y.success){G.next=6;break}return o=Y.data[0].name.includes("/")?Y.data[0].name:"".concat(q).concat(Y.data[0].name),G.abrupt("return",Object(n.d)(o,1e3));case 6:throw new Error("Error while uploading");case 7:case"end":return G.stop()}},$)}));return function($){return N.apply(this,arguments)}}(),defaultValue:P||"",onChange:function($){return B&&B($())},placeholder:L.formatMessage({id:"wysiwyg_placeholder"})})})};I.a=Z},lLVY:function(de,I,e){},vtG9:function(de,I,e){}}]);
