(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{"F/zT":function(V,m,e){"use strict";var j=e("wx14"),O=e("VTBJ"),t=e("Ff2n"),o=e("q1tI"),f=e.n(o),A=e("adzw"),v=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],F=f.a.forwardRef(function(h,D){var T=h.fieldProps,I=h.unCheckedChildren,y=h.checkedChildren,U=h.proFieldProps,E=Object(t.a)(h,v);return f.a.createElement(A.a,Object(j.a)({valueType:"switch",mode:"edit",fieldProps:Object(O.a)({unCheckedChildren:I,checkedChildren:y},T),ref:D,valuePropName:"checked",proFieldProps:U,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},E))});m.a=F},"G/Ub":function(V,m,e){"use strict";e.d(m,"d",function(){return A}),e.d(m,"a",function(){return F}),e.d(m,"b",function(){return D}),e.d(m,"c",function(){return I}),e.d(m,"e",function(){return U});var j=e("k1fw"),O=e("9og8"),t=e("WmNS"),o=e.n(t),f=e("9kvl");function A(r){return v.apply(this,arguments)}function v(){return v=Object(O.a)(o.a.mark(function r(s){return o.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(f.f)("/api/admin/roles",Object(j.a)({method:"GET",useCache:!1},s||{})));case 1:case"end":return l.stop()}},r)})),v.apply(this,arguments)}function F(r,s){return h.apply(this,arguments)}function h(){return h=Object(O.a)(o.a.mark(function r(s,i){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(f.f)("/api/admin/roles",Object(j.a)({method:"POST",headers:{"Content-Type":"application/json"},data:s},i||{})));case 1:case"end":return n.stop()}},r)})),h.apply(this,arguments)}function D(r,s){return T.apply(this,arguments)}function T(){return T=Object(O.a)(o.a.mark(function r(s,i){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(f.f)("/api/admin/roles/".concat(s),Object(j.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},i||{})));case 1:case"end":return n.stop()}},r)})),T.apply(this,arguments)}function I(r,s){return y.apply(this,arguments)}function y(){return y=Object(O.a)(o.a.mark(function r(s,i){return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(f.f)("/api/admin/roles/".concat(s),Object(j.a)({method:"GET",useCache:!1},i||{})));case 1:case"end":return n.stop()}},r)})),y.apply(this,arguments)}function U(r,s,i){return E.apply(this,arguments)}function E(){return E=Object(O.a)(o.a.mark(function r(s,i,l){return o.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(f.f)("/api/admin/roles/".concat(s),Object(j.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:i},l||{})));case 1:case"end":return c.stop()}},r)})),E.apply(this,arguments)}},tneF:function(V,m,e){"use strict";var j=e("sRBo"),O=e("kaz8"),t=e("wx14"),o=e("VTBJ"),f=e("Ff2n"),A=e("q1tI"),v=e.n(A),F=e("adzw"),h=e("uX+g"),D=e("WFLz"),T=["options","fieldProps","proFieldProps","valueEnum"],I=v.a.forwardRef(function(r,s){var i=r.options,l=r.fieldProps,n=r.proFieldProps,c=r.valueEnum,x=Object(f.a)(r,T);return v.a.createElement(F.a,Object(t.a)({ref:s,valueType:"checkbox",mode:"edit",valueEnum:Object(h.a)(c,void 0),fieldProps:Object(o.a)({options:i},l),proFieldProps:n},x))}),y=v.a.forwardRef(function(r,s){var i=r.fieldProps,l=r.children;return v.a.createElement(O.a,Object(t.a)({ref:s},i),l)}),U=Object(D.a)(y,{valuePropName:"checked"}),E=U;E.Group=I,m.a=E},weGn:function(V,m,e){"use strict";e.r(m);var j=e("nhC9"),O=e("Ty5D"),t=e("9kvl"),o=e("tMyG"),f=e("tU7J"),A=e("wFql"),v=e("DYRE"),F=e("zeV3"),h=e("y8nQ"),D=e("Vl3Y"),T=e("+L6B"),I=e("2/Rp"),y=e("T2oS"),U=e("W9HT"),E=e("miYZ"),r=e("tsqr"),s=e("k1fw"),i=e("9og8"),l=e("tJVT"),n=e("WmNS"),c=e.n(n),x=e("q1tI"),Z=e.n(x),K=e("VMEa"),S=e("Qurx"),w=e("F/zT"),_=e("tneF"),N=e("VK58"),k=e("hd5d"),q=e("DBJ/"),ee=e("Jfn2"),ae=e("G/Ub"),a=e("nKUr"),te=function(G){var L,R=G.isNew,C=Object(t.i)(),W=Object(O.g)(),b=W.user,Y=Object(x.useState)(),z=Object(l.a)(Y,2),B=z[0],H=z[1],se=Object(x.useState)(),Q=Object(l.a)(se,2),X=Q[0],ne=Q[1],$=Object(x.useCallback)(Object(i.a)(c.a.mark(function g(){var d;return c.a.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,Object(N.j)(Number(b));case 2:d=P.sent,d.success&&H(Object(s.a)(Object(s.a)({},d.data),{},{bio:d.data.bio||""}));case 4:case"end":return P.stop()}},g)})),[b]),ie=Object(x.useCallback)(Object(i.a)(c.a.mark(function g(){var d,p;return c.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Object(ae.d)();case 2:return d=u.sent,u.next=5,d;case 5:p=u.sent,p.success&&ne(p.data);case 7:case"end":return u.stop()}},g)})),[b]);Object(x.useEffect)(function(){if(R){H({});return}$(),ie()},[b,$]);var oe=Object(x.useMemo)(function(){return{onFinish:function(){var g=Object(i.a)(c.a.mark(function p(P){var u,J;return c.a.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(J=Object(s.a)(Object(s.a)({},P),{},{bio:P.bio?P.bio:void 0}),!R){M.next=8;break}return M.next=4,Object(N.a)(J);case 4:u=M.sent,u.success&&t.d.push("/users/".concat(u.data.id,"/user_info")),M.next=11;break;case 8:return M.next=10,Object(N.i)(Number(b),J);case 10:u=M.sent;case 11:r.default.success(u.message);case 12:case"end":return M.stop()}},p)}));function d(p){return g.apply(this,arguments)}return d}(),initialValues:B}},[B,b]);return B?Object(a.jsxs)(K.b,Object(s.a)(Object(s.a)({},oe),{},{children:[Object(a.jsxs)(K.b.Group,{children:[Object(a.jsx)(S.a,{width:"md",name:"first_name",label:Object(a.jsx)(t.a,{id:"first_name"}),tooltip:Object(a.jsx)(t.a,{id:"first_name"}),placeholder:C.formatMessage({id:"first_name"}),required:!0}),Object(a.jsx)(S.a,{width:"md",name:"last_name",label:Object(a.jsx)(t.a,{id:"last_name"}),tooltip:Object(a.jsx)(t.a,{id:"last_name"}),placeholder:C.formatMessage({id:"last_name"}),required:!0}),Object(a.jsx)(S.a,{width:"md",name:"email",label:Object(a.jsx)(t.a,{id:"email"}),tooltip:Object(a.jsx)(t.a,{id:"email"}),placeholder:C.formatMessage({id:"email"}),required:!0}),Object(a.jsx)(S.a.Password,{width:"md",name:"password",label:Object(a.jsx)(t.a,{id:"password"}),tooltip:Object(a.jsx)(t.a,{id:"password"}),placeholder:C.formatMessage({id:"password"}),required:R}),!R&&Object(a.jsxs)(F.b,{direction:"vertical",children:[!((L=B.roles)!==null&&L!==void 0&&L.includes("admin"))&&Object(a.jsx)(w.a,{name:"email_verified",label:Object(a.jsx)(t.a,{id:"is_email_verified"})}),Object(a.jsx)(D.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(d){return d.getFieldValue("email_verified")?Object(a.jsx)(Z.a.Fragment,{}):Object(a.jsx)(I.a,{size:"small",onClick:function(){Object(N.e)(d.getFieldValue("email")).then(function(){r.default.success(C.formatMessage({id:"email_resend"}))})},children:Object(a.jsx)(t.a,{id:"resend"})})}})]}),Object(a.jsx)(w.a,{name:"is_active",label:Object(a.jsx)(t.a,{id:"is_active"})}),X&&Object(a.jsx)(_.a.Group,{name:"roles",layout:"horizontal",label:Object(a.jsx)(t.a,{id:"roles"}),options:X.map(function(g){return g.name})})]}),Object(a.jsx)(K.b.Item,{name:"bio",label:Object(a.jsx)(t.a,{id:"bio"}),tooltip:Object(a.jsx)(t.a,{id:"bio_tooltip"}),valuePropName:"value",children:Object(a.jsx)(k.a,{directory:"users/".concat(b,"/wysiwyg")})}),!R&&Object(a.jsxs)(K.b.Group,{children:[Object(a.jsx)(K.b.Item,{name:"avatar",label:Object(a.jsx)(t.a,{id:"avatar"}),children:B.path_avatar?Object(a.jsx)(ee.a,{path:B.path_avatar,size:600,width:200}):Object(a.jsx)(A.a,{children:Object(a.jsx)(t.a,{id:"avatar_placeholder"})})}),Object(a.jsx)(D.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){return Object(a.jsx)(q.a,{wrapInForm:!1,url:"/api/admin/users/".concat(b,"/avatar"),name:"avatar",accept:"image/*",onChange:function(p){p.file.status==="done"&&p.file.response.success&&$()}})}})]})]})):Object(a.jsx)(U.a,{})},re=e("5ddx"),le=m.default=function(){var G=Object(O.g)(),L=Object(t.i)(),R=G.tab,C=R===void 0?"user_info":R,W=G.user,b=typeof W=="undefined";return Object(a.jsx)(o.a,{title:Object(a.jsx)(t.a,{id:"settings"}),header:{breadcrumb:{routes:[{path:"/users/".concat(W,"/user_info"),breadcrumbName:L.formatMessage({id:"menu.Settings"})},{path:String(C),breadcrumbName:String(C)}]}},children:Object(a.jsxs)(j.a,{tabs:{type:"card",activeKey:C,onChange:function(z){return t.d.push("/users/".concat(W,"/").concat(z))}},children:[Object(a.jsx)(j.a.TabPane,{tab:b?Object(a.jsx)(t.a,{id:"new_user"}):Object(a.jsx)(t.a,{id:"edit_user"}),children:Object(a.jsx)(te,{isNew:b})},"user_info"),!b&&Object(a.jsx)(j.a.TabPane,{tab:Object(a.jsx)("span",{children:Object(a.jsx)(t.a,{id:"user.settings"})}),children:W&&Object(a.jsx)(re.a,{user:W,isProfile:!1})},"settings")]})})}}}]);
