(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"3fxf":function(le,F,e){"use strict";var B=e("DjyN"),w=e("NUBc"),U=e("Mwp2"),Y=e("VXEj"),C=e("+L6B"),u=e("2/Rp"),L=e("5NDa"),N=e("5rEg"),Z=e("oBTY"),a=e("k1fw"),K=e("tJVT"),D=e("DYRE"),W=e("zeV3"),x=e("tU7J"),_=e("wFql"),b=e("q1tI"),I=e.n(b),d=e("BAh9"),te=e("/MfK"),R=e("mAF4"),ie=e("dF/Y"),p=e("9kvl"),S=e("DBJ/"),Q=e("lLVY"),J=e.n(Q),O=e("nKUr"),ne=e.n(O),be=function(oe){var de=oe.directory,je=oe.onUploaded;return Object(O.jsxs)(W.b,{align:"start",children:[Object(O.jsxs)(_.a.Text,{children:[Object(O.jsx)(p.a,{id:"pages.files.filesBrowser"}),Object(O.jsx)(_.a.Text,{code:!0,children:de})]}),Object(O.jsx)(S.a,{url:"/api/admin/file/upload",name:"file[]",data:{target:de},onUpload:function(fe){fe.success&&je(de,fe.data)}})]})},Ue=function(oe){var de=oe.defaultDirectory,je=de===void 0?"/":de,ce=oe.onFile,fe=oe.hideDeleteBtn,Ce=fe===void 0?!1:fe,Me=oe.forceLoading,De=Me===void 0?!1:Me,Ie=Object(p.j)(),ge=Object(b.useState)({loading:!1,name:"",directory:je,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),pe=Object(K.a)(ge,2),G=pe[0],me=pe[1],ue=Object(b.useRef)(),ee=Object(b.useCallback)(function(V){me(function(c){return Object(a.a)(Object(a.a)({},c),{},{loading:V})})},[]),he=Object(b.useCallback)(function(V,c){V.success&&me(function($){return Object(a.a)(Object(a.a)(Object(a.a)({},$),V.data),{},{data:[{url:c.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(Z.a)(V.data.data.map(function(X){return Object(a.a)(Object(a.a)({},X),{},{url:X.mime==="directory"?"".concat(c,"/").concat(X.name):X.url})}))).filter(function(X){return c==="/"||c===je?X.name!=="..":!0}),directory:c,loading:!1})})},[ee]),se=Object(b.useCallback)(function(V){var c,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,X=function(){return ue.current&&ue.current.abort()};return X(),ue.current=new AbortController,ee(!0),Object(d.a)({directory:V,page:$},{signal:(c=ue.current)===null||c===void 0?void 0:c.signal}).then(function(ae){ae.success&&he(ae,V)}).catch(function(){return ee(!1)}),function(){X()}},[ee]);Object(b.useEffect)(function(){return se(je)},[je,se]);var _e=Object(b.useCallback)(function(V){ee(!0),Object(d.c)(V).then(function(){se(G.directory)}).catch(function(){ee(!1)})},[se,ee,G.directory]),Be=Object(b.useCallback)(function(V,c){var $,X=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,ae=function(){return ue.current&&ue.current.abort()};return ae(),ue.current=new AbortController,ee(!0),Object(d.b)({directory:V,name:c,page:X},{signal:($=ue.current)===null||$===void 0?void 0:$.signal}).then(function(Ee){Ee.success&&he(Ee,V)}).catch(function(){return ee(!1)}),function(){ae()}},[ee]);return Object(O.jsxs)("div",{className:"file-browser",children:[Object(O.jsxs)("div",{className:"file-browser__header",children:[Object(O.jsx)(N.a,{placeholder:Ie.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(c){return me(function($){return Object(a.a)(Object(a.a)({},$),{},{name:c.target.value})})},value:G.name}),Object(O.jsxs)("div",{children:[Object(O.jsx)(u.a,{className:"file-browser__button",onClick:function(){return se(G.directory)},children:Object(O.jsx)(p.a,{id:"reset"})}),Object(O.jsx)(u.a,{className:"file-browser__button",type:"primary",onClick:function(){return Be(G.directory,G.name)},children:Object(O.jsx)(p.a,{id:"query"})})]})]}),Object(O.jsx)(Y.b,{loading:G.loading||De,size:"small",itemLayout:"horizontal",dataSource:G.data,header:Object(O.jsx)(be,{directory:G.directory,onUploaded:function(c,$){$&&(se(c),ce&&ce($,c))}}),footer:Object(O.jsx)(be,{directory:G.directory,onUploaded:function(c,$){se(c),$&&ce&&ce($,c)}}),renderItem:function(c){return Object(O.jsx)(Y.b.Item,{actions:c.mime!=="directory"&&!Ce?[Object(O.jsx)(u.a,{type:"default",danger:!0,icon:Object(O.jsx)(te.a,{}),size:"small",onClick:function(){return _e(c.url)}},"dir")]:[],children:Object(O.jsx)(Y.b.Item.Meta,{avatar:c.mime==="directory"?Object(O.jsx)(u.a,{type:"primary",icon:Object(O.jsx)(R.a,{}),size:"small",onClick:function(){return se(c.url)}}):Object(O.jsx)("a",{href:c.url,target:"_blank",rel:"noreferrer",children:Object(O.jsx)(u.a,{type:"default",icon:Object(O.jsx)(ie.a,{}),size:"small"})}),description:Object(O.jsx)(I.a.Fragment,{children:Object(O.jsx)(u.a,{type:"text",size:"small",onClick:function(){return c.mime==="directory"?se(c.url):ce&&ce(c,G.directory)},children:c.name})})})})}}),Object(O.jsx)(w.a,{pageSizeOptions:[],current:G.current_page,total:G.total,pageSize:G.per_page,onChange:function(c){return se(G.directory,c)}})]})};F.a=Ue},"5qq5":function(le,F,e){"use strict";var B=e("7Kak"),w=e("9yH6"),U=e("VTBJ"),Y=e("Ff2n"),C=e("nKUr"),u=e.n(C),L=e("uX+g"),N=e("q1tI"),Z=e.n(N),a=e("WFLz"),K=e("adzw"),D=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],W=Z.a.forwardRef(function(I,d){var te=I.fieldProps,R=I.options,ie=I.radioType,p=I.layout,S=I.proFieldProps,Q=I.valueEnum,J=Object(Y.a)(I,D);return Object(C.jsx)(K.a,Object(U.a)(Object(U.a)({mode:"edit",valueType:ie==="button"?"radioButton":"radio",ref:d,valueEnum:Object(L.a)(Q,void 0)},J),{},{fieldProps:Object(U.a)({options:R,layout:p},te),proFieldProps:S,filedConfig:{customLightMode:!0}}))}),x=Z.a.forwardRef(function(I,d){var te=I.fieldProps,R=I.children;return Object(C.jsx)(w.a,Object(U.a)(Object(U.a)({},te),{},{ref:d,children:R}))}),_=Object(a.a)(x,{valuePropName:"checked",ignoreWidth:!0}),b=_;b.Group=W,b.Button=w.a.Button,b.displayName="ProFormComponent",F.a=b},BAh9:function(le,F,e){"use strict";e.d(F,"a",function(){return C}),e.d(F,"b",function(){return L}),e.d(F,"e",function(){return Z}),e.d(F,"d",function(){return K}),e.d(F,"c",function(){return D});var B=e("qLMh"),w=e("k1fw"),U=e("9og8"),Y=e("9kvl");function C(x,_){return u.apply(this,arguments)}function u(){return u=Object(U.a)(Object(B.a)().mark(function x(_,b){return Object(B.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(Y.g)("/api/admin/file/list",Object(w.a)({method:"GET",params:_},b||{})));case 1:case"end":return d.stop()}},x)})),u.apply(this,arguments)}function L(x,_){return N.apply(this,arguments)}function N(){return N=Object(U.a)(Object(B.a)().mark(function x(_,b){return Object(B.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(Y.g)("/api/admin/file/find",Object(w.a)({method:"GET",params:_},b||{})));case 1:case"end":return d.stop()}},x)})),N.apply(this,arguments)}function Z(x,_,b){return a.apply(this,arguments)}function a(){return a=Object(U.a)(Object(B.a)().mark(function x(_,b,I){var d;return Object(B.a)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return d=new FormData,d.append("file[]",_),d.append("target",b),R.abrupt("return",Object(Y.g)("/api/admin/file/upload",Object(w.a)({method:"POST",data:d},I||{})));case 4:case"end":return R.stop()}},x)})),a.apply(this,arguments)}var K=function(_){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/images/img?path=").concat(_,"&w=").concat(b)};function D(x,_){return W.apply(this,arguments)}function W(){return W=Object(U.a)(Object(B.a)().mark(function x(_,b){return Object(B.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(Y.g)("/api/admin/file/delete",Object(w.a)({method:"DELETE",data:{url:_}},b||{})));case 1:case"end":return d.stop()}},x)})),W.apply(this,arguments)}},BiO0:function(le,F,e){"use strict";var B=e("VTBJ"),w=e("Ff2n"),U=e("nKUr"),Y=e.n(U),C=e("q1tI"),u=e.n(C),L=e("adzw"),N=["fieldProps","proFieldProps"],Z=function(K,D){var W=K.fieldProps,x=K.proFieldProps,_=Object(w.a)(K,N);return Object(U.jsx)(L.a,Object(B.a)({ref:D,mode:"edit",valueType:"textarea",fieldProps:W,proFieldProps:x},_))};F.a=u.a.forwardRef(Z)},"DBJ/":function(le,F,e){"use strict";var B=e("k1fw"),w=e("y8nQ"),U=e("Vl3Y"),Y=e("etVw"),C=e("9kvl"),u=e("qFDU"),L=e("nKUr"),N=e.n(L);function Z(a){var K=a.onChange,D=a.onUpload,W=a.url,x=a.name,_=a.extra,b=a.accept,I=a.data,d=a.wrapInForm,te=d===void 0?!0:d,R=a.title,ie=a.formProps,p=Object(C.j)();return I&&I[x]&&delete I[x],Object(L.jsx)(u.a,{condition:te,wrap:function(Q){return Object(L.jsx)(U.a,Object(B.a)(Object(B.a)({},ie),{},{children:Q}))},children:Object(L.jsx)(Y.a,{title:R||" ".concat(p.formatMessage({id:"upload_click_here"})),placeholder:p.formatMessage({id:"upload_click_here"}),onChange:function(Q){K&&K(Q),Q.file.status==="done"&&D&&D(Q.file.response)},label:Object(L.jsx)(C.a,{id:"upload"}),max:2,fieldProps:{data:I,accept:b,name:x,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(W),extra:_})})}F.a=Z},"O/iA":function(le,F,e){},Qurx:function(le,F,e){"use strict";var B=e("VTBJ"),w=e("Ff2n"),U=e("nKUr"),Y=e.n(U),C=e("adzw"),u=["fieldProps","proFieldProps"],L=["fieldProps","proFieldProps"],N="text",Z=function(W){var x=W.fieldProps,_=W.proFieldProps,b=Object(w.a)(W,u);return Object(U.jsx)(C.a,Object(B.a)({mode:"edit",valueType:N,fieldProps:x,filedConfig:{valueType:N},proFieldProps:_},b))},a=function(W){var x=W.fieldProps,_=W.proFieldProps,b=Object(w.a)(W,L);return Object(U.jsx)(C.a,Object(B.a)({mode:"edit",valueType:"password",fieldProps:x,proFieldProps:_,filedConfig:{valueType:N}},b))},K=Z;K.Password=a,K.displayName="ProFormComponent",F.a=K},YjuE:function(le,F,e){"use strict";e.r(F);var B=e("fOrg"),w=e("+KLJ"),U=e("T2oS"),Y=e("W9HT"),C=e("tJVT"),u=e("q1tI"),L=e.n(u),N=e("nhC9"),Z=e("Ty5D"),a=e("9kvl"),K=e("tMyG"),D=e("+up7"),W=e("P2fV"),x=e("NJEC"),_=e("5Dmo"),b=e("3S7+"),I=e("+L6B"),d=e("2/Rp"),te=e("+BJd"),R=e("mr32"),ie=e("jrin"),p=e("qLMh"),S=e("k1fw"),Q=e("miYZ"),J=e("tsqr"),O=e("9og8"),ne=e("xvlK"),be=e("Qiat"),Ue=e("EFp3"),Re=e("O/iA"),oe=e("OaEy"),de=e("wx14"),je=e("U8pU"),ce=e("ODXe"),fe=e("TSYQ"),Ce=e.n(fe),Me=e("Zm9Q"),De=e("bT9E"),Ie=e("H84U"),ge=e("2fM7"),pe=e("0n0R"),G=ge.a.Option;function me(E){return E&&E.type&&(E.type.isSelectOption||E.type.isSelectOptGroup)}var ue=function(r,n){var i=r.prefixCls,o=r.className,y=r.popupClassName,s=r.dropdownClassName,v=r.children,M=r.dataSource,f=Object(Me.a)(v),A;if(f.length===1&&Object(pe.c)(f[0])&&!me(f[0])){var P=Object(ce.a)(f,1);A=P[0]}var m=A?function(){return A}:void 0,h;return f.length&&me(f[0])?h=v:h=M?M.map(function(l){if(Object(pe.c)(l))return l;switch(Object(je.a)(l)){case"string":return u.createElement(G,{key:l,value:l},l);case"object":{var j=l.value;return u.createElement(G,{key:j,value:j},l.text)}default:return}}):[],u.createElement(Ie.a,null,function(l){var j=l.getPrefixCls,g=j("select",i);return u.createElement(ge.a,Object(de.a)({ref:n},Object(De.a)(r,["dataSource"]),{prefixCls:g,popupClassName:y||s,className:Ce()("".concat(g,"-auto-complete"),o),mode:ge.a.SECRET_COMBOBOX_MODE_DO_NOT_USE},{getInputElement:m}),h)})},ee=u.forwardRef(ue);ee.Option=G;var he=ee,se=e("y8nQ"),_e=e("Vl3Y"),Be=e("5NDa"),V=e("5rEg"),c=e("VMEa"),$=e("rmhi"),X=e("Qurx"),ae=e("F/zT"),Ee=e("5qq5"),Le=e("BiO0"),Ne=e("hd5d"),$e=e("3fxf"),ze=e("ovOe"),xe=e.n(ze),t=e("nKUr"),we=function(r){var n=r.value,i=r.onChange,o=r.type,y=o===void 0?"file":o,s=Object(u.useState)(!1),v=Object(C.a)(s,2),M=v[0],f=v[1];return Object(t.jsxs)(L.a.Fragment,{children:[Object(t.jsxs)(c.a.Group,{children:[Object(t.jsx)(V.a,{value:n,readOnly:!0}),Object(t.jsxs)(d.a,{size:"small",type:"primary",onClick:function(){return f(!M)},children:["toggle ",y," browser"]})]}),M&&Object(t.jsx)($e.a,{onFile:function(P,m){return i&&i("".concat(m,"/").concat(P.name))}})]})},Ge=function(r){var n=Object(a.j)(),i=r.visible,o=r.onVisibleChange,y=r.onFinish,s=r.id,v=r.initialData,M=r.groups,f=_e.a.useForm(),A=Object(C.a)(f,1),P=A[0],m=!s||s===-1,h=Object(u.useState)("text"),l=Object(C.a)(h,2),j=l[0],g=l[1],z=Object(u.useCallback)(function(){return!!(P.getFieldValue("group")==="global"||v)},[P,v]),T=Object(u.useState)(""),q=Object(C.a)(T,2),H=q[0],re=q[1];Object(u.useEffect)(function(){typeof s=="object"?P.setFieldsValue(s):s&&s!==-1?Object(D.d)(Number(s)).then(function(k){k.success&&(P.setFieldsValue(k.data),g(k.data.type),re(k.data.group))}):(P.resetFields(),g("text"))},[s,P,v]);var ve=Object(u.useCallback)(function(k){k.type&&k.type!==j&&g(k.type)},[j]);return Object(t.jsxs)($.a,{form:P,title:n.formatMessage({id:s?"editSetting":"newSetting",defaultMessage:s?"editSetting":"newSetting"}),width:"60vw",visible:!!i,onVisibleChange:o,onFinish:y,onValuesChange:ve,children:[Object(t.jsxs)(c.a.Group,{children:[v?Object(t.jsx)(X.a,{label:Object(t.jsx)(a.a,{id:"group",defaultMessage:"group"}),rules:[{required:!0}],width:"md",name:"group",disabled:z()}):Object(t.jsx)(c.a.Item,{label:Object(t.jsx)(a.a,{id:"group",defaultMessage:"group"}),name:"group",children:Object(t.jsx)(he,{style:{width:"300px"},autoFocus:!0,value:H,onChange:function(Pe){return re(Pe)},filterOption:function(Pe,Se){var Fe;return(Se==null||(Fe=Se.children)===null||Fe===void 0?void 0:Fe.toString().toLowerCase().indexOf(Pe.toLowerCase()))!==-1},children:M.map(function(k){return Object(t.jsx)(he.Option,{value:k,children:k},k)})})}),Object(t.jsx)(X.a,{label:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key",disabled:z()})]}),Object(t.jsxs)(c.a.Group,{children:[Object(t.jsx)(ae.a,{name:"enumerable",disabled:z(),label:Object(t.jsx)(a.a,{id:"enumerable",defaultMessage:"enumerable"})}),Object(t.jsx)(ae.a,{name:"public",disabled:z(),label:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"})})]}),Object(t.jsx)(c.a.Group,{children:Object(t.jsx)(Ee.a.Group,{disabled:!!(!m||v),name:"type",label:Object(t.jsx)(a.a,{id:"type"}),options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"},{label:"json",value:"json"},{label:"file",value:"file"},{label:"image",value:"image"}]})}),Object(t.jsxs)("div",{children:[j==="text"&&Object(t.jsx)(X.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"})}),j==="json"&&Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(Le.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"}),tooltip:"".concat(n.formatMessage({id:"example_json"}),': {"name":"John", "age":30, "city":["New York","Warsaw"]}')}),Object(t.jsx)(c.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(xe.a,{src:JSON.parse(P.getFieldValue("value"))})}catch(Pe){return Object(t.jsx)(xe.a,{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]}),(j==="file"||j==="image")&&Object(t.jsx)(c.a.Item,{name:"value",label:"value",tooltip:"select file from current repository or upload new one",valuePropName:"value",children:Object(t.jsx)(we,{type:j})}),j==="markdown"&&Object(t.jsx)(c.a.Item,{name:"value",label:"value",tooltip:"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.",valuePropName:"value",children:Object(t.jsx)(Ne.a,{directory:"settings/wysiwyg"})})]})]})},Ke=Ge,Te=e("G3dp"),We=e("/MfK"),Je=function(){var E=Object(O.a)(Object(p.a)().mark(function r(n,i,o){var y;return Object(p.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return y=J.b.loading(n.formatMessage({id:"loading"})),v.prev=1,v.next=4,o&&o!==-1?Object(D.h)(o,Object(S.a)({},i)):Object(D.b)(Object(S.a)({},i));case 4:return y(),J.b.success(n.formatMessage({id:"success"})),v.abrupt("return",!0);case 9:return v.prev=9,v.t0=v.catch(1),y(),J.b.error(n.formatMessage({id:"error"})),v.abrupt("return",!1);case 14:case"end":return v.stop()}},r,null,[[1,9]])}));return function(n,i,o){return E.apply(this,arguments)}}(),Ye=function(){var E=Object(O.a)(Object(p.a)().mark(function r(n,i){var o;return Object(p.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return o=J.b.loading(n.formatMessage({id:"loading"})),s.prev=1,s.next=4,Object(D.c)(i);case 4:return o(),J.b.success(n.formatMessage({id:"success"})),s.abrupt("return",!0);case 9:return s.prev=9,s.t0=s.catch(1),o(),J.b.error(n.formatMessage({id:"error"})),s.abrupt("return",!1);case 14:case"end":return s.stop()}},r,null,[[1,9]])}));return function(n,i){return E.apply(this,arguments)}}(),Qe=function(){var r=Object(u.useState)(!1),n=Object(C.a)(r,2),i=n[0],o=n[1],y=Object(u.useState)([]),s=Object(C.a)(y,2),v=s[0],M=s[1],f=Object(u.useRef)(),A=Object(a.j)(),P=Object(a.k)("@@initialState"),m=P.setInitialState;Object(u.useEffect)(function(){Object(D.e)().then(function(l){l.success&&M(l.data.filter(function(j){return j!=="global"}))})},[]);var h=[{title:Object(t.jsx)(a.a,{id:"group",defaultMessage:"group"}),dataIndex:"group",hideInSearch:!1,key:"group",valueType:"select",width:100,valueEnum:v.sort().reduce(function(l,j){return Object(S.a)(Object(S.a)({},l),{},Object(ie.a)({},j,j))},{})},{title:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"enumerable",defaultMessage:"enumerable"}),dataIndex:"enumerable",hideInForm:!0,hideInSearch:!0,render:function(j,g){return Object(t.jsx)(R.a,{color:g.enumerable?"success":"error",children:Object(t.jsx)(a.a,{id:g.enumerable?"true":"false",defaultMessage:g.enumerable?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(j,g){return Object(t.jsx)(R.a,{color:g.public?"success":"error",children:Object(t.jsx)(a.a,{id:g.public?"true":"false",defaultMessage:g.public?"true":"false"})})}},{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(j,g){return[Object(t.jsx)(b.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(d.a,{type:"primary",icon:Object(t.jsx)(Te.a,{}),onClick:function(){return o(g.id)}})},"edit"),Object(t.jsx)(x.a,{title:Object(t.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(O.a)(Object(p.a)().mark(function z(){var T;return Object(p.a)().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,Ye(A,g.id);case 2:T=H.sent,T&&(o(!1),f.current&&f.current.reload());case 4:case"end":return H.stop()}},z)})),okText:Object(t.jsx)(a.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(a.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(b.a,{title:Object(t.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(d.a,{type:"primary",icon:Object(t.jsx)(We.a,{}),danger:!0})})},"delete")]}}];return Object(t.jsxs)(L.a.Fragment,{children:[Object(t.jsx)(be.a,{headerTitle:A.formatMessage({id:"menu.settings"}),actionRef:f,rowKey:"id",search:{},toolBarRender:function(){return[Object(t.jsxs)(d.a,{type:"primary",onClick:function(){o(-1)},children:[Object(t.jsx)(ne.a,{})," ",Object(t.jsx)(a.a,{id:"pages.searchTable.new"})]},"primary")]},request:function(j){var g=j.pageSize,z=j.current,T=j.group;return Object(D.f)({pageSize:g,current:z,group:T}).then(function(q){return q.success?{data:q.data.filter(function(H){return H.group!=="global"}),total:q.meta.total,success:!0}:[]})},columns:h}),Object(t.jsx)(Ke,{groups:v,id:i,visible:Number.isInteger(i),onVisibleChange:function(j){return!j&&o(!1)},onFinish:function(){var l=Object(O.a)(Object(p.a)().mark(function j(g){var z,T,q;return Object(p.a)().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return z=g,re.next=3,Je(A,z,Number(i));case 3:if(T=re.sent,!T){re.next=12;break}if(o(!1),f.current&&f.current.reload(),z.group!=="global"){re.next=12;break}return re.next=10,Object(D.f)({current:1,pageSize:100,group:"global"});case 10:q=re.sent,m(function(ve){return Object(S.a)(Object(S.a)({},ve),{},{config:q.success?q.data:ve==null?void 0:ve.config})});case 12:case"end":return re.stop()}},j)}));return function(j){return l.apply(this,arguments)}}()})]})},Xe=Qe,ft=e("tU7J"),He=e("wFql"),Ae=e("Fghh"),Ze=function(r){var n=r.field,i=r.name;return n!=null&&n.includes("boolean")?Object(t.jsx)(ae.a,{name:i,checkedChildren:Object(t.jsx)(Ae.a,{id:"true"}),unCheckedChildren:Object(t.jsx)(Ae.a,{id:"false"})}):Object(t.jsx)(X.a,{width:"lg",name:i})},ke=Ze,qe=He.a.Text,Oe;(function(E){E.Array="array",E.String="string"})(Oe||(Oe={}));var et=function(r,n){return n===Oe.Array?r&&Array.isArray(r)?JSON.stringify(r):"[]":r},tt=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;if(n===Oe.Array){var i=JSON.parse(r);return i&&Array.isArray(i)?i:[]}return r},at=function(r){var n=Object(Ae.j)(),i=r.visible,o=r.onVisibleChange,y=r.onFinish,s=r.value,v=_e.a.useForm(),M=Object(C.a)(v,1),f=M[0],A=Object(u.useMemo)(function(){return(s.rules||[]).includes(Oe.Array)?Oe.Array:Oe.String},[s.rules]);return Object(u.useEffect)(function(){f.setFieldsValue(Object(S.a)(Object(S.a)({},s),{},{value:et(s.value,A)}))},[A,s,f]),Object(t.jsxs)($.a,{form:f,title:s.full_key,width:"60vw",visible:i,onVisibleChange:o,onFinish:Object(O.a)(Object(p.a)().mark(function P(){var m;return Object(p.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Object(D.g)({key:s.full_key,value:tt(f.getFieldsValue().value,A)});case 2:if(m=l.sent,!m.success){l.next=6;break}return y(m.success===!0),l.abrupt("return",m.success);case 6:return l.abrupt("return");case 7:case"end":return l.stop()}},P)})),children:[Object(t.jsxs)(c.a.Group,{children:[Object(t.jsx)(ae.a,{disabled:!0,name:"public",label:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"})}),Object(t.jsx)(ae.a,{disabled:!0,name:"readonly",label:Object(t.jsx)(a.a,{id:"readonly",defaultMessage:"readonly"})}),Object(t.jsx)(c.a.Item,{shouldUpdate:!0,label:Object(t.jsx)(a.a,{id:"rules",defaultMessage:"rules"}),children:function(){return Object(t.jsx)(qe,{code:!0,children:JSON.stringify(f.getFieldValue("rules"))})}})]}),A===Oe.Array?Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(Le.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"}),tooltip:"".concat(n.formatMessage({id:"example_json"}),': ["first_field_name", "second_field_name"]')}),Object(t.jsx)(c.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(xe.a,{src:JSON.parse(f.getFieldValue("value"))})}catch(m){return Object(t.jsx)(xe.a,{src:JSON.parse('{ "error": "cannot parse this array" }')})}}})]}):Object(t.jsx)(t.Fragment,{children:Object(t.jsx)(c.a.Item,{shouldUpdate:!0,label:Object(t.jsx)(a.a,{id:"value"}),children:function(){return Object(t.jsx)(ke,{field:f.getFieldValue("rules"),name:"value"})}})})]})},rt=at,nt=[{title:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"readonly",defaultMessage:"readonly"}),dataIndex:"readonly",hideInForm:!0,hideInSearch:!0,render:function(r,n){return Object(t.jsx)(R.a,{color:n.readonly?"success":"error",children:Object(t.jsx)(a.a,{id:n.readonly?"true":"false",defaultMessage:n.readonly?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(r,n){return Object(t.jsx)(R.a,{color:n.public?"success":"error",children:Object(t.jsx)(a.a,{id:n.public?"true":"false",defaultMessage:n.public?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0,render:function(r,n){return typeof n.value=="boolean"?Object(t.jsx)(R.a,{color:n.value?"success":"error",children:Object(t.jsx)(a.a,{id:n.value?"true":"false",defaultMessage:n.value?"true":"false"})}):n.value}}],st=function E(r,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return!r||typeof r!="object"?!1:(Object.keys(r).forEach(function(o){var y=r[o];o===n?i.push(r):typeof y=="object"&&E(y,n,i)}),i)},lt=function(r){var n=r.packageName,i=r.values,o=r.onValueUpdated,y=Object(a.j)(),s=Object(u.useState)(),v=Object(C.a)(s,2),M=v[0],f=v[1],A=Object(u.useMemo)(function(){var P=i[n];return st(P,"rules")},[i,n]);return Object(t.jsxs)(L.a.Fragment,{children:[Object(t.jsx)(be.a,{headerTitle:y.formatMessage({id:"menu.settings"}),rowKey:"key",search:{},dataSource:A,columns:[].concat(nt,[{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(m,h){return[Object(t.jsx)(b.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(d.a,{type:"primary",icon:Object(t.jsx)(Te.a,{}),onClick:function(){return f(h)}})},"edit")]}}])}),M&&Object(t.jsx)(rt,{value:M,visible:M!==void 0,onVisibleChange:function(m){return m===!1&&f(void 0)},onFinish:Object(O.a)(Object(p.a)().mark(function P(){return Object(p.a)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:o();case 1:case"end":return h.stop()}},P)}))})]})},it=lt,Ve=e("oBTY"),ut=function(){var E=Object(O.a)(Object(p.a)().mark(function r(n,i,o){var y,s;return Object(p.a)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return y=J.b.loading(n.formatMessage({id:"loading"})),M.prev=1,M.next=4,o&&o!==-1?Object(D.h)(o,Object(S.a)({},i)):Object(D.b)(Object(S.a)({},i));case 4:return s=M.sent,y(),J.b.success(n.formatMessage({id:"success"})),M.abrupt("return",{success:!0,updatedSettings:s});case 10:return M.prev=10,M.t0=M.catch(1),y(),J.b.error(n.formatMessage({id:"error"})),M.abrupt("return",{success:!1,updateSettings:null});case 15:case"end":return M.stop()}},r,null,[[1,10]])}));return function(n,i,o){return E.apply(this,arguments)}}(),ct=function(){var E=Object(O.a)(Object(p.a)().mark(function r(n,i){var o;return Object(p.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return o=J.b.loading(n.formatMessage({id:"loading"})),s.prev=1,s.next=4,Object(D.c)(i);case 4:return o(),J.b.success(n.formatMessage({id:"success"})),s.abrupt("return",!0);case 9:return s.prev=9,s.t0=s.catch(1),o(),J.b.error(n.formatMessage({id:"error"})),s.abrupt("return",!1);case 14:case"end":return s.stop()}},r,null,[[1,9]])}));return function(n,i){return E.apply(this,arguments)}}(),ye={logo:{id:-1,key:"logo",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"image",data:"EscolaLMS"},frontURL:{id:0,key:"frontURL",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"}},ot=function(){var r=Object(u.useState)(!1),n=Object(C.a)(r,2),i=n[0],o=n[1],y=Object(u.useRef)(),s=Object(a.j)(),v=Object(a.k)("@@initialState"),M=v.setInitialState,f=v.initialState,A=[{title:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"enumerable",defaultMessage:"enumerable"}),dataIndex:"enumerable",hideInForm:!0,hideInSearch:!0,render:function(h,l){return Object(t.jsx)(R.a,{color:l.enumerable?"success":"error",children:Object(t.jsx)(a.a,{id:l.enumerable?"true":"false",defaultMessage:l.enumerable?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(h,l){return Object(t.jsx)(R.a,{color:l.public?"success":"error",children:Object(t.jsx)(a.a,{id:l.public?"true":"false",defaultMessage:l.public?"true":"false"})})}},{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(h,l){return[l.id>0?Object(t.jsx)(b.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(d.a,{type:"primary",icon:Object(t.jsx)(Te.a,{}),onClick:function(){return o(l.id)}})},"edit"):Object(t.jsx)(b.a,{title:Object(t.jsx)(a.a,{id:"create",defaultMessage:"create"}),children:Object(t.jsx)(d.a,{type:"primary",icon:Object(t.jsx)(ne.a,{}),onClick:function(){o(ye[l.key]||-1)}})},"create"),Object(t.jsx)(x.a,{title:Object(t.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(O.a)(Object(p.a)().mark(function j(){var g;return Object(p.a)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,ct(s,l.id);case 2:g=T.sent,g&&(o(!1),y.current&&y.current.reload());case 4:case"end":return T.stop()}},j)})),okText:Object(t.jsx)(a.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(a.a,{id:"no",defaultMessage:"No"}),children:l.id>0?Object(t.jsx)(b.a,{title:Object(t.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(d.a,{type:"primary",icon:Object(t.jsx)(We.a,{}),danger:!0})}):null},"delete")]}}],P=function(h){var l;if(!!h&&(!(f!=null&&(l=f.config)!==null&&l!==void 0&&l.length)&&h&&M(Object(S.a)(Object(S.a)({},f),{},{config:[h]})),!!(f!=null&&f.config))){var j=f==null?void 0:f.config.map(function(g){return g.key===h.key?Object(S.a)(Object(S.a)({},g),h):g});M(Object(S.a)(Object(S.a)({},f),{},{config:j}))}};return Object(t.jsxs)(L.a.Fragment,{children:[Object(t.jsx)(be.a,{headerTitle:s.formatMessage({id:"menu.settings"}),actionRef:y,rowKey:"id",request:function(h){var l=h.pageSize,j=h.current;return Object(D.f)({pageSize:l,current:j,group:"global"}).then(function(g){if(g.success){var z=[].concat(Object(Ve.a)(Object.keys(ye).map(function(T){return g.data.find(function(q){return q.key===T})||ye[T]})),Object(Ve.a)(g.data.filter(function(T){return!Object.keys(ye).includes(T.key)})));return{data:z,total:z.length,success:!0}}return[]})},columns:A}),Object(t.jsx)(Ke,{groups:[],id:i,visible:i,initialData:ye,onVisibleChange:function(h){return!h&&o(!1)},onFinish:function(){var m=Object(O.a)(Object(p.a)().mark(function h(l){var j,g,z,T;return Object(p.a)().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return j=l,H.next=3,ut(s,j,Number(i));case 3:g=H.sent,z=g.success,T=g.updatedSettings,z&&(T!=null&&T.success&&P(T.data),o(!1),y.current&&y.current.reload());case 7:case"end":return H.stop()}},h)}));return function(h){return m.apply(this,arguments)}}()})]})},dt=ot,jt=e("I5X1"),Ot=function(r){return r.replaceAll("escolalms","").split("_").join("")},bt=F.default=function(){var E=Object(Z.l)(),r=Object(a.j)(),n=E.tab,i=n===void 0?"user_settings":n,o=Object(u.useState)(),y=Object(C.a)(o,2),s=y[0],v=y[1],M=Object(u.useCallback)(function(){Object(D.a)().then(function(m){m.success&&v(m.data)})},[]),f=Object(jt.a)("@@initialState"),A=f.initialState,P=Object(u.useCallback)(function(){var m;return(A==null||(m=A.config)===null||m===void 0?void 0:m.length)!==0},[A]);return Object(u.useEffect)(function(){M()},[]),s?Object(t.jsxs)(K.a,{title:Object(t.jsx)(a.a,{id:"settings"}),header:{breadcrumb:{routes:[{path:"settings",breadcrumbName:r.formatMessage({id:"menu.Configuration.settings"})},{path:String(i),breadcrumbName:String(i)}]}},children:[!P()&&Object(t.jsx)(w.a,{message:Object(t.jsx)(a.a,{id:"global_settings_alert_title",defaultMessage:"Add global settings"}),description:Object(t.jsx)(a.a,{id:"global_settings_alert_description",defaultMessage:"Global settings are used to configure the entire LMS. You can add global settings by clicking the button below."}),type:"warning",showIcon:!0,style:{marginBottom:"20px"}}),Object(t.jsxs)(N.a,{tabs:{type:"card",activeKey:i,onChange:function(h){return a.e.push("/configuration/settings/".concat(h))}},children:[Object(t.jsx)(N.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"user.settings"}),children:Object(t.jsx)(Xe,{})},"user_settings"),Object(t.jsx)(N.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"global_settings"}),children:Object(t.jsx)(dt,{})},"global_settings"),Object.keys(s).map(function(m){return Object(t.jsxs)(N.a.TabPane,{tab:Object(t.jsxs)("span",{children:[Object(t.jsx)(a.a,{id:"package"})," ",Ot(m)]}),children:[Object(t.jsx)(it,{values:s,packageName:m,onValueUpdated:function(){return M()}}),m]},m)})]})]}):Object(t.jsx)(Y.a,{})}},hd5d:function(le,F,e){"use strict";var B=e("qLMh"),w=e("9og8"),U=e("q1tI"),Y=e.n(U),C=e("3Ef1"),u=e.n(C),L=e("BAh9"),N=e("vtG9"),Z=e.n(N),a=e("9kvl"),K=e("nKUr"),D=e.n(K),W=function(_){var b=_.value,I=_.onChange,d=_.directory,te=d===void 0?"/wysiwyg":d,R=Object(a.j)();return Object(K.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(K.jsx)(u.a,{uploadImage:function(){var ie=Object(w.a)(Object(B.a)().mark(function p(S){var Q,J;return Object(B.a)().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,Object(L.e)(S,te);case 2:if(Q=ne.sent,!Q.success){ne.next=6;break}return J=Q.data[0].name.includes("/")?Q.data[0].name:"".concat(te).concat(Q.data[0].name),ne.abrupt("return",Object(L.d)(J,1e3));case 6:throw new Error("Error while uploading");case 7:case"end":return ne.stop()}},p)}));return function(p){return ie.apply(this,arguments)}}(),defaultValue:b||"",onChange:function(p){return I&&I(p())},placeholder:R.formatMessage({id:"wysiwyg_placeholder"})})})};F.a=W},lLVY:function(le,F,e){},vtG9:function(le,F,e){}}]);
