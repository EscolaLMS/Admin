(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{"0TUn":function(J,j,e){"use strict";e.d(j,"c",function(){return D}),e.d(j,"a",function(){return P}),e.d(j,"b",function(){return s});var v=e("k1fw"),M=e("9og8"),p=e("WmNS"),l=e.n(p),u=e("9kvl");function D(_,i){return d.apply(this,arguments)}function d(){return d=Object(M.a)(l.a.mark(function _(i,r){return l.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(u.f)("/api/model-fields",Object(v.a)({method:"GET",params:i},r||{})));case 1:case"end":return o.stop()}},_)})),d.apply(this,arguments)}function P(_,i){return t.apply(this,arguments)}function t(){return t=Object(M.a)(l.a.mark(function _(i,r){return l.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(u.f)("/api/admin/model-fields",Object(v.a)({method:"POST",data:i},r||{})));case 1:case"end":return o.stop()}},_)})),t.apply(this,arguments)}function s(_,i){return O.apply(this,arguments)}function O(){return O=Object(M.a)(l.a.mark(function _(i,r){return l.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(u.f)("/api/admin/model-fields",Object(v.a)({method:"DELETE",data:i},r||{})));case 1:case"end":return o.stop()}},_)})),O.apply(this,arguments)}},"5ddx":function(J,j,e){"use strict";var v=e("9og8"),M=e("+L6B"),p=e("2/Rp"),l=e("tJVT"),u=e("WmNS"),D=e.n(u),d=e("q1tI"),P=e.n(d),t=e("9kvl"),s=e("Qiat"),O=e("VK58"),_=e("xvlK"),i=e("Xcxh"),r=e("y8nQ"),b=e("Vl3Y"),o=e("rmhi"),B=e("VMEa"),C=e("Qurx"),a=e("nKUr"),c=function(x){var I=Object(t.i)(),h=x.visible,R=x.onVisibleChange,U=x.onFinish,S=b.a.useForm(),F=Object(l.a)(S,1),V=F[0];return Object(d.useEffect)(function(){return function(){V.resetFields()}},[]),Object(a.jsx)(o.a,{form:V,title:I.formatMessage({id:"newSetting",defaultMessage:"newSetting"}),width:"30vw",visible:h,onVisibleChange:R,onFinish:U,children:Object(a.jsxs)(B.a.Group,{children:[Object(a.jsx)(C.a,{label:Object(a.jsx)(t.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"}),Object(a.jsx)(C.a,{label:Object(a.jsx)(t.a,{id:"value",defaultMessage:"value"}),rules:[{required:!0}],width:"md",name:"value"})]})})},m=c,y=function(x){var I=x.user,h=x.isProfile,R=h===void 0?!1:h,U=Object(d.useRef)(),S=Object(t.i)(),F=Object(d.useState)(!1),V=Object(l.a)(F,2),K=V[0],G=V[1],Y=Object(d.useState)("PATCH"),z=Object(l.a)(Y,2),T=z[0],A=z[1],L=[{title:Object(a.jsx)(t.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(a.jsx)(t.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInSearch:!0}],W=Object(d.useCallback)(function(g){var E=g&&Object.entries(g).map(function(f){return{key:f[0],value:f[1]}});return E},[I]);return Object(a.jsxs)(P.a.Fragment,{children:[Object(a.jsx)(s.a,{headerTitle:S.formatMessage({id:"menu.settings"}),actionRef:U,rowKey:"id",search:!1,toolBarRender:R?function(){return[Object(a.jsxs)(p.a,{type:"primary",onClick:function(){G(-1),A("PATCH")},children:[Object(a.jsx)(_.a,{})," ",Object(a.jsx)(t.a,{id:"pages.searchTable.new"})]},"primary"),Object(a.jsxs)(p.a,{color:"yellow",type:"primary",onClick:function(){G(-1),A("PUT")},children:[Object(a.jsx)(i.a,{})," ",Object(a.jsx)(t.a,{id:"user.settings.overwrite"})]},"primary")]}:!1,request:function(){return Object(O.d)(Number(I)).then(function(E){return E.success?{data:W(E.data)}:[]})},columns:L}),Object(a.jsx)(m,{id:K,visible:Number.isInteger(K),onVisibleChange:function(E){return E===!1&&G(!1)},onFinish:function(){var g=Object(v.a)(D.a.mark(function E(f){var Q;return D.a.wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,Object(O.g)(Number(I),T,f);case 2:Q=$.sent,Q.success&&(G(!1),U.current&&U.current.reload());case 4:case"end":return $.stop()}},E)}));return function(E){return g.apply(this,arguments)}}()})]})},N=j.a=y},"DBJ/":function(J,j,e){"use strict";var v=e("k1fw"),M=e("y8nQ"),p=e("Vl3Y"),l=e("etVw"),u=e("q1tI"),D=e.n(u),d=e("9kvl"),P=e("qFDU"),t=e("nKUr"),s=e.n(t),O=function(i){var r=i.onChange,b=i.url,o=i.name,B=i.extra,C=i.accept,a=i.data,c=i.wrapInForm,m=c===void 0?!0:c,y=i.title,N=i.formProps,n=Object(d.i)();return a&&a[o]&&delete a[o],Object(t.jsx)(P.a,{condition:m,wrap:function(I){return Object(t.jsx)(p.a,Object(v.a)(Object(v.a)({},N),{},{children:I}))},children:Object(t.jsx)(l.a,{title:y||Object(t.jsx)(d.a,{id:"upload_click_here"}),placeholder:n.formatMessage({id:"upload_click_here"}),onChange:r,label:Object(t.jsx)(d.a,{id:"upload"}),max:2,fieldProps:{data:a,accept:C,name:o,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(b),extra:B})})};j.a=O},Jfn2:function(J,j,e){"use strict";var v=e("k1fw"),M=e("XCrF"),p=e("1GRj"),l=e("PpiC"),u=e("q1tI"),D=e.n(u),d=e("nKUr"),P=e.n(d),t=function(O){var _=O.path,i=O.size,r=O.srcSizes,b=O.alt,o=b===void 0?"LMS Image":b,B=Object(l.a)(O,["path","size","srcSizes","alt"]),C="".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(_,"&w=").concat(r?r[0]:i),a=r&&r.map(function(c){return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(_,"&w=").concat(c," ").concat(c,"w")});return Object(d.jsx)("div",{className:"escolalms-image",children:Object(d.jsx)(p.a,Object(v.a)({src:C,srcSet:a&&a.join(","),alt:o},B))})};j.a=t},TpMl:function(J,j,e){"use strict";var v=e("tJVT"),M=e("q1tI"),p=e.n(M),l=e("0TUn"),u=function(d){var P=Object(M.useState)({state:"initial"}),t=Object(v.a)(P,2),s=t[0],O=t[1];return Object(M.useEffect)(function(){O({state:"loading"}),Object(l.c)({class_type:d}).then(function(_){_.success&&O({state:"loaded",list:_.data})})},[d]),s};j.a=u},YDZB:function(J,j,e){"use strict";var v=e("2qtc"),M=e("kLXV"),p=e("7Kak"),l=e("9yH6"),u=e("+L6B"),D=e("2/Rp"),d=e("tJVT"),P=e("q1tI"),t=e.n(P),s=e("gU/Y"),O=e("9kvl"),_=e("u95b"),i=e.n(_),r=e("nKUr"),b=e.n(r),o=function(C){var a=C.value,c=C.onChange,m=Object(P.useState)(!1),y=Object(d.a)(m,2),N=y[0],n=y[1],x=Object(P.useCallback)(function(){n(!1)},[]),I=Object(P.useState)("code"),h=Object(d.a)(I,2),R=h[0],U=h[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)(D.a,{type:"primary",onClick:function(){return n(!0)},size:"small",children:Object(r.jsx)(O.a,{id:"json_editor"})}),Object(r.jsxs)(M.a,{title:"JSON",visible:N,onOk:x,onCancel:x,children:[Object(r.jsxs)(l.a.Group,{onChange:function(F){return U(F.target.value)},value:R,children:[Object(r.jsx)(l.a,{value:"tree",children:"tree"}),Object(r.jsx)(l.a,{value:"view",children:"view"}),Object(r.jsx)(l.a,{value:"form",children:"form"}),Object(r.jsx)(l.a,{value:"code",children:"code"}),Object(r.jsx)(l.a,{value:"text",children:"text"})]}),Object(r.jsx)(s.a,{mode:R,value:a,onChange:function(F){return c&&c(F)}},R)]})]})};j.a=o},YDsB:function(J,j,e){"use strict";var v=e("YDZB"),M=e("FJDo"),p=e("tneF"),l=e("Qurx"),u=e("VMEa"),D=e("BiO0"),d=e("q1tI"),P=e.n(d),t=e("9kvl"),s=e("nKUr"),O=e.n(s),_=function(r){var b=r.field,o=Object(t.i)(),B=function(a){var c=a&&a.extra&&a.extra.find(function(m){return m[Object(t.c)()]});switch(a.type){case"number":return Object(s.jsx)(M.a,{width:"md",name:a.name,label:c?c[Object(t.c)()]:Object(s.jsx)(t.a,{id:a.name}),tooltip:Object(s.jsx)(t.a,{id:a.name}),placeholder:o.formatMessage({id:a.name,defaultMessage:a.name}),min:1,max:1024,fieldProps:{step:1}});case"boolean":return Object(s.jsx)(p.a,{name:a.name,children:c?c[Object(t.c)()]:Object(s.jsx)(t.a,{id:a.name})});case"varchar":return Object(s.jsx)(l.a,{width:"md",name:a.name,label:c?c[Object(t.c)()]:Object(s.jsx)(t.a,{id:a.name}),tooltip:Object(s.jsx)(t.a,{id:a.name}),placeholder:o.formatMessage({id:a.name})});case"json":return Object(s.jsx)(u.a.Item,{name:a.name,label:c?c[Object(t.c)()]:Object(s.jsx)(t.a,{id:a.name}),tooltip:Object(s.jsx)(t.a,{id:a.name}),valuePropName:"value",children:Object(s.jsx)(v.a,{})});case"text":default:return Object(s.jsx)(D.a,{width:"md",name:a.name,label:c?c[Object(t.c)()]:Object(s.jsx)(t.a,{id:a.name}),tooltip:Object(s.jsx)(t.a,{id:a.name}),placeholder:o.formatMessage({id:a.name})})}};return Object(s.jsx)(s.Fragment,{children:B(b)})};j.a=_},fWLy:function(J,j,e){"use strict";e.r(j);var v=e("T2oS"),M=e("W9HT"),p=e("miYZ"),l=e("tsqr"),u=e("k1fw"),D=e("9og8"),d=e("tJVT"),P=e("WmNS"),t=e.n(P),s=e("q1tI"),O=e.n(s),_=e("VMEa"),i=e("Qurx"),r=e("nhC9"),b=e("VK58"),o=e("TpMl"),B=e("tMyG"),C=e("DBJ/"),a=e("Jfn2"),c=e("Ty5D"),m=e("9kvl"),y=e("5ddx"),N=e("YDsB"),n=e("nKUr"),x=e.n(n);j.default=function(){var I=Object(c.h)(),h=Object(m.i)(),R=I.tab,U=R===void 0?"general":R,S=Object(o.a)("EscolaLms\\Auth\\Models\\User"),F=Object(s.useState)(),V=Object(d.a)(F,2),K=V[0],G=V[1];Object(s.useEffect)(function(){var T=function(){var A=Object(D.a)(t.a.mark(function L(){var W;return t.a.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,Object(b.e)();case 2:W=E.sent,W.success&&G(Object(u.a)(Object(u.a)({},W.data),{},{bio:W.data.bio||""}));case 4:case"end":return E.stop()}},L)}));return function(){return A.apply(this,arguments)}}();T()},[]);var Y=Object(s.useMemo)(function(){return{onFinish:function(){var T=Object(D.a)(t.a.mark(function L(W){var g;return t.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Object(b.h)(W);case 2:g=f.sent,l.default.success(g.message);case 4:case"end":return f.stop()}},L)}));function A(L){return T.apply(this,arguments)}return A}(),initialValues:K}},[K]),z=Object(s.useMemo)(function(){return{onFinish:function(){var T=Object(D.a)(t.a.mark(function L(W){var g;return t.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Object(b.i)(W);case 2:g=f.sent,l.default.success(g.message);case 4:case"end":return f.stop()}},L)}));function A(L){return T.apply(this,arguments)}return A}(),initialValues:K}},[K]);return K?Object(n.jsx)(B.a,{title:Object(n.jsx)(m.a,{id:"my_profile"}),header:{breadcrumb:{routes:[{path:"users",breadcrumbName:h.formatMessage({id:"menu.Users"})},{path:"me",breadcrumbName:h.formatMessage({id:"my_profile"})},{path:String(U),breadcrumbName:h.formatMessage({id:String(U)})}]}},children:Object(n.jsxs)(r.a,{tabs:{type:"card",activeKey:U,onChange:function(A){return m.d.push("/users/me/".concat(A))}},children:[Object(n.jsx)(r.a.TabPane,{tab:Object(n.jsx)(m.a,{id:"general"}),children:Object(n.jsxs)(_.a,Object(u.a)(Object(u.a)({},Y),{},{children:[Object(n.jsxs)(_.a.Group,{children:[Object(n.jsx)(i.a,{width:"md",name:"first_name",label:Object(n.jsx)(m.a,{id:"first_name"}),tooltip:Object(n.jsx)(m.a,{id:"first_name"}),placeholder:h.formatMessage({id:"first_name"}),required:!0}),Object(n.jsx)(i.a,{width:"md",name:"last_name",label:Object(n.jsx)(m.a,{id:"last_name"}),tooltip:Object(n.jsx)(m.a,{id:"last_name"}),placeholder:h.formatMessage({id:"last_name"}),required:!0})]}),Object(n.jsx)(_.a.Group,{children:S.state==="loaded"&&S.list.map(function(T){return Object(n.jsx)(N.a,{field:T},T.id)})}),Object(n.jsx)(_.a.Group,{children:Object(n.jsxs)(_.a.Item,{name:"avatar",label:Object(n.jsx)(m.a,{id:"avatar"}),children:[K.path_avatar&&Object(n.jsx)(a.a,{path:K.path_avatar,size:600,width:200}),Object(n.jsx)(C.a,{url:"/api/profile/upload-avatar",name:"avatar",accept:"image/*",onChange:function(A){A.file.status==="done"&&A.file.response.success&&G(A.file.response.data)}})]})})]}))},"general"),Object(n.jsx)(r.a.TabPane,{tab:Object(n.jsx)(m.a,{id:"change_password"}),children:Object(n.jsxs)(_.a,Object(u.a)(Object(u.a)({},z),{},{children:[Object(n.jsx)(_.a.Group,{children:Object(n.jsx)(i.a.Password,{width:"md",name:"current_password",label:Object(n.jsx)(m.a,{id:"current_password"}),placeholder:h.formatMessage({id:"current_password"}),required:!0})}),Object(n.jsxs)(_.a.Group,{children:[Object(n.jsx)(i.a.Password,{width:"md",name:"new_password",label:Object(n.jsx)(m.a,{id:"new_password"}),placeholder:h.formatMessage({id:"new_password"}),required:!0}),Object(n.jsx)(i.a.Password,{width:"md",name:"new_confirm_password",label:Object(n.jsx)(m.a,{id:"new_confirm_password"}),placeholder:h.formatMessage({id:"new_confirm_password"}),required:!0})]})]}))},"change_password"),Object(n.jsx)(r.a.TabPane,{tab:Object(n.jsx)(m.a,{id:"user.settings"}),children:Object(n.jsx)(y.a,{user:String(K.id),isProfile:!0})},"user_settings")]})}):Object(n.jsx)(M.a,{})}}}]);
