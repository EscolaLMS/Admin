"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1227],{47389:function(L,m,e){var f=e(1413),r=e(67294),T=e(27363),h=e(84089),S=function(p,E){return r.createElement(h.Z,(0,f.Z)((0,f.Z)({},p),{},{ref:E,icon:T.Z}))};S.displayName="EditOutlined",m.Z=r.forwardRef(S)},66149:function(L,m,e){e.d(m,{S:function(){return f}});var f=30},53880:function(L,m,e){e.r(m),e.d(m,{TableColumns:function(){return Z},default:function(){return Y}});var f=e(97857),r=e.n(f),T=e(13769),h=e.n(T),S=e(19632),_=e.n(S),p=e(5574),E=e.n(p),b=e(48781),R=e(83863),I=e(75081),d=e(67294),s=e(80854),t=e(85893),O=function(l){var c=l.value,v=l.onChange,j=l.onSelect,C=l.onDeselect,A=l.onClear,P=l.loading,D=l.disabled,G=l.multiple,Q=G===void 0?!1:G,X=(0,d.useState)([]),z=E()(X,2),W=z[0],V=z[1],k=(0,d.useState)(!1),$=E()(k,2),q=$[0],B=$[1],ee=(0,d.useRef)(),F=(0,d.useRef)(),te=(0,d.useCallback)(function(i){V(function(M){return[].concat(_()(M),_()(i)).filter(function(g,y,re){return re.findIndex(function(se){return se.id===g.id})===y})})},[]);(0,d.useEffect)(function(){ee.current=W},[W]);var U=(0,d.useCallback)(function(i){B(!0),F.current&&F.current.abort(),F.current=new AbortController,(0,b.mV)({academicYearID:i},{signal:F.current.signal}).then(function(M){M.success&&V(M.data),B(!1)}).catch(function(){return B(!1)})},[te]),ne=(0,d.useCallback)(function(i){U(i)},[U]);return(0,t.jsx)(R.default,{onSelect:j,onDeselect:C,onClear:A,loading:P,disabled:D,onFocus:function(){return U()},allowClear:!0,style:{width:"100%"},value:c,onChange:v,mode:Q?"multiple":void 0,showSearch:!0,onSearch:ne,placeholder:(0,t.jsx)(s.FormattedMessage,{id:"select_semester",defaultMessage:"Select semester"}),optionFilterProp:"children",filterOption:function(M,g){if(g&&g.children){var y;return(g==null||(y=g.children)===null||y===void 0?void 0:y.toString().toLowerCase().indexOf(M.toLowerCase()))>=0}return!0},notFoundContent:q?(0,t.jsx)(I.Z,{size:"small"}):null,children:W.map(function(i){return(0,t.jsx)(R.default.Option,{value:i.id,children:i.name},i.id)})})},a=O,u=e(47389),o=e(74453),x=e(16894),n=e(83062),w=e(14726),H=e(66149),J=["type","defaultRender"],Z=[{hideInSearch:!1,hideInTable:!0,title:(0,t.jsx)(s.FormattedMessage,{id:"semester",defaultMessage:"semester"}),dataIndex:"semester_id",renderFormItem:function(l,c,v){var j=c.type,C=c.defaultRender,A=h()(c,J);if(j==="form")return null;var P=v.getFieldValue("state");return(0,t.jsx)(a,r()(r()({},A),{},{state:{type:P}}))}},{title:(0,t.jsx)(s.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,width:"80px"},{title:(0,t.jsx)(s.FormattedMessage,{id:"subject",defaultMessage:"subject"}),dataIndex:["subject","name"],hideInSearch:!0},{title:(0,t.jsx)(s.FormattedMessage,{id:"semester",defaultMessage:"semester"}),dataIndex:["semester","name"],hideInSearch:!0},{title:(0,t.jsx)(s.FormattedMessage,{id:"group",defaultMessage:"group"}),dataIndex:"groups",render:function(l,c){return(0,t.jsx)("span",{children:c.groups.map(function(v){return(0,t.jsxs)("span",{children:[v.name," ",(0,t.jsx)("br",{})]},v.id)})})},hideInForm:!0,hideInSearch:!0}],N=function(){var l=(0,d.useRef)(),c=(0,s.useIntl)();return(0,t.jsx)(o._z,{children:(0,t.jsx)(x.ZP,{headerTitle:c.formatMessage({id:"menu.Teacher.Subjects",defaultMessage:"Subjects"}),actionRef:l,rowKey:"id",search:{layout:"vertical"},pagination:{defaultPageSize:H.S},request:function(j){var C=j.pageSize,A=j.current,P=j.semester_id;return(0,b.tG)({per_page:C,page:A,semester_id:P}).then(function(D){return D.success?{data:D.data,total:D.meta.total,success:!0}:[]})},columns:[].concat(Z,[{hideInSearch:!0,title:(0,t.jsx)(s.FormattedMessage,{id:"pages.searchTable.titleOption"}),dataIndex:"option",valueType:"option",render:function(j,C){return[(0,t.jsx)(s.Link,{to:"/teacher/subjects/".concat(C.id),children:(0,t.jsx)(n.Z,{title:(0,t.jsx)(s.FormattedMessage,{id:"edit",defaultMessage:"edit"}),children:(0,t.jsx)(w.ZP,{type:"primary",icon:(0,t.jsx)(u.Z,{})})})},"edit")]}}])})})},Y=N},48781:function(L,m,e){e.d(m,{KG:function(){return d},TO:function(){return t},mV:function(){return E},tG:function(){return R}});var f=e(15009),r=e.n(f),T=e(97857),h=e.n(T),S=e(99289),_=e.n(S),p=e(80854);function E(a,u){return b.apply(this,arguments)}function b(){return b=_()(r()().mark(function a(u,o){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/api/admin/semesters",h()({params:u,method:"GET",useCache:!1},o||{})));case 1:case"end":return n.stop()}},a)})),b.apply(this,arguments)}function R(a,u){return I.apply(this,arguments)}function I(){return I=_()(r()().mark(function a(u,o){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/api/admin/semester-subjects",h()({params:u,method:"GET",useCache:!1},o||{})));case 1:case"end":return n.stop()}},a)})),I.apply(this,arguments)}function d(a,u){return s.apply(this,arguments)}function s(){return s=_()(r()().mark(function a(u,o){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/api/admin/semester-subjects/".concat(u),h()({method:"GET",useCache:!1},o||{})));case 1:case"end":return n.stop()}},a)})),s.apply(this,arguments)}function t(a,u){return O.apply(this,arguments)}function O(){return O=_()(r()().mark(function a(u,o){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,p.request)("/api/admin/semester-subjects/".concat(u,"/tutors"),h()({method:"GET",useCache:!1},o||{})));case 1:case"end":return n.stop()}},a)})),O.apply(this,arguments)}}}]);
