"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[6616],{47389:function(H,C,e){var x=e(1413),i=e(67294),O=e(27363),a=e(84089),m=function(d,_){return i.createElement(a.Z,(0,x.Z)((0,x.Z)({},d),{},{ref:_,icon:O.Z}))};m.displayName="EditOutlined",C.Z=i.forwardRef(m)},90672:function(H,C,e){var x=e(1413),i=e(45987),O=e(67294),a=e(41550),m=e(85893),s=["fieldProps","proFieldProps"],d=function(M,E){var u=M.fieldProps,f=M.proFieldProps,o=(0,i.Z)(M,s);return(0,m.jsx)(a.Z,(0,x.Z)({ref:E,valueType:"textarea",fieldProps:u,proFieldProps:f},o))};C.Z=O.forwardRef(d)},86273:function(H,C,e){var x=e(5574),i=e.n(x),O=e(64631),a=e(67294),m=e(80854),s=e(94116),d=e(85893),_=function E(u,f){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return u.subcategories&&u.subcategories.length?{title:u.name,value:u.id,disabled:typeof f=="number"&&o!==f,children:u.subcategories.map(function(b){return E(b,f,o+1)})}:{title:u.name,value:u.id,disabled:typeof f=="number"&&o!==f}},M=function(u){var f=u.value,o=u.onChange,b=u.multiple,K=b===void 0?!1:b,g=u.enabledDepth,S=(0,a.useState)([]),V=i()(S,2),P=V[0],n=V[1];(0,a.useEffect)(function(){(0,s.CL)().then(function(l){l.success&&n(l.data)})},[]);var r=(0,a.useMemo)(function(){return P.map(function(l){return _(l,g)})},[P]);return(0,d.jsx)(O.Z,{loading:P.length===0,multiple:K,showSearch:!0,value:f,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:(0,d.jsx)(m.FormattedMessage,{id:"select",defaultMessage:"Please select"}),allowClear:!0,treeDefaultExpandAll:!0,onChange:o,treeData:r,disabled:P.length===0})};C.Z=M},23535:function(H,C,e){var x=e(97857),i=e.n(x),O=e(9783),a=e.n(O),m=e(71230),s=e(15746),d=e(14726),_=e(95830),M=e(67294),E=e(82238),u=e(34994),f=e(80854),o=e(85893),b=function(g){var S=g.title,V=g.action,P=g.form_name,n=g.src_name,r=g.getUploadedSrcField,l=g.setPath,D=g.wrapInForm,p=D===void 0?!0:D,y=g.folder,re=g.proFormGroupProps;return(0,o.jsx)(u.A.Group,i()(i()({title:(0,o.jsx)(f.FormattedMessage,{id:S})},re),{},{children:(0,o.jsxs)(m.Z,{children:[(0,o.jsx)(s.Z,{children:(0,o.jsx)(u.A.Item,{shouldUpdate:!0,children:function(Q){return(0,o.jsxs)(M.Fragment,{children:[(0,o.jsx)(E.Z,{folder:y,wrapInForm:p,accept:"image/*",name:P,url:V,onChange:function(w){if(w.file.status==="done"){var k;Q.setFieldsValue(a()({},n,r(w))),(k=w.file.response)!==null&&k!==void 0&&k.success&&l(a()(a()({},"".concat(P,"_url"),w.file.response.data["".concat(P,"_url")]),"".concat(P,"_path"),w.file.response.data["".concat(P,"_path")]))}}}),(0,o.jsx)(d.ZP,{danger:!0,onClick:function(){return[l(a()(a()({},"".concat(P,"_url"),""),"".concat(P,"_path"),"")),Q.setFieldsValue(a()({},n,""))]},children:(0,o.jsx)(f.FormattedMessage,{id:"delete"})})]})}})}),(0,o.jsx)(s.Z,{span:24,children:(0,o.jsx)(u.A.Item,{shouldUpdate:!0,children:function(Q){return(0,o.jsx)(_.Z,{width:200,src:Q.getFieldValue(n)})}})})]})}))};C.Z=b},65924:function(H,C,e){e.d(C,{m:function(){return a}});var x=e(68962),i=e(85893),O=function m(s,d,_,M){return s.map(function(E){var u,f;return{title:(u=E[d])!==null&&u!==void 0?u:"",key:(f=E[M])!==null&&f!==void 0?f:Math.random().toString(),children:E[_]&&Array.isArray(E[_])?m(E[_],d,_,M):[]}})},a=function(s){var d=s.branch,_=s.titlePropName,M=s.childrenPropName,E=s.keyPropName;return(0,i.jsx)(x.Z,{defaultExpandAll:!0,showIcon:!0,showLine:!0,treeData:O(d,_,M,E)})}},25539:function(H,C,e){e.r(C),e.d(C,{default:function(){return he},staticColumns:function(){return oe}});var x=e(97857),i=e.n(x),O=e(5574),a=e.n(O),m=e(15009),s=e.n(m),d=e(99289),_=e.n(d),M=e(65924),E=e(51042),u=e(74453),f=e(16894),o=e(2453),b=e(66309),K=e(75081),g=e(14726),S=e(83062),V=e(86738),P=e(28248),n=e(67294),r=e(80854),l=e(94116),D=e(66419),p=e(47389),y=e(82061),re=e(86273),ae=e(23535),Q=e(81587),ne=e(37476),w=e(5966),k=e(90672),ie=e(52688),ue=e(31199),le=e(952),de=e(75842),t=e(85893),me=function(A){var v=(0,r.useIntl)(),F=(0,n.useState)(!1),c=a()(F,2),L=c[0],h=c[1],j=A.visible,q=A.onVisibleChange,Z=A.onFinish,I=A.id,se=de.Z.useForm(),ee=a()(se,1),G=ee[0],X=typeof I=="number"&&I>0;return(0,n.useEffect)(function(){h(!1),typeof I=="number"&&I>0?(0,l.W3)(I).then(function($){$.success&&G.setFieldsValue($.data)}):G.resetFields()},[I,G]),(0,t.jsxs)(ne.Y,{form:G,title:v.formatMessage({id:X?"editCategory":"newCategory",defaultMessage:X?"editCategory":"newCategory"}),width:"400px",visible:j,onVisibleChange:q,onFinish:function(R){return Z(L?i()(i()({},R),{},{icon_path:null}):i()({},R))},onValuesChange:function(R){R.name&&G.setFieldsValue({slug:(0,Q.l)(R.name)})},children:[(0,t.jsx)(w.Z,{label:(0,t.jsx)(r.FormattedMessage,{id:"name",defaultMessage:"name"}),rules:[{required:!0}],name:"name"}),(0,t.jsx)(w.Z,{name:"slug",label:(0,t.jsx)(r.FormattedMessage,{id:"slug"}),placeholder:v.formatMessage({id:"slug"}),disabled:!0,required:!0}),(0,t.jsx)(k.Z,{name:"description",label:(0,t.jsx)(r.FormattedMessage,{id:"description"}),placeholder:v.formatMessage({id:"description"})}),(0,t.jsx)(ie.Z,{name:"is_active",label:(0,t.jsx)(r.FormattedMessage,{id:"is_active",defaultMessage:"is_active"}),initialValue:!1}),(0,t.jsx)(ue.Z,{name:"order",label:(0,t.jsx)(r.FormattedMessage,{id:"stacking_order"})}),(0,t.jsx)(le.ZP.Item,{name:"parent_id",label:(0,t.jsx)(r.FormattedMessage,{id:"parent_category",defaultMessage:"parent_category"}),valuePropName:"value",children:(0,t.jsx)(re.Z,{})}),I!==-1&&(0,t.jsx)(ae.Z,{folder:"categories/".concat(I),wrapInForm:!1,title:"icon",action:"/api/admin/categories/".concat(I),src_name:"icon",form_name:"icon",getUploadedSrcField:function(R){return R.file.response.data.icon},setPath:function(R){R.icon_path===""&&h(!0)},proFormGroupProps:{style:{flexDirection:"column"},titleStyle:{flex:"0 0 10px"}}})]})},ce=me,_e=function(){var J=_()(s()().mark(function A(v,F,c){var L;return s()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return L=o.ZP.loading(v.formatMessage({id:"loading"})),j.prev=1,j.next=4,c&&c!==-1?(0,l.yr)(c,F):(0,l.k4)(F);case 4:return L(),o.ZP.success(v.formatMessage({id:"success"})),j.abrupt("return",!0);case 9:return j.prev=9,j.t0=j.catch(1),L(),o.ZP.error(v.formatMessage({id:"error"}).toString()),j.abrupt("return",!1);case 14:case"end":return j.stop()}},A,null,[[1,9]])}));return function(v,F,c){return J.apply(this,arguments)}}(),fe=function(){var J=_()(s()().mark(function A(v,F){var c;return s()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return c=o.ZP.loading(v.formatMessage({id:"loading"})),h.prev=1,h.next=4,(0,l.uu)(F);case 4:return c(),o.ZP.success(v.formatMessage({id:"success"})),h.abrupt("return",!0);case 9:return h.prev=9,h.t0=h.catch(1),c(),o.ZP.error(v.formatMessage({id:"error"})),h.abrupt("return",!1);case 14:case"end":return h.stop()}},A,null,[[1,9]])}));return function(v,F){return J.apply(this,arguments)}}(),oe=[{title:(0,t.jsx)(r.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:(0,t.jsx)(r.FormattedMessage,{id:"name",defaultMessage:"name"}),dataIndex:"name",sorter:!0},{title:(0,t.jsx)(r.FormattedMessage,{id:"full_name",defaultMessage:"full_name"}),dataIndex:"name_with_breadcrumbs",hideInSearch:!0},{title:(0,t.jsx)(r.FormattedMessage,{id:"slug",defaultMessage:"slug"}),dataIndex:"slug",hideInSearch:!0,sorter:!0},{title:(0,t.jsx)(r.FormattedMessage,{id:"pages.searchTable.titleStatus",defaultMessage:"Status"}),dataIndex:"is_active",sorter:!0,valueEnum:{true:{text:(0,t.jsx)(b.Z,{color:"success",children:(0,t.jsx)(r.FormattedMessage,{id:"Active",defaultMessage:"Active"})}),status:"true"},false:{text:(0,t.jsx)(b.Z,{color:"error",children:(0,t.jsx)(r.FormattedMessage,{id:"Inactive",defaultMessage:"Inactive"})}),status:"false"}}}],ge=function(){var A=(0,n.useState)(!1),v=a()(A,2),F=v[0],c=v[1],L=(0,n.useState)([]),h=a()(L,2),j=h[0],q=h[1];return(0,n.useEffect)(function(){c(!0),(0,l.CL)().then(function(Z){Z.success&&q(Z.data)}).finally(function(){return c(!1)})},[]),F?(0,t.jsx)(K.Z,{}):(0,t.jsx)(M.m,{branch:j,titlePropName:"name",childrenPropName:"subcategories",keyPropName:"id"})},pe=function(){var A=(0,n.useState)(!1),v=a()(A,2),F=v[0],c=v[1],L=(0,n.useState)([]),h=a()(L,2),j=h[0],q=h[1],Z=(0,n.useRef)(),I=(0,r.useIntl)(),se=(0,n.useState)(!1),ee=a()(se,2),G=ee[0],X=ee[1],$=(0,n.useCallback)(function(W){return!!j.some(function(T){return T.parent_id===W})},[j]),R=[].concat(oe,[{hideInSearch:!0,title:(0,t.jsx)(r.FormattedMessage,{id:"parent_id",defaultMessage:"parent_id"}),dataIndex:"parent_id",tip:I.formatMessage({id:"parent_id_tooltip",defaultMessage:"Parent category"}),render:function(T,B){var U=j.find(function(N){return N.id===B.parent_id});return U?(0,t.jsx)(g.ZP,{size:"small",onClick:function(){return c(U.id)},children:U.name}):(0,t.jsx)(n.Fragment,{children:(0,t.jsx)(r.FormattedMessage,{id:"none"})})}},{hideInSearch:!0,title:(0,t.jsx)(r.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(T,B){return[(0,t.jsx)(S.Z,{title:(0,t.jsx)(r.FormattedMessage,{id:"edit",defaultMessage:"edit"}),children:(0,t.jsx)(g.ZP,{type:"primary",icon:(0,t.jsx)(p.Z,{}),onClick:function(){return c(B.id)}})},"edit"),$(B.id)?(0,t.jsx)(S.Z,{title:(0,t.jsx)(r.FormattedMessage,{id:"cantDelete",defaultMessage:"You can't delete this category because it's parent to others"}),children:(0,t.jsx)(g.ZP,{disabled:!0,type:"primary",icon:(0,t.jsx)(y.Z,{}),danger:!0})},"delete"):(0,t.jsx)(V.Z,{title:(0,t.jsx)(r.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:_()(s()().mark(function U(){var N;return s()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,fe(I,B.id);case 2:N=Y.sent,N&&(c(!1),Z.current&&Z.current.reload());case 4:case"end":return Y.stop()}},U)})),okText:(0,t.jsx)(r.FormattedMessage,{id:"yes",defaultMessage:"Yes"}),cancelText:(0,t.jsx)(r.FormattedMessage,{id:"no",defaultMessage:"No"}),children:(0,t.jsx)(S.Z,{title:(0,t.jsx)(r.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,t.jsx)(g.ZP,{type:"primary",icon:(0,t.jsx)(y.Z,{}),danger:!0})})},"delete")]}}]);return(0,t.jsxs)(u._z,{children:[(0,t.jsx)(P.Z,{open:G,onCancel:function(){return X(!1)},onOk:function(){return X(!1)},children:G&&(0,t.jsx)(ge,{})}),(0,t.jsx)(f.ZP,{headerTitle:I.formatMessage({id:"menu.Courses.Categories",defaultMessage:"categories"}),actionRef:Z,rowKey:"id",search:{layout:"vertical"},toolBarRender:function(){return[(0,t.jsx)(g.ZP,{onClick:function(){return X(!0)},children:(0,t.jsx)(r.FormattedMessage,{id:"show_tree",defaultMessage:"Show Tree"})},"show_tree"),(0,t.jsxs)(g.ZP,{type:"primary",onClick:function(){c(-1)},children:[(0,t.jsx)(E.Z,{})," ",(0,t.jsx)(r.FormattedMessage,{id:"pages.searchTable.new",defaultMessage:"\u65B0\u5EFA"})]},"primary")]},request:function(T,B){var U=T.pageSize,N=T.current,z=T.name,Y=T.is_active;return(0,l.bd)(i()({per_page:U,page:N,name:z||void 0,is_active:Y?Y==="true"?1:0:void 0},(0,D.di)(B,"created_at"))).then(function(te){return te.success?(q(te.data),{data:te.data,total:te.meta.total,success:!0}):[]})},columns:R}),(0,t.jsx)(ce,{id:F,visible:Number.isInteger(F),onVisibleChange:function(T){return!T&&c(!1)},onFinish:function(){var W=_()(s()().mark(function T(B){var U;return s()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,_e(I,B,Number(F));case 2:U=z.sent,U&&(c(!1),Z.current&&Z.current.reload());case 4:case"end":return z.stop()}},T)}));return function(T){return W.apply(this,arguments)}}()})]})},he=pe},94116:function(H,C,e){e.d(C,{CL:function(){return _},W3:function(){return f},bd:function(){return E},k4:function(){return b},uu:function(){return V},yr:function(){return g}});var x=e(15009),i=e.n(x),O=e(97857),a=e.n(O),m=e(99289),s=e.n(m),d=e(80854);function _(n){return M.apply(this,arguments)}function M(){return M=s()(i()().mark(function n(r){return i()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,d.request)("/api/admin/categories/tree",a()({method:"GET",useCache:!1},r||{})));case 1:case"end":return D.stop()}},n)})),M.apply(this,arguments)}function E(n,r){return u.apply(this,arguments)}function u(){return u=s()(i()().mark(function n(r,l){return i()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,d.request)("/api/admin/categories",a()({method:"GET",useCache:!1,params:r},l||{})));case 1:case"end":return p.stop()}},n)})),u.apply(this,arguments)}function f(n,r){return o.apply(this,arguments)}function o(){return o=s()(i()().mark(function n(r,l){return i()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,d.request)("/api/admin/categories/".concat(r),a()({method:"GET",useCache:!1},l||{})));case 1:case"end":return p.stop()}},n)})),o.apply(this,arguments)}function b(n,r){return K.apply(this,arguments)}function K(){return K=s()(i()().mark(function n(r,l){return i()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,d.request)("/api/admin/categories",a()({method:"POST",headers:{"Content-Type":"application/json"},data:r},l||{})));case 1:case"end":return p.stop()}},n)})),K.apply(this,arguments)}function g(n,r,l){return S.apply(this,arguments)}function S(){return S=s()(i()().mark(function n(r,l,D){return i()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,d.request)("/api/admin/categories/".concat(r),a()({method:"POST",headers:{"Content-Type":"application/json"},data:l},D||{})));case 1:case"end":return y.stop()}},n)})),S.apply(this,arguments)}function V(n,r,l){return P.apply(this,arguments)}function P(){return P=s()(i()().mark(function n(r,l,D){return i()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,d.request)("/api/admin/categories/".concat(r),a()({method:"DELETE",headers:{"Content-Type":"application/json"},data:l},D||{})));case 1:case"end":return y.stop()}},n)})),P.apply(this,arguments)}},81587:function(H,C,e){e.d(C,{l:function(){return x}});var x=function(O){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"-",m=O.toString().toLowerCase().trim(),s=[{to:"a",from:"[\xC0\xC1\xC2\xC3\xC5\xC6\u0100\u0102\u0104\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6]"},{to:"ae",from:"[\xC4]"},{to:"c",from:"[\xC7\u0106\u0108\u010C]"},{to:"d",from:"[\xD0\u010E\u0110\xDE]"},{to:"e",from:"[\xC8\xC9\xCA\xCB\u0112\u0114\u0116\u0118\u011A\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6]"},{to:"g",from:"[\u011C\u011E\u0122\u01F4]"},{to:"h",from:"[\u0124\u1E26]"},{to:"i",from:"[\xCC\xCD\xCE\xCF\u0128\u012A\u012E\u0130\u1EC8\u1ECA]"},{to:"j",from:"[\u0134]"},{to:"ij",from:"[\u0132]"},{to:"k",from:"[\u0136]"},{to:"l",from:"[\u0139\u013B\u013D\u0141]"},{to:"m",from:"[\u1E3E]"},{to:"n",from:"[\xD1\u0143\u0145\u0147]"},{to:"o",from:"[\xD2\xD3\xD4\xD5\xD8\u014C\u014E\u0150\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u01EA\u01EC\u01A0]"},{to:"oe",from:"[\u0152\xD6]"},{to:"p",from:"[\u1E55]"},{to:"r",from:"[\u0154\u0156\u0158]"},{to:"s",from:"[\u015A\u015C\u015E\u0160]"},{to:"ss",from:"[\xDF]"},{to:"t",from:"[\u0162\u0164]"},{to:"u",from:"[\xD9\xDA\xDB\u0168\u016A\u016C\u016E\u0170\u0172\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u01AF]"},{to:"ue",from:"[\xDC]"},{to:"w",from:"[\u1E82\u0174\u1E80\u1E84]"},{to:"x",from:"[\u1E8D]"},{to:"y",from:"[\xDD\u0176\u0178\u1EF2\u1EF4\u1EF6\u1EF8]"},{to:"z",from:"[\u0179\u017B\u017D]"},{to:"-",from:"[\xB7/_,:;']"}];return s.forEach(function(d){m=m.replace(new RegExp(d.from,"gi"),d.to)}),m=m.toString().toLowerCase().replace(/\s+/g,"-").replace(/&/g,"-and-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),typeof a!="undefined"&&a!=="-"&&(m=m.replace(/-/g,a)),m}}}]);
