(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{"F/zT":function(x,m,e){"use strict";var D=e("wx14"),E=e("VTBJ"),I=e("Ff2n"),o=e("q1tI"),j=e.n(o),A=e("adzw"),P=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],W=j.a.forwardRef(function(O,U){var T=O.fieldProps,R=O.unCheckedChildren,i=O.checkedChildren,f=O.proFieldProps,h=Object(I.a)(O,P);return j.a.createElement(A.a,Object(D.a)({valueType:"switch",mode:"edit",fieldProps:Object(E.a)({unCheckedChildren:R,checkedChildren:i},T),ref:U,valuePropName:"checked",proFieldProps:f,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},h))});m.a=W},"G/Ub":function(x,m,e){"use strict";e.d(m,"d",function(){return A}),e.d(m,"a",function(){return W}),e.d(m,"b",function(){return U}),e.d(m,"c",function(){return R}),e.d(m,"e",function(){return f});var D=e("k1fw"),E=e("9og8"),I=e("WmNS"),o=e.n(I),j=e("9kvl");function A(t){return P.apply(this,arguments)}function P(){return P=Object(E.a)(o.a.mark(function t(n){return o.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(j.f)("/api/admin/roles",Object(D.a)({method:"GET",useCache:!1},n||{})));case 1:case"end":return l.stop()}},t)})),P.apply(this,arguments)}function W(t,n){return O.apply(this,arguments)}function O(){return O=Object(E.a)(o.a.mark(function t(n,s){return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(j.f)("/api/admin/roles",Object(D.a)({method:"POST",headers:{"Content-Type":"application/json"},data:n},s||{})));case 1:case"end":return r.stop()}},t)})),O.apply(this,arguments)}function U(t,n){return T.apply(this,arguments)}function T(){return T=Object(E.a)(o.a.mark(function t(n,s){return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(j.f)("/api/admin/roles/".concat(n),Object(D.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},s||{})));case 1:case"end":return r.stop()}},t)})),T.apply(this,arguments)}function R(t,n){return i.apply(this,arguments)}function i(){return i=Object(E.a)(o.a.mark(function t(n,s){return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(j.f)("/api/admin/roles/".concat(n),Object(D.a)({method:"GET",useCache:!1},s||{})));case 1:case"end":return r.stop()}},t)})),i.apply(this,arguments)}function f(t,n,s){return h.apply(this,arguments)}function h(){return h=Object(E.a)(o.a.mark(function t(n,s,l){return o.a.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",Object(j.f)("/api/admin/roles/".concat(n),Object(D.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:s},l||{})));case 1:case"end":return b.stop()}},t)})),h.apply(this,arguments)}},JswA:function(x,m,e){"use strict";e.r(m);var D=e("tU7J"),E=e("wFql"),I=e("DYRE"),o=e("zeV3"),j=e("y8nQ"),A=e("Vl3Y"),P=e("+L6B"),W=e("2/Rp"),O=e("T2oS"),U=e("W9HT"),T=e("miYZ"),R=e("tsqr"),i=e("k1fw"),f=e("9og8"),h=e("tJVT"),t=e("WmNS"),n=e.n(t),s=e("q1tI"),l=e.n(s),r=e("VMEa"),b=e("Qurx"),K=e("F/zT"),J=e("tneF"),N=e("nhC9"),g=e("VK58"),$=e("hd5d"),Y=e("tMyG"),H=e("DBJ/"),Q=e("Jfn2"),X=e("Ty5D"),_=e("9kvl"),Z=e("G/Ub"),a=e("nKUr"),se=e.n(a);m.default=function(){var y,L=Object(_.i)(),k=Object(X.g)(),d=k.user,q=d==="new",ee=Object(s.useState)(),w=Object(h.a)(ee,2),B=w[0],G=w[1],ae=Object(s.useState)(),z=Object(h.a)(ae,2),V=z[0],te=z[1],F=Object(s.useCallback)(Object(f.a)(n.a.mark(function v(){var c;return n.a.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,Object(g.h)(Number(d));case 2:c=M.sent,c.success&&G(Object(i.a)(Object(i.a)({},c.data),{},{bio:c.data.bio||""}));case 4:case"end":return M.stop()}},v)})),[d]),ne=Object(s.useCallback)(Object(f.a)(n.a.mark(function v(){var c,p;return n.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Object(Z.d)();case 2:return c=u.sent,u.next=5,c;case 5:p=u.sent,p.success&&te(p.data);case 7:case"end":return u.stop()}},v)})),[d]);Object(s.useEffect)(function(){if(d==="new"){G({});return}F(),ne()},[d,F]);var re=Object(s.useMemo)(function(){return{onFinish:function(){var v=Object(f.a)(n.a.mark(function p(M){var u,S;return n.a.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(S=Object(i.a)(Object(i.a)({},M),{},{bio:M.bio?M.bio:void 0}),d!=="new"){C.next=8;break}return C.next=4,Object(g.a)(S);case 4:u=C.sent,u.success&&_.d.push("/users/".concat(u.data.id)),C.next=11;break;case 8:return C.next=10,Object(g.g)(Number(d),S);case 10:u=C.sent;case 11:R.default.success(u.message);case 12:case"end":return C.stop()}},p)}));function c(p){return v.apply(this,arguments)}return c}(),initialValues:B}},[B,d]);return B?Object(a.jsx)(Y.a,{title:q?Object(a.jsx)(_.a,{id:"new_user"}):Object(a.jsx)(_.a,{id:"edit_user"}),children:Object(a.jsx)(N.a,{children:Object(a.jsxs)(r.b,Object(i.a)(Object(i.a)({},re),{},{children:[Object(a.jsxs)(r.b.Group,{children:[Object(a.jsx)(b.a,{width:"md",name:"first_name",label:Object(a.jsx)(_.a,{id:"first_name"}),tooltip:Object(a.jsx)(_.a,{id:"first_name"}),placeholder:L.formatMessage({id:"first_name"}),required:!0}),Object(a.jsx)(b.a,{width:"md",name:"last_name",label:Object(a.jsx)(_.a,{id:"last_name"}),tooltip:Object(a.jsx)(_.a,{id:"last_name"}),placeholder:L.formatMessage({id:"last_name"}),required:!0}),Object(a.jsx)(b.a,{width:"md",name:"email",label:Object(a.jsx)(_.a,{id:"email"}),tooltip:Object(a.jsx)(_.a,{id:"email"}),placeholder:L.formatMessage({id:"email"}),required:!0}),Object(a.jsx)(b.a.Password,{width:"md",name:"password",label:Object(a.jsx)(_.a,{id:"password"}),tooltip:Object(a.jsx)(_.a,{id:"password"}),placeholder:L.formatMessage({id:"password"}),required:d==="new"}),d!=="new"&&Object(a.jsxs)(o.b,{direction:"vertical",children:[!((y=B.roles)!==null&&y!==void 0&&y.includes("admin"))&&Object(a.jsx)(K.a,{name:"email_verified",label:Object(a.jsx)(_.a,{id:"is_email_verified"})}),Object(a.jsx)(A.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(c){return c.getFieldValue("email_verified")?Object(a.jsx)(l.a.Fragment,{}):Object(a.jsx)(W.a,{size:"small",onClick:function(){Object(g.d)(c.getFieldValue("email")).then(function(){R.default.success(L.formatMessage({id:"email_resend"}))})},children:Object(a.jsx)(_.a,{id:"resend"})})}})]}),Object(a.jsx)(K.a,{name:"is_active",label:Object(a.jsx)(_.a,{id:"is_active"})}),V&&Object(a.jsx)(J.a.Group,{name:"roles",layout:"horizontal",label:Object(a.jsx)(_.a,{id:"roles"}),options:V.map(function(v){return v.name})})]}),Object(a.jsx)(r.b.Item,{name:"bio",label:Object(a.jsx)(_.a,{id:"bio"}),tooltip:Object(a.jsx)(_.a,{id:"bio_tooltip"}),valuePropName:"value",children:Object(a.jsx)($.a,{directory:"users/".concat(d,"/wysiwyg")})}),d!=="new"&&Object(a.jsxs)(r.b.Group,{children:[Object(a.jsx)(r.b.Item,{name:"avatar",label:Object(a.jsx)(_.a,{id:"avatar"}),children:B.path_avatar?Object(a.jsx)(Q.a,{path:B.path_avatar,size:600,width:200}):Object(a.jsx)(E.a,{children:Object(a.jsx)(_.a,{id:"avatar_placeholder"})})}),Object(a.jsx)(A.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){return Object(a.jsx)(H.a,{wrapInForm:!1,url:"/api/admin/users/".concat(d,"/avatar"),name:"avatar",accept:"image/*",onChange:function(p){p.file.status==="done"&&p.file.response.success&&F()}})}})]})]}))})}):Object(a.jsx)(U.a,{})}},tneF:function(x,m,e){"use strict";var D=e("sRBo"),E=e("kaz8"),I=e("wx14"),o=e("VTBJ"),j=e("Ff2n"),A=e("q1tI"),P=e.n(A),W=e("adzw"),O=e("uX+g"),U=e("WFLz"),T=["options","fieldProps","proFieldProps","valueEnum"],R=P.a.forwardRef(function(t,n){var s=t.options,l=t.fieldProps,r=t.proFieldProps,b=t.valueEnum,K=Object(j.a)(t,T);return P.a.createElement(W.a,Object(I.a)({ref:n,valueType:"checkbox",mode:"edit",valueEnum:Object(O.a)(b,void 0),fieldProps:Object(o.a)({options:s},l),proFieldProps:r},K))}),i=P.a.forwardRef(function(t,n){var s=t.fieldProps,l=t.children;return P.a.createElement(E.a,Object(I.a)({ref:n},s),l)}),f=Object(U.a)(i,{valuePropName:"checked"}),h=f;h.Group=R,m.a=h}}]);
