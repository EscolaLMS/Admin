(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"3fxf":function(F,d,t){"use strict";var u=t("DjyN"),M=t("NUBc"),h=t("Mwp2"),E=t("VXEj"),b=t("+L6B"),O=t("2/Rp"),j=t("5NDa"),g=t("5rEg"),A=t("KQm4"),n=t("VTBJ"),C=t("ODXe"),x=t("DYRE"),U=t("zeV3"),l=t("tU7J"),c=t("wFql"),o=t("q1tI"),m=t.n(o),r=t("BAh9"),S=t("/MfK"),v=t("mAF4"),z=t("dF/Y"),B=t("9kvl"),V=t("DBJ/"),y=t("lLVY"),nt=t.n(y),a=t("nKUr"),at=t.n(a),N=function(I){var R=I.directory,L=I.onUploaded;return Object(a.jsxs)(U.b,{align:"start",children:[Object(a.jsxs)(c.a.Text,{children:[Object(a.jsx)(B.a,{id:"pages.files.filesBrowser"}),Object(a.jsx)(c.a.Text,{code:!0,children:R})]}),Object(a.jsx)(V.a,{url:"/api/admin/file/upload",name:"file[]",data:{target:R},onUpload:function(W){W.success&&L(R,W.data)}})]})},X=function(I){var R=I.defaultDirectory,L=R===void 0?"/":R,T=I.onFile,W=I.hideDeleteBtn,Z=W===void 0?!1:W,Y=I.forceLoading,w=Y===void 0?!1:Y,k=Object(B.i)(),q=Object(o.useState)({loading:!1,name:"",directory:L,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),G=Object(C.a)(q,2),i=G[0],$=G[1],p=Object(o.useRef)(),D=Object(o.useCallback)(function(s){$(function(e){return Object(n.a)(Object(n.a)({},e),{},{loading:s})})},[]),Q=Object(o.useCallback)(function(s,e){$(function(_){return Object(n.a)(Object(n.a)(Object(n.a)({},_),s.data),{},{data:[{url:e.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(A.a)(s.data.data.map(function(f){return Object(n.a)(Object(n.a)({},f),{},{url:f.mime==="directory"?"".concat(e,"/").concat(f.name):f.url})}))).filter(function(f){return e==="/"||e===L?f.name!=="..":!0}),directory:e,loading:!1})})},[D]),P=Object(o.useCallback)(function(s){var e,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,f=function(){return p.current&&p.current.abort()};return f(),p.current=new AbortController,D(!0),Object(r.a)({directory:s,page:_},{signal:(e=p.current)===null||e===void 0?void 0:e.signal}).then(function(K){K.success&&Q(K,s)}).catch(function(){return D(!1)}),function(){f()}},[D]);Object(o.useEffect)(function(){return P(L)},[L,P]);var tt=Object(o.useCallback)(function(s){D(!0),Object(r.c)(s).then(function(){P(i.directory)}).catch(function(){D(!1)})},[P,D,i.directory]),et=Object(o.useCallback)(function(s,e){var _,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,K=function(){return p.current&&p.current.abort()};return K(),p.current=new AbortController,D(!0),Object(r.b)({directory:s,name:e,page:f},{signal:(_=p.current)===null||_===void 0?void 0:_.signal}).then(function(J){J.success&&Q(J,s)}).catch(function(){return D(!1)}),function(){K()}},[D]);return Object(a.jsxs)("div",{className:"file-browser",children:[Object(a.jsxs)("div",{className:"file-browser__header",children:[Object(a.jsx)(g.a,{placeholder:k.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(e){return $(function(_){return Object(n.a)(Object(n.a)({},_),{},{name:e.target.value})})},value:i.name}),Object(a.jsxs)("div",{children:[Object(a.jsx)(O.a,{className:"file-browser__button",onClick:function(){return P(i.directory)},children:Object(a.jsx)(B.a,{id:"reset"})}),Object(a.jsx)(O.a,{className:"file-browser__button",type:"primary",onClick:function(){return et(i.directory,i.name)},children:Object(a.jsx)(B.a,{id:"query"})})]})]}),Object(a.jsx)(E.b,{loading:i.loading||w,size:"small",itemLayout:"horizontal",dataSource:i.data,header:Object(a.jsx)(N,{directory:i.directory,onUploaded:function(e,_){_&&(P(e),T&&T(_,e))}}),footer:Object(a.jsx)(N,{directory:i.directory,onUploaded:function(e,_){P(e),_&&T&&T(_,e)}}),renderItem:function(e){return Object(a.jsx)(E.b.Item,{actions:e.mime!=="directory"&&!Z?[Object(a.jsx)(O.a,{type:"default",danger:!0,icon:Object(a.jsx)(S.a,{}),size:"small",onClick:function(){return tt(e.url)}},"dir")]:[],children:Object(a.jsx)(E.b.Item.Meta,{avatar:e.mime==="directory"?Object(a.jsx)(O.a,{type:"primary",icon:Object(a.jsx)(v.a,{}),size:"small",onClick:function(){return P(e.url)}}):Object(a.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",children:Object(a.jsx)(O.a,{type:"default",icon:Object(a.jsx)(z.a,{}),size:"small"})}),description:Object(a.jsx)(m.a.Fragment,{children:Object(a.jsx)(O.a,{type:"text",size:"small",onClick:function(){return e.mime==="directory"?P(e.url):T&&T(e,i.directory)},children:e.name})})})})}}),Object(a.jsx)(M.a,{pageSizeOptions:[],current:i.current_page,total:i.total,pageSize:i.per_page,onChange:function(e){return P(i.directory,e)}})]})};d.a=X},BAh9:function(F,d,t){"use strict";t.d(d,"a",function(){return b}),t.d(d,"b",function(){return j}),t.d(d,"e",function(){return A}),t.d(d,"d",function(){return C}),t.d(d,"c",function(){return x});var u=t("x+uP"),M=t("VTBJ"),h=t("HaE+"),E=t("9kvl");function b(l,c){return O.apply(this,arguments)}function O(){return O=Object(h.a)(Object(u.a)().mark(function l(c,o){return Object(u.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(E.f)("/api/admin/file/list",Object(M.a)({method:"GET",params:c},o||{})));case 1:case"end":return r.stop()}},l)})),O.apply(this,arguments)}function j(l,c){return g.apply(this,arguments)}function g(){return g=Object(h.a)(Object(u.a)().mark(function l(c,o){return Object(u.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(E.f)("/api/admin/file/find",Object(M.a)({method:"GET",params:c},o||{})));case 1:case"end":return r.stop()}},l)})),g.apply(this,arguments)}function A(l,c,o){return n.apply(this,arguments)}function n(){return n=Object(h.a)(Object(u.a)().mark(function l(c,o,m){var r;return Object(u.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return r=new FormData,r.append("file[]",c),r.append("target",o),v.abrupt("return",Object(E.f)("/api/admin/file/upload",Object(M.a)({method:"POST",data:r},m||{})));case 4:case"end":return v.stop()}},l)})),n.apply(this,arguments)}var C=function(c){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/images/img?path=").concat(c,"&w=").concat(o)};function x(l,c){return U.apply(this,arguments)}function U(){return U=Object(h.a)(Object(u.a)().mark(function l(c,o){return Object(u.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(E.f)("/api/admin/file/delete",Object(M.a)({method:"DELETE",data:{url:c}},o||{})));case 1:case"end":return r.stop()}},l)})),U.apply(this,arguments)}},"DBJ/":function(F,d,t){"use strict";var u=t("VTBJ"),M=t("y8nQ"),h=t("Vl3Y"),E=t("etVw"),b=t("9kvl"),O=t("qFDU"),j=t("nKUr"),g=t.n(j);function A(n){var C=n.onChange,x=n.onUpload,U=n.url,l=n.name,c=n.extra,o=n.accept,m=n.data,r=n.wrapInForm,S=r===void 0?!0:r,v=n.title,z=n.formProps,B=Object(b.i)();return m&&m[l]&&delete m[l],Object(j.jsx)(O.a,{condition:S,wrap:function(y){return Object(j.jsx)(h.a,Object(u.a)(Object(u.a)({},z),{},{children:y}))},children:Object(j.jsx)(E.a,{title:v||" ".concat(B.formatMessage({id:"upload_click_here"})),placeholder:B.formatMessage({id:"upload_click_here"}),onChange:function(y){C&&C(y),y.file.status==="done"&&x&&x(y.file.response)},label:Object(j.jsx)(b.a,{id:"upload"}),max:2,fieldProps:{data:m,accept:o,name:l,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(U),extra:c})})}d.a=A},lLVY:function(F,d,t){},u4ym:function(F,d,t){"use strict";t.r(d);var u=t("IzEo"),M=t("bx4M"),h=t("tU7J"),E=t("wFql"),b=t("q1tI"),O=t.n(b),j=t("tMyG"),g=t("9kvl"),A=t("3fxf"),n=t("nKUr"),C=t.n(n);d.default=function(){return Object(n.jsx)(j.a,{children:Object(n.jsxs)(M.a,{children:[Object(n.jsx)(E.a.Text,{strong:!0,children:Object(n.jsx)(g.a,{id:"pages.files.content"})}),Object(n.jsx)(A.a,{})]})})}}}]);
