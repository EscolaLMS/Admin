(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{Z1IU:function(S,p,e){"use strict";e.r(p);var x=e("miYZ"),h=e("tsqr"),r=e("qLMh"),m=e("k1fw"),n=e("9og8"),j=e("tJVT"),A=e("fOrg"),u=e("+KLJ"),B=e("cJ7L"),R=e("FY4R"),P=e("q1tI"),F=e.n(P),D=e("VMEa"),f=e("Qurx"),C=e("tneF"),d=e("9kvl"),l=e("o36P"),v=e("+up7"),E=e("YRYj"),b=e("rZsG"),L=e.n(b),s=e("nZnz"),I=e("PIu2"),t=e("nKUr"),w=e.n(t),y=function(M){var $=M.content;return Object(t.jsx)(u.a,{style:{marginBottom:24},message:$,type:"error",showIcon:!0})},U=function(){var M=Object(P.useState)(!1),$=Object(j.a)(M,2),Y=$[0],G=$[1],Q=Object(P.useState)(),Z=Object(j.a)(Q,2),J=Z[0],X=Z[1],k=Object(d.m)("@@initialState"),K=k.initialState,q=k.setInitialState,ee=Object(P.useState)(!1),V=Object(j.a)(ee,2),N=V[0],H=V[1],z=Object(d.l)(),ae=function(){var O=Object(n.a)(Object(r.a)().mark(function i(){var _,c,o,W;return Object(r.a)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,K==null||(_=K.fetchUserInfo)===null||_===void 0?void 0:_.call(K);case 2:return c=g.sent,g.next=5,Object(v.g)({per_page:-1});case 5:return o=g.sent,g.next=8,Object(E.a)();case 8:W=g.sent,c&&q(Object(m.a)(Object(m.a)({},K),{},{currentUser:c,config:o.success?o.data:[],packages:W.success?W.data:{}}));case 10:case"end":return g.stop()}},i)}));return function(){return O.apply(this,arguments)}}(),te=function(){var O=Object(n.a)(Object(r.a)().mark(function i(_){var c,o;return Object(r.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(l.b)(Object(m.a)({},_));case 3:if(c=a.sent,!c.success){a.next=11;break}return localStorage.setItem("TOKEN",c.data.token),Object(I.a)(),a.next=9,ae();case 9:return h.b.success(c.message),a.abrupt("return");case 11:X(c),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(0),h.b.error((a.t0===null||a.t0===void 0||(o=a.t0.data)===null||o===void 0?void 0:o.message)||"Error");case 17:return a.prev=17,G(!1),a.finish(17);case 20:case"end":return a.stop()}},i,null,[[0,14,17,20]])}));return function(_){return O.apply(this,arguments)}}(),re=function(){var O=Object(n.a)(Object(r.a)().mark(function i(_){var c,o;return Object(r.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(l.a)(Object(m.a)({},_));case 3:if(c=a.sent,!c.success){a.next=7;break}return h.b.success(c.message),a.abrupt("return");case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),h.b.error((a.t0===null||a.t0===void 0||(o=a.t0.data)===null||o===void 0?void 0:o.message)||"Error");case 12:return a.prev=12,G(!1),a.finish(12);case 15:case"end":return a.stop()}},i,null,[[0,9,12,15]])}));return function(_){return O.apply(this,arguments)}}(),se=function(){var O=Object(n.a)(Object(r.a)().mark(function i(_){return Object(r.a)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:G(!0),"password"in _?te(_):re(Object(m.a)(Object(m.a)({},_),{},{return_url:"".concat(window.location.origin,"/#/user/reset-password")}));case 2:case"end":return o.stop()}},i)}));return function(_){return O.apply(this,arguments)}}();return Object(t.jsx)(s.a,{children:Object(t.jsxs)(D.a,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:N?z.formatMessage({id:"send",defaultMessage:"send"}):z.formatMessage({id:"pages.login.submit",defaultMessage:"submit"})},render:function(i,_){return _.pop()},submitButtonProps:{loading:Y,size:"large",style:{width:"100%"}}},onFinish:function(){var O=Object(n.a)(Object(r.a)().mark(function i(_){return Object(r.a)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:se(_);case 1:case"end":return o.stop()}},i)}));return function(i){return O.apply(this,arguments)}}(),children:[J&&!J.success&&Object(t.jsx)(y,{content:z.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\uFF08admin/ant.design)"})}),Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(f.a,{name:"email",fieldProps:{size:"large",prefix:Object(t.jsx)(B.a,{className:L.a.prefixIcon})},rules:[{required:!0,message:Object(t.jsx)(d.a,{id:"pages.login.username.required",defaultMessage:"required!"})}]}),!N&&Object(t.jsx)(f.a.Password,{name:"password",fieldProps:{size:"large",prefix:Object(t.jsx)(R.a,{className:L.a.prefixIcon})},rules:[{required:!0,message:Object(t.jsx)(d.a,{id:"pages.login.password.required",defaultMessage:"required"})}]})]}),Object(t.jsxs)("div",{style:{marginBottom:24},children:[N?Object(t.jsx)("a",{onClick:function(i){i.preventDefault(),H(!1)},children:Object(t.jsx)(d.a,{id:"back",defaultMessage:"back"})}):Object(t.jsx)(C.a,{noStyle:!0,name:"remember_me",children:Object(t.jsx)(d.a,{id:"pages.login.rememberMe",defaultMessage:"rememberMe"})}),!N&&Object(t.jsx)("a",{style:{float:"right"},onClick:function(i){i.preventDefault(),H(!0)},children:Object(t.jsx)(d.a,{id:"pages.login.forgotPassword",defaultMessage:"forgotPassword"})})]})]})})};p.default=U},nZnz:function(S,p,e){"use strict";var x=e("q1tI"),h=e.n(x),r=e("CwrG"),m=e("rZsG"),n=e.n(m),j=e("9kvl"),A=e("55Ip"),u=e("nKUr"),B=e.n(u),R=function(F){var D,f,C,d,l,v,E,b=F.children,L=Object(j.m)("@@initialState"),s=L.initialState,I=(D=s==null||(f=s.publicConfig)===null||f===void 0||(C=f.global)===null||C===void 0?void 0:C.showLoginBackgroundImage)!==null&&D!==void 0?D:!0,t=s==null||(d=s.publicConfig)===null||d===void 0||(l=d.global)===null||l===void 0?void 0:l.loginHeaderFontColor,w=s==null||(v=s.publicConfig)===null||v===void 0||(E=v.global)===null||E===void 0?void 0:E.loginHeaderBackgroundColor,y=Object(x.useMemo)(function(){var U,T,M=s==null||(U=s.publicConfig)===null||U===void 0||(T=U.global)===null||T===void 0?void 0:T.logoLogin;return M?M.includes("http")?M:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/storage").concat(M):""},[s==null?void 0:s.publicConfig]);return Object(u.jsxs)("div",{className:"".concat(n.a.container," ").concat(I?n.a["background-image"]:""),children:[Object(u.jsxs)("header",{className:n.a.header,style:{backgroundColor:w,color:t},children:[Object(u.jsx)("div",{className:n.a.lang,children:j.b&&Object(u.jsx)(j.b,{})}),Object(u.jsx)("div",{className:n.a["logo-wrapper"],children:Object(u.jsx)(A.a,{to:"/",children:Object(u.jsx)("img",{alt:"logo",className:y?n.a["custom-logo"]:n.a.logo,src:y||"/logo.svg"})})})]}),Object(u.jsx)("main",{className:n.a.main,children:b}),Object(u.jsx)(r.a,{})]})};p.a=R},rZsG:function(S,p,e){S.exports={container:"container___2MqLM",lang:"lang___GQeBj","background-image":"background-image___3WSx0","logo-wrapper":"logo-wrapper___V8scu",header:"header___2LHxh","custom-logo":"custom-logo___HBLG3",logo:"logo___3MAcQ",title:"title___3Wr7O",desc:"desc___22Mec",main:"main___1ht25",icon:"icon___ki6v1",other:"other___3NR7b",register:"register___1-tB1",prefixIcon:"prefixIcon___2LycM"}},tneF:function(S,p,e){"use strict";var x=e("sRBo"),h=e("kaz8"),r=e("VTBJ"),m=e("Ff2n"),n=e("nKUr"),j=e.n(n),A=e("uX+g"),u=e("q1tI"),B=e.n(u),R=e("WFLz"),P=e("adzw"),F=["options","fieldProps","proFieldProps","valueEnum"],D=B.a.forwardRef(function(l,v){var E=l.options,b=l.fieldProps,L=l.proFieldProps,s=l.valueEnum,I=Object(m.a)(l,F);return Object(n.jsx)(P.a,Object(r.a)({ref:v,valueType:"checkbox",valueEnum:Object(A.a)(s,void 0),fieldProps:Object(r.a)({options:E},b),lightProps:Object(r.a)({labelFormatter:function(){return Object(n.jsx)(P.a,Object(r.a)({ref:v,valueType:"checkbox",mode:"read",valueEnum:Object(A.a)(s,void 0),filedConfig:{customLightMode:!0},fieldProps:Object(r.a)({options:E},b),proFieldProps:L},I))}},I.lightProps),proFieldProps:L},I))}),f=B.a.forwardRef(function(l,v){var E=l.fieldProps,b=l.children;return Object(n.jsx)(h.a,Object(r.a)(Object(r.a)({ref:v},E),{},{children:b}))}),C=Object(R.a)(f,{valuePropName:"checked"}),d=C;d.Group=D,p.a=d}}]);
