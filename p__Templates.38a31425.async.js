(window.webpackJsonp=window.webpackJsonp||[]).push([[36,15],{"9A0E":function(B,m,e){"use strict";e.r(m),e.d(m,"channelType",function(){return v});var r=e("q1tI"),a=e("Ty5D"),s=e("9kvl"),p=e("tMyG"),u=e("nhC9"),z=e("P2fV"),F=e("NJEC"),te=e("5Dmo"),I=e("3S7+"),K=e("+L6B"),Y=e("2/Rp"),A=e("qLMh"),de=e("miYZ"),E=e("tsqr"),ae=e("9og8"),C=e("tJVT"),ne=e("xvlK"),U=e("G3dp"),L=e("/MfK"),T=e("55Ip"),ue=e("sWYD"),W=e("Qiat"),o=e("rWUb"),i=e("mGZj"),t=e("nKUr"),h=function(H){var X=H.templateType,je=H.channel,M=Object(r.useRef)(),Le=Object(s.j)(),ge=Object(r.useState)(!1),be=Object(C.a)(ge,2),De=be[0],D=be[1],ye=[{title:Object(t.jsx)(s.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0},{title:Object(t.jsx)(s.a,{id:"created_at",defaultMessage:"created_at"}),dataIndex:"created_at",hideInSearch:!0,render:function(g,x){return x.created_at&&Object(ue.a)(new Date(x.created_at),i.a)}},{title:Object(t.jsx)(s.a,{id:"name",defaultMessage:"name"}),dataIndex:"name",hideInSearch:!0},{title:Object(t.jsx)(s.a,{id:"event",defaultMessage:"event"}),dataIndex:"event",hideInSearch:!0},{title:Object(t.jsx)(s.a,{id:"templates.is_default"}),dataIndex:"default",hideInSearch:!0,render:function(g,x){return x.default&&Object(t.jsx)(s.a,{id:"yes"})}}],xe=Object(r.useCallback)(function(){var R=Object(ae.a)(Object(A.a)().mark(function g(x){var J,n;return Object(A.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return D(!0),J=E.b.loading(Object(t.jsx)(s.a,{id:"loading",defaultMessage:"loading"})),c.prev=2,c.next=5,Object(o.b)(x).then(function(j){D(!1),j.success&&E.b.success(j.message)});case 5:return J(),D(!1),(n=M.current)===null||n===void 0||n.reload(),c.abrupt("return",!0);case 11:return c.prev=11,c.t0=c.catch(2),J(),E.b.error(Object(t.jsx)(s.a,{id:"error",defaultMessage:"error"})),D(!1),c.abrupt("return",!1);case 17:case"end":return c.stop()}},g,null,[[2,11]])}));return function(g){return R.apply(this,arguments)}}(),[M]);return Object(t.jsx)(W.a,{headerTitle:Le.formatMessage({id:"templates",defaultMessage:"templates"}),loading:De,actionRef:M,rowKey:"id",search:!1,toolBarRender:function(){return[Object(t.jsx)(T.a,{to:"/configuration/templates/".concat(X,"/new"),children:Object(t.jsxs)(Y.a,{type:"primary",children:[Object(t.jsx)(ne.a,{})," ",Object(t.jsx)(s.a,{id:"new",defaultMessage:"new"})]},"primary")},"new")]},request:function(g){var x=g.pageSize,J=g.current;return D(!0),Object(o.e)({pageSize:x,current:J,channel:je}).then(function(n){return n.success?(D(!1),{data:n.data,total:n.meta.total,success:!0}):[]})},columns:[].concat(ye,[{hideInSearch:!0,title:Object(t.jsx)(s.a,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",render:function(g,x){return[Object(t.jsx)(T.a,{to:"/configuration/templates/".concat(X,"/").concat(x.id),children:Object(t.jsx)(I.a,{title:Object(t.jsx)(s.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(Y.a,{type:"primary",icon:Object(t.jsx)(U.a,{})})})},"edit"),Object(t.jsx)(F.a,{title:Object(t.jsx)(s.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:function(){return xe(x.id)},okText:Object(t.jsx)(s.a,{id:"yes"}),cancelText:Object(t.jsx)(s.a,{id:"no"}),children:Object(t.jsx)(I.a,{title:Object(t.jsx)(s.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(Y.a,{type:"primary",icon:Object(t.jsx)(L.a,{}),danger:!0})})},"delete")]}}])})},l=h,v;(function(Q){Q.email="EscolaLms\\TemplatesEmail\\Core\\EmailChannel",Q.pdf="EscolaLms\\TemplatesPdf\\Core\\PdfChannel",Q.sms="EscolaLms\\TemplatesSms\\Core\\SmsChannel"})(v||(v={}));var pe=function(){var H=Object(a.l)(),X=H.template;return Object(t.jsx)(p.a,{children:Object(t.jsxs)(u.a,{tabs:{type:"card",activeKey:X,onChange:function(M){return s.e.push("/configuration/templates/".concat(M))}},children:[Object(t.jsx)(u.a.TabPane,{tab:Object(t.jsx)(s.a,{id:"email"}),children:Object(t.jsx)(l,{templateType:"email",channel:v.email})},"email"),Object(t.jsx)(u.a.TabPane,{tab:Object(t.jsx)(s.a,{id:"PDF"}),children:Object(t.jsx)(l,{templateType:"pdf",channel:v.pdf})},"pdf"),Object(t.jsx)(u.a.TabPane,{disabled:!0,tab:Object(t.jsx)("span",{children:Object(t.jsx)(s.a,{id:"Push"})}),children:"Push"},"Push"),Object(t.jsx)(u.a.TabPane,{tab:Object(t.jsx)("span",{children:Object(t.jsx)(s.a,{id:"SMS"})}),children:Object(t.jsx)(l,{templateType:"sms",channel:v.sms})},"sms")]})})},Ae=m.default=pe},S76h:function(B,m,e){},VzZb:function(B,m,e){},"aK+R":function(B,m,e){},df8c:function(B,m,e){},nhC9:function(B,m,e){"use strict";var r=e("VTBJ"),a=e("nKUr"),s=e("Znn+"),p=e("ZTPi"),u=e("rePB"),z=e("U8pU"),F=e("ODXe"),te=e("GNNt"),I=e("wEI+"),K=e("Ff2n"),Y=e("1GLa"),A=e("TLLU"),de=e("UESt"),E=e("YSkC"),ae=e("TSYQ"),C=e.n(ae),ne=e("BGR+"),U=e("6cGi"),L=e("q1tI"),T=e.n(L),ue=e("S76h"),W=function(b){var c=b.actions,j=b.prefixCls;return Array.isArray(c)&&(c==null?void 0:c.length)?Object(a.jsx)("ul",{className:"".concat(j,"-actions"),children:c.map(function(P,V){return Object(a.jsx)("li",{style:{width:"".concat(100/c.length,"%")},children:Object(a.jsx)("span",{children:P})},"action-".concat(V))})}):c?Object(a.jsx)("ul",{className:"".concat(j,"-actions"),children:c}):null},o=W,i=e("jCWc"),t=e("kPKH"),h=e("14J3"),l=e("BMrR"),v=e("aK+R"),pe=function(b){var c=b.style,j=b.prefix;return Object(a.jsxs)("div",{className:"".concat(j,"-loading-content"),style:c,children:[Object(a.jsx)(l.a,{gutter:8,children:Object(a.jsx)(t.a,{span:22,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})})}),Object(a.jsxs)(l.a,{gutter:8,children:[Object(a.jsx)(t.a,{span:8,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})}),Object(a.jsx)(t.a,{span:15,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})})]}),Object(a.jsxs)(l.a,{gutter:8,children:[Object(a.jsx)(t.a,{span:6,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})}),Object(a.jsx)(t.a,{span:18,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})})]}),Object(a.jsxs)(l.a,{gutter:8,children:[Object(a.jsx)(t.a,{span:13,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})}),Object(a.jsx)(t.a,{span:9,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})})]}),Object(a.jsxs)(l.a,{gutter:8,children:[Object(a.jsx)(t.a,{span:4,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})}),Object(a.jsx)(t.a,{span:3,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})}),Object(a.jsx)(t.a,{span:16,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})})]})]})},Ae=pe,Q=e("df8c"),H=["className","style","bodyStyle","headStyle","title","subTitle","extra","tip","wrap","layout","loading","gutter","tooltip","split","headerBordered","bordered","children","size","actions","ghost","hoverable","direction","collapsed","collapsible","collapsibleIconRender","defaultCollapsed","onCollapse","checked","onChecked","tabs","type"],X=A.a.useBreakpoint,je=T.a.forwardRef(function(n,b){var c,j,P,V=n.className,w=n.style,k=n.bodyStyle,$=k===void 0?{}:k,q=n.headStyle,Ce=q===void 0?{}:q,ve=n.title,Te=n.subTitle,re=n.extra,Pe=n.tip,me=n.wrap,Xe=me===void 0?!1:me,we=n.layout,ce=n.loading,Re=n.gutter,ke=Re===void 0?0:Re,qe=n.tooltip,le=n.split,$e=n.headerBordered,_e=$e===void 0?!1:$e,Ge=n.bordered,et=Ge===void 0?!1:Ge,Be=n.children,ze=n.size,tt=n.actions,Ke=n.ghost,at=Ke===void 0?!1:Ke,Ue=n.hoverable,nt=Ue===void 0?!1:Ue,rt=n.direction,We=n.collapsed,Je=n.collapsible,ct=Je===void 0?!1:Je,Ve=n.collapsibleIconRender,Ze=n.defaultCollapsed,lt=Ze===void 0?!1:Ze,st=n.onCollapse,it=n.checked,Se=n.onChecked,Ne=n.tabs,Ee=n.type,se=Object(K.a)(n,H),ot=Object(L.useContext)(I.a.ConfigContext),dt=ot.getPrefixCls,Fe=X(),ut=Object(U.a)(lt,{value:We,onChange:st}),Ye=Object(F.a)(ut,2),Oe=Ye[0],jt=Ye[1],he=["xxl","xl","lg","md","sm","xs"],bt=function(f){var O=[0,0],S=Array.isArray(f)?f:[f,0];return S.forEach(function(N,Z){if(Object(z.a)(N)==="object")for(var G=0;G<he.length;G+=1){var oe=he[G];if(Fe[oe]&&N[oe]!==void 0){O[Z]=N[oe];break}}else O[Z]=N||0}),O},ie=function(f,O){return f?O:{}},vt=function(f){var O=f;if(Object(z.a)(f)==="object")for(var S=0;S<he.length;S+=1){var N=he[S];if(Fe[N]&&f[N]!==void 0){O=f[N];break}}var Z=ie(typeof O=="string"&&/\d%|\dpx/i.test(O),{width:O,flexShrink:0});return{span:O,colSpanStyle:Z}},d=dt("pro-card"),mt=bt(ke),Qe=Object(F.a)(mt,2),_=Qe[0],ee=Qe[1],Me=!1,Ie=T.a.Children.toArray(Be),Ot=Ie.map(function(y,f){var O;if(y==null||(O=y.type)===null||O===void 0?void 0:O.isProCard){var S;Me=!0;var N=y.props.colSpan,Z=vt(N),G=Z.span,oe=Z.colSpanStyle,gt=C()(["".concat(d,"-col")],(S={},Object(u.a)(S,"".concat(d,"-split-vertical"),le==="vertical"&&f!==Ie.length-1),Object(u.a)(S,"".concat(d,"-split-horizontal"),le==="horizontal"&&f!==Ie.length-1),Object(u.a)(S,"".concat(d,"-col-").concat(G),typeof G=="number"&&G>=0&&G<=24),S));return Object(a.jsx)("div",{style:Object(r.a)(Object(r.a)(Object(r.a)({},oe),ie(_>0,{paddingRight:_/2,paddingLeft:_/2})),ie(ee>0,{paddingTop:ee/2,paddingBottom:ee/2})),className:gt,children:T.a.cloneElement(y)},"pro-card-col-".concat((y==null?void 0:y.key)||f))}return y}),ht=C()("".concat(d),V,(c={},Object(u.a)(c,"".concat(d,"-border"),et),Object(u.a)(c,"".concat(d,"-contain-card"),Me),Object(u.a)(c,"".concat(d,"-loading"),ce),Object(u.a)(c,"".concat(d,"-split"),le==="vertical"||le==="horizontal"),Object(u.a)(c,"".concat(d,"-ghost"),at),Object(u.a)(c,"".concat(d,"-hoverable"),nt),Object(u.a)(c,"".concat(d,"-size-").concat(ze),ze),Object(u.a)(c,"".concat(d,"-type-").concat(Ee),Ee),Object(u.a)(c,"".concat(d,"-collapse"),Oe),Object(u.a)(c,"".concat(d,"-checked"),it),c)),ft=C()("".concat(d,"-body"),(j={},Object(u.a)(j,"".concat(d,"-body-center"),we==="center"),Object(u.a)(j,"".concat(d,"-body-direction-column"),le==="horizontal"||rt==="column"),Object(u.a)(j,"".concat(d,"-body-wrap"),Xe&&Me),j)),pt=Object(r.a)(Object(r.a)(Object(r.a)({},ie(_>0,{marginRight:-_/2,marginLeft:-_/2})),ie(ee>0,{marginTop:-ee/2,marginBottom:-ee/2})),$),He=T.a.isValidElement(ce)?ce:Object(a.jsx)(Ae,{prefix:d,style:$.padding===0||$.padding==="0px"?{padding:24}:void 0}),fe=ct&&We===void 0&&(Ve?Ve({collapsed:Oe}):Object(a.jsx)(de.a,{rotate:Oe?void 0:90,className:"".concat(d,"-collapsible-icon")}));return Object(a.jsxs)("div",Object(r.a)(Object(r.a)({className:ht,style:w,ref:b,onClick:function(f){var O;Se==null||Se(f),se==null||(O=se.onClick)===null||O===void 0||O.call(se,f)}},Object(ne.a)(se,["prefixCls","colSpan"])),{},{children:[(ve||re||fe)&&Object(a.jsxs)("div",{className:C()("".concat(d,"-header"),(P={},Object(u.a)(P,"".concat(d,"-header-border"),_e||Ee==="inner"),Object(u.a)(P,"".concat(d,"-header-collapsible"),fe),P)),style:Ce,onClick:function(){fe&&jt(!Oe)},children:[Object(a.jsxs)("div",{className:"".concat(d,"-title"),children:[fe,Object(a.jsx)(E.a,{label:ve,tooltip:qe||Pe,subTitle:Te})]}),re&&Object(a.jsx)("div",{className:"".concat(d,"-extra"),children:re})]}),Ne?Object(a.jsx)("div",{className:"".concat(d,"-tabs"),children:Object(a.jsx)(p.a,Object(r.a)(Object(r.a)({onChange:Ne.onChange},Ne),{},{children:ce?He:Be}))}):Object(a.jsx)("div",{className:ft,style:pt,children:ce?He:Ot}),Object(a.jsx)(o,{actions:tt,prefixCls:d})]}))}),M=je,Le=e("u1OI"),ge=function(b){var c=Object(L.useContext)(I.a.ConfigContext),j=c.getPrefixCls,P=j("pro-card-divider"),V=b.className,w=b.style,k=w===void 0?{}:w,$=b.type,q=C()(P,V,Object(u.a)({},"".concat(P,"-").concat($),$));return Object(a.jsx)("div",{className:q,style:k})},be=ge,De=e("VzZb"),D=["key","tab","tabKey","disabled","destroyInactiveTabPane","children","className","style","cardProps"],ye=function(b){var c=b.key,j=b.tab,P=b.tabKey,V=b.disabled,w=b.destroyInactiveTabPane,k=b.children,$=b.className,q=b.style,Ce=b.cardProps,ve=Object(K.a)(b,D),Te=Object(L.useContext)(I.a.ConfigContext),re=Te.getPrefixCls,Pe=re("pro-card-tabpane"),me=C()(Pe,$);return Object(a.jsx)(p.a.TabPane,Object(r.a)(Object(r.a)({tabKey:P,tab:j,className:me,style:q,disabled:V,destroyInactiveTabPane:w},ve),{},{children:Object(a.jsx)(M,Object(r.a)(Object(r.a)({},Ce),{},{children:k}))}),c)},xe=ye,R=function(b){return Object(a.jsx)(M,Object(r.a)({bodyStyle:{padding:0}},b))},g=M;g.isProCard=!0,g.Divider=be,g.TabPane=xe,g.Group=R;var x=g,J=m.a=x},rWUb:function(B,m,e){"use strict";e.d(m,"e",function(){return u}),e.d(m,"d",function(){return F}),e.d(m,"a",function(){return I}),e.d(m,"h",function(){return Y}),e.d(m,"b",function(){return de}),e.d(m,"i",function(){return ae}),e.d(m,"c",function(){return ne}),e.d(m,"f",function(){return L}),e.d(m,"g",function(){return ue});var r=e("qLMh"),a=e("k1fw"),s=e("9og8"),p=e("9kvl");function u(o,i){return z.apply(this,arguments)}function z(){return z=Object(s.a)(Object(r.a)().mark(function o(i,t){return Object(r.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(p.g)("/api/admin/templates",Object(a.a)({method:"GET",useCache:!1,params:Object(a.a)(Object(a.a)({},i),{},{per_page:i&&i.pageSize,page:i&&i.current})},t||{})));case 1:case"end":return l.stop()}},o)})),z.apply(this,arguments)}function F(o,i){return te.apply(this,arguments)}function te(){return te=Object(s.a)(Object(r.a)().mark(function o(i,t){return Object(r.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(p.g)("/api/admin/templates/".concat(i),Object(a.a)({method:"GET"},t||{})));case 1:case"end":return l.stop()}},o)})),te.apply(this,arguments)}function I(o,i){return K.apply(this,arguments)}function K(){return K=Object(s.a)(Object(r.a)().mark(function o(i,t){return Object(r.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(p.g)("/api/admin/templates",Object(a.a)({method:"POST",headers:{"Content-Type":"application/json"},data:i},t||{})));case 1:case"end":return l.stop()}},o)})),K.apply(this,arguments)}function Y(o,i,t){return A.apply(this,arguments)}function A(){return A=Object(s.a)(Object(r.a)().mark(function o(i,t,h){return Object(r.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",Object(p.g)("/api/admin/templates/".concat(i),Object(a.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:t},h||{})));case 1:case"end":return v.stop()}},o)})),A.apply(this,arguments)}function de(o,i){return E.apply(this,arguments)}function E(){return E=Object(s.a)(Object(r.a)().mark(function o(i,t){return Object(r.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(p.g)("/api/admin/templates/".concat(i),Object(a.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},t||{})));case 1:case"end":return l.stop()}},o)})),E.apply(this,arguments)}function ae(o){return C.apply(this,arguments)}function C(){return C=Object(s.a)(Object(r.a)().mark(function o(i){return Object(r.a)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",Object(p.g)("/api/admin/templates/variables",Object(a.a)({method:"GET"},i||{})));case 1:case"end":return h.stop()}},o)})),C.apply(this,arguments)}function ne(o,i){return U.apply(this,arguments)}function U(){return U=Object(s.a)(Object(r.a)().mark(function o(i,t){return Object(r.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(p.g)("/api/admin/templates/".concat(i,"/preview"),Object(a.a)({method:"GET"},t||{})));case 1:case"end":return l.stop()}},o)})),U.apply(this,arguments)}function L(o,i,t){return T.apply(this,arguments)}function T(){return T=Object(s.a)(Object(r.a)().mark(function o(i,t,h){return Object(r.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",Object(p.g)("/api/admin/events/trigger-manually/".concat(i),Object(a.a)({method:"POST",headers:{"Content-Type":"application/json"},data:{users:t}},h||{})));case 1:case"end":return v.stop()}},o)})),T.apply(this,arguments)}function ue(o,i,t){return W.apply(this,arguments)}function W(){return W=Object(s.a)(Object(r.a)().mark(function o(i,t,h){return Object(r.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",Object(p.g)("/api/admin/products/".concat(t,"/trigger-event-manually/").concat(i),Object(a.a)({method:"POST",headers:{"Content-Type":"application/json"}},h||{})));case 1:case"end":return v.stop()}},o)})),W.apply(this,arguments)}},u1OI:function(B,m,e){}}]);
