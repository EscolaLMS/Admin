(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{BAh9:function(B,i,e){"use strict";e.d(i,"a",function(){return p}),e.d(i,"b",function(){return M}),e.d(i,"e",function(){return h}),e.d(i,"d",function(){return f}),e.d(i,"c",function(){return b});var m=e("k1fw"),c=e("9og8"),g=e("WmNS"),r=e.n(g),_=e("9kvl");function p(u,a){return O.apply(this,arguments)}function O(){return O=Object(c.a)(r.a.mark(function u(a,t){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(_.f)("/api/admin/file/list",Object(m.a)({method:"GET",params:a},t||{})));case 1:case"end":return n.stop()}},u)})),O.apply(this,arguments)}function M(u,a){return l.apply(this,arguments)}function l(){return l=Object(c.a)(r.a.mark(function u(a,t){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(_.f)("/api/admin/file/find",Object(m.a)({method:"GET",params:a},t||{})));case 1:case"end":return n.stop()}},u)})),l.apply(this,arguments)}function h(u,a,t){return P.apply(this,arguments)}function P(){return P=Object(c.a)(r.a.mark(function u(a,t,d){var n;return r.a.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return n=new FormData,n.append("file[]",a),n.append("target",t),E.abrupt("return",Object(_.f)("/api/admin/file/upload",Object(m.a)({method:"POST",data:n},d||{})));case 4:case"end":return E.stop()}},u)})),P.apply(this,arguments)}var f=function(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(a,"&w=").concat(t)};function b(u,a){return D.apply(this,arguments)}function D(){return D=Object(c.a)(r.a.mark(function u(a,t){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(_.f)("/api/admin/file/delete",Object(m.a)({method:"DELETE",data:{url:a}},t||{})));case 1:case"end":return n.stop()}},u)})),D.apply(this,arguments)}},BBow:function(B,i,e){"use strict";e.d(i,"a",function(){return m});var m=function(g){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"-",_=g.toString().toLowerCase().trim(),p=[{to:"a",from:"[\xC0\xC1\xC2\xC3\xC5\xC6\u0100\u0102\u0104\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6]"},{to:"ae",from:"[\xC4]"},{to:"c",from:"[\xC7\u0106\u0108\u010C]"},{to:"d",from:"[\xD0\u010E\u0110\xDE]"},{to:"e",from:"[\xC8\xC9\xCA\xCB\u0112\u0114\u0116\u0118\u011A\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6]"},{to:"g",from:"[\u011C\u011E\u0122\u01F4]"},{to:"h",from:"[\u0124\u1E26]"},{to:"i",from:"[\xCC\xCD\xCE\xCF\u0128\u012A\u012E\u0130\u1EC8\u1ECA]"},{to:"j",from:"[\u0134]"},{to:"ij",from:"[\u0132]"},{to:"k",from:"[\u0136]"},{to:"l",from:"[\u0139\u013B\u013D\u0141]"},{to:"m",from:"[\u1E3E]"},{to:"n",from:"[\xD1\u0143\u0145\u0147]"},{to:"o",from:"[\xD2\xD3\xD4\xD5\xD8\u014C\u014E\u0150\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u01EA\u01EC\u01A0]"},{to:"oe",from:"[\u0152\xD6]"},{to:"p",from:"[\u1E55]"},{to:"r",from:"[\u0154\u0156\u0158]"},{to:"s",from:"[\u015A\u015C\u015E\u0160]"},{to:"ss",from:"[\xDF]"},{to:"t",from:"[\u0162\u0164]"},{to:"u",from:"[\xD9\xDA\xDB\u0168\u016A\u016C\u016E\u0170\u0172\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u01AF]"},{to:"ue",from:"[\xDC]"},{to:"w",from:"[\u1E82\u0174\u1E80\u1E84]"},{to:"x",from:"[\u1E8D]"},{to:"y",from:"[\xDD\u0176\u0178\u1EF2\u1EF4\u1EF6\u1EF8]"},{to:"z",from:"[\u0179\u017B\u017D]"},{to:"-",from:"[\xB7/_,:;']"}];return p.forEach(function(O){_=_.replace(new RegExp(O.from,"gi"),O.to)}),_=_.toString().toLowerCase().replace(/\s+/g,"-").replace(/&/g,"-and-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),typeof r!="undefined"&&r!=="-"&&(_=_.replace(/-/g,r)),_}},"F/zT":function(B,i,e){"use strict";var m=e("wx14"),c=e("VTBJ"),g=e("Ff2n"),r=e("q1tI"),_=e.n(r),p=e("adzw"),O=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],M=_.a.forwardRef(function(l,h){var P=l.fieldProps,f=l.unCheckedChildren,b=l.checkedChildren,D=l.proFieldProps,u=Object(g.a)(l,O);return _.a.createElement(p.a,Object(m.a)({valueType:"switch",mode:"edit",fieldProps:Object(c.a)({unCheckedChildren:f,checkedChildren:b},P),ref:h,valuePropName:"checked",proFieldProps:D,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},u))});i.a=M},NqYW:function(B,i,e){"use strict";e.d(i,"d",function(){return p}),e.d(i,"c",function(){return M}),e.d(i,"a",function(){return h}),e.d(i,"e",function(){return f}),e.d(i,"b",function(){return D});var m=e("k1fw"),c=e("9og8"),g=e("WmNS"),r=e.n(g),_=e("9kvl");function p(a,t){return O.apply(this,arguments)}function O(){return O=Object(c.a)(r.a.mark(function a(t,d){return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(_.f)("/api/admin/pages",Object(m.a)({method:"GET",useCache:!1,params:Object(m.a)(Object(m.a)({},t),{},{per_page:t.pageSize,page:t.current})},d||{})));case 1:case"end":return s.stop()}},a)})),O.apply(this,arguments)}function M(a,t){return l.apply(this,arguments)}function l(){return l=Object(c.a)(r.a.mark(function a(t,d){return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(_.f)("/api/admin/pages/".concat(t),Object(m.a)({method:"GET"},d||{})));case 1:case"end":return s.stop()}},a)})),l.apply(this,arguments)}function h(a,t){return P.apply(this,arguments)}function P(){return P=Object(c.a)(r.a.mark(function a(t,d){return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(_.f)("/api/admin/pages",Object(m.a)({method:"POST",headers:{"Content-Type":"application/json"},data:t},d||{})));case 1:case"end":return s.stop()}},a)})),P.apply(this,arguments)}function f(a,t,d){return b.apply(this,arguments)}function b(){return b=Object(c.a)(r.a.mark(function a(t,d,n){return r.a.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",Object(_.f)("/api/admin/pages/".concat(t),Object(m.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:d},n||{})));case 1:case"end":return E.stop()}},a)})),b.apply(this,arguments)}function D(a,t){return u.apply(this,arguments)}function u(){return u=Object(c.a)(r.a.mark(function a(t,d){return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(_.f)("/api/admin/pages/".concat(t),Object(m.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},d||{})));case 1:case"end":return s.stop()}},a)})),u.apply(this,arguments)}},SWpp:function(B,i,e){"use strict";e.r(i);var m=e("T2oS"),c=e("W9HT"),g=e("miYZ"),r=e("tsqr"),_=e("k1fw"),p=e("9og8"),O=e("tJVT"),M=e("WmNS"),l=e.n(M),h=e("q1tI"),P=e.n(h),f=e("VMEa"),b=e("Qurx"),D=e("F/zT"),u=e("nhC9"),a=e("NqYW"),t=e("hd5d"),d=e("tMyG"),n=e("9kvl"),s=e("Ty5D"),E=e("BBow"),o=e("nKUr"),I=e.n(o);i.default=function(){var L=Object(n.i)(),W=Object(s.g)(),j=W.page,F=j==="new",v=Object(h.useState)(),x=Object(O.a)(v,2),R=x[0],S=x[1],G=f.a.useForm(),z=Object(O.a)(G,1),$=z[0],N=Object(h.useCallback)(Object(p.a)(l.a.mark(function K(){var A;return l.a.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,Object(a.c)(Number(j));case 2:A=C.sent,A.success&&S(Object(_.a)(Object(_.a)({},A.data),{},{content:A.data.content||""}));case 4:case"end":return C.stop()}},K)})),[j]);Object(h.useEffect)(function(){if(j==="new"){S({active:!1});return}N()},[j,N]);var V=Object(h.useMemo)(function(){return{onFinish:function(){var K=Object(p.a)(l.a.mark(function U(C){var y,w;return l.a.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(w=Object(_.a)(Object(_.a)({},C),{},{bio:C.bio?C.bio:void 0}),j!=="new"){T.next=8;break}return T.next=4,Object(a.a)(w);case 4:y=T.sent,y.success&&n.d.push("/pages/".concat(y.data.id)),T.next=11;break;case 8:return T.next=10,Object(a.e)(Number(j),w);case 10:y=T.sent;case 11:r.default.success(y.message);case 12:case"end":return T.stop()}},U)}));function A(U){return K.apply(this,arguments)}return A}(),initialValues:R}},[R,j]);return R?Object(o.jsx)(d.a,{title:F?Object(o.jsx)(n.a,{id:"new_page"}):Object(o.jsx)(n.a,{id:"edit_page"}),children:Object(o.jsx)(u.a,{children:Object(o.jsxs)(f.a,Object(_.a)(Object(_.a)({},V),{},{form:$,onValuesChange:function(A){A.title&&$.setFieldsValue({slug:Object(E.a)(A.title)})},children:[Object(o.jsxs)(f.a.Group,{children:[Object(o.jsx)(b.a,{width:"md",name:"title",label:Object(o.jsx)(n.a,{id:"title"}),tooltip:Object(o.jsx)(n.a,{id:"title"}),placeholder:L.formatMessage({id:"title"}),required:!0}),Object(o.jsx)(b.a,{width:"md",name:"slug",label:Object(o.jsx)(n.a,{id:"slug"}),tooltip:Object(o.jsx)(n.a,{id:"slug_tooltip"}),placeholder:L.formatMessage({id:"slug"}),disabled:!0,required:!0}),Object(o.jsx)(D.a,{name:"active",label:Object(o.jsx)(n.a,{id:"is_active"})})]}),Object(o.jsx)(f.a.Item,{name:"content",label:Object(o.jsx)(n.a,{id:"content"}),tooltip:Object(o.jsx)(n.a,{id:"content_tooltip"}),valuePropName:"value",required:!0,children:Object(o.jsx)(t.a,{directory:"pages/".concat(j,"/wysiwyg")})})]}))})}):Object(o.jsx)(c.a,{})}},hd5d:function(B,i,e){"use strict";var m=e("9og8"),c=e("WmNS"),g=e.n(c),r=e("q1tI"),_=e.n(r),p=e("3Ef1"),O=e.n(p),M=e("BAh9"),l=e("vtG9"),h=e.n(l),P=e("9kvl"),f=e("nKUr"),b=e.n(f),D=function(a){var t=a.value,d=a.onChange,n=a.directory,s=n===void 0?"/wysiwyg":n,E=Object(P.i)();return Object(f.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(f.jsx)(O.a,{uploadImage:function(){var o=Object(m.a)(g.a.mark(function I(L){var W,j;return g.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,Object(M.e)(L,s);case 2:if(W=v.sent,!W.success){v.next=6;break}return j=W.data[0].name.includes("/")?W.data[0].name:"".concat(s).concat(W.data[0].name),v.abrupt("return",Object(M.d)(j,1e3));case 6:throw new Error("Error while uploading");case 7:case"end":return v.stop()}},I)}));return function(I){return o.apply(this,arguments)}}(),defaultValue:t||"",onChange:function(I){return d&&d(I())},placeholder:E.formatMessage({id:"wysiwyg_placeholder"})})})};i.a=D},vtG9:function(B,i,e){}}]);
