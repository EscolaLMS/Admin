(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"3fxf":function(F,d,e){"use strict";var u=e("DjyN"),M=e("NUBc"),b=e("Mwp2"),m=e("VXEj"),p=e("+L6B"),O=e("2/Rp"),f=e("5NDa"),h=e("5rEg"),A=e("oBTY"),n=e("k1fw"),C=e("tJVT"),x=e("DYRE"),U=e("zeV3"),l=e("tU7J"),s=e("wFql"),o=e("q1tI"),E=e.n(o),r=e("BAh9"),S=e("/MfK"),v=e("mAF4"),z=e("dF/Y"),B=e("9kvl"),$=e("DBJ/"),y=e("lLVY"),ne=e.n(y),a=e("nKUr"),ae=e.n(a),J=function(I){var R=I.directory,L=I.onUploaded;return Object(a.jsxs)(U.b,{align:"start",children:[Object(a.jsxs)(s.a.Text,{children:[Object(a.jsx)(B.a,{id:"pages.files.filesBrowser"}),Object(a.jsx)(s.a.Text,{code:!0,children:R})]}),Object(a.jsx)($.a,{url:"/api/admin/file/upload",name:"file[]",data:{target:R},onUpload:function(W){W.success&&L(R,W.data)}})]})},Q=function(I){var R=I.defaultDirectory,L=R===void 0?"/":R,T=I.onFile,W=I.hideDeleteBtn,H=W===void 0?!1:W,Y=I.forceLoading,Z=Y===void 0?!1:Y,k=Object(B.j)(),q=Object(o.useState)({loading:!1,name:"",directory:L,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),G=Object(C.a)(q,2),i=G[0],N=G[1],g=Object(o.useRef)(),D=Object(o.useCallback)(function(_){N(function(t){return Object(n.a)(Object(n.a)({},t),{},{loading:_})})},[]),w=Object(o.useCallback)(function(_,t){_.success&&N(function(c){return Object(n.a)(Object(n.a)(Object(n.a)({},c),_.data),{},{data:[{url:t.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(A.a)(_.data.data.map(function(j){return Object(n.a)(Object(n.a)({},j),{},{url:j.mime==="directory"?"".concat(t,"/").concat(j.name):j.url})}))).filter(function(j){return t==="/"||t===L?j.name!=="..":!0}),directory:t,loading:!1})})},[D]),P=Object(o.useCallback)(function(_){var t,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,j=function(){return g.current&&g.current.abort()};return j(),g.current=new AbortController,D(!0),Object(r.a)({directory:_,page:c},{signal:(t=g.current)===null||t===void 0?void 0:t.signal}).then(function(K){K.success&&w(K,_)}).catch(function(){return D(!1)}),function(){j()}},[D]);Object(o.useEffect)(function(){return P(L)},[L,P]);var ee=Object(o.useCallback)(function(_){D(!0),Object(r.c)(_).then(function(){P(i.directory)}).catch(function(){D(!1)})},[P,D,i.directory]),te=Object(o.useCallback)(function(_,t){var c,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,K=function(){return g.current&&g.current.abort()};return K(),g.current=new AbortController,D(!0),Object(r.b)({directory:_,name:t,page:j},{signal:(c=g.current)===null||c===void 0?void 0:c.signal}).then(function(V){V.success&&w(V,_)}).catch(function(){return D(!1)}),function(){K()}},[D]);return Object(a.jsxs)("div",{className:"file-browser",children:[Object(a.jsxs)("div",{className:"file-browser__header",children:[Object(a.jsx)(h.a,{placeholder:k.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(t){return N(function(c){return Object(n.a)(Object(n.a)({},c),{},{name:t.target.value})})},value:i.name}),Object(a.jsxs)("div",{children:[Object(a.jsx)(O.a,{className:"file-browser__button",onClick:function(){return P(i.directory)},children:Object(a.jsx)(B.a,{id:"reset"})}),Object(a.jsx)(O.a,{className:"file-browser__button",type:"primary",onClick:function(){return te(i.directory,i.name)},children:Object(a.jsx)(B.a,{id:"query"})})]})]}),Object(a.jsx)(m.b,{loading:i.loading||Z,size:"small",itemLayout:"horizontal",dataSource:i.data,header:Object(a.jsx)(J,{directory:i.directory,onUploaded:function(t,c){c&&(P(t),T&&T(c,t))}}),footer:Object(a.jsx)(J,{directory:i.directory,onUploaded:function(t,c){P(t),c&&T&&T(c,t)}}),renderItem:function(t){return Object(a.jsx)(m.b.Item,{actions:t.mime!=="directory"&&!H?[Object(a.jsx)(O.a,{type:"default",danger:!0,icon:Object(a.jsx)(S.a,{}),size:"small",onClick:function(){return ee(t.url)}},"dir")]:[],children:Object(a.jsx)(m.b.Item.Meta,{avatar:t.mime==="directory"?Object(a.jsx)(O.a,{type:"primary",icon:Object(a.jsx)(v.a,{}),size:"small",onClick:function(){return P(t.url)}}):Object(a.jsx)("a",{href:t.url,target:"_blank",rel:"noreferrer",children:Object(a.jsx)(O.a,{type:"default",icon:Object(a.jsx)(z.a,{}),size:"small"})}),description:Object(a.jsx)(E.a.Fragment,{children:Object(a.jsx)(O.a,{type:"text",size:"small",onClick:function(){return t.mime==="directory"?P(t.url):T&&T(t,i.directory)},children:t.name})})})})}}),Object(a.jsx)(M.a,{pageSizeOptions:[],current:i.current_page,total:i.total,pageSize:i.per_page,onChange:function(t){return P(i.directory,t)}})]})};d.a=Q},BAh9:function(F,d,e){"use strict";e.d(d,"a",function(){return p}),e.d(d,"b",function(){return f}),e.d(d,"e",function(){return A}),e.d(d,"d",function(){return C}),e.d(d,"c",function(){return x});var u=e("qLMh"),M=e("k1fw"),b=e("9og8"),m=e("9kvl");function p(l,s){return O.apply(this,arguments)}function O(){return O=Object(b.a)(Object(u.a)().mark(function l(s,o){return Object(u.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(m.g)("/api/admin/file/list",Object(M.a)({method:"GET",params:s},o||{})));case 1:case"end":return r.stop()}},l)})),O.apply(this,arguments)}function f(l,s){return h.apply(this,arguments)}function h(){return h=Object(b.a)(Object(u.a)().mark(function l(s,o){return Object(u.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(m.g)("/api/admin/file/find",Object(M.a)({method:"GET",params:s},o||{})));case 1:case"end":return r.stop()}},l)})),h.apply(this,arguments)}function A(l,s,o){return n.apply(this,arguments)}function n(){return n=Object(b.a)(Object(u.a)().mark(function l(s,o,E){var r;return Object(u.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return r=new FormData,r.append("file[]",s),r.append("target",o),v.abrupt("return",Object(m.g)("/api/admin/file/upload",Object(M.a)({method:"POST",data:r},E||{})));case 4:case"end":return v.stop()}},l)})),n.apply(this,arguments)}var C=function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/images/img?path=").concat(s,"&w=").concat(o)};function x(l,s){return U.apply(this,arguments)}function U(){return U=Object(b.a)(Object(u.a)().mark(function l(s,o){return Object(u.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(m.g)("/api/admin/file/delete",Object(M.a)({method:"DELETE",data:{url:s}},o||{})));case 1:case"end":return r.stop()}},l)})),U.apply(this,arguments)}},"DBJ/":function(F,d,e){"use strict";var u=e("k1fw"),M=e("y8nQ"),b=e("Vl3Y"),m=e("etVw"),p=e("9kvl"),O=e("qFDU"),f=e("nKUr"),h=e.n(f);function A(n){var C=n.onChange,x=n.onUpload,U=n.url,l=n.name,s=n.extra,o=n.accept,E=n.data,r=n.wrapInForm,S=r===void 0?!0:r,v=n.title,z=n.formProps,B=Object(p.j)();return E&&E[l]&&delete E[l],Object(f.jsx)(O.a,{condition:S,wrap:function(y){return Object(f.jsx)(b.a,Object(u.a)(Object(u.a)({},z),{},{children:y}))},children:Object(f.jsx)(m.a,{title:v||" ".concat(B.formatMessage({id:"upload_click_here"})),placeholder:B.formatMessage({id:"upload_click_here"}),onChange:function(y){C&&C(y),y.file.status==="done"&&x&&x(y.file.response)},label:Object(f.jsx)(p.a,{id:"upload"}),max:2,fieldProps:{data:E,accept:o,name:l,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(U),extra:s})})}d.a=A},lLVY:function(F,d,e){},u4ym:function(F,d,e){"use strict";e.r(d);var u=e("IzEo"),M=e("bx4M"),b=e("tU7J"),m=e("wFql"),p=e("q1tI"),O=e.n(p),f=e("tMyG"),h=e("9kvl"),A=e("3fxf"),n=e("nKUr"),C=e.n(n);d.default=function(){return Object(n.jsx)(f.a,{children:Object(n.jsxs)(M.a,{children:[Object(n.jsx)(m.a.Text,{strong:!0,children:Object(n.jsx)(h.a,{id:"pages.files.content"})}),Object(n.jsx)(A.a,{})]})})}}}]);
