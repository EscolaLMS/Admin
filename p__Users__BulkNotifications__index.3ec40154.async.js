"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[6626,2803],{45484:function(C,g,t){t.r(g),t.d(g,{default:function(){return U}});var y=t(26271),o=t(74453),M=t(67294),n=t(80854),b=t(97857),m=t.n(b),f=t(13769),x=t.n(f),p=t(62235),A=t(44167),h=t(53302),_=t(31472),v=t(16894),a=t(14726),i=t(51042),l=t(54464),P=t(91115),e=t(85893),D=["type","defaultRender"],O=[{title:(0,e.jsx)(n.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:(0,e.jsx)(n.FormattedMessage,{id:"user_id",defaultMessage:"user_id"}),dataIndex:"notifiable_id",hideInSearch:!0,sorter:!0,valueType:"select",renderFormItem:function(u,r){var s=r.type,d=r.defaultRender,c=x()(r,D);return(0,e.jsx)(A.Z,m()({},c))},render:function(u,r){return r.users&&r.users.map(function(s){return(0,e.jsx)(p.Z,{type:"App\\Models\\User",type_id:s},"user-".concat(s))})}},{title:(0,e.jsx)(n.FormattedMessage,{id:"title",defaultMessage:"title"}),dataIndex:"sections",hideInSearch:!0,sorter:!1,valueType:"select",render:function(u,r){var s;return((s=r.sections.find(function(d){var c=d.key;return c===_.hg.TITLE}))===null||s===void 0?void 0:s.value)||""}},{title:(0,e.jsx)(n.FormattedMessage,{id:"content",defaultMessage:"content"}),dataIndex:"sections",hideInSearch:!0,sorter:!1,valueType:"select",render:function(u,r){var s;return((s=r.sections.find(function(d){var c=d.key;return c===_.hg.BODY}))===null||s===void 0?void 0:s.value)||""}}],R=function(u){var r=u.templateType,s=u.channel,d=(0,M.useRef)(),c=(0,n.useIntl)(),k=(0,l.T)(),F=k.checkPermission;return(0,e.jsx)(v.ZP,{headerTitle:c.formatMessage({id:"Bulknotifications.pushListTitle",defaultMessage:"Push notifications sent"}),actionRef:d,rowKey:"id",search:!1,toolBarRender:function(){return F(P.Z.UserBulkNotificationCreate)?[(0,e.jsx)(n.Link,{to:"/users/notifications/".concat(r,"/new"),children:(0,e.jsxs)(a.ZP,{type:"primary",children:[(0,e.jsx)(i.Z,{})," ",(0,e.jsx)(n.FormattedMessage,{id:"new",defaultMessage:"new"})]},"primary")},"new")]:[]},request:function(B,I){var K=B.pageSize,W=B.current,T=I&&Object.entries(I)[0];return(0,h.xv)({per_page:K,page:W,order_by:T&&T[0],order:T?T[1]==="ascend"?"ASC":"DESC":void 0,channel:s}).then(function(E){return E.success?{data:E.data,total:E.meta.total,success:!0}:[]})},columns:[].concat(O)})},S=R,L=function(){var u=(0,n.useParams)(),r=u.template;return(0,e.jsx)(o._z,{children:(0,e.jsx)(y.ZP,{tabs:{type:"card",activeKey:r,onChange:function(d){return n.history.push("/configuration/templates/".concat(d))}},children:(0,e.jsx)(y.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"Bulknotifications.push"}),children:(0,e.jsx)(S,{templateType:"push",channel:_.wg.PUSH})},"push")})})},U=L},53302:function(C,g,t){t.d(g,{MH:function(){return _},ol:function(){return A},xv:function(){return x}});var y=t(15009),o=t.n(y),M=t(97857),n=t.n(M),b=t(99289),m=t.n(b),f=t(80854);function x(a,i){return p.apply(this,arguments)}function p(){return p=m()(o()().mark(function a(i,l){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/api/admin/bulk-notifications",n()({method:"GET",useCache:!1,params:i},l||{})));case 1:case"end":return e.stop()}},a)})),p.apply(this,arguments)}function A(a,i){return h.apply(this,arguments)}function h(){return h=m()(o()().mark(function a(i,l){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/api/admin/bulk-notifications/send",n()({method:"POST",headers:{"Content-Type":"application/json"},data:i},l||{})));case 1:case"end":return e.stop()}},a)})),h.apply(this,arguments)}function _(a,i){return v.apply(this,arguments)}function v(){return v=m()(o()().mark(function a(i,l){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/api/admin/bulk-notifications/send/multicast",n()({method:"POST",headers:{"Content-Type":"application/json"},data:i},l||{})));case 1:case"end":return e.stop()}},a)})),v.apply(this,arguments)}}}]);
