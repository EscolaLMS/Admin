(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{BBow:function(J,b,e){"use strict";e.d(b,"a",function(){return y});var y=function(D){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"-",d=D.toString().toLowerCase().trim(),f=[{to:"a",from:"[\xC0\xC1\xC2\xC3\xC5\xC6\u0100\u0102\u0104\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6]"},{to:"ae",from:"[\xC4]"},{to:"c",from:"[\xC7\u0106\u0108\u010C]"},{to:"d",from:"[\xD0\u010E\u0110\xDE]"},{to:"e",from:"[\xC8\xC9\xCA\xCB\u0112\u0114\u0116\u0118\u011A\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6]"},{to:"g",from:"[\u011C\u011E\u0122\u01F4]"},{to:"h",from:"[\u0124\u1E26]"},{to:"i",from:"[\xCC\xCD\xCE\xCF\u0128\u012A\u012E\u0130\u1EC8\u1ECA]"},{to:"j",from:"[\u0134]"},{to:"ij",from:"[\u0132]"},{to:"k",from:"[\u0136]"},{to:"l",from:"[\u0139\u013B\u013D\u0141]"},{to:"m",from:"[\u1E3E]"},{to:"n",from:"[\xD1\u0143\u0145\u0147]"},{to:"o",from:"[\xD2\xD3\xD4\xD5\xD8\u014C\u014E\u0150\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u01EA\u01EC\u01A0]"},{to:"oe",from:"[\u0152\xD6]"},{to:"p",from:"[\u1E55]"},{to:"r",from:"[\u0154\u0156\u0158]"},{to:"s",from:"[\u015A\u015C\u015E\u0160]"},{to:"ss",from:"[\xDF]"},{to:"t",from:"[\u0162\u0164]"},{to:"u",from:"[\xD9\xDA\xDB\u0168\u016A\u016C\u016E\u0170\u0172\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u01AF]"},{to:"ue",from:"[\xDC]"},{to:"w",from:"[\u1E82\u0174\u1E80\u1E84]"},{to:"x",from:"[\u1E8D]"},{to:"y",from:"[\xDD\u0176\u0178\u1EF2\u1EF4\u1EF6\u1EF8]"},{to:"z",from:"[\u0179\u017B\u017D]"},{to:"-",from:"[\xB7/_,:;']"}];return f.forEach(function(M){d=d.replace(new RegExp(M.from,"gi"),M.to)}),d=d.toString().toLowerCase().replace(/\s+/g,"-").replace(/&/g,"-and-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),typeof n!="undefined"&&n!=="-"&&(d=d.replace(/-/g,n)),d}},CEpB:function(J,b,e){"use strict";var y=e("nRaC"),P=e("5RzL"),D=e("tJVT"),n=e("q1tI"),d=e.n(n),f=e("JifO"),M=e("9kvl"),j=e("nKUr"),v=e.n(j),T=function c(a){return a.subcategories&&a.subcategories.length?{title:a.name,value:a.id,children:a.subcategories.map(function(p){return c(p)})}:{title:a.name,value:a.id}},F=function(a){var p=a.value,l=a.onChange,I=a.multiple,B=I===void 0?!1:I,$=Object(n.useState)([]),r=Object(D.a)($,2),L=r[0],Q=r[1];Object(n.useEffect)(function(){Object(f.c)().then(function(z){return Q(z.data)})},[]);var U=Object(n.useMemo)(function(){return L.map(function(z){return T(z)})},[L]);return Object(j.jsx)(P.a,{loading:L.length===0,multiple:B,showSearch:!0,style:{width:"100%",minWidth:"310px"},value:p,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:Object(j.jsx)(M.a,{id:"select",defaultMessage:"Please select"}),allowClear:!0,treeDefaultExpandAll:!0,onChange:l,treeData:U,disabled:L.length===0})};b.a=F},"F/zT":function(J,b,e){"use strict";var y=e("wx14"),P=e("VTBJ"),D=e("Ff2n"),n=e("q1tI"),d=e.n(n),f=e("adzw"),M=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],j=d.a.forwardRef(function(v,T){var F=v.fieldProps,c=v.unCheckedChildren,a=v.checkedChildren,p=v.proFieldProps,l=Object(D.a)(v,M);return d.a.createElement(f.a,Object(y.a)({valueType:"switch",mode:"edit",fieldProps:Object(P.a)({unCheckedChildren:c,checkedChildren:a},F),ref:T,valuePropName:"checked",proFieldProps:p,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},l))});b.a=j},N0Of:function(J,b,e){"use strict";e.r(b);var y=e("P2fV"),P=e("NJEC"),D=e("5Dmo"),n=e("3S7+"),d=e("+L6B"),f=e("2/Rp"),M=e("+BJd"),j=e("mr32"),v=e("tJVT"),T=e("k1fw"),F=e("miYZ"),c=e("tsqr"),a=e("9og8"),p=e("WmNS"),l=e.n(p),I=e("xvlK"),B=e("q1tI"),$=e.n(B),r=e("9kvl"),L=e("tMyG"),Q=e("Qiat"),U=e("JifO"),z=e("y8nQ"),w=e("Vl3Y"),Z=e("rmhi"),Y=e("Qurx"),X=e("F/zT"),k=e("VMEa"),_=e("BBow"),q=e("CEpB"),ee=e("Gn8c"),t=e("nKUr"),te=function(O){var u=Object(r.i)(),h=O.visible,o=O.onVisibleChange,R=O.onFinish,s=O.id,i=w.a.useForm(),G=Object(v.a)(i,1),g=G[0];return Object(B.useEffect)(function(){typeof s=="number"&&s>0?Object(U.b)(s).then(function(S){g.setFieldsValue(S.data)}):g.resetFields()},[s,g]),Object(t.jsxs)(Z.a,{form:g,title:u.formatMessage({id:typeof s=="number"&&s>0?"editCategory":"newCategory",defaultMessage:typeof s=="number"&&s>0?"editCategory":"newCategory"}),width:"400px",visible:h,onVisibleChange:o,onFinish:R,onValuesChange:function(A){A.name&&g.setFieldsValue({slug:Object(_.a)(A.name)})},children:[Object(t.jsx)(Y.a,{label:Object(t.jsx)(r.a,{id:"name",defaultMessage:"name"}),rules:[{required:!0}],width:"md",name:"name"}),Object(t.jsx)(Y.a,{width:"md",name:"slug",label:Object(t.jsx)(r.a,{id:"slug"}),placeholder:u.formatMessage({id:"slug"}),disabled:!0,required:!0}),Object(t.jsx)(X.a,{name:"is_active",label:Object(t.jsx)(r.a,{id:"is_active",defaultMessage:"is_active"})}),Object(t.jsx)(k.a.Item,{name:"parent_id",label:Object(t.jsx)(r.a,{id:"parent_category",defaultMessage:"parent_category"}),valuePropName:"value",children:Object(t.jsx)(q.a,{})}),s&&Object(t.jsx)(ee.a,{folder:"categories/".concat(s),wrapInForm:!1,title:"icon",action:"/api/admin/categories/".concat(s),src_name:"icon",form_name:"icon",getUploadedSrcField:function(A){return A.file.response.data.icon},setPath:function(A){return g.setFieldsValue(A)}})]})},ae=te,re=e("G3dp"),H=e("/MfK"),se=function(){var V=Object(a.a)(l.a.mark(function O(u,h,o){var R;return l.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return R=c.default.loading(u.formatMessage({id:"loading"})),i.prev=1,i.next=4,o&&o!==-1?Object(U.f)(o,Object(T.a)({},h)):Object(U.d)(Object(T.a)({},h));case 4:return R(),c.default.success(u.formatMessage({id:"success"})),i.abrupt("return",!0);case 9:return i.prev=9,i.t0=i.catch(1),R(),c.default.error(c.default.success(u.formatMessage({id:"error"}))),i.abrupt("return",!1);case 14:case"end":return i.stop()}},O,null,[[1,9]])}));return function(u,h,o){return V.apply(this,arguments)}}(),ne=function(){var V=Object(a.a)(l.a.mark(function O(u,h){var o;return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return o=c.default.loading(u.formatMessage({id:"loading"})),s.prev=1,s.next=4,Object(U.e)(h);case 4:return o(),c.default.success(u.formatMessage({id:"success"})),s.abrupt("return",!0);case 9:return s.prev=9,s.t0=s.catch(1),o(),c.default.error(u.formatMessage({id:"error"})),s.abrupt("return",!1);case 14:case"end":return s.stop()}},O,null,[[1,9]])}));return function(u,h){return V.apply(this,arguments)}}(),oe=function(){var O=Object(B.useState)(!1),u=Object(v.a)(O,2),h=u[0],o=u[1],R=Object(B.useState)([]),s=Object(v.a)(R,2),i=s[0],G=s[1],g=Object(B.useRef)(),S=Object(r.i)(),A=Object(B.useCallback)(function(C){return!!i.some(function(m){return m.parent_id===C})},[i]),le=[{title:Object(t.jsx)(r.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0},{title:Object(t.jsx)(r.a,{id:"name",defaultMessage:"name"}),dataIndex:"name",hideInSearch:!0},{title:Object(t.jsx)(r.a,{id:"full_name",defaultMessage:"full_name"}),dataIndex:"name_with_breadcrumbs",hideInSearch:!0},{title:Object(t.jsx)(r.a,{id:"slug",defaultMessage:"slug"}),dataIndex:"slug",hideInSearch:!0},{title:Object(t.jsx)(r.a,{id:"pages.searchTable.titleStatus",defaultMessage:"\u72B6\u6001"}),dataIndex:"is_active",hideInForm:!0,hideInSearch:!0,render:function(m,E){return E.is_active?Object(t.jsx)(j.a,{color:"success",children:Object(t.jsx)(r.a,{id:"Active",defaultMessage:"Active"})}):Object(t.jsx)(j.a,{color:"error",children:Object(t.jsx)(r.a,{id:"Inactive",defaultMessage:"Inactive"})})}},{hideInSearch:!0,title:Object(t.jsx)(r.a,{id:"parent_id",defaultMessage:"parent_id"}),dataIndex:"parent_id",tip:"name key",render:function(m,E){var x=i.find(function(W){return W.id===E.parent_id});return x?Object(t.jsx)(f.a,{size:"small",onClick:function(){return o(x.id)},children:x.name}):Object(t.jsx)($.a.Fragment,{children:Object(t.jsx)(r.a,{id:"none"})})}},{hideInSearch:!0,title:Object(t.jsx)(r.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(m,E){return[Object(t.jsx)(n.a,{title:Object(t.jsx)(r.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(f.a,{type:"primary",icon:Object(t.jsx)(re.a,{}),onClick:function(){return o(E.id)}})},"edit"),A(E.id)?Object(t.jsx)(n.a,{title:Object(t.jsx)(r.a,{id:"cantDelete",defaultMessage:"You can't delete this category because it's parent to others"}),children:Object(t.jsx)(f.a,{disabled:!0,type:"primary",icon:Object(t.jsx)(H.a,{}),danger:!0})},"delete"):Object(t.jsx)(P.a,{title:Object(t.jsx)(r.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(a.a)(l.a.mark(function x(){var W;return l.a.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,ne(S,E.id);case 2:W=N.sent,W&&(o(!1),g.current&&g.current.reload());case 4:case"end":return N.stop()}},x)})),okText:Object(t.jsx)(r.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(r.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(n.a,{title:Object(t.jsx)(r.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(f.a,{type:"primary",icon:Object(t.jsx)(H.a,{}),danger:!0})})},"delete")]}}];return Object(t.jsxs)(L.a,{children:[Object(t.jsx)(Q.a,{headerTitle:S.formatMessage({id:"categories",defaultMessage:"categories"}),actionRef:g,rowKey:"id",search:{},toolBarRender:function(){return[Object(t.jsxs)(f.a,{type:"primary",onClick:function(){o(-1)},children:[Object(t.jsx)(I.a,{})," ",Object(t.jsx)(r.a,{id:"pages.searchTable.new",defaultMessage:"\u65B0\u5EFA"})]},"primary")]},request:function(){return Object(U.a)().then(function(m){return G(m.data),m})},columns:le,pagination:{pageSize:100}}),Object(t.jsx)(ae,{id:h,visible:Number.isInteger(h),onVisibleChange:function(m){return m===!1&&o(!1)},onFinish:function(){var C=Object(a.a)(l.a.mark(function m(E){var x;return l.a.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,se(S,E,Number(h));case 2:x=K.sent,x&&(o(!1),g.current&&g.current.reload());case 4:case"end":return K.stop()}},m)}));return function(m){return C.apply(this,arguments)}}()})]})},ie=b.default=oe},Qurx:function(J,b,e){"use strict";var y=e("wx14"),P=e("Ff2n"),D=e("q1tI"),n=e.n(D),d=e("adzw"),f=["fieldProps","proFieldProps"],M=["fieldProps","proFieldProps"],j="text",v=function(a){var p=a.fieldProps,l=a.proFieldProps,I=Object(P.a)(a,f);return n.a.createElement(d.a,Object(y.a)({mode:"edit",valueType:j,fieldProps:p,filedConfig:{valueType:j},proFieldProps:l},I))},T=function(a){var p=a.fieldProps,l=a.proFieldProps,I=Object(P.a)(a,M);return n.a.createElement(d.a,Object(y.a)({mode:"edit",valueType:"password",fieldProps:p,proFieldProps:l,filedConfig:{valueType:j}},I))},F=v;F.Password=T,F.displayName="ProFormComponent",b.a=F}}]);
