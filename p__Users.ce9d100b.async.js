(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{"DBJ/":function(Q,v,t){"use strict";var W=t("k1fw"),Y=t("y8nQ"),N=t("Vl3Y"),C=t("tJVT"),Z=t("etVw"),m=t("q1tI"),te=t.n(m),E=t("9kvl"),P=t("qFDU"),g=t("nKUr"),S=t.n(g);function u(i){var A=i.onChange,U=i.onUpload,p=i.url,a=i.name,L=i.extra,J=i.accept,b=i.data,R=i.wrapInForm,K=R===void 0?!0:R,x=i.title,F=i.formProps,h=i.maxFiles,z=i.clearListAfterUpload,V=Object(m.useState)(),B=Object(C.a)(V,2),T=B[0],y=B[1],G=Object(E.l)();return b&&b[a]&&delete b[a],Object(g.jsx)(P.a,{condition:K,wrap:function(f){return Object(g.jsx)(N.a,Object(W.a)(Object(W.a)({},F),{},{children:f}))},children:Object(g.jsx)(Z.a,{title:x||" ".concat(G.formatMessage({id:"upload_click_here"})),placeholder:G.formatMessage({id:"upload_click_here"}),onChange:function(f){y(f),A&&A(f),f.file.status==="done"&&(U&&U(f.file.response),z&&y(void 0))},label:Object(g.jsx)(E.a,{id:"upload"}),max:h!=null?h:2,fieldProps:{data:b,accept:J,name:a,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(p),extra:L,fileList:T==null?void 0:T.fileList})})}v.a=u},n6PA:function(Q,v,t){},u7Dd:function(Q,v,t){"use strict";t.r(v),t.d(v,"TableColumns",function(){return w});var W=t("P2fV"),Y=t("NJEC"),N=t("5Dmo"),C=t("3S7+"),Z=t("+L6B"),m=t("2/Rp"),te=t("miYZ"),E=t("tsqr"),P=t("tJVT"),g=t("+BJd"),S=t("mr32"),u=t("qLMh"),i=t("9og8"),A=t("4KAj"),U=t("xvlK"),p=t("q1tI"),a=t("9kvl"),L=t("55Ip"),J=t("tMyG"),b=t("Qiat"),R=t("sWYD"),K=t("VK58"),x=t("k1fw");function F(j,l){return h.apply(this,arguments)}function h(){return h=Object(i.a)(Object(u.a)().mark(function j(l,r){return Object(u.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(a.i)("/api/admin/csv/users",Object(x.a)({params:Object(x.a)(Object(x.a)({},l),{},{per_page:l&&l.pageSize,page:l&&l.current}),method:"GET",headers:{accept:"application/csv"},useCache:!1},r||{})));case 1:case"end":return c.stop()}},j)})),h.apply(this,arguments)}var z=t("G3dp"),V=t("/MfK"),B=t("mGZj"),T=t("DBJ/"),y=t("nhC9"),G=t("n6PA"),e=t("nKUr"),f=function(){var j=Object(i.a)(Object(u.a)().mark(function l(r){return Object(u.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(K.c)(r);case 2:return c.abrupt("return",!0);case 3:case"end":return c.stop()}},l)}));return function(r){return j.apply(this,arguments)}}(),w=[{title:Object(e.jsx)(a.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0},{title:Object(e.jsx)(a.a,{id:"created_at",defaultMessage:"created_at"}),dataIndex:"created_at",hideInSearch:!0,render:function(l,r){return r.created_at&&Object(R.a)(new Date(r.created_at),B.a)}},{title:Object(e.jsx)(a.a,{id:"first_name",defaultMessage:"first_name"}),dataIndex:"first_name",hideInSearch:!0},{title:Object(e.jsx)(a.a,{id:"last_name",defaultMessage:"last_name"}),dataIndex:"last_name",hideInSearch:!0},{title:Object(e.jsx)(a.a,{id:"email",defaultMessage:"email"}),dataIndex:"email",hideInSearch:!0},{title:Object(e.jsx)(a.a,{id:"search",defaultMessage:"search"}),dataIndex:"search",hideInSearch:!1,hideInTable:!0,hideInDescriptions:!0,tooltip:Object(e.jsx)(a.a,{id:"search_tooltip_1"})},{title:Object(e.jsx)(a.a,{id:"is_active"}),dataIndex:"is_active",hideInSearch:!0,render:function(l,r){return[Object(e.jsx)(S.a,{color:r.is_active?"green":"red",children:r.is_active?Object(e.jsx)(a.a,{id:"Active"}):Object(e.jsx)(a.a,{id:"Inactive"})},"is_active")]}},{title:Object(e.jsx)(a.a,{id:"email_verified",defaultMessage:"email_verified"}),dataIndex:"email_verified",hideInSearch:!0,render:function(l,r){return[Object(e.jsx)(S.a,{color:r.email_verified?"green":"red",children:r.email_verified?Object(e.jsx)(a.a,{id:"verified"}):Object(e.jsx)(a.a,{id:"unverified"})},"email_verified")]}},{title:Object(e.jsx)(a.a,{id:"created_after",defaultMessage:"Created After"}),key:"from",dataIndex:"from",valueType:"date",hideInTable:!0,hideInDescriptions:!0},{title:Object(e.jsx)(a.a,{id:"created_before",defaultMessage:"Created Before"}),key:"to",dataIndex:"to",valueType:"date",hideInTable:!0,hideInDescriptions:!0},{title:Object(e.jsx)(a.a,{id:"gt_last_login_day",defaultMessage:">= Login last n days"}),key:"gt_last_login_day",dataIndex:"gt_last_login_day",valueType:"digit",hideInTable:!0,hideInDescriptions:!0},{title:Object(e.jsx)(a.a,{id:"lt_last_login_day",defaultMessage:"<= Login last n days"}),key:"lt_last_login_day",dataIndex:"lt_last_login_day",valueType:"digit",hideInTable:!0,hideInDescriptions:!0},{title:Object(e.jsx)(a.a,{id:"roles",defaultMessage:"roles"}),dataIndex:"roles",hideInSearch:!0,render:function(l,r){return r.roles.map(function(I){return Object(e.jsx)(S.a,{children:I},I)})}}],ae=function(){var l=Object(p.useRef)(),r=Object(a.l)(),I=Object(p.useState)({}),c=Object(P.a)(I,2),H=c[0],se=c[1],re=Object(p.useState)(!1),X=Object(P.a)(re,2),ne=X[0],_=X[1],ie=Object(p.useCallback)(Object(i.a)(Object(u.a)().mark(function D(){var n,d,o;return Object(u.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return _(!0),s.prev=1,s.next=4,F(H);case 4:n=s.sent,n&&(d="data:text/csv;charset=utf-8,"+n,o=document.createElement("a"),o.href=d,o.download="users.csv",document.body.appendChild(o),o.click(),document.body.removeChild(o)),s.next=11;break;case 8:s.prev=8,s.t0=s.catch(1),console.error(s.t0);case 11:return s.prev=11,_(!1),s.finish(11);case 14:case"end":return s.stop()}},D,null,[[1,8,11,14]])})),[H]);return Object(e.jsx)(J.a,{children:Object(e.jsxs)(y.a,{tabs:{type:"card",activeKey:"list",onChange:function(n){switch(n){case"list":return a.f.push("/users");case"fields":return a.f.push("/users/fields");default:return a.f.push("/users/".concat(n))}}},children:[Object(e.jsx)(y.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"list"}),children:Object(e.jsx)(b.a,{headerTitle:r.formatMessage({id:"menu.Users",defaultMessage:"users"}),actionRef:l,rowKey:"key",search:{layout:"vertical"},toolBarRender:function(){return[Object(e.jsx)(T.a,{title:r.formatMessage({id:"import_users"}),url:"/api/admin/csv/users",name:"file",accept:".csv",data:{return_url:"".concat(window.location.origin,"/#/user/reset-password")},onChange:function(d){d.file.status==="done"&&d.file.response&&d.file.response.success&&E.b.success(d.file.response.message),d.file.response&&d.file.status==="error"&&(E.b.error(d.file.response.message),console.error(d.file.response))}},"upload"),Object(e.jsxs)(m.a,{loading:ne,type:"primary",onClick:function(){return ie()},children:[Object(e.jsx)(A.a,{})," ",Object(e.jsx)(a.a,{id:"export",defaultMessage:"export"})]},"primary"),Object(e.jsx)(L.a,{to:"/users/list/new",children:Object(e.jsxs)(m.a,{type:"primary",children:[Object(e.jsx)(U.a,{})," ",Object(e.jsx)(a.a,{id:"new",defaultMessage:"new"})]},"primary")},"link")]},request:function(n){var d=n.pageSize,o=n.current,M=n.search,s=n.role,O=n.from,k=n.to,q=n.gt_last_login_day,ee=n.lt_last_login_day;se({pageSize:d,current:o,search:M,role:s,from:O,to:k,gt_last_login_day:q,lt_last_login_day:ee});var le=s&&s.toString()==="all"?void 0:s;return Object(K.n)({pageSize:d,current:o,search:M,role:le,from:O,to:k,gt_last_login_day:q,lt_last_login_day:ee}).then(function($){return $.success?{data:$.data,total:$.meta.total,success:!0}:[]})},columns:[].concat(w,[{hideInSearch:!0,title:Object(e.jsx)(a.a,{id:"pages.searchTable.titleOption"}),dataIndex:"option",valueType:"option",render:function(n,d){return[Object(e.jsx)(L.a,{to:"/users/".concat(d.id,"/user_info"),children:Object(e.jsx)(C.a,{title:Object(e.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(e.jsx)(m.a,{type:"primary",icon:Object(e.jsx)(z.a,{})})})},"edit"),Object(e.jsx)(Y.a,{title:Object(e.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(i.a)(Object(u.a)().mark(function o(){var M;return Object(u.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,f(d.id);case 2:M=O.sent,M&&l.current&&l.current.reload();case 4:case"end":return O.stop()}},o)})),okText:Object(e.jsx)(a.a,{id:"yes"}),cancelText:Object(e.jsx)(a.a,{id:"no"}),children:Object(e.jsx)(C.a,{title:Object(e.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(e.jsx)(m.a,{type:"primary",icon:Object(e.jsx)(V.a,{}),danger:!0})})},"delete")]}}])})},"list"),Object(e.jsx)(y.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"ModelFields"})},"fields")]})})},de=v.default=ae}}]);
