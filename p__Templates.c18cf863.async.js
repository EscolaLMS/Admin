(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{"9A0E":function(I,v,e){"use strict";e.r(v),e.d(v,"channelType",function(){return m});var r=e("q1tI"),a=e("Ty5D"),s=e("9kvl"),p=e("tMyG"),u=e("nhC9"),z=e("P2fV"),Y=e("NJEC"),te=e("5Dmo"),L=e("3S7+"),K=e("+L6B"),F=e("2/Rp"),A=e("qLMh"),de=e("miYZ"),M=e("tsqr"),ae=e("9og8"),C=e("tJVT"),ne=e("xvlK"),U=e("G3dp"),D=e("/MfK"),T=e("55Ip"),ue=e("sWYD"),W=e("Qiat"),o=e("rWUb"),i=e("mGZj"),t=e("nKUr"),f=function(H){var X=H.templateType,je=H.channel,N=Object(r.useRef)(),Ae=Object(s.i)(),ge=Object(r.useState)(!1),be=Object(C.a)(ge,2),De=be[0],R=be[1],ye=[{title:Object(t.jsx)(s.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0},{title:Object(t.jsx)(s.a,{id:"created_at",defaultMessage:"created_at"}),dataIndex:"created_at",hideInSearch:!0,render:function(g,x){return x.created_at&&Object(ue.a)(new Date(x.created_at),i.a)}},{title:Object(t.jsx)(s.a,{id:"name",defaultMessage:"name"}),dataIndex:"name",hideInSearch:!0},{title:Object(t.jsx)(s.a,{id:"event",defaultMessage:"event"}),dataIndex:"event",hideInSearch:!0},{title:Object(t.jsx)(s.a,{id:"templates.is_default"}),dataIndex:"default",hideInSearch:!0,render:function(g,x){return x.default&&Object(t.jsx)(s.a,{id:"yes"})}}],xe=Object(r.useCallback)(function(){var B=Object(ae.a)(Object(A.a)().mark(function g(x){var J,n;return Object(A.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return R(!0),J=M.default.loading(Object(t.jsx)(s.a,{id:"loading",defaultMessage:"loading"})),c.prev=2,c.next=5,Object(o.b)(x).then(function(j){R(!1),j.success&&M.default.success(j.message)});case 5:return J(),R(!1),(n=N.current)===null||n===void 0||n.reload(),c.abrupt("return",!0);case 11:return c.prev=11,c.t0=c.catch(2),J(),M.default.error(Object(t.jsx)(s.a,{id:"error",defaultMessage:"error"})),R(!1),c.abrupt("return",!1);case 17:case"end":return c.stop()}},g,null,[[2,11]])}));return function(g){return B.apply(this,arguments)}}(),[N]);return Object(t.jsx)(W.a,{headerTitle:Ae.formatMessage({id:"templates",defaultMessage:"templates"}),loading:De,actionRef:N,rowKey:"id",search:!1,toolBarRender:function(){return[Object(t.jsx)(T.a,{to:"/templates/".concat(X,"/new"),children:Object(t.jsxs)(F.a,{type:"primary",children:[Object(t.jsx)(ne.a,{})," ",Object(t.jsx)(s.a,{id:"new",defaultMessage:"new"})]},"primary")})]},request:function(g){var x=g.pageSize,J=g.current;return R(!0),Object(o.e)({pageSize:x,current:J,channel:je}).then(function(n){return n.success?(R(!1),{data:n.data,total:n.meta.total,success:!0}):[]})},columns:[].concat(ye,[{hideInSearch:!0,title:Object(t.jsx)(s.a,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",render:function(g,x){return[Object(t.jsx)(T.a,{to:"/templates/".concat(X,"/").concat(x.id),children:Object(t.jsx)(L.a,{title:Object(t.jsx)(s.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(F.a,{type:"primary",icon:Object(t.jsx)(U.a,{})})})},"edit"),Object(t.jsx)(Y.a,{title:Object(t.jsx)(s.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:function(){return xe(x.id)},okText:Object(t.jsx)(s.a,{id:"yes"}),cancelText:Object(t.jsx)(s.a,{id:"no"}),children:Object(t.jsx)(L.a,{title:Object(t.jsx)(s.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(F.a,{type:"primary",icon:Object(t.jsx)(D.a,{}),danger:!0})})},"delete")]}}])})},l=f,m;(function(Q){Q.email="EscolaLms\\TemplatesEmail\\Core\\EmailChannel",Q.pdf="EscolaLms\\TemplatesPdf\\Core\\PdfChannel",Q.sms="EscolaLms\\TemplatesSms\\Core\\SmsChannel"})(m||(m={}));var pe=function(){var H=Object(a.l)(),X=H.template;return Object(t.jsx)(p.a,{children:Object(t.jsxs)(u.a,{tabs:{type:"card",activeKey:X,onChange:function(N){return s.d.push("/templates/".concat(N))}},children:[Object(t.jsx)(u.a.TabPane,{tab:Object(t.jsx)(s.a,{id:"email"}),children:Object(t.jsx)(l,{templateType:"email",channel:m.email})},"email"),Object(t.jsx)(u.a.TabPane,{tab:Object(t.jsx)(s.a,{id:"PDF"}),children:Object(t.jsx)(l,{templateType:"pdf",channel:m.pdf})},"pdf"),Object(t.jsx)(u.a.TabPane,{disabled:!0,tab:Object(t.jsx)("span",{children:Object(t.jsx)(s.a,{id:"Push"})}),children:"Push"},"Push"),Object(t.jsx)(u.a.TabPane,{tab:Object(t.jsx)("span",{children:Object(t.jsx)(s.a,{id:"SMS"})}),children:Object(t.jsx)(l,{templateType:"sms",channel:m.sms})},"sms")]})})},Le=v.default=pe},S76h:function(I,v,e){},TLLU:function(I,v,e){"use strict";var r=e("5OYt");function a(){return Object(r.a)()}v.a={useBreakpoint:a}},VzZb:function(I,v,e){},"aK+R":function(I,v,e){},df8c:function(I,v,e){},nhC9:function(I,v,e){"use strict";var r=e("VTBJ"),a=e("nKUr"),s=e("Znn+"),p=e("ZTPi"),u=e("rePB"),z=e("U8pU"),Y=e("ODXe"),te=e("GNNt"),L=e("wEI+"),K=e("Ff2n"),F=e("1GLa"),A=e("TLLU"),de=e("UESt"),M=e("YSkC"),ae=e("TSYQ"),C=e.n(ae),ne=e("BGR+"),U=e("6cGi"),D=e("q1tI"),T=e.n(D),ue=e("S76h"),W=function(b){var c=b.actions,j=b.prefixCls;return Array.isArray(c)&&(c==null?void 0:c.length)?Object(a.jsx)("ul",{className:"".concat(j,"-actions"),children:c.map(function(P,V){return Object(a.jsx)("li",{style:{width:"".concat(100/c.length,"%")},children:Object(a.jsx)("span",{children:P})},"action-".concat(V))})}):c?Object(a.jsx)("ul",{className:"".concat(j,"-actions"),children:c}):null},o=W,i=e("jCWc"),t=e("kPKH"),f=e("14J3"),l=e("BMrR"),m=e("aK+R"),pe=function(b){var c=b.style,j=b.prefix;return Object(a.jsxs)("div",{className:"".concat(j,"-loading-content"),style:c,children:[Object(a.jsx)(l.a,{gutter:8,children:Object(a.jsx)(t.a,{span:22,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})})}),Object(a.jsxs)(l.a,{gutter:8,children:[Object(a.jsx)(t.a,{span:8,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})}),Object(a.jsx)(t.a,{span:15,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})})]}),Object(a.jsxs)(l.a,{gutter:8,children:[Object(a.jsx)(t.a,{span:6,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})}),Object(a.jsx)(t.a,{span:18,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})})]}),Object(a.jsxs)(l.a,{gutter:8,children:[Object(a.jsx)(t.a,{span:13,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})}),Object(a.jsx)(t.a,{span:9,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})})]}),Object(a.jsxs)(l.a,{gutter:8,children:[Object(a.jsx)(t.a,{span:4,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})}),Object(a.jsx)(t.a,{span:3,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})}),Object(a.jsx)(t.a,{span:16,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})})]})]})},Le=pe,Q=e("df8c"),H=["className","style","bodyStyle","headStyle","title","subTitle","extra","tip","wrap","layout","loading","gutter","tooltip","split","headerBordered","bordered","children","size","actions","ghost","hoverable","direction","collapsed","collapsible","collapsibleIconRender","defaultCollapsed","onCollapse","checked","onChecked","tabs","type"],X=A.a.useBreakpoint,je=T.a.forwardRef(function(n,b){var c,j,P,V=n.className,w=n.style,k=n.bodyStyle,$=k===void 0?{}:k,q=n.headStyle,Ce=q===void 0?{}:q,ve=n.title,Te=n.subTitle,re=n.extra,Pe=n.tip,me=n.wrap,Xe=me===void 0?!1:me,we=n.layout,ce=n.loading,Re=n.gutter,ke=Re===void 0?0:Re,qe=n.tooltip,le=n.split,Be=n.headerBordered,_e=Be===void 0?!1:Be,$e=n.bordered,et=$e===void 0?!1:$e,Ge=n.children,ze=n.size,tt=n.actions,Ke=n.ghost,at=Ke===void 0?!1:Ke,Ue=n.hoverable,nt=Ue===void 0?!1:Ue,rt=n.direction,We=n.collapsed,Je=n.collapsible,ct=Je===void 0?!1:Je,Ve=n.collapsibleIconRender,Ze=n.defaultCollapsed,lt=Ze===void 0?!1:Ze,st=n.onCollapse,it=n.checked,Se=n.onChecked,Ee=n.tabs,Me=n.type,se=Object(K.a)(n,H),ot=Object(D.useContext)(L.default.ConfigContext),dt=ot.getPrefixCls,Ye=X(),ut=Object(U.a)(lt,{value:We,onChange:st}),Fe=Object(Y.a)(ut,2),Oe=Fe[0],jt=Fe[1],fe=["xxl","xl","lg","md","sm","xs"],bt=function(h){var O=[0,0],S=Array.isArray(h)?h:[h,0];return S.forEach(function(E,Z){if(Object(z.a)(E)==="object")for(var G=0;G<fe.length;G+=1){var oe=fe[G];if(Ye[oe]&&E[oe]!==void 0){O[Z]=E[oe];break}}else O[Z]=E||0}),O},ie=function(h,O){return h?O:{}},vt=function(h){var O=h;if(Object(z.a)(h)==="object")for(var S=0;S<fe.length;S+=1){var E=fe[S];if(Ye[E]&&h[E]!==void 0){O=h[E];break}}var Z=ie(typeof O=="string"&&/\d%|\dpx/i.test(O),{width:O,flexShrink:0});return{span:O,colSpanStyle:Z}},d=dt("pro-card"),mt=bt(ke),Qe=Object(Y.a)(mt,2),_=Qe[0],ee=Qe[1],Ne=!1,Ie=T.a.Children.toArray(Ge),Ot=Ie.map(function(y,h){var O;if(y==null||(O=y.type)===null||O===void 0?void 0:O.isProCard){var S;Ne=!0;var E=y.props.colSpan,Z=vt(E),G=Z.span,oe=Z.colSpanStyle,gt=C()(["".concat(d,"-col")],(S={},Object(u.a)(S,"".concat(d,"-split-vertical"),le==="vertical"&&h!==Ie.length-1),Object(u.a)(S,"".concat(d,"-split-horizontal"),le==="horizontal"&&h!==Ie.length-1),Object(u.a)(S,"".concat(d,"-col-").concat(G),typeof G=="number"&&G>=0&&G<=24),S));return Object(a.jsx)("div",{style:Object(r.a)(Object(r.a)(Object(r.a)({},oe),ie(_>0,{paddingRight:_/2,paddingLeft:_/2})),ie(ee>0,{paddingTop:ee/2,paddingBottom:ee/2})),className:gt,children:T.a.cloneElement(y)},"pro-card-col-".concat((y==null?void 0:y.key)||h))}return y}),ft=C()("".concat(d),V,(c={},Object(u.a)(c,"".concat(d,"-border"),et),Object(u.a)(c,"".concat(d,"-contain-card"),Ne),Object(u.a)(c,"".concat(d,"-loading"),ce),Object(u.a)(c,"".concat(d,"-split"),le==="vertical"||le==="horizontal"),Object(u.a)(c,"".concat(d,"-ghost"),at),Object(u.a)(c,"".concat(d,"-hoverable"),nt),Object(u.a)(c,"".concat(d,"-size-").concat(ze),ze),Object(u.a)(c,"".concat(d,"-type-").concat(Me),Me),Object(u.a)(c,"".concat(d,"-collapse"),Oe),Object(u.a)(c,"".concat(d,"-checked"),it),c)),ht=C()("".concat(d,"-body"),(j={},Object(u.a)(j,"".concat(d,"-body-center"),we==="center"),Object(u.a)(j,"".concat(d,"-body-direction-column"),le==="horizontal"||rt==="column"),Object(u.a)(j,"".concat(d,"-body-wrap"),Xe&&Ne),j)),pt=Object(r.a)(Object(r.a)(Object(r.a)({},ie(_>0,{marginRight:-_/2,marginLeft:-_/2})),ie(ee>0,{marginTop:-ee/2,marginBottom:-ee/2})),$),He=T.a.isValidElement(ce)?ce:Object(a.jsx)(Le,{prefix:d,style:$.padding===0||$.padding==="0px"?{padding:24}:void 0}),he=ct&&We===void 0&&(Ve?Ve({collapsed:Oe}):Object(a.jsx)(de.a,{rotate:Oe?void 0:90,className:"".concat(d,"-collapsible-icon")}));return Object(a.jsxs)("div",Object(r.a)(Object(r.a)({className:ft,style:w,ref:b,onClick:function(h){var O;Se==null||Se(h),se==null||(O=se.onClick)===null||O===void 0||O.call(se,h)}},Object(ne.a)(se,["prefixCls","colSpan"])),{},{children:[(ve||re||he)&&Object(a.jsxs)("div",{className:C()("".concat(d,"-header"),(P={},Object(u.a)(P,"".concat(d,"-header-border"),_e||Me==="inner"),Object(u.a)(P,"".concat(d,"-header-collapsible"),he),P)),style:Ce,onClick:function(){he&&jt(!Oe)},children:[Object(a.jsxs)("div",{className:"".concat(d,"-title"),children:[he,Object(a.jsx)(M.a,{label:ve,tooltip:qe||Pe,subTitle:Te})]}),re&&Object(a.jsx)("div",{className:"".concat(d,"-extra"),children:re})]}),Ee?Object(a.jsx)("div",{className:"".concat(d,"-tabs"),children:Object(a.jsx)(p.a,Object(r.a)(Object(r.a)({onChange:Ee.onChange},Ee),{},{children:ce?He:Ge}))}):Object(a.jsx)("div",{className:ht,style:pt,children:ce?He:Ot}),Object(a.jsx)(o,{actions:tt,prefixCls:d})]}))}),N=je,Ae=e("u1OI"),ge=function(b){var c=Object(D.useContext)(L.default.ConfigContext),j=c.getPrefixCls,P=j("pro-card-divider"),V=b.className,w=b.style,k=w===void 0?{}:w,$=b.type,q=C()(P,V,Object(u.a)({},"".concat(P,"-").concat($),$));return Object(a.jsx)("div",{className:q,style:k})},be=ge,De=e("VzZb"),R=["key","tab","tabKey","disabled","destroyInactiveTabPane","children","className","style","cardProps"],ye=function(b){var c=b.key,j=b.tab,P=b.tabKey,V=b.disabled,w=b.destroyInactiveTabPane,k=b.children,$=b.className,q=b.style,Ce=b.cardProps,ve=Object(K.a)(b,R),Te=Object(D.useContext)(L.default.ConfigContext),re=Te.getPrefixCls,Pe=re("pro-card-tabpane"),me=C()(Pe,$);return Object(a.jsx)(p.a.TabPane,Object(r.a)(Object(r.a)({tabKey:P,tab:j,className:me,style:q,disabled:V,destroyInactiveTabPane:w},ve),{},{children:Object(a.jsx)(N,Object(r.a)(Object(r.a)({},Ce),{},{children:k}))}),c)},xe=ye,B=function(b){return Object(a.jsx)(N,Object(r.a)({bodyStyle:{padding:0}},b))},g=N;g.isProCard=!0,g.Divider=be,g.TabPane=xe,g.Group=B;var x=g,J=v.a=x},rWUb:function(I,v,e){"use strict";e.d(v,"e",function(){return u}),e.d(v,"d",function(){return Y}),e.d(v,"a",function(){return L}),e.d(v,"h",function(){return F}),e.d(v,"b",function(){return de}),e.d(v,"i",function(){return ae}),e.d(v,"c",function(){return ne}),e.d(v,"f",function(){return D}),e.d(v,"g",function(){return ue});var r=e("qLMh"),a=e("k1fw"),s=e("9og8"),p=e("9kvl");function u(o,i){return z.apply(this,arguments)}function z(){return z=Object(s.a)(Object(r.a)().mark(function o(i,t){return Object(r.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(p.f)("/api/admin/templates",Object(a.a)({method:"GET",useCache:!1,params:Object(a.a)(Object(a.a)({},i),{},{per_page:i&&i.pageSize,page:i&&i.current})},t||{})));case 1:case"end":return l.stop()}},o)})),z.apply(this,arguments)}function Y(o,i){return te.apply(this,arguments)}function te(){return te=Object(s.a)(Object(r.a)().mark(function o(i,t){return Object(r.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(p.f)("/api/admin/templates/".concat(i),Object(a.a)({method:"GET"},t||{})));case 1:case"end":return l.stop()}},o)})),te.apply(this,arguments)}function L(o,i){return K.apply(this,arguments)}function K(){return K=Object(s.a)(Object(r.a)().mark(function o(i,t){return Object(r.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(p.f)("/api/admin/templates",Object(a.a)({method:"POST",headers:{"Content-Type":"application/json"},data:i},t||{})));case 1:case"end":return l.stop()}},o)})),K.apply(this,arguments)}function F(o,i,t){return A.apply(this,arguments)}function A(){return A=Object(s.a)(Object(r.a)().mark(function o(i,t,f){return Object(r.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",Object(p.f)("/api/admin/templates/".concat(i),Object(a.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:t},f||{})));case 1:case"end":return m.stop()}},o)})),A.apply(this,arguments)}function de(o,i){return M.apply(this,arguments)}function M(){return M=Object(s.a)(Object(r.a)().mark(function o(i,t){return Object(r.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(p.f)("/api/admin/templates/".concat(i),Object(a.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},t||{})));case 1:case"end":return l.stop()}},o)})),M.apply(this,arguments)}function ae(o){return C.apply(this,arguments)}function C(){return C=Object(s.a)(Object(r.a)().mark(function o(i){return Object(r.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",Object(p.f)("/api/admin/templates/variables",Object(a.a)({method:"GET"},i||{})));case 1:case"end":return f.stop()}},o)})),C.apply(this,arguments)}function ne(o,i){return U.apply(this,arguments)}function U(){return U=Object(s.a)(Object(r.a)().mark(function o(i,t){return Object(r.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(p.f)("/api/admin/templates/".concat(i,"/preview"),Object(a.a)({method:"GET"},t||{})));case 1:case"end":return l.stop()}},o)})),U.apply(this,arguments)}function D(o,i,t){return T.apply(this,arguments)}function T(){return T=Object(s.a)(Object(r.a)().mark(function o(i,t,f){return Object(r.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",Object(p.f)("/api/admin/events/trigger-manually/".concat(i),Object(a.a)({method:"POST",headers:{"Content-Type":"application/json"},data:{users:t}},f||{})));case 1:case"end":return m.stop()}},o)})),T.apply(this,arguments)}function ue(o,i,t){return W.apply(this,arguments)}function W(){return W=Object(s.a)(Object(r.a)().mark(function o(i,t,f){return Object(r.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",Object(p.f)("/api/admin/products/".concat(t,"/trigger-event-manually/").concat(i),Object(a.a)({method:"POST",headers:{"Content-Type":"application/json"}},f||{})));case 1:case"end":return m.stop()}},o)})),W.apply(this,arguments)}},u1OI:function(I,v,e){}}]);
