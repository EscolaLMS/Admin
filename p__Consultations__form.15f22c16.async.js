(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"4f6N":function(X,E,t){"use strict";var W=t("2qtc"),P=t("kLXV"),b=t("9kvl"),C=t("nKUr"),R=t.n(C),N=function(I){var D=I.visible,y=I.setManage;return Object(C.jsx)(P.a,{width:"600px",title:Object(C.jsx)(b.a,{id:"course.validate_edit.header",defaultMessage:"course.validate_edit.header"}),visible:D,onOk:function(){return y({showModal:!1,disableEdit:!1,clicked:!0})},onCancel:function(){return y({showModal:!1,disableEdit:!0,clicked:!1})},okText:"OK",cancelText:"Cancel",children:Object(C.jsx)("p",{children:Object(C.jsx)(b.a,{id:"course.validate_edit.content",defaultMessage:"course.validate_edit.content"})})})};E.a=N},"5qq5":function(X,E,t){"use strict";var W=t("7Kak"),P=t("9yH6"),b=t("VTBJ"),C=t("Ff2n"),R=t("nKUr"),N=t.n(R),U=t("uX+g"),I=t("q1tI"),D=t.n(I),y=t("WFLz"),T=t("adzw"),B=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],c=D.a.forwardRef(function(n,$){var p=n.fieldProps,q=n.options,st=n.radioType,et=n.layout,V=n.proFieldProps,nt=n.valueEnum,rt=Object(C.a)(n,B);return Object(R.jsx)(T.a,Object(b.a)(Object(b.a)({valueType:st==="button"?"radioButton":"radio",ref:$,valueEnum:Object(U.a)(nt,void 0)},rt),{},{fieldProps:Object(b.a)({options:q,layout:et},p),proFieldProps:V,filedConfig:{customLightMode:!0}}))}),d=D.a.forwardRef(function(n,$){var p=n.fieldProps,q=n.children;return Object(R.jsx)(P.a,Object(b.a)(Object(b.a)({},p),{},{ref:$,children:q}))}),Y=Object(y.a)(d,{valuePropName:"checked",ignoreWidth:!0}),g=Y;g.Group=c,g.Button=P.a.Button,g.displayName="ProFormComponent",E.a=g},FJDo:function(X,E,t){"use strict";var W=t("VTBJ"),P=t("Ff2n"),b=t("nKUr"),C=t.n(b),R=t("q1tI"),N=t.n(R),U=t("adzw"),I=["fieldProps","min","proFieldProps","max"],D=function(T,B){var c=T.fieldProps,d=T.min,Y=T.proFieldProps,g=T.max,n=Object(P.a)(T,I);return Object(b.jsx)(U.a,Object(W.a)({valueType:"digit",fieldProps:Object(W.a)({min:d,max:g},c),ref:B,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:Y},n))};E.a=N.a.forwardRef(D)},GZq3:function(X,E,t){},"J+hL":function(X,E,t){},VlvL:function(X,E,t){"use strict";var W=t("9kvl"),P=t("Ty5D"),b=t("nKUr"),C=t.n(b),R=function(U){var I=U.show,D=Object(W.l)();return Object(b.jsx)(P.b,{when:I,message:D.formatMessage({id:"unsaved_changes"})})};E.a=R},eFHa:function(X,E,t){"use strict";t.d(E,"a",function(){return N});var W=t("tJVT"),P=t("q1tI"),b=t("/Tr7"),C=t("jIYg");function R(U){return Object(C.a)(1,arguments),Object(b.a)(U).getTime()<Date.now()}function N(){var U=Object(P.useState)({showModal:!1,disableEdit:!1,clicked:!1}),I=Object(W.a)(U,2),D=I[0],y=I[1],T=function(c){(c==null?void 0:c.status)==="published"&&c!==null&&c!==void 0&&c.active_from&&R(new Date(c==null?void 0:c.active_from))&&!D.clicked?y({showModal:!1,disableEdit:!0,clicked:!1}):y({showModal:!1,disableEdit:!1,clicked:!1})};return{manageCourseEdit:D,setManageCourseEdit:y,validateCourseEdit:T}}},q34N:function(X,E,t){"use strict";var W=t("tJVT"),P=t("0eZe"),b=t("q1tI"),C=t.n(b),R=t("nKUr"),N=t.n(R),U=function(D){var y=D.productable,T=D.type,B=T===void 0?"card":T,c=Object(b.useState)("attributes"),d=Object(W.a)(c,2),Y=d[0],g=d[1];return Object(R.jsx)(P.a,{productable:y,tab:Y,onTabChange:function($){return g($)},type:B})};E.a=U},rh3J:function(X,E,t){"use strict";t.r(E);var W=t("14J3"),P=t("BMrR"),b=t("jCWc"),C=t("kPKH"),R=t("fOrg"),N=t("+KLJ"),U=t("+L6B"),I=t("2/Rp"),D=t("T2oS"),y=t("W9HT"),T=t("miYZ"),B=t("tsqr"),c=t("qLMh"),d=t("k1fw"),Y=t("9og8"),g=t("tJVT"),n=t("q1tI"),$=t.n(n),p=t("VMEa"),q=t("Qurx"),st=t("yj/a"),et=t("lR9U"),V=t("nhC9"),nt=t("hd5d"),rt=t("tMyG"),a=t("9kvl"),mt=t("Ty5D"),ft=t("0WSk"),ht=t("TWax"),tt=t("Gb5Y"),Lt=t("OaEy"),gt=t("2fM7"),Nt=t("iQDF"),lt=t("+eQT"),Vt=t("+BJd"),pt=t("mr32"),Et=t("oBTY"),xt=t("wd/R"),w=t.n(xt),Ht=t("GZq3"),e=t("nKUr"),ct=function(o){return o.local().valueOf()},Mt=function(o){var u=o.value,s=u===void 0?[]:u,x=o.onChange,O=o.format,M=O===void 0?"DD-MM-YYYY HH:mm":O,z=o.selectProps,Q=z===void 0?{}:z,K=Object(n.useState)(!1),F=Object(g.a)(K,2),k=F[0],H=F[1],l=Object(n.useCallback)(function(j){var h=ct(j),m=s.indexOf(h),S=Object(Et.a)(s);m>-1?S.splice(m,1):S.push(h),x(S)},[s]),i=Object(n.useCallback)(function(j){var h=s.indexOf(ct(j))>-1;return Object(e.jsx)("div",{className:"ant-picker-cell-inner",style:h?{position:"relative",zIndex:2,display:"inlineBlock",width:"24px",height:"22px",lineHeight:"22px",backgroundColor:"#1890ff",color:"#fff",margin:"auto",borderRadius:"2px",transition:"background 0.3s, border 0.3s"}:{},children:j.date()})},[s]),v=Object(n.useCallback)(function(j){var h=j.value,m=j.onClose,S=function(){m(),x(s.filter(function(dt){return dt!==h}))};return Object(e.jsx)(pt.a,{onClose:S,closable:!0,children:w()(h).format(M)})},[s]),r=function(){return{disabledMinutes:function(){return Array.from({length:59},function(m,S){return S+1})}}};return Object(e.jsx)(gt.a,Object(d.a)(Object(d.a)({},Q),{},{allowClear:!0,mode:"multiple",value:s,onClear:function(){return x&&x([])},tagRender:v,open:k,onFocus:function(){return H(!0)},onBlur:function(){return H(!1)},dropdownMatchSelectWidth:!1,dropdownClassName:"multipleDropdownClassName",dropdownStyle:{height:"310px",width:"335px",minWidth:"0"},dropdownRender:function(){return Object(e.jsx)(lt.a,{disabledDate:function(m){var S=new Date;return m&&m.valueOf()<=S.setDate(S.getDate()-1)},showTime:{format:"HH"},disabledTime:r,onChange:function(m){return m&&l(m)},open:!0,dateRender:i,style:{visibility:"hidden"},getPopupContainer:function(m){var S=m.parentNode;return S},defaultValue:w()("00:00","HH")})}}))},Pt=Mt,ot=t("c+yx"),ut=t("Gn8c"),Ct=t("VlvL"),it;(function(A){A.draft="draft",A.published="published",A.archived="archived"})(it||(it={}));var Dt=t("eFHa"),yt=t("4f6N"),Jt=t("qbNl"),Tt=t("JBPa"),Gt=t("5Dmo"),Rt=t("3S7+"),Yt=t("Awhp"),jt=t("KrTs"),It=t("Qiat"),St=function(o){var u=o.data,s=o.onChange,x=Object(n.useState)(!1),O=Object(g.a)(x,2),M=O[0],z=O[1],Q=Object(n.useState)(w()(u.date)),K=Object(g.a)(Q,2),F=K[0],k=K[1],H=Object(n.useCallback)(function(l){k(w()(l)),z(!0),Object(tt.a)(u.consultation_term_id,l).then(function(i){i.success?(B.b.success(i.message),s(F)):B.b.error(i.message)}).catch(function(i){return B.b.error(i.toString())}).finally(function(){return z(!1)})},[F]);return Object(e.jsx)($.a.Fragment,{children:Object(e.jsx)(lt.a,{disabledDate:function(i){var v=new Date;return i&&i.valueOf()<=v.setDate(v.getDate()-1)},disabled:M,value:F,showTime:{format:"HH"},onChange:function(i){i&&H(i.toISOString())}})})},bt={reported:"warning",reject:"error",approved:"success"},Ut=[{title:Object(e.jsx)(a.a,{id:"id",defaultMessage:"id"}),dataIndex:"consultation_term_id",hideInSearch:!0},{title:Object(e.jsx)(a.a,{id:"user",defaultMessage:"user"}),dataIndex:"user",render:function(o,u){var s,x,O;return"".concat((s=u.user)===null||s===void 0?void 0:s.first_name," ").concat((x=u.user)===null||x===void 0?void 0:x.last_name," ").concat((O=u.user)===null||O===void 0?void 0:O.email)}},{title:Object(e.jsx)(a.a,{id:"date",defaultMessage:"date"}),dataIndex:"date",render:function(o,u){return w()(u.date).format("yyyy-MM-DD HH:mm")}},{title:Object(e.jsx)(a.a,{id:"status",defaultMessage:"status"}),dataIndex:"status",render:function(o,u){return Object(e.jsx)(jt.a,{status:bt[u.status],text:Object(e.jsx)(a.a,{id:u.status})})}}],Bt=function(o){var u=o.consultation,s=Object(n.useState)(!1),x=Object(g.a)(s,2),O=x[0],M=x[1],z=Object(n.useState)([]),Q=Object(g.a)(z,2),K=Q[0],F=Q[1],k=Object(a.l)(),H=Object(n.useCallback)(function(){M(!0),Object(tt.f)(u).then(function(i){i.success&&F(i.data)}).catch(function(){B.b.error(Object(e.jsx)(a.a,{id:"error",defaultMessage:"error"}))}).finally(function(){return M(!1)})},[u]);Object(n.useEffect)(function(){H()},[u]);var l=Object(n.useCallback)(function(i){return Object(e.jsx)("ul",{className:"events",children:K.map(function(v){if(i.format("yyyy-MM-DD")===w()(v.date).format("yyyy-MM-DD")){var r,j,h,m;return Object(e.jsx)("li",{children:Object(e.jsx)(jt.a,{status:bt[v.status],text:Object(e.jsx)($.a.Fragment,{children:Object(e.jsxs)(Rt.a,{title:"".concat((r=v.user)===null||r===void 0?void 0:r.first_name," ").concat((j=v.user)===null||j===void 0?void 0:j.last_name," ").concat((h=v.user)===null||h===void 0?void 0:h.email),children:[Object(e.jsx)("small",{children:w()(v.date).format("HH:mm")})," ",(m=v.user)===null||m===void 0?void 0:m.email]})})})},v.consultation_term_id)}return null})})},[K]);return Object(e.jsxs)($.a.Fragment,{children:[O&&Object(e.jsx)(y.a,{}),Object(e.jsx)(Tt.a,{dateCellRender:l}),O?Object(e.jsx)(y.a,{}):Object(e.jsx)(It.a,{headerTitle:k.formatMessage({id:"Consultations",defaultMessage:"Consultations"}),loading:O,rowKey:"consultation_term_id",search:!1,request:Object(Y.a)(Object(c.a)().mark(function i(){return Object(c.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",{data:K,total:K.length,success:!0});case 1:case"end":return r.stop()}},i)})),columns:[].concat(Ut,[{title:Object(e.jsx)(a.a,{id:"options",defaultMessage:"options"}),dataIndex:"option",valueType:"option",width:"20%",render:function(v,r){return[Object(e.jsx)(St,{data:r,onChange:function(){return H()}},"change_date")]}}])})]})},Ft=Bt,$t=t("J+hL"),Wt=t("q34N"),At=t("5RzD"),Kt=function(){var o=Object(a.l)(),u=Object(mt.l)(),s=u.consultation,x=u.tab,O=x===void 0?"attributes":x,M=s==="new",z=Object(n.useState)(!1),Q=Object(g.a)(z,2),K=Q[0],F=Q[1],k=Object(n.useState)(),H=Object(g.a)(k,2),l=H[0],i=H[1],v=Object(Dt.a)(),r=v.manageCourseEdit,j=v.setManageCourseEdit,h=v.validateCourseEdit,m=p.a.useForm(),S=Object(g.a)(m,1),Ot=S[0],dt=Object(n.useCallback)(Object(Y.a)(Object(c.a)().mark(function J(){var f,G;return Object(c.a)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,Object(tt.e)(Number(s));case 2:f=Z.sent,f.success&&(O==="attributes"&&h(f.data),i(Object(d.a)(Object(d.a)({},f.data),{},{author_id:f.data.author&&f.data.author.id,categories:(G=f.data.categories)===null||G===void 0?void 0:G.map(ot.a)})));case 4:case"end":return Z.stop()}},J)})),[s]);Object(n.useEffect)(function(){if(M){i({name:"new"});return}dt()},[s]);var at=Object(n.useMemo)(function(){return{onFinish:function(){var J=Object(Y.a)(Object(c.a)().mark(function G(vt){var Z,_;return Object(c.a)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(!r.disableEdit){L.next=3;break}return j({showModal:!0,disableEdit:!0,clicked:!1}),L.abrupt("return");case 3:if(Z=Object(d.a)(Object(d.a)({},vt),{},{image_url:l&&l.image_url,image_path:l&&l.image_url&&Object(ot.j)(l.image_url),logotype_url:l&&l.logotype_url,logotype_path:l&&l.logotype_path&&Object(ot.j)(l.logotype_path)}),!M){L.next=11;break}return L.next=7,Object(tt.c)(Z);case 7:_=L.sent,_.success&&(F(!1),a.f.push("/other/consultations/".concat(_.data.id))),L.next=15;break;case 11:return L.next=13,Object(tt.g)(Number(s),Z);case 13:_=L.sent,_.success&&(F(!1),h(_.data),a.f.push("/other/consultations/".concat(_.data.id,"/").concat(O)));case 15:B.b.success(_.message);case 16:case"end":return L.stop()}},G)}));function f(G){return J.apply(this,arguments)}return f}(),initialValues:l}},[l,s,O,r]);return l?Object(e.jsx)(rt.a,{title:M?Object(e.jsx)(a.a,{id:"consultation"}):Object(e.jsx)(a.a,{id:"consultations.edit"}),header:{breadcrumb:{routes:[{path:"other/consultations",breadcrumbName:o.formatMessage({id:"menu.Other activities.Consultations"})},{path:String(s),breadcrumbName:o.formatMessage({id:"form"})},{path:"/",breadcrumbName:String(l.name)},{path:String(O),breadcrumbName:String(l.name)}]}},children:Object(e.jsxs)(V.a,{tabs:{type:"card",activeKey:O,onChange:function(f){return a.f.push("/other/consultations/".concat(s,"/").concat(f))}},children:[Object(e.jsxs)(V.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"attributes"}),children:[r.disableEdit&&Object(e.jsx)(N.a,{closable:!0,style:{marginBottom:"20px"},type:"warning",message:Object(e.jsx)(a.a,{id:"course_edit_warning_message",defaultMessage:"course_edit_warning_message"}),action:Object(e.jsx)(I.a,{onClick:function(){return j({showModal:!0,disableEdit:!0,clicked:!0})},type:"primary",children:Object(e.jsx)(a.a,{id:"questionnaire.submit",defaultMessage:"questionnaire.submit"})})}),Object(e.jsx)(Ct.a,{show:K})," ",Object(e.jsx)(yt.a,{visible:r.showModal,setManage:j}),Object(e.jsxs)(p.a,Object(d.a)(Object(d.a)({},at),{},{form:Ot,onValuesChange:function(){F(!0)},children:[Object(e.jsxs)(p.a.Group,{children:[Object(e.jsx)(q.a,{width:"md",name:"name",label:Object(e.jsx)(a.a,{id:"name"}),tooltip:Object(e.jsx)(a.a,{id:"name"}),placeholder:o.formatMessage({id:"name",defaultMessage:"name"}),required:!0,disabled:r.disableEdit}),Object(e.jsx)(q.a,{width:"sm",name:"duration",label:Object(e.jsx)(a.a,{id:"duration"}),tooltip:Object(e.jsx)(a.a,{id:"duration"}),placeholder:o.formatMessage({id:"duration",defaultMessage:"duration"}),disabled:r.disableEdit}),Object(e.jsx)(st.a,{name:"status",width:"sm",label:Object(e.jsx)(a.a,{id:"status"}),tooltip:Object(e.jsx)(a.a,{id:"status_consultation_tooltip"}),valueEnum:{draft:o.formatMessage({id:"draft",defaultMessage:"draft"}),published:o.formatMessage({id:"published",defaultMessage:"published"}),archived:o.formatMessage({id:"archived",defaultMessage:"archived"})},initialValue:it.draft,placeholder:o.formatMessage({id:"status"}),rules:[{required:!0,message:Object(e.jsx)(a.a,{id:"select"})}],disabled:r.disableEdit})]}),Object(e.jsxs)(p.a.Group,{children:[Object(e.jsx)(et.a,{width:"sm",name:"active_from",label:Object(e.jsx)(a.a,{id:"active_from"}),tooltip:Object(e.jsx)(a.a,{id:"active_from"}),placeholder:o.formatMessage({id:"active_from",defaultMessage:"active_from"}),disabled:r.disableEdit}),Object(e.jsx)(et.a,{width:"sm",name:"active_to",label:Object(e.jsx)(a.a,{id:"active_to"}),tooltip:Object(e.jsx)(a.a,{id:"active_to"}),placeholder:o.formatMessage({id:"active_to",defaultMessage:"active_to"}),disabled:r.disableEdit}),Object(e.jsx)(p.a.Item,{name:"author_id",label:Object(e.jsx)(a.a,{id:"tutor"}),tooltip:Object(e.jsx)(a.a,{id:"tutor_consultation_tooltip"}),valuePropName:"value",required:!0,children:Object(e.jsx)(ft.a,{})})]}),Object(e.jsx)(p.a.Group,{children:Object(e.jsx)(p.a.Item,{name:"description",label:Object(e.jsx)(a.a,{id:"description"}),tooltip:Object(e.jsx)(a.a,{id:"description_tooltip"}),valuePropName:"value",required:!0,children:Object(e.jsx)(nt.a,{directory:"consultation/".concat(s,"/wysiwyg")})})}),Object(e.jsx)(p.a.Group,{children:Object(e.jsx)(p.a.Item,{valuePropName:"value",name:"proposed_terms",tooltip:Object(e.jsx)(a.a,{id:"proposed_terms_tooltip"}),label:Object(e.jsx)(a.a,{id:"consultations.proposed_terms"}),children:Object(e.jsx)(Pt,{})})})]}))]},"attributes"),!M&&Object(e.jsx)(V.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"product"}),disabled:r.disableEdit,children:s&&Object(e.jsx)(Wt.a,{type:"line",productable:{class_type:"App\\Models\\Consultation",class_id:s,name:String(l.name),quantity:1}})},"product"),!M&&Object(e.jsx)(V.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"media"}),disabled:r.disableEdit,children:Object(e.jsx)(p.a,Object(d.a)(Object(d.a)({},at),{},{children:Object(e.jsx)(ut.a,{folder:"consultation/".concat(s),title:"image",action:"/api/admin/consultations/".concat(s),src_name:"image_url",form_name:"image",getUploadedSrcField:function(f){return f.file.response.data.image_url},setPath:function(f){return i(function(G){return Object(d.a)(Object(d.a)({},G),f)})}})}))},"media"),!M&&Object(e.jsx)(V.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"categories"}),disabled:r.disableEdit,children:Object(e.jsx)(P.a,{children:Object(e.jsx)(C.a,{span:12,children:Object(e.jsx)(p.a,Object(d.a)(Object(d.a)({},at),{},{children:Object(e.jsx)(p.a.Item,{label:Object(e.jsx)(a.a,{id:"categories"}),name:"categories",valuePropName:"value",children:Object(e.jsx)(ht.a,{})})}))})})},"categories")," ",!M&&Object(e.jsx)(V.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"branding"}),disabled:r.disableEdit,children:Object(e.jsx)(p.a,Object(d.a)(Object(d.a)({},at),{},{children:Object(e.jsx)(ut.a,{folder:"consultation/".concat(s),title:o.formatMessage({id:"logotype"}),action:"/api/admin/consultations/".concat(s),src_name:"logotype_url",form_name:"logotype",getUploadedSrcField:function(f){return f.file.response.data.logotype_url},setPath:function(f){return i(function(G){return Object(d.a)(Object(d.a)({},G),f)})}})}))},"branding")," ",!M&&Object(e.jsx)(V.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"user_submission"}),disabled:r.disableEdit,children:Object(e.jsx)(P.a,{children:Object(e.jsx)(C.a,{span:12,children:s&&Object(e.jsx)(At.a,{id:Number(s),type:"App\\Models\\Consultation"})})})},"user_submission"),!M&&Object(e.jsx)(V.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"consultations.calendar"}),children:Object(e.jsx)(Ft,{consultation:Number(s)})},"calendar")]})}):Object(e.jsx)(y.a,{})},zt=E.default=Kt}}]);
