(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"5YLw":function(W,p,e){"use strict";var O=e("DBJ/"),h=e("q1tI"),M=e.n(h),u=e("nKUr"),x=e.n(u),f=function(I){var j=I.onSuccess,d=I.onError;return Object(u.jsx)(O.a,{url:"/api/admin/hh5p/content/upload",name:"h5p_file",accept:".h5p",onChange:function(b){b.file.status==="done"&&b.file.response&&j(b.file.response),b.file.status==="error"&&d()}})};p.a=f},"DBJ/":function(W,p,e){"use strict";var O=e("k1fw"),h=e("y8nQ"),M=e("Vl3Y"),u=e("etVw"),x=e("9kvl"),f=e("qFDU"),g=e("nKUr"),I=e.n(g);function j(d){var R=d.onChange,b=d.onUpload,P=d.url,T=d.name,a=d.extra,v=d.accept,i=d.data,s=d.wrapInForm,c=s===void 0?!0:s,l=d.title,o=d.formProps,D=Object(x.j)();return i&&i[T]&&delete i[T],Object(g.jsx)(f.a,{condition:c,wrap:function(U){return Object(g.jsx)(M.a,Object(O.a)(Object(O.a)({},o),{},{children:U}))},children:Object(g.jsx)(u.a,{title:l||" ".concat(D.formatMessage({id:"upload_click_here"})),placeholder:D.formatMessage({id:"upload_click_here"}),onChange:function(U){R&&R(U),U.file.status==="done"&&b&&b(U.file.response)},label:Object(g.jsx)(x.a,{id:"upload"}),max:2,fieldProps:{data:i,accept:v,name:T,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(P),extra:a})})}p.a=j},Unir:function(W,p,e){"use strict";e.r(p);var O=e("P2fV"),h=e("NJEC"),M=e("5Dmo"),u=e("3S7+"),x=e("+L6B"),f=e("2/Rp"),g=e("qLMh"),I=e("miYZ"),j=e("tsqr"),d=e("9og8"),R=e("tJVT"),b=e("xvlK"),P=e("q1tI"),T=e.n(P),a=e("9kvl"),v=e("55Ip"),i=e("tMyG"),s=e("Qiat"),c=e("nzng"),l=e("G3dp"),o=e("/MfK"),D=e("2PG1"),S=e("4KAj"),U=e("5YLw"),t=e("nKUr"),V=e.n(t),G=function(){var $=Object(P.useState)(!1),w=Object(R.a)($,2),z=w[0],L=w[1],y=Object(P.useRef)(),F=Object(a.j)(),J=Object(P.useCallback)(function(){var m=Object(d.a)(Object(g.a)().mark(function r(n){var A,C;return Object(g.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return L(!0),A=j.b.loading(Object(t.jsx)(a.a,{id:"loading",defaultMessage:"loading"})),_.prev=2,_.next=5,Object(c.e)(n);case 5:return A(),j.b.success(Object(t.jsx)(a.a,{id:"success",defaultMessage:"success"})),L(!1),(C=y.current)===null||C===void 0||C.reload(),_.abrupt("return",!0);case 12:return _.prev=12,_.t0=_.catch(2),A(),j.b.error(Object(t.jsx)(a.a,{id:"error",defaultMessage:"error"})),L(!1),_.abrupt("return",!1);case 18:case"end":return _.stop()}},r,null,[[2,12]])}));return function(r){return m.apply(this,arguments)}}(),[y]),Y=Object(P.useCallback)(function(){var m=Object(d.a)(Object(g.a)().mark(function r(n,A){var C,K,_,H,B;return Object(g.a)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return L(!0),C=j.b.loading(Object(t.jsx)(a.a,{id:"loading",defaultMessage:"loading"})),E.prev=2,E.next=5,fetch("".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/admin/hh5p/content/").concat(n,"/export"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}});case 5:if(K=E.sent,K.ok){E.next=8;break}throw Error("Error occured");case 8:return C(),L(!1),j.b.success(Object(t.jsx)(a.a,{id:"downloading",defaultMessage:"Downloading"})),E.next=13,K.blob();case 13:_=E.sent,H=window.URL.createObjectURL(_),B=document.createElement("a"),B.href=H,B.download="".concat(A.split(" ").join("-").toLocaleLowerCase()),B.click(),B.remove(),E.next=28;break;case 22:return E.prev=22,E.t0=E.catch(2),C(),L(!1),j.b.error(Object(t.jsx)(a.a,{id:"cant-download-file",defaultMessage:"Can't download file"})),E.abrupt("return");case 28:case"end":return E.stop()}},r,null,[[2,22]])}));return function(r,n){return m.apply(this,arguments)}}(),[]),N=[{title:Object(t.jsx)(a.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",sorter:!1,search:!1},{title:Object(t.jsx)(a.a,{id:"newH5P",defaultMessage:"newH5P"}),dataIndex:"upload",hideInSearch:!1,hideInTable:!0,renderFormItem:function(){return[Object(t.jsx)(U.a,{onSuccess:function(){y.current&&y.current.reload(),j.b.success(Object(t.jsx)(a.a,{id:"H5P_uploaded",defaultMessage:"new H5P uploaded successfully"}))},onError:function(){return j.b.error(Object(t.jsx)(a.a,{id:"error",defaultMessage:"error"}))}},"upload")]}},{title:Object(t.jsx)(a.a,{id:"title",defaultMessage:"title"}),dataIndex:"title",sorter:function(r,n){return r.title.length-n.title.length},render:function(r,n){return n.title}},{title:Object(t.jsx)(a.a,{id:"library",defaultMessage:"library"}),dataIndex:"library",sorter:function(r,n){return r.library.title.length-n.library.title.length},search:!1,render:function(r,n){return n.library.title}},{title:Object(t.jsx)(a.a,{id:"library_id",defaultMessage:"library_id"}),dataIndex:"library_id",sorter:function(r,n){return r.library.id-n.library.id},render:function(r,n){return n.library.id}},{title:Object(t.jsx)(a.a,{id:"count_h5p",defaultMessage:"count_h5p"}),dataIndex:"count_h5p",sorter:function(r,n){return r.count_h5p-n.count_h5p},search:!1,render:function(r,n){return n.count_h5p}},{title:Object(t.jsx)(a.a,{id:"options",defaultMessage:"options"}),dataIndex:"option",valueType:"option",render:function(r,n){return[Object(t.jsx)(v.a,{to:"/courses/h5ps/".concat(n.id),children:Object(t.jsx)(u.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(f.a,{type:"primary",icon:Object(t.jsx)(l.a,{})})})},"edit"),Object(t.jsx)(h.a,{disabled:n.count_h5p!==0,title:Object(t.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:function(){return n.id&&J(n.id)},okText:Object(t.jsx)(a.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(a.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(u.a,{title:Object(t.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(f.a,{disabled:n.count_h5p!==0,type:"primary",icon:Object(t.jsx)(o.a,{}),danger:!0})})},"delete"),Object(t.jsx)(v.a,{to:"/courses/h5ps/preview/".concat(n.id),children:Object(t.jsx)(u.a,{title:Object(t.jsx)(a.a,{id:"preview",defaultMessage:"preview"}),children:Object(t.jsx)(f.a,{icon:Object(t.jsx)(D.a,{})})})},"preview"),Object(t.jsx)(u.a,{title:Object(t.jsx)(a.a,{id:"export",defaultMessage:"export"}),children:Object(t.jsx)(f.a,{icon:Object(t.jsx)(S.a,{}),onClick:function(){return Y(n.id,n.title)}})},"export")]}}];return Object(t.jsx)(i.a,{children:Object(t.jsx)(s.a,{loading:z,headerTitle:F.formatMessage({id:"menu.Courses.H5Ps",defaultMessage:"H5Ps List"}),actionRef:y,rowKey:"id",search:{},toolBarRender:function(){return[Object(t.jsx)(v.a,{to:"/courses/h5ps/new",children:Object(t.jsxs)(f.a,{type:"primary",children:[Object(t.jsx)(b.a,{})," ",Object(t.jsx)(a.a,{id:"new",defaultMessage:"new"})]},"primary")},"new")]},request:function(r){var n=r.pageSize,A=r.current,C=r.title,K=r.library_id;return L(!0),Object(c.d)({title:C,library_id:K,pageSize:n,current:A}).then(function(_){return L(!1),_.success?{data:_.data,total:_.meta.total,success:!0}:[]})},columns:N})})};p.default=G},nzng:function(W,p,e){"use strict";e.d(p,"d",function(){return x}),e.d(p,"c",function(){return j}),e.d(p,"b",function(){return d}),e.d(p,"f",function(){return R}),e.d(p,"e",function(){return P}),e.d(p,"a",function(){return a});var O=e("qLMh"),h=e("k1fw"),M=e("9og8"),u=e("9kvl");function x(i,s){return f.apply(this,arguments)}function f(){return f=Object(M.a)(Object(O.a)().mark(function i(s,c){return Object(O.a)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(u.g)("/api/admin/hh5p/content",Object(h.a)({method:"GET",params:Object(h.a)(Object(h.a)({},s),{},{per_page:s.pageSize,page:s.current})},c||{})));case 1:case"end":return o.stop()}},i)})),f.apply(this,arguments)}function g(i,s){return I.apply(this,arguments)}function I(){return I=Object(M.a)(Object(O.a)().mark(function i(s,c){return Object(O.a)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(u.g)("/api/admin/hh5p/content/".concat(s),Object(h.a)({method:"GET"},c||{})));case 1:case"end":return o.stop()}},i)})),I.apply(this,arguments)}var j=function(s){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en",l=arguments.length>2?arguments[2]:void 0,o=s?"/api/admin/hh5p/editor/".concat(s):"/api/admin/hh5p/editor";return o=c?"".concat(o,"?lang=").concat(c):o,Object(u.g)(o,Object(h.a)({method:"GET"},l||{}))},d=function(s){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en",l=arguments.length>2?arguments[2]:void 0,o="/api/admin/hh5p/content/".concat(s);return o=c?"".concat(o,"?lang=").concat(c):o,Object(u.g)(o,Object(h.a)({method:"GET"},l||{}))};function R(i,s,c){return b.apply(this,arguments)}function b(){return b=Object(M.a)(Object(O.a)().mark(function i(s,c,l){return Object(O.a)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",Object(u.g)(c?"/api/admin/hh5p/content/".concat(c):"/api/admin/hh5p/content",Object(h.a)({method:"POST",headers:{"Content-Type":"application/json"},data:s},l||{})));case 1:case"end":return D.stop()}},i)})),b.apply(this,arguments)}function P(i){return T.apply(this,arguments)}function T(){return T=Object(M.a)(Object(O.a)().mark(function i(s){return Object(O.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(u.g)("/api/admin/hh5p/content/".concat(s),{method:"DELETE"}));case 1:case"end":return l.stop()}},i)})),T.apply(this,arguments)}function a(i){return v.apply(this,arguments)}function v(){return v=Object(M.a)(Object(O.a)().mark(function i(s){return Object(O.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(u.g)("/api/admin/hh5p/content?per_page=0",Object(h.a)({method:"GET"},s||{})));case 1:case"end":return l.stop()}},i)})),v.apply(this,arguments)}}}]);
