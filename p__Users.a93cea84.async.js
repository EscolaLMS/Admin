(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{"DBJ/":function(N,g,t){"use strict";var W=t("k1fw"),Z=t("y8nQ"),w=t("Vl3Y"),T=t("tJVT"),H=t("etVw"),m=t("q1tI"),re=t.n(m),E=t("9kvl"),C=t("qFDU"),p=t("nKUr"),P=t.n(p);function u(r){var S=r.onChange,A=r.onUpload,b=r.url,a=r.name,L=r.extra,J=r.accept,x=r.data,U=r.wrapInForm,R=U===void 0?!0:U,y=r.title,F=r.formProps,h=r.maxFiles,V=r.clearListAfterUpload,z=r.hideLabel,G=Object(m.useState)(),K=Object(T.a)(G,2),v=K[0],$=K[1],e=Object(E.l)();return x&&x[a]&&delete x[a],Object(p.jsx)(C.a,{condition:R,wrap:function(f){return Object(p.jsx)(w.a,Object(W.a)(Object(W.a)({},F),{},{children:f}))},children:Object(p.jsx)(H.a,{title:y||" ".concat(e.formatMessage({id:"upload_click_here"})),placeholder:e.formatMessage({id:"upload_click_here"}),onChange:function(f){$(f),S&&S(f),f.file.status==="done"&&(A&&A(f.file.response),V&&$(void 0))},label:!z&&Object(p.jsx)(E.a,{id:"upload"}),max:h!=null?h:2,fieldProps:{data:x,accept:J,name:a,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(b),extra:L,fileList:v==null?void 0:v.fileList})})}g.a=u},n6PA:function(N,g,t){},u7Dd:function(N,g,t){"use strict";t.r(g),t.d(g,"TableColumns",function(){return f});var W=t("P2fV"),Z=t("NJEC"),w=t("5Dmo"),T=t("3S7+"),H=t("+L6B"),m=t("2/Rp"),re=t("miYZ"),E=t("tsqr"),C=t("tJVT"),p=t("+BJd"),P=t("mr32"),u=t("qLMh"),r=t("9og8"),S=t("4KAj"),A=t("xvlK"),b=t("q1tI"),a=t("9kvl"),L=t("55Ip"),J=t("tMyG"),x=t("Qiat"),U=t("sWYD"),R=t("VK58"),y=t("k1fw");function F(O,i){return h.apply(this,arguments)}function h(){return h=Object(r.a)(Object(u.a)().mark(function O(i,s){return Object(u.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(a.i)("/api/admin/csv/users",Object(y.a)({params:Object(y.a)(Object(y.a)({},i),{},{per_page:i&&i.pageSize,page:i&&i.current}),method:"GET",headers:{accept:"application/csv"},useCache:!1},s||{})));case 1:case"end":return c.stop()}},O)})),h.apply(this,arguments)}var V=t("G3dp"),z=t("/MfK"),G=t("mGZj"),K=t("DBJ/"),v=t("nhC9"),$=t("n6PA"),e=t("nKUr"),Q=function(){var O=Object(r.a)(Object(u.a)().mark(function i(s){return Object(u.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(R.c)(s);case 2:return c.abrupt("return",!0);case 3:case"end":return c.stop()}},i)}));return function(s){return O.apply(this,arguments)}}(),f=[{title:Object(e.jsx)(a.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0},{title:Object(e.jsx)(a.a,{id:"created_at",defaultMessage:"created_at"}),dataIndex:"created_at",hideInSearch:!0,sorter:!0,render:function(i,s){return s.created_at&&Object(U.a)(new Date(s.created_at),G.a)}},{title:Object(e.jsx)(a.a,{id:"first_name",defaultMessage:"first_name"}),dataIndex:"first_name",hideInSearch:!0,sorter:!0},{title:Object(e.jsx)(a.a,{id:"last_name",defaultMessage:"last_name"}),dataIndex:"last_name",hideInSearch:!0,sorter:!0},{title:Object(e.jsx)(a.a,{id:"email",defaultMessage:"email"}),dataIndex:"email",hideInSearch:!0,sorter:!0},{title:Object(e.jsx)(a.a,{id:"search",defaultMessage:"search"}),dataIndex:"search",hideInSearch:!1,hideInTable:!0,hideInDescriptions:!0,tooltip:Object(e.jsx)(a.a,{id:"search_tooltip_1"})},{title:Object(e.jsx)(a.a,{id:"is_active"}),dataIndex:"is_active",hideInSearch:!0,sorter:!0,render:function(i,s){return[Object(e.jsx)(P.a,{color:s.is_active?"green":"red",children:s.is_active?Object(e.jsx)(a.a,{id:"Active"}):Object(e.jsx)(a.a,{id:"Inactive"})},"is_active")]}},{title:Object(e.jsx)(a.a,{id:"email_verified",defaultMessage:"email_verified"}),dataIndex:"email_verified",hideInSearch:!0,render:function(i,s){return[Object(e.jsx)(P.a,{color:s.email_verified?"green":"red",children:s.email_verified?Object(e.jsx)(a.a,{id:"verified"}):Object(e.jsx)(a.a,{id:"unverified"})},"email_verified")]}},{title:Object(e.jsx)(a.a,{id:"created_after",defaultMessage:"Created After"}),key:"from",dataIndex:"from",valueType:"date",hideInTable:!0,hideInDescriptions:!0},{title:Object(e.jsx)(a.a,{id:"created_before",defaultMessage:"Created Before"}),key:"to",dataIndex:"to",valueType:"date",hideInTable:!0,hideInDescriptions:!0},{title:Object(e.jsx)(a.a,{id:"gt_last_login_day",defaultMessage:">= Login last n days"}),key:"gt_last_login_day",dataIndex:"gt_last_login_day",valueType:"digit",hideInTable:!0,hideInDescriptions:!0},{title:Object(e.jsx)(a.a,{id:"lt_last_login_day",defaultMessage:"<= Login last n days"}),key:"lt_last_login_day",dataIndex:"lt_last_login_day",valueType:"digit",hideInTable:!0,hideInDescriptions:!0},{title:Object(e.jsx)(a.a,{id:"roles",defaultMessage:"roles"}),dataIndex:"roles",hideInSearch:!0,render:function(i,s){return s.roles.map(function(I){return Object(e.jsx)(P.a,{children:I},I)})}}],se=function(){var i=Object(b.useRef)(),s=Object(a.l)(),I=Object(b.useState)({}),c=Object(C.a)(I,2),X=c[0],ne=c[1],ie=Object(b.useState)(!1),_=Object(C.a)(ie,2),le=_[0],k=_[1],de=Object(b.useCallback)(Object(r.a)(Object(u.a)().mark(function D(){var n,l,o;return Object(u.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return k(!0),d.prev=1,d.next=4,F(X);case 4:n=d.sent,n&&(l="data:text/csv;charset=utf-8,"+n,o=document.createElement("a"),o.href=l,o.download="users.csv",document.body.appendChild(o),o.click(),document.body.removeChild(o)),d.next=11;break;case 8:d.prev=8,d.t0=d.catch(1),console.error(d.t0);case 11:return d.prev=11,k(!1),d.finish(11);case 14:case"end":return d.stop()}},D,null,[[1,8,11,14]])})),[X]);return Object(e.jsx)(J.a,{children:Object(e.jsxs)(v.a,{tabs:{type:"card",activeKey:"list",onChange:function(n){switch(n){case"list":return a.f.push("/users");case"fields":return a.f.push("/users/fields");default:return a.f.push("/users/".concat(n))}}},children:[Object(e.jsx)(v.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"list"}),children:Object(e.jsx)(x.a,{headerTitle:s.formatMessage({id:"menu.Users",defaultMessage:"users"}),actionRef:i,rowKey:"key",search:{layout:"vertical"},toolBarRender:function(){return[Object(e.jsx)(K.a,{title:s.formatMessage({id:"import_users"}),url:"/api/admin/csv/users",name:"file",accept:".csv",data:{return_url:"".concat(window.location.origin,"/#/user/reset-password")},onChange:function(l){l.file.status==="done"&&l.file.response&&l.file.response.success&&E.b.success(l.file.response.message),l.file.response&&l.file.status==="error"&&(E.b.error(l.file.response.message),console.error(l.file.response))}},"upload"),Object(e.jsxs)(m.a,{loading:le,type:"primary",onClick:function(){return de()},children:[Object(e.jsx)(S.a,{})," ",Object(e.jsx)(a.a,{id:"export",defaultMessage:"export"})]},"primary"),Object(e.jsx)(L.a,{to:"/users/list/new",children:Object(e.jsxs)(m.a,{type:"primary",children:[Object(e.jsx)(A.a,{})," ",Object(e.jsx)(a.a,{id:"new",defaultMessage:"new"})]},"primary")},"link")]},request:function(n,l){var o=n.pageSize,M=n.current,d=n.search,j=n.role,q=n.from,ee=n.to,te=n.gt_last_login_day,ae=n.lt_last_login_day;ne({pageSize:o,current:M,search:d,role:j,from:q,to:ee,gt_last_login_day:te,lt_last_login_day:ae});var B=l&&Object.entries(l)[0],ce=j&&j.toString()==="all"?void 0:j;return Object(R.n)({per_page:o,page:M,search:d,role:ce,from:q,to:ee,gt_last_login_day:te,lt_last_login_day:ae,order_by:B&&B[0],order:B?B[1]==="ascend"?"ASC":"DESC":void 0}).then(function(Y){return Y.success?{data:Y.data,total:Y.meta.total,success:!0}:[]})},columns:[].concat(f,[{hideInSearch:!0,title:Object(e.jsx)(a.a,{id:"pages.searchTable.titleOption"}),dataIndex:"option",valueType:"option",render:function(n,l){return[Object(e.jsx)(L.a,{to:"/users/".concat(l.id,"/user_info"),children:Object(e.jsx)(T.a,{title:Object(e.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(e.jsx)(m.a,{type:"primary",icon:Object(e.jsx)(V.a,{})})})},"edit"),Object(e.jsx)(Z.a,{title:Object(e.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(r.a)(Object(u.a)().mark(function o(){var M;return Object(u.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,Q(l.id);case 2:M=j.sent,M&&i.current&&i.current.reload();case 4:case"end":return j.stop()}},o)})),okText:Object(e.jsx)(a.a,{id:"yes"}),cancelText:Object(e.jsx)(a.a,{id:"no"}),children:Object(e.jsx)(T.a,{title:Object(e.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(e.jsx)(m.a,{type:"primary",icon:Object(e.jsx)(z.a,{}),danger:!0})})},"delete")]}}])})},"list"),Object(e.jsx)(v.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"ModelFields"})},"fields")]})})},oe=g.default=se}}]);
