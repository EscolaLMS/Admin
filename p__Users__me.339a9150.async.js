(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{"+up7":function(J,_,e){"use strict";e.d(_,"f",function(){return g}),e.d(_,"d",function(){return C}),e.d(_,"b",function(){return p}),e.d(_,"h",function(){return o}),e.d(_,"c",function(){return P}),e.d(_,"e",function(){return W}),e.d(_,"a",function(){return T}),e.d(_,"g",function(){return u});var f=e("k1fw"),E=e("9og8"),L=e("WmNS"),r=e.n(L),c=e("9kvl");function g(s,a){return d.apply(this,arguments)}function d(){return d=Object(E.a)(r.a.mark(function s(a,O){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(c.f)("/api/admin/settings",Object(f.a)({method:"GET",useCache:!1,params:Object(f.a)(Object(f.a)({},a),{},{per_page:a.pageSize,page:a.current})},O||{})));case 1:case"end":return t.stop()}},s)})),d.apply(this,arguments)}function C(s,a){return l.apply(this,arguments)}function l(){return l=Object(E.a)(r.a.mark(function s(a,O){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(c.f)("/api/admin/settings/".concat(a),Object(f.a)({method:"GET",useCache:!1},O||{})));case 1:case"end":return t.stop()}},s)})),l.apply(this,arguments)}function p(s,a){return M.apply(this,arguments)}function M(){return M=Object(E.a)(r.a.mark(function s(a,O){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(c.f)("/api/admin/settings",Object(f.a)({method:"POST",headers:{"Content-Type":"application/json"},data:a},O||{})));case 1:case"end":return t.stop()}},s)})),M.apply(this,arguments)}function o(s,a,O){return h.apply(this,arguments)}function h(){return h=Object(E.a)(r.a.mark(function s(a,O,i){return r.a.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",Object(c.f)("/api/admin/settings/".concat(a),Object(f.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:O},i||{})));case 1:case"end":return A.stop()}},s)})),h.apply(this,arguments)}function P(s,a){return b.apply(this,arguments)}function b(){return b=Object(E.a)(r.a.mark(function s(a,O){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(c.f)("/api/admin/settings/".concat(a),Object(f.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},O||{})));case 1:case"end":return t.stop()}},s)})),b.apply(this,arguments)}function W(s){return y.apply(this,arguments)}function y(){return y=Object(E.a)(r.a.mark(function s(a){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(c.f)("/api/admin/settings/groups",Object(f.a)({method:"GET",useCache:!1},a||{})));case 1:case"end":return i.stop()}},s)})),y.apply(this,arguments)}function T(s){return n.apply(this,arguments)}function n(){return n=Object(E.a)(r.a.mark(function s(a){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(c.f)("/api/admin/config",Object(f.a)({method:"GET",useCache:!1},a||{})));case 1:case"end":return i.stop()}},s)})),n.apply(this,arguments)}function u(s,a){return B.apply(this,arguments)}function B(){return B=Object(E.a)(r.a.mark(function s(a,O){var i,t;return r.a.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return i=a.key,t=a.value,x.abrupt("return",Object(c.f)("/api/admin/config",Object(f.a)({method:"POST",data:{config:[{key:i,value:t}]}},O||{})));case 2:case"end":return x.stop()}},s)})),B.apply(this,arguments)}},"5ddx":function(J,_,e){"use strict";var f=e("9og8"),E=e("+L6B"),L=e("2/Rp"),r=e("tJVT"),c=e("WmNS"),g=e.n(c),d=e("q1tI"),C=e.n(d),l=e("9kvl"),p=e("Qiat"),M=e("VK58"),o=e("xvlK"),h=e("Xcxh"),P=e("y8nQ"),b=e("Vl3Y"),W=e("rmhi"),y=e("VMEa"),T=e("Qurx"),n=e("nKUr"),u=function(i){var t=Object(l.i)(),A=i.visible,x=i.onVisibleChange,w=i.onFinish,G=b.a.useForm(),I=Object(r.a)(G,1),S=I[0];return Object(d.useEffect)(function(){return function(){S.resetFields()}},[]),Object(n.jsx)(W.a,{form:S,title:t.formatMessage({id:"newSetting",defaultMessage:"newSetting"}),width:"30vw",visible:A,onVisibleChange:x,onFinish:w,children:Object(n.jsxs)(y.b.Group,{children:[Object(n.jsx)(T.a,{label:Object(n.jsx)(l.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"}),Object(n.jsx)(T.a,{label:Object(n.jsx)(l.a,{id:"value",defaultMessage:"value"}),rules:[{required:!0}],width:"md",name:"value"})]})})},B=u,s=function(i){var t=i.user,A=i.isProfile,x=A===void 0?!1:A,w=Object(d.useRef)(),G=Object(l.i)(),I=Object(d.useState)(!1),S=Object(r.a)(I,2),Q=S[0],F=S[1],X=Object(d.useState)("PATCH"),H=Object(r.a)(X,2),Z=H[0],z=H[1],Y=[{title:Object(n.jsx)(l.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(n.jsx)(l.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInSearch:!0}],k=Object(d.useCallback)(function(K){var U=K&&Object.entries(K).map(function(V){return{key:V[0],value:V[1]}});return U},[t]);return Object(n.jsxs)(C.a.Fragment,{children:[Object(n.jsx)(p.a,{headerTitle:G.formatMessage({id:"menu.settings"}),actionRef:w,rowKey:"id",search:!1,toolBarRender:x?function(){return[Object(n.jsxs)(L.a,{type:"primary",onClick:function(){F(-1),z("PATCH")},children:[Object(n.jsx)(o.a,{})," ",Object(n.jsx)(l.a,{id:"pages.searchTable.new"})]},"primary"),Object(n.jsxs)(L.a,{color:"yellow",type:"primary",onClick:function(){F(-1),z("PUT")},children:[Object(n.jsx)(h.a,{})," ",Object(n.jsx)(l.a,{id:"user.settings.overwrite"})]},"primary")]}:!1,request:function(){return Object(M.c)(Number(t)).then(function(U){return U.success?{data:k(U.data)}:[]})},columns:Y}),Object(n.jsx)(B,{id:Q,visible:Number.isInteger(Q),onVisibleChange:function(U){return U===!1&&F(!1)},onFinish:function(){var K=Object(f.a)(g.a.mark(function U(V){var m;return g.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,Object(M.f)(Number(t),Z,V);case 2:m=v.sent,m.success&&(F(!1),w.current&&w.current.reload());case 4:case"end":return v.stop()}},U)}));return function(U){return K.apply(this,arguments)}}()})]})},a=_.a=s},"DBJ/":function(J,_,e){"use strict";var f=e("y8nQ"),E=e("Vl3Y"),L=e("etVw"),r=e("q1tI"),c=e.n(r),g=e("9kvl"),d=e("qFDU"),C=e("nKUr"),l=e.n(C),p=function(o){var h=o.onChange,P=o.url,b=o.name,W=o.extra,y=o.accept,T=o.data,n=o.wrapInForm,u=n===void 0?!0:n,B=Object(g.i)();return T&&T[b]&&delete T[b],Object(C.jsx)(d.a,{condition:u,wrap:function(a){return Object(C.jsx)(E.a,{children:a})},children:Object(C.jsx)(L.a,{title:Object(C.jsx)(g.a,{id:"upload_click_here"}),placeholder:B.formatMessage({id:"upload_click_here"}),onChange:h,label:Object(C.jsx)(g.a,{id:"upload"}),max:2,fieldProps:{data:T,accept:y,name:b,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(P),extra:W})})};_.a=p},Jfn2:function(J,_,e){"use strict";var f=e("k1fw"),E=e("XCrF"),L=e("1GRj"),r=e("PpiC"),c=e("q1tI"),g=e.n(c),d=e("nKUr"),C=e.n(d),l=function(M){var o=M.path,h=M.size,P=M.srcSizes,b=M.alt,W=b===void 0?"LMS Image":b,y=Object(r.a)(M,["path","size","srcSizes","alt"]),T="".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(o,"&w=").concat(P?P[0]:h),n=P&&P.map(function(u){return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(o,"&w=").concat(u," ").concat(u,"w")});return Object(d.jsx)("div",{className:"escolalms-image",children:Object(d.jsx)(L.a,Object(f.a)({src:T,srcSet:n&&n.join(","),alt:W},y))})};_.a=l},fWLy:function(J,_,e){"use strict";e.r(_);var f=e("T2oS"),E=e("W9HT"),L=e("miYZ"),r=e("tsqr"),c=e("k1fw"),g=e("9og8"),d=e("tJVT"),C=e("WmNS"),l=e.n(C),p=e("q1tI"),M=e.n(p),o=e("VMEa"),h=e("Qurx"),P=e("nhC9"),b=e("VK58"),W=e("tMyG"),y=e("DBJ/"),T=e("Jfn2"),n=e("Ty5D"),u=e("9kvl"),B=e("5ddx"),s=e("+up7"),a=e("nKUr"),O=e.n(a);_.default=function(){var i=Object(n.g)(),t=Object(u.i)(),A=i.tab,x=A===void 0?"general":A,w=Object(p.useState)(),G=Object(d.a)(w,2),I=G[0],S=G[1],Q=Object(p.useState)([]),F=Object(d.a)(Q,2),X=F[0],H=F[1],Z=Object(p.useState)([]),z=Object(d.a)(Z,2),Y=z[0],k=z[1],K=Object(p.useCallback)(Object(g.a)(l.a.mark(function m(){var j;return l.a.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,Object(s.a)();case 2:j=D.sent,j.success&&(H(j.data.escola_auth.additional_fields_required.value),k(j.data.escola_auth.additional_fields.value));case 4:case"end":return D.stop()}},m)})),[]);Object(p.useEffect)(function(){var m=function(){var j=Object(g.a)(l.a.mark(function v(){var D;return l.a.wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,Object(b.d)();case 2:D=$.sent,D.success&&S(Object(c.a)(Object(c.a)({},D.data),{},{bio:D.data.bio||""}));case 4:case"end":return $.stop()}},v)}));return function(){return j.apply(this,arguments)}}();K(),m()},[]);var U=Object(p.useMemo)(function(){return{onFinish:function(){var m=Object(g.a)(l.a.mark(function v(D){var N;return l.a.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,Object(b.g)(D);case 2:N=R.sent,r.default.success(N.message);case 4:case"end":return R.stop()}},v)}));function j(v){return m.apply(this,arguments)}return j}(),initialValues:I}},[I]),V=Object(p.useMemo)(function(){return{onFinish:function(){var m=Object(g.a)(l.a.mark(function v(D){var N;return l.a.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,Object(b.h)(D);case 2:N=R.sent,r.default.success(N.message);case 4:case"end":return R.stop()}},v)}));function j(v){return m.apply(this,arguments)}return j}(),initialValues:I}},[I]);return I?Object(a.jsx)(W.a,{title:Object(a.jsx)(u.a,{id:"my_profile"}),header:{breadcrumb:{routes:[{path:"users",breadcrumbName:t.formatMessage({id:"menu.Users"})},{path:"me",breadcrumbName:t.formatMessage({id:"my_profile"})},{path:String(x),breadcrumbName:t.formatMessage({id:String(x)})}]}},children:Object(a.jsxs)(P.a,{tabs:{type:"card",activeKey:x,onChange:function(j){return u.d.push("/users/me/".concat(j))}},children:[Object(a.jsx)(P.a.TabPane,{tab:Object(a.jsx)(u.a,{id:"general"}),children:Object(a.jsxs)(o.b,Object(c.a)(Object(c.a)({},U),{},{children:[Object(a.jsxs)(o.b.Group,{children:[Object(a.jsx)(h.a,{width:"md",name:"first_name",label:Object(a.jsx)(u.a,{id:"first_name"}),tooltip:Object(a.jsx)(u.a,{id:"first_name"}),placeholder:t.formatMessage({id:"first_name"}),required:!0}),Object(a.jsx)(h.a,{width:"md",name:"last_name",label:Object(a.jsx)(u.a,{id:"last_name"}),tooltip:Object(a.jsx)(u.a,{id:"last_name"}),placeholder:t.formatMessage({id:"last_name"}),required:!0})]}),Object(a.jsx)(o.b.Group,{children:Y&&Y.map(function(m){return Object(a.jsx)(h.a,{required:X.includes(m),width:"md",name:m,label:Object(a.jsx)(u.a,{id:m}),tooltip:Object(a.jsx)(u.a,{id:m}),placeholder:t.formatMessage({id:m})})})}),Object(a.jsx)(o.b.Group,{children:Object(a.jsxs)(o.b.Item,{name:"avatar",label:Object(a.jsx)(u.a,{id:"avatar"}),children:[I.path_avatar&&Object(a.jsx)(T.a,{path:I.path_avatar,size:600,width:200}),Object(a.jsx)(y.a,{url:"/api/profile/upload-avatar",name:"avatar",accept:"image/*",onChange:function(j){j.file.status==="done"&&j.file.response.success&&S(j.file.response.data)}})]})})]}))},"general"),Object(a.jsx)(P.a.TabPane,{tab:Object(a.jsx)(u.a,{id:"change_password"}),children:Object(a.jsxs)(o.b,Object(c.a)(Object(c.a)({},V),{},{children:[Object(a.jsx)(o.b.Group,{children:Object(a.jsx)(h.a.Password,{width:"md",name:"current_password",label:Object(a.jsx)(u.a,{id:"current_password"}),placeholder:t.formatMessage({id:"current_password"}),required:!0})}),Object(a.jsxs)(o.b.Group,{children:[Object(a.jsx)(h.a.Password,{width:"md",name:"new_password",label:Object(a.jsx)(u.a,{id:"new_password"}),placeholder:t.formatMessage({id:"new_password"}),required:!0}),Object(a.jsx)(h.a.Password,{width:"md",name:"new_confirm_password",label:Object(a.jsx)(u.a,{id:"new_confirm_password"}),placeholder:t.formatMessage({id:"new_confirm_password"}),required:!0})]})]}))},"change_password"),Object(a.jsx)(P.a.TabPane,{tab:Object(a.jsx)(u.a,{id:"user.settings"}),children:Object(a.jsx)(B.a,{user:String(I.id),isProfile:!0})},"user_settings")]})}):Object(a.jsx)(E.a,{})}}}]);
