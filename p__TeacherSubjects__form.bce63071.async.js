(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{"/y+f":function(Fe,le,t){"use strict";t.d(le,"f",function(){return c}),t.d(le,"d",function(){return h}),t.d(le,"e",function(){return P}),t.d(le,"c",function(){return s}),t.d(le,"a",function(){return se}),t.d(le,"b",function(){return $e});var c;(function(d){d.Unselected="",d.RichText="EscolaLms\\TopicTypes\\Models\\TopicContent\\RichText",d.OEmbed="EscolaLms\\TopicTypes\\Models\\TopicContent\\OEmbed",d.Audio="EscolaLms\\TopicTypes\\Models\\TopicContent\\Audio",d.Video="EscolaLms\\TopicTypes\\Models\\TopicContent\\Video",d.H5P="EscolaLms\\TopicTypes\\Models\\TopicContent\\H5P",d.Image="EscolaLms\\TopicTypes\\Models\\TopicContent\\Image",d.PDF="EscolaLms\\TopicTypes\\Models\\TopicContent\\PDF",d.SCORM="EscolaLms\\TopicTypes\\Models\\TopicContent\\ScormSco",d.Project="EscolaLms\\TopicTypeProject\\Models\\Project",d.GiftQuiz="EscolaLms\\TopicTypeGift\\Models\\GiftQuiz"})(c||(c={}));var w;(function(d){d.OrderPaid="EscolaLms\\Cart\\Events\\OrderPaid",d.UserLogged="EscolaLms\\Auth\\Events\\UserLogged"})(w||(w={}));var F;(function(d){d.draft="draft",d.published="published",d.archived="archived"})(F||(F={}));var h;(function(d){d.email="EscolaLms\\TemplatesEmail\\Core\\EmailChannel",d.pdf="EscolaLms\\TemplatesPdf\\Core\\PdfChannel",d.sms="EscolaLms\\TemplatesSms\\Core\\SmsChannel"})(h||(h={}));var P;(function(d){d.ManuallyTriggeredEvent="EscolaLms\\Templates\\Events\\ManuallyTriggeredEvent"})(P||(P={}));var l;(function(d){d.cart_fixed="cart_fixed",d.cart_percent="cart_percent",d.product_fixed="product_fixed",d.product_percent="product_percent"})(l||(l={}));var s;(function(d){d.MULTIPLE_CHOICE="multiple_choice",d.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS="multiple_choice_with_multiple_right_answers",d.TRUE_FALSE="true_false",d.SHORT_ANSWERS="short_answers",d.MATCHING="matching",d.NUMERICAL_QUESTION="numerical_question",d.ESSAY="essay",d.DESCRIPTION="description"})(s||(s={}));var se;(function(d){d.PRESENT="present",d.ABSENT="absent"})(se||(se={}));var $e;(function(d){d.Manual="manual",d.TeamsForms="teams_forms",d.TeamsLecture="teams_lecture",d.TestPortal="test_portal"})($e||($e={}))},"0JQy":function(Fe,le){var t="\\ud800-\\udfff",c="\\u0300-\\u036f",w="\\ufe20-\\ufe2f",F="\\u20d0-\\u20ff",h=c+w+F,P="\\ufe0e\\ufe0f",l="["+t+"]",s="["+h+"]",se="\\ud83c[\\udffb-\\udfff]",$e="(?:"+s+"|"+se+")",d="[^"+t+"]",q="(?:\\ud83c[\\udde6-\\uddff]){2}",ye="[\\ud800-\\udbff][\\udc00-\\udfff]",pe="\\u200d",Z=$e+"?",De="["+P+"]?",it="(?:"+pe+"(?:"+[d,q,ye].join("|")+")"+De+Z+")*",ve=De+Z+it,tt="(?:"+[d+s+"?",s,q,ye,l].join("|")+")",He=RegExp(se+"(?="+se+")|"+tt+ve,"g");function _(m){return m.match(He)||[]}Fe.exports=_},"5R/X":function(Fe,le,t){},"5Syx":function(Fe,le,t){"use strict";t.d(le,"c",function(){return Ne}),t.d(le,"b",function(){return lt}),t.d(le,"a",function(){return Q});var c=t("OaEy"),w=t("2fM7"),F=t("g9YV"),h=t("wCAj"),P=t("BoS7"),l=t("Sdc0"),s=t("jrin"),se=t("k1fw"),$e=t("DYRE"),d=t("zeV3"),q=t("+BJd"),ye=t("mr32"),pe=t("oBTY"),Z=t("tJVT"),De=t("q1tI"),it=t.n(De),ve=t("9kvl"),tt=t("Vpfc"),He=t("nhC9"),_=t("LDJE"),m=t("nKUr"),qe=t.n(m),at=function($){return $.topicable.content.contents?Object.values($.topicable.content.contents)[0].library:"H5P"},Ne=function($){var g=$.topics,B=$.stats,Oe=Object(De.useState)(!1),U=Object(Z.a)(Oe,2),j=U[0],he=U[1],Te=Object(De.useMemo)(function(){return[{title:Object(m.jsx)(ve.a,{id:"user"}),dataIndex:"id",render:function(Le){return Object(m.jsx)(tt.a,{type:"App\\Models\\User",type_id:Le})}},{title:Object(m.jsx)(ve.a,{id:"email"}),dataIndex:"email"}].concat(Object(pe.a)(g.map(function(_e){var Le,Ce=(Le=_e.topicable_type)===null||Le===void 0?void 0:Le.split("\\").pop();return Ce==="H5P"&&(Ce=at(_e)),{render:function(R){var N=0,xe=0;switch(R&&(R.started_at&&R.finished_at?N=1:R.started_at&&(N=2),xe=R.seconds/60),N){case 1:return Object(m.jsxs)(d.b,{children:[Object(m.jsx)(ye.a,{color:"success",children:"F"}),j&&Object(m.jsxs)("small",{children:[xe.toFixed(2),"m"]})]});case 2:return Object(m.jsxs)(d.b,{children:[Object(m.jsx)(ye.a,{color:"blue",children:"S"}),j&&Object(m.jsxs)("small",{children:[xe.toFixed(2),"m"]})]});case 0:default:return Object(m.jsx)(it.a.Fragment,{children:Object(m.jsx)(ye.a,{color:"error",children:"N"})})}},title:Object(m.jsxs)("small",{children:[Object(m.jsx)(ye.a,{children:Ce})," ",_e.title]}),dataIndex:_e.id}})))},[g,j]),Re=Object(De.useMemo)(function(){return B.map(function(_e){return g.reduce(function(Le,Ce){var Je=_e.topics.find(function(R){return R.id===Ce.id});return Object(se.a)(Object(se.a)({},Le),{},Object(s.a)({},Number(Ce.id),Je!=null?Je:0))},{email:_e.email,id:_e.id})})},[B,g]);return Object(m.jsx)(h.a,{title:function(){return Object(m.jsxs)(d.b,{children:[Object(m.jsx)(ve.a,{id:"Finished",defaultMessage:"Finished:"})," ",Object(m.jsx)(ye.a,{color:"success",children:"F"}),Object(m.jsx)(ve.a,{id:"Started",defaultMessage:"Started:"})," ",Object(m.jsx)(ye.a,{color:"blue",children:"S"}),Object(m.jsx)(ve.a,{id:"NotStarted",defaultMessage:"Not Started:"})," ",Object(m.jsx)(ye.a,{color:"error",children:"N"}),Object(m.jsx)(ve.a,{id:"ShowMinutes",defaultMessage:"Show minutes spent on topic:"})," ",Object(m.jsx)(l.a,{checked:j,onChange:function(Ce){return he(Ce)}})]})},columns:Te,dataSource:Re,size:"small",scroll:{x:1500}})},lt=function($){var g=$.stats,B=Object(De.useMemo)(function(){return[{title:"user",dataIndex:"id",render:function(j){return Object(m.jsx)(tt.a,{type:"App\\Models\\User",type_id:j})}},{title:"email",dataIndex:"email"},{title:Object(m.jsx)(ve.a,{id:"finished_at",defaultMessage:"Finished at"}),dataIndex:"finished_at"}]},[]),Oe=Object(De.useMemo)(function(){return g.map(function(U){var j=U.id,he=U.email,Te=U.finished_at;return{id:j,email:he,finished_at:Te}})},[g]);return Object(m.jsx)(h.a,{title:function(){return Object(m.jsx)(d.b,{children:Object(m.jsx)(ve.a,{id:"course.finished",defaultMessage:"Finished"})})},columns:B,dataSource:Oe,size:"small",scroll:{x:500}})},Q=function($){var g=$.stats,B=Object(De.useState)(null),Oe=Object(Z.a)(B,2),U=Oe[0],j=Oe[1],he=Object(De.useState)(null),Te=Object(Z.a)(he,2),Re=Te[0],_e=Te[1],Le=Object(ve.l)(),Ce=Object(De.useMemo)(function(){return g.flatMap(function(R){return Object.values(R.attempts).flatMap(function(N){var xe=N.dates,nt=N.attempt,K=Object.values(xe).flatMap(function(et){var Ye=et.date,dt=et.seconds_total;return{date:Ye,attempt:nt,seconds_total:dt,email:R.email}});return K})})},[g]),Je={xField:"date",yField:"seconds_total",seriesField:"attempt",isStack:!0,xAxis:{label:{autoHide:!0,autoRotate:!1}},slider:{start:0,end:1},label:{position:"middle",layout:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"}]}};return Object(m.jsx)(He.a,{title:Object(m.jsxs)(d.b,{children:[Object(m.jsx)(ve.a,{id:"course.interactions_time_in_days"}),Object(m.jsx)(w.a,{showSearch:!0,value:U,onChange:function(N){j(N),_e(null)},placeholder:Object(m.jsx)(ve.a,{id:"select_person",defaultMessage:"Select a person"}),children:g.map(function(R){var N=R.id,xe=R.email;return Object(m.jsx)(w.a.Option,{value:xe,children:xe},N)})}),Object(m.jsx)(w.a,{value:Re,onChange:function(N){return _e(N)},disabled:U===null,placeholder:Object(m.jsx)(ve.a,{id:"select_attempt",defaultMessage:"Select attempt"}),children:Object(pe.a)(new Set(Ce.filter(function(R){var N=R.email;return N===U}).map(function(R){var N=R.attempt;return N}))).map(function(R){return Object(m.jsxs)(w.a.Option,{value:R,children:[Object(m.jsx)(ve.a,{id:"attempt",defaultMessage:"Attempt"})," ",R]},R)})})]}),colSpan:12,layout:"center",children:Object(m.jsx)("div",{style:{overflow:"auto",minHeight:"400px",width:"100%"},children:Object(m.jsx)(_.a,Object(se.a)(Object(se.a)({},Je),{},{tooltip:{title:"".concat(Le.formatMessage({id:"attempt"})),formatter:function(N){var xe=Math.floor(+N.seconds_total/60),nt=+N.seconds_total>60?+N.seconds_total-xe*60:0;return{name:N.attempt,value:"".concat(xe,"m ").concat(nt,"s")}}},data:Ce.filter(function(R){var N=R.email;return N===U}).filter(function(R){var N=R.attempt;return Number.isInteger(Re)?N===Re:!0})}))})})}},Em2t:function(Fe,le,t){var c=t("bahg"),w=t("quyA"),F=t("0JQy");function h(P){return w(P)?F(P):c(P)}Fe.exports=h},Hn4i:function(Fe,le,t){"use strict";var c=t("y8nQ"),w=t("Vl3Y"),F=t("+L6B"),h=t("2/Rp"),P=t("rePB"),l=t("ODXe"),s=t("Ff2n"),se=t("x+uP"),$e=t("HaE+"),d=t("VTBJ"),q=t("nKUr"),ye=t.n(q),pe=t("xvlK"),Z=t("WuYN"),De=t("VMEa"),it=t("LQCs"),ve=t("ft2k"),tt=t("uX+g"),He=t("+i8S"),_=t("ipCM"),m=t("6cGi"),qe=t("ub+h"),at=t("bG1m"),Ne=t("q1tI"),lt=t.n(Ne),Q=t("mWMg"),J=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef"],$=["record","position","creatorButtonText","newRecordType","parentKey","style"],g=lt.a.createContext(void 0);function B(j){var he=j.children,Te=j.record,Re=j.position,_e=j.newRecordType,Le=j.parentKey,Ce=Object(Ne.useContext)(g);return lt.a.cloneElement(he,Object(d.a)(Object(d.a)({},he.props),{},{onClick:function(){var Je=Object($e.a)(Object(se.a)().mark(function N(xe){var nt,K,et,Ye;return Object(se.a)().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,(nt=(K=he.props).onClick)===null||nt===void 0?void 0:nt.call(K,xe);case 2:if(Ye=ae.sent,Ye!==!1){ae.next=5;break}return ae.abrupt("return");case 5:Ce==null||(et=Ce.current)===null||et===void 0||et.addEditRecord(Te,{position:Re,newRecordType:_e,parentKey:Le});case 6:case"end":return ae.stop()}},N)}));function R(N){return Je.apply(this,arguments)}return R}()}))}function Oe(j){var he,Te,Re=Object(it.d)(),_e=j.onTableChange,Le=j.maxLength,Ce=j.formItemProps,Je=j.recordCreatorProps,R=j.rowKey,N=j.controlled,xe=j.defaultValue,nt=j.onChange,K=j.editableFormRef,et=Object(s.a)(j,J),Ye=Object(ve.a)(j.value),dt=Object(Ne.useRef)(),ae=Object(Ne.useRef)();Object(Ne.useImperativeHandle)(et.actionRef,function(){return dt.current});var We=Object(m.a)(function(){return j.value||xe||[]},{value:j.value,onChange:j.onChange}),bt=Object(l.a)(We,2),de=bt[0],Ge=bt[1],ct=lt.a.useMemo(function(){return typeof R=="function"?R:function(Ie,X){return Ie[R]||X}},[R]),L=function(X){if(typeof X=="number"&&!j.name){if(X>=de.length)return X;var ee=de&&de[X];return ct==null?void 0:ct(ee,X)}if((typeof X=="string"||X>=de.length)&&j.name){var ne=de.findIndex(function(ue,Me){var Ae;return(ct==null||(Ae=ct(ue,Me))===null||Ae===void 0?void 0:Ae.toString())===(X==null?void 0:X.toString())});return ne}return X};Object(Ne.useImperativeHandle)(K,function(){var Ie=function(ne){var ue,Me;if(ne==null)throw new Error("rowIndex is required");var Ae=L(ne),rt=[j.name,(ue=Ae==null?void 0:Ae.toString())!==null&&ue!==void 0?ue:""].flat(1).filter(Boolean);return(Me=ae.current)===null||Me===void 0?void 0:Me.getFieldValue(rt)},X=function(){var ne,ue=[j.name].flat(1).filter(Boolean);if(Array.isArray(ue)&&ue.length===0){var Me,Ae=(Me=ae.current)===null||Me===void 0?void 0:Me.getFieldsValue();return Array.isArray(Ae)?Ae:Object.keys(Ae).map(function(rt){return Ae[rt]})}return(ne=ae.current)===null||ne===void 0?void 0:ne.getFieldValue(ue)};return Object(d.a)(Object(d.a)({},ae.current),{},{getRowData:Ie,getRowsData:X,setRowData:function(ne,ue){var Me,Ae,rt,mt;if(ne==null)throw new Error("rowIndex is required");var _t=L(ne),vt=[j.name,(Me=_t==null?void 0:_t.toString())!==null&&Me!==void 0?Me:""].flat(1).filter(Boolean),Ot=((Ae=ae.current)===null||Ae===void 0||(rt=Ae.getFieldsValue)===null||rt===void 0?void 0:rt.call(Ae))||{},ht=Object(at.a)(Ot,vt,Object(d.a)(Object(d.a)({},Ie(ne)),ue||{}));return(mt=ae.current)===null||mt===void 0?void 0:mt.setFieldsValue(ht)}})}),Object(Ne.useEffect)(function(){!j.controlled||de.forEach(function(Ie,X){var ee;(ee=ae.current)===null||ee===void 0||ee.setFieldsValue(Object(P.a)({},ct(Ie,X),Ie))},{})},[de,j.controlled]),Object(Ne.useEffect)(function(){if(j.name){var Ie;ae.current=j==null||(Ie=j.editable)===null||Ie===void 0?void 0:Ie.form}},[(he=j.editable)===null||he===void 0?void 0:he.form,j.name]);var D=Je||{},V=D.record,A=D.position,H=D.creatorButtonText,e=D.newRecordType,Ue=D.parentKey,ze=D.style,yt=Object(s.a)(D,$),pt=A==="top",jt=Object(Ne.useMemo)(function(){return Le&&Le<=(de==null?void 0:de.length)?!1:Je!==!1&&Object(q.jsx)(B,{record:Object(tt.a)(V,de==null?void 0:de.length,de)||{},position:A,parentKey:Object(tt.a)(Ue,de==null?void 0:de.length,de),newRecordType:e,children:Object(q.jsx)(h.a,Object(d.a)(Object(d.a)({type:"dashed",style:Object(d.a)({display:"block",margin:"10px 0",width:"100%"},ze),icon:Object(q.jsx)(pe.a,{})},yt),{},{children:H||Re.getMessage("editableTable.action.add","\u6DFB\u52A0\u4E00\u884C\u6570\u636E")}))})},[Je,Le,de==null?void 0:de.length]),Tt=Object(Ne.useMemo)(function(){return jt?pt?{components:{header:{wrapper:function(X){var ee,ne=X.className,ue=X.children;return Object(q.jsxs)("thead",{className:ne,children:[ue,Object(q.jsxs)("tr",{style:{position:"relative"},children:[Object(q.jsx)("td",{colSpan:0,style:{visibility:"hidden"},children:jt}),Object(q.jsx)("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:(ee=et.columns)===null||ee===void 0?void 0:ee.length,children:jt})]})]})}}}}:{tableViewRender:function(X,ee){var ne,ue;return Object(q.jsxs)(q.Fragment,{children:[(ne=(ue=j.tableViewRender)===null||ue===void 0?void 0:ue.call(j,X,ee))!==null&&ne!==void 0?ne:ee,jt]})}}:{}},[pt,jt]),ft=Object(d.a)({},j.editable),Ct=Object(He.a)(function(Ie,X){var ee,ne,ue;if((ee=j.editable)===null||ee===void 0||(ne=ee.onValuesChange)===null||ne===void 0||ne.call(ee,Ie,X),(ue=j.onValuesChange)===null||ue===void 0||ue.call(j,X,Ie),j.controlled){var Me;j==null||(Me=j.onChange)===null||Me===void 0||Me.call(j,X)}});return((j==null?void 0:j.onValuesChange)||((Te=j.editable)===null||Te===void 0?void 0:Te.onValuesChange)||j.controlled&&(j==null?void 0:j.onChange))&&(ft.onValuesChange=Ct),Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(g.Provider,{value:dt,children:Object(q.jsx)(Q.a,Object(d.a)(Object(d.a)(Object(d.a)({search:!1,options:!1,pagination:!1,rowKey:R,revalidateOnFocus:!1},et),Tt),{},{tableLayout:"fixed",actionRef:dt,onChange:_e,editable:Object(d.a)(Object(d.a)({},ft),{},{formProps:Object(d.a)({formRef:ae},ft.formProps)}),dataSource:de,onDataSourceChange:function(X){if(Ge(X),j.name&&A==="top"){var ee,ne=Object(at.a)({},[j.name].flat(1).filter(Boolean),X);(ee=ae.current)===null||ee===void 0||ee.setFieldsValue(ne)}}}))}),j.name?Object(q.jsx)(Z.a,{name:[j.name],children:function(X){var ee,ne,ue=Object(qe.a)(X,[j.name].flat(1)),Me=ue==null?void 0:ue.find(function(Ae,rt){return!Object(_.a)(Ae,Ye==null?void 0:Ye[rt])});return Me&&Ye&&(j==null||(ee=j.editable)===null||ee===void 0||(ne=ee.onValuesChange)===null||ne===void 0||ne.call(ee,Me,ue)),null}}):null]})}function U(j){var he=De.a.useFormInstance();return j.name?Object(q.jsx)(w.a.Item,Object(d.a)(Object(d.a)({style:{maxWidth:"100%"}},j==null?void 0:j.formItemProps),{},{name:j.name,children:Object(q.jsx)(Oe,Object(d.a)(Object(d.a)({},j),{},{editable:Object(d.a)(Object(d.a)({},j.editable),{},{form:he})}))})):Object(q.jsx)(Oe,Object(d.a)({},j))}U.RecordCreator=B,le.a=U},KxBF:function(Fe,le){function t(c,w,F){var h=-1,P=c.length;w<0&&(w=-w>P?0:P+w),F=F>P?P:F,F<0&&(F+=P),P=w>F?0:F-w>>>0,w>>>=0;for(var l=Array(P);++h<P;)l[h]=c[h+w];return l}Fe.exports=t},LDJE:function(Fe,le,t){"use strict";var c=t("q1tI"),w=t.n(c),F=t("ma/q"),h=t("ZIEt"),P=t("QpZ9"),l=t("GzfL"),s=t("Scwr"),se=function(d,q){var ye={};for(var pe in d)Object.prototype.hasOwnProperty.call(d,pe)&&q.indexOf(pe)<0&&(ye[pe]=d[pe]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Z=0,pe=Object.getOwnPropertySymbols(d);Z<pe.length;Z++)q.indexOf(pe[Z])<0&&Object.prototype.propertyIsEnumerable.call(d,pe[Z])&&(ye[pe[Z]]=d[pe[Z]]);return ye},$e=Object(c.forwardRef)(function(d,q){var ye=d.chartRef,pe=d.style,Z=pe===void 0?{height:"inherit"}:pe,De=d.className,it=d.loading,ve=d.loadingTemplate,tt=d.errorTemplate,He=se(d,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),_=Object(h.a)(F.a,He),m=_.chart,qe=_.container;return Object(c.useEffect)(function(){Object(P.a)(ye,m.current)},[m.current]),Object(c.useImperativeHandle)(q,function(){return{getChart:function(){return m.current}}}),w.a.createElement(l.a,{errorTemplate:tt},it&&w.a.createElement(s.a,{loadingTemplate:ve,theme:d.theme}),w.a.createElement("div",{className:De,style:Z,ref:qe}))});le.a=$e},bahg:function(Fe,le){function t(c){return c.split("")}Fe.exports=t},olry:function(Fe,le,t){"use strict";t.r(le);var c=t("k1fw"),w=t("+L6B"),F=t("2/Rp"),h=t("T2oS"),P=t("W9HT"),l=t("q1tI"),s=t("9kvl"),se=t("55Ip"),$e=t("Ty5D"),d=t("nhC9"),q=t("tMyG"),ye=t("my69"),pe=t("huej"),Z=t("mJ0o"),De=t("EhlZ"),it=t("P2fV"),ve=t("NJEC"),tt=t("5Dmo"),He=t("3S7+"),_=t("qLMh"),m=t("9og8"),qe=t("sWYD"),at=t("G3dp"),Ne=t("lbgm"),lt=t("/MfK"),Q=t("Qiat"),J=t("mGZj");function $(o,u){return g.apply(this,arguments)}function g(){return g=Object(m.a)(Object(_.a)().mark(function o(u,a){return Object(_.a)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(s.i)("/api/admin/exams",Object(c.a)({method:"GET",useCache:!1,params:u},a||{})));case 1:case"end":return n.stop()}},o)})),g.apply(this,arguments)}function B(o,u){return Oe.apply(this,arguments)}function Oe(){return Oe=Object(m.a)(Object(_.a)().mark(function o(u,a){return Object(_.a)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(s.i)("/api/admin/exams",Object(c.a)({method:"POST",headers:{"Content-Type":"application/json"},data:u},a||{})));case 1:case"end":return n.stop()}},o)})),Oe.apply(this,arguments)}function U(o,u,a){return j.apply(this,arguments)}function j(){return j=Object(m.a)(Object(_.a)().mark(function o(u,a,r){return Object(_.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(s.i)("/api/admin/exams/".concat(u),Object(c.a)({method:"PUT",data:a,useCache:!1},r||{})));case 1:case"end":return i.stop()}},o)})),j.apply(this,arguments)}function he(o,u){return Te.apply(this,arguments)}function Te(){return Te=Object(m.a)(Object(_.a)().mark(function o(u,a){return Object(_.a)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(s.i)("/api/admin/exams/".concat(u),Object(c.a)({method:"GET",useCache:!1},a||{})));case 1:case"end":return n.stop()}},o)})),Te.apply(this,arguments)}function Re(o,u){return _e.apply(this,arguments)}function _e(){return _e=Object(m.a)(Object(_.a)().mark(function o(u,a){return Object(_.a)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(s.i)("/api/admin/exams/".concat(u),Object(c.a)({method:"DELETE"},a||{})));case 1:case"end":return n.stop()}},o)})),_e.apply(this,arguments)}function Le(o,u,a,r){return Ce.apply(this,arguments)}function Ce(){return Ce=Object(m.a)(Object(_.a)().mark(function o(u,a,r,n){return Object(_.a)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",Object(s.i)("/api/admin/exams/".concat(u,"/users/").concat(a),Object(c.a)({method:"POST",headers:{"Content-Type":"application/json"},data:r},n||{})));case 1:case"end":return b.stop()}},o)})),Ce.apply(this,arguments)}function Je(o,u,a){return R.apply(this,arguments)}function R(){return R=Object(m.a)(Object(_.a)().mark(function o(u,a,r){return Object(_.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(s.i)("/api/admin/exams/".concat(u,"/users/").concat(a),Object(c.a)({method:"DELETE"},r||{})));case 1:case"end":return i.stop()}},o)})),R.apply(this,arguments)}var N=t("Vpfc"),xe=t("giR+"),nt=t("fyUT"),K=t("tJVT"),et=t("14J3"),Ye=t("BMrR"),dt=t("jCWc"),ae=t("kPKH"),We=t("VMEa"),bt=t("Qurx"),de=t("lR9U"),Ge=t("/y+f"),ct=t("2qtc"),L=t("kLXV"),D=t("oBTY"),V=t("OaEy"),A=t("2fM7"),H=t("DBJ/"),e=t("nKUr"),Ue=function(u){var a=u.type,r=u.onDataConverted,n=u.groupSelectDisabled,i=Object(Z.b)(),b=i.semester_subject_id,E=i.teacherSubjectData,x=Object(l.useState)(null),M=Object(K.a)(x,2),p=M[0],O=M[1],S=Object(l.useMemo)(function(){var y;return((y=E==null?void 0:E.groups)!==null&&y!==void 0?y:[]).map(function(C){var I=C.id,ie=C.name;return{label:ie,value:I}})},[]),f={type:a,group_id:p,semester_subject_id:b},v=Object(l.useCallback)(function(y){if(y.success){var C=y.data.results.filter(function(I){var ie=I.user_id;return ie!==null});if(!C.length)return;r({exam_results:C,group_id:y.data.group_id})}},[]);return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(We.a.Item,{label:Object(e.jsx)(s.a,{id:"group"}),children:Object(e.jsx)(A.a,{disabled:n,value:p,onChange:function(C){return O(C)},options:S,placeholder:Object(e.jsx)(s.a,{id:"select_group"}),style:{width:"100%"}})}),Object(e.jsx)(H.a,{name:"file",url:"/api/admin/exams/parse",onUpload:v,onChange:function(C){return!C.fileList.length&&r(void 0)},maxFiles:1,data:f,disabled:!p})]})},ze=function(u){var a=u.onDataConverted,r=Object(Z.b)(),n=r.teacherSubjectData,i=r.groupUsers,b=Object(l.useState)(null),E=Object(K.a)(b,2),x=E[0],M=E[1],p=Object(l.useMemo)(function(){var S;return((S=n==null?void 0:n.groups)!==null&&S!==void 0?S:[]).map(function(f){var v=f.id,y=f.name;return{label:y,value:v}})},[]),O=Object(l.useCallback)(function(S){var f;M(S);var v=(f=i.byId)===null||f===void 0?void 0:f[S];if(!!v){var y=v.users.reduce(function(C,I){var ie=I.id,T=I.email,oe=I.first_name,Y=I.last_name,je=I.academic_teacher_id;return je!==null?C:[].concat(Object(D.a)(C),[{email:T,first_name:oe,last_name:Y,user_id:ie,result:0}])},[]);a({group_id:S,exam_results:y})}},[i.byId]);return Object(e.jsx)(A.a,{value:x,onChange:O,options:p,placeholder:Object(e.jsx)(s.a,{id:"select_group"}),style:{width:"100%"}})},yt=[Ge.b.TeamsLecture,Ge.b.TestPortal,Ge.b.TeamsForms],pt=function(u){var a=u.open,r=u.closeModal,n=u.onSuccess,i=u.type,b=Object(Z.b)(),E=b.teacherSubjectData,x=b.fetchGroupUsers,M=Object(l.useState)(),p=Object(K.a)(M,2),O=p[0],S=p[1];return Object(l.useEffect)(function(){if(i===Ge.b.Manual&&a){var f;E==null||(f=E.groups)===null||f===void 0||f.forEach(function(v){var y=v.id;return x(y)})}},[i,a]),Object(e.jsxs)(L.a,{title:Object(e.jsx)(s.a,{id:"TeacherSubjects.Exams.".concat(i,"Convert")}),width:"40vw",open:a,onCancel:r,onOk:function(){O&&n(O)},okButtonProps:{disabled:!O},children:[yt.includes(i)&&Object(e.jsx)(Ue,{type:i,onDataConverted:S,groupSelectDisabled:!!O}),i===Ge.b.Manual&&Object(e.jsx)(ze,{onDataConverted:S})]})},jt=function(u){var a=u.onSelect;return Object(e.jsxs)(Ye.a,{gutter:[16,16],children:[Object(e.jsx)(ae.a,{span:12,children:Object(e.jsx)(F.a,{type:"primary",onClick:function(){return a(Ge.b.TeamsForms)},children:Object(e.jsx)(s.a,{id:"uploadFile.MsTeamsForms",defaultMessage:"uploadFile.MsTeamsForms"})})}),Object(e.jsx)(ae.a,{span:12,children:Object(e.jsx)(F.a,{type:"primary",onClick:function(){return a(Ge.b.TestPortal)},children:Object(e.jsx)(s.a,{id:"uploadFile.TestPortal",defaultMessage:"uploadFile.TestPortal"})})}),Object(e.jsx)(ae.a,{span:12,children:Object(e.jsx)(F.a,{type:"primary",onClick:function(){return a(Ge.b.TeamsLecture)},children:Object(e.jsx)(s.a,{id:"uploadFile.MsTeams",defaultMessage:"uploadFile.MsTeams"})})}),Object(e.jsx)(ae.a,{span:12,children:Object(e.jsx)(F.a,{type:"primary",onClick:function(){return a(Ge.b.Manual)},children:Object(e.jsx)(s.a,{id:"uploadGradesManually",defaultMessage:"uploadGradesManually"})})})]})},Tt=[{title:Object(e.jsx)(s.a,{id:"first_name"}),dataIndex:"first_name",editable:!1},{title:Object(e.jsx)(s.a,{id:"last_name"}),dataIndex:"last_name",editable:!1},{title:Object(e.jsx)(s.a,{id:"examResult"}),dataIndex:"result",valueType:"percent",formItemProps:{rules:[{required:!0,message:Object(e.jsx)(s.a,{id:"field_required"})},{type:"number",min:0,max:100,message:Object(e.jsx)(s.a,{id:"number_between",values:{min:0,max:100}})}]}}],ft=function(u){var a,r=u.exam_id,n=We.a.useForm(),i=Object(K.a)(n,1),b=i[0],E=Object(l.useState)(),x=Object(K.a)(E,2),M=x[0],p=x[1],O=Object(l.useState)(),S=Object(K.a)(O,2),f=S[0],v=S[1],y=Object(l.useState)(!1),C=Object(K.a)(y,2),I=C[0],ie=C[1],T=Object(Z.b)(),oe=T.semester_subject_id,Y=T.getGroupById,je=Object(l.useMemo)(function(){var Pe;return((Pe=f==null?void 0:f.exam_results)!==null&&Pe!==void 0?Pe:[]).map(function(ce){var ge=ce.user_id;return ge})},[f==null?void 0:f.exam_results]);Object(l.useEffect)(function(){var Pe=Number(r);r==="new"&&(p(void 0),v(void 0),b.resetFields()),r!=="new"&&!Number.isNaN(Pe)&&(ie(!0),he(Pe).then(function(ce){if(ce.success){var ge=ce.data,k=ge.type,te=ge.results,fe=ge.title,Se=ge.weight,Ee=ge.passed_at,ot=ge.group_id;p(k),v({group_id:ot,exam_results:te}),b.setFieldsValue({title:fe,weight:Se,passed_at:Ee})}}).finally(function(){return ie(!1)}))},[r]);var Ke=Object(l.useCallback)(function(){p(void 0),v(void 0)},[]);return I?Object(e.jsx)(P.a,{}):Object(e.jsxs)(e.Fragment,{children:[M&&Object(e.jsx)(pt,{open:Boolean(M&&!f),type:M,closeModal:Ke,onSuccess:v}),Object(e.jsxs)(We.a,{form:b,submitter:M===void 0||!f?!1:void 0,onFinish:function(){var Pe=Object(m.a)(Object(_.a)().mark(function ce(ge){var k,te,fe,Se,Ee,ot,be,G,W,z;return Object(_.a)().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(te=f==null||(k=f.exam_results)===null||k===void 0?void 0:k.every(function(Ve){var we=Ve.result;return typeof we=="number"&&we>=0&&we<=100}),!(f&&te&&typeof oe=="number")){re.next=17;break}if(fe=ge.title,Se=ge.passed_at,Ee=ge.weight,ot=Number(r),be=f.exam_results,G=f.group_id,W={type:M,semester_subject_id:oe,title:fe,passed_at:Se,weight:Ee,group_id:G,results:be},!Number.isNaN(ot)){re.next=12;break}return re.next=9,B(W);case 9:re.t0=re.sent,re.next=15;break;case 12:return re.next=14,U(ot,W);case 14:re.t0=re.sent;case 15:z=re.t0,z.success&&s.f.push("/teacher/subjects/".concat(oe,"/exams"));case 17:return re.abrupt("return",!0);case 18:case"end":return re.stop()}},ce)}));return function(ce){return Pe.apply(this,arguments)}}(),onReset:Ke,children:[Object(e.jsxs)(We.a.Group,{children:[Object(e.jsx)(bt.a,{label:Object(e.jsx)(s.a,{id:"examTitle",defaultMessage:"examTitle"}),rules:[{required:!0,message:Object(e.jsx)(s.a,{id:"field_required"})}],width:"lg",name:"title"}),Object(e.jsx)(de.a,{label:Object(e.jsx)(s.a,{id:"datePassingExam",defaultMessage:"datePassingExam"}),rules:[{required:!0,message:Object(e.jsx)(s.a,{id:"field_required"})}],width:"lg",name:"passed_at"}),Object(e.jsx)(We.a.Item,{name:"weight",label:Object(e.jsx)(s.a,{id:"examImportance",defaultMessage:"examImportance"}),rules:[{required:!0,message:Object(e.jsx)(s.a,{id:"field_required"})},{type:"number",min:1,max:100,message:Object(e.jsx)(s.a,{id:"number_between",values:{min:1,max:100}})}],children:Object(e.jsx)(nt.a,{})})]}),M&&f&&Object(e.jsx)(Q.a,{rowKey:"user_id",headerTitle:(a=Y(f.group_id))===null||a===void 0?void 0:a.name,editable:{type:"single",editableKeys:je,onValuesChange:function(ce,ge){return v({group_id:f.group_id,exam_results:ge})}},cardProps:{bodyStyle:{paddingInline:0}},search:!1,dataSource:f.exam_results,columns:Tt}),!f&&Object(e.jsx)(jt,{onSelect:p})]})]})},Ct=[{title:Object(e.jsx)(s.a,{id:"first_name"}),dataIndex:"first_name"},{title:Object(e.jsx)(s.a,{id:"last_name"}),dataIndex:"last_name"},{title:Object(e.jsx)(s.a,{id:"examResult"}),dataIndex:"result",hideInSearch:!0}],Ie=function(u){var a=u.exam_id;return Object(e.jsx)(Q.a,{rowKey:"user_id",search:!1,headerTitle:Object(e.jsx)(s.a,{id:"examResults"}),request:Object(m.a)(Object(_.a)().mark(function r(){var n;return Object(_.a)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,he(a);case 2:if(n=b.sent,!n.success){b.next=5;break}return b.abrupt("return",{total:n.data.results.length,success:!0,data:n.data.results});case 5:return b.abrupt("return",[]);case 6:case"end":return b.stop()}},r)})),columns:Ct})},X=[{title:Object(e.jsx)(s.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",sorter:!0},{title:Object(e.jsx)(s.a,{id:"title",defaultMessage:"title"}),dataIndex:"title",hideInSearch:!0,sorter:!0},{title:Object(e.jsx)(s.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",sorter:!0,render:function(u,a){return Object(e.jsx)(s.a,{id:"ExamGradeType.".concat(a.type)})}},{title:Object(e.jsx)(s.a,{id:"TeacherSubjects.Exams.exam_date",defaultMessage:"Exam date"}),dataIndex:"passed_at",sorter:!0,render:function(u,a){return a.passed_at&&Object(qe.a)(new Date(a.passed_at),J.c)}},{title:Object(e.jsx)(s.a,{id:"TeacherSubjects.Exams.grade_weight",defaultMessage:"Weight"}),dataIndex:"weight",sorter:!0,render:function(u,a){return a.weight+"%"}},{title:Object(e.jsx)(s.a,{id:"created_at",defaultMessage:"Created at"}),dataIndex:"created_at",sorter:!0,render:function(u,a){return a.created_at&&Object(qe.a)(new Date(a.created_at),J.c)}},{title:Object(e.jsx)(s.a,{id:"semester",defaultMessage:"Semester"}),dataIndex:"semester",sorter:!0,render:function(u,a){return Object(e.jsx)(s.a,{id:"SemesterType.".concat(a.semester.type),values:{year:a.semester.year}})}},{title:Object(e.jsx)(s.a,{id:"group",defaultMessage:"Group"}),dataIndex:"group_id",sorter:!0,render:function(u,a){return Object(e.jsx)(N.a,{type:"Students",type_id:a.group_id},a.group_id)}}],ee=function(){var u,a,r=Object(l.useRef)(),n=Object(Z.b)(),i=n.semester_subject_id,b=Object($e.k)(),E=Object(l.useMemo)(function(){var p,O,S;return{exam_id:(p=(O=b.query)===null||O===void 0?void 0:O.exam_id)!==null&&p!==void 0?p:null,results:(S=b.query)===null||S===void 0?void 0:S.results}},[(u=b.query)===null||u===void 0?void 0:u.exam_id,(a=b.query)===null||a===void 0?void 0:a.results]),x=E.exam_id,M=E.results;return M!==null&&!Number.isNaN(Number(M))?Object(e.jsx)(Ie,{exam_id:Number(M)}):x!==null?Object(e.jsx)(ft,{exam_id:x}):Object(e.jsx)(Q.a,{headerTitle:Object(e.jsx)(s.a,{id:"exams"}),actionRef:r,search:!1,rowKey:"id",request:function(){var p=Object(m.a)(Object(_.a)().mark(function O(S,f){var v,y,C,I;return Object(_.a)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(v=S.current,y=S.pageSize,i!==null){T.next=3;break}return T.abrupt("return",{data:[],total:0,success:!1});case 3:return C=f&&Object.entries(f)[0],T.next=6,$({per_page:y,page:v,semester_subject_id:Number.isNaN(i)?void 0:i,order_by:C&&C[0],order:C&&(C[1]==="ascend"?"ASC":"DESC")});case 6:if(I=T.sent,!I.success){T.next=9;break}return T.abrupt("return",{data:I.data,total:I.meta.total,success:!0});case 9:return T.abrupt("return",{data:[],total:0,success:!1});case 10:case"end":return T.stop()}},O)}));return function(O,S){return p.apply(this,arguments)}}(),columns:[].concat(X,[{title:Object(e.jsx)(s.a,{id:"pages.searchTable.titleOption"}),dataIndex:"option",valueType:"option",render:function(O,S){return[Object(e.jsx)(se.a,{to:"/teacher/subjects/".concat(S.semester_subject_id,"/exams?exam_id=").concat(S.id),children:Object(e.jsx)(He.a,{title:Object(e.jsx)(s.a,{id:"edit",defaultMessage:"edit"}),children:Object(e.jsx)(F.a,{type:"primary",icon:Object(e.jsx)(at.a,{})})})},"edit"),Object(e.jsx)(se.a,{to:"/teacher/subjects/".concat(S.semester_subject_id,"/exams?results=").concat(S.id),children:Object(e.jsx)(He.a,{title:Object(e.jsx)(s.a,{id:"TeacherSubjects.Exams.results",defaultMessage:"results"}),children:Object(e.jsx)(F.a,{icon:Object(e.jsx)(Ne.a,{})})})},"results"),Object(e.jsx)(ve.a,{title:Object(e.jsx)(s.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(m.a)(Object(_.a)().mark(function f(){var v;return Object(_.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,Re(S.id);case 2:v=C.sent,v.success&&r.current&&r.current.reload();case 4:case"end":return C.stop()}},f)})),okText:Object(e.jsx)(s.a,{id:"yes"}),cancelText:Object(e.jsx)(s.a,{id:"no"}),children:Object(e.jsx)(He.a,{title:Object(e.jsx)(s.a,{id:"delete",defaultMessage:"delete"}),children:Object(e.jsx)(F.a,{type:"primary",icon:Object(e.jsx)(lt.a,{}),danger:!0})})},"delete")]}}])})},ne=t("4KAj"),ue=t("o0Ox"),Me=[{title:Object(e.jsx)(s.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"user_id",hideInSearch:!0},{title:Object(e.jsx)(s.a,{id:"first_name",defaultMessage:"First name"}),dataIndex:"first_name"},{title:Object(e.jsx)(s.a,{id:"last_name",defaultMessage:"Last name"}),dataIndex:"last_name"},{title:Object(e.jsx)(s.a,{id:"email",defaultMessage:"email"}),dataIndex:"email"},{title:Object(e.jsx)(s.a,{id:"groupName",defaultMessage:"Group name"}),dataIndex:"group_name",hideInSearch:!0}],Ae=function(u){return u.map(function(a){var r=a.id,n=a.name;return{label:n,value:r}})},rt=function(u){return u.reduce(function(a,r){var n,i=r==null||(n=r.users)===null||n===void 0?void 0:n.map(function(b){return{group_id:r.id,group_name:r.name,user_id:b.id,first_name:b.first_name,last_name:b.last_name,email:b.email}});return[].concat(Object(D.a)(a),Object(D.a)(i))},[])},mt=function(){var u=Object(Z.b)(),a=u.teacherSubjectData,r=Object(l.useMemo)(function(){var n;return Ae((n=a==null?void 0:a.groups)!==null&&n!==void 0?n:[])},[a==null?void 0:a.groups]);return Object(e.jsx)(Q.a,{rowKey:function(i){return"".concat(i.group_id,"-").concat(i.user_id)},search:{layout:"vertical"},request:function(){var n=Object(m.a)(Object(_.a)().mark(function i(b){var E,x,M,p,O,S,f,v,y;return Object(_.a)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return E=b.groups,x=b.first_name,M=x===void 0?"":x,p=b.last_name,O=p===void 0?"":p,S=b.email,f=S===void 0?"":S,I.next=3,Object(ue.a)({parent_id:a==null?void 0:a.group_id,"id[]":E});case 3:if(v=I.sent,v.success){I.next=6;break}return I.abrupt("return",{data:[],total:0,success:!1});case 6:return y=rt(v.data).filter(function(ie){return ie.first_name.toLowerCase().includes(M.toLowerCase())&&ie.last_name.toLowerCase().includes(O.toLowerCase())&&ie.email.toLowerCase().includes(f.toLowerCase())}),I.abrupt("return",{data:y,total:y.length,success:!0});case 8:case"end":return I.stop()}},i)}));return function(i){return n.apply(this,arguments)}}(),columns:[{title:Object(e.jsx)(s.a,{id:"groups",defaultMessage:"Groups"}),dataIndex:"groups",hideInTable:!0,filterMultiple:!0,valueType:"select",fieldProps:{options:r,mode:"multiple"}}].concat(Me,[{hideInSearch:!0,title:Object(e.jsx)(s.a,{id:"msTeams"}),dataIndex:"teamsLink",valueType:"option",render:function(){return[Object(e.jsx)(se.a,{to:"#",children:Object(e.jsx)(He.a,{title:Object(e.jsx)(s.a,{id:"msTeams",defaultMessage:"teams"}),children:Object(e.jsx)(F.a,{type:"primary",icon:Object(e.jsx)(ne.a,{})})})},"teamsLink")]}}])})},_t=t("/zsF"),vt=t("PArb"),Ot=t("jrin");function ht(o,u){return Mt.apply(this,arguments)}function Mt(){return Mt=Object(m.a)(Object(_.a)().mark(function o(u,a){return Object(_.a)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(s.i)("/api/admin/schedules/groups/".concat(u),Object(c.a)({method:"GET",useCache:!1},a||{})));case 1:case"end":return n.stop()}},o)})),Mt.apply(this,arguments)}function Bt(o,u,a,r){return Pt.apply(this,arguments)}function Pt(){return Pt=Object(m.a)(Object(_.a)().mark(function o(u,a,r,n){return Object(_.a)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",Object(s.i)("/api/admin/schedules/".concat(u,"/attendances"),Object(c.a)({data:{attendances:[{user_id:a,value:r}]},method:"POST"},n||{})));case 1:case"end":return b.stop()}},o)})),Pt.apply(this,arguments)}var Pa=t("sRBo"),Nt=t("kaz8"),Jt=function(u){var a=u.currentData,r=u.recordData,n=u.groupId,i=u.onSuccess,b=Object(l.useState)(!1),E=Object(K.a)(b,2),x=E[0],M=E[1],p=function(){M(!0),Bt(a.id,r.id,(r==null?void 0:r[String(a.date_from)])===Ge.a.PRESENT?Ge.a.ABSENT:Ge.a.PRESENT).then(function(S){S.success&&ht(Number(n)).then(function(f){f.success&&(i(f.data),M(!1))})})};return x?Object(e.jsx)(P.a,{size:"small"}):Object(e.jsx)(Nt.a,{checked:(r==null?void 0:r[String(a.date_from)])===Ge.a.PRESENT,onChange:function(){return p()}})},zt=Jt,Yt=function(){var u,a,r,n=Object(Z.b)(),i=n.teacherSubjectData,b=Object(s.l)(),E=Object(l.useState)(!1),x=Object(K.a)(E,2),M=x[0],p=x[1],O=Object(l.useState)(),S=Object(K.a)(O,2),f=S[0],v=S[1],y=Object(l.useState)(),C=Object(K.a)(y,2),I=C[0],ie=C[1],T=Object(l.useState)({full_name:""}),oe=Object(K.a)(T,2),Y=oe[0],je=oe[1],Ke=Object(l.useState)((u=i==null||(a=i.groups)===null||a===void 0||(r=a[0])===null||r===void 0?void 0:r.id)!==null&&u!==void 0?u:null),Pe=Object(K.a)(Ke,2),ce=Pe[0],ge=Pe[1],k=Object(l.useMemo)(function(){var G;return((G=I==null?void 0:I.users)!==null&&G!==void 0?G:[]).reduce(function(W,z){var me=z.id,re=z.first_name,Ve=z.last_name,we=z.academic_teacher_id,Ze={id:me,full_name:"".concat(re," ").concat(Ve),academic_teacher_id:we};if(!Ze.full_name.toLowerCase().includes(Y.full_name.toLowerCase())||we!==null)return W;var Be=(f!=null?f:[]).reduce(function(Xe,ke){var gt=ke.attendances.find(function(Et){return Et.user_id===me});return Object(c.a)(Object(c.a)({},Xe),{},Object(Ot.a)({},String(ke.date_from),gt==null?void 0:gt.value))},{}),Qe=Object(c.a)(Object(c.a)({},Ze),Be);return[].concat(Object(D.a)(W),[Qe])},[])},[I,f,Y==null?void 0:Y.full_name]),te=Object(l.useMemo)(function(){var G=(f!=null?f:[]).reduce(function(W,z){return[].concat(Object(D.a)(W),[{title:String(Object(qe.a)(new Date(z.date_from),J.c)),dataIndex:String(z.date_from),hideInSearch:!0,width:100,align:"center",render:function(re,Ve){return Object(e.jsx)(zt,{currentData:z,recordData:Ve,onSuccess:function(Ze){return v(Ze)},groupId:ce})}}])},[]);return p(!1),[{title:Object(e.jsx)(s.a,{id:"nameAndSurname",defaultMessage:"Name and surname"}),dataIndex:"full_name",fixed:"left"}].concat(Object(D.a)(G))},[f]),fe=Object(l.useCallback)(function(G){var W,z;if(G===null)return"";var me=i==null||(W=i.groups)===null||W===void 0?void 0:W.find(function(re){return re.id===G});return(z=me==null?void 0:me.name)!==null&&z!==void 0?z:""},[i==null?void 0:i.groups]),Se=Object(l.useCallback)(function(){return je({full_name:""})},[]),Ee=Object(l.useCallback)(function(G){var W=G.full_name,z=W===void 0?"":W;return je({full_name:z})},[]),ot=Object(l.useMemo)(function(){var G;return((G=i==null?void 0:i.groups)!==null&&G!==void 0?G:[]).map(function(W){var z=W.id,me=W.name;return{value:z,label:me}})},[i==null?void 0:i.groups]),be=Object(l.useCallback)(function(G){Se(),p(!0),ge(G)},[]);return Object(l.useEffect)(function(){ce!==null&&(ht(ce).then(function(G){G.success&&v(G.data)}),Object(ue.b)(ce).then(function(G){G.success&&ie(G.data)}))},[ce]),Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(We.a.Item,{label:Object(e.jsx)(s.a,{id:"group"}),children:Object(e.jsx)(A.a,{onChange:be,value:ce,options:ot})}),Object(e.jsx)(vt.a,{}),te.length===1?Object(e.jsx)(s.a,{id:"noAttendanceSchedule",defaultMessage:"No attendance schedule for this group..."}):Object(e.jsx)(Q.a,{className:"attendances-table",headerTitle:"".concat(b.formatMessage({id:"attendances",defaultMessage:"Attendances"})," (").concat(fe(ce),")"),rowKey:"id",onSubmit:Ee,onReset:Se,search:{layout:"vertical"},loading:M,dataSource:k,scroll:{x:1500},columns:te})]})},Zt=t("Hn4i"),Qt=t("bRQS");function Wt(o,u,a){return Dt.apply(this,arguments)}function Dt(){return Dt=Object(m.a)(Object(_.a)().mark(function o(u,a,r){return Object(_.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(s.i)("/api/admin/semester-subjects/".concat(u,"/tutors/").concat(a,"/grades"),Object(c.a)({method:"GET",useCache:!1},r||{})));case 1:case"end":return i.stop()}},o)})),Dt.apply(this,arguments)}function Xt(o,u,a,r){return It.apply(this,arguments)}function It(){return It=Object(m.a)(Object(_.a)().mark(function o(u,a,r,n){return Object(_.a)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",Object(s.i)("/api/admin/semester-subjects/".concat(u,"/tutors/").concat(a,"/grades"),Object(c.a)({method:"POST",data:r},n||{})));case 1:case"end":return b.stop()}},o)})),It.apply(this,arguments)}function kt(o,u){return At.apply(this,arguments)}function At(){return At=Object(m.a)(Object(_.a)().mark(function o(u,a){return Object(_.a)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(s.i)("/api/admin/lesson-group-users",Object(c.a)({method:"GET",params:{"groups[]":u},useCache:!1},a||{})));case 1:case"end":return n.stop()}},o)})),At.apply(this,arguments)}function qt(o,u,a){return Rt.apply(this,arguments)}function Rt(){return Rt=Object(m.a)(Object(_.a)().mark(function o(u,a,r){return Object(_.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(s.i)("/api/admin/lesson-group-users/groups/".concat(u,"/users/").concat(a),Object(c.a)({method:"GET",useCache:!1},r||{})));case 1:case"end":return i.stop()}},o)})),Rt.apply(this,arguments)}function ea(o){return Lt.apply(this,arguments)}function Lt(){return Lt=Object(m.a)(Object(_.a)().mark(function o(u){return Object(_.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(s.i)("/api/admin/grade-terms",Object(c.a)({method:"GET",useCache:!1},u||{})));case 1:case"end":return r.stop()}},o)})),Lt.apply(this,arguments)}function ta(o,u){return Gt.apply(this,arguments)}function Gt(){return Gt=Object(m.a)(Object(_.a)().mark(function o(u,a){return Object(_.a)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(s.i)("/api/admin/grade-scales/".concat(u),Object(c.a)({method:"GET",useCache:!1},a||{})));case 1:case"end":return n.stop()}},o)})),Gt.apply(this,arguments)}function aa(o,u){return Ut.apply(this,arguments)}function Ut(){return Ut=Object(m.a)(Object(_.a)().mark(function o(u,a){return Object(_.a)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(s.i)("/api/admin/final-grades",Object(c.a)({method:"POST",data:u},a||{})));case 1:case"end":return n.stop()}},o)})),Ut.apply(this,arguments)}function na(o,u,a){return Ft.apply(this,arguments)}function Ft(){return Ft=Object(m.a)(Object(_.a)().mark(function o(u,a,r){return Object(_.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(s.i)("/api/admin/final-grades/".concat(u),Object(c.a)({method:"PATCH",data:a},r||{})));case 1:case"end":return i.stop()}},o)})),Ft.apply(this,arguments)}var ra=[{title:Object(e.jsx)(s.a,{id:"grade"}),dataIndex:"grade",editable:!1},{title:Object(e.jsx)(s.a,{id:"degree"}),dataIndex:"name",editable:!1},{title:Object(e.jsx)(s.a,{id:"min_percent"}),dataIndex:"grade_value",valueType:"percent",formItemProps:{rules:[{required:!0,message:Object(e.jsx)(s.a,{id:"field_required"})},{type:"number",min:0,max:100,message:Object(e.jsx)(s.a,{id:"number_between",values:{min:0,max:100}})}]}}],sa=function(){var u,a,r=Object(s.m)("@@initialState"),n=r.initialState,i=Object(Z.b)(),b=i.semester_subject_id,E=i.tutors,x=We.a.useForm(),M=Object(K.a)(x,1),p=M[0],O=Object(l.useState)([]),S=Object(K.a)(O,2),f=S[0],v=S[1],y=Object(l.useRef)(),C=Object(l.useState)(!1),I=Object(K.a)(C,2),ie=I[0],T=I[1],oe=Object(l.useState)(null),Y=Object(K.a)(oe,2),je=Y[0],Ke=Y[1],Pe=Object(l.useMemo)(function(){return!!E.data.find(function(k){var te,fe=k.id;return fe===(n==null||(te=n.currentUser)===null||te===void 0?void 0:te.id)})},[E.data,n==null||(u=n.currentUser)===null||u===void 0?void 0:u.id]),ce=Object(l.useMemo)(function(){return E.data.map(function(k){var te=k.id,fe=k.first_name,Se=k.last_name;return{label:"".concat(fe," ").concat(Se),value:te}})},[E.data]);Object(l.useEffect)(function(){var k,te;if(!Pe||!(n!=null&&(k=n.currentUser)!==null&&k!==void 0&&k.id)){var fe;if((fe=E.data)!==null&&fe!==void 0&&fe[0]){var Se;Ke((Se=E.data)===null||Se===void 0?void 0:Se[0].id)}return}Ke(n==null||(te=n.currentUser)===null||te===void 0?void 0:te.id)},[n==null||(a=n.currentUser)===null||a===void 0?void 0:a.id,Pe]),Object(l.useEffect)(function(){b===null||je===null||(T(!0),Wt(b,je).then(function(k){if(k.success){var te,fe=((te=k.data.grade_scale)!==null&&te!==void 0?te:[]).map(function(Se,Ee){return Object(c.a)(Object(c.a)({},Se),{},{id:String((Ee+1)*100)})});p.setFieldValue("table",fe)}}).finally(function(){T(!1)}))},[b,je]);var ge=Object(l.useCallback)(function(){var k=Object(m.a)(Object(_.a)().mark(function te(fe){return Object(_.a)().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(!(b===null||je===null)){Ee.next=2;break}return Ee.abrupt("return");case 2:return Ee.next=4,Xt(b,je,{grade_scale:fe.table});case 4:case"end":return Ee.stop()}},te)}));return function(te){return k.apply(this,arguments)}}(),[je,b]);return E.loading?Object(e.jsx)(P.a,{}):Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(We.a.Item,{label:Object(e.jsx)(s.a,{id:"menu.Teacher"}),children:Object(e.jsx)(A.a,{disabled:Pe,placeholder:Object(e.jsx)(s.a,{id:"select"}),options:ce,value:je,onChange:function(te){return Ke(te)}})}),Object(e.jsx)(vt.a,{}),Object(e.jsx)(We.a,{form:p,onFinish:ge,submitter:{render:function(te,fe){var Se=Object(K.a)(fe,2),Ee=Se[1];return[Ee]}},children:Object(e.jsx)(Zt.a,{name:"table",rowKey:"id",actionRef:y,formItemProps:{label:Object(e.jsx)(s.a,{id:"grades-scale"})},cardProps:{bodyStyle:{padding:0}},recordCreatorProps:!1,loading:ie,columns:[].concat(ra,[{title:Object(e.jsx)(s.a,{id:"options"}),valueType:"option",render:function(te,fe){return Object(e.jsx)(F.a,{type:"primary",onClick:function(){var Ee;return(Ee=y.current)===null||Ee===void 0?void 0:Ee.startEditable(fe.id)},icon:Object(e.jsx)(at.a,{})})}}]),editable:{form:p,type:"multiple",editableKeys:f,saveText:Object(e.jsx)(F.a,{type:"primary",icon:Object(e.jsx)(Qt.a,{})}),onChange:v,actionRender:function(te,fe,Se){return[Se.save]}}})})]})},Da=t("qbNl"),ua=t("JBPa"),Ia=t("tU7J"),st=t("wFql"),Aa=t("Awhp"),ia=t("KrTs"),ca=t("wd/R"),ut=t.n(ca);function la(o,u){return $t.apply(this,arguments)}function $t(){return $t=Object(m.a)(Object(_.a)().mark(function o(u,a){return Object(_.a)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(s.i)("/api/admin/schedules",Object(c.a)({params:u,method:"GET",useCache:!1},a||{})));case 1:case"end":return n.stop()}},o)})),$t.apply(this,arguments)}var Ra=t("5R/X"),da=function(){var u=Object(l.useState)(null),a=Object(K.a)(u,2),r=a[0],n=a[1],i=Object(l.useState)([]),b=Object(K.a)(i,2),E=b[0],x=b[1],M=Object(Z.b)(),p=M.semester_subject_id,O=ut()(),S=Object(l.useMemo)(function(){return E.map(function(T){return{id:T.id,title:"".concat(T.group.name," (").concat(T.term_status.name,")"),start:ut()(T.date_from).toDate(),end:ut()(T.date_to).toDate(),tutor_name:"".concat(T.tutor.first_name," ").concat(T.tutor.last_name),tutor_email:T.tutor.email,semester:T.semester.name,group:T.group.name,subject:T.subject.name,ms_teams_join_url:T.ms_teams_join_url}})},[E]),f=Object(l.useCallback)(function(T,oe){la({semester_subject_id:p,date_form:T.toDate(),date_to:oe.toDate()}).then(function(Y){Y.success&&x(Y.data)})},[p]),v=Object(l.useCallback)(function(T){n(T)},[]),y=Object(l.useCallback)(function(){n(null)},[]),C=Object(l.useCallback)(function(T){return T.isSame(O,"day")?"warning":T.isAfter(O,"day")?"success":"error"},[]),I=Object(l.useCallback)(function(T){var oe=S.filter(function(Y){return ut()(Y.start).isSame(T,"day")});return Object(e.jsx)("ul",{className:"events",children:oe.map(function(Y){return Object(e.jsx)("li",{onClick:function(){return v(Y)},children:Object(e.jsx)(ia.a,{status:C(ut()(Y.start)),text:Y.title})},Y.id)})})},[E]),ie=Object(l.useCallback)(function(T,oe){var Y=ut()(T).startOf(oe).subtract(1,"month"),je=ut()(T).endOf(oe).add(1,"month");f(Y,je)},[]);return Object(l.useEffect)(function(){var T=ut()().startOf("month"),oe=ut()().endOf("month");f(T,oe)},[]),Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(st.a.Title,{level:4,children:Object(e.jsx)(s.a,{id:"schedule",defaultMessage:"Schedule"})}),Object(e.jsx)(ua.a,{dateCellRender:I,onPanelChange:ie}),Object(e.jsxs)(L.a,{open:r!==null,title:"".concat(r==null?void 0:r.subject,": ").concat(r==null?void 0:r.title),onCancel:y,footer:null,children:[Object(e.jsxs)(st.a.Paragraph,{children:[Object(e.jsx)(s.a,{id:"tutorName",defaultMessage:"Tutor"}),": ",r==null?void 0:r.tutor_name]}),Object(e.jsxs)(st.a.Paragraph,{children:[Object(e.jsx)(s.a,{id:"email",defaultMessage:"Email"}),": ",r==null?void 0:r.tutor_email]}),Object(e.jsxs)(st.a.Paragraph,{children:[Object(e.jsx)(s.a,{id:"group",defaultMessage:"Group"}),": ",r==null?void 0:r.group]}),Object(e.jsxs)(st.a.Paragraph,{children:[Object(e.jsx)(s.a,{id:"semester",defaultMessage:"Semester"}),": ",r==null?void 0:r.semester]}),Object(e.jsxs)(st.a.Paragraph,{children:[Object(e.jsx)(s.a,{id:"started_at",defaultMessage:"Start date"}),":",r&&ut()(r.start).format(J.b)]}),Object(e.jsxs)(st.a.Paragraph,{children:[Object(e.jsx)(s.a,{id:"end_at",defaultMessage:"End date"}),":",r&&ut()(r.end).format(J.b)]}),(r==null?void 0:r.ms_teams_join_url)&&Object(e.jsx)(st.a.Paragraph,{children:Object(e.jsx)("a",{href:r.ms_teams_join_url,target:"_blank",rel:"noreferrer",children:Object(e.jsx)(F.a,{type:"primary",children:Object(e.jsx)(s.a,{id:"msTeams"})})},"teamsLink")})]})]})},La=t("miYZ"),xt=t("tsqr"),wt=t("yj/a"),Vt=t("5Syx"),Ht=t("PpiC"),Kt=t("H6aw"),oa=t("p3I6"),ja=["attendances"],ba=["results"];function fa(o,u){var a=Object(l.useState)({loading:!1}),r=Object(K.a)(a,2),n=r[0],i=r[1];return Object(l.useEffect)(function(){i(function(b){return Object(c.a)(Object(c.a)({},b),{},{loading:!0})}),qt(o,u).then(function(b){b.success&&i(function(E){return Object(c.a)(Object(c.a)({},E),{},{data:b.data})})}).finally(function(){i(function(b){return Object(c.a)(Object(c.a)({},b),{},{loading:!1})})})},[u,o]),{finalGrades:n}}function ma(){var o=Object(l.useState)({loading:!1}),u=Object(K.a)(o,2),a=u[0],r=u[1];return Object(l.useEffect)(function(){r(function(n){return Object(c.a)(Object(c.a)({},n),{},{loading:!0})}),ea().then(function(n){n.success&&r(function(i){return Object(c.a)(Object(c.a)({},i),{},{data:n.data})})}).finally(function(){r(function(n){return Object(c.a)(Object(c.a)({},n),{},{loading:!1})})})},[]),{gradeTerms:a}}function va(o){var u=Object(l.useState)({loading:!1}),a=Object(K.a)(u,2),r=a[0],n=a[1];return Object(l.useEffect)(function(){o!==void 0&&(n(function(i){return Object(c.a)(Object(c.a)({},i),{},{loading:!0})}),ta(o).then(function(i){i.success&&n(function(b){return Object(c.a)(Object(c.a)({},b),{},{data:i.data})})}).finally(function(){n(function(i){return Object(c.a)(Object(c.a)({},i),{},{loading:!1})})}))},[o]),{subjectGradeScales:r}}function Oa(o,u){var a=Object(l.useState)({loading:!1}),r=Object(K.a)(a,2),n=r[0],i=r[1];return Object(l.useEffect)(function(){typeof o!="number"||typeof u!="number"||(i(function(b){return Object(c.a)(Object(c.a)({},b),{},{loading:!0})}),Wt(o,u).then(function(b){b.success&&i(function(E){return Object(c.a)(Object(c.a)({},E),{},{data:b.data.grade_scale.map(function(x,M){return Object(c.a)(Object(c.a)({},x),{},{id:M})})})})}).finally(function(){i(function(b){return Object(c.a)(Object(c.a)({},b),{},{loading:!1})})}))},[o,u]),{tutorGradeScales:n}}function ha(o,u){var a=Object(l.useState)({loading:!1}),r=Object(K.a)(a,2),n=r[0],i=r[1],b=Object(l.useCallback)(function(){i(function(x){return Object(c.a)(Object(c.a)({},x),{},{loading:!0})}),ht(o).then(function(x){if(x.success){var M=x.data.reduce(function(p,O){var S=O.attendances,f=Object(Ht.a)(O,ja),v=S.find(function(y){return y.user_id===u});return v?[].concat(Object(D.a)(p),[Object(c.a)(Object(c.a)({},f),{},{attendance:v})]):p},[]);i(function(p){return Object(c.a)(Object(c.a)({},p),{},{data:M})})}}).finally(function(){i(function(x){return Object(c.a)(Object(c.a)({},x),{},{loading:!1})})})},[o,u]),E=Object(l.useCallback)(function(x,M){i(function(p){return Object(c.a)(Object(c.a)({},p),{},{loading:!0})}),Bt(x,u,M).then(function(p){p.success?xt.b.success(p.message):xt.b.error(p.message)}).finally(function(){b(),i(function(p){return Object(c.a)(Object(c.a)({},p),{},{loading:!1})})})},[b,u]);return Object(l.useEffect)(function(){b()},[b]),{userAttendanceSchedules:n,fetchUserAttendanceSchedules:b,updateUserAttendanceSchedules:E}}function ga(o){var u=Object(l.useState)({loading:!1}),a=Object(K.a)(u,2),r=a[0],n=a[1];return Object(l.useEffect)(function(){n(function(i){return Object(c.a)(Object(c.a)({},i),{},{loading:!0})}),$({student_id:o}).then(function(i){if(i.success){var b=i.data.reduce(function(E,x){var M=Object(K.a)(x.results,1),p=M[0],O=Object(Ht.a)(x,ba);return p?[].concat(Object(D.a)(E),[Object(c.a)(Object(c.a)({},O),{},{result:p})]):E},[]);n(function(E){return Object(c.a)(Object(c.a)({},E),{},{data:b})})}}).finally(function(){n(function(i){return Object(c.a)(Object(c.a)({},i),{},{loading:!1})})})},[o]),{studentExams:r}}function pa(o,u){var a=Object(l.useState)({loading:!1}),r=Object(K.a)(a,2),n=r[0],i=r[1],b=Object(l.useState)({loading:!1}),E=Object(K.a)(b,2),x=E[0],M=E[1],p=Object(l.useState)({loading:!1}),O=Object(K.a)(p,2),S=O[0],f=O[1];return Object(l.useEffect)(function(){i(function(v){return Object(c.a)(Object(c.a)({},v),{},{loading:!0})}),Object(Kt.e)({group_id:o}).then(function(v){v.success&&i(function(y){return Object(c.a)(Object(c.a)({},y),{},{data:v.data})})}).finally(function(){i(function(v){return Object(c.a)(Object(c.a)({},v),{},{loading:!1})})})},[o]),Object(l.useEffect)(function(){!n.data||(f(function(v){return Object(c.a)(Object(c.a)({},v),{},{loading:!0})}),Promise.all(n.data.map(function(v){var y=v.id;return Object(Kt.m)(Number(y))})).then(function(v){v.forEach(function(y){y.success&&f(function(C){return Object(c.a)(Object(c.a)({},C),{},{data:Object(c.a)(Object(c.a)({},C.data),{},Object(Ot.a)({},Number(y.data.id),Object(oa.c)(y.data.lessons)))})})})}).finally(function(){f(function(v){return Object(c.a)(Object(c.a)({},v),{},{loading:!1})})}),M(function(v){return Object(c.a)(Object(c.a)({},v),{},{loading:!0})}),Promise.all(n.data.map(function(v){var y=v.id;return Object(Kt.l)(Number(y),["EscolaLms\\Reports\\Stats\\Course\\FinishedTopics","EscolaLms\\Reports\\Stats\\Course\\AttendanceList"]).then(function(C){if(C.success){var I,ie,T=((I=C.data["EscolaLms\\Reports\\Stats\\Course\\FinishedTopics"])!==null&&I!==void 0?I:[]).filter(function(Y){return Y.id===u}),oe=(ie=C.data["EscolaLms\\Reports\\Stats\\Course\\AttendanceList"])!==null&&ie!==void 0?ie:[];M(function(Y){return Object(c.a)(Object(c.a)({},Y),{},{data:Object(c.a)(Object(c.a)({},Y.data),{},Object(Ot.a)({},Number(y),{finishedTopics:T,attendanceList:oe}))})})}})})).finally(function(){return M(function(v){return Object(c.a)(Object(c.a)({},v),{},{loading:!1})})}))},[n.data,u]),{userCourses:n,userCoursesStats:x,userCoursesTopics:S}}var _a=[{title:Object(e.jsx)(s.a,{id:"grade"}),dataIndex:"grade"},{title:Object(e.jsx)(s.a,{id:"degree"}),dataIndex:"name"},{title:Object(e.jsx)(s.a,{id:"min_percent"}),dataIndex:"grade_value",valueType:"percent"}],xa=[{title:Object(e.jsx)(s.a,{id:"date"}),dataIndex:"date_from",render:function(u,a){return Object(qe.a)(new Date(a.date_from),J.c)}}],Sa=[{title:Object(e.jsx)(s.a,{id:"name"}),dataIndex:"title"},{title:Object(e.jsx)(s.a,{id:"TeacherSubjects.Exams.grade_weight",defaultMessage:"Weight"}),dataIndex:"weight",valueType:"percent"},{title:Object(e.jsx)(s.a,{id:"created_at",defaultMessage:"Created at"}),dataIndex:"created_at",render:function(u,a){return Object(qe.a)(new Date(a.created_at),J.c)}},{title:Object(e.jsx)(s.a,{id:"grade"}),dataIndex:"result",render:function(u,a){return"".concat(a.result.result,"%")}}],Ea=[{title:Object(e.jsx)(s.a,{id:"name"}),dataIndex:"name"},{title:Object(e.jsx)(s.a,{id:"issued_at"}),dataIndex:"grade",render:function(u,a){var r,n;return(r=a.grade)!==null&&r!==void 0&&r.grade_date?Object(qe.a)(new Date((n=a.grade)===null||n===void 0?void 0:n.grade_date),J.c):"-"}},{title:Object(e.jsx)(s.a,{id:"grade"}),dataIndex:"grade",render:function(u,a){var r,n;return(r=(n=a.grade)===null||n===void 0?void 0:n.grade_name)!==null&&r!==void 0?r:"-"}}],St=6,ya=function(u){var a,r,n=u.user_id,i=u.group_id,b=Object(Z.b)(),E=b.semester_subject_id,x=ga(n),M=x.studentExams,p=fa(i,n),O=p.finalGrades,S=ma(),f=S.gradeTerms,v=va((a=O.data)===null||a===void 0?void 0:a.s_subject_scale_form_id),y=v.subjectGradeScales,C=Oa(E,(r=O.data)===null||r===void 0?void 0:r.tutor_id),I=C.tutorGradeScales,ie=ha(i,n),T=ie.userAttendanceSchedules,oe=ie.updateUserAttendanceSchedules,Y=pa(i,n),je=Y.userCourses,Ke=Y.userCoursesStats,Pe=Y.userCoursesTopics,ce=We.a.useForm(),ge=Object(K.a)(ce,1),k=ge[0],te=Object(l.useMemo)(function(){var be;return((be=f.data)!==null&&be!==void 0?be:[]).map(function(G){var W=G.id,z=G.name;return{label:z,value:W}})},[f.data]),fe=Object(l.useMemo)(function(){var be;return((be=y.data)!==null&&be!==void 0?be:[]).map(function(G){var W=G.name,z=G.id;return{label:W,value:z}})},[y.data]),Se=Object(l.useMemo)(function(){var be,G,W,z=((be=M.data)!==null&&be!==void 0?be:[]).reduce(function(Xe,ke){var gt=ke.result,Et=ke.weight;return[Xe[0]+gt.result*Et,Xe[1]+Et]},[0,0]),me=Object(K.a)(z,2),re=me[0],Ve=me[1],we=Number.isNaN(re/Ve)?0:re/Ve,Ze=((G=I.data)!==null&&G!==void 0?G:[]).sort(function(Xe,ke){return Xe.grade_value-ke.grade_value}).reduce(function(Xe,ke){return[].concat(Object(D.a)(Xe),[Object(c.a)(Object(c.a)({},ke),{},{isWeightedAverageGreater:we>=ke.grade_value})])},[]);if(Ze.every(function(Xe){var ke=Xe.isWeightedAverageGreater;return ke})){var Be;return(Be=Ze.at(-1))===null||Be===void 0?void 0:Be.name}var Qe=Ze.findIndex(function(Xe){var ke=Xe.isWeightedAverageGreater;return!ke});return Qe<0?"":(W=Ze[Qe-1])===null||W===void 0?void 0:W.name},[M.data,I.data]),Ee=Object(l.useCallback)(function(){var be=Object(m.a)(Object(_.a)().mark(function G(W){var z,me,re,Ve,we;return Object(_.a)().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:if(re=W.grade_scale_id,Ve=W.grade_term_id,((z=O.data)===null||z===void 0?void 0:z.id)!==void 0){Be.next=3;break}return Be.abrupt("return");case 3:if(we=(me=O.data)===null||me===void 0?void 0:me.grades.find(function(Qe){var Xe=Qe.grade_term;return Xe.id===Ve}),!we){Be.next=7;break}return na(we.id,{grade_scale_id:re}).then(function(Qe){xt.b[Qe.success?"success":"error"](Qe.message),s.f.push("/teacher/subjects/".concat(E,"/final-grades"))}),Be.abrupt("return");case 7:aa({grade_scale_id:re,grade_term_id:Ve,lesson_group_user_id:O.data.id}).then(function(Qe){xt.b[Qe.success?"success":"error"](Qe.message),s.f.push("/teacher/subjects/".concat(E,"/final-grades"))});case 8:case"end":return Be.stop()}},G)}));return function(G){return be.apply(this,arguments)}}(),[O.data,E]),ot=Object(l.useMemo)(function(){var be;return((be=f.data)!==null&&be!==void 0?be:[]).map(function(G){var W;return Object(c.a)(Object(c.a)({},G),{},{grade:(W=O.data)===null||W===void 0?void 0:W.grades.find(function(z){var me=z.grade_term;return me.id===G.id})})})},[O.data,f.data]);return O.loading?Object(e.jsx)(P.a,{}):Object(e.jsxs)(e.Fragment,{children:[O.data&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(st.a.Text,{style:{fontSize:"16px",fontWeight:500},children:Object(e.jsx)(s.a,{id:"TeacherSubjects.FinalGrades.Student",values:O.data.user})}),Object(e.jsx)(vt.a,{})]}),Object(e.jsxs)(Ye.a,{gutter:[48,48],justify:"space-between",children:[Object(e.jsx)(ae.a,{span:12,children:Object(e.jsx)(Q.a,{rowKey:"id",headerTitle:Object(e.jsx)(s.a,{id:"TeacherSubjects.FinalGrades.StudentPartialGrades"}),search:!1,pagination:{pageSize:St},dataSource:M.data,loading:M.loading,columns:Sa,options:!1,cardProps:{bodyStyle:{padding:0}}})}),Object(e.jsx)(ae.a,{span:12,children:Object(e.jsx)(Q.a,{rowKey:"id",headerTitle:Object(e.jsx)(s.a,{id:"TeacherSubjects.FinalGrades.FinalGrades"}),search:!1,pagination:{pageSize:St},dataSource:ot,loading:O.loading||f.loading,columns:Ea,options:!1,cardProps:{bodyStyle:{padding:0}}})}),Object(e.jsx)(ae.a,{span:12,children:Object(e.jsx)(Q.a,{rowKey:"id",headerTitle:Object(e.jsx)(s.a,{id:"TeacherSubjects.FinalGrades.Attendances"}),search:!1,options:!1,pagination:{pageSize:St},cardProps:{bodyStyle:{padding:0}},dataSource:T.data,loading:T.loading,columns:[].concat(xa,[{title:Object(e.jsx)(s.a,{id:"TeacherSubjects.FinalGrades.Attendance"}),dataIndex:"attendance",render:function(G,W){return Object(e.jsx)(Nt.a,{onChange:function(me){return oe(W.id,me.target.checked?Ge.a.PRESENT:Ge.a.ABSENT)},checked:W.attendance.value===Ge.a.PRESENT})}}])})}),Object(e.jsx)(ae.a,{span:12,children:Object(e.jsx)(Q.a,{rowKey:"id",headerTitle:Object(e.jsx)(s.a,{id:"TeacherSubjects.FinalGrades.GradesScale"}),search:!1,options:!1,pagination:{pageSize:St},cardProps:{bodyStyle:{padding:0}},dataSource:I.data,loading:I.loading,columns:_a})}),je.loading&&!je.data||Ke.loading&&!Ke.data||Pe.loading&&!Pe.data&&Object(e.jsx)(P.a,{}),je.data&&Ke.data&&Pe.data&&je.data.map(function(be){var G,W,z,me,re,Ve,we,Ze,Be=be.id,Qe=be.title;return Object(e.jsxs)(ae.a,{span:24,children:[Object(e.jsx)(st.a.Text,{style:{fontSize:"16px",fontWeight:500},children:Qe}),Object(e.jsx)(Vt.c,{topics:(G=(W=Pe.data)===null||W===void 0?void 0:W[Number(Be)])!==null&&G!==void 0?G:[],stats:(z=(me=Ke.data)===null||me===void 0||(re=me[Number(Be)])===null||re===void 0?void 0:re.finishedTopics)!==null&&z!==void 0?z:[]}),Object(e.jsx)(Vt.a,{stats:(Ve=(we=Ke.data)===null||we===void 0||(Ze=we[Number(Be)])===null||Ze===void 0?void 0:Ze.attendanceList)!==null&&Ve!==void 0?Ve:[]})]},Be)})]}),Object(e.jsx)(We.a,{form:k,onFinish:Ee,children:Object(e.jsxs)(We.a.Group,{style:{display:"flex",flexDirection:"column",paddingTop:"48px"},title:Object(e.jsx)(s.a,{id:"TeacherSubjects.FinalGrades.IssueAssessment"}),titleStyle:{flex:"unset"},align:"center",children:[Object(e.jsx)(wt.a,{name:"grade_term_id",rules:[{required:!0,message:Object(e.jsx)(s.a,{id:"field_required"})}],label:Object(e.jsx)(s.a,{id:"TeacherSubjects.FinalGrades.GradeTerm"}),options:te,width:"sm",fieldProps:{loading:f.loading}}),Object(e.jsx)(wt.a,{name:"grade_scale_id",rules:[{required:!0,message:Object(e.jsx)(s.a,{id:"field_required"})}],label:Object(e.jsx)(s.a,{id:"TeacherSubjects.FinalGrades.FinalGrade"}),options:fe,fieldProps:{loading:O.loading||y.loading}}),Object(e.jsx)(We.a.Item,{children:Object(e.jsx)(s.a,{id:"TeacherSubjects.FinalGrades.ProposedGrade",values:{grade:Se}})})]})})]})},Ta=[{title:Object(e.jsx)(s.a,{id:"first_name"}),dataIndex:"first_name",render:function(u,a){return a.user.first_name}},{title:Object(e.jsx)(s.a,{id:"last_name"}),dataIndex:"last_name",render:function(u,a){return a.user.last_name}},{title:Object(e.jsx)(s.a,{id:"grade"}),hideInSearch:!0,dataIndex:"grades",render:function(u,a){return Object(e.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:a.grades.length?a.grades.map(function(r){var n=r.grade_name,i=r.grade_term,b=r.id;return Object(e.jsxs)(st.a.Text,{children:[i.name,": ",n]},b)}):"-"})}}],Ca=function(){var u,a,r=Object($e.k)(),n=Object(l.useMemo)(function(){var O,S,f,v;return{user_id:Number.isNaN(Number((O=r.query)===null||O===void 0?void 0:O.user_id))?null:Number((S=r.query)===null||S===void 0?void 0:S.user_id),group_id:Number.isNaN(Number((f=r.query)===null||f===void 0?void 0:f.group_id))?null:Number((v=r.query)===null||v===void 0?void 0:v.group_id)}},[(u=r.query)===null||u===void 0?void 0:u.user_id,(a=r.query)===null||a===void 0?void 0:a.group_id]),i=n.user_id,b=n.group_id,E=Object(Z.b)(),x=E.teacherSubjectData,M=E.semester_subject_id,p=Object(l.useMemo)(function(){var O;return((O=x==null?void 0:x.groups)!==null&&O!==void 0?O:[]).map(function(S){var f=S.id,v=S.name;return{label:v,value:f}})},[x==null?void 0:x.groups]);return i!==null&&b!==null?Object(e.jsx)(ya,{user_id:i,group_id:b}):Object(e.jsx)(Q.a,{rowKey:"id",search:{layout:"vertical"},request:function(){var O=Object(m.a)(Object(_.a)().mark(function S(f){var v,y,C,I,ie,T,oe,Y,je,Ke;return Object(_.a)().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return y=f.group_id,C=y===void 0?[]:y,I=f.first_name,ie=I===void 0?"":I,T=f.last_name,oe=T===void 0?"":T,Y=((v=x==null?void 0:x.groups)!==null&&v!==void 0?v:[]).map(function(ge){var k=ge.id;return k}),ce.next=4,kt(C.length===0?Y:C);case 4:if(je=ce.sent,je.success){ce.next=7;break}return ce.abrupt("return",{success:!1,total:0,data:[]});case 7:return Ke=je.data.filter(function(ge){var k=ge.user;return k.first_name.toLowerCase().includes(ie.toLowerCase())&&k.last_name.toLowerCase().includes(oe.toLowerCase())}),ce.abrupt("return",{success:!0,total:Ke.length,data:Ke});case 9:case"end":return ce.stop()}},S)}));return function(S){return O.apply(this,arguments)}}(),columns:[{title:Object(e.jsx)(s.a,{id:"group"}),dataIndex:"group_id",valueType:"select",fieldProps:{options:p,mode:"multiple"},render:function(S,f){return Object(e.jsx)(N.a,{type:"Students",type_id:f.group_id},f.group_id)}}].concat(Ta,[{title:Object(e.jsx)(s.a,{id:"options"}),hideInSearch:!0,render:function(S,f){return[Object(e.jsx)(se.a,{to:"/teacher/subjects/".concat(M,"/final-grades?user_id=").concat(f.user.id,"&group_id=").concat(f.group_id),children:Object(e.jsx)(He.a,{title:Object(e.jsx)(s.a,{id:"edit"}),children:Object(e.jsx)(F.a,{type:"primary",icon:Object(e.jsx)(at.a,{})})})},"edit")]}}])})},Ma=function(u){var a,r,n=u.tab,i=Object(s.l)(),b=Object(s.m)("@@initialState"),E=b.setInitialState,x=b.initialState,M=Object(Z.b)(),p=M.teacherSubjectData,O=M.semester_subject_id,S=M.tutors,f=Object(l.useCallback)(Object(pe.a)(x==null?void 0:x.currentUser),[x==null?void 0:x.currentUser]),v=Object(l.useMemo)(function(){return!!S.data.find(function(y){var C,I=y.id;return I===(x==null||(C=x.currentUser)===null||C===void 0?void 0:C.id)})||f(ye.a.TeacherListGradeScale)},[]);return p?Object(e.jsx)(q.a,{title:Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(s.a,{id:p==null||(a=p.subject)===null||a===void 0?void 0:a.name}),", ",Object(e.jsx)(s.a,{id:n})]}),tabBarExtraContent:Object(e.jsx)("div",{style:{display:"flex",padding:"12px",gap:"12px"},children:Object(e.jsx)(se.a,{to:"/teacher/subjects/".concat(O,"/exams?exam_id=new"),children:Object(e.jsx)(F.a,{type:"primary",children:Object(e.jsx)(s.a,{id:"uploadGrades",defaultMessage:"uploadGrades"})})})}),header:{breadcrumb:{routes:[{path:"teacher",breadcrumbName:i.formatMessage({id:"Teacher"})},{path:"subjects",breadcrumbName:i.formatMessage({id:"Subjects"})},{path:String(O),breadcrumbName:String((r=p.subject)===null||r===void 0?void 0:r.name)},{path:String(n),breadcrumbName:i.formatMessage({id:n,defaultMessage:String(n)})}]}},children:Object(e.jsxs)(d.a,{bodyStyle:{padding:"24px"},tabs:{type:"card",activeKey:n,onChange:function(C){E(Object(c.a)({},x)),s.f.push("/teacher/subjects/".concat(O,"/").concat(C))}},children:[Object(e.jsx)(d.a.TabPane,{tab:Object(e.jsx)(s.a,{id:"groups"}),children:Object(e.jsx)(De.a,{})},"groups"),Object(e.jsx)(d.a.TabPane,{tab:Object(e.jsx)(s.a,{id:"students"}),children:Object(e.jsx)(mt,{})},"students"),Object(e.jsx)(d.a.TabPane,{tab:Object(e.jsx)(s.a,{id:"exams"}),children:Object(e.jsx)(ee,{})},"exams"),Object(e.jsx)(d.a.TabPane,{tab:Object(e.jsx)(s.a,{id:"schedule"}),children:Object(e.jsx)(da,{})},"schedule"),Object(e.jsx)(d.a.TabPane,{tab:Object(e.jsx)(s.a,{id:"attendance"}),children:Object(e.jsx)(Yt,{})},"attendance"),v&&Object(e.jsx)(d.a.TabPane,{tab:Object(e.jsx)(s.a,{id:"grades-scale"}),children:Object(e.jsx)(sa,{})},"grades-scale"),Object(e.jsx)(d.a.TabPane,{tab:Object(e.jsx)(s.a,{id:"final-grades"}),children:Object(e.jsx)(Ca,{})},"final-grades")]})}):Object(e.jsx)(P.a,{})},Ga=le.default=function(){var o=Object($e.l)(),u=o.subjectId,a=o.tab,r=a===void 0?"groups":a;return Object(e.jsx)(Z.a,{semester_subject_id:Number(u),children:Object(e.jsx)(Ma,{tab:r})})}},p3I6:function(Fe,le,t){"use strict";t.d(le,"b",function(){return Z}),t.d(le,"c",function(){return ve}),t.d(le,"a",function(){return lt});var c=t("miYZ"),w=t("tsqr"),F=t("tJVT"),h=t("k1fw"),P=t("oBTY"),l=t("q1tI"),s=t.n(l),se=t("9kvl"),$e=t("Ty5D"),d=t("H6aw"),q=t("/y+f"),ye=t("nKUr"),pe=t.n(ye),Z=s.a.createContext({}),De=function(){return Math.round(Math.random()*99999)},it=function Q(J){return J.reduce(function($,g){return[].concat(Object(P.a)($),Object(P.a)(g.lessons?Q(g.lessons):[]),[g])},[])},ve=function Q(J){return J.reduce(function($,g){var B;return[].concat(Object(P.a)($),Object(P.a)(g.lessons?Q(g.lessons):[]),Object(P.a)((B=g.topics)!==null&&B!==void 0?B:[]))},[])},tt=function Q(J,$,g){return J.map(function(B){var Oe,U;return Object(h.a)(Object(h.a)({},B),{},{lessons:B.lessons?Q(B.lessons,$,g):[],topics:B.id===$?[].concat(Object(P.a)((Oe=B.topics)!==null&&Oe!==void 0?Oe:[]),[g]):(U=B.topics)!==null&&U!==void 0?U:[]})})},He=function Q(J,$,g){return J.map(function(B){var Oe,U,j;return Object(h.a)(Object(h.a)({},B),{},{lessons:Q((Oe=B.lessons)!==null&&Oe!==void 0?Oe:[],$,g),topics:(U=(j=B.topics)===null||j===void 0?void 0:j.map(function(he){return he.id===$?g:he}))!==null&&U!==void 0?U:[]})})},_=function Q(J,$,g){return g?J.map(function(B){return Object(h.a)(Object(h.a)({},B),{},{lessons:[].concat(Object(P.a)(B.lessons?Q(B.lessons,$,g):[]),Object(P.a)(B.id===g?[$]:[]))})}):[].concat(Object(P.a)(J),[$])},m=function Q(J,$,g){return J.map(function(B){return Object(h.a)(Object(h.a)({},B.id===$?g:B),{},{lessons:B.lessons?Q(B.lessons,$,g):[]})})},qe=function Q(J,$){return J.map(function(g){return Object(h.a)(Object(h.a)({},g),{},{parent_id:$,lessons:g.lessons?Q(g.lessons,g.id):[]})})},at=function Q(J,$){return J.filter(function(g){return g.id!==$}).map(function(g){return Object(h.a)(Object(h.a)({},g),{},{lessons:g.lessons?Q(g.lessons,$):[]})})},Ne=function Q(J,$){return J.map(function(g){return Object(h.a)(Object(h.a)({},g),{},{lessons:g.lessons?Q(g.lessons,$):[],topics:g.topics?g.topics.filter(function(B){return B.id!==$}):[]})})},lt=function(J){var $=J.children,g=J.id,B=Object(l.useState)(),Oe=Object(F.a)(B,2),U=Oe[0],j=Oe[1],he=Object(se.l)(),Te=Object(l.useMemo)(function(){return U&&U.lessons?ve(U.lessons):[]},[U]),Re=Object(l.useMemo)(function(){return U&&U.lessons?it(U.lessons):[]},[U]),_e=Object(l.useState)([]),Le=Object(F.a)(_e,2),Ce=Le[0],Je=Le[1],R=Object($e.k)();Object(l.useEffect)(function(){Je([])},[]);var N=Object(l.useCallback)(function(){Object(d.m)(g).then(function(L){return L.success&&j(Object(h.a)(Object(h.a)({},L.data),{},{lessons:qe(L.data.lessons)}))})},[g]);Object(l.useEffect)(function(){N()},[N]);var xe=Object(l.useCallback)(function(L){var D=Re.find(function(V){var A;return V==null||(A=V.topics)===null||A===void 0?void 0:A.find(function(H){return H.id===L})});return D?D.id:null},[Re]),nt=Object(l.useMemo)(function(){var L,D;return(L=R.query)!==null&&L!==void 0&&L.lesson?{mode:"lesson",id:Number(R.query.lesson),value:Re.find(function(V){return V.id===Number(R.query.lesson)})}:(D=R.query)!==null&&D!==void 0&&D.topic?{mode:"topic",id:Number(R.query.topic),value:Te.find(function(V){return V.id===Number(R.query.topic)})}:{mode:"init"}},[R.query,U,Re,Te]),K=Object(l.useCallback)(function(L){var D={course_id:g,topics:[],isNew:!0,id:U?U.lessons.length+1:De(),order:0,title:he.formatMessage({id:"add_title_here"}),active:!0,parent_id:L};return j(function(V){var A;return Object(h.a)(Object(h.a)({},V),{},{lessons:_((A=V==null?void 0:V.lessons)!==null&&A!==void 0?A:[],D,L)})}),D},[g,U]),et=Object(l.useCallback)(function(L,D){var V=Re.find(function(H){return H.id===L}),A=V&&V.isNew;return(A?Object(d.g)(D):Object(d.u)(L,D)).then(function(H){return w.b.success(H.message),N(),H.success&&j(function(e){var Ue;return Object(h.a)(Object(h.a)({},e),{},{lessons:m((Ue=e==null?void 0:e.lessons)!==null&&Ue!==void 0?Ue:[],L,Object(h.a)(Object(h.a)({},H.data),{},{isNew:!1}))})})})},[U]),Ye=Object(l.useCallback)(function(L){var D=Re.find(function(A){return A.id===L});if(!!D){var V=D.isNew;V?j(function(A){var H;return Object(h.a)(Object(h.a)({},A),{},{lessons:at((H=A==null?void 0:A.lessons)!==null&&H!==void 0?H:[],L)})}):Object(d.o)(L).then(function(A){A.success&&(w.b.success(A.message),j(function(H){var e;return Object(h.a)(Object(h.a)({},H),{},{lessons:at((e=H==null?void 0:H.lessons)!==null&&e!==void 0?e:[],L)})}))})}},[U]),dt=Object(l.useCallback)(function(L,D){var V,A=xe(L),H=Re.find(function(ze){return ze.id===A}),e=H&&((V=H.topics)===null||V===void 0?void 0:V.find(function(ze){return ze.id===L})),Ue=e==null?void 0:e.isNew;return(Ue?Object(d.h)(D):Object(d.v)(L,D)).then(function(ze){ze.success&&(w.b.success(ze.message),N(),se.f.push("/courses/list/".concat(g,"/program/?topic=").concat(ze.data.id)),(e==null?void 0:e.topicable_type)===q.f.Video&&setTimeout(function(){N()},5e3))})},[xe,U,N]),ae=Object(l.useCallback)(function(L){var D=xe(L),V=Re.find(function(e){return e.id===D});if(!!V){var A=Te==null?void 0:Te.find(function(e){return e.id===L}),H=A==null?void 0:A.isNew;H&&!A.topicable?j(function(e){var Ue;return Object(h.a)(Object(h.a)({},e),{},{lessons:Ne((Ue=e==null?void 0:e.lessons)!==null&&Ue!==void 0?Ue:[],L)})}):Object(d.p)(L).then(function(e){e.success&&(w.b.success(e.message),j(function(Ue){var ze;return Object(h.a)(Object(h.a)({},Ue),{},{lessons:Ne((ze=Ue==null?void 0:Ue.lessons)!==null&&ze!==void 0?ze:[],L)})}))})}},[U,xe]),We=Object(l.useCallback)(function(L,D){var V={lesson_id:L,isNew:!0,id:De(),title:he.formatMessage({id:"add_title_here"}),active:!0,topicable_type:D};return j(function(A){var H;return Object(h.a)(Object(h.a)({},A),{},{lessons:tt((H=A==null?void 0:A.lessons)!==null&&H!==void 0?H:[],L,V)})}),V},[]),bt=function(D,V){j(function(A){var H;return Object(h.a)(Object(h.a)({},A),{},{lessons:He((H=A==null?void 0:A.lessons)!==null&&H!==void 0?H:[],D,V.file.response.data)})}),se.f.push("/courses/list/".concat(g,"/program/?topic=").concat(V.file.response.data.id))},de=Object(l.useCallback)(function(L){return Object(d.d)(L).then(function(D){if(D.success){w.b.success(D.message);var V=xe(L);j(function(A){var H;return Object(h.a)(Object(h.a)({},A),{},{lessons:A?(H=A.lessons)===null||H===void 0?void 0:H.map(function(e){if(e.id===V){var Ue=e.topics||[];return Object(h.a)(Object(h.a)({},e),{},{topics:[].concat(Object(P.a)(Ue),[D.data])})}return e}):[]})})}})},[U,xe]),Ge=Object(l.useCallback)(function(L){return Object(d.c)(L).then(function(D){D.success&&(w.b.success(D.message),j(function(V){return Object(h.a)(Object(h.a)({},V),{},{lessons:V?[].concat(Object(P.a)(V.lessons),[D.data]):[]})}))})},[]),ct={state:U,h5ps:Ce,id:g,addNewLesson:K,updateLesson:et,updateTopic:dt,deleteLesson:Ye,addNewTopic:We,deleteTopic:ae,onTopicUploaded:bt,cloneTopic:de,cloneLesson:Ge,currentEditMode:nt,getLessons:N};return Object(ye.jsx)(Z.Provider,{value:ct,children:$})}},quyA:function(Fe,le){var t="\\ud800-\\udfff",c="\\u0300-\\u036f",w="\\ufe20-\\ufe2f",F="\\u20d0-\\u20ff",h=c+w+F,P="\\ufe0e\\ufe0f",l="\\u200d",s=RegExp("["+l+t+h+P+"]");function se($e){return s.test($e)}Fe.exports=se},wy8a:function(Fe,le,t){var c=t("KxBF");function w(F,h,P){var l=F.length;return P=P===void 0?l:P,!h&&P>=l?F:c(F,h,P)}Fe.exports=w}}]);
