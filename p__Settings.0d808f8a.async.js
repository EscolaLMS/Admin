(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"3fxf":function(Oe,R,t){"use strict";var L=t("DjyN"),H=t("NUBc"),ee=t("Mwp2"),$=t("VXEj"),I=t("+L6B"),O=t("2/Rp"),B=t("5NDa"),z=t("5rEg"),le=t("oBTY"),a=t("k1fw"),Y=t("tJVT"),P=t("DYRE"),te=t("zeV3"),C=t("tU7J"),x=t("wFql"),h=t("q1tI"),V=t.n(h),d=t("BAh9"),ie=t("/MfK"),S=t("mAF4"),ce=t("dF/Y"),m=t("9kvl"),K=t("DBJ/"),N=t("lLVY"),W=t.n(N),o=t("nKUr"),Z=t.n(o),fe=function(ue){var re=ue.directory,je=ue.onUploaded;return Object(o.jsxs)(te.b,{align:"start",children:[Object(o.jsxs)(x.a.Text,{children:[Object(o.jsx)(m.a,{id:"pages.files.filesBrowser"}),Object(o.jsx)(x.a.Text,{code:!0,children:re})]}),Object(o.jsx)(K.a,{url:"/api/admin/file/upload",name:"file[]",data:{target:re},onUpload:function(F){F.success&&je(re,F.data)}})]})},Te=function(ue){var re=ue.defaultDirectory,je=re===void 0?"/":re,ne=ue.onFile,F=ue.hideDeleteBtn,Me=F===void 0?!1:F,be=ue.forceLoading,me=be===void 0?!1:be,Ie=Object(m.j)(),xe=Object(h.useState)({loading:!1,name:"",directory:je,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),Ee=Object(Y.a)(xe,2),U=Ee[0],ve=Ee[1],G=Object(h.useRef)(),e=Object(h.useCallback)(function(E){ve(function(f){return Object(a.a)(Object(a.a)({},f),{},{loading:E})})},[]),_e=Object(h.useCallback)(function(E,f){E.success&&ve(function(D){return Object(a.a)(Object(a.a)(Object(a.a)({},D),E.data),{},{data:[{url:f.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(le.a)(E.data.data.map(function(J){return Object(a.a)(Object(a.a)({},J),{},{url:J.mime==="directory"?"".concat(f,"/").concat(J.name):J.url})}))).filter(function(J){return f==="/"||f===je?J.name!=="..":!0}),directory:f,loading:!1})})},[e]),Q=Object(h.useCallback)(function(E){var f,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,J=function(){return G.current&&G.current.abort()};return J(),G.current=new AbortController,e(!0),Object(d.a)({directory:E,page:D},{signal:(f=G.current)===null||f===void 0?void 0:f.signal}).then(function(oe){oe.success&&_e(oe,E)}).catch(function(){return e(!1)}),function(){J()}},[e]);Object(h.useEffect)(function(){return Q(je)},[je,Q]);var Ce=Object(h.useCallback)(function(E){e(!0),Object(d.c)(E).then(function(){Q(U.directory)}).catch(function(){e(!1)})},[Q,e,U.directory]),he=Object(h.useCallback)(function(E,f){var D,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,oe=function(){return G.current&&G.current.abort()};return oe(),G.current=new AbortController,e(!0),Object(d.b)({directory:E,name:f,page:J},{signal:(D=G.current)===null||D===void 0?void 0:D.signal}).then(function(Pe){Pe.success&&_e(Pe,E)}).catch(function(){return e(!1)}),function(){oe()}},[e]);return Object(o.jsxs)("div",{className:"file-browser",children:[Object(o.jsxs)("div",{className:"file-browser__header",children:[Object(o.jsx)(z.a,{placeholder:Ie.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(f){return ve(function(D){return Object(a.a)(Object(a.a)({},D),{},{name:f.target.value})})},value:U.name}),Object(o.jsxs)("div",{children:[Object(o.jsx)(O.a,{className:"file-browser__button",onClick:function(){return Q(U.directory)},children:Object(o.jsx)(m.a,{id:"reset"})}),Object(o.jsx)(O.a,{className:"file-browser__button",type:"primary",onClick:function(){return he(U.directory,U.name)},children:Object(o.jsx)(m.a,{id:"query"})})]})]}),Object(o.jsx)($.b,{loading:U.loading||me,size:"small",itemLayout:"horizontal",dataSource:U.data,header:Object(o.jsx)(fe,{directory:U.directory,onUploaded:function(f,D){D&&(Q(f),ne&&ne(D,f))}}),footer:Object(o.jsx)(fe,{directory:U.directory,onUploaded:function(f,D){Q(f),D&&ne&&ne(D,f)}}),renderItem:function(f){return Object(o.jsx)($.b.Item,{actions:f.mime!=="directory"&&!Me?[Object(o.jsx)(O.a,{type:"default",danger:!0,icon:Object(o.jsx)(ie.a,{}),size:"small",onClick:function(){return Ce(f.url)}},"dir")]:[],children:Object(o.jsx)($.b.Item.Meta,{avatar:f.mime==="directory"?Object(o.jsx)(O.a,{type:"primary",icon:Object(o.jsx)(S.a,{}),size:"small",onClick:function(){return Q(f.url)}}):Object(o.jsx)("a",{href:f.url,target:"_blank",rel:"noreferrer",children:Object(o.jsx)(O.a,{type:"default",icon:Object(o.jsx)(ce.a,{}),size:"small"})}),description:Object(o.jsx)(V.a.Fragment,{children:Object(o.jsx)(O.a,{type:"text",size:"small",onClick:function(){return f.mime==="directory"?Q(f.url):ne&&ne(f,U.directory)},children:f.name})})})})}}),Object(o.jsx)(H.a,{pageSizeOptions:[],current:U.current_page,total:U.total,pageSize:U.per_page,onChange:function(f){return Q(U.directory,f)}})]})};R.a=Te},BAh9:function(Oe,R,t){"use strict";t.d(R,"a",function(){return I}),t.d(R,"b",function(){return B}),t.d(R,"e",function(){return le}),t.d(R,"d",function(){return Y}),t.d(R,"c",function(){return P});var L=t("qLMh"),H=t("k1fw"),ee=t("9og8"),$=t("9kvl");function I(C,x){return O.apply(this,arguments)}function O(){return O=Object(ee.a)(Object(L.a)().mark(function C(x,h){return Object(L.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object($.g)("/api/admin/file/list",Object(H.a)({method:"GET",params:x},h||{})));case 1:case"end":return d.stop()}},C)})),O.apply(this,arguments)}function B(C,x){return z.apply(this,arguments)}function z(){return z=Object(ee.a)(Object(L.a)().mark(function C(x,h){return Object(L.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object($.g)("/api/admin/file/find",Object(H.a)({method:"GET",params:x},h||{})));case 1:case"end":return d.stop()}},C)})),z.apply(this,arguments)}function le(C,x,h){return a.apply(this,arguments)}function a(){return a=Object(ee.a)(Object(L.a)().mark(function C(x,h,V){var d;return Object(L.a)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return d=new FormData,d.append("file[]",x),d.append("target",h),S.abrupt("return",Object($.g)("/api/admin/file/upload",Object(H.a)({method:"POST",data:d},V||{})));case 4:case"end":return S.stop()}},C)})),a.apply(this,arguments)}var Y=function(x){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/images/img?path=").concat(x,"&w=").concat(h)};function P(C,x){return te.apply(this,arguments)}function te(){return te=Object(ee.a)(Object(L.a)().mark(function C(x,h){return Object(L.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object($.g)("/api/admin/file/delete",Object(H.a)({method:"DELETE",data:{url:x}},h||{})));case 1:case"end":return d.stop()}},C)})),te.apply(this,arguments)}},"DBJ/":function(Oe,R,t){"use strict";var L=t("k1fw"),H=t("y8nQ"),ee=t("Vl3Y"),$=t("etVw"),I=t("9kvl"),O=t("qFDU"),B=t("nKUr"),z=t.n(B);function le(a){var Y=a.onChange,P=a.onUpload,te=a.url,C=a.name,x=a.extra,h=a.accept,V=a.data,d=a.wrapInForm,ie=d===void 0?!0:d,S=a.title,ce=a.formProps,m=Object(I.j)();return V&&V[C]&&delete V[C],Object(B.jsx)(O.a,{condition:ie,wrap:function(N){return Object(B.jsx)(ee.a,Object(L.a)(Object(L.a)({},ce),{},{children:N}))},children:Object(B.jsx)($.a,{title:S||" ".concat(m.formatMessage({id:"upload_click_here"})),placeholder:m.formatMessage({id:"upload_click_here"}),onChange:function(N){Y&&Y(N),N.file.status==="done"&&P&&P(N.file.response)},label:Object(B.jsx)(I.a,{id:"upload"}),max:2,fieldProps:{data:V,accept:h,name:C,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(te),extra:x})})}R.a=le},YjuE:function(Oe,R,t){"use strict";t.r(R);var L=t("fOrg"),H=t("+KLJ"),ee=t("T2oS"),$=t("W9HT"),I=t("tJVT"),O=t("q1tI"),B=t.n(O),z=t("nhC9"),le=t("Ty5D"),a=t("9kvl"),Y=t("tMyG"),P=t("+up7"),te=t("P2fV"),C=t("NJEC"),x=t("5Dmo"),h=t("3S7+"),V=t("+L6B"),d=t("2/Rp"),ie=t("+BJd"),S=t("mr32"),ce=t("jrin"),m=t("qLMh"),K=t("k1fw"),N=t("miYZ"),W=t("tsqr"),o=t("9og8"),Z=t("xvlK"),fe=t("Qiat"),Te=t("O3gP"),ye=t("lrIw"),ue=t("y8nQ"),re=t("Vl3Y"),je=t("5NDa"),ne=t("5rEg"),F=t("VMEa"),Me=t("rmhi"),be=t("Qurx"),me=t("F/zT"),Ie=t("5qq5"),xe=t("BiO0"),Ee=t("hd5d"),U=t("3fxf"),ve=t("ovOe"),G=t.n(ve),e=t("nKUr"),_e=function(n){var s=n.value,l=n.onChange,i=n.type,p=i===void 0?"file":i,r=Object(O.useState)(!1),c=Object(I.a)(r,2),_=c[0],v=c[1];return Object(e.jsxs)(B.a.Fragment,{children:[Object(e.jsxs)(F.a.Group,{children:[Object(e.jsx)(ne.a,{value:s,readOnly:!0}),Object(e.jsxs)(d.a,{size:"small",type:"primary",onClick:function(){return v(!_)},children:["toggle ",p," browser"]})]}),_&&Object(e.jsx)(U.a,{onFile:function(g,j){return l&&l("".concat(j,"/").concat(g.name))}})]})},Q=function(n){var s=Object(a.j)(),l=n.visible,i=n.onVisibleChange,p=n.onFinish,r=n.id,c=n.initialData,_=n.groups,v=re.a.useForm(),b=Object(I.a)(v,1),g=b[0],j=!r||r===-1,A=Object(O.useState)("text"),u=Object(I.a)(A,2),y=u[0],T=u[1],k=Object(O.useCallback)(function(){return!!(g.getFieldValue("group")==="global"||c)},[g,c]),se=Object(O.useState)(""),q=Object(I.a)(se,2),ae=q[0],X=q[1];Object(O.useEffect)(function(){typeof r=="object"?g.setFieldsValue(r):r&&r!==-1?Object(P.d)(Number(r)).then(function(w){w.success&&(g.setFieldsValue(w.data),T(w.data.type),X(w.data.group))}):(g.resetFields(),T("text"))},[r,g,c]);var ge=Object(O.useCallback)(function(w){w.type&&w.type!==y&&T(w.type)},[y]);return Object(e.jsxs)(Me.a,{form:g,title:s.formatMessage({id:r?"editSetting":"newSetting",defaultMessage:r?"editSetting":"newSetting"}),width:"60vw",visible:!!l,onVisibleChange:i,onFinish:p,onValuesChange:ge,children:[Object(e.jsxs)(F.a.Group,{children:[c?Object(e.jsx)(be.a,{label:Object(e.jsx)(a.a,{id:"group",defaultMessage:"group"}),rules:[{required:!0}],width:"md",name:"group",disabled:k()}):Object(e.jsx)(F.a.Item,{label:Object(e.jsx)(a.a,{id:"group",defaultMessage:"group"}),name:"group",children:Object(e.jsx)(ye.a,{style:{width:"300px"},autoFocus:!0,value:ae,onChange:function(De){return X(De)},filterOption:function(De,Se){var Ae;return(Se==null||(Ae=Se.children)===null||Ae===void 0?void 0:Ae.toString().toLowerCase().indexOf(De.toLowerCase()))!==-1},children:_.map(function(w){return Object(e.jsx)(ye.a.Option,{value:w,children:w},w)})})}),Object(e.jsx)(be.a,{label:Object(e.jsx)(a.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key",disabled:k()})]}),Object(e.jsxs)(F.a.Group,{children:[Object(e.jsx)(me.a,{name:"enumerable",disabled:k(),label:Object(e.jsx)(a.a,{id:"enumerable",defaultMessage:"enumerable"})}),Object(e.jsx)(me.a,{name:"public",disabled:k(),label:Object(e.jsx)(a.a,{id:"public",defaultMessage:"public"})})]}),Object(e.jsx)(F.a.Group,{children:Object(e.jsx)(Ie.a.Group,{disabled:!!(!j||c),name:"type",label:Object(e.jsx)(a.a,{id:"type"}),options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"},{label:"json",value:"json"},{label:"file",value:"file"},{label:"image",value:"image"}]})}),Object(e.jsxs)("div",{children:[y==="text"&&Object(e.jsx)(be.a,{width:"lg",name:"value",label:Object(e.jsx)(a.a,{id:"value"})}),y==="json"&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(xe.a,{width:"lg",name:"value",label:Object(e.jsx)(a.a,{id:"value"}),tooltip:"".concat(s.formatMessage({id:"example_json"}),': {"name":"John", "age":30, "city":["New York","Warsaw"]}')}),Object(e.jsx)(F.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(e.jsx)(G.a,{src:JSON.parse(g.getFieldValue("value"))})}catch(De){return Object(e.jsx)(G.a,{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]}),(y==="file"||y==="image")&&Object(e.jsx)(F.a.Item,{name:"value",label:"value",tooltip:"select file from current repository or upload new one",valuePropName:"value",children:Object(e.jsx)(_e,{type:y})}),y==="markdown"&&Object(e.jsx)(F.a.Item,{name:"value",label:"value",tooltip:"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.",valuePropName:"value",children:Object(e.jsx)(Ee.a,{directory:"settings/wysiwyg"})})]})]})},Ce=Q,he=t("G3dp"),E=t("/MfK"),f=function(){var M=Object(o.a)(Object(m.a)().mark(function n(s,l,i){var p;return Object(m.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return p=W.b.loading(s.formatMessage({id:"loading"})),c.prev=1,c.next=4,i&&i!==-1?Object(P.h)(i,Object(K.a)({},l)):Object(P.b)(Object(K.a)({},l));case 4:return p(),W.b.success(s.formatMessage({id:"success"})),c.abrupt("return",!0);case 9:return c.prev=9,c.t0=c.catch(1),p(),W.b.error(s.formatMessage({id:"error"})),c.abrupt("return",!1);case 14:case"end":return c.stop()}},n,null,[[1,9]])}));return function(s,l,i){return M.apply(this,arguments)}}(),D=function(){var M=Object(o.a)(Object(m.a)().mark(function n(s,l){var i;return Object(m.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i=W.b.loading(s.formatMessage({id:"loading"})),r.prev=1,r.next=4,Object(P.c)(l);case 4:return i(),W.b.success(s.formatMessage({id:"success"})),r.abrupt("return",!0);case 9:return r.prev=9,r.t0=r.catch(1),i(),W.b.error(s.formatMessage({id:"error"})),r.abrupt("return",!1);case 14:case"end":return r.stop()}},n,null,[[1,9]])}));return function(s,l){return M.apply(this,arguments)}}(),J=function(){var n=Object(O.useState)(!1),s=Object(I.a)(n,2),l=s[0],i=s[1],p=Object(O.useState)([]),r=Object(I.a)(p,2),c=r[0],_=r[1],v=Object(O.useRef)(),b=Object(a.j)(),g=Object(a.k)("@@initialState"),j=g.setInitialState;Object(O.useEffect)(function(){Object(P.e)().then(function(u){u.success&&_(u.data.filter(function(y){return y!=="global"}))})},[]);var A=[{title:Object(e.jsx)(a.a,{id:"group",defaultMessage:"group"}),dataIndex:"group",hideInSearch:!1,key:"group",valueType:"select",width:100,valueEnum:c.sort().reduce(function(u,y){return Object(K.a)(Object(K.a)({},u),{},Object(ce.a)({},y,y))},{})},{title:Object(e.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(e.jsx)(a.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(e.jsx)(a.a,{id:"enumerable",defaultMessage:"enumerable"}),dataIndex:"enumerable",hideInForm:!0,hideInSearch:!0,render:function(y,T){return Object(e.jsx)(S.a,{color:T.enumerable?"success":"error",children:Object(e.jsx)(a.a,{id:T.enumerable?"true":"false",defaultMessage:T.enumerable?"true":"false"})})}},{title:Object(e.jsx)(a.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(y,T){return Object(e.jsx)(S.a,{color:T.public?"success":"error",children:Object(e.jsx)(a.a,{id:T.public?"true":"false",defaultMessage:T.public?"true":"false"})})}},{hideInSearch:!0,title:Object(e.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(y,T){return[Object(e.jsx)(h.a,{title:Object(e.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(e.jsx)(d.a,{type:"primary",icon:Object(e.jsx)(he.a,{}),onClick:function(){return i(T.id)}})},"edit"),Object(e.jsx)(C.a,{title:Object(e.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(o.a)(Object(m.a)().mark(function k(){var se;return Object(m.a)().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,D(b,T.id);case 2:se=ae.sent,se&&(i(!1),v.current&&v.current.reload());case 4:case"end":return ae.stop()}},k)})),okText:Object(e.jsx)(a.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(e.jsx)(a.a,{id:"no",defaultMessage:"No"}),children:Object(e.jsx)(h.a,{title:Object(e.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(e.jsx)(d.a,{type:"primary",icon:Object(e.jsx)(E.a,{}),danger:!0})})},"delete")]}}];return Object(e.jsxs)(B.a.Fragment,{children:[Object(e.jsx)(fe.a,{headerTitle:b.formatMessage({id:"menu.settings"}),actionRef:v,rowKey:"id",search:{},toolBarRender:function(){return[Object(e.jsxs)(d.a,{type:"primary",onClick:function(){i(-1)},children:[Object(e.jsx)(Z.a,{})," ",Object(e.jsx)(a.a,{id:"pages.searchTable.new"})]},"primary")]},request:function(y){var T=y.pageSize,k=y.current,se=y.group;return Object(P.f)({pageSize:T,current:k,group:se}).then(function(q){return q.success?{data:q.data.filter(function(ae){return ae.group!=="global"}),total:q.meta.total,success:!0}:[]})},columns:A}),Object(e.jsx)(Ce,{groups:c,id:l,visible:Number.isInteger(l),onVisibleChange:function(y){return!y&&i(!1)},onFinish:function(){var u=Object(o.a)(Object(m.a)().mark(function y(T){var k,se,q;return Object(m.a)().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return k=T,X.next=3,f(b,k,Number(l));case 3:if(se=X.sent,!se){X.next=12;break}if(i(!1),v.current&&v.current.reload(),k.group!=="global"){X.next=12;break}return X.next=10,Object(P.f)({current:1,pageSize:100,group:"global"});case 10:q=X.sent,j(function(ge){return Object(K.a)(Object(K.a)({},ge),{},{config:q.success?q.data:ge==null?void 0:ge.config})});case 12:case"end":return X.stop()}},y)}));return function(y){return u.apply(this,arguments)}}()})]})},oe=J,Pe=t("tU7J"),Ue=t("wFql"),Re=t("Fghh"),Le=Ue.a.Text,de;(function(M){M.Array="array",M.String="string"})(de||(de={}));var Be=function(n,s){return s===de.Array?n&&Array.isArray(n)?JSON.stringify(n):"[]":n},Ke=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",s=arguments.length>1?arguments[1]:void 0;if(s===de.Array){var l=JSON.parse(n);return l&&Array.isArray(l)?l:[]}return n},We=function(n){var s=Object(Re.j)(),l=n.visible,i=n.onVisibleChange,p=n.onFinish,r=n.value,c=re.a.useForm(),_=Object(I.a)(c,1),v=_[0],b=Object(O.useMemo)(function(){return(r.rules||[]).includes(de.Array)?de.Array:de.String},[r.rules]);return Object(O.useEffect)(function(){v.setFieldsValue(Object(K.a)(Object(K.a)({},r),{},{value:Be(r.value,b)}))},[b,r,v]),Object(e.jsxs)(Me.a,{form:v,title:r.full_key,width:"60vw",visible:l,onVisibleChange:i,onFinish:Object(o.a)(Object(m.a)().mark(function g(){var j;return Object(m.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Object(P.g)({key:r.full_key,value:Ke(v.getFieldsValue().value,b)});case 2:if(j=u.sent,!j.success){u.next=6;break}return p(j.success===!0),u.abrupt("return",j.success);case 6:return u.abrupt("return");case 7:case"end":return u.stop()}},g)})),children:[Object(e.jsxs)(F.a.Group,{children:[Object(e.jsx)(me.a,{disabled:!0,name:"public",label:Object(e.jsx)(a.a,{id:"public",defaultMessage:"public"})}),Object(e.jsx)(me.a,{disabled:!0,name:"readonly",label:Object(e.jsx)(a.a,{id:"readonly",defaultMessage:"readonly"})}),Object(e.jsx)(F.a.Item,{shouldUpdate:!0,label:Object(e.jsx)(a.a,{id:"rules",defaultMessage:"rules"}),children:function(){return Object(e.jsx)(Le,{code:!0,children:JSON.stringify(v.getFieldValue("rules"))})}})]}),b===de.Array?Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(xe.a,{width:"lg",name:"value",label:Object(e.jsx)(a.a,{id:"value"}),tooltip:"".concat(s.formatMessage({id:"example_json"}),': ["first_field_name", "second_field_name"]')}),Object(e.jsx)(F.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(e.jsx)(G.a,{src:JSON.parse(v.getFieldValue("value"))})}catch(j){return Object(e.jsx)(G.a,{src:JSON.parse('{ "error": "cannot parse this array" }')})}}})]}):Object(e.jsx)(be.a,{width:"lg",name:"value",label:Object(e.jsx)(a.a,{id:"value"})})]})},Ve=We,we=[{title:Object(e.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(e.jsx)(a.a,{id:"readonly",defaultMessage:"readonly"}),dataIndex:"readonly",hideInForm:!0,hideInSearch:!0,render:function(n,s){return Object(e.jsx)(S.a,{color:s.readonly?"success":"error",children:Object(e.jsx)(a.a,{id:s.readonly?"true":"false",defaultMessage:s.readonly?"true":"false"})})}},{title:Object(e.jsx)(a.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(n,s){return Object(e.jsx)(S.a,{color:s.public?"success":"error",children:Object(e.jsx)(a.a,{id:s.public?"true":"false",defaultMessage:s.public?"true":"false"})})}},{title:Object(e.jsx)(a.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0}],Ne=function M(n,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return!n||typeof n!="object"?!1:(Object.keys(n).forEach(function(i){var p=n[i];i===s?l.push(n):typeof p=="object"&&M(p,s,l)}),l)},$e=function(n){var s=n.packageName,l=n.values,i=n.onValueUpdated,p=Object(a.j)(),r=Object(O.useState)(),c=Object(I.a)(r,2),_=c[0],v=c[1],b=Object(O.useMemo)(function(){var g=l[s];return Ne(g,"rules")},[l,s]);return Object(e.jsxs)(B.a.Fragment,{children:[Object(e.jsx)(fe.a,{headerTitle:p.formatMessage({id:"menu.settings"}),rowKey:"key",search:{},dataSource:b,columns:[].concat(we,[{hideInSearch:!0,title:Object(e.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(j,A){return[Object(e.jsx)(h.a,{title:Object(e.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(e.jsx)(d.a,{type:"primary",icon:Object(e.jsx)(he.a,{}),onClick:function(){return v(A)}})},"edit")]}}])}),_&&Object(e.jsx)(Ve,{value:_,visible:_!==void 0,onVisibleChange:function(j){return j===!1&&v(void 0)},onFinish:Object(o.a)(Object(m.a)().mark(function g(){return Object(m.a)().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:i();case 1:case"end":return A.stop()}},g)}))})]})},ze=$e,Fe=t("oBTY"),Ge=function(){var M=Object(o.a)(Object(m.a)().mark(function n(s,l,i){var p;return Object(m.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return p=W.b.loading(s.formatMessage({id:"loading"})),c.prev=1,c.next=4,i&&i!==-1?Object(P.h)(i,Object(K.a)({},l)):Object(P.b)(Object(K.a)({},l));case 4:return p(),W.b.success(s.formatMessage({id:"success"})),c.abrupt("return",!0);case 9:return c.prev=9,c.t0=c.catch(1),p(),W.b.error(s.formatMessage({id:"error"})),c.abrupt("return",!1);case 14:case"end":return c.stop()}},n,null,[[1,9]])}));return function(s,l,i){return M.apply(this,arguments)}}(),Je=function(){var M=Object(o.a)(Object(m.a)().mark(function n(s,l){var i;return Object(m.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i=W.b.loading(s.formatMessage({id:"loading"})),r.prev=1,r.next=4,Object(P.c)(l);case 4:return i(),W.b.success(s.formatMessage({id:"success"})),r.abrupt("return",!0);case 9:return r.prev=9,r.t0=r.catch(1),i(),W.b.error(s.formatMessage({id:"error"})),r.abrupt("return",!1);case 14:case"end":return r.stop()}},n,null,[[1,9]])}));return function(s,l){return M.apply(this,arguments)}}(),pe={logo:{id:-1,key:"logo",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"image",data:"EscolaLMS"},frontURL:{id:0,key:"frontURL",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"}},ke=function(){var n=Object(O.useState)(!1),s=Object(I.a)(n,2),l=s[0],i=s[1],p=Object(O.useRef)(),r=Object(a.j)(),c=[{title:Object(e.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(e.jsx)(a.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(e.jsx)(a.a,{id:"enumerable",defaultMessage:"enumerable"}),dataIndex:"enumerable",hideInForm:!0,hideInSearch:!0,render:function(v,b){return Object(e.jsx)(S.a,{color:b.enumerable?"success":"error",children:Object(e.jsx)(a.a,{id:b.enumerable?"true":"false",defaultMessage:b.enumerable?"true":"false"})})}},{title:Object(e.jsx)(a.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(v,b){return Object(e.jsx)(S.a,{color:b.public?"success":"error",children:Object(e.jsx)(a.a,{id:b.public?"true":"false",defaultMessage:b.public?"true":"false"})})}},{hideInSearch:!0,title:Object(e.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(v,b){return[b.id>0?Object(e.jsx)(h.a,{title:Object(e.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(e.jsx)(d.a,{type:"primary",icon:Object(e.jsx)(he.a,{}),onClick:function(){return i(b.id)}})},"edit"):Object(e.jsx)(h.a,{title:Object(e.jsx)(a.a,{id:"create",defaultMessage:"create"}),children:Object(e.jsx)(d.a,{type:"primary",icon:Object(e.jsx)(Z.a,{}),onClick:function(){i(pe[b.key]||-1)}})},"create"),Object(e.jsx)(C.a,{title:Object(e.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(o.a)(Object(m.a)().mark(function g(){var j;return Object(m.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Je(r,b.id);case 2:j=u.sent,j&&(i(!1),p.current&&p.current.reload());case 4:case"end":return u.stop()}},g)})),okText:Object(e.jsx)(a.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(e.jsx)(a.a,{id:"no",defaultMessage:"No"}),children:b.id>0?Object(e.jsx)(h.a,{title:Object(e.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(e.jsx)(d.a,{type:"primary",icon:Object(e.jsx)(E.a,{}),danger:!0})}):null},"delete")]}}];return Object(e.jsxs)(B.a.Fragment,{children:[Object(e.jsx)(fe.a,{headerTitle:r.formatMessage({id:"menu.settings"}),actionRef:p,rowKey:"id",request:function(v){var b=v.pageSize,g=v.current;return Object(P.f)({pageSize:b,current:g,group:"global"}).then(function(j){if(j.success){var A=[].concat(Object(Fe.a)(Object.keys(pe).map(function(u){return j.data.find(function(y){return y.key===u})||pe[u]})),Object(Fe.a)(j.data.filter(function(u){return!Object.keys(pe).includes(u.key)})));return{data:A,total:A.length,success:!0}}return[]})},columns:c}),Object(e.jsx)(Ce,{groups:[],id:l,visible:l,initialData:pe,onVisibleChange:function(v){return!v&&i(!1)},onFinish:function(){var _=Object(o.a)(Object(m.a)().mark(function v(b){var g,j;return Object(m.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return g=b,u.next=3,Ge(r,g,Number(l));case 3:j=u.sent,j&&(i(!1),p.current&&p.current.reload());case 5:case"end":return u.stop()}},v)}));return function(v){return _.apply(this,arguments)}}()})]})},Ye=ke,Qe=t("I5X1"),Xe=function(n){return n.replaceAll("escolalms","").split("_").join("")},He=R.default=function(){var M=Object(le.l)(),n=Object(a.j)(),s=M.tab,l=s===void 0?"user_settings":s,i=Object(O.useState)(),p=Object(I.a)(i,2),r=p[0],c=p[1],_=Object(O.useCallback)(function(){Object(P.a)().then(function(j){j.success&&c(j.data)})},[]),v=Object(Qe.a)("@@initialState"),b=v.initialState,g=Object(O.useCallback)(function(){var j;return(b==null||(j=b.config)===null||j===void 0?void 0:j.length)!==0},[b]);return Object(O.useEffect)(function(){_()},[]),r?Object(e.jsxs)(Y.a,{title:Object(e.jsx)(a.a,{id:"settings"}),header:{breadcrumb:{routes:[{path:"settings",breadcrumbName:n.formatMessage({id:"menu.Configuration.settings"})},{path:String(l),breadcrumbName:String(l)}]}},children:[!g()&&Object(e.jsx)(H.a,{message:Object(e.jsx)(a.a,{id:"global_settings_alert_title",defaultMessage:"Add global settings"}),description:Object(e.jsx)(a.a,{id:"global_settings_alert_description",defaultMessage:"Global settings are used to configure the entire LMS. You can add global settings by clicking the button below."}),type:"warning",showIcon:!0,style:{marginBottom:"20px"}}),Object(e.jsxs)(z.a,{tabs:{type:"card",activeKey:l,onChange:function(A){return a.e.push("/configuration/settings/".concat(A))}},children:[Object(e.jsx)(z.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"user.settings"}),children:Object(e.jsx)(oe,{})},"user_settings"),Object(e.jsx)(z.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"global_settings"}),children:Object(e.jsx)(Ye,{})},"global_settings"),Object.keys(r).map(function(j){return Object(e.jsxs)(z.a.TabPane,{tab:Object(e.jsxs)("span",{children:[Object(e.jsx)(a.a,{id:"package"})," ",Xe(j)]}),children:[Object(e.jsx)(ze,{values:r,packageName:j,onValueUpdated:function(){return _()}}),j]},j)})]})]}):Object(e.jsx)($.a,{})}},hd5d:function(Oe,R,t){"use strict";var L=t("qLMh"),H=t("9og8"),ee=t("q1tI"),$=t.n(ee),I=t("3Ef1"),O=t.n(I),B=t("BAh9"),z=t("vtG9"),le=t.n(z),a=t("9kvl"),Y=t("nKUr"),P=t.n(Y),te=function(x){var h=x.value,V=x.onChange,d=x.directory,ie=d===void 0?"/wysiwyg":d,S=Object(a.j)();return Object(Y.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(Y.jsx)(O.a,{uploadImage:function(){var ce=Object(H.a)(Object(L.a)().mark(function m(K){var N,W;return Object(L.a)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,Object(B.e)(K,ie);case 2:if(N=Z.sent,!N.success){Z.next=6;break}return W=N.data[0].name.includes("/")?N.data[0].name:"".concat(ie).concat(N.data[0].name),Z.abrupt("return",Object(B.d)(W,1e3));case 6:throw new Error("Error while uploading");case 7:case"end":return Z.stop()}},m)}));return function(m){return ce.apply(this,arguments)}}(),defaultValue:h||"",onChange:function(m){return V&&V(m())},placeholder:S.formatMessage({id:"wysiwyg_placeholder"})})})};R.a=te},lLVY:function(Oe,R,t){},vtG9:function(Oe,R,t){}}]);
