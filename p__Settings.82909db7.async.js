(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"+up7":function(ae,v,e){"use strict";e.d(v,"f",function(){return D}),e.d(v,"d",function(){return a}),e.d(v,"b",function(){return b}),e.d(v,"h",function(){return o}),e.d(v,"c",function(){return h}),e.d(v,"e",function(){return s}),e.d(v,"a",function(){return p}),e.d(v,"g",function(){return K});var F=e("k1fw"),y=e("9og8"),U=e("WmNS"),r=e.n(U),_=e("9kvl");function D(u,l){return M.apply(this,arguments)}function M(){return M=Object(y.a)(r.a.mark(function u(l,x){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(_.f)("/api/admin/settings",Object(F.a)({method:"GET",useCache:!1,params:Object(F.a)(Object(F.a)({},l),{},{per_page:l.pageSize,page:l.current})},x||{})));case 1:case"end":return n.stop()}},u)})),M.apply(this,arguments)}function a(u,l){return C.apply(this,arguments)}function C(){return C=Object(y.a)(r.a.mark(function u(l,x){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(_.f)("/api/admin/settings/".concat(l),Object(F.a)({method:"GET",useCache:!1},x||{})));case 1:case"end":return n.stop()}},u)})),C.apply(this,arguments)}function b(u,l){return R.apply(this,arguments)}function R(){return R=Object(y.a)(r.a.mark(function u(l,x){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(_.f)("/api/admin/settings",Object(F.a)({method:"POST",headers:{"Content-Type":"application/json"},data:l},x||{})));case 1:case"end":return n.stop()}},u)})),R.apply(this,arguments)}function o(u,l,x){return L.apply(this,arguments)}function L(){return L=Object(y.a)(r.a.mark(function u(l,x,d){return r.a.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.abrupt("return",Object(_.f)("/api/admin/settings/".concat(l),Object(F.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:x},d||{})));case 1:case"end":return ee.stop()}},u)})),L.apply(this,arguments)}function h(u,l){return O.apply(this,arguments)}function O(){return O=Object(y.a)(r.a.mark(function u(l,x){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(_.f)("/api/admin/settings/".concat(l),Object(F.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},x||{})));case 1:case"end":return n.stop()}},u)})),O.apply(this,arguments)}function s(u){return I.apply(this,arguments)}function I(){return I=Object(y.a)(r.a.mark(function u(l){return r.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(_.f)("/api/admin/settings/groups",Object(F.a)({method:"GET",useCache:!1},l||{})));case 1:case"end":return d.stop()}},u)})),I.apply(this,arguments)}function p(u){return c.apply(this,arguments)}function c(){return c=Object(y.a)(r.a.mark(function u(l){return r.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(_.f)("/api/admin/config",Object(F.a)({method:"GET",useCache:!1},l||{})));case 1:case"end":return d.stop()}},u)})),c.apply(this,arguments)}function K(u,l){return V.apply(this,arguments)}function V(){return V=Object(y.a)(r.a.mark(function u(l,x){var d,n;return r.a.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return d=l.key,n=l.value,N.abrupt("return",Object(_.f)("/api/admin/config",Object(F.a)({method:"POST",data:{config:[{key:d,value:n}]}},x||{})));case 2:case"end":return N.stop()}},u)})),V.apply(this,arguments)}},"3fxf":function(ae,v,e){"use strict";var F=e("DjyN"),y=e("NUBc"),U=e("Mwp2"),r=e("VXEj"),_=e("+L6B"),D=e("2/Rp"),M=e("5NDa"),a=e("5rEg"),C=e("oBTY"),b=e("k1fw"),R=e("tJVT"),o=e("DYRE"),L=e("zeV3"),h=e("tU7J"),O=e("wFql"),s=e("q1tI"),I=e.n(s),p=e("BAh9"),c=e("/MfK"),K=e("mAF4"),V=e("dF/Y"),u=e("9kvl"),l=e("DBJ/"),x=e("lLVY"),d=e.n(x),n=e("nKUr"),ee=e.n(n),N=function(le){var w=le.directory,ne=le.onUploaded;return Object(n.jsxs)(L.b,{align:"start",children:[Object(n.jsxs)(O.a.Text,{children:[Object(n.jsx)(u.a,{id:"pages.files.filesBrowser"}),Object(n.jsx)(O.a.Text,{code:!0,children:w})]}),Object(n.jsx)(l.a,{url:"/api/admin/file/upload",name:"file[]",data:{target:w},onChange:function(ie){return ie.file.status==="done"&&ne(w,ie.file)}})]})},oe=function(le){var w=le.defaultDirectory,ne=w===void 0?"/":w,Y=le.onFile,ie=Object(u.i)(),be=Object(s.useState)({loading:!1,name:"",directory:ne,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),me=Object(R.a)(be,2),G=me[0],je=me[1],se=Object(s.useRef)(),X=Object(s.useCallback)(function(S){je(function(f){return Object(b.a)(Object(b.a)({},f),{},{loading:S})})},[]),t=Object(s.useCallback)(function(S,f){je(function(Q){return Object(b.a)(Object(b.a)(Object(b.a)({},Q),S.data),{},{data:[{url:f.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(C.a)(S.data.data.map(function(q){return Object(b.a)(Object(b.a)({},q),{},{url:q.mime==="directory"?"".concat(f,"/").concat(q.name):q.url})}))).filter(function(q){return f==="/"?q.name!=="..":!0}),directory:f,loading:!1})})},[X]),te=Object(s.useCallback)(function(S){var f,Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,q=function(){return se.current&&se.current.abort()};return q(),se.current=new AbortController,X(!0),Object(p.a)({directory:S,page:Q},{signal:(f=se.current)===null||f===void 0?void 0:f.signal}).then(function(ce){ce.success&&t(ce,S)}).catch(function(){return X(!1)}),function(){q()}},[X]);Object(s.useEffect)(function(){return te(ne)},[ne,te]);var he=Object(s.useCallback)(function(S){X(!0),Object(p.c)(S).then(function(){te(G.directory)}).catch(function(){X(!1)})},[te,X,G.directory]),pe=Object(s.useCallback)(function(S,f){var Q,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,ce=function(){return se.current&&se.current.abort()};return ce(),se.current=new AbortController,X(!0),Object(p.b)({directory:S,name:f,page:q},{signal:(Q=se.current)===null||Q===void 0?void 0:Q.signal}).then(function(Oe){Oe.success&&t(Oe,S)}).catch(function(){return X(!1)}),function(){ce()}},[X]);return Object(n.jsxs)("div",{className:"file-browser",children:[Object(n.jsxs)("div",{className:"file-browser__header",children:[Object(n.jsx)(a.a,{placeholder:ie.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(f){return je(function(Q){return Object(b.a)(Object(b.a)({},Q),{},{name:f.target.value})})},value:G.name}),Object(n.jsxs)("div",{children:[Object(n.jsx)(D.a,{className:"file-browser__button",onClick:function(){return te(G.directory)},children:Object(n.jsx)(u.a,{id:"reset"})}),Object(n.jsx)(D.a,{className:"file-browser__button",type:"primary",onClick:function(){return pe(G.directory,G.name)},children:Object(n.jsx)(u.a,{id:"query"})})]})]}),Object(n.jsx)(r.b,{loading:G.loading,size:"small",itemLayout:"horizontal",dataSource:G.data,header:Object(n.jsx)(N,{directory:G.directory,onUploaded:function(f,Q){return te(f)&&Y&&Y(Q,f)}}),footer:Object(n.jsx)(N,{directory:G.directory,onUploaded:function(f){return te(f)&&Y&&Y(name,f)}}),renderItem:function(f){return Object(n.jsx)(r.b.Item,{actions:f.mime!=="directory"?[Object(n.jsx)(D.a,{type:"default",danger:!0,icon:Object(n.jsx)(c.a,{}),size:"small",onClick:function(){return he(f.url)}})]:[],children:Object(n.jsx)(r.b.Item.Meta,{avatar:f.mime==="directory"?Object(n.jsx)(D.a,{type:"primary",icon:Object(n.jsx)(K.a,{}),size:"small",onClick:function(){return te(f.url)}}):Object(n.jsx)("a",{href:f.url,target:"_blank",rel:"noreferrer",children:Object(n.jsx)(D.a,{type:"default",icon:Object(n.jsx)(V.a,{}),size:"small"})}),description:Object(n.jsx)(I.a.Fragment,{children:Object(n.jsx)(D.a,{type:"text",size:"small",onClick:function(){return f.mime==="directory"?te(f.url):Y&&Y(f,G.directory)},children:f.name})})})})}}),Object(n.jsx)(y.a,{pageSizeOptions:[],current:G.current_page,total:G.total,pageSize:G.per_page,onChange:function(f){return te(G.directory,f)}})]})};v.a=oe},"5qq5":function(ae,v,e){"use strict";var F=e("7Kak"),y=e("9yH6"),U=e("wx14"),r=e("VTBJ"),_=e("Ff2n"),D=e("q1tI"),M=e.n(D),a=e("adzw"),C=e("uX+g"),b=e("WFLz"),R=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],o=M.a.forwardRef(function(s,I){var p=s.fieldProps,c=s.options,K=s.radioType,V=s.layout,u=s.proFieldProps,l=s.valueEnum,x=Object(_.a)(s,R);return M.a.createElement(a.a,Object(U.a)({mode:"edit",valueType:K==="button"?"radioButton":"radio",ref:I,valueEnum:Object(C.a)(l,void 0)},x,{fieldProps:Object(r.a)({options:c,layout:V},p),proFieldProps:u,filedConfig:{customLightMode:!0}}))}),L=M.a.forwardRef(function(s,I){var p=s.fieldProps,c=s.children;return M.a.createElement(y.a,Object(U.a)({},p,{ref:I}),c)}),h=Object(b.a)(L,{valuePropName:"checked",ignoreWidth:!0}),O=h;O.Group=o,O.Button=y.a.Button,O.displayName="ProFormComponent",v.a=O},BAh9:function(ae,v,e){"use strict";e.d(v,"a",function(){return D}),e.d(v,"b",function(){return a}),e.d(v,"e",function(){return b}),e.d(v,"d",function(){return o}),e.d(v,"c",function(){return L});var F=e("k1fw"),y=e("9og8"),U=e("WmNS"),r=e.n(U),_=e("9kvl");function D(O,s){return M.apply(this,arguments)}function M(){return M=Object(y.a)(r.a.mark(function O(s,I){return r.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(_.f)("/api/admin/file/list",Object(F.a)({method:"GET",params:s},I||{})));case 1:case"end":return c.stop()}},O)})),M.apply(this,arguments)}function a(O,s){return C.apply(this,arguments)}function C(){return C=Object(y.a)(r.a.mark(function O(s,I){return r.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(_.f)("/api/admin/file/find",Object(F.a)({method:"GET",params:s},I||{})));case 1:case"end":return c.stop()}},O)})),C.apply(this,arguments)}function b(O,s,I){return R.apply(this,arguments)}function R(){return R=Object(y.a)(r.a.mark(function O(s,I,p){var c;return r.a.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return c=new FormData,c.append("file[]",s),c.append("target",I),V.abrupt("return",Object(_.f)("/api/admin/file/upload",Object(F.a)({method:"POST",data:c},p||{})));case 4:case"end":return V.stop()}},O)})),R.apply(this,arguments)}var o=function(s){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(s,"&w=").concat(I)};function L(O,s){return h.apply(this,arguments)}function h(){return h=Object(y.a)(r.a.mark(function O(s,I){return r.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(_.f)("/api/admin/file/delete",Object(F.a)({method:"DELETE",data:{url:s}},I||{})));case 1:case"end":return c.stop()}},O)})),h.apply(this,arguments)}},BiO0:function(ae,v,e){"use strict";var F=e("wx14"),y=e("Ff2n"),U=e("q1tI"),r=e.n(U),_=e("adzw"),D=["fieldProps","proFieldProps"],M=function(C,b){var R=C.fieldProps,o=C.proFieldProps,L=Object(y.a)(C,D);return r.a.createElement(_.a,Object(F.a)({ref:b,mode:"edit",valueType:"textarea",fieldProps:R,proFieldProps:o},L))};v.a=r.a.forwardRef(M)},"DBJ/":function(ae,v,e){"use strict";var F=e("y8nQ"),y=e("Vl3Y"),U=e("etVw"),r=e("q1tI"),_=e.n(r),D=e("9kvl"),M=function(R){var o=R.condition,L=R.children,h=R.wrap;return o?_.a.cloneElement(h(L)):L},a=e("nKUr"),C=function(o){var L=o.onChange,h=o.url,O=o.name,s=o.extra,I=o.accept,p=o.data,c=o.wrapInForm,K=c===void 0?!0:c,V=Object(D.i)();return p&&p[O]&&delete p[O],Object(a.jsx)(M,{condition:K,wrap:function(l){return Object(a.jsx)(y.a,{children:l})},children:Object(a.jsx)(U.a,{title:Object(a.jsx)(D.a,{id:"upload_click_here"}),placeholder:V.formatMessage({id:"upload_click_here"}),onChange:L,label:Object(a.jsx)(D.a,{id:"upload"}),max:2,fieldProps:{data:p,accept:I,name:O,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(h),extra:s})})},b=v.a=C},"F/zT":function(ae,v,e){"use strict";var F=e("wx14"),y=e("VTBJ"),U=e("Ff2n"),r=e("q1tI"),_=e.n(r),D=e("adzw"),M=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],a=_.a.forwardRef(function(C,b){var R=C.fieldProps,o=C.unCheckedChildren,L=C.checkedChildren,h=C.proFieldProps,O=Object(U.a)(C,M);return _.a.createElement(D.a,Object(F.a)({valueType:"switch",mode:"edit",fieldProps:Object(y.a)({unCheckedChildren:o,checkedChildren:L},R),ref:b,valuePropName:"checked",proFieldProps:h,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},O))});v.a=a},YjuE:function(ae,v,e){"use strict";e.r(v);var F=e("T2oS"),y=e("W9HT"),U=e("tJVT"),r=e("q1tI"),_=e.n(r),D=e("nhC9"),M=e("Ty5D"),a=e("9kvl"),C=e("tMyG"),b=e("+up7"),R=e("P2fV"),o=e("NJEC"),L=e("5Dmo"),h=e("3S7+"),O=e("+L6B"),s=e("2/Rp"),I=e("+BJd"),p=e("mr32"),c=e("jrin"),K=e("k1fw"),V=e("miYZ"),u=e("tsqr"),l=e("9og8"),x=e("WmNS"),d=e.n(x),n=e("xvlK"),ee=e("Qiat"),N=e("y8nQ"),oe=e("Vl3Y"),ve=e("5NDa"),le=e("5rEg"),w=e("VMEa"),ne=e("rmhi"),Y=e("Qurx"),ie=e("F/zT"),be=e("5qq5"),me=e("BiO0"),G=e("hd5d"),je=e("3fxf"),se=e("ovOe"),X=e.n(se),t=e("nKUr"),te=function(i){var m=i.value,g=i.onChange,T=i.type,z=T===void 0?"file":T,j=Object(r.useState)(!1),W=Object(U.a)(j,2),H=W[0],E=W[1];return Object(t.jsxs)(_.a.Fragment,{children:[Object(t.jsxs)(w.b.Group,{children:[Object(t.jsx)(le.a,{value:m,readOnly:!0}),Object(t.jsxs)(s.a,{size:"small",type:"primary",onClick:function(){return E(!H)},children:["toggle ",z," browser"]})]}),H&&Object(t.jsx)(je.a,{onFile:function(Z,B){return g&&g("".concat(B,"/").concat(Z.name))}})]})},he=function(i){var m=Object(a.i)(),g=i.visible,T=i.onVisibleChange,z=i.onFinish,j=i.id,W=oe.a.useForm(),H=Object(U.a)(W,1),E=H[0],J=!j||j===-1,Z=Object(r.useState)("text"),B=Object(U.a)(Z,2),P=B[0],A=B[1];Object(r.useEffect)(function(){j&&j!==-1?Object(b.d)(j).then(function(k){k.success&&(E.setFieldsValue(k.data),A(k.data.type))}):(E.resetFields(),A("text"))},[j,E]);var ue=Object(r.useCallback)(function(k){k.type&&k.type!==P&&A(k.type)},[P]);return Object(t.jsxs)(ne.a,{form:E,title:m.formatMessage({id:j?"editSetting":"newSetting",defaultMessage:j?"editSetting":"newSetting"}),width:"60vw",visible:g,onVisibleChange:T,onFinish:z,onValuesChange:ue,children:[Object(t.jsxs)(w.b.Group,{children:[Object(t.jsx)(Y.a,{label:Object(t.jsx)(a.a,{id:"group",defaultMessage:"group"}),rules:[{required:!0}],width:"md",name:"group"})," ",Object(t.jsx)(Y.a,{label:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"})]}),Object(t.jsxs)(w.b.Group,{children:[Object(t.jsx)(ie.a,{name:"enumerable",label:Object(t.jsx)(a.a,{id:"enumerable",defaultMessage:"enumerable"})}),Object(t.jsx)(ie.a,{name:"public",label:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"})})]}),Object(t.jsx)(w.b.Group,{children:Object(t.jsx)(be.a.Group,{disabled:!J,name:"type",label:Object(t.jsx)(a.a,{id:"type"}),options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"},{label:"json",value:"json"},{label:"file",value:"file"},{label:"image",value:"image"}]})}),Object(t.jsxs)("div",{children:[P==="text"&&Object(t.jsx)(Y.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"})}),P==="json"&&Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(me.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"}),tooltip:"".concat(m.formatMessage({id:"example_json"}),': {"name":"John", "age":30, "city":["New York","Warsaw"]}')}),Object(t.jsx)(w.b.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(X.a,{src:JSON.parse(E.getFieldValue("value"))})}catch(re){return Object(t.jsx)(X.a,{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]}),(P==="file"||P==="image")&&Object(t.jsx)(w.b.Item,{name:"value",label:"value",tooltip:"select file from current repository or upload new one",valuePropName:"value",children:Object(t.jsx)(te,{type:P})}),P==="markdown"&&Object(t.jsx)(w.b.Item,{name:"value",label:"value",tooltip:"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.",valuePropName:"value",children:Object(t.jsx)(G.a,{directory:"settings/wysiwyg"})})]})]})},pe=he,S=e("G3dp"),f=e("/MfK"),Q=function(){var $=Object(l.a)(d.a.mark(function i(m,g,T){var z;return d.a.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return z=u.default.loading(m.formatMessage({id:"loading"})),W.prev=1,W.next=4,T&&T!==-1?Object(b.h)(T,Object(K.a)({},g)):Object(b.b)(Object(K.a)({},g));case 4:return z(),u.default.success(m.formatMessage({id:"success"})),W.abrupt("return",!0);case 9:return W.prev=9,W.t0=W.catch(1),z(),u.default.error(m.formatMessage({id:"error"})),W.abrupt("return",!1);case 14:case"end":return W.stop()}},i,null,[[1,9]])}));return function(m,g,T){return $.apply(this,arguments)}}(),q=function(){var $=Object(l.a)(d.a.mark(function i(m,g){var T;return d.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return T=u.default.loading(m.formatMessage({id:"loading"})),j.prev=1,j.next=4,Object(b.c)(g);case 4:return T(),u.default.success(m.formatMessage({id:"success"})),j.abrupt("return",!0);case 9:return j.prev=9,j.t0=j.catch(1),T(),u.default.error(m.formatMessage({id:"error"})),j.abrupt("return",!1);case 14:case"end":return j.stop()}},i,null,[[1,9]])}));return function(m,g){return $.apply(this,arguments)}}(),ce=function(){var i=Object(r.useState)(!1),m=Object(U.a)(i,2),g=m[0],T=m[1],z=Object(r.useState)([]),j=Object(U.a)(z,2),W=j[0],H=j[1],E=Object(r.useRef)(),J=Object(a.i)();Object(r.useEffect)(function(){Object(b.e)().then(function(B){B.success&&H(B.data)})},[]);var Z=[{title:Object(t.jsx)(a.a,{id:"group",defaultMessage:"group"}),dataIndex:"group",hideInSearch:!1,key:"group",valueType:"select",width:100,valueEnum:W.sort().reduce(function(B,P){return Object(K.a)(Object(K.a)({},B),{},Object(c.a)({},P,P))},{})},{title:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"enumerable",defaultMessage:"enumerable"}),dataIndex:"enumerable",hideInForm:!0,hideInSearch:!0,render:function(P,A){return Object(t.jsx)(p.a,{color:A.enumerable?"success":"error",children:Object(t.jsx)(a.a,{id:A.enumerable?"true":"false",defaultMessage:A.enumerable?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(P,A){return Object(t.jsx)(p.a,{color:A.public?"success":"error",children:Object(t.jsx)(a.a,{id:A.public?"true":"false",defaultMessage:A.public?"true":"false"})})}},{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(P,A){return[Object(t.jsx)(h.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(s.a,{type:"primary",icon:Object(t.jsx)(S.a,{}),onClick:function(){return T(A.id)}})},"edit"),Object(t.jsx)(o.a,{title:Object(t.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(l.a)(d.a.mark(function ue(){var k;return d.a.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.next=2,q(J,A.id);case 2:k=fe.sent,k&&(T(!1),E.current&&E.current.reload());case 4:case"end":return fe.stop()}},ue)})),okText:Object(t.jsx)(a.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(a.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(h.a,{title:Object(t.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(s.a,{type:"primary",icon:Object(t.jsx)(f.a,{}),danger:!0})})},"delete")]}}];return Object(t.jsxs)(_.a.Fragment,{children:[Object(t.jsx)(ee.a,{headerTitle:J.formatMessage({id:"menu.settings"}),actionRef:E,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[Object(t.jsxs)(s.a,{type:"primary",onClick:function(){T(-1)},children:[Object(t.jsx)(n.a,{})," ",Object(t.jsx)(a.a,{id:"pages.searchTable.new"})]},"primary")]},request:function(P){var A=P.pageSize,ue=P.current,k=P.group;return Object(b.f)({pageSize:A,current:ue,group:k}).then(function(re){return re.success?{data:re.data,total:re.meta.total,success:!0}:[]})},columns:Z}),Object(t.jsx)(pe,{groups:W,id:g,visible:Number.isInteger(g),onVisibleChange:function(P){return P===!1&&T(!1)},onFinish:function(){var B=Object(l.a)(d.a.mark(function P(A){var ue;return d.a.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,Q(J,A,Number(g));case 2:ue=re.sent,ue&&(T(!1),E.current&&E.current.reload());case 4:case"end":return re.stop()}},P)}));return function(P){return B.apply(this,arguments)}}()})]})},Oe=ce,Be=e("tU7J"),ge=e("wFql"),Ee=e("Fghh"),_e=ge.a.Text,de;(function($){$.Array="array",$.String="string"})(de||(de={}));var Pe=function(i,m){return m===de.Array?i&&Array.isArray(i)?JSON.stringify(i):"[]":i},ye=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",m=arguments.length>1?arguments[1]:void 0;if(m===de.Array){var g=JSON.parse(i);return g&&Array.isArray(g)?g:[]}return i},Me=function(i){var m=Object(Ee.j)(),g=i.visible,T=i.onVisibleChange,z=i.onFinish,j=i.value,W=oe.a.useForm(),H=Object(U.a)(W,1),E=H[0],J=Object(r.useMemo)(function(){return(j.rules||[]).includes(de.Array)?de.Array:de.String},[j.rules]);return Object(r.useEffect)(function(){E.setFieldsValue(Object(K.a)(Object(K.a)({},j),{},{value:Pe(j.value,J)}))},[J,j,E]),Object(t.jsxs)(ne.a,{form:E,title:j.full_key,width:"60vw",visible:g,onVisibleChange:T,onFinish:Object(l.a)(d.a.mark(function Z(){var B;return d.a.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,Object(b.g)({key:j.full_key,value:ye(E.getFieldsValue().value,J)});case 2:if(B=A.sent,!B.success){A.next=6;break}return z(B.success===!0),A.abrupt("return",B.success);case 6:return A.abrupt("return");case 7:case"end":return A.stop()}},Z)})),children:[Object(t.jsxs)(w.b.Group,{children:[Object(t.jsx)(ie.a,{disabled:!0,name:"public",label:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"})}),Object(t.jsx)(ie.a,{disabled:!0,name:"readonly",label:Object(t.jsx)(a.a,{id:"readonly",defaultMessage:"readonly"})}),Object(t.jsx)(w.b.Item,{shouldUpdate:!0,label:Object(t.jsx)(a.a,{id:"rules",defaultMessage:"rules"}),children:function(){return Object(t.jsx)(_e,{code:!0,children:JSON.stringify(E.getFieldValue("rules"))})}})]}),J===de.Array?Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(me.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"}),tooltip:"".concat(m.formatMessage({id:"example_json"}),': ["first_field_name", "second_field_name"]')}),Object(t.jsx)(w.b.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(X.a,{src:JSON.parse(E.getFieldValue("value"))})}catch(B){return Object(t.jsx)(X.a,{src:JSON.parse('{ "error": "cannot parse this array" }')})}}})]}):Object(t.jsx)(Y.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"})})]})},Ce=Me,De=[{title:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"readonly",defaultMessage:"readonly"}),dataIndex:"readonly",hideInForm:!0,hideInSearch:!0,render:function(i,m){return Object(t.jsx)(p.a,{color:m.readonly?"success":"error",children:Object(t.jsx)(a.a,{id:m.readonly?"true":"false",defaultMessage:m.readonly?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(i,m){return Object(t.jsx)(p.a,{color:m.public?"success":"error",children:Object(t.jsx)(a.a,{id:m.public?"true":"false",defaultMessage:m.public?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0}],xe=function $(i,m){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return!i||typeof i!="object"?!1:(Object.keys(i).forEach(function(T){var z=i[T];T===m?g.push(i):typeof z=="object"&&$(z,m,g)}),g)},Te=function(i){var m=i.packageName,g=i.values,T=i.onValueUpdated,z=Object(a.i)(),j=Object(r.useState)(),W=Object(U.a)(j,2),H=W[0],E=W[1],J=Object(r.useMemo)(function(){var Z=g[m];return xe(Z,"rules")},[g,m]);return Object(t.jsxs)(_.a.Fragment,{children:[Object(t.jsx)(ee.a,{headerTitle:z.formatMessage({id:"menu.settings"}),rowKey:"key",search:{labelWidth:120},dataSource:J,columns:[].concat(De,[{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(B,P){return[Object(t.jsx)(h.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(s.a,{type:"primary",icon:Object(t.jsx)(S.a,{}),onClick:function(){return E(P)}})},"edit")]}}])}),H&&Object(t.jsx)(Ce,{value:H,visible:H!==void 0,onVisibleChange:function(B){return B===!1&&E(void 0)},onFinish:Object(l.a)(d.a.mark(function Z(){return d.a.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:T();case 1:case"end":return P.stop()}},Z)}))})]})},Ae=Te,Ie=function(i){return i.replaceAll("escolalms","").split("_").join("")},Fe=v.default=function(){var $=Object(M.g)(),i=Object(a.i)(),m=$.tab,g=m===void 0?"user_settings":m,T=Object(r.useState)(),z=Object(U.a)(T,2),j=z[0],W=z[1],H=Object(r.useCallback)(function(){Object(b.a)().then(function(E){E.success&&W(E.data)})},[]);return Object(r.useEffect)(function(){H()},[]),j?Object(t.jsx)(C.a,{title:Object(t.jsx)(a.a,{id:"settings"}),header:{breadcrumb:{routes:[{path:"settings",breadcrumbName:i.formatMessage({id:"menu.Settings"})},{path:String(g),breadcrumbName:String(g)}]}},children:Object(t.jsxs)(D.a,{tabs:{type:"card",activeKey:g,onChange:function(J){return a.d.push("/settings/".concat(J))}},children:[Object(t.jsx)(D.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"user.settings"}),children:Object(t.jsx)(Oe,{})},"user_settings"),Object.keys(j).map(function(E){return Object(t.jsxs)(D.a.TabPane,{tab:Object(t.jsxs)("span",{children:[Object(t.jsx)(a.a,{id:"package"})," ",Ie(E)]}),children:[Object(t.jsx)(Ae,{values:j,packageName:E,onValueUpdated:function(){return H()}}),E]},E)})]})}):Object(t.jsx)(y.a,{})}},etVw:function(ae,v,e){"use strict";var F=e("DZo9"),y=e("8z0m"),U=e("+L6B"),r=e("2/Rp"),_=e("wx14"),D=e("q1tI"),M=e.n(D),a=e("z7Xi"),C=e("WFLz"),b=function(o,L){var h=o.fieldProps,O=o.name,s=o.action,I=o.accept,p=o.listType,c=o.title,K=c===void 0?"\u5355\u51FB\u4E0A\u4F20":c,V=o.max,u=o.icon,l=u===void 0?M.a.createElement(a.a,null):u,x=o.value,d=o.buttonProps,n=o.onChange,ee=o.disabled,N=o.proFieldProps,oe=o.fileList,ve=(V===void 0||!x||(x==null?void 0:x.length)<V)&&(N==null?void 0:N.mode)!=="read",le=(p!=null?p:h==null?void 0:h.listType)==="picture-card";return M.a.createElement(y.a,Object(_.a)({action:s,accept:I,ref:L,name:O||"file",listType:p||"picture",fileList:oe!=null?oe:x},h,{onChange:function(ne){var Y;n==null||n(ne),h==null||(Y=h.onChange)===null||Y===void 0||Y.call(h,ne)}}),ve&&(le?M.a.createElement("span",null,l," ",K):M.a.createElement(r.a,Object(_.a)({disabled:ee||(h==null?void 0:h.disabled)},d),l,K)))};v.a=Object(C.a)(M.a.forwardRef(b),{getValueFromEvent:function(o){return o.fileList}})},hd5d:function(ae,v,e){"use strict";var F=e("9og8"),y=e("WmNS"),U=e.n(y),r=e("q1tI"),_=e.n(r),D=e("3Ef1"),M=e.n(D),a=e("BAh9"),C=e("vtG9"),b=e.n(C),R=e("9kvl"),o=e("nKUr"),L=e.n(o),h=function(s){var I=s.value,p=s.onChange,c=s.directory,K=c===void 0?"/wysiwyg":c,V=Object(R.i)();return Object(o.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(o.jsx)(M.a,{uploadImage:function(){var u=Object(F.a)(U.a.mark(function l(x){var d,n;return U.a.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,Object(a.e)(x,K);case 2:if(d=N.sent,!d.success){N.next=6;break}return n=d.data[0].name.includes("/")?d.data[0].name:"".concat(K).concat(d.data[0].name),N.abrupt("return",Object(a.d)(n,1e3));case 6:throw new Error("Error while uploading");case 7:case"end":return N.stop()}},l)}));return function(l){return u.apply(this,arguments)}}(),defaultValue:I||"",onChange:function(l){return p&&p(l())},placeholder:V.formatMessage({id:"wysiwyg_placeholder"})})})};v.a=h},lLVY:function(ae,v,e){},vtG9:function(ae,v,e){}}]);
