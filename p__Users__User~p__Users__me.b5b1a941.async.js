(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"5ddx":function(U,c,e){"use strict";var E=e("9og8"),_=e("+L6B"),p=e("2/Rp"),d=e("tJVT"),g=e("WmNS"),h=e.n(g),i=e("q1tI"),v=e.n(i),l=e("9kvl"),b=e("Qiat"),o=e("VK58"),s=e("xvlK"),j=e("Xcxh"),f=e("y8nQ"),r=e("Vl3Y"),a=e("rmhi"),u=e("VMEa"),n=e("Qurx"),t=e("nKUr"),P=function(O){var D=Object(l.i)(),x=O.visible,m=O.onVisibleChange,B=O.onFinish,L=r.a.useForm(),S=Object(d.a)(L,1),A=S[0];return Object(i.useEffect)(function(){return function(){A.resetFields()}},[]),Object(t.jsx)(a.a,{form:A,title:D.formatMessage({id:"newSetting",defaultMessage:"newSetting"}),width:"30vw",visible:x,onVisibleChange:m,onFinish:B,children:Object(t.jsxs)(u.b.Group,{children:[Object(t.jsx)(n.a,{label:Object(t.jsx)(l.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"}),Object(t.jsx)(n.a,{label:Object(t.jsx)(l.a,{id:"value",defaultMessage:"value"}),rules:[{required:!0}],width:"md",name:"value"})]})})},M=P,y=function(O){var D=O.user,x=O.isProfile,m=x===void 0?!1:x,B=Object(i.useRef)(),L=Object(l.i)(),S=Object(i.useState)(!1),A=Object(d.a)(S,2),K=A[0],W=A[1],z=Object(i.useState)("PATCH"),G=Object(d.a)(z,2),$=G[0],F=G[1],J=[{title:Object(t.jsx)(l.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(l.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInSearch:!0}],Q=Object(i.useCallback)(function(I){var T=I&&Object.entries(I).map(function(w){return{key:w[0],value:w[1]}});return T},[D]);return Object(t.jsxs)(v.a.Fragment,{children:[Object(t.jsx)(b.a,{headerTitle:L.formatMessage({id:"menu.settings"}),actionRef:B,rowKey:"id",search:!1,toolBarRender:m?function(){return[Object(t.jsxs)(p.a,{type:"primary",onClick:function(){W(-1),F("PATCH")},children:[Object(t.jsx)(s.a,{})," ",Object(t.jsx)(l.a,{id:"pages.searchTable.new"})]},"primary"),Object(t.jsxs)(p.a,{color:"yellow",type:"primary",onClick:function(){W(-1),F("PUT")},children:[Object(t.jsx)(j.a,{})," ",Object(t.jsx)(l.a,{id:"user.settings.overwrite"})]},"primary")]}:!1,request:function(){return Object(o.c)(Number(D)).then(function(T){return T.success?{data:Q(T.data)}:[]})},columns:J}),Object(t.jsx)(M,{id:K,visible:Number.isInteger(K),onVisibleChange:function(T){return T===!1&&W(!1)},onFinish:function(){var I=Object(E.a)(h.a.mark(function T(w){var N;return h.a.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,Object(o.f)(Number(D),$,w);case 2:N=V.sent,N.success&&(W(!1),B.current&&B.current.reload());case 4:case"end":return V.stop()}},T)}));return function(T){return I.apply(this,arguments)}}()})]})},C=c.a=y},BAh9:function(U,c,e){"use strict";e.d(c,"a",function(){return h}),e.d(c,"b",function(){return v}),e.d(c,"e",function(){return b}),e.d(c,"d",function(){return s}),e.d(c,"c",function(){return j});var E=e("k1fw"),_=e("9og8"),p=e("WmNS"),d=e.n(p),g=e("9kvl");function h(r,a){return i.apply(this,arguments)}function i(){return i=Object(_.a)(d.a.mark(function r(a,u){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(g.f)("/api/admin/file/list",Object(E.a)({method:"GET",params:a},u||{})));case 1:case"end":return t.stop()}},r)})),i.apply(this,arguments)}function v(r,a){return l.apply(this,arguments)}function l(){return l=Object(_.a)(d.a.mark(function r(a,u){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(g.f)("/api/admin/file/find",Object(E.a)({method:"GET",params:a},u||{})));case 1:case"end":return t.stop()}},r)})),l.apply(this,arguments)}function b(r,a,u){return o.apply(this,arguments)}function o(){return o=Object(_.a)(d.a.mark(function r(a,u,n){var t;return d.a.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return t=new FormData,t.append("file[]",a),t.append("target",u),M.abrupt("return",Object(g.f)("/api/admin/file/upload",Object(E.a)({method:"POST",data:t},n||{})));case 4:case"end":return M.stop()}},r)})),o.apply(this,arguments)}var s=function(a){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(a,"&w=").concat(u)};function j(r,a){return f.apply(this,arguments)}function f(){return f=Object(_.a)(d.a.mark(function r(a,u){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(g.f)("/api/admin/file/delete",Object(E.a)({method:"DELETE",data:{url:a}},u||{})));case 1:case"end":return t.stop()}},r)})),f.apply(this,arguments)}},"DBJ/":function(U,c,e){"use strict";var E=e("y8nQ"),_=e("Vl3Y"),p=e("etVw"),d=e("q1tI"),g=e.n(d),h=e("9kvl"),i=function(o){var s=o.condition,j=o.children,f=o.wrap;return s?g.a.cloneElement(f(j)):j},v=e("nKUr"),l=function(s){var j=s.onChange,f=s.url,r=s.name,a=s.extra,u=s.accept,n=s.data,t=s.wrapInForm,P=t===void 0?!0:t,M=Object(h.i)();return n&&n[r]&&delete n[r],Object(v.jsx)(i,{condition:P,wrap:function(C){return Object(v.jsx)(_.a,{children:C})},children:Object(v.jsx)(p.a,{title:Object(v.jsx)(h.a,{id:"upload_click_here"}),placeholder:M.formatMessage({id:"upload_click_here"}),onChange:j,label:Object(v.jsx)(h.a,{id:"upload"}),max:2,fieldProps:{data:n,accept:u,name:r,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(f),extra:a})})},b=c.a=l},JGo8:function(U,c,e){},Jfn2:function(U,c,e){"use strict";var E=e("k1fw"),_=e("XCrF"),p=e("1GRj"),d=e("PpiC"),g=e("q1tI"),h=e.n(g),i=e("nKUr"),v=e.n(i),l=function(o){var s=o.path,j=o.size,f=o.srcSizes,r=o.alt,a=r===void 0?"LMS Image":r,u=Object(d.a)(o,["path","size","srcSizes","alt"]),n="".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(s,"&w=").concat(f?f[0]:j),t=f&&f.map(function(P){return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(s,"&w=").concat(P," ").concat(P,"w")});return Object(i.jsx)("div",{className:"escolalms-image",children:Object(i.jsx)(p.a,Object(E.a)({src:n,srcSet:t&&t.join(","),alt:a},u))})};c.a=l},etVw:function(U,c,e){"use strict";var E=e("EFp3"),_=e("JGo8"),p=e("+L6B"),d=e("MXD1"),g=e("5Dmo"),h=e("8z0m"),i=e("2/Rp"),v=e("wx14"),l=e("q1tI"),b=e.n(l),o=e("z7Xi"),s=e("WFLz"),j=function(a,u){var n=a.fieldProps,t=a.name,P=a.action,M=a.accept,y=a.listType,C=a.title,R=C===void 0?"\u5355\u51FB\u4E0A\u4F20":C,O=a.max,D=a.icon,x=D===void 0?b.a.createElement(o.a,null):D,m=a.value,B=a.buttonProps,L=a.onChange,S=a.disabled,A=a.proFieldProps,K=a.fileList,W=(O===void 0||!m||(m==null?void 0:m.length)<O)&&(A==null?void 0:A.mode)!=="read",z=(y!=null?y:n==null?void 0:n.listType)==="picture-card";return b.a.createElement(h.a,Object(v.a)({action:P,accept:M,ref:u,name:t||"file",listType:y||"picture",fileList:K!=null?K:m},n,{onChange:function($){var F;L==null||L($),n==null||(F=n.onChange)===null||F===void 0||F.call(n,$)}}),W&&(z?b.a.createElement("span",null,x," ",R):b.a.createElement(i.a,Object(v.a)({disabled:S||(n==null?void 0:n.disabled)},B),x,R)))},f=c.a=Object(s.a)(b.a.forwardRef(j),{getValueFromEvent:function(a){return a.fileList}})},hd5d:function(U,c,e){"use strict";var E=e("9og8"),_=e("WmNS"),p=e.n(_),d=e("q1tI"),g=e.n(d),h=e("3Ef1"),i=e.n(h),v=e("BAh9"),l=e("vtG9"),b=e.n(l),o=e("9kvl"),s=e("nKUr"),j=e.n(s),f=function(a){var u=a.value,n=a.onChange,t=a.directory,P=t===void 0?"/wysiwyg":t,M=Object(o.i)();return Object(s.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(s.jsx)(i.a,{uploadImage:function(){var y=Object(E.a)(p.a.mark(function C(R){var O,D;return p.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,Object(v.e)(R,P);case 2:if(O=m.sent,!O.success){m.next=6;break}return D=O.data[0].name.includes("/")?O.data[0].name:"".concat(P).concat(O.data[0].name),m.abrupt("return",Object(v.d)(D,1e3));case 6:throw new Error("Error while uploading");case 7:case"end":return m.stop()}},C)}));return function(C){return y.apply(this,arguments)}}(),defaultValue:u||"",onChange:function(C){return n&&n(C())},placeholder:M.formatMessage({id:"wysiwyg_placeholder"})})})};c.a=f},vtG9:function(U,c,e){}}]);
