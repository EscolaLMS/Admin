(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"5qq5":function(xe,w,e){"use strict";var Pe=e("7Kak"),ce=e("9yH6"),J=e("VTBJ"),ue=e("Ff2n"),_=e("nKUr"),D=e.n(_),q=e("uX+g"),N=e("q1tI"),r=e.n(N),m=e("WFLz"),p=e("adzw"),R=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],le=r.a.forwardRef(function(o,L){var V=o.fieldProps,M=o.options,de=o.radioType,x=o.layout,B=o.proFieldProps,be=o.valueEnum,k=Object(ue.a)(o,R);return Object(_.jsx)(p.a,Object(J.a)(Object(J.a)({valueType:de==="button"?"radioButton":"radio",ref:L,valueEnum:Object(q.a)(be,void 0)},k),{},{fieldProps:Object(J.a)({options:M,layout:x},V),proFieldProps:B,filedConfig:{customLightMode:!0}}))}),oe=r.a.forwardRef(function(o,L){var V=o.fieldProps,M=o.children;return Object(_.jsx)(ce.a,Object(J.a)(Object(J.a)({},V),{},{ref:L,children:M}))}),re=Object(m.a)(oe,{valuePropName:"checked",ignoreWidth:!0}),A=re;A.Group=le,A.Button=ce.a.Button,A.displayName="ProFormComponent",w.a=A},HEzf:function(xe,w,e){"use strict";var Pe=e("EFp3"),ce=e("O/iA"),J=e("OaEy"),ue=e("wx14"),_=e("U8pU"),D=e("ODXe"),q=e("TSYQ"),N=e.n(q),r=e("Zm9Q"),m=e("bT9E"),p=e("q1tI"),R=e.n(p),le=e("H84U"),oe=e("2fM7"),re=e("0n0R"),A=oe.a.Option;function o(h){return h&&h.type&&(h.type.isSelectOption||h.type.isSelectOptGroup)}var L=function(j,je){var Oe=j.prefixCls,H=j.className,f=j.popupClassName,c=j.dropdownClassName,d=j.children,I=j.dataSource,G=Object(r.a)(d),y;if(G.length===1&&Object(re.c)(G[0])&&!o(G[0])){var z=Object(D.a)(G,1);y=z[0]}var ie=y?function(){return y}:void 0,Te;return G.length&&o(G[0])?Te=d:Te=I?I.map(function(ee){if(Object(re.c)(ee))return ee;switch(Object(_.a)(ee)){case"string":return p.createElement(A,{key:ee,value:ee},ee);case"object":{var $=ee.value;return p.createElement(A,{key:$,value:$},ee.text)}default:return}}):[],p.createElement(le.a,null,function(ee){var $=ee.getPrefixCls,fe=$("select",Oe);return p.createElement(oe.a,Object(ue.a)({ref:je},Object(m.a)(j,["dataSource"]),{prefixCls:fe,popupClassName:f||c,className:N()("".concat(fe,"-auto-complete"),H),mode:oe.a.SECRET_COMBOBOX_MODE_DO_NOT_USE},{getInputElement:ie}),Te)})},V=p.forwardRef(L);V.Option=A;var M=V,de=e("y8nQ"),x=e("Vl3Y"),B=e("+L6B"),be=e("2/Rp"),k=e("5NDa"),i=e("5rEg"),pe=e("tJVT"),P=e("VMEa"),Fe=e("rmhi"),he=e("Qurx"),Ce=e("F/zT"),t=e("5qq5"),Ie=e("BiO0"),Ae=e("tneF"),Le=e("FJDo"),Q=e("9kvl"),Re=e("+up7"),ye=e("hd5d"),Be=e("3fxf"),O=e("ovOe"),C=e.n(O),S=e("bRQS"),U=e("4i/N"),a=e("nKUr"),ne=function(j){var je=j.value,Oe=j.onChange,H=j.type,f=H===void 0?"file":H,c=Object(p.useState)(!1),d=Object(pe.a)(c,2),I=d[0],G=d[1];return Object(a.jsxs)(R.a.Fragment,{children:[Object(a.jsxs)(P.a.Group,{children:[Object(a.jsx)(i.a,{value:je,readOnly:!0}),Object(a.jsxs)(be.a,{size:"small",type:"primary",onClick:function(){return G(!I)},children:["toggle ",f," browser"]})]}),I&&Object(a.jsx)(Be.a,{onFile:function(z,ie){return Oe&&Oe("".concat(ie,"/").concat(z.name))}})]})},K=function(j){var je=Object(Q.l)(),Oe=j.visible,H=j.onVisibleChange,f=j.onFinish,c=j.id,d=j.initialData,I=j.groups,G=x.a.useForm(),y=Object(pe.a)(G,1),z=y[0],ie=!c||c===-1,Te=Object(p.useState)("text"),ee=Object(pe.a)(Te,2),$=ee[0],fe=ee[1],De=Object(p.useCallback)(function(){return!!(z.getFieldValue("group")==="global"||d)},[z,d]),Ke=Object(p.useState)(""),v=Object(pe.a)(Ke,2),s=v[0],n=v[1];Object(p.useEffect)(function(){if(typeof c=="object"){var l;z.setFieldsValue(c),fe((l=c.type)!==null&&l!==void 0?l:"text")}else c&&c!==-1?Object(Re.e)(Number(c)).then(function(g){g.success&&(z.setFieldsValue(g.data),fe(g.data.type),n(g.data.group))}):(z.resetFields(),fe("text"))},[c,z,d]);var u=Object(p.useCallback)(function(l){l.type&&l.type!==$&&fe(l.type)},[$]);return Object(a.jsxs)(Fe.a,{form:z,title:je.formatMessage({id:c?"editSetting":"newSetting",defaultMessage:c?"editSetting":"newSetting"}),width:"60vw",visible:!!Oe,onVisibleChange:H,onFinish:f,onValuesChange:u,children:[Object(a.jsxs)(P.a.Group,{children:[d?Object(a.jsx)(he.a,{label:Object(a.jsx)(Q.a,{id:"group",defaultMessage:"group"}),rules:[{required:!0}],width:"md",name:"group",disabled:De()}):Object(a.jsx)(P.a.Item,{label:Object(a.jsx)(Q.a,{id:"group",defaultMessage:"group"}),name:"group",children:Object(a.jsx)(M,{style:{width:"300px"},autoFocus:!0,value:s,onChange:function(g){return n(g)},filterOption:function(g,b){var F;return(b==null||(F=b.children)===null||F===void 0?void 0:F.toString().toLowerCase().indexOf(g.toLowerCase()))!==-1},children:I.map(function(l){return Object(a.jsx)(M.Option,{value:l,children:l},l)})})}),Object(a.jsx)(he.a,{label:Object(a.jsx)(Q.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key",disabled:De()})]}),Object(a.jsxs)(P.a.Group,{children:[Object(a.jsx)(Ce.a,{name:"enumerable",disabled:De(),label:Object(a.jsx)(Q.a,{id:"enumerable",defaultMessage:"enumerable"})}),Object(a.jsx)(Ce.a,{name:"public",disabled:De(),label:Object(a.jsx)(Q.a,{id:"public",defaultMessage:"public"})})]}),Object(a.jsx)(P.a.Group,{children:Object(a.jsx)(t.a.Group,{disabled:!!(!ie||d),name:"type",label:Object(a.jsx)(Q.a,{id:"type"}),options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"},{label:"json",value:"json"},{label:"file",value:"file"},{label:"image",value:"image"},{label:"boolean",value:"boolean"},{label:"number",value:"number"},{label:"array",value:"array"}]})}),Object(a.jsxs)("div",{children:[$==="text"&&Object(a.jsx)(he.a,{width:"lg",name:"value",label:Object(a.jsx)(Q.a,{id:"value"})}),$==="json"&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Ie.a,{width:"lg",name:"value",label:Object(a.jsx)(Q.a,{id:"value"}),tooltip:"".concat(je.formatMessage({id:"example_json"}),': {"name":"John", "age":30, "city":["New York","Warsaw"]}')}),Object(a.jsx)(P.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(a.jsx)(C.a,{src:JSON.parse(z.getFieldValue("value"))})}catch(g){return Object(a.jsx)(C.a,{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]}),($==="file"||$==="image")&&Object(a.jsx)(P.a.Item,{name:"value",label:"value",tooltip:"select file from current repository or upload new one",valuePropName:"value",children:Object(a.jsx)(ne,{type:$})}),$==="markdown"&&Object(a.jsx)(P.a.Item,{name:"value",label:"value",tooltip:"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.",valuePropName:"value",children:Object(a.jsx)(ye.a,{directory:"settings/wysiwyg"})}),$==="boolean"?Object(a.jsx)(Ce.a,{name:"data",label:Object(a.jsx)(Q.a,{id:"value"}),checkedChildren:Object(a.jsx)(S.a,{}),unCheckedChildren:Object(a.jsx)(U.a,{})}):Object(a.jsx)(P.a.Item,{noStyle:!0,hidden:!0,children:Object(a.jsx)(Ae.a,{name:"data",valuePropName:"data"})}),$==="number"&&Object(a.jsx)(Le.a,{name:"data",label:Object(a.jsx)(Q.a,{id:"value"})}),$==="array"&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Ie.a,{width:"lg",name:"value",label:Object(a.jsx)(Q.a,{id:"value"}),tooltip:"".concat(je.formatMessage({id:"example_json"}),": ['tutor', 'student']")}),Object(a.jsx)(P.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(a.jsx)(C.a,{src:JSON.parse(z.getFieldValue("value"))})}catch(g){return Object(a.jsx)(C.a,{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]})]})]})},Se=w.a=K},"O/iA":function(xe,w,e){},YjuE:function(xe,w,e){"use strict";e.r(w);var Pe=e("fOrg"),ce=e("+KLJ"),J=e("T2oS"),ue=e("W9HT"),_=e("tJVT"),D=e("q1tI"),q=e.n(D),N=e("Ty5D"),r=e("9kvl"),m=e("nhC9"),p=e("tMyG"),R=e("+up7"),le=e("P2fV"),oe=e("NJEC"),re=e("5Dmo"),A=e("3S7+"),o=e("+L6B"),L=e("2/Rp"),V=e("+BJd"),M=e("mr32"),de=e("jrin"),x=e("qLMh"),B=e("k1fw"),be=e("miYZ"),k=e("tsqr"),i=e("9og8"),pe=e("xvlK"),P=e("Qiat"),Fe=e("HEzf"),he=e("G3dp"),Ce=e("/MfK"),t=e("nKUr"),Ie=function(){var v=Object(i.a)(Object(x.a)().mark(function s(n,u,l){var g;return Object(x.a)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return g=k.b.loading(n.formatMessage({id:"loading"})),F.prev=1,F.next=4,l&&l!==-1?Object(R.i)(l,Object(B.a)({},u)):Object(R.b)(Object(B.a)({},u));case 4:return g(),k.b.success(n.formatMessage({id:"success"})),F.abrupt("return",!0);case 9:return F.prev=9,F.t0=F.catch(1),g(),k.b.error(n.formatMessage({id:"error"})),F.abrupt("return",!1);case 14:case"end":return F.stop()}},s,null,[[1,9]])}));return function(n,u,l){return v.apply(this,arguments)}}(),Ae=function(){var v=Object(i.a)(Object(x.a)().mark(function s(n,u){var l;return Object(x.a)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return l=k.b.loading(n.formatMessage({id:"loading"})),b.prev=1,b.next=4,Object(R.c)(u);case 4:return l(),k.b.success(n.formatMessage({id:"success"})),b.abrupt("return",!0);case 9:return b.prev=9,b.t0=b.catch(1),l(),k.b.error(n.formatMessage({id:"error"})),b.abrupt("return",!1);case 14:case"end":return b.stop()}},s,null,[[1,9]])}));return function(n,u){return v.apply(this,arguments)}}(),Le=function(){var s=Object(D.useState)(!1),n=Object(_.a)(s,2),u=n[0],l=n[1],g=Object(D.useState)([]),b=Object(_.a)(g,2),F=b[0],me=b[1],Y=Object(D.useRef)(),Z=Object(r.l)(),te=Object(r.m)("@@initialState"),E=te.setInitialState;Object(D.useEffect)(function(){Object(R.f)().then(function(T){T.success&&me(T.data.filter(function(W){return W!=="global"}))})},[]);var se=[{title:Object(t.jsx)(r.a,{id:"group",defaultMessage:"group"}),dataIndex:"group",hideInSearch:!1,key:"group",valueType:"select",width:100,valueEnum:F.sort().reduce(function(T,W){return Object(B.a)(Object(B.a)({},T),{},Object(de.a)({},W,W))},{})},{title:Object(t.jsx)(r.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(r.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(t.jsx)(r.a,{id:"enumerable",defaultMessage:"enumerable"}),dataIndex:"enumerable",hideInForm:!0,hideInSearch:!0,render:function(W,X){return Object(t.jsx)(M.a,{color:X.enumerable?"success":"error",children:Object(t.jsx)(r.a,{id:X.enumerable?"true":"false",defaultMessage:X.enumerable?"true":"false"})})}},{title:Object(t.jsx)(r.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(W,X){return Object(t.jsx)(M.a,{color:X.public?"success":"error",children:Object(t.jsx)(r.a,{id:X.public?"true":"false",defaultMessage:X.public?"true":"false"})})}},{hideInSearch:!0,title:Object(t.jsx)(r.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(W,X){return[Object(t.jsx)(A.a,{title:Object(t.jsx)(r.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(L.a,{type:"primary",icon:Object(t.jsx)(he.a,{}),onClick:function(){return l(X.id)}})},"edit"),Object(t.jsx)(oe.a,{title:Object(t.jsx)(r.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(i.a)(Object(x.a)().mark(function ae(){var ve;return Object(x.a)().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return Me.next=2,Ae(Z,X.id);case 2:ve=Me.sent,ve&&(l(!1),Y.current&&Y.current.reload());case 4:case"end":return Me.stop()}},ae)})),okText:Object(t.jsx)(r.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(r.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(A.a,{title:Object(t.jsx)(r.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(L.a,{type:"primary",icon:Object(t.jsx)(Ce.a,{}),danger:!0})})},"delete")]}}];return Object(t.jsxs)(q.a.Fragment,{children:[Object(t.jsx)(P.a,{headerTitle:Z.formatMessage({id:"menu.settings"}),actionRef:Y,rowKey:"id",search:{layout:"vertical"},toolBarRender:function(){return[Object(t.jsxs)(L.a,{type:"primary",onClick:function(){l(-1)},children:[Object(t.jsx)(pe.a,{})," ",Object(t.jsx)(r.a,{id:"pages.searchTable.new"})]},"primary")]},request:function(W){var X=W.pageSize,ae=W.current,ve=W.group;return Object(R.g)({per_page:X,current:ae,group:ve}).then(function(Ee){return Ee.success?{data:Ee.data.filter(function(Me){return Me.group!=="global"}),total:Ee.meta.total,success:!0}:[]})},columns:se}),Object(t.jsx)(Fe.a,{groups:F,id:u,visible:Number.isInteger(u),onVisibleChange:function(W){return!W&&l(!1)},onFinish:function(){var T=Object(i.a)(Object(x.a)().mark(function W(X){var ae,ve,Ee;return Object(x.a)().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ae=X,ge.next=3,Ie(Z,ae,Number(u));case 3:if(ve=ge.sent,!ve){ge.next=12;break}if(l(!1),Y.current&&Y.current.reload(),ae.group!=="global"){ge.next=12;break}return ge.next=10,Object(R.g)({current:1,per_page:100,group:"global"});case 10:Ee=ge.sent,E(function(Ue){return Object(B.a)(Object(B.a)({},Ue),{},{config:Ee.success?Ee.data:Ue==null?void 0:Ue.config})});case 12:case"end":return ge.stop()}},W)}));return function(W){return T.apply(this,arguments)}}()})]})},Q=Le,Re=e("oBTY"),ye=e("y8nQ"),Be=e("Vl3Y"),O=e("tU7J"),C=e("wFql"),S=e("rmhi"),U=e("VMEa"),a=e("F/zT"),ne=e("BiO0"),K=e("ovOe"),Se=e.n(K),h=e("Fghh"),j=e("Qurx"),je=function(s){var n=s.field,u=s.name;return n!=null&&n.includes("boolean")?Object(t.jsx)(a.a,{name:u,checkedChildren:Object(t.jsx)(h.a,{id:"true"}),unCheckedChildren:Object(t.jsx)(h.a,{id:"false"})}):Object(t.jsx)(j.a,{width:"lg",name:u})},Oe=je,H=C.a.Text,f;(function(v){v.Array="array",v.String="string"})(f||(f={}));var c=function(s,n){return n===f.Array?s&&Array.isArray(s)?JSON.stringify(s):"[]":s},d=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;if(n===f.Array){var u=JSON.parse(s);return u&&Array.isArray(u)?u:[]}return s},I=function(s){var n=Object(h.k)(),u=s.visible,l=s.onVisibleChange,g=s.onFinish,b=s.value,F=Be.a.useForm(),me=Object(_.a)(F,1),Y=me[0],Z=Object(D.useMemo)(function(){return(b.rules||[]).includes(f.Array)?f.Array:f.String},[b.rules]);return Object(D.useEffect)(function(){Y.setFieldsValue(Object(B.a)(Object(B.a)({},b),{},{value:c(b.value,Z)}))},[Z,b,Y]),Object(t.jsxs)(S.a,{form:Y,title:b.full_key,width:"60vw",visible:u,onVisibleChange:l,onFinish:Object(i.a)(Object(x.a)().mark(function te(){var E;return Object(x.a)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,Object(R.h)({key:b.full_key,value:d(Y.getFieldsValue().value,Z)});case 2:if(E=T.sent,!E.success){T.next=6;break}return g(E.success===!0),T.abrupt("return",E.success);case 6:return T.abrupt("return");case 7:case"end":return T.stop()}},te)})),children:[Object(t.jsxs)(U.a.Group,{children:[Object(t.jsx)(a.a,{disabled:!0,name:"public",label:Object(t.jsx)(r.a,{id:"public",defaultMessage:"public"})}),Object(t.jsx)(a.a,{disabled:!0,name:"readonly",label:Object(t.jsx)(r.a,{id:"readonly",defaultMessage:"readonly"})}),Object(t.jsx)(U.a.Item,{shouldUpdate:!0,label:Object(t.jsx)(r.a,{id:"rules",defaultMessage:"rules"}),children:function(){return Object(t.jsx)(H,{code:!0,children:JSON.stringify(Y.getFieldValue("rules"))})}})]}),Z===f.Array?Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(ne.a,{width:"lg",name:"value",label:Object(t.jsx)(r.a,{id:"value"}),tooltip:"".concat(n.formatMessage({id:"example_json"}),': ["first_field_name", "second_field_name"]')}),Object(t.jsx)(U.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(Se.a,{src:JSON.parse(Y.getFieldValue("value"))})}catch(E){return Object(t.jsx)(Se.a,{src:JSON.parse('{ "error": "cannot parse this array" }')})}}})]}):Object(t.jsx)(t.Fragment,{children:Object(t.jsx)(U.a.Item,{shouldUpdate:!0,label:Object(t.jsx)(r.a,{id:"value"}),children:function(){return Object(t.jsx)(Oe,{field:Y.getFieldValue("rules"),name:"value"})}})})]})},G=I,y=e("c+yx"),z=[{title:Object(t.jsx)(r.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!1,sorter:!0},{title:Object(t.jsx)(r.a,{id:"readonly",defaultMessage:"readonly"}),dataIndex:"readonly",hideInForm:!0,hideInSearch:!0,sorter:!0,render:function(s,n){return Object(t.jsx)(M.a,{color:n.readonly?"success":"error",children:Object(t.jsx)(r.a,{id:n.readonly?"true":"false",defaultMessage:n.readonly?"true":"false"})})}},{title:Object(t.jsx)(r.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,sorter:!0,render:function(s,n){return Object(t.jsx)(M.a,{color:n.public?"success":"error",children:Object(t.jsx)(r.a,{id:n.public?"true":"false",defaultMessage:n.public?"true":"false"})})}},{title:Object(t.jsx)(r.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0,render:function(s,n){return typeof n.value=="boolean"?Object(t.jsx)(M.a,{color:n.value?"success":"error",children:Object(t.jsx)(r.a,{id:n.value?"true":"false",defaultMessage:n.value?"true":"false"})}):Array.isArray(n.value)?n.value.map(function(u){return typeof u=="object"?q.a.Children.toArray(Object(t.jsx)("p",{children:Object.keys(u).map(function(l){return"".concat(l,": ").concat(u[l])}).join(", ")})):u}):n.value}}],ie=function v(s,n){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return!s||typeof s!="object"?!1:(Object.keys(s).forEach(function(l){var g=s[l];l===n?u.push(s):typeof g=="object"&&v(g,n,u)}),u)},Te=function(s){var n=s.packageName,u=s.values,l=s.onValueUpdated,g=Object(r.l)(),b=Object(D.useState)(),F=Object(_.a)(b,2),me=F[0],Y=F[1],Z=Object(D.useMemo)(function(){var te=u[n];return ie(te,"rules")},[u,n]);return Object(t.jsxs)(q.a.Fragment,{children:[Object(t.jsx)(P.a,{headerTitle:g.formatMessage({id:"menu.settings"}),rowKey:"key",search:{layout:"vertical"},columns:[].concat(z,[{hideInSearch:!0,title:Object(t.jsx)(r.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(E,se){return[Object(t.jsx)(A.a,{title:Object(t.jsx)(r.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(L.a,{type:"primary",icon:Object(t.jsx)(he.a,{}),onClick:function(){return Y(se)}})},"edit")]}}]),request:function(E,se){var T=E.key,W=se&&Object.entries(se)[0];return new Promise(function(X){var ae=Z?Object(Re.a)(Z):[];T&&(ae=ae.filter(function(ve){return ve.key.toLowerCase().includes(T.toLowerCase())})),W&&(ae=Object(y.i)(ae,W[0],W[1]!=="ascend")),X({data:ae,success:!0,total:ae.length})})}}),me&&Object(t.jsx)(G,{value:me,visible:me!==void 0,onVisibleChange:function(E){return E===!1&&Y(void 0)},onFinish:Object(i.a)(Object(x.a)().mark(function te(){return Object(x.a)().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:l();case 1:case"end":return se.stop()}},te)}))})]})},ee=Te,$=e("t4ZK");function fe(v){var s=v.replaceAll("escolalms",""),n=s.split("_"),u=n.map(function(l){return l.charAt(0).toUpperCase()+l.slice(1)});return u.join(" ")}function De(v,s){var n=["global_settings","user_settings"];return n.includes(v)?s.formatMessage({id:String(v)}):s.formatMessage({id:"Settings.package"},{package:fe(v)})}var Ke=w.default=function(){var v=Object(N.l)(),s=Object(r.l)(),n=v.tab,u=n===void 0?"user_settings":n,l=Object(D.useState)(),g=Object(_.a)(l,2),b=g[0],F=g[1],me=Object(D.useCallback)(function(){Object(R.a)().then(function(E){E.success&&F(E.data)})},[]),Y=Object(r.m)("@@initialState"),Z=Y.initialState,te=Object(D.useCallback)(function(){var E;return(Z==null||(E=Z.config)===null||E===void 0?void 0:E.length)!==0},[Z]);return Object(D.useEffect)(function(){me()},[]),b?Object(t.jsxs)(p.a,{title:De(u,s),header:{breadcrumb:{routes:[{path:"settings",breadcrumbName:s.formatMessage({id:"menu.Configuration.settings"})},{path:String(u),breadcrumbName:De(u,s)}]}},children:[!te()&&Object(t.jsx)(ce.a,{message:Object(t.jsx)(r.a,{id:"global_settings_alert_title",defaultMessage:"Add global settings"}),description:Object(t.jsx)(r.a,{id:"global_settings_alert_description",defaultMessage:"Global settings are used to configure the entire LMS. You can add global settings by clicking the button below."}),type:"warning",showIcon:!0,style:{marginBottom:"20px"}}),Object(t.jsxs)(m.a,{tabs:{type:"card",activeKey:u,onChange:function(se){return r.f.push("/configuration/settings/".concat(se))}},children:[Object(t.jsx)(m.a.TabPane,{tab:Object(t.jsx)(r.a,{id:"user.settings"}),children:Object(t.jsx)(Q,{})},"user_settings"),Object(t.jsx)(m.a.TabPane,{tab:Object(t.jsx)(r.a,{id:"global_settings"}),children:Object(t.jsx)($.a,{})},"global_settings"),Object.keys(b).map(function(E){return Object(t.jsxs)(m.a.TabPane,{tab:Object(t.jsx)("span",{children:Object(t.jsx)(r.a,{id:"Settings.package",values:{package:fe(E)}})}),children:[Object(t.jsx)(ee,{values:b,packageName:E,onValueUpdated:function(){return me()}}),E]},E)})]})]}):Object(t.jsx)(ue.a,{})}},hd5d:function(xe,w,e){"use strict";var Pe=e("qLMh"),ce=e("9og8"),J=e("q1tI"),ue=e.n(J),_=e("C4gf"),D=e.n(_),q=e("BAh9"),N=e("vtG9"),r=e.n(N),m=e("9kvl"),p=e("nKUr"),R=e.n(p),le=function(A){var o=A.attrs,L=o.href,V=L.split("/").pop();return Object(p.jsx)("p",{children:Object(p.jsx)("a",{rel:"noreferrer",href:L,target:"_blank",children:V})})},oe=function(A){var o=A.value,L=A.onChange,V=A.directory,M=V===void 0?"/wysiwyg":V,de=Object(m.l)();return Object(p.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(p.jsx)(D.a,{excludeBlockMenuItems:["Sketch"],embeds:[{matcher:function(){return!0},component:le}],uploadImage:function(){var x=Object(ce.a)(Object(Pe.a)().mark(function B(be){var k,i;return Object(Pe.a)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,Object(q.e)(be,M);case 2:if(k=P.sent,!k.success){P.next=8;break}if(!be.type.includes("image/")){P.next=7;break}return i=k.data[0].name.includes("/")?k.data[0].name:"".concat(M).concat(k.data[0].name),P.abrupt("return",Object(q.d)(i,1e3));case 7:return P.abrupt("return",k.data[0].url);case 8:throw new Error("Error while uploading");case 9:case"end":return P.stop()}},B)}));return function(B){return x.apply(this,arguments)}}(),defaultValue:o||"",onChange:function(B){return L&&L(B())},placeholder:de.formatMessage({id:"wysiwyg_placeholder"})})})};w.a=oe},t4ZK:function(xe,w,e){"use strict";e.d(w,"b",function(){return Q});var Pe=e("P2fV"),ce=e("NJEC"),J=e("+L6B"),ue=e("2/Rp"),_=e("5Dmo"),D=e("3S7+"),q=e("tJVT"),N=e("oBTY"),r=e("qLMh"),m=e("k1fw"),p=e("miYZ"),R=e("tsqr"),le=e("9og8"),oe=e("xvlK"),re=e("q1tI"),A=e.n(re),o=e("9kvl"),L=e("Qiat"),V=e("/y+f"),M=e("+up7"),de=e("HEzf"),x=e("+YFz"),B=e("G3dp"),be=e("/MfK"),k=e("ujla"),i=e("nKUr"),pe=e.n(i),P=function(){var O=Object(le.a)(Object(r.a)().mark(function C(S,U,a){var ne,K;return Object(r.a)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return ne=R.b.loading(S.formatMessage({id:"loading"})),h.prev=1,h.next=4,a&&a!==-1?Object(M.i)(a,Object(m.a)({},U)):Object(M.b)(Object(m.a)({},U));case 4:return K=h.sent,ne(),R.b.success(S.formatMessage({id:"success"})),h.abrupt("return",{success:!0,updatedSettings:K});case 10:return h.prev=10,h.t0=h.catch(1),ne(),R.b.error(S.formatMessage({id:"error"})),h.abrupt("return",{success:!1,updateSettings:null});case 15:case"end":return h.stop()}},C,null,[[1,10]])}));return function(S,U,a){return O.apply(this,arguments)}}(),Fe=function(){var O=Object(le.a)(Object(r.a)().mark(function C(S,U){var a;return Object(r.a)().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return a=R.b.loading(S.formatMessage({id:"loading"})),K.prev=1,K.next=4,Object(M.c)(U);case 4:return a(),R.b.success(S.formatMessage({id:"success"})),K.abrupt("return",!0);case 9:return K.prev=9,K.t0=K.catch(1),a(),R.b.error(S.formatMessage({id:"error"})),K.abrupt("return",!1);case 14:case"end":return K.stop()}},C,null,[[1,9]])}));return function(S,U){return O.apply(this,arguments)}}(),he=function(C){return C.toLowerCase().replace(/(_\w)/g,function(S){return S.toUpperCase().substr(1)})},Ce=function O(C){return C.reduce(function(S,U){return[].concat(Object(N.a)(S),Object(N.a)(U.routes?O(U.routes):[]),[U])},[]).filter(function(S){return S.layout!==!1&&S.hideInMenu!==!0})},t=["statistics","user_submission","user_projects"],Ie=["public"],Ae=["email","sms"],Le=function(C){return"hideInMenu-".concat(he(C.split("/").join("_")))},Q=function(C){return"disableTopicType-".concat(C)},Re=[].concat(Object(N.a)(Object.keys(V.k).map(function(O){return{key:Q(O),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),Object(N.a)(Ce(Object(k.a)()).filter(function(O){return O.path&&O.path!=="/"}).map(function(O){return{path:O.path,key:Le(O.path),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),Object(N.a)(["ECommerce","Certificates"].map(function(O){return{key:"disable-".concat(O),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),Object(N.a)(Ie.map(function(O){return{key:"showInCourseAdditionalSettings-".concat(O),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),Object(N.a)(t.map(function(O){return{key:"hideInCourseTabs-".concat(O),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),Object(N.a)(Ae.map(function(O){return{key:"hideTemplateTab-".concat(O),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}}))).reduce(function(O,C,S){return O[C.key]=Object(m.a)(Object(m.a)({},C),{},{id:-100*S}),O},{}),ye=Object(m.a)({logo:{id:-1,key:"logo",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"image",data:"EscolaLMS"},frontURL:{id:-2,key:"frontURL",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},maxLessonsNestingInProgram:{id:-4,key:"maxLessonsNestingInProgram",group:"global",value:"0",public:!0,enumerable:!0,sort:1,type:"number",data:0},minTopicNestingInProgram:{id:-5,key:"minTopicNestingInProgram",group:"global",value:"0",public:!0,enumerable:!0,sort:1,type:"number",data:0},companyName:{id:-6,key:"companyName",group:"global",value:"Wellms",public:!0,enumerable:!0,sort:0,type:"text",data:"Wellms"},companyURL:{id:-7,key:"companyURL",group:"global",value:"https://www.wellms.io/",public:!0,enumerable:!0,sort:0,type:"text",data:"https://www.wellms.io/"},logoLogin:{id:-8,key:"logoLogin",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"image",data:"EscolaLMS"},logoFooter:{id:-9,key:"logoFooter",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"image",data:"EscolaLMS"},footerFontColor:{id:-10,key:"footerFontColor",group:"global",value:"#00000072",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},showLoginBackgroundImage:{id:-11,key:"showLoginBackgroundImage",group:"global",value:"true",public:!0,enumerable:!0,sort:0,type:"boolean",data:"EscolaLMS"},loginHeaderBackgroundColor:{id:-12,key:"loginHeaderBackgroundColor",group:"global",value:"#f0f2f5",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},loginHeaderFontColor:{id:-13,key:"loginHeaderFontColor",group:"global",value:"#000000D8",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},loginFormBackgroundColor:{id:-14,key:"loginFormBackgroundColor",group:"global",value:"#f0f2f5",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},contentBackgroundColor:{id:-15,key:"contentBackgroundColor",group:"global",value:"#f0f2f5",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},technicalMaintenance:{id:-16,key:"technicalMaintenance",group:"global",value:"false",public:!0,enumerable:!0,sort:0,type:"boolean",data:"EscolaLMS"},technicalMaintenanceText:{id:-17,key:"technicalMaintenanceText",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"}},Re),Be=function(){var C=Object(re.useState)(!1),S=Object(q.a)(C,2),U=S[0],a=S[1],ne=Object(re.useRef)(),K=Object(o.l)(),Se=Object(o.m)("@@initialState"),h=Se.setInitialState,j=Se.initialState,je=[{title:Object(i.jsx)(o.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0,render:function(f,c){return Object(i.jsx)(re.Fragment,{children:Object(i.jsxs)(D.a,{title:Object(i.jsx)(o.a,{id:"Settings.tooltip.".concat(c.key)}),children:[c.key," ",Object(i.jsx)(x.a,{})]})})}},{title:Object(i.jsx)(o.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(i.jsx)(o.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0,render:function(f,c){return c.value}},{hideInSearch:!0,title:Object(i.jsx)(o.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(f,c){return[c.id>0?Object(i.jsx)(D.a,{title:Object(i.jsx)(o.a,{id:"edit",defaultMessage:"edit"}),children:Object(i.jsx)(ue.a,{type:"primary",icon:Object(i.jsx)(B.a,{}),onClick:function(){return a(c.id)}})},"edit"):Object(i.jsx)(D.a,{title:Object(i.jsx)(o.a,{id:"create",defaultMessage:"create"}),children:Object(i.jsx)(ue.a,{type:"primary",icon:Object(i.jsx)(oe.a,{}),onClick:function(){a(ye[c.key]||-1)}})},"create"),Object(i.jsx)(ce.a,{title:Object(i.jsx)(o.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(le.a)(Object(r.a)().mark(function d(){var I;return Object(r.a)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,Fe(K,c.id);case 2:I=y.sent,I&&(a(!1),ne.current&&ne.current.reload());case 4:case"end":return y.stop()}},d)})),okText:Object(i.jsx)(o.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(i.jsx)(o.a,{id:"no",defaultMessage:"No"}),children:c.id>0?Object(i.jsx)(D.a,{title:Object(i.jsx)(o.a,{id:"delete",defaultMessage:"delete"}),children:Object(i.jsx)(ue.a,{type:"primary",icon:Object(i.jsx)(be.a,{}),danger:!0})}):null},"delete")]}}],Oe=function(f){var c;if(!!f&&(!(j!=null&&(c=j.config)!==null&&c!==void 0&&c.length)&&f&&h(Object(m.a)(Object(m.a)({},j),{},{config:[f]})),!!(j!=null&&j.config))){var d=j==null?void 0:j.config.map(function(I){return I.key===f.key?Object(m.a)(Object(m.a)({},I),f):I});h(Object(m.a)(Object(m.a)({},j),{},{config:d}))}};return Object(i.jsxs)(A.a.Fragment,{children:[Object(i.jsx)(L.a,{headerTitle:K.formatMessage({id:"menu.settings"}),search:!1,toolBarRender:!1,actionRef:ne,rowKey:"id",request:function(f){var c=f.pageSize,d=f.current;return Object(M.g)({per_page:c,current:d,group:"global"}).then(function(I){if(I.success){var G=[].concat(Object(N.a)(Object.keys(ye).map(function(y){return I.data.find(function(z){return z.key===y})||ye[y]})),Object(N.a)(I.data.filter(function(y){return!Object.keys(ye).includes(y.key)})));return{data:G,total:G.length,success:!0}}return[]})},columns:je}),Object(i.jsx)(de.a,{groups:[],id:U,visible:U,initialData:ye,onVisibleChange:function(f){return!f&&a(!1)},onFinish:function(){var H=Object(le.a)(Object(r.a)().mark(function f(c){var d,I,G,y;return Object(r.a)().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return d=c,d.type==="number"&&(d=Object(m.a)(Object(m.a)({},d),{},{value:String(d.data)})),d.type==="boolean"&&(d=Object(m.a)(Object(m.a)({},d),{},{value:d.data})),d.type==="array"&&(d=Object(m.a)(Object(m.a)({},d),{},{value:JSON.parse(d.value)})),ie.next=6,P(K,d,Number(U));case 6:I=ie.sent,G=I.success,y=I.updatedSettings,G&&(y!=null&&y.success&&Oe(y.data),a(!1),ne.current&&ne.current.reload());case 10:case"end":return ie.stop()}},f)}));return function(f){return H.apply(this,arguments)}}()})]})};w.a=Be},tneF:function(xe,w,e){"use strict";var Pe=e("sRBo"),ce=e("kaz8"),J=e("VTBJ"),ue=e("Ff2n"),_=e("nKUr"),D=e.n(_),q=e("uX+g"),N=e("q1tI"),r=e.n(N),m=e("WFLz"),p=e("adzw"),R=["options","fieldProps","proFieldProps","valueEnum"],le=r.a.forwardRef(function(o,L){var V=o.options,M=o.fieldProps,de=o.proFieldProps,x=o.valueEnum,B=Object(ue.a)(o,R);return Object(_.jsx)(p.a,Object(J.a)({ref:L,valueType:"checkbox",valueEnum:Object(q.a)(x,void 0),fieldProps:Object(J.a)({options:V},M),lightProps:Object(J.a)({labelFormatter:function(){return Object(_.jsx)(p.a,Object(J.a)({ref:L,valueType:"checkbox",mode:"read",valueEnum:Object(q.a)(x,void 0),filedConfig:{customLightMode:!0},fieldProps:Object(J.a)({options:V},M),proFieldProps:de},B))}},B.lightProps),proFieldProps:de},B))}),oe=r.a.forwardRef(function(o,L){var V=o.fieldProps,M=o.children;return Object(_.jsx)(ce.a,Object(J.a)(Object(J.a)({ref:L},V),{},{children:M}))}),re=Object(m.a)(oe,{valuePropName:"checked"}),A=re;A.Group=le,w.a=A},vtG9:function(xe,w,e){}}]);

//# sourceMappingURL=p__Settings.83b30147.async.js.map