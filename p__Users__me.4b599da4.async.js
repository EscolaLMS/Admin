(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{fWLy:function(ee,$,a){"use strict";a.r($);var ae=a("T2oS"),N=a("W9HT"),te=a("miYZ"),R=a("tsqr"),m=a("qLMh"),p=a("k1fw"),P=a("9og8"),T=a("tJVT"),o=a("q1tI"),U=a.n(o),u=a("VMEa"),h=a("Qurx"),C=a("nhC9"),F=a("VK58"),A=a("TpMl"),K=a("tMyG"),J=a("Jfn2"),B=a("Ty5D"),t=a("9kvl"),se=a("+L6B"),E=a("2/Rp"),D=a("Qiat"),H=a("xvlK"),Q=a("Xcxh"),re=a("y8nQ"),Y=a("Vl3Y"),W=a("rmhi"),e=a("nKUr"),z=function(r){var f=Object(t.l)(),O=r.visible,y=r.onVisibleChange,g=r.onFinish,M=Y.a.useForm(),n=Object(T.a)(M,1),x=n[0];return Object(o.useEffect)(function(){return function(){x.resetFields()}},[]),Object(e.jsx)(W.a,{form:x,title:f.formatMessage({id:"newSetting",defaultMessage:"newSetting"}),width:"30vw",visible:O,onVisibleChange:y,onFinish:g,children:Object(e.jsxs)(u.a.Group,{children:[Object(e.jsx)(h.a,{label:Object(e.jsx)(t.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"}),Object(e.jsx)(h.a,{label:Object(e.jsx)(t.a,{id:"value",defaultMessage:"value"}),rules:[{required:!0}],width:"md",name:"value"})]})})},X=z,Z=function(r){var f=r.user,O=r.isProfile,y=O===void 0?!1:O,g=Object(o.useRef)(),M=Object(t.l)(),n=Object(o.useState)(!1),x=Object(T.a)(n,2),V=x[0],w=x[1],i=Object(o.useState)("PATCH"),c=Object(T.a)(i,2),d=c[0],l=c[1],v=[{title:Object(e.jsx)(t.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(e.jsx)(t.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInSearch:!0}],j=Object(o.useCallback)(function(s){var b=s&&Object.entries(s).map(function(G){return{key:G[0],value:G[1]}});return b},[f]);return Object(e.jsxs)(U.a.Fragment,{children:[Object(e.jsx)(D.a,{headerTitle:M.formatMessage({id:"menu.settings"}),actionRef:g,rowKey:"id",search:!1,toolBarRender:y?function(){return[Object(e.jsxs)(E.a,{type:"primary",onClick:function(){w(-1),l("PATCH")},children:[Object(e.jsx)(H.a,{})," ",Object(e.jsx)(t.a,{id:"pages.searchTable.new"})]},"primary"),Object(e.jsxs)(E.a,{color:"yellow",type:"primary",onClick:function(){w(-1),l("PUT")},children:[Object(e.jsx)(Q.a,{})," ",Object(e.jsx)(t.a,{id:"user.settings.overwrite"})]},"primary")]}:!1,request:function(){return Object(F.e)(Number(f)).then(function(b){return b.success?{data:j(b.data)}:[]})},columns:v}),Object(e.jsx)(X,{id:V,visible:Number.isInteger(V),onVisibleChange:function(b){return b===!1&&w(!1)},onFinish:function(){var s=Object(P.a)(Object(m.a)().mark(function b(G){var L;return Object(m.a)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,Object(F.h)(Number(f),d,G);case 2:L=S.sent,L.success&&(w(!1),g.current&&g.current.reload());case 4:case"end":return S.stop()}},b)}));return function(b){return s.apply(this,arguments)}}()})]})},k=Z,q=a("YDsB"),_=a("02ly"),ne=$.default=function(){var I=Object(B.l)(),r=Object(t.l)(),f=I.tab,O=f===void 0?"general":f,y=Object(A.a)("EscolaLms\\Auth\\Models\\User"),g=Object(o.useState)(),M=Object(T.a)(g,2),n=M[0],x=M[1];Object(o.useEffect)(function(){var i=function(){var c=Object(P.a)(Object(m.a)().mark(function d(){var l;return Object(m.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,Object(F.f)();case 2:l=j.sent,l.success&&x(Object(p.a)(Object(p.a)({},l.data),{},{bio:l.data.bio||""}));case 4:case"end":return j.stop()}},d)}));return function(){return c.apply(this,arguments)}}();i()},[]);var V=Object(o.useMemo)(function(){return{onFinish:function(){var i=Object(P.a)(Object(m.a)().mark(function d(l){var v;return Object(m.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(F.i)(l);case 2:v=s.sent,R.b.success(v.message);case 4:case"end":return s.stop()}},d)}));function c(d){return i.apply(this,arguments)}return c}(),initialValues:n}},[n]),w=Object(o.useMemo)(function(){return{onFinish:function(){var i=Object(P.a)(Object(m.a)().mark(function d(l){var v;return Object(m.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(F.j)(l);case 2:v=s.sent,R.b.success(v.message);case 4:case"end":return s.stop()}},d)}));function c(d){return i.apply(this,arguments)}return c}(),initialValues:n}},[n]);return n?Object(e.jsx)(K.a,{title:Object(e.jsx)(t.a,{id:"my_profile"}),header:{breadcrumb:{routes:[{path:"users",breadcrumbName:r.formatMessage({id:"menu.Users"})},{path:"me",breadcrumbName:r.formatMessage({id:"my_profile"})},{path:String(O),breadcrumbName:r.formatMessage({id:String(O)})}]}},children:Object(e.jsxs)(C.a,{tabs:{type:"card",activeKey:O,onChange:function(c){return t.f.push("/users/me/".concat(c))}},children:[Object(e.jsx)(C.a.TabPane,{tab:Object(e.jsx)(t.a,{id:"general"}),children:Object(e.jsxs)(u.a,Object(p.a)(Object(p.a)({},V),{},{children:[Object(e.jsxs)(u.a.Group,{children:[Object(e.jsx)(h.a,{width:"md",name:"first_name",label:Object(e.jsx)(t.a,{id:"first_name"}),tooltip:Object(e.jsx)(t.a,{id:"first_name"}),placeholder:r.formatMessage({id:"first_name"}),required:!0}),Object(e.jsx)(h.a,{width:"md",name:"last_name",label:Object(e.jsx)(t.a,{id:"last_name"}),tooltip:Object(e.jsx)(t.a,{id:"last_name"}),placeholder:r.formatMessage({id:"last_name"}),required:!0})]}),Object(e.jsx)(u.a.Group,{children:y.state==="loaded"&&y.list.map(function(i){return Object(e.jsx)(q.a,{field:i},i.id)})}),Object(e.jsx)(u.a.Group,{children:Object(e.jsxs)(u.a.Item,{name:"avatar",label:Object(e.jsx)(t.a,{id:"avatar"}),children:[n.path_avatar&&Object(e.jsx)(J.a,{path:n.path_avatar,size:600,width:200}),Object(e.jsx)(_.a,{folder:"avatars/".concat(n.id),url:"/api/profile/upload-avatar",name:"avatar",accept:"image/*",onUpload:function(c){c.success}})]})})]}))},"general"),Object(e.jsx)(C.a.TabPane,{tab:Object(e.jsx)(t.a,{id:"change_password"}),children:Object(e.jsxs)(u.a,Object(p.a)(Object(p.a)({},w),{},{children:[Object(e.jsx)(u.a.Group,{children:Object(e.jsx)(h.a.Password,{width:"md",name:"current_password",label:Object(e.jsx)(t.a,{id:"current_password"}),placeholder:r.formatMessage({id:"current_password"}),required:!0})}),Object(e.jsxs)(u.a.Group,{children:[Object(e.jsx)(h.a.Password,{width:"md",name:"new_password",label:Object(e.jsx)(t.a,{id:"new_password"}),placeholder:r.formatMessage({id:"new_password"}),required:!0}),Object(e.jsx)(h.a.Password,{width:"md",name:"new_confirm_password",label:Object(e.jsx)(t.a,{id:"new_confirm_password"}),placeholder:r.formatMessage({id:"new_confirm_password"}),required:!0})]})]}))},"change_password"),Object(e.jsx)(C.a.TabPane,{tab:Object(e.jsx)(t.a,{id:"user.settings"}),children:Object(e.jsx)(k,{user:String(n.id),isProfile:!0})},"user_settings")]})}):Object(e.jsx)(N.a,{})}}}]);
