(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"+up7":function(F,h,e){"use strict";e.d(h,"f",function(){return A}),e.d(h,"d",function(){return T}),e.d(h,"b",function(){return y}),e.d(h,"h",function(){return n}),e.d(h,"c",function(){return l}),e.d(h,"e",function(){return j}),e.d(h,"a",function(){return p}),e.d(h,"g",function(){return I});var b=e("k1fw"),P=e("9og8"),U=e("WmNS"),r=e.n(U),O=e("9kvl");function A(u,o){return m.apply(this,arguments)}function m(){return m=Object(P.a)(r.a.mark(function u(o,a){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(O.f)("/api/admin/settings",Object(b.a)({method:"GET",useCache:!1,params:Object(b.a)(Object(b.a)({},o),{},{per_page:o.pageSize,page:o.current})},a||{})));case 1:case"end":return i.stop()}},u)})),m.apply(this,arguments)}function T(u,o){return c.apply(this,arguments)}function c(){return c=Object(P.a)(r.a.mark(function u(o,a){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(O.f)("/api/admin/settings/".concat(o),Object(b.a)({method:"GET",useCache:!1},a||{})));case 1:case"end":return i.stop()}},u)})),c.apply(this,arguments)}function y(u,o){return f.apply(this,arguments)}function f(){return f=Object(P.a)(r.a.mark(function u(o,a){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(O.f)("/api/admin/settings",Object(b.a)({method:"POST",headers:{"Content-Type":"application/json"},data:o},a||{})));case 1:case"end":return i.stop()}},u)})),f.apply(this,arguments)}function n(u,o,a){return E.apply(this,arguments)}function E(){return E=Object(P.a)(r.a.mark(function u(o,a,d){return r.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",Object(O.f)("/api/admin/settings/".concat(o),Object(b.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:a},d||{})));case 1:case"end":return g.stop()}},u)})),E.apply(this,arguments)}function l(u,o){return _.apply(this,arguments)}function _(){return _=Object(P.a)(r.a.mark(function u(o,a){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(O.f)("/api/admin/settings/".concat(o),Object(b.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},a||{})));case 1:case"end":return i.stop()}},u)})),_.apply(this,arguments)}function j(u){return v.apply(this,arguments)}function v(){return v=Object(P.a)(r.a.mark(function u(o){return r.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(O.f)("/api/admin/settings/groups",Object(b.a)({method:"GET",useCache:!1},o||{})));case 1:case"end":return d.stop()}},u)})),v.apply(this,arguments)}function p(u){return t.apply(this,arguments)}function t(){return t=Object(P.a)(r.a.mark(function u(o){return r.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(O.f)("/api/admin/config",Object(b.a)({method:"GET",useCache:!1},o||{})));case 1:case"end":return d.stop()}},u)})),t.apply(this,arguments)}function I(u,o){return s.apply(this,arguments)}function s(){return s=Object(P.a)(r.a.mark(function u(o,a){var d,i;return r.a.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return d=o.key,i=o.value,M.abrupt("return",Object(O.f)("/api/admin/config",Object(b.a)({method:"POST",data:{config:[{key:d,value:i}]}},a||{})));case 2:case"end":return M.stop()}},u)})),s.apply(this,arguments)}},"5ddx":function(F,h,e){"use strict";var b=e("9og8"),P=e("+L6B"),U=e("2/Rp"),r=e("tJVT"),O=e("WmNS"),A=e.n(O),m=e("q1tI"),T=e.n(m),c=e("9kvl"),y=e("Qiat"),f=e("VK58"),n=e("xvlK"),E=e("Xcxh"),l=e("y8nQ"),_=e("Vl3Y"),j=e("rmhi"),v=e("VMEa"),p=e("Qurx"),t=e("nKUr"),I=function(d){var i=Object(c.i)(),g=d.visible,M=d.onVisibleChange,L=d.onFinish,V=_.a.useForm(),$=Object(r.a)(V,1),x=$[0];return Object(m.useEffect)(function(){return function(){x.resetFields()}},[]),Object(t.jsx)(j.a,{form:x,title:i.formatMessage({id:"newSetting",defaultMessage:"newSetting"}),width:"30vw",visible:g,onVisibleChange:M,onFinish:L,children:Object(t.jsxs)(v.b.Group,{children:[Object(t.jsx)(p.a,{label:Object(t.jsx)(c.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"}),Object(t.jsx)(p.a,{label:Object(t.jsx)(c.a,{id:"value",defaultMessage:"value"}),rules:[{required:!0}],width:"md",name:"value"})]})})},s=I,u=function(d){var i=d.user,g=d.isProfile,M=g===void 0?!1:g,L=Object(m.useRef)(),V=Object(c.i)(),$=Object(m.useState)(!1),x=Object(r.a)($,2),G=x[0],K=x[1],H=Object(m.useState)("PATCH"),Q=Object(r.a)(H,2),q=Q[0],X=Q[1],Y=[{title:Object(t.jsx)(c.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(c.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInSearch:!0}],Z=Object(m.useCallback)(function(S){var R=S&&Object.entries(S).map(function(z){return{key:z[0],value:z[1]}});return R},[i]);return Object(t.jsxs)(T.a.Fragment,{children:[Object(t.jsx)(y.a,{headerTitle:V.formatMessage({id:"menu.settings"}),actionRef:L,rowKey:"id",search:!1,toolBarRender:M?function(){return[Object(t.jsxs)(U.a,{type:"primary",onClick:function(){K(-1),X("PATCH")},children:[Object(t.jsx)(n.a,{})," ",Object(t.jsx)(c.a,{id:"pages.searchTable.new"})]},"primary"),Object(t.jsxs)(U.a,{color:"yellow",type:"primary",onClick:function(){K(-1),X("PUT")},children:[Object(t.jsx)(E.a,{})," ",Object(t.jsx)(c.a,{id:"user.settings.overwrite"})]},"primary")]}:!1,request:function(){return Object(f.c)(Number(i)).then(function(R){return R.success?{data:Z(R.data)}:[]})},columns:Y}),Object(t.jsx)(s,{id:G,visible:Number.isInteger(G),onVisibleChange:function(R){return R===!1&&K(!1)},onFinish:function(){var S=Object(b.a)(A.a.mark(function R(z){var k;return A.a.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,Object(f.f)(Number(i),q,z);case 2:k=D.sent,k.success&&(K(!1),L.current&&L.current.reload());case 4:case"end":return D.stop()}},R)}));return function(R){return S.apply(this,arguments)}}()})]})},o=h.a=u},BAh9:function(F,h,e){"use strict";e.d(h,"a",function(){return A}),e.d(h,"b",function(){return T}),e.d(h,"e",function(){return y}),e.d(h,"d",function(){return n}),e.d(h,"c",function(){return E});var b=e("k1fw"),P=e("9og8"),U=e("WmNS"),r=e.n(U),O=e("9kvl");function A(_,j){return m.apply(this,arguments)}function m(){return m=Object(P.a)(r.a.mark(function _(j,v){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(O.f)("/api/admin/file/list",Object(b.a)({method:"GET",params:j},v||{})));case 1:case"end":return t.stop()}},_)})),m.apply(this,arguments)}function T(_,j){return c.apply(this,arguments)}function c(){return c=Object(P.a)(r.a.mark(function _(j,v){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(O.f)("/api/admin/file/find",Object(b.a)({method:"GET",params:j},v||{})));case 1:case"end":return t.stop()}},_)})),c.apply(this,arguments)}function y(_,j,v){return f.apply(this,arguments)}function f(){return f=Object(P.a)(r.a.mark(function _(j,v,p){var t;return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=new FormData,t.append("file[]",j),t.append("target",v),s.abrupt("return",Object(O.f)("/api/admin/file/upload",Object(b.a)({method:"POST",data:t},p||{})));case 4:case"end":return s.stop()}},_)})),f.apply(this,arguments)}var n=function(j){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(j,"&w=").concat(v)};function E(_,j){return l.apply(this,arguments)}function l(){return l=Object(P.a)(r.a.mark(function _(j,v){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(O.f)("/api/admin/file/delete",Object(b.a)({method:"DELETE",data:{url:j}},v||{})));case 1:case"end":return t.stop()}},_)})),l.apply(this,arguments)}},"DBJ/":function(F,h,e){"use strict";var b=e("y8nQ"),P=e("Vl3Y"),U=e("etVw"),r=e("q1tI"),O=e.n(r),A=e("9kvl"),m=function(f){var n=f.condition,E=f.children,l=f.wrap;return n?O.a.cloneElement(l(E)):E},T=e("nKUr"),c=function(n){var E=n.onChange,l=n.url,_=n.name,j=n.extra,v=n.accept,p=n.data,t=n.wrapInForm,I=t===void 0?!0:t,s=Object(A.i)();return p&&p[_]&&delete p[_],Object(T.jsx)(m,{condition:I,wrap:function(o){return Object(T.jsx)(P.a,{children:o})},children:Object(T.jsx)(U.a,{title:Object(T.jsx)(A.a,{id:"upload_click_here"}),placeholder:s.formatMessage({id:"upload_click_here"}),onChange:E,label:Object(T.jsx)(A.a,{id:"upload"}),max:2,fieldProps:{data:p,accept:v,name:_,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(l),extra:j})})},y=h.a=c},Jfn2:function(F,h,e){"use strict";var b=e("k1fw"),P=e("XCrF"),U=e("1GRj"),r=e("PpiC"),O=e("q1tI"),A=e.n(O),m=e("nKUr"),T=e.n(m),c=function(f){var n=f.path,E=f.size,l=f.srcSizes,_=f.alt,j=_===void 0?"LMS Image":_,v=Object(r.a)(f,["path","size","srcSizes","alt"]),p="".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(n,"&w=").concat(l?l[0]:E),t=l&&l.map(function(I){return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(n,"&w=").concat(I," ").concat(I,"w")});return Object(m.jsx)("div",{className:"escolalms-image",children:Object(m.jsx)(U.a,Object(b.a)({src:p,srcSet:t&&t.join(","),alt:j},v))})};h.a=c},etVw:function(F,h,e){"use strict";var b=e("DZo9"),P=e("8z0m"),U=e("+L6B"),r=e("2/Rp"),O=e("wx14"),A=e("q1tI"),m=e.n(A),T=e("z7Xi"),c=e("WFLz"),y=function(n,E){var l=n.fieldProps,_=n.name,j=n.action,v=n.accept,p=n.listType,t=n.title,I=t===void 0?"\u5355\u51FB\u4E0A\u4F20":t,s=n.max,u=n.icon,o=u===void 0?m.a.createElement(T.a,null):u,a=n.value,d=n.buttonProps,i=n.onChange,g=n.disabled,M=n.proFieldProps,L=n.fileList,V=(s===void 0||!a||(a==null?void 0:a.length)<s)&&(M==null?void 0:M.mode)!=="read",$=(p!=null?p:l==null?void 0:l.listType)==="picture-card";return m.a.createElement(P.a,Object(O.a)({action:j,accept:v,ref:E,name:_||"file",listType:p||"picture",fileList:L!=null?L:a},l,{onChange:function(G){var K;i==null||i(G),l==null||(K=l.onChange)===null||K===void 0||K.call(l,G)}}),V&&($?m.a.createElement("span",null,o," ",I):m.a.createElement(r.a,Object(O.a)({disabled:g||(l==null?void 0:l.disabled)},d),o,I)))};h.a=Object(c.a)(m.a.forwardRef(y),{getValueFromEvent:function(n){return n.fileList}})},fWLy:function(F,h,e){"use strict";e.r(h);var b=e("T2oS"),P=e("W9HT"),U=e("miYZ"),r=e("tsqr"),O=e("k1fw"),A=e("9og8"),m=e("tJVT"),T=e("WmNS"),c=e.n(T),y=e("q1tI"),f=e.n(y),n=e("VMEa"),E=e("Qurx"),l=e("nhC9"),_=e("VK58"),j=e("hd5d"),v=e("tMyG"),p=e("DBJ/"),t=e("Jfn2"),I=e("Ty5D"),s=e("9kvl"),u=e("5ddx"),o=e("+up7"),a=e("nKUr"),d=e.n(a);h.default=function(){var i=Object(I.g)(),g=Object(s.i)(),M=i.tab,L=M===void 0?"general":M,V=Object(y.useState)(),$=Object(m.a)(V,2),x=$[0],G=$[1],K=Object(y.useState)([]),H=Object(m.a)(K,2),Q=H[0],q=H[1],X=Object(y.useState)([]),Y=Object(m.a)(X,2),Z=Y[0],S=Y[1],R=Object(y.useCallback)(Object(A.a)(c.a.mark(function C(){var D;return c.a.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,Object(o.a)();case 2:D=B.sent,D.success&&(q(D.data.escola_auth.additional_fields_required.value),S(D.data.escola_auth.additional_fields.value));case 4:case"end":return B.stop()}},C)})),[]);Object(y.useEffect)(function(){var C=function(){var D=Object(A.a)(c.a.mark(function w(){var B;return c.a.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,Object(_.d)();case 2:B=N.sent,B.success&&G(Object(O.a)(Object(O.a)({},B.data),{},{bio:B.data.bio||""}));case 4:case"end":return N.stop()}},w)}));return function(){return D.apply(this,arguments)}}();R(),C()},[]);var z=Object(y.useMemo)(function(){return{onFinish:function(){var C=Object(A.a)(c.a.mark(function w(B){var J;return c.a.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,Object(_.g)(B);case 2:J=W.sent,r.default.success(J.message);case 4:case"end":return W.stop()}},w)}));function D(w){return C.apply(this,arguments)}return D}(),initialValues:x}},[x]),k=Object(y.useMemo)(function(){return{onFinish:function(){var C=Object(A.a)(c.a.mark(function w(B){var J;return c.a.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,Object(_.h)(B);case 2:J=W.sent,r.default.success(J.message);case 4:case"end":return W.stop()}},w)}));function D(w){return C.apply(this,arguments)}return D}(),initialValues:x}},[x]);return x?Object(a.jsx)(v.a,{title:Object(a.jsx)(s.a,{id:"my_profile"}),header:{breadcrumb:{routes:[{path:"users",breadcrumbName:g.formatMessage({id:"menu.Users"})},{path:"me",breadcrumbName:g.formatMessage({id:"my_profile"})},{path:String(L),breadcrumbName:g.formatMessage({id:String(L)})}]}},children:Object(a.jsxs)(l.a,{tabs:{type:"card",activeKey:L,onChange:function(D){return s.d.push("/users/me/".concat(D))}},children:[Object(a.jsx)(l.a.TabPane,{tab:Object(a.jsx)(s.a,{id:"general"}),children:Object(a.jsxs)(n.b,Object(O.a)(Object(O.a)({},z),{},{children:[Object(a.jsxs)(n.b.Group,{children:[Object(a.jsx)(E.a,{width:"md",name:"first_name",label:Object(a.jsx)(s.a,{id:"first_name"}),tooltip:Object(a.jsx)(s.a,{id:"first_name"}),placeholder:g.formatMessage({id:"first_name"}),required:!0}),Object(a.jsx)(E.a,{width:"md",name:"last_name",label:Object(a.jsx)(s.a,{id:"last_name"}),tooltip:Object(a.jsx)(s.a,{id:"last_name"}),placeholder:g.formatMessage({id:"last_name"}),required:!0})]}),Object(a.jsxs)(n.b.Group,{children:[Q&&Q.map(function(C){return Object(a.jsx)(E.a,{width:"md",name:C,label:Object(a.jsx)(s.a,{id:C}),tooltip:Object(a.jsx)(s.a,{id:C}),placeholder:g.formatMessage({id:C}),required:!0})}),Z&&Z.map(function(C){return Object(a.jsx)(E.a,{width:"md",name:C,label:Object(a.jsx)(s.a,{id:C}),tooltip:Object(a.jsx)(s.a,{id:C}),placeholder:g.formatMessage({id:C})})})]}),Object(a.jsx)(n.b.Item,{name:"bio",label:Object(a.jsx)(s.a,{id:"bio"}),tooltip:Object(a.jsx)(s.a,{id:"bio_tooltip"}),valuePropName:"value",children:Object(a.jsx)(j.a,{directory:"users/wysiwyg"})}),Object(a.jsx)(n.b.Group,{children:Object(a.jsxs)(n.b.Item,{name:"avatar",label:Object(a.jsx)(s.a,{id:"avatar"}),children:[x.path_avatar&&Object(a.jsx)(t.a,{path:x.path_avatar,size:600,width:200}),Object(a.jsx)(p.a,{url:"/api/profile/upload-avatar",name:"avatar",accept:"image/*",onChange:function(D){D.file.status==="done"&&D.file.response.success&&G(D.file.response.data)}})]})})]}))},"general"),Object(a.jsx)(l.a.TabPane,{tab:Object(a.jsx)(s.a,{id:"change_password"}),children:Object(a.jsxs)(n.b,Object(O.a)(Object(O.a)({},k),{},{children:[Object(a.jsx)(n.b.Group,{children:Object(a.jsx)(E.a.Password,{width:"md",name:"current_password",label:Object(a.jsx)(s.a,{id:"current_password"}),placeholder:g.formatMessage({id:"current_password"}),required:!0})}),Object(a.jsxs)(n.b.Group,{children:[Object(a.jsx)(E.a.Password,{width:"md",name:"new_password",label:Object(a.jsx)(s.a,{id:"new_password"}),placeholder:g.formatMessage({id:"new_password"}),required:!0}),Object(a.jsx)(E.a.Password,{width:"md",name:"new_confirm_password",label:Object(a.jsx)(s.a,{id:"new_confirm_password"}),placeholder:g.formatMessage({id:"new_confirm_password"}),required:!0})]})]}))},"change_password"),Object(a.jsx)(l.a.TabPane,{tab:Object(a.jsx)(s.a,{id:"user.settings"}),children:Object(a.jsx)(u.a,{user:String(x.id),isProfile:!0})},"user_settings")]})}):Object(a.jsx)(P.a,{})}},hd5d:function(F,h,e){"use strict";var b=e("9og8"),P=e("WmNS"),U=e.n(P),r=e("q1tI"),O=e.n(r),A=e("3Ef1"),m=e.n(A),T=e("BAh9"),c=e("vtG9"),y=e.n(c),f=e("9kvl"),n=e("nKUr"),E=e.n(n),l=function(j){var v=j.value,p=j.onChange,t=j.directory,I=t===void 0?"/wysiwyg":t,s=Object(f.i)();return Object(n.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(n.jsx)(m.a,{uploadImage:function(){var u=Object(b.a)(U.a.mark(function o(a){var d,i;return U.a.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,Object(T.e)(a,I);case 2:if(d=M.sent,!d.success){M.next=6;break}return i=d.data[0].name.includes("/")?d.data[0].name:"".concat(I).concat(d.data[0].name),M.abrupt("return",Object(T.d)(i,1e3));case 6:throw new Error("Error while uploading");case 7:case"end":return M.stop()}},o)}));return function(o){return u.apply(this,arguments)}}(),defaultValue:v||"",onChange:function(o){return p&&p(o())},placeholder:s.formatMessage({id:"wysiwyg_placeholder"})})})};h.a=l},vtG9:function(F,h,e){}}]);
