(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{"2ult":function(Y,h,e){"use strict";var i=e("OaEy"),o=e("2fM7"),A=e("T2oS"),p=e("W9HT"),G=e("oBTY"),C=e("tJVT"),E=e("q1tI"),K=e.n(E),S=e("ri8c"),W=e("9kvl"),U=e("nKUr"),B=e.n(U),L=function(I){var v=I.value,D=I.onChange,R=I.multiple,a=R===void 0?!1:R,r=Object(E.useState)([]),_=Object(C.a)(r,2),O=_[0],n=_[1],c=Object(E.useState)(!1),f=Object(C.a)(c,2),V=f[0],F=f[1],z=Object(E.useRef)(),y=Object(E.useRef)(),t=Object(E.useCallback)(function(l){n(function(u){return[].concat(Object(G.a)(u),Object(G.a)(l)).filter(function(b,m,x){return x.findIndex(function(g){return g.id===b.id})===m})})},[]);Object(E.useEffect)(function(){z.current=O},[O]);var J=Object(E.useCallback)(function(l){F(!0),y.current&&y.current.abort(),y.current=new AbortController,Object(S.g)({search:l},{signal:y.current.signal}).then(function(u){u.success&&t(u.data),F(!1)}).catch(function(){return F(!1)})},[t]),w=Object(E.useCallback)(function(l){J(l)},[J]);return Object(E.useEffect)(function(){var l=new AbortController;if(v){var u=Array.isArray(v)?v:[v];u.filter(function(b){var m;return!((m=z.current)!==null&&m!==void 0&&m.find(function(x){return x.id===b}))}).forEach(function(b){Object(S.f)(Number(b),{signal:l.signal}).then(function(m){m&&m.success&&t([m.data])})})}return function(){l.abort()}},[v,t]),Object(U.jsx)(o.a,{onFocus:function(){return J()},allowClear:!0,style:{width:"100%"},value:v,onChange:D,mode:a?"multiple":void 0,showSearch:!0,onSearch:w,placeholder:Object(U.jsx)(W.a,{id:"select_user_group",defaultMessage:"Select user group"}),optionFilterProp:"children",filterOption:function(u,b){if(b&&b.children){var m;return(b==null||(m=b.children)===null||m===void 0?void 0:m.toString().toLowerCase().indexOf(u.toLowerCase()))>=0}return!0},notFoundContent:V?Object(U.jsx)(p.a,{size:"small"}):null,children:O.map(function(l){return Object(U.jsx)(o.a.Option,{value:l.id,children:l.name_with_breadcrumbs},l.id)})})};h.a=L},UNho:function(Y,h,e){"use strict";e.r(h);var i=e("Mwp2"),o=e("VXEj"),A=e("+L6B"),p=e("2/Rp"),G=e("/zsF"),C=e("PArb"),E=e("tU7J"),K=e("wFql"),S=e("T2oS"),W=e("W9HT"),U=e("miYZ"),B=e("tsqr"),L=e("qLMh"),d=e("k1fw"),I=e("9og8"),v=e("tJVT"),D=e("q1tI"),R=e.n(D),a=e("VMEa"),r=e("Qurx"),_=e("F/zT"),O=e("nhC9"),n=e("ri8c"),c=e("tMyG"),f=e("9kvl"),V=e("Ty5D"),F=e("/MfK"),z=e("0WSk"),y=e("2ult"),t=e("nKUr"),J=e.n(t);h.default=function(){var w=Object(f.j)(),l=Object(V.l)(),u=l.group,b=u==="new",m=Object(D.useState)(),x=Object(v.a)(m,2),g=x[0],$=x[1],Q=Object(D.useCallback)(Object(I.a)(Object(L.a)().mark(function M(){var s;return Object(L.a)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,Object(n.f)(Number(u));case 2:s=P.sent,s.success&&$(Object(d.a)({},s.data));case 4:case"end":return P.stop()}},M)})),[u]),X=Object(D.useCallback)(function(M){$(function(s){var j;return Object(d.a)(Object(d.a)({},s),{},{users:s?s==null||(j=s.users)===null||j===void 0?void 0:j.filter(function(P){return P.id!==M}):[]})}),Object(n.d)(Number(u),M).then(function(s){s.success&&$(function(j){return Object(d.a)(Object(d.a)({},j),{},{users:s.data})})})},[u]),Z=Object(D.useCallback)(function(M){var s;!M||g!=null&&(s=g.users)!==null&&s!==void 0&&s.find(function(j){return j.id===M})||Object(n.a)(Number(u),M).then(function(j){j.success&&$(function(P){return Object(d.a)(Object(d.a)({},P),{},{users:j.data})})})},[g,u]);Object(D.useEffect)(function(){if(u==="new"){$({});return}Q()},[u,Q]);var k=Object(D.useMemo)(function(){return{onFinish:function(){var M=Object(I.a)(Object(L.a)().mark(function j(P){var N,H;return Object(L.a)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(H=Object(d.a)({},P),u!=="new"){T.next=8;break}return T.next=4,Object(n.b)(H);case 4:N=T.sent,N.success&&f.e.push("/users/groups/".concat(N.data.id)),T.next=11;break;case 8:return T.next=10,Object(n.e)(Number(u),H);case 10:N=T.sent;case 11:B.b.success(N.message);case 12:case"end":return T.stop()}},j)}));function s(j){return M.apply(this,arguments)}return s}(),initialValues:g}},[g,u]);return g?Object(t.jsx)(c.a,{title:b?Object(t.jsx)(f.a,{id:"new_user_group"}):Object(t.jsx)(f.a,{id:"edit_user_group"}),children:Object(t.jsx)(O.a,{children:Object(t.jsxs)(a.a,Object(d.a)(Object(d.a)({},k),{},{children:[Object(t.jsxs)(a.a.Group,{children:[Object(t.jsx)(r.a,{width:"md",name:"name",label:Object(t.jsx)(f.a,{id:"name"}),tooltip:Object(t.jsx)(f.a,{id:"name"}),placeholder:w.formatMessage({id:"name"}),required:!0}),Object(t.jsx)(a.a.Item,{style:{minWidth:"300px"},name:"parent_id",label:Object(t.jsx)(f.a,{id:"parent_id_group",defaultMessage:"parent_id_group"}),valuePropName:"value",children:Object(t.jsx)(y.a,{})}),Object(t.jsx)(_.a,{name:"registerable",label:Object(t.jsx)(f.a,{id:"registerable"})})]}),u!=="new"&&Object(t.jsxs)(R.a.Fragment,{children:[Object(t.jsxs)(a.a.Group,{children:[Object(t.jsx)(K.a,{children:Object(t.jsx)(f.a,{id:"add_person_to_group",defaultMessage:"Add User to group"})}),Object(t.jsx)(z.a,{onChange:function(s){return Z(Number(s))}})]}),Object(t.jsx)(C.a,{}),Object(t.jsx)(o.b,{size:"small",itemLayout:"horizontal",dataSource:g.users,renderItem:function(s){return Object(t.jsxs)(o.b.Item,{actions:[Object(t.jsxs)(p.a,{onClick:function(){return X(s.id)},type:"primary",icon:Object(t.jsx)(F.a,{}),size:"small",danger:!0,children:[" ",Object(t.jsx)(f.a,{id:"delete"})]},"delete")],children:[s.first_name," ",s.last_name," ",Object(t.jsx)("small",{children:s.email})]})}})]}),Object(t.jsx)(C.a,{})]}))})}):Object(t.jsx)(W.a,{})}},ri8c:function(Y,h,e){"use strict";e.d(h,"g",function(){return G}),e.d(h,"f",function(){return E}),e.d(h,"e",function(){return S}),e.d(h,"b",function(){return U}),e.d(h,"c",function(){return L}),e.d(h,"a",function(){return I}),e.d(h,"d",function(){return D});var i=e("qLMh"),o=e("k1fw"),A=e("9og8"),p=e("9kvl");function G(a,r){return C.apply(this,arguments)}function C(){return C=Object(A.a)(Object(i.a)().mark(function a(r,_){return Object(i.a)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(p.g)("/api/admin/user-groups",Object(o.a)({params:Object(o.a)(Object(o.a)({},r),{},{per_page:r.pageSize,page:r.current,search:r.search?r.search:void 0,parent_id:r.parent_id}),method:"GET",useCache:!1},_||{})));case 1:case"end":return n.stop()}},a)})),C.apply(this,arguments)}function E(a,r){return K.apply(this,arguments)}function K(){return K=Object(A.a)(Object(i.a)().mark(function a(r,_){return Object(i.a)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(p.g)("/api/admin/user-groups/".concat(r),Object(o.a)({method:"GET",useCache:!1},_||{})));case 1:case"end":return n.stop()}},a)})),K.apply(this,arguments)}function S(a,r,_){return W.apply(this,arguments)}function W(){return W=Object(A.a)(Object(i.a)().mark(function a(r,_,O){return Object(i.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(p.g)("/api/admin/user-groups/".concat(r),Object(o.a)({data:_,method:"PUT"},O||{})));case 1:case"end":return c.stop()}},a)})),W.apply(this,arguments)}function U(a,r){return B.apply(this,arguments)}function B(){return B=Object(A.a)(Object(i.a)().mark(function a(r,_){return Object(i.a)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(p.g)("/api/admin/user-groups",Object(o.a)({data:r,method:"POST"},_||{})));case 1:case"end":return n.stop()}},a)})),B.apply(this,arguments)}function L(a,r){return d.apply(this,arguments)}function d(){return d=Object(A.a)(Object(i.a)().mark(function a(r,_){return Object(i.a)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(p.g)("/api/admin/user-groups/".concat(r),Object(o.a)({method:"DELETE"},_||{})));case 1:case"end":return n.stop()}},a)})),d.apply(this,arguments)}function I(a,r,_){return v.apply(this,arguments)}function v(){return v=Object(A.a)(Object(i.a)().mark(function a(r,_,O){return Object(i.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(p.g)("/api/admin/user-groups/".concat(r,"/members"),Object(o.a)({data:{user_id:_},method:"POST"},O||{})));case 1:case"end":return c.stop()}},a)})),v.apply(this,arguments)}function D(a,r,_){return R.apply(this,arguments)}function R(){return R=Object(A.a)(Object(i.a)().mark(function a(r,_,O){return Object(i.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(p.g)("/api/admin/user-groups/".concat(r,"/members/").concat(_),Object(o.a)({method:"DELETE"},O||{})));case 1:case"end":return c.stop()}},a)})),R.apply(this,arguments)}}}]);
