(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"+up7":function(z,h,e){"use strict";e.d(h,"f",function(){return A}),e.d(h,"d",function(){return x}),e.d(h,"b",function(){return U}),e.d(h,"h",function(){return p}),e.d(h,"c",function(){return R}),e.d(h,"e",function(){return i}),e.d(h,"a",function(){return u}),e.d(h,"g",function(){return O});var d=e("k1fw"),v=e("9og8"),n=e("WmNS"),r=e.n(n),b=e("9kvl");function A(s,f){return m.apply(this,arguments)}function m(){return m=Object(v.a)(r.a.mark(function s(f,g){return r.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(b.f)("/api/admin/settings",Object(d.a)({method:"GET",useCache:!1,params:Object(d.a)(Object(d.a)({},f),{},{per_page:f.pageSize,page:f.current})},g||{})));case 1:case"end":return c.stop()}},s)})),m.apply(this,arguments)}function x(s,f){return j.apply(this,arguments)}function j(){return j=Object(v.a)(r.a.mark(function s(f,g){return r.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(b.f)("/api/admin/settings/".concat(f),Object(d.a)({method:"GET",useCache:!1},g||{})));case 1:case"end":return c.stop()}},s)})),j.apply(this,arguments)}function U(s,f){return M.apply(this,arguments)}function M(){return M=Object(v.a)(r.a.mark(function s(f,g){return r.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(b.f)("/api/admin/settings",Object(d.a)({method:"POST",headers:{"Content-Type":"application/json"},data:f},g||{})));case 1:case"end":return c.stop()}},s)})),M.apply(this,arguments)}function p(s,f,g){return y.apply(this,arguments)}function y(){return y=Object(v.a)(r.a.mark(function s(f,g,o){return r.a.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",Object(b.f)("/api/admin/settings/".concat(f),Object(d.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:g},o||{})));case 1:case"end":return B.stop()}},s)})),y.apply(this,arguments)}function R(s,f){return C.apply(this,arguments)}function C(){return C=Object(v.a)(r.a.mark(function s(f,g){return r.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(b.f)("/api/admin/settings/".concat(f),Object(d.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},g||{})));case 1:case"end":return c.stop()}},s)})),C.apply(this,arguments)}function i(s){return l.apply(this,arguments)}function l(){return l=Object(v.a)(r.a.mark(function s(f){return r.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(b.f)("/api/admin/settings/groups",Object(d.a)({method:"GET",useCache:!1},f||{})));case 1:case"end":return o.stop()}},s)})),l.apply(this,arguments)}function u(s){return t.apply(this,arguments)}function t(){return t=Object(v.a)(r.a.mark(function s(f){return r.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(b.f)("/api/admin/config",Object(d.a)({method:"GET",useCache:!1},f||{})));case 1:case"end":return o.stop()}},s)})),t.apply(this,arguments)}function O(s,f){return E.apply(this,arguments)}function E(){return E=Object(v.a)(r.a.mark(function s(f,g){var o,c;return r.a.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return o=f.key,c=f.value,F.abrupt("return",Object(b.f)("/api/admin/config",Object(d.a)({method:"POST",data:{config:[{key:o,value:c}]}},g||{})));case 2:case"end":return F.stop()}},s)})),E.apply(this,arguments)}},"5ddx":function(z,h,e){"use strict";var d=e("9og8"),v=e("+L6B"),n=e("2/Rp"),r=e("tJVT"),b=e("WmNS"),A=e.n(b),m=e("q1tI"),x=e.n(m),j=e("9kvl"),U=e("Qiat"),M=e("VK58"),p=e("xvlK"),y=e("Xcxh"),R=e("y8nQ"),C=e("Vl3Y"),i=e("rmhi"),l=e("VMEa"),u=e("Qurx"),t=e("nKUr"),O=function(o){var c=Object(j.i)(),B=o.visible,F=o.onVisibleChange,J=o.onFinish,Z=C.a.useForm(),k=Object(r.a)(Z,1),w=k[0];return Object(m.useEffect)(function(){return function(){w.resetFields()}},[]),Object(t.jsx)(i.a,{form:w,title:c.formatMessage({id:"newSetting",defaultMessage:"newSetting"}),width:"30vw",visible:B,onVisibleChange:F,onFinish:J,children:Object(t.jsxs)(l.b.Group,{children:[Object(t.jsx)(u.a,{label:Object(t.jsx)(j.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"}),Object(t.jsx)(u.a,{label:Object(t.jsx)(j.a,{id:"value",defaultMessage:"value"}),rules:[{required:!0}],width:"md",name:"value"})]})})},E=O,s=function(o){var c=o.user,B=o.isProfile,F=B===void 0?!1:B,J=Object(m.useRef)(),Z=Object(j.i)(),k=Object(m.useState)(!1),w=Object(r.a)(k,2),a=w[0],H=w[1],q=Object(m.useState)("PATCH"),ee=Object(r.a)(q,2),X=ee[0],V=ee[1],L=[{title:Object(t.jsx)(j.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(j.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInSearch:!0}],K=Object(m.useCallback)(function(I){var D=I&&Object.entries(I).map(function(Q){return{key:Q[0],value:Q[1]}});return D},[c]);return Object(t.jsxs)(x.a.Fragment,{children:[Object(t.jsx)(U.a,{headerTitle:Z.formatMessage({id:"menu.settings"}),actionRef:J,rowKey:"id",search:!1,toolBarRender:F?function(){return[Object(t.jsxs)(n.a,{type:"primary",onClick:function(){H(-1),V("PATCH")},children:[Object(t.jsx)(p.a,{})," ",Object(t.jsx)(j.a,{id:"pages.searchTable.new"})]},"primary"),Object(t.jsxs)(n.a,{color:"yellow",type:"primary",onClick:function(){H(-1),V("PUT")},children:[Object(t.jsx)(y.a,{})," ",Object(t.jsx)(j.a,{id:"user.settings.overwrite"})]},"primary")]}:!1,request:function(){return Object(M.d)(Number(c)).then(function(D){return D.success?{data:K(D.data)}:[]})},columns:L}),Object(t.jsx)(E,{id:a,visible:Number.isInteger(a),onVisibleChange:function(D){return D===!1&&H(!1)},onFinish:function(){var I=Object(d.a)(A.a.mark(function D(Q){var Y;return A.a.wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,Object(M.g)(Number(c),X,Q);case 2:Y=$.sent,Y.success&&(H(!1),J.current&&J.current.reload());case 4:case"end":return $.stop()}},D)}));return function(D){return I.apply(this,arguments)}}()})]})},f=h.a=s},"DBJ/":function(z,h,e){"use strict";var d=e("y8nQ"),v=e("Vl3Y"),n=e("etVw"),r=e("q1tI"),b=e.n(r),A=e("9kvl"),m=e("qFDU"),x=e("nKUr"),j=e.n(x),U=function(p){var y=p.onChange,R=p.url,C=p.name,i=p.extra,l=p.accept,u=p.data,t=p.wrapInForm,O=t===void 0?!0:t,E=p.title,s=Object(A.i)();return u&&u[C]&&delete u[C],Object(x.jsx)(m.a,{condition:O,wrap:function(g){return Object(x.jsx)(v.a,{children:g})},children:Object(x.jsx)(n.a,{title:E||Object(x.jsx)(A.a,{id:"upload_click_here"}),placeholder:s.formatMessage({id:"upload_click_here"}),onChange:y,label:Object(x.jsx)(A.a,{id:"upload"}),max:2,fieldProps:{data:u,accept:l,name:C,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(R),extra:i})})};h.a=U},"F/zT":function(z,h,e){"use strict";var d=e("wx14"),v=e("VTBJ"),n=e("Ff2n"),r=e("q1tI"),b=e.n(r),A=e("adzw"),m=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],x=b.a.forwardRef(function(j,U){var M=j.fieldProps,p=j.unCheckedChildren,y=j.checkedChildren,R=j.proFieldProps,C=Object(n.a)(j,m);return b.a.createElement(A.a,Object(d.a)({valueType:"switch",mode:"edit",fieldProps:Object(v.a)({unCheckedChildren:p,checkedChildren:y},M),ref:U,valuePropName:"checked",proFieldProps:R,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},C))});h.a=x},"G/Ub":function(z,h,e){"use strict";e.d(h,"d",function(){return A}),e.d(h,"a",function(){return x}),e.d(h,"b",function(){return U}),e.d(h,"c",function(){return p}),e.d(h,"e",function(){return R});var d=e("k1fw"),v=e("9og8"),n=e("WmNS"),r=e.n(n),b=e("9kvl");function A(i){return m.apply(this,arguments)}function m(){return m=Object(v.a)(r.a.mark(function i(l){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(b.f)("/api/admin/roles",Object(d.a)({method:"GET",useCache:!1},l||{})));case 1:case"end":return t.stop()}},i)})),m.apply(this,arguments)}function x(i,l){return j.apply(this,arguments)}function j(){return j=Object(v.a)(r.a.mark(function i(l,u){return r.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Object(b.f)("/api/admin/roles",Object(d.a)({method:"POST",headers:{"Content-Type":"application/json"},data:l},u||{})));case 1:case"end":return O.stop()}},i)})),j.apply(this,arguments)}function U(i,l){return M.apply(this,arguments)}function M(){return M=Object(v.a)(r.a.mark(function i(l,u){return r.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Object(b.f)("/api/admin/roles/".concat(l),Object(d.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},u||{})));case 1:case"end":return O.stop()}},i)})),M.apply(this,arguments)}function p(i,l){return y.apply(this,arguments)}function y(){return y=Object(v.a)(r.a.mark(function i(l,u){return r.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Object(b.f)("/api/admin/roles/".concat(l),Object(d.a)({method:"GET",useCache:!1},u||{})));case 1:case"end":return O.stop()}},i)})),y.apply(this,arguments)}function R(i,l,u){return C.apply(this,arguments)}function C(){return C=Object(v.a)(r.a.mark(function i(l,u,t){return r.a.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",Object(b.f)("/api/admin/roles/".concat(l),Object(d.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:u},t||{})));case 1:case"end":return E.stop()}},i)})),C.apply(this,arguments)}},Jfn2:function(z,h,e){"use strict";var d=e("k1fw"),v=e("XCrF"),n=e("1GRj"),r=e("PpiC"),b=e("q1tI"),A=e.n(b),m=e("nKUr"),x=e.n(m),j=function(M){var p=M.path,y=M.size,R=M.srcSizes,C=M.alt,i=C===void 0?"LMS Image":C,l=Object(r.a)(M,["path","size","srcSizes","alt"]),u="".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(p,"&w=").concat(R?R[0]:y),t=R&&R.map(function(O){return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(p,"&w=").concat(O," ").concat(O,"w")});return Object(m.jsx)("div",{className:"escolalms-image",children:Object(m.jsx)(n.a,Object(d.a)({src:u,srcSet:t&&t.join(","),alt:i},l))})};h.a=j},tneF:function(z,h,e){"use strict";var d=e("sRBo"),v=e("kaz8"),n=e("wx14"),r=e("VTBJ"),b=e("Ff2n"),A=e("q1tI"),m=e.n(A),x=e("adzw"),j=e("uX+g"),U=e("WFLz"),M=["options","fieldProps","proFieldProps","valueEnum"],p=m.a.forwardRef(function(i,l){var u=i.options,t=i.fieldProps,O=i.proFieldProps,E=i.valueEnum,s=Object(b.a)(i,M);return m.a.createElement(x.a,Object(n.a)({ref:l,valueType:"checkbox",mode:"edit",valueEnum:Object(j.a)(E,void 0),fieldProps:Object(r.a)({options:u},t),proFieldProps:O},s))}),y=m.a.forwardRef(function(i,l){var u=i.fieldProps,t=i.children;return m.a.createElement(v.a,Object(n.a)({ref:l},u),t)}),R=Object(U.a)(y,{valuePropName:"checked"}),C=R;C.Group=p,h.a=C},weGn:function(z,h,e){"use strict";e.r(h);var d=e("nhC9"),v=e("Ty5D"),n=e("9kvl"),r=e("tMyG"),b=e("tU7J"),A=e("wFql"),m=e("DYRE"),x=e("zeV3"),j=e("y8nQ"),U=e("Vl3Y"),M=e("+L6B"),p=e("2/Rp"),y=e("T2oS"),R=e("W9HT"),C=e("miYZ"),i=e("tsqr"),l=e("k1fw"),u=e("9og8"),t=e("tJVT"),O=e("WmNS"),E=e.n(O),s=e("q1tI"),f=e.n(s),g=e("VMEa"),o=e("Qurx"),c=e("F/zT"),B=e("tneF"),F=e("VK58"),J=e("DBJ/"),Z=e("Jfn2"),k=e("G/Ub"),w=e("+up7"),a=e("nKUr"),H=function(X){var V,L=X.isNew,K=Object(n.i)(),I=Object(v.g)(),D=I.user,Q=Object(s.useState)(),Y=Object(t.a)(Q,2),N=Y[0],$=Y[1],ce=Object(s.useState)(),te=Object(t.a)(ce,2),ne=te[0],oe=te[1],ue=Object(s.useState)([]),re=Object(t.a)(ue,2),de=re[0],me=re[1],je=Object(s.useState)([]),se=Object(t.a)(je,2),ie=se[0],Oe=se[1],le=Object(s.useCallback)(Object(u.a)(E.a.mark(function T(){var P;return E.a.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,Object(F.k)(Number(D));case 2:P=S.sent,P.success&&$(Object(l.a)(Object(l.a)({},P.data),{},{bio:P.data.bio||""}));case 4:case"end":return S.stop()}},T)})),[D]),fe=Object(s.useCallback)(Object(u.a)(E.a.mark(function T(){var P,_;return E.a.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,Object(k.d)();case 2:return P=W.sent,W.next=5,P;case 5:_=W.sent,_.success&&oe(_.data);case 7:case"end":return W.stop()}},T)})),[D]),he=Object(s.useCallback)(Object(u.a)(E.a.mark(function T(){var P;return E.a.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,Object(w.a)();case 2:P=S.sent,P.success&&(me(P.data.escola_auth.additional_fields_required.value),Oe(P.data.escola_auth.additional_fields.value));case 4:case"end":return S.stop()}},T)})),[]),ve=function(){Object(F.c)(Number(D)).then(function(P){P.success&&(i.default.success(P.message),$(function(_){return Object(l.a)(Object(l.a)({},_),{},{avatar:"",path_avatar:""})}))}).catch(function(P){i.default.error(P.data.message)})};Object(s.useEffect)(function(){if(fe(),he(),L){$({});return}le()},[D,le]);var be=Object(s.useMemo)(function(){return{onFinish:function(){var T=Object(u.a)(E.a.mark(function _(S){var W,ae;return E.a.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(ae=Object(l.a)(Object(l.a)({},S),{},{bio:S.bio?S.bio:void 0}),!L){G.next=8;break}return G.next=4,Object(F.a)(ae);case 4:W=G.sent,W.success&&n.d.push("/users/".concat(W.data.id,"/user_info")),G.next=11;break;case 8:return G.next=10,Object(F.j)(Number(D),ae);case 10:W=G.sent;case 11:i.default.success(W.message);case 12:case"end":return G.stop()}},_)}));function P(_){return T.apply(this,arguments)}return P}(),initialValues:N}},[N,D]);return N?Object(a.jsxs)(g.b,Object(l.a)(Object(l.a)({},be),{},{children:[Object(a.jsxs)(g.b.Group,{children:[Object(a.jsx)(o.a,{width:"md",name:"first_name",label:Object(a.jsx)(n.a,{id:"first_name"}),tooltip:Object(a.jsx)(n.a,{id:"first_name"}),placeholder:K.formatMessage({id:"first_name"}),required:!0}),Object(a.jsx)(o.a,{width:"md",name:"last_name",label:Object(a.jsx)(n.a,{id:"last_name"}),tooltip:Object(a.jsx)(n.a,{id:"last_name"}),placeholder:K.formatMessage({id:"last_name"}),required:!0}),Object(a.jsx)(o.a,{width:"md",name:"email",label:Object(a.jsx)(n.a,{id:"email"}),tooltip:Object(a.jsx)(n.a,{id:"email"}),placeholder:K.formatMessage({id:"email"}),required:!0}),Object(a.jsx)(o.a.Password,{width:"md",name:"password",label:Object(a.jsx)(n.a,{id:"password"}),tooltip:Object(a.jsx)(n.a,{id:"password"}),placeholder:K.formatMessage({id:"password"}),required:L}),!L&&Object(a.jsxs)(x.b,{direction:"vertical",children:[!((V=N.roles)!==null&&V!==void 0&&V.includes("admin"))&&Object(a.jsx)(c.a,{initialValue:N.is_active,name:"email_verified",label:Object(a.jsx)(n.a,{id:"is_email_verified"})}),Object(a.jsx)(U.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(P){return P.getFieldValue("email_verified")?Object(a.jsx)(f.a.Fragment,{}):Object(a.jsx)(p.a,{size:"small",onClick:function(){Object(F.f)(P.getFieldValue("email")).then(function(){i.default.success(K.formatMessage({id:"email_resend"}))})},children:Object(a.jsx)(n.a,{id:"resend"})})}})]}),Object(a.jsx)(c.a,{name:"is_active",label:Object(a.jsx)(n.a,{id:"is_active"})}),ne&&Object(a.jsx)(B.a.Group,{name:"roles",layout:"horizontal",label:Object(a.jsx)(n.a,{id:"roles"}),options:ne.filter(function(T){return T.guard_name!=="web"}).map(function(T){return T.name})})]}),Object(a.jsx)(g.b.Group,{children:ie&&ie.map(function(T){return Object(a.jsx)(o.a,{required:de.includes(T),width:"md",name:T,label:Object(a.jsx)(n.a,{id:T}),tooltip:Object(a.jsx)(n.a,{id:T}),placeholder:K.formatMessage({id:T})})})}),!L&&Object(a.jsxs)(g.b.Group,{children:[Object(a.jsx)(g.b.Item,{name:"avatar",label:Object(a.jsx)(n.a,{id:"avatar"}),children:N.path_avatar?Object(a.jsx)(Z.a,{path:N.path_avatar,size:600,width:200}):Object(a.jsx)(A.a,{children:Object(a.jsx)(n.a,{id:"avatar_placeholder"})})}),Object(a.jsx)(U.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(J.a,{wrapInForm:!1,url:"/api/admin/users/".concat(D,"/avatar"),name:"avatar",accept:"image/*",onChange:function(_){_.file.status==="done"&&_.file.response.success&&$(_.file.response.data)}}),Object(a.jsx)(p.a,{danger:!0,onClick:ve,children:Object(a.jsx)(n.a,{id:"delete"})})]})}})]})]})):Object(a.jsx)(R.a,{})},q=e("5ddx"),ee=h.default=function(){var X=Object(v.g)(),V=Object(n.i)(),L=X.tab,K=L===void 0?"user_info":L,I=X.user,D=typeof I=="undefined";return Object(a.jsx)(r.a,{title:Object(a.jsx)(n.a,{id:"settings"}),header:{breadcrumb:{routes:[{path:"/users/".concat(I,"/user_info"),breadcrumbName:V.formatMessage({id:"menu.Settings"})},{path:String(K),breadcrumbName:String(K)}]}},children:Object(a.jsxs)(d.a,{tabs:{type:"card",activeKey:K,onChange:function(Y){return n.d.push("/users/".concat(I,"/").concat(Y))}},children:[Object(a.jsx)(d.a.TabPane,{tab:D?Object(a.jsx)(n.a,{id:"new_user"}):Object(a.jsx)(n.a,{id:"edit_user"}),children:Object(a.jsx)(H,{isNew:D})},"user_info"),!D&&Object(a.jsx)(d.a.TabPane,{tab:Object(a.jsx)("span",{children:Object(a.jsx)(n.a,{id:"user.settings"})}),children:I&&Object(a.jsx)(q.a,{user:I,isProfile:!1})},"settings")]})})}}}]);
