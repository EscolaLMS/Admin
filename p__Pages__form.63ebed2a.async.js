(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[4254],{19411:function(O,d,e){"use strict";e.d(d,{ZP:function(){return t}});var E=e(15009),a=e.n(E),P=e(99289),i=e.n(P),p=e(17578),l=e(2800),s=e.n(l),g=e(67294),f=e(80854),D=e(85893),c=function(M){var m=M.attrs,u=m.href,_=u.split("/").pop();return(0,D.jsx)("p",{children:(0,D.jsx)("a",{rel:"noreferrer",href:u,target:"_blank",children:_})})},v=function(M){var m=M.value,u=M.onChange,_=M.directory,o=_===void 0?"/wysiwyg":_,h=(0,f.useIntl)();return(0,D.jsx)("div",{className:"form-wysiwyg-markdown",children:(0,D.jsx)(s(),{excludeBlockMenuItems:["Sketch"],embeds:[{matcher:function(){return!0},component:c}],uploadImage:function(){var n=i()(a()().mark(function r(b){var R,y;return a()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,p.ws)(b,o);case 2:if(R=A.sent,!R.success){A.next=8;break}if(!b.type.includes("image/")){A.next=7;break}return y=R.data[0].name.includes("/")?R.data[0].name:"".concat(o).concat(R.data[0].name),A.abrupt("return",(0,p.pV)(y,1e3));case 7:return A.abrupt("return",R.data[0].url);case 8:throw new Error("Error while uploading");case 9:case"end":return A.stop()}},r)}));return function(r){return n.apply(this,arguments)}}(),defaultValue:m||"",onChange:function(r){return u&&u(r())},placeholder:h.formatMessage({id:"wysiwyg_placeholder"})})})},t=v},74603:function(O,d,e){"use strict";e.r(d);var E=e(15009),a=e.n(E),P=e(97857),i=e.n(P),p=e(99289),l=e.n(p),s=e(5574),g=e.n(s),f=e(53893),D=e(78715),c=e(952),v=e(5966),t=e(52688),j=e(2453),M=e(74330),m=e(67294),u=e(19411),_=e(74453),o=e(81587),h=e(29614),n=e(80854),r=e(85893);d.default=function(){var b=(0,n.useIntl)(),R=(0,n.useParams)(),y=R.page,K=y==="new",A=(0,h.f)(b),k=(0,m.useState)(),x=g()(k,2),L=x[0],F=x[1],G=c.ZP.useForm(),Z=g()(G,1),S=Z[0],$=(0,m.useCallback)(l()(a()().mark(function U(){var w;return a()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,f.Md)(Number(y));case 2:w=C.sent,w.success&&F(i()(i()({},w.data),{},{content:w.data.content||""}));case 4:case"end":return C.stop()}},U)})),[y]);(0,m.useEffect)(function(){if(y==="new"){F({active:!1});return}$()},[y,$]);var V=(0,m.useMemo)(function(){return{onFinish:function(){var U=l()(a()().mark(function W(C){var I,B;return a()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(B=i()(i()({},C),{},{bio:C.bio?C.bio:void 0}),y!=="new"){T.next=8;break}return T.next=4,(0,f.D4)(B);case 4:I=T.sent,I.success&&n.history.push("/pages/".concat(I.data.id)),T.next=11;break;case 8:return T.next=10,(0,f.T$)(Number(y),B);case 10:I=T.sent;case 11:j.ZP.success(I.message);case 12:case"end":return T.stop()}},W)}));function w(W){return U.apply(this,arguments)}return w}(),initialValues:L}},[L,y]);return L?(0,r.jsx)(_._z,{title:K?(0,r.jsx)(n.FormattedMessage,{id:"new_page"}):(0,r.jsx)(n.FormattedMessage,{id:"edit_page"}),children:(0,r.jsx)(D.ZP,{children:(0,r.jsxs)(c.ZP,i()(i()({},V),{},{form:S,onValuesChange:function(w){w.title&&S.setFieldsValue({slug:(0,o.l)(w.title)})},children:[(0,r.jsxs)(c.ZP.Group,{children:[(0,r.jsx)(v.Z,{width:"md",name:"title",label:(0,r.jsx)(n.FormattedMessage,{id:"title"}),tooltip:(0,r.jsx)(n.FormattedMessage,{id:"title"}),placeholder:b.formatMessage({id:"title"}),required:!0,rules:[{validator:A}]}),(0,r.jsx)(v.Z,{width:"md",name:"slug",label:(0,r.jsx)(n.FormattedMessage,{id:"slug"}),tooltip:(0,r.jsx)(n.FormattedMessage,{id:"slug_tooltip"}),placeholder:b.formatMessage({id:"slug"}),disabled:!0,required:!0,rules:[{validator:A}]}),(0,r.jsx)(t.Z,{name:"active",label:(0,r.jsx)(n.FormattedMessage,{id:"is_active"})})]}),(0,r.jsx)(c.ZP.Item,{name:"content",label:(0,r.jsx)(n.FormattedMessage,{id:"content"}),tooltip:(0,r.jsx)(n.FormattedMessage,{id:"content_tooltip"}),valuePropName:"value",required:!0,rules:[{validator:A}],children:(0,r.jsx)(u.ZP,{directory:"pages/".concat(y,"/wysiwyg")})})]}))})}):(0,r.jsx)(M.Z,{})}},17578:function(O,d,e){"use strict";e.d(d,{Od:function(){return M},QZ:function(){return g},ht:function(){return D},pV:function(){return j},ws:function(){return v}});var E=e(15009),a=e.n(E),P=e(97857),i=e.n(P),p=e(99289),l=e.n(p),s=e(80854);function g(u,_){return f.apply(this,arguments)}function f(){return f=l()(a()().mark(function u(_,o){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,s.request)("/api/admin/file/list",i()({method:"GET",params:_},o||{})));case 1:case"end":return n.stop()}},u)})),f.apply(this,arguments)}function D(u,_){return c.apply(this,arguments)}function c(){return c=l()(a()().mark(function u(_,o){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,s.request)("/api/admin/file/find",i()({method:"GET",params:_},o||{})));case 1:case"end":return n.stop()}},u)})),c.apply(this,arguments)}function v(u,_,o){return t.apply(this,arguments)}function t(){return t=l()(a()().mark(function u(_,o,h){var n;return a()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return n=new FormData,n.append("file[]",_),n.append("target",o),b.abrupt("return",(0,s.request)("/api/admin/file/upload",i()({method:"POST",data:n},h||{})));case 4:case"end":return b.stop()}},u)})),t.apply(this,arguments)}var j=function(_){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/images/img?path=").concat(_,"&w=").concat(o)};function M(u,_){return m.apply(this,arguments)}function m(){return m=l()(a()().mark(function u(_,o){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,s.request)("/api/admin/file/delete",i()({method:"DELETE",data:{url:_}},o||{})));case 1:case"end":return n.stop()}},u)})),m.apply(this,arguments)}},53893:function(O,d,e){"use strict";e.d(d,{CT:function(){return m},D4:function(){return v},L1:function(){return g},Md:function(){return D},T$:function(){return j}});var E=e(15009),a=e.n(E),P=e(97857),i=e.n(P),p=e(99289),l=e.n(p),s=e(80854);function g(_,o){return f.apply(this,arguments)}function f(){return f=l()(a()().mark(function _(o,h){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,s.request)("/api/admin/pages",i()({method:"GET",useCache:!1,params:o},h||{})));case 1:case"end":return r.stop()}},_)})),f.apply(this,arguments)}function D(_,o){return c.apply(this,arguments)}function c(){return c=l()(a()().mark(function _(o,h){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,s.request)("/api/admin/pages/".concat(o),i()({method:"GET"},h||{})));case 1:case"end":return r.stop()}},_)})),c.apply(this,arguments)}function v(_,o){return t.apply(this,arguments)}function t(){return t=l()(a()().mark(function _(o,h){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,s.request)("/api/admin/pages",i()({method:"POST",headers:{"Content-Type":"application/json"},data:o},h||{})));case 1:case"end":return r.stop()}},_)})),t.apply(this,arguments)}function j(_,o,h){return M.apply(this,arguments)}function M(){return M=l()(a()().mark(function _(o,h,n){return a()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,s.request)("/api/admin/pages/".concat(o),i()({method:"PATCH",headers:{"Content-Type":"application/json"},data:h},n||{})));case 1:case"end":return b.stop()}},_)})),M.apply(this,arguments)}function m(_,o){return u.apply(this,arguments)}function u(){return u=l()(a()().mark(function _(o,h){return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,s.request)("/api/admin/pages/".concat(o),i()({method:"DELETE",headers:{"Content-Type":"application/json"}},h||{})));case 1:case"end":return r.stop()}},_)})),u.apply(this,arguments)}},81587:function(O,d,e){"use strict";e.d(d,{l:function(){return E}});var E=function(P){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"-",p=P.toString().toLowerCase().trim(),l=[{to:"a",from:"[\xC0\xC1\xC2\xC3\xC5\xC6\u0100\u0102\u0104\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6]"},{to:"ae",from:"[\xC4]"},{to:"c",from:"[\xC7\u0106\u0108\u010C]"},{to:"d",from:"[\xD0\u010E\u0110\xDE]"},{to:"e",from:"[\xC8\xC9\xCA\xCB\u0112\u0114\u0116\u0118\u011A\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6]"},{to:"g",from:"[\u011C\u011E\u0122\u01F4]"},{to:"h",from:"[\u0124\u1E26]"},{to:"i",from:"[\xCC\xCD\xCE\xCF\u0128\u012A\u012E\u0130\u1EC8\u1ECA]"},{to:"j",from:"[\u0134]"},{to:"ij",from:"[\u0132]"},{to:"k",from:"[\u0136]"},{to:"l",from:"[\u0139\u013B\u013D\u0141]"},{to:"m",from:"[\u1E3E]"},{to:"n",from:"[\xD1\u0143\u0145\u0147]"},{to:"o",from:"[\xD2\xD3\xD4\xD5\xD8\u014C\u014E\u0150\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u01EA\u01EC\u01A0]"},{to:"oe",from:"[\u0152\xD6]"},{to:"p",from:"[\u1E55]"},{to:"r",from:"[\u0154\u0156\u0158]"},{to:"s",from:"[\u015A\u015C\u015E\u0160]"},{to:"ss",from:"[\xDF]"},{to:"t",from:"[\u0162\u0164]"},{to:"u",from:"[\xD9\xDA\xDB\u0168\u016A\u016C\u016E\u0170\u0172\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u01AF]"},{to:"ue",from:"[\xDC]"},{to:"w",from:"[\u1E82\u0174\u1E80\u1E84]"},{to:"x",from:"[\u1E8D]"},{to:"y",from:"[\xDD\u0176\u0178\u1EF2\u1EF4\u1EF6\u1EF8]"},{to:"z",from:"[\u0179\u017B\u017D]"},{to:"-",from:"[\xB7/_,:;']"}];return l.forEach(function(s){p=p.replace(new RegExp(s.from,"gi"),s.to)}),p=p.toString().toLowerCase().replace(/\s+/g,"-").replace(/&/g,"-and-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),typeof i!="undefined"&&i!=="-"&&(p=p.replace(/-/g,i)),p}},29614:function(O,d,e){"use strict";e.d(d,{f:function(){return p}});var E=e(15009),a=e.n(E),P=e(99289),i=e.n(P),p=function(s){return function(){var g=i()(a()().mark(function f(D,c){return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(c){t.next=2;break}return t.abrupt("return",Promise.reject(new Error(s.formatMessage({id:"field_required",defaultMessage:"field_required"}))));case 2:return t.abrupt("return",Promise.resolve());case 3:case"end":return t.stop()}},f)}));return function(f,D){return g.apply(this,arguments)}}()}},20640:function(O,d,e){"use strict";var E=e(11742),a={"text/plain":"Text","text/html":"Url",default:"Text"},P="Copy to clipboard: #{key}, Enter";function i(l){var s=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return l.replace(/#{\s*key\s*}/g,s)}function p(l,s){var g,f,D,c,v,t,j=!1;s||(s={}),g=s.debug||!1;try{D=E(),c=document.createRange(),v=document.getSelection(),t=document.createElement("span"),t.textContent=l,t.ariaHidden="true",t.style.all="unset",t.style.position="fixed",t.style.top=0,t.style.clip="rect(0, 0, 0, 0)",t.style.whiteSpace="pre",t.style.webkitUserSelect="text",t.style.MozUserSelect="text",t.style.msUserSelect="text",t.style.userSelect="text",t.addEventListener("copy",function(m){if(m.stopPropagation(),s.format)if(m.preventDefault(),typeof m.clipboardData=="undefined"){g&&console.warn("unable to use e.clipboardData"),g&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var u=a[s.format]||a.default;window.clipboardData.setData(u,l)}else m.clipboardData.clearData(),m.clipboardData.setData(s.format,l);s.onCopy&&(m.preventDefault(),s.onCopy(m.clipboardData))}),document.body.appendChild(t),c.selectNodeContents(t),v.addRange(c);var M=document.execCommand("copy");if(!M)throw new Error("copy command was unsuccessful");j=!0}catch(m){g&&console.error("unable to copy using execCommand: ",m),g&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(s.format||"text",l),s.onCopy&&s.onCopy(window.clipboardData),j=!0}catch(u){g&&console.error("unable to copy using clipboardData: ",u),g&&console.error("falling back to prompt"),f=i("message"in s?s.message:P),window.prompt(f,l)}}finally{v&&(typeof v.removeRange=="function"?v.removeRange(c):v.removeAllRanges()),t&&document.body.removeChild(t),D()}return j}O.exports=p},11742:function(O){O.exports=function(){var d=document.getSelection();if(!d.rangeCount)return function(){};for(var e=document.activeElement,E=[],a=0;a<d.rangeCount;a++)E.push(d.getRangeAt(a));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return d.removeAllRanges(),function(){d.type==="Caret"&&d.removeAllRanges(),d.rangeCount||E.forEach(function(P){d.addRange(P)}),e&&e.focus()}}}}]);

//# sourceMappingURL=p__Pages__form.63ebed2a.async.js.map