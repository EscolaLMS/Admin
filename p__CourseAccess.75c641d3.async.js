(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"27AM":function(re,R,e){"use strict";e.r(R);var ne=e("P2fV"),L=e("NJEC"),se=e("5Dmo"),Y=e("3S7+"),H=e("+BJd"),y=e("mr32"),u=e("k1fw"),Q=e("PpiC"),T=e("bbsP"),U=e("/wGt"),Z=e("tU7J"),w=e("wFql"),M=e("+L6B"),B=e("2/Rp"),K=e("tJVT"),m=e("qLMh"),ae=e("miYZ"),g=e("tsqr"),d=e("9og8"),X=e("/MfK"),A=e("q1tI"),W=e.n(A),c=e("9kvl"),$=e("tMyG"),C=e("Qiat"),_=e("0WSk"),F=e("sWYD"),k=e("mGZj");function N(p,l){return S.apply(this,arguments)}function S(){return S=Object(d.a)(Object(m.a)().mark(function p(l,O){return Object(m.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(c.i)("/api/admin/course-access-enquiries",Object(u.a)({method:"GET",params:Object(u.a)(Object(u.a)({},l),{},{per_page:l.pageSize,page:l.current})},O||{})));case 1:case"end":return r.stop()}},p)})),S.apply(this,arguments)}function V(p,l){return D.apply(this,arguments)}function D(){return D=Object(d.a)(Object(m.a)().mark(function p(l,O){return Object(m.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(c.i)("/api/admin/course-access-enquiries/".concat(l),Object(u.a)({method:"DELETE"},O||{})));case 1:case"end":return r.stop()}},p)})),D.apply(this,arguments)}function P(p,l){return n.apply(this,arguments)}function n(){return n=Object(d.a)(Object(m.a)().mark(function p(l,O){return Object(m.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(c.i)("/api/admin/course-access-enquiries/approve/".concat(l),Object(u.a)({method:"POST"},O||{})));case 1:case"end":return r.stop()}},p)})),n.apply(this,arguments)}var z=e("Vpfc"),q=e("A6KM"),t=e("nKUr"),ee=["type","defaultRender"],s=["type","defaultRender"],j=function(){var p=Object(d.a)(Object(m.a)().mark(function l(O){return Object(m.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",V(O).then(function(i){return i.success&&g.b.success(i.message),!0}));case 1:case"end":return r.stop()}},l)}));return function(O){return p.apply(this,arguments)}}(),v=function(l){var O=l.data,x=Object(A.useState)(!1),r=Object(K.a)(x,2),i=r[0],a=r[1];return O&&typeof O=="object"&&Object.keys(O).length>0?Object(t.jsxs)(W.a.Fragment,{children:[Object(t.jsx)(B.a,{size:"small",onClick:function(){return a(!0)},children:Object(t.jsx)(c.a,{id:"show",defaultMessage:"show"})}),Object(t.jsx)(U.a,{width:700,open:i,onClose:function(){return a(!1)},children:Object(t.jsx)(w.a.Paragraph,{children:Object.keys(O).map(function(o){return Object(t.jsxs)("p",{children:[Object(t.jsx)(c.a,{id:o,defaultMessage:o}),":",Object(t.jsxs)("span",{children:[" ",O[o]]})]},o)})})})]}):Object(t.jsx)(W.a.Fragment,{})},b=function(){var l=Object(A.useRef)(),O=Object(c.l)(),x=[{title:Object(t.jsx)(c.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:Object(t.jsx)(c.a,{id:"course",defaultMessage:"course"}),dataIndex:"course_id",renderFormItem:function(i,a,o){var f=a.type,J=a.defaultRender,h=Object(Q.a)(a,ee);if(f==="form")return null;var I=o.getFieldValue("state");return Object(t.jsx)(q.a,Object(u.a)(Object(u.a)({},h),{},{state:{type:I}}))},render:function(i,a){return a.course&&a.course.id&&Object(t.jsx)(z.a,{type:"App\\Models\\Course",type_id:a.course.id},"course_id")}},{title:Object(t.jsx)(c.a,{id:"user",defaultMessage:"user"}),dataIndex:"user_id",renderFormItem:function(i,a,o){var f=a.type,J=a.defaultRender,h=Object(Q.a)(a,s);if(f==="form")return null;var I=o.getFieldValue("state");return Object(t.jsx)(_.a,Object(u.a)(Object(u.a)({},h),{},{state:{type:I}}))},render:function(i,a){var o,f;return((o=a.user)===null||o===void 0?void 0:o.id)&&Object(t.jsx)(z.a,{type:"EscolaLms\\Core\\Models\\User",type_id:(f=a.user)===null||f===void 0?void 0:f.id},"user")}},{title:Object(t.jsx)(c.a,{id:"created_at",defaultMessage:"Created at"}),dataIndex:"created_at",hideInSearch:!0,sorter:!0,render:function(i,a){return a.created_at&&Object(F.a)(new Date(a.created_at),k.a)}},{title:Object(t.jsx)(c.a,{id:"status",defaultMessage:"Status"}),dataIndex:"status",sorter:!0,valueType:"select",valueEnum:{pending:{text:Object(t.jsx)(y.a,{color:"processing",children:Object(t.jsx)(c.a,{id:"pending",defaultMessage:"pending"})}),status:"pending"},approved:{text:Object(t.jsx)(y.a,{color:"success",children:Object(t.jsx)(c.a,{id:"approved",defaultMessage:"approved"})}),status:"approved"}},render:function(i,a){return a.status==="pending"?Object(t.jsx)(B.a,{size:"small",type:"primary",onClick:function(){P(a.id).then(function(f){f.success&&l.current&&l.current.reload()})},children:Object(t.jsx)(c.a,{id:"approve",defaultMessage:"Approve"})}):Object(t.jsx)(y.a,{color:a.status==="approved"?"success":"processing",children:Object(t.jsx)(c.a,{id:a.status,defaultMessage:a.status})})}},{title:Object(t.jsx)(c.a,{id:"extra_data",defaultMessage:"Extra data"}),dataIndex:"data",hideInSearch:!0,render:function(i,a){return Object(t.jsx)(v,{data:a.data})}},{hideInSearch:!0,title:Object(t.jsx)(c.a,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",render:function(i,a){return[Object(t.jsx)(L.a,{title:Object(t.jsx)(c.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(d.a)(Object(m.a)().mark(function o(){var f;return Object(m.a)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,j(a.id);case 2:f=h.sent,f&&l.current&&l.current.reload();case 4:case"end":return h.stop()}},o)})),okText:Object(t.jsx)(c.a,{id:"yes"}),cancelText:Object(t.jsx)(c.a,{id:"no"}),children:Object(t.jsx)(Y.a,{title:Object(t.jsx)(c.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(B.a,{type:"primary",icon:Object(t.jsx)(X.a,{}),danger:!0})})},"delete")]}}];return Object(t.jsx)($.a,{children:Object(t.jsx)(C.a,{headerTitle:O.formatMessage({id:"courseAccessEnquiries",defaultMessage:"Course Access Enquiries"}),search:{layout:"vertical"},actionRef:l,rowKey:"id",request:function(i,a){var o=i.pageSize,f=i.current,J=i.course_id,h=i.status,I=i.user_id,G=a&&Object.entries(a)[0];return N({pageSize:o,current:f,course_id:J,user_id:I,status:h,order_by:G&&G[0],order:G?G[1]==="ascend"?"ASC":"DESC":void 0}).then(function(te){return te.success?{data:te.data,total:te.meta.total,success:!0}:[]})},columns:x})})},E=R.default=b},A6KM:function(re,R,e){"use strict";e.d(R,"a",function(){return m});var ne=e("OaEy"),L=e("2fM7"),se=e("T2oS"),Y=e("W9HT"),H=e("oBTY"),y=e("tJVT"),u=e("q1tI"),Q=e.n(u),T=e("H6aw"),U=e("EmS3"),Z=e("Gb5Y"),w=e("9kvl"),M=e("nKUr"),B=e.n(M),K=function(g){return g.map(function(d){return"name"in d?{id:Number(d.id),name:d.name}:{id:Number(d.id),name:d.title?d.title:""}})},m=function(g){var d=g.value,X=g.onChange,A=g.multiple,W=A===void 0?!1:A,c=g.defaultValue,$=g.modelType,C=$===void 0?"COURSE":$,_=Object(u.useState)([]),F=Object(y.a)(_,2),k=F[0],N=F[1],S=Object(u.useState)(!1),V=Object(y.a)(S,2),D=V[0],P=V[1],n=Object(u.useRef)(),z=Object(u.useCallback)(function(s){var j,v,b,E;switch(C){case"COURSE":return Object(T.e)(s,{signal:n==null||(j=n.current)===null||j===void 0?void 0:j.signal});case"WEBINAR":return Object(U.f)(s,{signal:n==null||(v=n.current)===null||v===void 0?void 0:v.signal});case"CONSULTATIONS":return Object(Z.b)(s,{signal:n==null||(b=n.current)===null||b===void 0?void 0:b.signal});default:return Object(T.e)(s,{signal:n==null||(E=n.current)===null||E===void 0?void 0:E.signal})}},[C,n]),q=Object(u.useCallback)(function(s){var j,v,b,E;switch(C){case"COURSE":return Object(T.k)(Number(s),{signal:(j=n.current)===null||j===void 0?void 0:j.signal});case"WEBINAR":return Object(U.d)(Number(s),{signal:(v=n.current)===null||v===void 0?void 0:v.signal});case"CONSULTATIONS":return Object(Z.e)(Number(s),{signal:(b=n.current)===null||b===void 0?void 0:b.signal});default:return Object(T.k)(Number(s),{signal:(E=n.current)===null||E===void 0?void 0:E.signal})}},[C,n]),t=Object(u.useCallback)(function(s){P(!0),n.current&&n.current.abort(),n.current=new AbortController,z(s?{title:s}:{}).then(function(j){j.success&&N(K(j.data)),P(!1)}).catch(function(){return P(!1)})},[C]),ee=Object(u.useCallback)(function(s){t(s)},[t]);return Object(u.useEffect)(function(){return n.current=new AbortController,d&&q(Number(d)).then(function(s){s&&s.success&&N(function(j){return[].concat(Object(H.a)(j),Object(H.a)(K([s.data])))})}),function(){n.current&&n.current.abort()}},[d,C]),Object(M.jsx)(L.a,{defaultValue:c,onFocus:function(){return t()},allowClear:!0,style:{width:"100%"},value:d,onChange:X,mode:W?"multiple":void 0,showSearch:!0,onSearch:ee,placeholder:Object(M.jsx)(w.a,{id:"select_content",defaultMessage:"select_content"}),optionFilterProp:"children",filterOption:function(j,v){if(v&&v.children){var b;return(v==null||(b=v.children)===null||b===void 0?void 0:b.toString().toLowerCase().indexOf(j.toLowerCase()))>=0}return!0},notFoundContent:D?Object(M.jsx)(Y.a,{size:"small"}):null,optionLabelProp:"label",children:k.map(function(s){return Object(M.jsx)(L.a.Option,{value:s.id,label:s.name,children:s.name},s.id)})})}}}]);

//# sourceMappingURL=p__CourseAccess.75c641d3.async.js.map