"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[3457,2803],{34201:function(Ee,de,t){t.d(de,{Z:function(){return Ce}});var he=t(5574),m=t.n(he),je=t(38925),O=t(75081),xe=t(96074),j=t(2487),G=t(25093),B=t(14726),L=t(67294),C=t(80854),se=t(19632),ce=t.n(se),ie=t(93162),U=t(55733),te=t.n(U),P=t(85893),Y=function(E){var $=E.pdfIds,q=E.onProgress,x=E.onFinished,K=E.filename,re=K===void 0?"package.zip":K,H=(0,L.useState)([]),_=m()(H,2),fe=_[0],ve=_[1],ye=(0,L.useCallback)(function(ee){var ne=new(te());ee.forEach(function(V,k){return ne.file("".concat($[k],".pdf"),V)}),ne.generateAsync({type:"blob"}).then(function(V){(0,ie.saveAs)(V,re),x&&x()})},[fe,re]);return(0,L.useEffect)(function(){$.forEach(function(ee){var ne=fetch("".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/pdfs/generate/").concat(ee),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}});ne.then(function(V){return V.blob()}).then(function(V){V&&V instanceof Blob&&ve(function(k){var oe=(k.length+1)/$.length;return q&&q(oe),oe>=1&&ye([].concat(ce()(k),[V])),[].concat(ce()(k),[V])})})})},[$]),(0,P.jsxs)("p",{children:["Progress ",fe.length," / ",$.length]})},me=Y,ae=t(15009),u=t.n(ae),o=t(97857),le=t.n(o),pe=t(99289),e=t.n(pe);function ue(z,E){return f.apply(this,arguments)}function f(){return f=e()(u()().mark(function z(E,$){return u()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",(0,C.request)("/api/admin/pdfs",le()({params:le()({},E),method:"GET"},$||{})));case 1:case"end":return x.stop()}},z)})),f.apply(this,arguments)}function g(z,E){return T.apply(this,arguments)}function T(){return T=e()(u()().mark(function z(E,$){return u()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",(0,C.request)("/api/pdfs/".concat(E),le()({method:"GET"},$||{})));case 1:case"end":return x.stop()}},z)})),T.apply(this,arguments)}function I(z,E){return p.apply(this,arguments)}function p(){return p=_asyncToGenerator(_regeneratorRuntime().mark(function z(E,$){return _regeneratorRuntime().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",request("/api/pdfs/generate/".concat(E),_objectSpread({method:"GET"},$||{})));case 1:case"end":return x.stop()}},z)})),p.apply(this,arguments)}var D=t(62235),Pe=t(69753),Te=t(19326),be=function(E){var $=E.user_id,q=E.template_id,x=E.title,K=(0,L.useState)({state:"initial"}),re=m()(K,2),H=re[0],_=re[1],fe=(0,L.useState)({state:"initial"}),ve=m()(fe,2),ye=ve[0],ee=ve[1],ne=(0,L.useState)(!1),V=m()(ne,2),k=V[0],oe=V[1];(0,L.useEffect)(function(){_({state:"loading"});var X=new AbortController;return ue({user_id:$,template_id:q},{signal:X.signal}).then(function(M){M&&M.success?_({state:"loaded",list:M.data}):M&&!M.success&&_({state:"error",error:M.message})}).catch(function(M){return _({state:"error",error:M.toString()})}),function(){X.abort()}},[]);var Me=(0,L.useCallback)(function(X){ee({state:"loading"}),g(X).then(function(M){M.success?ee({state:"loaded",data:M.data.content}):ee({state:"initial"})})},[]);return H.state==="error"?(0,P.jsx)(je.Z,{message:"Error Text",type:"error"}):H.state==="loading"||H.state==="initial"?(0,P.jsx)(O.Z,{}):(0,P.jsxs)(L.Fragment,{children:[(0,P.jsx)(xe.Z,{}),k&&(0,P.jsx)(me,{pdfIds:H.list.map(function(X){return X.id}),onFinished:function(){return oe(!1)}}),(0,P.jsx)(j.Z,{size:"small",itemLayout:"horizontal",dataSource:H.list,header:(0,P.jsxs)("div",{children:[(0,P.jsx)(C.FormattedMessage,{id:"template"})," ",x&&(0,P.jsx)(G.Z.Text,{strong:!0,children:x}),". ",(0,P.jsx)(C.FormattedMessage,{id:"generated_pdfs",defaultMessage:"Generated PDFs"})," ",(0,P.jsx)(B.ZP,{loading:k,type:"primary",onClick:function(){return oe(!0)},icon:(0,P.jsx)(Pe.Z,{}),size:"small",children:(0,P.jsx)(C.FormattedMessage,{id:"download_all",defaultMessage:"Download all PDFs"})})]}),renderItem:function(M){return(0,P.jsxs)(j.Z.Item,{actions:[(0,P.jsx)(Te.Z,{url:"/api/pdfs/generate/".concat(M.id),filename:"generated-".concat(M.id,".pdf"),size:"small",icon:(0,P.jsx)(Pe.Z,{}),type:"primary",onClick:function(){return Me(M.id)},loading:ye.state==="loading",children:(0,P.jsx)(C.FormattedMessage,{id:"download_pdf",defaultMessage:"Download PDFs"})},"download")],children:[M.title," ",(0,P.jsx)(D.Z,{type:"App\\Models\\User",type_id:M.user_id})]})}})]})},Ce=be},24541:function(Ee,de,t){t.r(de),t.d(de,{default:function(){return ze}});var he=t(15009),m=t.n(he),je=t(99289),O=t.n(je),xe=t(97857),j=t.n(xe),G=t(9783),B=t.n(G),L=t(5574),C=t.n(L),se=t(19632),ce=t.n(se),ie=t(34201),U=t(952),te=t(5966),P=t(90672),Y=t(78957),me=t(25093),ae=t(66309),u=t(67294),o=t(80854),le=t(57913),pe=t(46936),e=t(85893),ue=function(i){return(0,e.jsxs)("div",{className:"".concat(i.entity.required&&"required"),children:["@","".concat(i.entity.name)]})},f=function(i){var a=i.requiredVariables,r=i.variables,v=i.onChange,A=i.value,S=i.error,h=i.styles,c=r.map(function(s){return{name:s.substring(1),required:a.includes(s)}});return(0,e.jsxs)(u.Fragment,{children:[(0,e.jsx)(le.Z,{style:h,className:"ant-input pro-field pro-field-lg rta__textarea_wide ".concat(S.length&&"error"),onChange:function(l){return v(l.target.value)},loadingComponent:function(){return(0,e.jsx)(o.FormattedMessage,{id:"loading"})},minChar:0,value:A,itemStyle:{fontSize:"16px"},trigger:{"@":{dataProvider:function(l){return c.filter(function(n){return n.name.startsWith(l)})},component:ue,output:function(l,n){return"".concat(n).concat(l.name)}}}}),(0,e.jsx)("div",{role:"alert",className:"ant-form-item-explain-error",children:S})]})},g=f,T=t(52677),I=t.n(T),p=t(79031),D=t(4554),Pe=function(i){switch(i.toLocaleLowerCase()){case"varusername":return"John Doe";case"varcoursetitle":return"How to be an LMS Expert";case"varappname":return"Wellms Headless LMS";default:return"Lorem Ipsum"}};function Te(d){return I()(d)==="object"&&d!==null&&!Array.isArray(d)}function be(d){return Te(d)&&typeof(d==null?void 0:d.version)=="number"&&Te(d==null?void 0:d.documentProperties)&&Array.isArray(d==null?void 0:d.styles)&&Array.isArray(d==null?void 0:d.parameters)&&Array.isArray(d==null?void 0:d.docElements)}var Ce=function(i,a,r){var v=Math.max.apply(null,i.parameters?[i.parameters.map(function(h){return h.id}),i.docElements.map(function(h){return h.id})].flat():[1])+1,A=i.parameters?i.parameters.reduce(function(h,c){return j()(j()({},h),{},B()({},c.name,c))},{}):{},S=a.map(function(h){return h.replace("@","")}).reduce(function(h,c,s){return h[c]?j()(j()({},h),{},B()({},c,j()(j()({},h[c]),{},{id:v+s}))):j()(j()({},h),{},B()({},c,{id:v+s,name:c,type:"string",arrayItemType:"string",eval:!1,nullable:!r.includes(c),pattern:"",expression:"",showOnlyNameType:!1,testData:Pe(c)}))},A);return Object.assign({},i,{parameters:Object.values(S)})},z=function(i){var a=i.onTemplateSaved,r=i.reportBroTemplate,v=r===void 0?null:r,A=i.field,S=i.variables,h=i.onTemplateUpdated,c=(0,u.useRef)(null),s=function(n){var b=n.nativeEvent.target.tagName.toLowerCase();switch(b){case"span":case"button":n.nativeEvent.stopPropagation(),n.nativeEvent.preventDefault();default:return}};return(0,u.useEffect)(function(){if(c.current){var l=new p.V(c.current,{enableSpreadsheet:!1,fonts:[{name:"Open Sans",value:"Open Sans"}],defaultFont:"Open Sans",reportServerUrl:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/pdfs/reportbro/report/run"),saveCallback:function(){a(l.getReport())},cmdExecutedCallback:function(){h&&h(l.getReport())}});v&&be(v)&&l.load(Ce(v,S,A.required_variables))}},[c]),(0,e.jsx)("div",{ref:c,className:"pdf-editor",onClick:s,children:"pdf editor"})},E=z,$=function(i){var a=i.name,r=i.field,v=i.variables,A=v===void 0?[]:v,S=(0,u.useCallback)(function(s){if(s.length)return(0,e.jsx)(Y.Z,{children:(0,e.jsxs)(me.Z,{children:[(0,e.jsx)(o.FormattedMessage,{id:"templates.required_variables"}),":"," ",s.map(function(l){return(0,e.jsx)(ae.Z,{color:"red",children:l},l)})]})})},[r,a]),h=(0,u.useCallback)(function(s,l){return s&&l.every(function(n){return s.includes(n)})?Promise.resolve():Promise.reject(new Error("No required variable used"))},[r,a]),c=(0,u.useCallback)(function(){if(!r.readonly)switch(r.type){case"text":case"url":return(0,e.jsxs)(u.Fragment,{children:[(0,e.jsx)("label",{children:(0,e.jsx)(o.FormattedMessage,{id:a})}),(0,e.jsx)(U.ZP.Item,{shouldUpdate:!0,children:function(l){return(0,e.jsx)(g,{requiredVariables:r.required_variables,variables:A,value:l.getFieldValue(a),onChange:function(b){return l.setFieldsValue(B()({},a,b))},error:l.getFieldError(a),styles:{width:"100%",height:"100px"}})}}),(0,e.jsx)(te.Z,{name:a,shouldUpdate:!0,hidden:!0,rules:r.readonly?void 0:[{required:r.required,message:(0,e.jsx)(o.FormattedMessage,{id:"templates.this_required"})},{validator:function(){var s=O()(m()().mark(function n(b,F){return m()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",h(F,r.required_variables));case 1:case"end":return R.stop()}},n)}));function l(n,b){return s.apply(this,arguments)}return l}()}]}),S(r.required_variables)]});case"fabric.js":return(0,e.jsxs)(u.Fragment,{children:[(0,e.jsx)(U.ZP.Item,{shouldUpdate:!0,children:function(l){return(0,e.jsx)(E,{reportBroTemplate:l.getFieldValue(a)&&JSON.parse(l.getFieldValue(a)),variables:A,field:r,onTemplateSaved:function(b){l.setFieldsValue(B()({},a,JSON.stringify(b))),l.submit()},onTemplateUpdated:function(b){l.setFieldsValue(B()({},a,JSON.stringify(b)))}})}}),(0,e.jsx)(P.Z,{name:a,shouldUpdate:!0,width:"lg",hidden:!0})]});case"html":return(0,e.jsxs)(u.Fragment,{children:[(0,e.jsx)(P.Z,{readonly:r.readonly,shouldUpdate:!0,width:"lg",label:(0,e.jsx)(o.FormattedMessage,{id:a}),name:a,tooltip:(0,e.jsx)(o.FormattedMessage,{id:"templates.html_tooltip"}),rules:r.readonly?void 0:[{required:r.required,message:(0,e.jsx)(o.FormattedMessage,{id:"templates.this_required"})},{validator:function(){var s=O()(m()().mark(function n(b,F){return m()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",h(F,r.required_variables));case 1:case"end":return R.stop()}},n)}));function l(n,b){return s.apply(this,arguments)}return l}()}]}),S(r.required_variables)]});case"mjml":return(0,e.jsxs)(u.Fragment,{children:[(0,e.jsxs)("p",{children:[(0,e.jsx)(o.FormattedMessage,{id:"templates.to_create_template"})," ",(0,e.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://mjml.io/try-it-live",children:"https://mjml.io/try-it-live"})]}),(0,e.jsx)("code",{children:(0,e.jsx)(o.FormattedMessage,{id:"code.snippet"})}),(0,e.jsx)(U.ZP.Item,{shouldUpdate:!0,children:function(l){return(0,e.jsx)(g,{requiredVariables:r.required_variables,variables:A,value:l.getFieldValue(a),onChange:function(b){return l.setFieldsValue(B()({},a,b))},error:l.getFieldError(a),styles:{width:"100%",height:"40vh"}})}}),(0,e.jsx)(P.Z,{name:a,shouldUpdate:!0,hidden:!0,rules:r.readonly?void 0:[{required:r.required,message:(0,e.jsx)(o.FormattedMessage,{id:"templates.this_required"})},{validator:function(){var s=O()(m()().mark(function n(b,F){return m()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",h(F,r.required_variables));case 1:case"end":return R.stop()}},n)}));function l(n,b){return s.apply(this,arguments)}return l}()}]}),S(r.required_variables)]});default:return}},[r,a,A]);return(0,e.jsx)(u.Fragment,{children:c()})},q=$,x=t(40658),K=t(2453),re=t(83062),H=t(14726),_=t(44167),fe=function(i){var a=i.templateId,r=(0,u.useState)(!1),v=C()(r,2),A=v[0],S=v[1],h=(0,u.useState)([]),c=C()(h,2),s=c[0],l=c[1],n=(0,o.useIntl)(),b=(0,u.useCallback)(function(){S(!0),(0,x.MZ)(Number(a),s).then(function(F){F.success?K.ZP.success(F.message):K.ZP.error(F.message)}).catch(function(F){return K.ZP.error(F.toString())}).finally(function(){return S(!1)})},[s,a]);return(0,e.jsxs)(Y.Z,{children:[(0,e.jsx)(_.Z,{multiple:!0,value:s,onChange:function(w){return l(w)}}),(0,e.jsx)(re.Z,{title:n.formatMessage({id:"generate_pdf_users_tooltip"}),children:(0,e.jsx)(H.ZP,{loading:A,onClick:function(){return b()},disabled:!s.length,children:(0,e.jsx)(o.FormattedMessage,{id:"generate"})})})]})},ve=fe,ye=t(81424),ee=function(i){var a=i.templateId,r=(0,u.useState)(!1),v=C()(r,2),A=v[0],S=v[1],h=(0,u.useState)(),c=C()(h,2),s=c[0],l=c[1],n=(0,o.useIntl)(),b=(0,u.useCallback)(function(){S(!0),typeof s=="number"&&(0,x.zB)(Number(a),Number(s)).then(function(F){F.success?K.ZP.success(F.message):K.ZP.error(F.message)}).catch(function(F){return K.ZP.error(F.toString())}).finally(function(){return S(!1)})},[s,a]);return(0,e.jsxs)(Y.Z,{children:[(0,e.jsx)(ye.Z,{multiple:!1,value:s,onChange:function(w){return l(w)}}),(0,e.jsx)(re.Z,{title:n.formatMessage({id:"generate_pdf_products_tooltip"}),children:(0,e.jsx)(H.ZP,{loading:A,onClick:function(){return b()},disabled:!s,children:(0,e.jsx)(o.FormattedMessage,{id:"generate"})})})]})},ne=ee,V=t(31472),k=t(26271),oe=t(64317),Me=t(63434),X=t(74453),M=t(47221),Ae=t(75081),Ze=t(96074),Ie=t(38925),Le=function(i){var a=i.disabled,r=a===void 0?!1:a,v=i.id,A=i.onPreviewData,S=(0,u.useState)({state:"ready"}),h=C()(S,2),c=h[0],s=h[1],l=(0,u.useCallback)(function(){s({state:"loading"}),(0,x.RN)(v).then(function(n){n.success?(A&&A(n.data),n.data.sent&&n.data.to?s({state:"loaded",data:n.data,message:"email sent to ".concat(n.data.to)}):n.data.url?s({state:"loaded",data:n.data,message:(0,e.jsxs)(u.Fragment,{children:[(0,e.jsx)(o.FormattedMessage,{id:"download"})," ",(0,e.jsx)("a",{target:"_blank",href:n.data.url,rel:"noreferrer",children:n.data.filename})]})}):s({state:"loaded",data:n.data,message:n.message})):s({state:"error",error:n.message})}).catch(function(){s({state:"error",error:"error"})})},[v]);return(0,e.jsxs)(u.Fragment,{children:[(0,e.jsx)(H.ZP,{type:"primary",loading:c.state==="loading",disabled:r,onClick:l,children:(0,e.jsx)(o.FormattedMessage,{id:"preview"})}),c.state==="loaded"&&(0,e.jsx)(Ie.Z,{message:c.message,type:"success",closable:!0,onClose:function(){return s({state:"ready"})}}),c.state==="error"&&(0,e.jsx)(Ie.Z,{message:c.error,type:"error",closable:!0,onClose:function(){return s({state:"ready"})}})]})},Ue=Le,$e=M.Z.Panel,Be=function(i){return Object.entries(i).map(function(a){return{key:a[0],content:a[1]}})},we=function(i){return Object.assign.apply(Object,[{}].concat(ce()(i)))},Ge=function(i){var a=["name","event","default"];return Object.keys(i).filter(function(r){return!a.includes(r)}).reduce(function(r,v){return r[v]=i[v],r},{})},Fe=V.uT,ze=function(){var d=(0,o.useIntl)(),i=(0,o.useParams)(),a=i.template,r=i.id,v=r==="new",A=(0,u.useState)(!1),S=C()(A,2),h=S[0],c=S[1],s=U.ZP.useForm(),l=C()(s,1),n=l[0],b=(0,u.useState)(),F=C()(b,2),w=F[0],R=F[1],Ke=(0,u.useState)(void 0),Oe=C()(Ke,2),W=Oe[0],We=Oe[1],Je=(0,u.useState)(),De=C()(Je,2),He=De[0],Xe=De[1],Qe=(0,u.useState)(!1),Ve=C()(Qe,2),Re=Ve[0],Ye=Ve[1];(0,u.useEffect)(function(){(0,x.Rl)().then(function(Z){R(Z.success?Z.data:{})})},[]),(0,u.useEffect)(function(){var Z=n.getFieldsValue(),y=W&&Object.keys(W.sections).map(function(N){return B()({},N,W.sections[N].default_content)});y&&v&&n.setFieldsValue(j()(j()({},Z),we(y)))},[W]);var Ne=(0,u.useCallback)(function(Z){if(Z&&a){var y=w&&w[Z][Fe[a]];We(y)}Ye(Z===V.fn.ManuallyTriggeredEvent)},[w,r]),ke=(0,u.useCallback)(O()(m()().mark(function Z(){var y,N,Q;return m()().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ge.next=2,(0,x.XK)(Number(r));case 2:y=ge.sent,y.success&&(N=y.data.sections&&y.data.sections.map(function(J){return B()({},J.key,J.content)}),Q=N&&we(N),n.setFieldsValue(j()(j()({},y.data),Q)),Ne(String(y.data.event)),c(!0));case 4:case"end":return ge.stop()}},Z)})),[r,w]),qe=(0,u.useCallback)(function(){var Z=O()(m()().mark(function y(N){var Q,Se;return m()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(Se=j()(j()({},N),{},{channel:Fe[a],sections:Be(Ge(N))}),!v){J.next=8;break}return J.next=4,(0,x.Mn)(Se);case 4:Q=J.sent,Q.success&&o.history.push("/configuration/templates/".concat(a,"/").concat(Q.data.id)),J.next=11;break;case 8:return J.next=10,(0,x.QB)(Number(r),Se);case 10:Q=J.sent;case 11:c(!0),K.ZP.success(Q.message);case 13:case"end":return J.stop()}},y)}));return function(y){return Z.apply(this,arguments)}}(),[w,r]);(0,u.useEffect)(function(){v||ke()},[r,w]);var _e=(0,u.useCallback)(function(Z){return w?Object.keys(w).reduce(function(y,N){return w[N][Z]?j()(j()({},y),{},B()({},N,d.formatMessage({id:N,defaultMessage:N}))):y},{}):{}},[w]);return(0,e.jsxs)(X._z,{title:v?(0,e.jsxs)("span",{children:[(0,e.jsx)(o.FormattedMessage,{id:"new"})," ",a," ",(0,e.jsx)(o.FormattedMessage,{id:"template"})]}):(0,e.jsxs)("span",{children:[(0,e.jsx)(o.FormattedMessage,{id:"edit"})," ",a," ",(0,e.jsx)(o.FormattedMessage,{id:"template"})]}),children:[(0,e.jsx)(k.ZP,{size:"small",children:(0,e.jsxs)(U.ZP,{initialValues:{},onFinish:qe,form:n,onValuesChange:function(){var y=n.getFieldsValue();Ne(y.event),c(!1)},children:[(0,e.jsxs)(U.ZP.Group,{children:[(0,e.jsx)(te.Z,{width:"sm",name:"name",label:(0,e.jsx)(o.FormattedMessage,{id:"name"}),placeholder:d.formatMessage({id:"name"}),rules:[{required:!0,message:(0,e.jsx)(o.FormattedMessage,{id:"select"})}]}),(0,e.jsx)(oe.Z,{name:"event",width:"lg",label:(0,e.jsx)(o.FormattedMessage,{id:"event"}),valueEnum:w?_e(Fe[a]):{},placeholder:d.formatMessage({id:"event"}),rules:[{required:!0,message:(0,e.jsx)(o.FormattedMessage,{id:"select"})}]}),(0,e.jsx)(U.ZP.Item,{label:(0,e.jsx)(o.FormattedMessage,{id:"templates.set_as_default_template"}),children:(0,e.jsx)(Me.Z,{name:"default"})})]}),!v&&a!=="pdf"&&(0,e.jsxs)(U.ZP.Group,{children:[(0,e.jsx)(U.ZP.Item,{label:(0,e.jsx)(o.FormattedMessage,{id:"preview"}),children:(0,e.jsx)(Ue,{disabled:!h,id:Number(r),type:a,onPreviewData:function(y){y&&y.data&&y.data.content&&Xe(y.data.content)}})}),Re&&(0,e.jsx)(U.ZP.Item,{label:(0,e.jsx)(o.FormattedMessage,{id:"generate_pdf"}),tooltip:(0,e.jsx)(o.FormattedMessage,{id:"generate_pdf_tooltip"}),children:(0,e.jsx)(ve,{templateId:Number(r)})}),Re&&(0,e.jsx)(U.ZP.Item,{label:(0,e.jsx)(o.FormattedMessage,{id:"generate_pdf"}),tooltip:(0,e.jsx)(o.FormattedMessage,{id:"generate_pdf_tooltip"}),children:(0,e.jsx)(ne,{templateId:Number(r)})})]}),Fe[a]===V.uT.pdf&&!v&&(0,e.jsx)(M.Z,{ghost:!0,destroyInactivePanel:!0,defaultActiveKey:[-1],children:(0,e.jsx)($e,{header:(0,e.jsx)(o.FormattedMessage,{id:"generated_pdfs"}),children:(0,e.jsx)(ie.Z,{template_id:Number(r)})},0)}),!W&&!v?(0,e.jsx)(Ae.Z,{}):W&&W.sections&&Object.keys(W.sections).map(function(Z,y){var N=W.sections&&W.sections[Z];return(0,e.jsxs)(u.Fragment,{children:[y===0&&a!=="pdf"&&(0,e.jsxs)(u.Fragment,{children:[(0,e.jsx)(Ze.Z,{children:(0,e.jsx)(o.FormattedMessage,{id:"templates.tokens"})}),(0,e.jsx)(Y.Z,{children:(0,e.jsx)(me.Z,{children:W.variables.map(function(Q){return(0,e.jsx)(ae.Z,{color:"orange",children:Q},Q)})})})]}),(0,e.jsx)(Ze.Z,{}),(0,e.jsx)(q,{name:Z,field:N,variables:W.variables})]},Z)}),(0,e.jsx)(Ze.Z,{})]})}),He&&(0,e.jsx)("p",{children:"fabric preview"})]})}},40658:function(Ee,de,t){t.d(de,{MZ:function(){return le},Mn:function(){return ce},QB:function(){return U},RN:function(){return u},Rl:function(){return me},XK:function(){return C},Xc:function(){return P},zB:function(){return e},zd:function(){return B}});var he=t(15009),m=t.n(he),je=t(97857),O=t.n(je),xe=t(99289),j=t.n(xe),G=t(80854);function B(f,g){return L.apply(this,arguments)}function L(){return L=j()(m()().mark(function f(g,T){return m()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,G.request)("/api/admin/templates",O()({method:"GET",useCache:!1,params:g},T||{})));case 1:case"end":return p.stop()}},f)})),L.apply(this,arguments)}function C(f,g){return se.apply(this,arguments)}function se(){return se=j()(m()().mark(function f(g,T){return m()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,G.request)("/api/admin/templates/".concat(g),O()({method:"GET"},T||{})));case 1:case"end":return p.stop()}},f)})),se.apply(this,arguments)}function ce(f,g){return ie.apply(this,arguments)}function ie(){return ie=j()(m()().mark(function f(g,T){return m()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,G.request)("/api/admin/templates",O()({method:"POST",headers:{"Content-Type":"application/json"},data:g},T||{})));case 1:case"end":return p.stop()}},f)})),ie.apply(this,arguments)}function U(f,g,T){return te.apply(this,arguments)}function te(){return te=j()(m()().mark(function f(g,T,I){return m()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,G.request)("/api/admin/templates/".concat(g),O()({method:"PATCH",headers:{"Content-Type":"application/json"},data:T},I||{})));case 1:case"end":return D.stop()}},f)})),te.apply(this,arguments)}function P(f,g){return Y.apply(this,arguments)}function Y(){return Y=j()(m()().mark(function f(g,T){return m()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,G.request)("/api/admin/templates/".concat(g),O()({method:"DELETE",headers:{"Content-Type":"application/json"}},T||{})));case 1:case"end":return p.stop()}},f)})),Y.apply(this,arguments)}function me(f){return ae.apply(this,arguments)}function ae(){return ae=j()(m()().mark(function f(g){return m()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",(0,G.request)("/api/admin/templates/variables",O()({method:"GET"},g||{})));case 1:case"end":return I.stop()}},f)})),ae.apply(this,arguments)}function u(f,g){return o.apply(this,arguments)}function o(){return o=j()(m()().mark(function f(g,T){return m()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,G.request)("/api/admin/templates/".concat(g,"/preview"),O()({method:"GET"},T||{})));case 1:case"end":return p.stop()}},f)})),o.apply(this,arguments)}function le(f,g,T){return pe.apply(this,arguments)}function pe(){return pe=j()(m()().mark(function f(g,T,I){return m()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,G.request)("/api/admin/events/trigger-manually/".concat(g),O()({method:"POST",headers:{"Content-Type":"application/json"},data:{users:T}},I||{})));case 1:case"end":return D.stop()}},f)})),pe.apply(this,arguments)}function e(f,g,T){return ue.apply(this,arguments)}function ue(){return ue=j()(m()().mark(function f(g,T,I){return m()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,G.request)("/api/admin/products/".concat(T,"/trigger-event-manually/").concat(g),O()({method:"POST",headers:{"Content-Type":"application/json"}},I||{})));case 1:case"end":return D.stop()}},f)})),ue.apply(this,arguments)}}}]);
