"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[4519],{82061:function(Q,j,t){var c=t(1413),d=t(67294),b=t(47046),a=t(84089),x=function(I,O){return d.createElement(a.Z,(0,c.Z)((0,c.Z)({},I),{},{ref:O,icon:b.Z}))},h=d.forwardRef(x);j.Z=h},47389:function(Q,j,t){var c=t(1413),d=t(67294),b=t(27363),a=t(84089),x=function(I,O){return d.createElement(a.Z,(0,c.Z)((0,c.Z)({},I),{},{ref:O,icon:b.Z}))},h=d.forwardRef(x);j.Z=h},51042:function(Q,j,t){var c=t(1413),d=t(67294),b=t(42110),a=t(84089),x=function(I,O){return d.createElement(a.Z,(0,c.Z)((0,c.Z)({},I),{},{ref:O,icon:b.Z}))},h=d.forwardRef(x);j.Z=h},16894:function(Q,j,t){var c=t(48433);j.ZP=c.Z},27226:function(Q,j,t){t.r(j),t.d(j,{channelType:function(){return u},default:function(){return E}});var c=t(26271),d=t(74453),b=t(67294),a=t(80854),x=function(){var p,e=(0,a.useModel)("@@initialState"),l=e.initialState,m=(l==null||(p=l.currentUser)===null||p===void 0?void 0:p.roles)||[],r=(0,b.useCallback)(function(i){var v,g=l==null||(v=l.config)===null||v===void 0||(v=v.find(function(y){return y.key===i}))===null||v===void 0?void 0:v.data;return Array.isArray(m)&&Array.isArray(g)?m.every(function(y){return g.includes(y)}):typeof g=="boolean"?g:!1},[]);return{checkRoles:r}},h=t(15009),T=t.n(h),I=t(99289),O=t.n(I),J=t(5574),K=t.n(J),q=t(45919),F=t(40658),U=t(51042),w=t(47389),z=t(82061),Z=t(16894),N=t(66309),B=t(2453),Y=t(14726),W=t(83062),ee=t(86738),H=t(60943),n=t(85893),G=function(p){var e=p.templateType,l=p.channel,m=(0,b.useRef)(),r=(0,a.useIntl)(),i=(0,b.useState)(!1),v=K()(i,2),g=v[0],y=v[1],A=[{title:(0,n.jsx)(a.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:(0,n.jsx)(a.FormattedMessage,{id:"created_at",defaultMessage:"created_at"}),dataIndex:"created_at",hideInSearch:!0,sorter:!0,render:function(P,C){return C.created_at&&(0,H.WU)(new Date(C.created_at),q.Cu)}},{title:(0,n.jsx)(a.FormattedMessage,{id:"name",defaultMessage:"name"}),dataIndex:"name",hideInSearch:!1,sorter:!0},{title:(0,n.jsx)(a.FormattedMessage,{id:"event",defaultMessage:"event"}),dataIndex:"event",hideInSearch:!0,sorter:!1,render:function(P,C){return(0,n.jsx)(a.FormattedMessage,{id:C.event,defaultMessage:C.event})}},{title:(0,n.jsx)(a.FormattedMessage,{id:"templates.is_default"}),dataIndex:"default",hideInSearch:!0,valueEnum:{true:(0,n.jsx)(N.Z,{color:"success",children:(0,n.jsx)(a.FormattedMessage,{id:"yes"})}),false:(0,n.jsx)(N.Z,{color:"error",children:(0,n.jsx)(a.FormattedMessage,{id:"no"})})}}],V=(0,b.useCallback)(function(){var M=O()(T()().mark(function P(C){var $,L;return T()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return y(!0),$=B.ZP.loading((0,n.jsx)(a.FormattedMessage,{id:"loading",defaultMessage:"loading"})),_.prev=2,_.next=5,(0,F.Xc)(C).then(function(D){y(!1),D.success&&B.ZP.success(D.message)});case 5:return $(),y(!1),(L=m.current)===null||L===void 0||L.reload(),_.abrupt("return",!0);case 11:return _.prev=11,_.t0=_.catch(2),$(),B.ZP.error((0,n.jsx)(a.FormattedMessage,{id:"error",defaultMessage:"error"})),y(!1),_.abrupt("return",!1);case 17:case"end":return _.stop()}},P,null,[[2,11]])}));return function(P){return M.apply(this,arguments)}}(),[m]);return(0,n.jsx)(Z.ZP,{headerTitle:r.formatMessage({id:"templates",defaultMessage:"templates"}),loading:g,actionRef:m,rowKey:"id",search:{layout:"vertical"},toolBarRender:function(){return[(0,n.jsx)(a.Link,{to:"/configuration/templates/".concat(e,"/new"),children:(0,n.jsxs)(Y.ZP,{type:"primary",children:[(0,n.jsx)(U.Z,{})," ",(0,n.jsx)(a.FormattedMessage,{id:"new",defaultMessage:"new"})]},"primary")},"new")]},request:function(P,C){var $=P.pageSize,L=P.current,S=P.name;y(!0);var _=C&&Object.entries(C)[0];return(0,F.zd)({per_page:$,page:L,channel:l,name:S||void 0,order_by:_&&_[0],order:_?_[1]==="ascend"?"ASC":"DESC":void 0}).then(function(D){return D.success?(y(!1),{data:D.data,total:D.meta.total,success:!0}):[]})},columns:[].concat(A,[{hideInSearch:!0,title:(0,n.jsx)(a.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",render:function(P,C){return[(0,n.jsx)(a.Link,{to:"/configuration/templates/".concat(e,"/").concat(C.id),children:(0,n.jsx)(W.Z,{title:(0,n.jsx)(a.FormattedMessage,{id:"edit",defaultMessage:"edit"}),children:(0,n.jsx)(Y.ZP,{type:"primary",icon:(0,n.jsx)(w.Z,{})})})},"edit"),(0,n.jsx)(ee.Z,{title:(0,n.jsx)(a.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:function(){return V(C.id)},okText:(0,n.jsx)(a.FormattedMessage,{id:"yes"}),cancelText:(0,n.jsx)(a.FormattedMessage,{id:"no"}),children:(0,n.jsx)(W.Z,{title:(0,n.jsx)(a.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,n.jsx)(Y.ZP,{type:"primary",icon:(0,n.jsx)(z.Z,{}),danger:!0})})},"delete")]}}])})},o=G,u=function(s){return s.email="EscolaLms\\TemplatesEmail\\Core\\EmailChannel",s.pdf="EscolaLms\\TemplatesPdf\\Core\\PdfChannel",s.sms="EscolaLms\\TemplatesSms\\Core\\SmsChannel",s}({}),f=function(){var p=(0,a.useParams)(),e=p.template,l=(0,a.useAccess)(),m=x(),r=m.checkRoles,i=r("hideTemplateTab-sms"),v=r("hideTemplateTab-email");return(0,n.jsx)(d._z,{children:(0,n.jsxs)(c.ZP,{tabs:{type:"card",activeKey:e,onChange:function(y){return a.history.push("/configuration/templates/".concat(y))}},children:[!v&&(0,n.jsx)(c.ZP.TabPane,{tab:(0,n.jsx)(a.FormattedMessage,{id:"email"}),children:(0,n.jsx)(o,{templateType:"email",channel:u.email})},"email"),l.certificatesPermission&&(0,n.jsx)(c.ZP.TabPane,{tab:(0,n.jsx)(a.FormattedMessage,{id:"PDF"}),children:(0,n.jsx)(o,{templateType:"pdf",channel:u.pdf})},"pdf"),!i&&(0,n.jsx)(c.ZP.TabPane,{tab:(0,n.jsx)("span",{children:(0,n.jsx)(a.FormattedMessage,{id:"SMS"})}),children:(0,n.jsx)(o,{templateType:"sms",channel:u.sms})},"sms")]})})},E=f},40658:function(Q,j,t){t.d(j,{MZ:function(){return ee},Mn:function(){return q},QB:function(){return U},RN:function(){return Y},Rl:function(){return N},XK:function(){return J},Xc:function(){return z},zB:function(){return n},zd:function(){return I}});var c=t(15009),d=t.n(c),b=t(97857),a=t.n(b),x=t(99289),h=t.n(x),T=t(80854);function I(o,u){return O.apply(this,arguments)}function O(){return O=h()(d()().mark(function o(u,f){return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,T.request)("/api/admin/templates",a()({method:"GET",useCache:!1,params:u},f||{})));case 1:case"end":return s.stop()}},o)})),O.apply(this,arguments)}function J(o,u){return K.apply(this,arguments)}function K(){return K=h()(d()().mark(function o(u,f){return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,T.request)("/api/admin/templates/".concat(u),a()({method:"GET"},f||{})));case 1:case"end":return s.stop()}},o)})),K.apply(this,arguments)}function q(o,u){return F.apply(this,arguments)}function F(){return F=h()(d()().mark(function o(u,f){return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,T.request)("/api/admin/templates",a()({method:"POST",headers:{"Content-Type":"application/json"},data:u},f||{})));case 1:case"end":return s.stop()}},o)})),F.apply(this,arguments)}function U(o,u,f){return w.apply(this,arguments)}function w(){return w=h()(d()().mark(function o(u,f,E){return d()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,T.request)("/api/admin/templates/".concat(u),a()({method:"PATCH",headers:{"Content-Type":"application/json"},data:f},E||{})));case 1:case"end":return p.stop()}},o)})),w.apply(this,arguments)}function z(o,u){return Z.apply(this,arguments)}function Z(){return Z=h()(d()().mark(function o(u,f){return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,T.request)("/api/admin/templates/".concat(u),a()({method:"DELETE",headers:{"Content-Type":"application/json"}},f||{})));case 1:case"end":return s.stop()}},o)})),Z.apply(this,arguments)}function N(o){return B.apply(this,arguments)}function B(){return B=h()(d()().mark(function o(u){return d()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",(0,T.request)("/api/admin/templates/variables",a()({method:"GET"},u||{})));case 1:case"end":return E.stop()}},o)})),B.apply(this,arguments)}function Y(o,u){return W.apply(this,arguments)}function W(){return W=h()(d()().mark(function o(u,f){return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,T.request)("/api/admin/templates/".concat(u,"/preview"),a()({method:"GET"},f||{})));case 1:case"end":return s.stop()}},o)})),W.apply(this,arguments)}function ee(o,u,f){return H.apply(this,arguments)}function H(){return H=h()(d()().mark(function o(u,f,E){return d()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,T.request)("/api/admin/events/trigger-manually/".concat(u),a()({method:"POST",headers:{"Content-Type":"application/json"},data:{users:f}},E||{})));case 1:case"end":return p.stop()}},o)})),H.apply(this,arguments)}function n(o,u,f){return G.apply(this,arguments)}function G(){return G=h()(d()().mark(function o(u,f,E){return d()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,T.request)("/api/admin/products/".concat(f,"/trigger-event-manually/").concat(u),a()({method:"POST",headers:{"Content-Type":"application/json"}},E||{})));case 1:case"end":return p.stop()}},o)})),G.apply(this,arguments)}},66309:function(Q,j,t){t.d(j,{Z:function(){return p}});var c=t(67294),d=t(93967),b=t.n(d),a=t(98423),x=t(98787),h=t(69760),T=t(96159),I=t(45353),O=t(53124),J=t(6731),K=t(10274),q=t(14747),F=t(45503),U=t(91945);const w=e=>{const{paddingXXS:l,lineWidth:m,tagPaddingHorizontal:r,componentCls:i,calc:v}=e,g=v(r).sub(m).equal(),y=v(l).sub(m).equal();return{[i]:Object.assign(Object.assign({},(0,q.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:g,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,J.unit)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${i}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${i}-close-icon`]:{marginInlineStart:y,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${i}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},["&-checkable"]:{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${i}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},["&-hidden"]:{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:g}}),[`${i}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},z=e=>{const{lineWidth:l,fontSizeIcon:m,calc:r}=e,i=e.fontSizeSM;return(0,F.TS)(e,{tagFontSize:i,tagLineHeight:(0,J.unit)(r(e.lineHeightSM).mul(i).equal()),tagIconSize:r(m).sub(r(l).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},Z=e=>({defaultBg:new K.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var N=(0,U.I$)("Tag",e=>{const l=z(e);return w(l)},Z),B=function(e,l){var m={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&l.indexOf(r)<0&&(m[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)l.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(m[r[i]]=e[r[i]]);return m},W=c.forwardRef((e,l)=>{const{prefixCls:m,style:r,className:i,checked:v,onChange:g,onClick:y}=e,A=B(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:V,tag:M}=c.useContext(O.E_),P=D=>{g==null||g(!v),y==null||y(D)},C=V("tag",m),[$,L,S]=N(C),_=b()(C,`${C}-checkable`,{[`${C}-checkable-checked`]:v},M==null?void 0:M.className,i,L,S);return $(c.createElement("span",Object.assign({},A,{ref:l,style:Object.assign(Object.assign({},r),M==null?void 0:M.style),className:_,onClick:P})))}),ee=t(98719);const H=e=>(0,ee.Z)(e,(l,m)=>{let{textColor:r,lightBorderColor:i,lightColor:v,darkColor:g}=m;return{[`${e.componentCls}${e.componentCls}-${l}`]:{color:r,background:v,borderColor:i,"&-inverse":{color:e.colorTextLightSolid,background:g,borderColor:g},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}});var n=(0,U.bk)(["Tag","preset"],e=>{const l=z(e);return H(l)},Z);function G(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const o=(e,l,m)=>{const r=G(m);return{[`${e.componentCls}${e.componentCls}-${l}`]:{color:e[`color${m}`],background:e[`color${r}Bg`],borderColor:e[`color${r}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var u=(0,U.bk)(["Tag","status"],e=>{const l=z(e);return[o(l,"success","Success"),o(l,"processing","Info"),o(l,"error","Error"),o(l,"warning","Warning")]},Z),f=function(e,l){var m={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&l.indexOf(r)<0&&(m[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)l.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(m[r[i]]=e[r[i]]);return m};const s=c.forwardRef((e,l)=>{const{prefixCls:m,className:r,rootClassName:i,style:v,children:g,icon:y,color:A,onClose:V,bordered:M=!0,visible:P}=e,C=f(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:$,direction:L,tag:S}=c.useContext(O.E_),[_,D]=c.useState(!0),ce=(0,a.Z)(C,["closeIcon","closable"]);c.useEffect(()=>{P!==void 0&&D(P)},[P]);const ae=(0,x.o2)(A),re=(0,x.yT)(A),te=ae||re,ue=Object.assign(Object.assign({backgroundColor:A&&!te?A:void 0},S==null?void 0:S.style),v),R=$("tag",m),[de,me,pe]=N(R),fe=b()(R,S==null?void 0:S.className,{[`${R}-${A}`]:te,[`${R}-has-color`]:A&&!te,[`${R}-hidden`]:!_,[`${R}-rtl`]:L==="rtl",[`${R}-borderless`]:!M},r,i,me,pe),se=k=>{k.stopPropagation(),V==null||V(k),!k.defaultPrevented&&D(!1)},[,ge]=(0,h.Z)((0,h.w)(e),(0,h.w)(S),{closable:!1,closeIconRender:k=>{const Ce=c.createElement("span",{className:`${R}-close-icon`,onClick:se},k);return(0,T.wm)(k,Ce,X=>({onClick:ie=>{var ne;(ne=X==null?void 0:X.onClick)===null||ne===void 0||ne.call(X,ie),se(ie)},className:b()(X==null?void 0:X.className,`${R}-close-icon`)}))}}),ve=typeof C.onClick=="function"||g&&g.type==="a",le=y||null,he=le?c.createElement(c.Fragment,null,le,g&&c.createElement("span",null,g)):g,oe=c.createElement("span",Object.assign({},ce,{ref:l,className:fe,style:ue}),he,ge,ae&&c.createElement(n,{key:"preset",prefixCls:R}),re&&c.createElement(u,{key:"status",prefixCls:R}));return de(ve?c.createElement(I.Z,{component:"Tag"},oe):oe)});s.CheckableTag=W;var p=s}}]);
