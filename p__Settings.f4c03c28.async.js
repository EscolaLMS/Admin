(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"3fxf":function(ne,I,e){"use strict";var N=e("DjyN"),R=e("NUBc"),A=e("Mwp2"),d=e("VXEj"),U=e("+L6B"),M=e("2/Rp"),D=e("5NDa"),a=e("5rEg"),x=e("oBTY"),u=e("k1fw"),b=e("tJVT"),j=e("DYRE"),l=e("zeV3"),_=e("tU7J"),p=e("wFql"),c=e("q1tI"),C=e.n(c),y=e("BAh9"),O=e("/MfK"),Y=e("mAF4"),L=e("dF/Y"),$=e("9kvl"),W=e("DBJ/"),X=e("lLVY"),Z=e.n(X),f=e("nKUr"),je=e.n(f),w=function(ie){var ce=ie.directory,k=ie.onUploaded;return Object(f.jsxs)(l.b,{align:"start",children:[Object(f.jsxs)(p.a.Text,{children:[Object(f.jsx)($.a,{id:"pages.files.filesBrowser"}),Object(f.jsx)(p.a.Text,{code:!0,children:ce})]}),Object(f.jsx)(W.a,{url:"/api/admin/file/upload",name:"file[]",data:{target:ce},onChange:function(le){return le.file.status==="done"&&k(ce)}})]})},se=function(ie){var ce=ie.defaultDirectory,k=ce===void 0?"/":ce,de=ie.onFile,le=Object($.i)(),_e=Object(c.useState)({loading:!1,name:"",directory:k,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),Oe=Object(b.a)(_e,2),K=Oe[0],be=Oe[1],z=Object(c.useRef)(),ee=Object(c.useCallback)(function(F){be(function(P){return Object(u.a)(Object(u.a)({},P),{},{loading:F})})},[]),H=Object(c.useCallback)(function(F){var P,S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,fe=function(){return z.current&&z.current.abort()};return fe(),z.current=new AbortController,ee(!0),Object(y.a)({directory:F,page:S},{signal:(P=z.current)===null||P===void 0?void 0:P.signal}).then(function(q){q.success&&be(function(te){return Object(u.a)(Object(u.a)(Object(u.a)({},te),q.data),{},{data:[{url:F.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(x.a)(q.data.data.map(function(re){return Object(u.a)(Object(u.a)({},re),{},{url:re.mime==="directory"?"".concat(F,"/").concat(re.name):re.url})}))).filter(function(re){return F==="/"?re.name!=="..":!0}),directory:F,loading:!1})})}).catch(function(){return ee(!1)}),function(){fe()}},[ee]);Object(c.useEffect)(function(){return H(k)},[k,H]);var Ee=Object(c.useCallback)(function(F){ee(!0),Object(y.c)(F).then(function(){H(K.directory)}).catch(function(){ee(!1)})},[H,ee,K.directory]),he=Object(c.useCallback)(function(F,P){var S,fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,q=function(){return z.current&&z.current.abort()};return q(),z.current=new AbortController,ee(!0),Object(y.b)({directory:F,name:P,page:fe},{signal:(S=z.current)===null||S===void 0?void 0:S.signal}).then(function(te){te.success&&be(function(re){return Object(u.a)(Object(u.a)(Object(u.a)({},re),te.data),{},{data:[{url:F.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(x.a)(te.data.data.map(function(ue){return Object(u.a)(Object(u.a)({},ue),{},{url:ue.mime==="directory"?"".concat(F,"/").concat(ue.name):ue.url})}))).filter(function(ue){return F==="/"?ue.name!=="..":!0}),directory:F,loading:!1})})}).catch(function(){return ee(!1)}),function(){q()}},[ee]);return Object(f.jsxs)("div",{className:"file-browser",children:[Object(f.jsxs)("div",{className:"file-browser__header",children:[Object(f.jsx)(a.a,{placeholder:le.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(P){return be(function(S){return Object(u.a)(Object(u.a)({},S),{},{name:P.target.value})})},value:K.name}),Object(f.jsxs)("div",{children:[Object(f.jsx)(M.a,{className:"file-browser__button",onClick:function(){return H(K.directory)},children:Object(f.jsx)($.a,{id:"reset"})}),Object(f.jsx)(M.a,{className:"file-browser__button",type:"primary",onClick:function(){return he(K.directory,K.name)},children:Object(f.jsx)($.a,{id:"query"})})]})]}),Object(f.jsx)(d.b,{loading:K.loading,size:"small",itemLayout:"horizontal",dataSource:K.data,header:Object(f.jsx)(w,{directory:K.directory,onUploaded:function(P){return H(P)}}),footer:Object(f.jsx)(w,{directory:K.directory,onUploaded:function(P){return H(P)}}),renderItem:function(P){return Object(f.jsx)(d.b.Item,{actions:P.mime!=="directory"?[Object(f.jsx)(M.a,{type:"default",danger:!0,icon:Object(f.jsx)(O.a,{}),size:"small",onClick:function(){return Ee(P.url)}})]:[],children:Object(f.jsx)(d.b.Item.Meta,{avatar:P.mime==="directory"?Object(f.jsx)(M.a,{type:"primary",icon:Object(f.jsx)(Y.a,{}),size:"small",onClick:function(){return H(P.url)}}):Object(f.jsx)("a",{href:P.url,target:"_blank",children:Object(f.jsx)(M.a,{type:"default",icon:Object(f.jsx)(L.a,{}),size:"small"})}),description:Object(f.jsx)(C.a.Fragment,{children:Object(f.jsx)(M.a,{type:"text",size:"small",onClick:function(){return P.mime==="directory"?H(P.url):de&&de(P,K.directory)},children:P.name})})})})}}),Object(f.jsx)(R.a,{pageSizeOptions:[],current:K.current_page,total:K.total,pageSize:K.per_page,onChange:function(P){return H(K.directory,P)}})]})};I.a=se},"5qq5":function(ne,I,e){"use strict";var N=e("7Kak"),R=e("9yH6"),A=e("wx14"),d=e("VTBJ"),U=e("Ff2n"),M=e("q1tI"),D=e.n(M),a=e("adzw"),x=e("uX+g"),u=e("WFLz"),b=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],j=D.a.forwardRef(function(c,C){var y=c.fieldProps,O=c.options,Y=c.radioType,L=c.layout,$=c.proFieldProps,W=c.valueEnum,X=Object(U.a)(c,b);return D.a.createElement(a.a,Object(A.a)({mode:"edit",valueType:Y==="button"?"radioButton":"radio",ref:C,valueEnum:Object(x.a)(W,void 0)},X,{fieldProps:Object(d.a)({options:O,layout:L},y),proFieldProps:$,filedConfig:{customLightMode:!0}}))}),l=D.a.forwardRef(function(c,C){var y=c.fieldProps,O=c.children;return D.a.createElement(R.a,Object(A.a)({},y,{ref:C}),O)}),_=Object(u.a)(l,{valuePropName:"checked",ignoreWidth:!0}),p=_;p.Group=j,p.Button=R.a.Button,p.displayName="ProFormComponent",I.a=p},BAh9:function(ne,I,e){"use strict";e.d(I,"a",function(){return M}),e.d(I,"b",function(){return a}),e.d(I,"e",function(){return u}),e.d(I,"d",function(){return j}),e.d(I,"c",function(){return l});var N=e("k1fw"),R=e("9og8"),A=e("WmNS"),d=e.n(A),U=e("9kvl");function M(p,c){return D.apply(this,arguments)}function D(){return D=Object(R.a)(d.a.mark(function p(c,C){return d.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Object(U.f)("/api/admin/file/list",Object(N.a)({method:"GET",params:c},C||{})));case 1:case"end":return O.stop()}},p)})),D.apply(this,arguments)}function a(p,c){return x.apply(this,arguments)}function x(){return x=Object(R.a)(d.a.mark(function p(c,C){return d.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Object(U.f)("/api/admin/file/find",Object(N.a)({method:"GET",params:c},C||{})));case 1:case"end":return O.stop()}},p)})),x.apply(this,arguments)}function u(p,c,C){return b.apply(this,arguments)}function b(){return b=Object(R.a)(d.a.mark(function p(c,C,y){var O;return d.a.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return O=new FormData,O.append("file[]",c),O.append("target",C),L.abrupt("return",Object(U.f)("/api/admin/file/upload",Object(N.a)({method:"POST",data:O},y||{})));case 4:case"end":return L.stop()}},p)})),b.apply(this,arguments)}var j=function(c){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(c,"&w=").concat(C)};function l(p,c){return _.apply(this,arguments)}function _(){return _=Object(R.a)(d.a.mark(function p(c,C){return d.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Object(U.f)("/api/admin/file/delete",Object(N.a)({method:"DELETE",data:{url:c}},C||{})));case 1:case"end":return O.stop()}},p)})),_.apply(this,arguments)}},BiO0:function(ne,I,e){"use strict";var N=e("wx14"),R=e("Ff2n"),A=e("q1tI"),d=e.n(A),U=e("adzw"),M=["fieldProps","proFieldProps"],D=function(x,u){var b=x.fieldProps,j=x.proFieldProps,l=Object(R.a)(x,M);return d.a.createElement(U.a,Object(N.a)({ref:u,mode:"edit",valueType:"textarea",fieldProps:b,proFieldProps:j},l))};I.a=d.a.forwardRef(D)},"DBJ/":function(ne,I,e){"use strict";var N=e("y8nQ"),R=e("Vl3Y"),A=e("etVw"),d=e("q1tI"),U=e.n(d),M=e("9kvl"),D=function(b){var j=b.condition,l=b.children,_=b.wrap;return j?U.a.cloneElement(_(l)):l},a=e("nKUr"),x=function(j){var l=j.onChange,_=j.url,p=j.name,c=j.extra,C=j.accept,y=j.data,O=j.wrapInForm,Y=O===void 0?!0:O,L=Object(M.i)();return y&&y[p]&&delete y[p],Object(a.jsx)(D,{condition:Y,wrap:function(W){return Object(a.jsx)(R.a,{children:W})},children:Object(a.jsx)(A.a,{title:Object(a.jsx)(M.a,{id:"upload_click_here"}),placeholder:L.formatMessage({id:"upload_click_here"}),onChange:l,label:Object(a.jsx)(M.a,{id:"upload"}),max:2,fieldProps:{data:y,accept:C,name:p,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(_),extra:c})})},u=I.a=x},"F/zT":function(ne,I,e){"use strict";var N=e("wx14"),R=e("VTBJ"),A=e("Ff2n"),d=e("q1tI"),U=e.n(d),M=e("adzw"),D=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],a=U.a.forwardRef(function(x,u){var b=x.fieldProps,j=x.unCheckedChildren,l=x.checkedChildren,_=x.proFieldProps,p=Object(A.a)(x,D);return U.a.createElement(M.a,Object(N.a)({valueType:"switch",mode:"edit",fieldProps:Object(R.a)({unCheckedChildren:j,checkedChildren:l},b),ref:u,valuePropName:"checked",proFieldProps:_,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},p))});I.a=a},YjuE:function(ne,I,e){"use strict";e.r(I);var N=e("T2oS"),R=e("W9HT"),A=e("tJVT"),d=e("q1tI"),U=e.n(d),M=e("nhC9"),D=e("Ty5D"),a=e("9kvl"),x=e("tMyG"),u=e("k1fw"),b=e("9og8"),j=e("WmNS"),l=e.n(j);function _(m,n){return p.apply(this,arguments)}function p(){return p=Object(b.a)(l.a.mark(function m(n,r){return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(a.f)("/api/admin/settings",Object(u.a)({method:"GET",useCache:!1,params:Object(u.a)(Object(u.a)({},n),{},{per_page:n.pageSize,page:n.current})},r||{})));case 1:case"end":return s.stop()}},m)})),p.apply(this,arguments)}function c(m,n){return C.apply(this,arguments)}function C(){return C=Object(b.a)(l.a.mark(function m(n,r){return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(a.f)("/api/admin/settings/".concat(n),Object(u.a)({method:"GET",useCache:!1},r||{})));case 1:case"end":return s.stop()}},m)})),C.apply(this,arguments)}function y(m,n){return O.apply(this,arguments)}function O(){return O=Object(b.a)(l.a.mark(function m(n,r){return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(a.f)("/api/admin/settings",Object(u.a)({method:"POST",headers:{"Content-Type":"application/json"},data:n},r||{})));case 1:case"end":return s.stop()}},m)})),O.apply(this,arguments)}function Y(m,n,r){return L.apply(this,arguments)}function L(){return L=Object(b.a)(l.a.mark(function m(n,r,i){return l.a.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",Object(a.f)("/api/admin/settings/".concat(n),Object(u.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:r},i||{})));case 1:case"end":return B.stop()}},m)})),L.apply(this,arguments)}function $(m,n){return W.apply(this,arguments)}function W(){return W=Object(b.a)(l.a.mark(function m(n,r){return l.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(a.f)("/api/admin/settings/".concat(n),Object(u.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},r||{})));case 1:case"end":return s.stop()}},m)})),W.apply(this,arguments)}function X(m){return Z.apply(this,arguments)}function Z(){return Z=Object(b.a)(l.a.mark(function m(n){return l.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(a.f)("/api/admin/settings/groups",Object(u.a)({method:"GET",useCache:!1},n||{})));case 1:case"end":return i.stop()}},m)})),Z.apply(this,arguments)}function f(m){return je.apply(this,arguments)}function je(){return je=Object(b.a)(l.a.mark(function m(n){return l.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(a.f)("/api/admin/config",Object(u.a)({method:"GET",useCache:!1},n||{})));case 1:case"end":return i.stop()}},m)})),je.apply(this,arguments)}function w(m,n){return se.apply(this,arguments)}function se(){return se=Object(b.a)(l.a.mark(function m(n,r){var i,s;return l.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return i=n.key,s=n.value,o.abrupt("return",Object(a.f)("/api/admin/config",Object(u.a)({method:"POST",data:{config:[{key:i,value:s}]}},r||{})));case 2:case"end":return o.stop()}},m)})),se.apply(this,arguments)}var pe=e("P2fV"),ie=e("NJEC"),ce=e("5Dmo"),k=e("3S7+"),de=e("+L6B"),le=e("2/Rp"),_e=e("+BJd"),Oe=e("mr32"),K=e("jrin"),be=e("miYZ"),z=e("tsqr"),ee=e("xvlK"),H=e("Qiat"),Ee=e("y8nQ"),he=e("Vl3Y"),F=e("5NDa"),P=e("5rEg"),S=e("VMEa"),fe=e("rmhi"),q=e("Qurx"),te=e("F/zT"),re=e("5qq5"),ue=e("BiO0"),Pe=e("hd5d"),Me=e("3fxf"),xe=e("ovOe"),ge=e.n(xe),t=e("nKUr"),Ce=function(n){var r=n.value,i=n.onChange,s=n.type,B=s===void 0?"file":s,o=Object(d.useState)(!1),T=Object(A.a)(o,2),G=T[0],h=T[1];return Object(t.jsxs)(U.a.Fragment,{children:[Object(t.jsxs)(S.b.Group,{children:[Object(t.jsx)(P.a,{value:r,readOnly:!0}),Object(t.jsxs)(le.a,{size:"small",type:"primary",onClick:function(){return h(!G)},children:["toggle ",B," browser"]})]}),G&&Object(t.jsx)(Me.a,{onFile:function(J,g){return i&&i("".concat(g,"/").concat(J.name))}})]})},De=function(n){var r=Object(a.i)(),i=n.visible,s=n.onVisibleChange,B=n.onFinish,o=n.id,T=he.a.useForm(),G=Object(A.a)(T,1),h=G[0],V=!o||o===-1,J=Object(d.useState)("text"),g=Object(A.a)(J,2),v=g[0],E=g[1];Object(d.useEffect)(function(){o&&o!==-1?c(o).then(function(Q){Q.success&&(h.setFieldsValue(Q.data),E(Q.data.type))}):(h.resetFields(),E("text"))},[o,h]);var oe=Object(d.useCallback)(function(Q){Q.type&&Q.type!==v&&E(Q.type)},[v]);return Object(t.jsxs)(fe.a,{form:h,title:r.formatMessage({id:o?"editSetting":"newSetting",defaultMessage:o?"editSetting":"newSetting"}),width:"60vw",visible:i,onVisibleChange:s,onFinish:B,onValuesChange:oe,children:[Object(t.jsxs)(S.b.Group,{children:[Object(t.jsx)(q.a,{label:Object(t.jsx)(a.a,{id:"group",defaultMessage:"group"}),rules:[{required:!0}],width:"md",name:"group"})," ",Object(t.jsx)(q.a,{label:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"})]}),Object(t.jsxs)(S.b.Group,{children:[Object(t.jsx)(te.a,{name:"enumerable",label:Object(t.jsx)(a.a,{id:"enumerable",defaultMessage:"enumerable"})}),Object(t.jsx)(te.a,{name:"public",label:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"})})]}),Object(t.jsx)(S.b.Group,{children:Object(t.jsx)(re.a.Group,{disabled:!V,name:"type",label:Object(t.jsx)(a.a,{id:"type"}),options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"},{label:"json",value:"json"},{label:"file",value:"file"},{label:"image",value:"image"}]})}),Object(t.jsxs)("div",{children:[v==="text"&&Object(t.jsx)(q.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"})}),v==="json"&&Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(ue.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"}),tooltip:"".concat(r.formatMessage({id:"example_json"}),': {"name":"John", "age":30, "city":["New York","Warsaw"]}')}),Object(t.jsx)(S.b.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(ge.a,{src:JSON.parse(h.getFieldValue("value"))})}catch(ae){return Object(t.jsx)(ge.a,{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]}),(v==="file"||v==="image")&&Object(t.jsx)(S.b.Item,{name:"value",label:"value",tooltip:"select file from current repository or upload new one",valuePropName:"value",children:Object(t.jsx)(Ce,{type:v})}),v==="markdown"&&Object(t.jsx)(S.b.Item,{name:"value",label:"value",tooltip:"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.",valuePropName:"value",children:Object(t.jsx)(Pe.a,{directory:"settings/wysiwyg"})})]})]})},Te=De,ye=e("G3dp"),Ie=e("/MfK"),Ae=function(){var m=Object(b.a)(l.a.mark(function n(r,i,s){var B;return l.a.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return B=z.default.loading(r.formatMessage({id:"loading"})),T.prev=1,T.next=4,s&&s!==-1?Y(s,Object(u.a)({},i)):y(Object(u.a)({},i));case 4:return B(),z.default.success(r.formatMessage({id:"success"})),T.abrupt("return",!0);case 9:return T.prev=9,T.t0=T.catch(1),B(),z.default.error(r.formatMessage({id:"error"})),T.abrupt("return",!1);case 14:case"end":return T.stop()}},n,null,[[1,9]])}));return function(r,i,s){return m.apply(this,arguments)}}(),Fe=function(){var m=Object(b.a)(l.a.mark(function n(r,i){var s;return l.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return s=z.default.loading(r.formatMessage({id:"loading"})),o.prev=1,o.next=4,$(i);case 4:return s(),z.default.success(r.formatMessage({id:"success"})),o.abrupt("return",!0);case 9:return o.prev=9,o.t0=o.catch(1),s(),z.default.error(r.formatMessage({id:"error"})),o.abrupt("return",!1);case 14:case"end":return o.stop()}},n,null,[[1,9]])}));return function(r,i){return m.apply(this,arguments)}}(),Be=function(){var n=Object(d.useState)(!1),r=Object(A.a)(n,2),i=r[0],s=r[1],B=Object(d.useState)([]),o=Object(A.a)(B,2),T=o[0],G=o[1],h=Object(d.useRef)(),V=Object(a.i)();Object(d.useEffect)(function(){X().then(function(g){g.success&&G(g.data)})},[]);var J=[{title:Object(t.jsx)(a.a,{id:"group",defaultMessage:"group"}),dataIndex:"group",hideInSearch:!1,key:"group",valueType:"select",width:100,valueEnum:T.sort().reduce(function(g,v){return Object(u.a)(Object(u.a)({},g),{},Object(K.a)({},v,v))},{})},{title:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"enumerable",defaultMessage:"enumerable"}),dataIndex:"enumerable",hideInForm:!0,hideInSearch:!0,render:function(v,E){return Object(t.jsx)(Oe.a,{color:E.enumerable?"success":"error",children:Object(t.jsx)(a.a,{id:E.enumerable?"true":"false",defaultMessage:E.enumerable?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(v,E){return Object(t.jsx)(Oe.a,{color:E.public?"success":"error",children:Object(t.jsx)(a.a,{id:E.public?"true":"false",defaultMessage:E.public?"true":"false"})})}},{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(v,E){return[Object(t.jsx)(k.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(le.a,{type:"primary",icon:Object(t.jsx)(ye.a,{}),onClick:function(){return s(E.id)}})},"edit"),Object(t.jsx)(ie.a,{title:Object(t.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(b.a)(l.a.mark(function oe(){var Q;return l.a.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return ve.next=2,Fe(V,E.id);case 2:Q=ve.sent,Q&&(s(!1),h.current&&h.current.reload());case 4:case"end":return ve.stop()}},oe)})),okText:Object(t.jsx)(a.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(a.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(k.a,{title:Object(t.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(le.a,{type:"primary",icon:Object(t.jsx)(Ie.a,{}),danger:!0})})},"delete")]}}];return Object(t.jsxs)(U.a.Fragment,{children:[Object(t.jsx)(H.a,{headerTitle:V.formatMessage({id:"menu.settings"}),actionRef:h,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[Object(t.jsxs)(le.a,{type:"primary",onClick:function(){s(-1)},children:[Object(t.jsx)(ee.a,{})," ",Object(t.jsx)(a.a,{id:"pages.searchTable.new"})]},"primary")]},request:function(v){var E=v.pageSize,oe=v.current,Q=v.group;return _({pageSize:E,current:oe,group:Q}).then(function(ae){return ae.success?{data:ae.data,total:ae.meta.total,success:!0}:[]})},columns:J}),Object(t.jsx)(Te,{groups:T,id:i,visible:Number.isInteger(i),onVisibleChange:function(v){return v===!1&&s(!1)},onFinish:function(){var g=Object(b.a)(l.a.mark(function v(E){var oe;return l.a.wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,Ae(V,E,Number(i));case 2:oe=ae.sent,oe&&(s(!1),h.current&&h.current.reload());case 4:case"end":return ae.stop()}},v)}));return function(v){return g.apply(this,arguments)}}()})]})},Ue=Be,Je=e("tU7J"),Re=e("wFql"),Se=e("Fghh"),Le=Re.a.Text,me;(function(m){m.Array="array",m.String="string"})(me||(me={}));var We=function(n,r){return r===me.Array?n&&Array.isArray(n)?JSON.stringify(n):"[]":n},Ke=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;if(r===me.Array){var i=JSON.parse(n);return i&&Array.isArray(i)?i:[]}return n},Ve=function(n){var r=Object(Se.j)(),i=n.visible,s=n.onVisibleChange,B=n.onFinish,o=n.value,T=he.a.useForm(),G=Object(A.a)(T,1),h=G[0],V=Object(d.useMemo)(function(){return(o.rules||[]).includes(me.Array)?me.Array:me.String},[o.rules]);return Object(d.useEffect)(function(){h.setFieldsValue(Object(u.a)(Object(u.a)({},o),{},{value:We(o.value,V)}))},[V,o,h]),Object(t.jsxs)(fe.a,{form:h,title:o.full_key,width:"60vw",visible:i,onVisibleChange:s,onFinish:Object(b.a)(l.a.mark(function J(){var g;return l.a.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,w({key:o.full_key,value:Ke(h.getFieldsValue().value,V)});case 2:if(g=E.sent,!g.success){E.next=6;break}return B(g.success===!0),E.abrupt("return",g.success);case 6:return E.abrupt("return");case 7:case"end":return E.stop()}},J)})),children:[Object(t.jsxs)(S.b.Group,{children:[Object(t.jsx)(te.a,{disabled:!0,name:"public",label:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"})}),Object(t.jsx)(te.a,{disabled:!0,name:"readonly",label:Object(t.jsx)(a.a,{id:"readonly",defaultMessage:"readonly"})}),Object(t.jsx)(S.b.Item,{shouldUpdate:!0,label:Object(t.jsx)(a.a,{id:"rules",defaultMessage:"rules"}),children:function(){return Object(t.jsx)(Le,{code:!0,children:JSON.stringify(h.getFieldValue("rules"))})}})]}),V===me.Array?Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(ue.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"}),tooltip:"".concat(r.formatMessage({id:"example_json"}),': ["first_field_name", "second_field_name"]')}),Object(t.jsx)(S.b.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(ge.a,{src:JSON.parse(h.getFieldValue("value"))})}catch(g){return Object(t.jsx)(ge.a,{src:JSON.parse('{ "error": "cannot parse this array" }')})}}})]}):Object(t.jsx)(q.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"})})]})},we=Ve,Ne=[{title:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"readonly",defaultMessage:"readonly"}),dataIndex:"readonly",hideInForm:!0,hideInSearch:!0,render:function(n,r){return Object(t.jsx)(Oe.a,{color:r.readonly?"success":"error",children:Object(t.jsx)(a.a,{id:r.readonly?"true":"false",defaultMessage:r.readonly?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(n,r){return Object(t.jsx)(Oe.a,{color:r.public?"success":"error",children:Object(t.jsx)(a.a,{id:r.public?"true":"false",defaultMessage:r.public?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0}],$e=function(n){var r=n.packageName,i=n.values,s=n.onValueUpdated,B=Object(a.i)(),o=Object(d.useState)(),T=Object(A.a)(o,2),G=T[0],h=T[1],V=Object(d.useMemo)(function(){var J=i[r],g=Object.entries(J).map(function(v){return Object(u.a)({key:v[0],full_key:"".concat(r,".").concat(v[0])},v[1])});return g},[i,r]);return Object(t.jsxs)(U.a.Fragment,{children:[Object(t.jsx)(H.a,{headerTitle:B.formatMessage({id:"menu.settings"}),rowKey:"key",search:{labelWidth:120},dataSource:V,columns:[].concat(Ne,[{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(g,v){return[Object(t.jsx)(k.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(le.a,{type:"primary",icon:Object(t.jsx)(ye.a,{}),onClick:function(){return h(v)}})},"edit")]}}])}),G&&Object(t.jsx)(we,{value:G,visible:G!==void 0,onVisibleChange:function(g){return g===!1&&h(void 0)},onFinish:Object(b.a)(l.a.mark(function J(){return l.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:s();case 1:case"end":return v.stop()}},J)}))})]})},ze=$e,Ge=function(n){return n.replaceAll("escolalms","").split("_").join("")},Ye=I.default=function(){var m=Object(D.g)(),n=Object(a.i)(),r=m.tab,i=r===void 0?"user_settings":r,s=Object(d.useState)(),B=Object(A.a)(s,2),o=B[0],T=B[1],G=Object(d.useCallback)(function(){f().then(function(h){h.success&&T(h.data)})},[]);return Object(d.useEffect)(function(){G()},[]),o?Object(t.jsx)(x.a,{title:Object(t.jsx)(a.a,{id:"settings"}),header:{breadcrumb:{routes:[{path:"settings",breadcrumbName:n.formatMessage({id:"menu.Settings"})},{path:String(i),breadcrumbName:String(i)}]}},children:Object(t.jsxs)(M.a,{tabs:{type:"card",activeKey:i,onChange:function(V){return a.d.push("/settings/".concat(V))}},children:[Object(t.jsx)(M.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"user.settings"}),children:Object(t.jsx)(Ue,{})},"user_settings"),Object.keys(o).map(function(h){return Object(t.jsxs)(M.a.TabPane,{tab:Object(t.jsxs)("span",{children:[Object(t.jsx)(a.a,{id:"package"})," ",Ge(h)]}),children:[Object(t.jsx)(ze,{values:o,packageName:h,onValueUpdated:function(){return G()}}),h]},h)})]})}):Object(t.jsx)(R.a,{})}},etVw:function(ne,I,e){"use strict";var N=e("DZo9"),R=e("8z0m"),A=e("+L6B"),d=e("2/Rp"),U=e("wx14"),M=e("q1tI"),D=e.n(M),a=e("z7Xi"),x=e("WFLz"),u=function(j,l){var _=j.fieldProps,p=j.name,c=j.action,C=j.accept,y=j.listType,O=j.title,Y=O===void 0?"\u5355\u51FB\u4E0A\u4F20":O,L=j.max,$=j.icon,W=$===void 0?D.a.createElement(a.a,null):$,X=j.value,Z=j.buttonProps,f=j.onChange,je=j.disabled,w=j.proFieldProps,se=j.fileList,pe=(L===void 0||!X||(X==null?void 0:X.length)<L)&&(w==null?void 0:w.mode)!=="read",ie=(y!=null?y:_==null?void 0:_.listType)==="picture-card";return D.a.createElement(R.a,Object(U.a)({action:c,accept:C,ref:l,name:p||"file",listType:y||"picture",fileList:se!=null?se:X},_,{onChange:function(k){var de;f==null||f(k),_==null||(de=_.onChange)===null||de===void 0||de.call(_,k)}}),pe&&(ie?D.a.createElement("span",null,W," ",Y):D.a.createElement(d.a,Object(U.a)({disabled:je||(_==null?void 0:_.disabled)},Z),W,Y)))};I.a=Object(x.a)(D.a.forwardRef(u),{getValueFromEvent:function(j){return j.fileList}})},hd5d:function(ne,I,e){"use strict";var N=e("9og8"),R=e("WmNS"),A=e.n(R),d=e("q1tI"),U=e.n(d),M=e("3Ef1"),D=e.n(M),a=e("BAh9"),x=e("vtG9"),u=e.n(x),b=e("9kvl"),j=e("nKUr"),l=e.n(j),_=function(c){var C=c.value,y=c.onChange,O=c.directory,Y=O===void 0?"/wysiwyg":O,L=Object(b.i)();return Object(j.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(j.jsx)(D.a,{uploadImage:function(){var $=Object(N.a)(A.a.mark(function W(X){var Z,f;return A.a.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,Object(a.e)(X,Y);case 2:if(Z=w.sent,!Z.success){w.next=6;break}return f=Z.data[0].name.includes("/")?Z.data[0].name:"".concat(Y).concat(Z.data[0].name),w.abrupt("return",Object(a.d)(f,1e3));case 6:throw new Error("Error while uploading");case 7:case"end":return w.stop()}},W)}));return function(W){return $.apply(this,arguments)}}(),defaultValue:C||"",onChange:function(W){return y&&y(W())},placeholder:L.formatMessage({id:"wysiwyg_placeholder"})})})};I.a=_},lLVY:function(ne,I,e){},vtG9:function(ne,I,e){}}]);
