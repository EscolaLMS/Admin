"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9857],{89345:function(g,E,e){var u=e(97857),n=e.n(u),_=e(5574),v=e.n(_),t=e(76841),r=e(97175),l=e(63430),i=e(78715),d=e(14726),O=e(74330),m=e(72051),M=e(38925),A=e(75487),c=e(67294),o=e(80854),a=e(85893),b=[{title:(0,a.jsx)(o.FormattedMessage,{id:"label",defaultMessage:"label"}),dataIndex:"label",key:"label"},{title:(0,a.jsx)(o.FormattedMessage,{id:"value",defaultMessage:"value"}),dataIndex:"value",key:"value"}],h=function(C){var j=C.metric,I=C.header,L=I===void 0?!0:I,B=C.asDonut,Z=B===void 0?!1:B,K=C.customLabelTitle,y=C.customLabelContent,F=(0,c.useState)({mode:"init"}),U=v()(F,2),s=U[0],x=U[1],w=(0,o.useIntl)(),W={angleField:"value",colorField:"label",radius:.9,label:{type:"inner",offset:"-30%",content:function(f){var D=f.percent;return D>=.01?"".concat((D*100).toFixed(0),"%"):""},style:{fontSize:14,textAlign:"center"}},legend:{itemValue:{alignRight:!0,formatter:function(f,D){if(y&&"value"in s){var T=s.value.find(function(S){var R=S.label;return R===D.name});return T?y(T):f}return f}}}},G={appendPadding:20,innerRadius:.6,label:n()(n()({},W.label),{},{offset:"-50%"}),legend:{itemWidth:void 0,itemName:{formatter:function(f){return K?K(f):f}},offsetX:-24,itemValue:{formatter:function(f,D){if(y&&"value"in s){var T=s.value.find(function(S){var R=S.label;return R===D.value});return T?y(T):void 0}}}}},$=n()(n()({},W),Z?G:{});(0,c.useEffect)(function(){x({mode:"loading"}),(0,t.Gm)({metric:j}).then(function(p){p.success?x({mode:"loaded",value:p.data}):x({mode:"error",error:p.message})}).catch(function(p){return x({mode:"error",error:p.toString()})})},[j]);var z=(0,c.useCallback)(function(){if(s.mode==="loaded"){var p={filename:j.split("\\").join("-"),fieldSeparator:",",quoteStrings:!1,decimalSeparator:".",showLabels:!0,showTitle:!0,title:w.formatMessage({id:j.split("\\").pop()}),useTextFile:!1,useBom:!0,useKeysAsHeaders:!0},f=(0,A.iL)(p),D=(0,A.gB)(f)(s.value);(0,A.LR)(f)(D)}},[s]);return(0,a.jsxs)(i.ZP,{title:L&&(0,a.jsx)(o.FormattedMessage,{id:j.split("\\").pop(),defaultMessage:j.split("\\").pop()}),extra:L&&(0,a.jsxs)(d.ZP,{icon:(0,a.jsx)(r.Z,{}),size:"small",onClick:function(){return z()},children:[" ",(0,a.jsx)(o.FormattedMessage,{id:"download"}),"\xA0","CSV"]}),headerBordered:!0,children:[s.mode==="loading"&&(0,a.jsx)(O.Z,{}),s.mode==="loaded"&&(0,a.jsxs)("div",{children:[(0,a.jsx)(l.Z,n()(n()({},$),{},{data:s.value})),L&&(0,a.jsx)(m.Z,{pagination:!1,size:"small",dataSource:s.value,columns:b})]}),s.mode==="error"&&(0,a.jsx)(M.Z,{message:s.error,type:"error"})]})};E.Z=h},4723:function(g,E,e){e.r(E);var u=e(89345),n=e(78715),_=e(74453),v=e(67294),t=e(85893);E.default=function(){return(0,t.jsxs)(_._z,{children:[(0,t.jsxs)(n.ZP,{split:"vertical",children:[(0,t.jsx)(n.ZP,{colSpan:12,layout:"center",children:(0,t.jsx)(u.Z,{metric:"EscolaLms\\Reports\\Metrics\\CoursesMoneySpentMetric"})}),(0,t.jsx)(n.ZP,{colSpan:12,layout:"center",children:(0,t.jsx)(u.Z,{metric:"EscolaLms\\Reports\\Metrics\\CoursesPopularityMetric"})})]}),(0,t.jsxs)(n.ZP,{split:"vertical",children:[(0,t.jsx)(n.ZP,{colSpan:12,layout:"center",children:(0,t.jsx)(u.Z,{metric:"EscolaLms\\Reports\\Metrics\\CoursesSecondsSpentMetric"})}),(0,t.jsx)(n.ZP,{colSpan:12,layout:"center",children:(0,t.jsx)(u.Z,{metric:"EscolaLms\\Reports\\Metrics\\TutorsPopularityMetric"})})]})]})}},76841:function(g,E,e){e.d(E,{Gm:function(){return i},Sx:function(){return M},_g:function(){return O}});var u=e(15009),n=e.n(u),_=e(97857),v=e.n(_),t=e(99289),r=e.n(t),l=e(80854);function i(c,o){return d.apply(this,arguments)}function d(){return d=r()(n()().mark(function c(o,a){return n()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,l.request)("/api/admin/reports/report",v()({params:o,method:"GET",useCache:!1},a||{})));case 1:case"end":return h.stop()}},c)})),d.apply(this,arguments)}function O(c,o,a){return m.apply(this,arguments)}function m(){return m=r()(n()().mark(function c(o,a,b){return n()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,l.request)("/api/admin/stats/course/".concat(o,"/export"),v()({params:a,method:"GET",useCache:!1,responseType:"blob",headers:{accept:"application/vnd.ms-excel"}},b||{})));case 1:case"end":return P.stop()}},c)})),m.apply(this,arguments)}function M(c,o,a){return A.apply(this,arguments)}function A(){return A=r()(n()().mark(function c(o,a,b){return n()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",(0,l.request)("/api/admin/stats/topic/".concat(o,"/export"),v()({method:"GET",useCache:!1,params:{stat:a},responseType:"blob",headers:{accept:"application/vnd.ms-excel"}},b||{})));case 1:case"end":return P.stop()}},c)})),A.apply(this,arguments)}},79370:function(g,E,e){e.d(E,{G:function(){return v}});var u=e(98924),n=function(r){if((0,u.Z)()&&window.document.documentElement){var l=Array.isArray(r)?r:[r],i=window.document.documentElement;return l.some(function(d){return d in i.style})}return!1},_=function(r,l){if(!n(r))return!1;var i=document.createElement("div"),d=i.style[r];return i.style[r]=l,i.style[r]!==d};function v(t,r){return!Array.isArray(t)&&r!==void 0?_(t,r):n(t)}},37762:function(g,E,e){e.d(E,{Z:function(){return n}});var u=e(40181);function n(_,v){var t=typeof Symbol!="undefined"&&_[Symbol.iterator]||_["@@iterator"];if(!t){if(Array.isArray(_)||(t=(0,u.Z)(_))||v&&_&&typeof _.length=="number"){t&&(_=t);var r=0,l=function(){};return{s:l,n:function(){return r>=_.length?{done:!0}:{done:!1,value:_[r++]}},e:function(M){throw M},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,d=!0,O=!1;return{s:function(){t=t.call(_)},n:function(){var M=t.next();return d=M.done,M},e:function(M){O=!0,i=M},f:function(){try{d||t.return==null||t.return()}finally{if(O)throw i}}}}}}]);
