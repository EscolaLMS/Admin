(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"3fxf":function(z,d,e){"use strict";var y=e("DjyN"),u=e("NUBc"),b=e("Mwp2"),O=e("VXEj"),E=e("+L6B"),f=e("2/Rp"),m=e("5NDa"),I=e("5rEg"),v=e("oBTY"),n=e("k1fw"),h=e("tJVT"),x=e("DYRE"),W=e("zeV3"),p=e("tU7J"),l=e("wFql"),r=e("q1tI"),i=e.n(r),j=e("BAh9"),o=e("/MfK"),F=e("mAF4"),g=e("dF/Y"),T=e("9kvl"),N=e("DBJ/"),C=e("lLVY"),ne=e.n(C),a=e("nKUr"),ae=e.n(a),J=function(U){var L=U.directory,R=U.onUploaded;return Object(a.jsxs)(W.b,{align:"start",children:[Object(a.jsxs)(l.a.Text,{children:[Object(a.jsx)(T.a,{id:"pages.files.filesBrowser"}),Object(a.jsx)(l.a.Text,{code:!0,children:L})]}),Object(a.jsx)(N.a,{url:"/api/admin/file/upload",name:"file[]",data:{target:L},onUpload:function(S){S.success&&R(L,S.data)}})]})},X=function(U){var L=U.defaultDirectory,R=L===void 0?"/":L,B=U.onFile,S=U.hideDeleteBtn,Z=S===void 0?!1:S,Y=U.forceLoading,w=Y===void 0?!1:Y,k=Object(T.i)(),q=Object(r.useState)({loading:!1,name:"",directory:R,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),G=Object(h.a)(q,2),c=G[0],$=G[1],A=Object(r.useRef)(),M=Object(r.useCallback)(function(_){$(function(t){return Object(n.a)(Object(n.a)({},t),{},{loading:_})})},[]),Q=Object(r.useCallback)(function(_,t){$(function(s){return Object(n.a)(Object(n.a)(Object(n.a)({},s),_.data),{},{data:[{url:t.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(v.a)(_.data.data.map(function(D){return Object(n.a)(Object(n.a)({},D),{},{url:D.mime==="directory"?"".concat(t,"/").concat(D.name):D.url})}))).filter(function(D){return t==="/"||t===R?D.name!=="..":!0}),directory:t,loading:!1})})},[M]),P=Object(r.useCallback)(function(_){var t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,D=function(){return A.current&&A.current.abort()};return D(),A.current=new AbortController,M(!0),Object(j.a)({directory:_,page:s},{signal:(t=A.current)===null||t===void 0?void 0:t.signal}).then(function(K){K.success&&Q(K,_)}).catch(function(){return M(!1)}),function(){D()}},[M]);Object(r.useEffect)(function(){return P(R)},[R,P]);var ee=Object(r.useCallback)(function(_){M(!0),Object(j.c)(_).then(function(){P(c.directory)}).catch(function(){M(!1)})},[P,M,c.directory]),te=Object(r.useCallback)(function(_,t){var s,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,K=function(){return A.current&&A.current.abort()};return K(),A.current=new AbortController,M(!0),Object(j.b)({directory:_,name:t,page:D},{signal:(s=A.current)===null||s===void 0?void 0:s.signal}).then(function(V){V.success&&Q(V,_)}).catch(function(){return M(!1)}),function(){K()}},[M]);return Object(a.jsxs)("div",{className:"file-browser",children:[Object(a.jsxs)("div",{className:"file-browser__header",children:[Object(a.jsx)(I.a,{placeholder:k.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(t){return $(function(s){return Object(n.a)(Object(n.a)({},s),{},{name:t.target.value})})},value:c.name}),Object(a.jsxs)("div",{children:[Object(a.jsx)(f.a,{className:"file-browser__button",onClick:function(){return P(c.directory)},children:Object(a.jsx)(T.a,{id:"reset"})}),Object(a.jsx)(f.a,{className:"file-browser__button",type:"primary",onClick:function(){return te(c.directory,c.name)},children:Object(a.jsx)(T.a,{id:"query"})})]})]}),Object(a.jsx)(O.b,{loading:c.loading||w,size:"small",itemLayout:"horizontal",dataSource:c.data,header:Object(a.jsx)(J,{directory:c.directory,onUploaded:function(t,s){s&&(P(t),B&&B(s,t))}}),footer:Object(a.jsx)(J,{directory:c.directory,onUploaded:function(t,s){P(t),s&&B&&B(s,t)}}),renderItem:function(t){return Object(a.jsx)(O.b.Item,{actions:t.mime!=="directory"&&!Z?[Object(a.jsx)(f.a,{type:"default",danger:!0,icon:Object(a.jsx)(o.a,{}),size:"small",onClick:function(){return ee(t.url)}},"dir")]:[],children:Object(a.jsx)(O.b.Item.Meta,{avatar:t.mime==="directory"?Object(a.jsx)(f.a,{type:"primary",icon:Object(a.jsx)(F.a,{}),size:"small",onClick:function(){return P(t.url)}}):Object(a.jsx)("a",{href:t.url,target:"_blank",rel:"noreferrer",children:Object(a.jsx)(f.a,{type:"default",icon:Object(a.jsx)(g.a,{}),size:"small"})}),description:Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(f.a,{type:"text",size:"small",onClick:function(){return t.mime==="directory"?P(t.url):B&&B(t,c.directory)},children:t.name})})})})}}),Object(a.jsx)(u.a,{pageSizeOptions:[],current:c.current_page,total:c.total,pageSize:c.per_page,onChange:function(t){return P(c.directory,t)}})]})};d.a=X},BAh9:function(z,d,e){"use strict";e.d(d,"a",function(){return f}),e.d(d,"b",function(){return I}),e.d(d,"e",function(){return n}),e.d(d,"d",function(){return x}),e.d(d,"c",function(){return W});var y=e("WmNS"),u=e.n(y),b=e("k1fw"),O=e("9og8"),E=e("9kvl");function f(l,r){return m.apply(this,arguments)}function m(){return m=Object(O.a)(u.a.mark(function l(r,i){return u.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(E.f)("/api/admin/file/list",Object(b.a)({method:"GET",params:r},i||{})));case 1:case"end":return o.stop()}},l)})),m.apply(this,arguments)}function I(l,r){return v.apply(this,arguments)}function v(){return v=Object(O.a)(u.a.mark(function l(r,i){return u.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(E.f)("/api/admin/file/find",Object(b.a)({method:"GET",params:r},i||{})));case 1:case"end":return o.stop()}},l)})),v.apply(this,arguments)}function n(l,r,i){return h.apply(this,arguments)}function h(){return h=Object(O.a)(u.a.mark(function l(r,i,j){var o;return u.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return o=new FormData,o.append("file[]",r),o.append("target",i),g.abrupt("return",Object(E.f)("/api/admin/file/upload",Object(b.a)({method:"POST",data:o},j||{})));case 4:case"end":return g.stop()}},l)})),h.apply(this,arguments)}var x=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(r,"&w=").concat(i)};function W(l,r){return p.apply(this,arguments)}function p(){return p=Object(O.a)(u.a.mark(function l(r,i){return u.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(E.f)("/api/admin/file/delete",Object(b.a)({method:"DELETE",data:{url:r}},i||{})));case 1:case"end":return o.stop()}},l)})),p.apply(this,arguments)}},"DBJ/":function(z,d,e){"use strict";var y=e("k1fw"),u=e("y8nQ"),b=e("Vl3Y"),O=e("etVw"),E=e("9kvl"),f=e("qFDU"),m=e("nKUr"),I=e.n(m);function v(n){var h=n.onChange,x=n.onUpload,W=n.url,p=n.name,l=n.extra,r=n.accept,i=n.data,j=n.wrapInForm,o=j===void 0?!0:j,F=n.title,g=n.formProps,T=Object(E.i)();return i&&i[p]&&delete i[p],Object(m.jsx)(f.a,{condition:o,wrap:function(C){return Object(m.jsx)(b.a,Object(y.a)(Object(y.a)({},g),{},{children:C}))},children:Object(m.jsx)(O.a,{title:F||Object(m.jsx)(E.a,{id:"upload_click_here"}),placeholder:T.formatMessage({id:"upload_click_here"}),onChange:function(C){h&&h(C),C.file.status==="done"&&x&&x(C.file.response)},label:Object(m.jsx)(E.a,{id:"upload"}),max:2,fieldProps:{data:i,accept:r,name:p,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(W),extra:l})})}d.a=v},lLVY:function(z,d,e){},u4ym:function(z,d,e){"use strict";e.r(d);var y=e("IzEo"),u=e("bx4M"),b=e("tU7J"),O=e("wFql"),E=e("q1tI"),f=e.n(E),m=e("tMyG"),I=e("9kvl"),v=e("3fxf"),n=e("nKUr"),h=e.n(n);d.default=function(){return Object(n.jsx)(m.a,{children:Object(n.jsxs)(u.a,{children:[Object(n.jsx)(O.a.Text,{strong:!0,children:Object(n.jsx)(I.a,{id:"pages.files.content"})}),Object(n.jsx)(v.a,{})]})})}}}]);
