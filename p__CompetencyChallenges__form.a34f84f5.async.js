(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"/y+f":function(ge,$,t){"use strict";t.d($,"g",function(){return w}),t.d($,"e",function(){return E}),t.d($,"f",function(){return v}),t.d($,"d",function(){return K}),t.d($,"a",function(){return _}),t.d($,"c",function(){return X}),t.d($,"b",function(){return Z});var w;(function(s){s.Unselected="",s.RichText="EscolaLms\\TopicTypes\\Models\\TopicContent\\RichText",s.OEmbed="EscolaLms\\TopicTypes\\Models\\TopicContent\\OEmbed",s.Audio="EscolaLms\\TopicTypes\\Models\\TopicContent\\Audio",s.Video="EscolaLms\\TopicTypes\\Models\\TopicContent\\Video",s.H5P="EscolaLms\\TopicTypes\\Models\\TopicContent\\H5P",s.Image="EscolaLms\\TopicTypes\\Models\\TopicContent\\Image",s.PDF="EscolaLms\\TopicTypes\\Models\\TopicContent\\PDF",s.SCORM="EscolaLms\\TopicTypes\\Models\\TopicContent\\ScormSco",s.Project="EscolaLms\\TopicTypeProject\\Models\\Project",s.GiftQuiz="EscolaLms\\TopicTypeGift\\Models\\GiftQuiz"})(w||(w={}));var W;(function(s){s.OrderPaid="EscolaLms\\Cart\\Events\\OrderPaid",s.UserLogged="EscolaLms\\Auth\\Events\\UserLogged"})(W||(W={}));var N;(function(s){s.draft="draft",s.published="published",s.archived="archived"})(N||(N={}));var E;(function(s){s.email="EscolaLms\\TemplatesEmail\\Core\\EmailChannel",s.pdf="EscolaLms\\TemplatesPdf\\Core\\PdfChannel",s.sms="EscolaLms\\TemplatesSms\\Core\\SmsChannel"})(E||(E={}));var v;(function(s){s.ManuallyTriggeredEvent="EscolaLms\\Templates\\Events\\ManuallyTriggeredEvent"})(v||(v={}));var le;(function(s){s.cart_fixed="cart_fixed",s.cart_percent="cart_percent",s.product_fixed="product_fixed",s.product_percent="product_percent"})(le||(le={}));var K;(function(s){s.MULTIPLE_CHOICE="multiple_choice",s.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS="multiple_choice_with_multiple_right_answers",s.TRUE_FALSE="true_false",s.SHORT_ANSWERS="short_answers",s.MATCHING="matching",s.NUMERICAL_QUESTION="numerical_question",s.ESSAY="essay",s.DESCRIPTION="description"})(K||(K={}));var _;(function(s){s.PRESENT="present",s.PRESENT_NOT_EXERCISING="present_not_exercising",s.ABSENT="absent",s.EXCUSED_ABSENCE="excused_absence"})(_||(_={}));var X;(function(s){s.Manual="manual",s.TeamsForms="teams_forms",s.TeamsLecture="teams_lecture",s.TestPortal="test_portal"})(X||(X={}));var Z;(function(s){s.Simple="simple",s.Complex="complex"})(Z||(Z={}))},"60mZ":function(ge,$,t){},EKp7:function(ge,$,t){"use strict";t.r($);var w=t("T2oS"),W=t("W9HT"),N=t("tJVT"),E=t("q1tI"),v=t("9kvl"),le=t("Ty5D"),K=t("tMyG"),_=t("nhC9"),X=t("YRX9"),Z=t("k1fw"),s=t("qLMh"),O=t("miYZ"),b=t("tsqr"),M=t("9og8"),k=t("VMEa"),ae=t("Qurx"),q=t("yj/a"),ne=t("F/zT"),je=t("BiO0"),be=t("0WSk"),R=t("Gn8c"),T=t("hd5d"),F=t("/y+f"),a=t("nKUr"),C=Object.values(F.b).map(function(ee){return{value:ee,label:Object(a.jsx)(v.a,{id:"CompetencyChallenges.types.".concat(ee)})}}),A=function(S){var h=S.data,L=S.competency_challenge_id,D=S.onAddSuccess,H=S.onUpdateSuccess,U=Object(v.l)(),se=k.a.useForm(),B=Object(N.a)(se,1),y=B[0],c=Number.isNaN(L),l=Object(E.useCallback)(function(){var j=Object(M.a)(Object(s.a)().mark(function o(n){var m,f,d,x,g;return Object(s.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return m=n.name,f=n.type,d=n.is_active,x=d===void 0?!1:d,i.prev=1,i.next=4,Object(X.a)({name:m,is_active:x,type:f});case 4:if(g=i.sent,g.success){i.next=8;break}return b.b.error(g.message),i.abrupt("return");case 8:b.b.success(U.formatMessage({id:g.message})),v.f.push("/competency-challenges/".concat(g.data.id,"/main")),D==null||D(g),i.next=16;break;case 13:i.prev=13,i.t0=i.catch(1),b.b.error(U.formatMessage({id:"error"}));case 16:case"end":return i.stop()}},o,null,[[1,13]])}));return function(o){return j.apply(this,arguments)}}(),[]),u=Object(E.useCallback)(function(){var j=Object(M.a)(Object(s.a)().mark(function o(n){var m,f,d,x;return Object(s.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,m=y.getFieldsValue(["image_url","image_path"]),f=m.image_url,d=m.image_path,r.next=4,Object(X.g)(L,Object(Z.a)(Object(Z.a)({},n),{},{image_url:f,image_path:d}));case 4:if(x=r.sent,x.success){r.next=8;break}return b.b.error(x.message),r.abrupt("return");case 8:b.b.success(U.formatMessage({id:x.message})),H==null||H(x),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),b.b.error(U.formatMessage({id:"error"}));case 15:case"end":return r.stop()}},o,null,[[0,12]])}));return function(o){return j.apply(this,arguments)}}(),[L]);return Object(a.jsxs)(k.a,{form:y,initialValues:h!=null?h:{},onFinish:c?l:u,children:[Object(a.jsxs)(k.a.Group,{title:Object(a.jsx)(v.a,{id:"CompetencyChallenges.base"}),children:[Object(a.jsx)(ae.a,{width:"md",name:"name",label:Object(a.jsx)(v.a,{id:"name"}),placeholder:U.formatMessage({id:"name"}),required:!0,rules:[{required:!0,message:U.formatMessage({id:"field_required"})}]}),Object(a.jsx)(q.a,{width:"md",name:"type",label:Object(a.jsx)(v.a,{id:"type"}),options:C,required:!0,rules:[{required:!0,message:U.formatMessage({id:"field_required"})}]}),Object(a.jsx)(ne.a,{name:"is_active",label:Object(a.jsx)(v.a,{id:"is_active"})})]}),!c&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(k.a.Group,{title:Object(a.jsx)(v.a,{id:"CompetencyChallenges.additional"}),children:[Object(a.jsx)(k.a.Item,{name:"description",label:Object(a.jsx)(v.a,{id:"description"}),valuePropName:"value",style:{width:440},children:Object(a.jsx)(T.a,{directory:"competency-challenges/".concat(L)})}),Object(a.jsx)(je.a,{width:"lg",name:"summary",label:Object(a.jsx)(v.a,{id:"summary"})}),Object(a.jsx)(k.a.Item,{name:"authors",label:Object(a.jsx)(v.a,{id:"author"}),style:{width:"100%",maxWidth:440},children:Object(a.jsx)(be.a,{multiple:!0})})]}),Object(a.jsx)(R.a,{wrapInForm:!1,folder:"/competency-challenges/".concat(L),title:"image",action:"/api/admin/competency-challenges/".concat(L,"?_method=PATCH"),src_name:"image_url",form_name:"image",getUploadedSrcField:function(o){return o.file.response.data.image_url},setPath:function(o){return y.setFieldsValue(o)}})]})]})},Fe=t("PpiC"),ce=t("P2fV"),Ye=t("NJEC"),$e=t("5Dmo"),ue=t("3S7+"),et=t("+L6B"),xe=t("2/Rp"),Je=t("Vpfc"),me=t("G3dp"),we=t("/MfK"),re=t("Hn4i"),Ie=t("nRaC"),he=t("5RzL"),e=t("JifO"),Pe=function ee(S,h){var L,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return(L=S.subcategories)!==null&&L!==void 0&&L.length?{title:S.name,value:S.id,disabled:D===0||h.includes(S.id),children:S.subcategories.map(function(H){return ee(H,h,D+1)})}:{title:S.name,value:S.id,disabled:D===0||h.includes(S.id)}},Ae=function(S){var h=S.value,L=S.onChange,D=S.multiple,H=D===void 0?!1:D,U=S.disabledNodes,se=U===void 0?[]:U,B=Object(E.useState)([]),y=Object(N.a)(B,2),c=y[0],l=y[1];Object(E.useEffect)(function(){Object(e.c)().then(function(j){j.success&&l(j.data)})},[]);var u=Object(E.useMemo)(function(){return c.map(function(j){return Pe(j,se)})},[c,se]);return Object(a.jsx)(he.a,{loading:c.length===0,multiple:H,showSearch:!0,value:h,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:Object(a.jsx)(v.a,{id:"select",defaultMessage:"Please select"}),allowClear:!0,treeDefaultExpandAll:!0,onChange:L,treeData:u,disabled:c.length===0})},De=["scale_min","category_id"],Re=[{title:Object(a.jsx)(v.a,{id:"ID"}),dataIndex:"id",editable:!1,render:function(S,h){if(typeof h.id!="string")return"-";var L=h.id.split("-"),D=Object(N.a)(L,2),H=D[0],U=D[1];return H==="new"?"-":U}},{title:Object(a.jsx)(v.a,{id:"min_percent"}),dataIndex:"scale_min",valueType:"percent",formItemProps:{rules:[{required:!0,message:Object(a.jsx)(v.a,{id:"field_required"})},{type:"number",min:0,max:100,message:Object(a.jsx)(v.a,{id:"number_between",values:{min:0,max:100}})}]},fieldProps:{min:0,max:100}},{title:Object(a.jsx)(v.a,{id:"category"}),dataIndex:"category_id",render:function(S,h){return Object(a.jsx)(Je.a,{type:"Category",type_id:h.category_id})},formItemProps:{rules:[{required:!0,message:Object(a.jsx)(v.a,{id:"field_required"})}]},renderFormItem:function(S,h,L){var D,H=((D=L.getFieldValue("table"))!==null&&D!==void 0?D:[]).map(function(U){return U.category_id});return Object(a.jsx)(Ae,{disabledNodes:H})}}],Le=function(S){return S.map(function(h){var L=h.id,D=h.scale_min,H=h.category;return{id:"old-".concat(L),scale_min:D,category_id:H.id}})},ze=function(S){var h=S.competency_challenge_id,L=S.scales,D=S.onScaleDelete,H=S.onScaleAdd,U=S.onScaleUpdate,se=Object(E.useState)([]),B=Object(N.a)(se,2),y=B[0],c=B[1],l=Object(v.l)(),u=Object(E.useRef)(),j=Object(E.useRef)(),o=Object(E.useRef)(),n=Object(E.useMemo)(function(){return Le(L)},[L]),m=Object(E.useMemo)(function(){return[].concat(Re,[{valueType:"option",title:Object(a.jsx)(v.a,{id:"options"}),render:function(d,x,g,r){return[Object(a.jsx)(ue.a,{title:Object(a.jsx)(v.a,{id:"edit",defaultMessage:"edit"}),children:Object(a.jsx)(xe.a,{type:"primary",icon:Object(a.jsx)(me.a,{}),onClick:function(){return r==null?void 0:r.startEditable(x.id)}})},"edit"),Object(a.jsx)(Ye.a,{title:Object(a.jsx)(v.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(M.a)(Object(s.a)().mark(function i(){var p,I,Y,V,ie,G,P,de;return Object(s.a)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(typeof x.id=="string"){z.next=2;break}return z.abrupt("return");case 2:if(p=x.id.split("-"),I=Object(N.a)(p,2),Y=I[0],V=I[1],Y!=="new"){z.next=7;break}return P=(ie=u.current)===null||ie===void 0?void 0:ie.getFieldValue("table"),(G=u.current)===null||G===void 0||G.setFieldValue("table",P.filter(function(ve){var Me=ve.id;return Me!==x.id})),z.abrupt("return");case 7:return z.next=9,Object(X.d)(+V);case 9:de=z.sent,de.success&&(D==null||D());case 11:case"end":return z.stop()}},i)})),okText:Object(a.jsx)(v.a,{id:"ok"}),cancelText:Object(a.jsx)(v.a,{id:"cancel"}),children:Object(a.jsx)(ue.a,{title:Object(a.jsx)(v.a,{id:"delete",defaultMessage:"delete"}),children:Object(a.jsx)(xe.a,{type:"primary",icon:Object(a.jsx)(we.a,{}),danger:!0})})},"delete")]}}])},[]);return Object(a.jsx)(k.a,{formRef:u,initialValues:{table:n},submitter:!1,children:Object(a.jsx)(re.a,{rowKey:function(d){return d.id},editableFormRef:j,controlled:!0,actionRef:o,maxLength:10,name:"table",columns:m,recordCreatorProps:{creatorButtonText:Object(a.jsx)(v.a,{id:"CompetencyChallenges.addNewRow"}),disabled:y.length>0,record:function(d){return{id:"new-".concat(d)}}},editable:{onlyOneLineEditorAlertMessage:l.formatMessage({id:"CompetencyChallenges.onlyOneRowIsEditable"}),onSave:function(){var f=Object(M.a)(Object(s.a)().mark(function x(g,r){var i,p,I,Y,V,ie,G,P,de;return Object(s.a)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(i=r.scale_min,p=r.category_id,I=Object(Fe.a)(r,De),typeof I.id=="string"){z.next=3;break}return z.abrupt("return");case 3:if(Y=I.id.split("-"),V=Object(N.a)(Y,2),ie=V[0],G=V[1],ie!=="new"){z.next=10;break}return z.next=7,Object(X.b)({scale_min:i,category_id:p,competency_challenge_id:h});case 7:return P=z.sent,P.success&&(H==null||H()),z.abrupt("return");case 10:return z.next=12,Object(X.h)(+G,{scale_min:i,category_id:p,competency_challenge_id:h});case 12:return de=z.sent,de.success&&(U==null||U()),z.abrupt("return");case 15:case"end":return z.stop()}},x)}));function d(x,g){return f.apply(this,arguments)}return d}(),deletePopconfirmMessage:Object(a.jsx)(v.a,{id:"deleteQuestion"}),actionRender:function(d,x,g){if(typeof d.id!="string")return[];var r=d.id.split("-"),i=Object(N.a)(r,1),p=i[0];return p==="new"?[g.save,g.delete]:[g.save,g.cancel]},type:"single",editableKeys:y,onChange:c}})})},We=t("/zsF"),Ne=t("PArb"),He=t("DYRE"),Q=t("zeV3"),oe=t("uD7z"),Qe=t("FJDo"),Be=t("yioT"),Ue=t("qRSf"),Xe=function(S){var h=S.data,L=Object(E.useState)(!1),D=Object(N.a)(L,2),H=D[0],U=D[1],se=Object(E.useState)(),B=Object(N.a)(se,2),y=B[0],c=B[1],l=Object(v.l)(),u=Object(E.useCallback)(function(){(h==null?void 0:h.quiz_id)!==void 0&&(U(!0),Object(Ue.c)(h==null?void 0:h.quiz_id).then(function(o){o.success&&c(o.data)}).finally(function(){return U(!1)}))},[h==null?void 0:h.quiz_id]),j=Object(E.useCallback)(function(){var o=Object(M.a)(Object(s.a)().mark(function n(m){return Object(s.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if((h==null?void 0:h.quiz_id)!==void 0){d.next=2;break}return d.abrupt("return");case 2:U(!0),Object(Ue.f)(h==null?void 0:h.quiz_id,Object(Z.a)(Object(Z.a)({},m),{},{value:"diagnostic-test"})).then(function(x){x.success&&c(x.data)}).finally(function(){return U(!1)});case 4:case"end":return d.stop()}},n)}));return function(n){return o.apply(this,arguments)}}(),[]);return Object(E.useEffect)(function(){u()},[u]),y?Object(a.jsxs)("div",{style:{position:"relative",paddingBottom:"64px"},children:[Object(a.jsx)(k.a,{submitter:{render:function(n,m){var f=Object(N.a)(m,2),d=f[0],x=f[1];return Object(a.jsxs)(Q.b,{style:{position:"absolute",bottom:0,left:0},children:[d,x]})}},initialValues:y,onFinish:j,children:Object(a.jsxs)(oe.a,{children:[Object(a.jsx)(Qe.a,{name:"max_attempts",label:Object(a.jsx)(v.a,{id:"max_attempts"}),tooltip:Object(a.jsx)(v.a,{id:"max_attempts"}),placeholder:l.formatMessage({id:"max_attempts",defaultMessage:"max_attempts"})}),Object(a.jsx)(Qe.a,{name:"max_execution_time",label:Object(a.jsx)(v.a,{id:"max_execution_time"}),tooltip:Object(a.jsx)(v.a,{id:"max_execution_time"}),placeholder:l.formatMessage({id:"max_execution_time",defaultMessage:"max_execution_time"})})]})}),Object(a.jsx)(Ne.a,{}),Object(a.jsx)(Be.a,{questions:y.questions,quizId:y.id,onAdded:u,onEdited:u,onRemoved:u,tableHeader:Object(a.jsx)(v.a,{id:"questions"}),tableLoading:H,questionsCategory:{disabledDepth:1}})]}):Object(a.jsx)(W.a,{})},Ke=function(){var S,h=Object(E.useState)(!1),L=Object(N.a)(h,2),D=L[0],H=L[1],U=Object(E.useState)(),se=Object(N.a)(U,2),B=se[0],y=se[1],c=Object(v.l)(),l=Object(le.l)(),u=l.id,j=l.tab,o=j===void 0?"main":j,n=u==="new",m=Number(u),f=Object(E.useMemo)(function(){return n?c.formatMessage({id:"CompetencyChallenges.new_challenge"}):B!=null&&B.name?B.name:c.formatMessage({id:"menu.Competency challenges"})},[c,B==null?void 0:B.name]),d=Object(E.useCallback)(function(){Number.isNaN(m)||(H(!0),Object(X.e)(m).then(function(x){x.success&&y(x.data)}).finally(function(){return H(!1)}))},[m]);return Object(E.useEffect)(function(){d()},[d]),Object(a.jsx)(K.a,{title:f,header:{breadcrumb:{routes:[{path:"competency-challenges",breadcrumbName:c.formatMessage({id:"menu.Competency challenges"})},{path:String(u),breadcrumbName:f},{path:o,breadcrumbName:c.formatMessage({id:"CompetencyChallenges.".concat(o)})}]}},children:Object(a.jsxs)(_.a,{bodyStyle:{padding:"24px"},tabs:{type:"card",cardProps:{loading:D&&Object(a.jsx)(W.a,{})},activeKey:o,onChange:function(g){v.f.push("/competency-challenges/".concat(u,"/").concat(g))}},children:[Object(a.jsx)(_.a.TabPane,{tab:Object(a.jsx)(v.a,{id:"CompetencyChallenges.main"}),children:Object(a.jsx)(A,{competency_challenge_id:m,data:B,onUpdateSuccess:d})},"main"),Object(a.jsx)(_.a.TabPane,{tab:Object(a.jsx)(v.a,{id:"CompetencyChallenges.scales"}),disabled:n,children:Object(a.jsx)(ze,{competency_challenge_id:m,scales:(S=B==null?void 0:B.scales)!==null&&S!==void 0?S:[],onScaleDelete:d,onScaleAdd:d,onScaleUpdate:d})},"scales"),Object(a.jsx)(_.a.TabPane,{tab:Object(a.jsx)(v.a,{id:"CompetencyChallenges.diagnostic-test"}),disabled:n,children:Object(a.jsx)(Xe,{data:B})},"diagnostic-test")]})})},Ze=$.default=Ke},YRX9:function(ge,$,t){"use strict";t.d($,"f",function(){return v}),t.d($,"e",function(){return K}),t.d($,"a",function(){return X}),t.d($,"g",function(){return s}),t.d($,"c",function(){return b}),t.d($,"b",function(){return k}),t.d($,"h",function(){return q}),t.d($,"d",function(){return je});var w=t("qLMh"),W=t("k1fw"),N=t("9og8"),E=t("9kvl");function v(R,T){return le.apply(this,arguments)}function le(){return le=Object(N.a)(Object(w.a)().mark(function R(T,F){return Object(w.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",Object(E.i)("/api/admin/competency-challenges",Object(W.a)({method:"GET",useCache:!1,params:T},F||{})));case 1:case"end":return C.stop()}},R)})),le.apply(this,arguments)}function K(R,T){return _.apply(this,arguments)}function _(){return _=Object(N.a)(Object(w.a)().mark(function R(T,F){return Object(w.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",Object(E.i)("/api/admin/competency-challenges/".concat(T),Object(W.a)({method:"GET",useCache:!1},F||{})));case 1:case"end":return C.stop()}},R)})),_.apply(this,arguments)}function X(R,T){return Z.apply(this,arguments)}function Z(){return Z=Object(N.a)(Object(w.a)().mark(function R(T,F){return Object(w.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",Object(E.i)("/api/admin/competency-challenges",Object(W.a)({method:"POST",headers:{"Content-Type":"application/json"},data:T},F||{})));case 1:case"end":return C.stop()}},R)})),Z.apply(this,arguments)}function s(R,T,F){return O.apply(this,arguments)}function O(){return O=Object(N.a)(Object(w.a)().mark(function R(T,F,a){return Object(w.a)().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",Object(E.i)("/api/admin/competency-challenges/".concat(T),Object(W.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:F},a||{})));case 1:case"end":return A.stop()}},R)})),O.apply(this,arguments)}function b(R,T){return M.apply(this,arguments)}function M(){return M=Object(N.a)(Object(w.a)().mark(function R(T,F){return Object(w.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",Object(E.i)("/api/admin/competency-challenges/".concat(T),Object(W.a)({method:"DELETE"},F||{})));case 1:case"end":return C.stop()}},R)})),M.apply(this,arguments)}function k(R,T){return ae.apply(this,arguments)}function ae(){return ae=Object(N.a)(Object(w.a)().mark(function R(T,F){return Object(w.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",Object(E.i)("/api/admin/competency-challenges/scales",Object(W.a)({method:"POST",headers:{"Content-Type":"application/json"},data:T},F||{})));case 1:case"end":return C.stop()}},R)})),ae.apply(this,arguments)}function q(R,T,F){return ne.apply(this,arguments)}function ne(){return ne=Object(N.a)(Object(w.a)().mark(function R(T,F,a){return Object(w.a)().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",Object(E.i)("/api/admin/competency-challenges/scales/".concat(T),Object(W.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:F},a||{})));case 1:case"end":return A.stop()}},R)})),ne.apply(this,arguments)}function je(R,T){return be.apply(this,arguments)}function be(){return be=Object(N.a)(Object(w.a)().mark(function R(T,F){return Object(w.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",Object(E.i)("/api/admin/competency-challenges/scales/".concat(T),Object(W.a)({method:"DELETE"},F||{})));case 1:case"end":return C.stop()}},R)})),be.apply(this,arguments)}},hd5d:function(ge,$,t){"use strict";var w=t("qLMh"),W=t("9og8"),N=t("q1tI"),E=t.n(N),v=t("acco"),le=t.n(v),K=t("BAh9"),_=t("vtG9"),X=t.n(_),Z=t("9kvl"),s=t("nKUr"),O=t.n(s),b=function(ae){var q=ae.attrs,ne=q.href,je=ne.split("/").pop();return Object(s.jsx)("p",{children:Object(s.jsx)("a",{rel:"noreferrer",href:ne,target:"_blank",children:je})})},M=function(ae){var q=ae.value,ne=ae.onChange,je=ae.directory,be=je===void 0?"/wysiwyg":je,R=Object(Z.l)();return Object(s.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(s.jsx)(le.a,{excludeBlockMenuItems:["Sketch"],embeds:[{matcher:function(F){return!0},component:b}],uploadImage:function(){var T=Object(W.a)(Object(w.a)().mark(function F(a){var C,A;return Object(w.a)().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.next=2,Object(K.e)(a,be);case 2:if(C=ce.sent,!C.success){ce.next=8;break}if(!a.type.includes("image/")){ce.next=7;break}return A=C.data[0].name.includes("/")?C.data[0].name:"".concat(be).concat(C.data[0].name),ce.abrupt("return",Object(K.d)(A,1e3));case 7:return ce.abrupt("return",C.data[0].url);case 8:throw new Error("Error while uploading");case 9:case"end":return ce.stop()}},F)}));return function(F){return T.apply(this,arguments)}}(),defaultValue:q||"",onChange:function(F){return ne&&ne(F())},placeholder:R.formatMessage({id:"wysiwyg_placeholder"})})})};$.a=M},vtG9:function(ge,$,t){},yioT:function(ge,$,t){"use strict";t.d($,"a",function(){return B});var w=t("tU7J"),W=t("wFql"),N=t("BoS7"),E=t("Sdc0"),v=t("oBTY"),le=t("+L6B"),K=t("2/Rp"),_=t("bbsP"),X=t("/wGt"),Z=t("PpiC"),s=t("tJVT"),O=t("k1fw"),b=t("q1tI"),M=t("9kvl"),k=t("YJCA"),ae=t("wYyv"),q=t("smpX"),ne=t("eyie"),je=t("w5pM"),be=t("mWMg"),R=t("Vpfc"),T=t("qRSf"),F=t("giR+"),a=t("fyUT"),C=t("DYRE"),A=t("zeV3"),Fe=t("OaEy"),ce=t("2fM7"),Ye=t("/zsF"),$e=t("PArb"),ue=t("jrin"),et=t("sRBo"),xe=t("kaz8"),Je=t("5Dmo"),me=t("3S7+"),we=t("iJl9"),re=t.n(we),Ie=t("/MfK"),he=t("Fghh"),e=t("nKUr"),Pe=function(c){var l=c.value,u=c.onChange,j=Object(b.useMemo)(function(){if(l)return Object(q.parse)(l)},[l]),o=Object(he.k)(),n=Object(b.useMemo)(function(){if(j&&j[0].type==="MC")return j[0]},[j]),m=Object(b.useCallback)(function(r,i){u("".concat(r,"{").concat(i.map(function(p){return"".concat(p.isCorrect?"=":"~").concat(p.weight?"%".concat(p.weight,"%"):"").concat(p.text.text)}).join(" "),"}"))},[]),f=Object(b.useCallback)(function(r){n&&m(r,n==null?void 0:n.choices)},[n]),d=Object(b.useCallback)(function(r,i){if(n){var p=n.choices.map(function(I,Y){return Y===i?r:I});m(n.stem.text,p)}},[n]),x=Object(b.useCallback)(function(){if(n){var r={text:{format:"moodle",text:"New Choice"},weight:null,feedback:null,isCorrect:!1},i=[].concat(Object(v.a)(n.choices),[r]);m(n.stem.text,i)}},[n]),g=Object(b.useCallback)(function(r){if(n){var i=n.choices.filter(function(p,I){return I!==r});m(n.stem.text,i)}},[n]);return Object(e.jsx)("div",{children:n&&Object(e.jsxs)(A.b,{direction:"vertical",size:"middle",style:{display:"flex"},children:[Object(e.jsx)(me.a,{title:o.formatMessage({id:"multipleChoiceTooltip",defaultMessage:'Title, use `_____` for "Mark the Word" question type'}),children:Object(e.jsx)(re.a,{size:"small",value:n.stem.text,onChange:function(i){return f(i.target.value)}})}),b.Children.toArray(n.choices.map(function(r,i){return Object(e.jsx)("div",{children:Object(e.jsxs)(A.b,{direction:"horizontal",children:[Object(e.jsx)(me.a,{title:o.formatMessage({id:"correctAnswer",defaultMessage:"Is Correct Answer?"}),children:Object(e.jsx)(xe.a,{checked:r.isCorrect,onChange:function(I){return d(Object(O.a)(Object(O.a)({},r),{},{isCorrect:I.target.checked}),i)}})}),Object(e.jsx)(me.a,{title:o.formatMessage({id:"answer",defaultMessage:"Answer"}),children:Object(e.jsx)(re.a,{size:"small",value:r.text.text,onChange:function(I){return d(Object(O.a)(Object(O.a)({},r),{},{text:Object(O.a)(Object(O.a)({},r.text),{},{text:I.target.value})}),i)}})}),Object(e.jsx)(me.a,{title:o.formatMessage({id:"weight",defaultMessage:"Weight"}),children:Object(e.jsx)(a.a,{size:"small",addonAfter:"%",defaultValue:void 0,value:r.weight,min:1,max:100,onChange:function(I){d(Object(O.a)(Object(O.a)({},r),{},{weight:I!=null?I:null}),i)}})}),Object(e.jsx)(K.a,{size:"small",icon:Object(e.jsx)(Ie.a,{}),onClick:function(){return g(i)},disabled:n.choices.length<=2})]})})})),Object(e.jsx)(K.a,{size:"small",onClick:function(){return x()},children:Object(e.jsx)(M.a,{id:"Questions.add",defaultMessage:"Add question"})})]})})},Ae=function(c){var l=c.value,u=c.onChange,j=Object(b.useMemo)(function(){if(l)return Object(q.parse)(l)},[l]),o=Object(b.useMemo)(function(){if(j&&j[0].type==="Essay")return j[0]},[j]),n=Object(b.useCallback)(function(f){u("".concat(f,"{}"))},[]),m=Object(b.useMemo)(function(){return o==null?void 0:o.stem.text},[o]);return Object(e.jsx)("div",{children:o&&Object(e.jsx)(A.b,{direction:"vertical",size:"middle",style:{display:"flex"},children:Object(e.jsx)(re.a.TextArea,{defaultValue:m,size:"small",value:m,onChange:function(d){return n(d.target.value)}})})})},De=function(c){var l=c.value,u=c.onChange,j=Object(b.useMemo)(function(){if(l)return Object(q.parse)(l)},[l]),o=Object(he.k)(),n=Object(b.useMemo)(function(){if(j&&j[0].type==="TF")return j[0]},[j]),m=Object(b.useCallback)(function(f,d){u("".concat(f,"{").concat(d?"T":"F","}"))},[]);return Object(e.jsx)("div",{children:n&&Object(e.jsxs)(A.b,{direction:"vertical",size:"middle",style:{display:"flex"},children:[Object(e.jsx)(me.a,{title:o.formatMessage({id:"trueAnswer",defaultMessage:"True Statement"}),children:Object(e.jsx)(xe.a,{checked:n.isTrue,onChange:function(d){return m(n.stem.text,d.target.checked)}})}),Object(e.jsx)(re.a.TextArea,{size:"small",value:n.stem.text,onChange:function(d){return m(d.target.value,n.isTrue)}})]})})},Re=function(c){var l=c.value,u=c.onChange,j=Object(b.useMemo)(function(){if(l)return Object(q.parse)(l)},[l]),o=Object(b.useMemo)(function(){if(j&&j[0].type==="Matching")return j[0]},[j]),n=Object(b.useCallback)(function(g,r){u("".concat(g,`{
        `).concat(r.map(function(i){return"=".concat(i.subquestion.text," -> ").concat(i.subanswer)}).join(`
`),`
      }`))},[]),m=Object(b.useCallback)(function(g){o&&n(g,o==null?void 0:o.matchPairs)},[o]),f=Object(b.useCallback)(function(g,r){if(o){var i=o.matchPairs.map(function(p,I){return I===r?g:p});n(o.stem.text,i)}},[o]),d=Object(b.useCallback)(function(){if(o){var g={subanswer:"Answer",subquestion:{format:"moodle",text:"New Question"}},r=[].concat(Object(v.a)(o.matchPairs),[g]);n(o.stem.text,r)}},[o]),x=Object(b.useCallback)(function(g){if(o){var r=o.matchPairs.filter(function(i,p){return p!==g});n(o.stem.text,r)}},[o]);return Object(e.jsx)("div",{children:o&&Object(e.jsxs)(A.b,{direction:"vertical",size:"middle",style:{display:"flex"},children:[Object(e.jsx)(re.a,{size:"small",value:o.stem.text,onChange:function(r){return m(r.target.value)}}),b.Children.toArray(o.matchPairs.map(function(g,r){return Object(e.jsx)("div",{children:Object(e.jsxs)(A.b,{direction:"horizontal",children:[Object(e.jsx)(re.a,{size:"small",value:g.subquestion.text,onChange:function(p){return f(Object(O.a)(Object(O.a)({},g),{},{subquestion:Object(O.a)(Object(O.a)({},g.subquestion),{},{text:p.target.value})}),r)}}),Object(e.jsx)(re.a,{size:"small",value:g.subanswer,onChange:function(p){return f(Object(O.a)(Object(O.a)({},g),{},{subanswer:p.target.value}),r)}}),Object(e.jsx)(K.a,{size:"small",icon:Object(e.jsx)(Ie.a,{}),onClick:function(){return x(r)}})]})})})),Object(e.jsx)(K.a,{size:"small",onClick:function(){return d()},children:Object(e.jsx)(M.a,{id:"Questions.addMatchingPair",defaultMessage:"Add Matching Pair"})})]})})},Le=function(c){var l=c.value,u=c.onChange,j=Object(b.useMemo)(function(){if(l)return Object(q.parse)(l)},[l]),o=Object(b.useMemo)(function(){if(j&&j[0].type==="Description")return j[0]},[j]),n=Object(b.useCallback)(function(m){u("".concat(m))},[]);return Object(e.jsx)("div",{children:o&&Object(e.jsx)(A.b,{direction:"vertical",size:"middle",style:{display:"flex"},children:Object(e.jsx)(re.a.TextArea,{size:"small",value:o.stem.text,onChange:function(f){return n(f.target.value)}})})})},ze=function(c){var l=c.value,u=c.onChange,j=Object(b.useMemo)(function(){if(l)return Object(q.parse)(l)},[l]),o=Object(he.k)(),n=Object(b.useMemo)(function(){if(j&&j[0].type==="Numerical")return j[0]},[j]),m=Object(b.useCallback)(function(f,d){u("".concat(f,"{#").concat(d.number,":").concat(d.range,"}"))},[]);return Object(e.jsx)("div",{children:n&&Object(e.jsxs)(A.b,{direction:"horizontal",size:"middle",style:{display:"flex"},children:[Object(e.jsx)(re.a,{size:"small",value:n.stem.text,onChange:function(d){return m(d.target.value,n.choices)}}),Object(e.jsx)(me.a,{title:o.formatMessage({id:"correctAnswer",defaultMessage:"Correct Answer"}),children:Object(e.jsx)(a.a,{size:"small",value:n.choices.number,onChange:function(d){d&&m(n.stem.text,Object(O.a)(Object(O.a)({},n.choices),{},{number:d}))}})}),Object(e.jsx)(me.a,{title:o.formatMessage({id:"errorMargin",defaultMessage:"Error Margin"}),children:Object(e.jsx)(a.a,{size:"small",defaultValue:0,addonAfter:"+/-",value:n.choices.range,onChange:function(d){m(n.stem.text,Object(O.a)(Object(O.a)({},n.choices),{},{range:d!=null?d:0}))}})})]})})},We=function(c){var l=c.value,u=c.onChange,j=Object(b.useMemo)(function(){if(l)return Object(q.parse)(l)},[l]),o=Object(he.k)(),n=Object(b.useMemo)(function(){if(j&&j[0].type==="Short")return j[0]},[j]),m=Object(b.useCallback)(function(r,i){u("".concat(r,"{").concat(i.map(function(p){return"=".concat(p.text.text)}).join(" "),"}"))},[]),f=Object(b.useCallback)(function(r){n&&m(r,n==null?void 0:n.choices)},[n]),d=Object(b.useCallback)(function(r,i){if(n){var p=n.choices.map(function(I,Y){return Y===i?r:I});m(n.stem.text,p)}},[n]),x=Object(b.useCallback)(function(){if(n){var r={text:{format:"moodle",text:"New Answer"},weight:null,feedback:null,isCorrect:!1},i=[].concat(Object(v.a)(n.choices),[r]);m(n.stem.text,i)}},[n]),g=Object(b.useCallback)(function(r){if(n){var i=n.choices.filter(function(p,I){return I!==r});m(n.stem.text,i)}},[n]);return Object(e.jsx)("div",{children:n&&Object(e.jsxs)(A.b,{direction:"vertical",size:"middle",style:{display:"flex"},children:[Object(e.jsx)(re.a,{size:"small",value:n.stem.text,onChange:function(i){return f(i.target.value)}}),b.Children.toArray(n.choices.map(function(r,i){return Object(e.jsx)("div",{children:Object(e.jsxs)(A.b,{direction:"horizontal",children:[Object(e.jsx)(me.a,{title:o.formatMessage({id:"answer",defaultMessage:"Answer"}),children:Object(e.jsx)(re.a,{size:"small",value:r.text.text,onChange:function(I){return d(Object(O.a)(Object(O.a)({},r),{},{text:Object(O.a)(Object(O.a)({},r.text),{},{text:I.target.value})}),i)}})}),Object(e.jsx)(K.a,{size:"small",icon:Object(e.jsx)(Ie.a,{}),onClick:function(){return g(i)}})]})})})),Object(e.jsx)(K.a,{size:"small",onClick:function(){return x()},children:Object(e.jsx)(M.a,{id:"Questions.add",defaultMessage:"Add Question"})})]})})};function Ne(y){var c=["number","undefined"];return c.includes(typeof y)}var He=t("CEpB"),Q=t("/y+f"),oe,Qe=(oe={},Object(ue.a)(oe,Q.d.DESCRIPTION,"You can use your pencil and paper for these next math questions."),Object(ue.a)(oe,Q.d.ESSAY,"Write a short biography of Dag Hammarskj\xF6ld. {}"),Object(ue.a)(oe,Q.d.MATCHING,`Match the following countries with their corresponding capitals. {
        =Canada -> Ottawa
        =Italy  -> Rome
        =Japan  -> Tokyo
        =India  -> New Delhi
        }`),Object(ue.a)(oe,Q.d.MULTIPLE_CHOICE,"Who's buried in Grant's tomb?{=Grant ~no one ~Napoleon ~Churchill ~Mother Teresa }"),Object(ue.a)(oe,Q.d.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS,`What two people are entombed in Grant's tomb? {
        ~%-100%No one
        ~%50%Grant
        ~%50%Grant's wife
        ~%-100%Grant's father
     }`),Object(ue.a)(oe,Q.d.NUMERICAL_QUESTION,"When was Ulysses S. Grant born?{#1822:5}"),Object(ue.a)(oe,Q.d.SHORT_ANSWERS,"Who's buried in Grant's tomb?{=Grant =Ulysses S. Grant =Ulysses Grant}"),Object(ue.a)(oe,Q.d.TRUE_FALSE,"Grant was buried in a tomb in New York City.{T}"),oe),Be=Object.values(Q.d).reduce(function(y,c){return c?[].concat(Object(v.a)(y),[{value:c,label:Object(e.jsx)(M.a,{id:"gift_type.".concat(c)})}]):y},[]),Ue=function(c){var l=c.value,u=c.onChange,j=c.loading,o=j===void 0?!1:j,n=c.onCreate,m=c.categoryProps,f=m===void 0?!1:m,d=c.debug,x=d===void 0?!1:d,g=Object(b.useState)(),r=Object(s.a)(g,2),i=r[0],p=r[1],I=Object(b.useState)(),Y=Object(s.a)(I,2),V=Y[0],ie=Y[1];return Object(b.useEffect)(function(){u(function(G){return Object(O.a)(Object(O.a)({},G),{},{value:i?Qe[i]:"",score:l.score})})},[i]),Object(b.useEffect)(function(){u(function(G){return Object(O.a)(Object(O.a)({},G),{},{category_id:V})})},[V]),Object(e.jsxs)(A.b,{direction:"vertical",style:{display:"flex"},children:[Object(e.jsx)($e.a,{children:Object(e.jsx)(M.a,{id:"addNewQuestion",defaultMessage:"New Question"})}),Object(e.jsxs)(A.b,{wrap:!0,children:[Object(e.jsxs)(W.a,{children:[Object(e.jsx)(M.a,{id:"type",defaultMessage:"Type:"}),":"]}),Object(e.jsx)(ce.a,{value:i,onChange:function(P){return p(P)},placeholder:Object(e.jsx)(M.a,{id:"selectNewQuestionType",defaultMessage:"Select new question type"}),options:Be,style:{maxWidth:"330px"}})]}),f&&Object(e.jsxs)(A.b,{wrap:!0,children:[Object(e.jsxs)(W.a,{children:[Object(e.jsx)(M.a,{id:"category",defaultMessage:"Category"}),":"]}),Object(e.jsx)(He.a,Object(O.a)(Object(O.a)({},typeof f=="object"?f:{}),{},{value:V,onChange:function(P){return Ne(P)&&ie(P)}}))]}),(i===Q.d.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS||i===Q.d.MULTIPLE_CHOICE)&&Object(e.jsx)(Pe,{value:l.value,onChange:function(P){return u({value:P,score:l.score})}}),i===Q.d.ESSAY&&Object(e.jsx)(Ae,{value:l.value,onChange:function(P){return u({value:P,score:l.score})}}),i===Q.d.DESCRIPTION&&Object(e.jsx)(Le,{value:l.value,onChange:function(P){return u({value:P,score:l.score})}}),i===Q.d.TRUE_FALSE&&Object(e.jsx)(De,{value:l.value,onChange:function(P){return u({value:P,score:l.score})}}),i===Q.d.MATCHING&&Object(e.jsx)(Re,{value:l.value,onChange:function(P){return u({value:P,score:l.score})}}),i===Q.d.NUMERICAL_QUESTION&&Object(e.jsx)(ze,{value:l.value,onChange:function(P){return u({value:P,score:l.score})}}),i===Q.d.SHORT_ANSWERS&&Object(e.jsx)(We,{value:l.value,onChange:function(P){return u({value:P,score:l.score})}}),i&&Object(e.jsxs)(A.b,{children:[Object(e.jsxs)(W.a,{children:[Object(e.jsx)(M.a,{id:"Questions.score",defaultMessage:"Score"}),":"]}),Object(e.jsx)(a.a,{disabled:o,size:"small",value:l.score,onChange:function(P){return u({score:P!=null?P:1,value:l.value})}})]}),i&&Object(e.jsx)(K.a,{loading:o,size:"small",type:"primary",onClick:function(){n(),p(void 0),ie(void 0)},children:Object(e.jsx)(M.a,{id:"Questions.create",defaultMessage:"Create Question"})},"new"),i&&x&&Object(e.jsx)(W.a.Paragraph,{code:!0,children:l.value})]})},Xe=t("5NDa"),Ke=t("5rEg"),Ze=function(c){var l=c.type,u=c.value,j=c.onChange,o=c.loading,n=o===void 0?!1:o,m=Object(b.useCallback)(function(f){f!==u&&j(f)},[]);switch(l){case Q.d.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS:case Q.d.MULTIPLE_CHOICE:return Object(e.jsx)(Pe,{value:u,onChange:m});case Q.d.ESSAY:return Object(e.jsx)(Ae,{value:u,onChange:m});case Q.d.DESCRIPTION:return Object(e.jsx)(Le,{value:u,onChange:m});case Q.d.TRUE_FALSE:return Object(e.jsx)(De,{value:u,onChange:m});case Q.d.MATCHING:return Object(e.jsx)(Re,{value:u,onChange:m});case Q.d.NUMERICAL_QUESTION:return Object(e.jsx)(ze,{value:u,onChange:m});case Q.d.SHORT_ANSWERS:return Object(e.jsx)(We,{value:u,onChange:m});default:return Object(e.jsx)(Ke.a.TextArea,{disabled:n,value:u,onChange:function(d){return m(d.target.value)}})}},ee=function(c){var l,u=c.question,j=c.onRemoved,o=c.onEdited,n=c.quizId,m=c.loading,f=m===void 0?!1:m,d=c.onLoading,x=c.debug,g=x===void 0?!1:x,r=c.categoryProps,i=r===void 0?!1:r,p=Object(b.useState)(u.value),I=Object(s.a)(p,2),Y=I[0],V=I[1],ie=Object(b.useState)(u.score),G=Object(s.a)(ie,2),P=G[0],de=G[1],Ee=Object(b.useState)((l=u.category_id)!==null&&l!==void 0?l:void 0),z=Object(s.a)(Ee,2),ve=z[0],Me=z[1];return Object(e.jsxs)(A.b,{direction:"vertical",style:{display:"flex"},children:[Object(e.jsx)($e.a,{children:Object(e.jsx)(M.a,{id:"gift_type.".concat(u.type)})}),i&&Object(e.jsxs)(A.b,{wrap:!0,children:[Object(e.jsxs)(W.a,{children:[Object(e.jsx)(M.a,{id:"category",defaultMessage:"Category"}),":"]}),Object(e.jsx)(He.a,Object(O.a)(Object(O.a)({},typeof i=="object"?i:{}),{},{value:ve,onChange:function(fe){return Ne(fe)&&Me(fe)}}))]}),Object(e.jsx)(Ze,{type:u.type,loading:f,value:Y,onChange:function(fe){return V(fe)}}),Object(e.jsxs)(A.b,{children:[Object(e.jsxs)(W.a,{children:[Object(e.jsx)(M.a,{id:"Questions.score",defaultMessage:"Score"}),":"]}),Object(e.jsx)(a.a,{disabled:f,size:"small",value:P,onChange:function(fe){return fe&&de(fe)}})]}),g&&Object(e.jsx)(W.a.Paragraph,{code:!0,children:Y}),Object(e.jsx)(K.a,{loading:f,size:"small",type:"primary",onClick:function(){d(),Object(T.g)(u.id,Object(O.a)(Object(O.a)({},u),{},{topic_gift_quiz_id:n,value:Y,score:P,category_id:ve})).then(function(){o&&o()})},children:Object(e.jsx)(M.a,{id:"Questions.edit",defaultMessage:"Edit Question"})},"update"),Object(e.jsx)(K.a,{loading:f,size:"small",danger:!0,onClick:function(){d(),Object(T.b)(u.id).then(function(){j&&j()})},children:Object(e.jsx)(M.a,{id:"Questions.delete",defaultMessage:"Delete Question"})},"delete")]})},S=t("60mZ"),h=["className","style"],L=Object(k.c)(function(){return Object(e.jsx)(ne.a,{style:{cursor:"grab",color:"#999"}})}),D=Object(k.b)(function(y){return Object(e.jsx)("tr",Object(O.a)({},y))}),H=Object(k.a)(function(y){return Object(e.jsx)("tbody",Object(O.a)({},y))}),U=[{title:Object(e.jsx)(M.a,{id:"sort",defaultMessage:"sort"}),dataIndex:"id",width:60,className:"drag-visible",render:function(){return Object(e.jsx)(L,{})}},{title:Object(e.jsx)(M.a,{id:"type",defaultMessage:"Type"}),dataIndex:"type",hideInForm:!0,hideInSearch:!0,hideInSetting:!0,render:function(c,l){return Object(e.jsx)(M.a,{id:"gift_type.".concat(l.type)})}},{title:Object(e.jsx)(M.a,{id:"question",defaultMessage:"Question"}),dataIndex:"question",hideInForm:!0,hideInSearch:!0,hideInSetting:!0,render:function(c,l){var u=Object(q.parse)(l.value);return u!=null&&u[0]&&"stem"in u[0]?u[0].stem.text:"question"}}],se={title:Object(e.jsx)(M.a,{id:"category",defaultMessage:"Category"}),dataIndex:"category_id",hideInForm:!0,hideInSearch:!0,hideInSetting:!0,render:function(c,l){return typeof l.category_id=="number"?Object(e.jsx)(R.a,{type:"Category",type_id:l.category_id}):"-"}},B=function(c){var l=c.questions,u=c.onAdded,j=c.onRemoved,o=c.onEdited,n=c.quizId,m=c.tableLoading,f=c.tableHeader,d=c.questionsCategory,x=Object(b.useState)(),g=Object(s.a)(x,2),r=g[0],i=g[1],p=Object(b.useState)(!1),I=Object(s.a)(p,2),Y=I[0],V=I[1],ie=Object(b.useState)(!1),G=Object(s.a)(ie,2),P=G[0],de=G[1],Ee=Object(b.useState)(!1),z=Object(s.a)(Ee,2),ve=z[0],Me=z[1],pe=Object(b.useState)({score:1,value:""}),fe=Object(s.a)(pe,2),Ve=fe[0],ke=fe[1],tt=Object(b.useState)(l),qe=Object(s.a)(tt,2),Ge=qe[0],_e=qe[1],at=Object(b.useRef)();Object(b.useEffect)(function(){var J;(J=at.current)===null||J===void 0||J.reload(),_e(l)},[l]);var nt=function(te){var Ce=te.oldIndex,Se=te.newIndex;if(Ce!==Se){var Te=Object(ae.a)(Ge.slice(),Ce,Se).filter(Boolean).map(function(Oe,ye){return Object(O.a)(Object(O.a)({},Oe),{},{order:ye})});Te.forEach(function(Oe,ye){Oe.id!==Ge[ye].id&&Object(T.g)(Oe.id,Object(O.a)(Object(O.a)({},Oe),{},{order:ye+1,topic_gift_quiz_id:n}))}),_e(Te)}},rt=function(te){return Object(e.jsx)(H,Object(O.a)({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:nt},te))},st=function(te){var Ce=te.className,Se=te.style,Te=Object(Z.a)(te,h),Oe=Ge.findIndex(function(ye){return ye.id===Te["data-row-key"]});return Object(e.jsx)(D,Object(O.a)({index:Oe},Te))},it=Object(b.useCallback)(function(){V(!0),Object(T.a)(Object(O.a)({topic_gift_quiz_id:n},Ve)).catch(function(J){return console.log("err",J)}).then(function(){ke({value:"",score:1}),de(!1),u&&u()}).finally(function(){V(!1)})},[Ve,n]);return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(X.a,{open:!!r,onClose:function(){return i(void 0)},children:r&&Object(e.jsx)(ee,{debug:ve,onLoading:function(){return V(!0)},loading:Y,quizId:n,question:r,onRemoved:function(){j==null||j(),V(!1)},onEdited:function(){o==null||o(),V(!1)},categoryProps:d})}),Object(e.jsx)(X.a,{open:P,onClose:function(){return de(!1)},children:Object(e.jsx)(Ue,{debug:ve,onCreate:it,value:Ve,onChange:ke,categoryProps:d})}),Object(e.jsx)(be.a,{search:!1,cardProps:{bodyStyle:{padding:0}},loading:m,headerTitle:f,toolbar:{settings:[]},toolBarRender:function(){return[Object(e.jsxs)(K.a,{icon:Object(e.jsx)(je.a,{}),type:"primary",onClick:function(){return de(!0)},children:[" ",Object(e.jsx)(M.a,{id:"addNewQuestion",defaultMessage:"Add new question"})]},"add")]},columns:[].concat(U,Object(v.a)(d?[se]:[]),[{title:Object(e.jsx)(M.a,{id:"actions",defaultMessage:"Actions"}),dataIndex:"address",valueType:"option",render:function(te,Ce){return[Object(e.jsx)(K.a,{size:"small",type:"primary",onClick:function(){i(Ce)},children:Object(e.jsx)(M.a,{id:"Questions.edit",defaultMessage:"Edit Question"})},"edit"),Object(e.jsx)(K.a,{loading:Y,size:"small",danger:!0,onClick:function(){V(!0),Object(T.b)(Ce.id).then(function(){j&&j()}).finally(function(){V(!1)})},children:Object(e.jsx)(M.a,{id:"Questions.delete",defaultMessage:"Delete Question"})},"delete")]}}]),rowKey:function(te){return te.id},pagination:!1,dataSource:Ge,components:{body:{wrapper:rt,row:st}}}),Object(e.jsxs)(W.a,{style:{marginTop:"3em"},children:["Debug GIFT: ",Object(e.jsx)(E.a,{checked:ve,onChange:function(te){return Me(te)}})]})]})}}}]);
