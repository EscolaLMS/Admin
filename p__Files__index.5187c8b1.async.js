"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5093],{85118:function(F,g){var n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"};g.Z=n},69753:function(F,g,n){var y=n(1413),c=n(67294),D=n(49495),s=n(84089),_=function(I,A){return c.createElement(s.Z,(0,y.Z)((0,y.Z)({},I),{},{ref:A,icon:D.Z}))},T=c.forwardRef(_);g.Z=T},55725:function(F,g,n){var y=n(1413),c=n(67294),D=n(85118),s=n(84089),_=function(I,A){return c.createElement(s.Z,(0,y.Z)((0,y.Z)({},I),{},{ref:A,icon:D.Z}))},T=c.forwardRef(_);g.Z=T},1977:function(F,g,n){n.d(g,{n:function(){return Z}});var y=n(97685),c=n(71002),D=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,s=function(a){return a==="*"||a==="x"||a==="X"},_=function(a){var u=parseInt(a,10);return isNaN(u)?a:u},T=function(a,u){return(0,c.Z)(a)!==(0,c.Z)(u)?[String(a),String(u)]:[a,u]},m=function(a,u){if(s(a)||s(u))return 0;var h=T(_(a),_(u)),b=(0,y.Z)(h,2),M=b[0],E=b[1];return M>E?1:M<E?-1:0},I=function(a,u){for(var h=0;h<Math.max(a.length,u.length);h++){var b=m(a[h]||"0",u[h]||"0");if(b!==0)return b}return 0},A=function(a){var u,h=a.match(D);return h==null||(u=h.shift)===null||u===void 0||u.call(h),h},Z=function(a,u){var h=A(a),b=A(u),M=h.pop(),E=b.pop(),v=I(h,b);return v!==0?v:M||E?M?-1:1:0}},62914:function(F,g,n){n.d(g,{Z:function(){return Ze}});var y=n(87462),c=n(97685),D=n(4942),s=n(45987),_=n(67294),T=n(93967),m=n.n(T),I=n(86500),A=n(1350),Z=2,O=.16,a=.05,u=.05,h=.15,b=5,M=4,E=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function v(e){var t=e.r,o=e.g,r=e.b,C=(0,I.py)(t,o,r);return{h:C.h*360,s:C.s,v:C.v}}function P(e){var t=e.r,o=e.g,r=e.b;return"#".concat((0,I.vq)(t,o,r,!1))}function i(e,t,o){var r=o/100,C={r:(t.r-e.r)*r+e.r,g:(t.g-e.g)*r+e.g,b:(t.b-e.b)*r+e.b};return C}function f(e,t,o){var r;return Math.round(e.h)>=60&&Math.round(e.h)<=240?r=o?Math.round(e.h)-Z*t:Math.round(e.h)+Z*t:r=o?Math.round(e.h)+Z*t:Math.round(e.h)-Z*t,r<0?r+=360:r>=360&&(r-=360),r}function Q(e,t,o){if(e.h===0&&e.s===0)return e.s;var r;return o?r=e.s-O*t:t===M?r=e.s+O:r=e.s+a*t,r>1&&(r=1),o&&t===b&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function W(e,t,o){var r;return o?r=e.v+u*t:r=e.v-h*t,r>1&&(r=1),Number(r.toFixed(2))}function V(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=[],r=(0,A.uA)(e),C=b;C>0;C-=1){var U=v(r),k=P((0,A.uA)({h:f(U,C,!0),s:Q(U,C,!0),v:W(U,C,!0)}));o.push(k)}o.push(P(r));for(var w=1;w<=M;w+=1){var q=v(r),ee=P((0,A.uA)({h:f(q,w),s:Q(q,w),v:W(q,w)}));o.push(ee)}return t.theme==="dark"?E.map(function(G){var L=G.index,ie=G.opacity,pe=P(i((0,A.uA)(t.backgroundColor||"#141414"),(0,A.uA)(o[L]),ie*100));return pe}):o}var R={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},p={},S={};Object.keys(R).forEach(function(e){p[e]=V(R[e]),p[e].primary=p[e][5],S[e]=V(R[e],{theme:"dark",backgroundColor:"#141414"}),S[e].primary=S[e][5]});var N=p.red,X=p.volcano,ne=p.gold,Y=p.orange,re=p.yellow,te=p.lime,le=p.green,$=p.cyan,j=p.blue,se=p.geekblue,H=p.purple,K=p.magenta,me=p.grey,z=p.grey,fe=(0,_.createContext)({}),ue=fe,d=n(1413),l=n(71002),x=n(44958),B=n(27571),J=n(80334);function ae(e){return e.replace(/-(.)/g,function(t,o){return o.toUpperCase()})}function xe(e,t){(0,J.ZP)(e,"[@ant-design/icons] ".concat(t))}function he(e){return(0,l.Z)(e)==="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&((0,l.Z)(e.icon)==="object"||typeof e.icon=="function")}function Ce(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce(function(t,o){var r=e[o];switch(o){case"class":t.className=r,delete t.class;break;default:delete t[o],t[ae(o)]=r}return t},{})}function _e(e,t,o){return o?_.createElement(e.tag,(0,d.Z)((0,d.Z)({key:t},Ce(e.attrs)),o),(e.children||[]).map(function(r,C){return _e(r,"".concat(t,"-").concat(e.tag,"-").concat(C))})):_.createElement(e.tag,(0,d.Z)({key:t},Ce(e.attrs)),(e.children||[]).map(function(r,C){return _e(r,"".concat(t,"-").concat(e.tag,"-").concat(C))}))}function ye(e){return V(e)[0]}function Ee(e){return e?Array.isArray(e)?e:[e]:[]}var we={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},De=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,Te=function(t){var o=(0,_.useContext)(ue),r=o.csp,C=o.prefixCls,U=De;C&&(U=U.replace(/anticon/g,C)),(0,_.useEffect)(function(){var k=t.current,w=(0,B.A)(k);(0,x.hq)(U,"@ant-design-icons",{prepend:!0,csp:r,attachTo:w})},[])},Me=["icon","className","onClick","style","primaryColor","secondaryColor"],oe={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function Oe(e){var t=e.primaryColor,o=e.secondaryColor;oe.primaryColor=t,oe.secondaryColor=o||ye(t),oe.calculated=!!o}function be(){return(0,d.Z)({},oe)}var ce=function(t){var o=t.icon,r=t.className,C=t.onClick,U=t.style,k=t.primaryColor,w=t.secondaryColor,q=(0,s.Z)(t,Me),ee=_.useRef(),G=oe;if(k&&(G={primaryColor:k,secondaryColor:w||ye(k)}),Te(ee),xe(he(o),"icon should be icon definiton, but got ".concat(o)),!he(o))return null;var L=o;return L&&typeof L.icon=="function"&&(L=(0,d.Z)((0,d.Z)({},L),{},{icon:L.icon(G.primaryColor,G.secondaryColor)})),_e(L.icon,"svg-".concat(L.name),(0,d.Z)((0,d.Z)({className:r,onClick:C,style:U,"data-icon":L.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},q),{},{ref:ee}))};ce.displayName="IconReact",ce.getTwoToneColors=be,ce.setTwoToneColors=Oe;var ve=ce;function Pe(e){var t=Ee(e),o=(0,c.Z)(t,2),r=o[0],C=o[1];return ve.setTwoToneColors({primaryColor:r,secondaryColor:C})}function je(){var e=ve.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var Ie=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];Pe(j.primary);var de=_.forwardRef(function(e,t){var o=e.className,r=e.icon,C=e.spin,U=e.rotate,k=e.tabIndex,w=e.onClick,q=e.twoToneColor,ee=(0,s.Z)(e,Ie),G=_.useContext(ue),L=G.prefixCls,ie=L===void 0?"anticon":L,pe=G.rootClassName,Re=m()(pe,ie,(0,D.Z)((0,D.Z)({},"".concat(ie,"-").concat(r.name),!!r.name),"".concat(ie,"-spin"),!!C||r.name==="loading"),o),ge=k;ge===void 0&&w&&(ge=-1);var Be=U?{msTransform:"rotate(".concat(U,"deg)"),transform:"rotate(".concat(U,"deg)")}:void 0,Ue=Ee(q),Ae=(0,c.Z)(Ue,2),Le=Ae[0],Se=Ae[1];return _.createElement("span",(0,y.Z)({role:"img","aria-label":r.name},ee,{ref:t,tabIndex:ge,onClick:w,className:Re}),_.createElement(ve,{icon:r,primaryColor:Le,secondaryColor:Se,style:Be}))});de.displayName="AntdIcon",de.getTwoToneColor=je,de.setTwoToneColor=Pe;var Ze=de},20568:function(F,g,n){n.d(g,{Z:function(){return W}});var y=n(19632),c=n.n(y),D=n(97857),s=n.n(D),_=n(5574),T=n.n(_),m=n(67294),I=n(17578),A=n(78957),Z=n(25093),O=n(96365),a=n(14726),u=n(2487),h=n(72252),b=n(82061),M=n(55725),E=n(69753),v=n(80854),P=n(29477),i=n(85893),f=function(R){var p=R.directory,S=R.onUploaded;return(0,i.jsxs)(A.Z,{align:"start",children:[(0,i.jsxs)(Z.Z.Text,{children:[(0,i.jsx)(v.FormattedMessage,{id:"pages.files.filesBrowser"}),(0,i.jsx)(Z.Z.Text,{code:!0,children:p})]}),(0,i.jsx)(P.Z,{url:"/api/admin/file/upload",name:"file[]",data:{target:p},onUpload:function(X){X.success&&S(p,X.data)}})]})},Q=function(R){var p=R.defaultDirectory,S=p===void 0?"/":p,N=R.onFile,X=R.hideDeleteBtn,ne=X===void 0?!1:X,Y=R.forceLoading,re=Y===void 0?!1:Y,te=(0,v.useIntl)(),le=(0,m.useState)({loading:!1,name:"",directory:S,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),$=T()(le,2),j=$[0],se=$[1],H=(0,m.useRef)(),K=(0,m.useCallback)(function(d){se(function(l){return s()(s()({},l),{},{loading:d})})},[]),me=(0,m.useCallback)(function(d,l){d.success&&se(function(x){return s()(s()(s()({},x),d.data),{},{data:[{url:l.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(c()(d.data.data.map(function(B){return s()(s()({},B),{},{url:B.mime==="directory"?"".concat(l,"/").concat(B.name):B.url})}))).filter(function(B){return l==="/"||l===S?B.name!=="..":!0}),directory:l,loading:!1})})},[K]),z=(0,m.useCallback)(function(d){var l,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,B=function(){return H.current&&H.current.abort()};return B(),H.current=new AbortController,K(!0),(0,I.QZ)({directory:d,page:x},{signal:(l=H.current)===null||l===void 0?void 0:l.signal}).then(function(J){J.success&&me(J,d)}).catch(function(){return K(!1)}),function(){B()}},[K]);(0,m.useEffect)(function(){return z(S)},[S,z]);var fe=(0,m.useCallback)(function(d){K(!0),(0,I.Od)(d).then(function(){z(j.directory)}).catch(function(){K(!1)})},[z,K,j.directory]),ue=(0,m.useCallback)(function(d,l){var x,B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,J=function(){return H.current&&H.current.abort()};return J(),H.current=new AbortController,K(!0),(0,I.ht)({directory:d,name:l,page:B},{signal:(x=H.current)===null||x===void 0?void 0:x.signal}).then(function(ae){ae.success&&me(ae,d)}).catch(function(){return K(!1)}),function(){J()}},[K]);return(0,i.jsxs)("div",{className:"file-browser",children:[(0,i.jsxs)("div",{className:"file-browser__header",children:[(0,i.jsx)(O.Z,{placeholder:te.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(l){return se(function(x){return s()(s()({},x),{},{name:l.target.value})})},value:j.name}),(0,i.jsxs)("div",{children:[(0,i.jsx)(a.ZP,{className:"file-browser__button",onClick:function(){return z(j.directory)},children:(0,i.jsx)(v.FormattedMessage,{id:"reset"})}),(0,i.jsx)(a.ZP,{className:"file-browser__button",type:"primary",onClick:function(){return ue(j.directory,j.name)},children:(0,i.jsx)(v.FormattedMessage,{id:"query"})})]})]}),(0,i.jsx)(u.Z,{loading:j.loading||re,size:"small",itemLayout:"horizontal",dataSource:j.data,header:(0,i.jsx)(f,{directory:j.directory,onUploaded:function(l,x){x&&(z(l),N&&N(x,l))}}),footer:(0,i.jsx)(f,{directory:j.directory,onUploaded:function(l,x){z(l),x&&N&&N(x,l)}}),renderItem:function(l){return(0,i.jsx)(u.Z.Item,{actions:l.mime!=="directory"&&!ne?[(0,i.jsx)(a.ZP,{type:"default",danger:!0,icon:(0,i.jsx)(b.Z,{}),size:"small",onClick:function(){return fe(l.url)}},"dir")]:[],children:(0,i.jsx)(u.Z.Item.Meta,{avatar:l.mime==="directory"?(0,i.jsx)(a.ZP,{type:"primary",icon:(0,i.jsx)(M.Z,{}),size:"small",onClick:function(){return z(l.url)}}):(0,i.jsx)("a",{href:l.url,target:"_blank",rel:"noreferrer",children:(0,i.jsx)(a.ZP,{type:"default",icon:(0,i.jsx)(E.Z,{}),size:"small"})}),description:(0,i.jsx)(m.Fragment,{children:(0,i.jsx)(a.ZP,{type:"text",size:"small",onClick:function(){return l.mime==="directory"?z(l.url):N&&N(l,j.directory)},children:l.name})})})})}}),(0,i.jsx)(h.Z,{pageSizeOptions:[],current:j.current_page,total:j.total,pageSize:j.per_page,onChange:function(l){return z(j.directory,l)}})]})},W=Q},29477:function(F,g,n){var y=n(97857),c=n.n(y),D=n(5574),s=n.n(D),_=n(55523),T=n(75842),m=n(21974),I=n(67294),A=n(80854),Z=n(85893);function O(a){var u=a.onChange,h=a.onUpload,b=a.url,M=a.name,E=a.extra,v=a.accept,P=a.data,i=a.wrapInForm,f=i===void 0?!0:i,Q=a.title,W=a.formProps,V=a.maxFiles,R=a.clearListAfterUpload,p=a.hideLabel,S=a.disabled,N=a.showUploadList,X=(0,I.useState)(),ne=s()(X,2),Y=ne[0],re=ne[1],te=(0,A.useIntl)();return P&&P[M]&&delete P[M],(0,Z.jsx)(m.Z,{condition:f,wrap:function($){return(0,Z.jsx)(T.Z,c()(c()({},W),{},{children:$}))},children:(0,Z.jsx)(_.Z,{title:Q||" ".concat(te.formatMessage({id:"upload_click_here"})),placeholder:te.formatMessage({id:"upload_click_here"}),label:!p&&(0,Z.jsx)(A.FormattedMessage,{id:"upload"}),max:V!=null?V:2,fieldProps:{data:P,accept:v,name:M,showUploadList:N,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))},onChange:function($){re($),u&&u($),$.file.status==="done"&&(h&&h($.file.response),R&&re(void 0))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(b),extra:E,fileList:Y==null?void 0:Y.fileList,disabled:S})})}g.Z=O},8079:function(F,g,n){n.r(g);var y=n(20568),c=n(74453),D=n(4393),s=n(25093),_=n(67294),T=n(80854),m=n(85893);g.default=function(){return(0,m.jsx)(c._z,{children:(0,m.jsxs)(D.Z,{children:[(0,m.jsx)(s.Z.Text,{strong:!0,children:(0,m.jsx)(T.FormattedMessage,{id:"pages.files.content"})}),(0,m.jsx)(y.Z,{})]})})}},17578:function(F,g,n){n.d(g,{Od:function(){return b},QZ:function(){return I},ht:function(){return Z},pV:function(){return h},ws:function(){return a}});var y=n(15009),c=n.n(y),D=n(97857),s=n.n(D),_=n(99289),T=n.n(_),m=n(80854);function I(E,v){return A.apply(this,arguments)}function A(){return A=T()(c()().mark(function E(v,P){return c()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,m.request)("/api/admin/file/list",s()({method:"GET",params:v},P||{})));case 1:case"end":return f.stop()}},E)})),A.apply(this,arguments)}function Z(E,v){return O.apply(this,arguments)}function O(){return O=T()(c()().mark(function E(v,P){return c()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,m.request)("/api/admin/file/find",s()({method:"GET",params:v},P||{})));case 1:case"end":return f.stop()}},E)})),O.apply(this,arguments)}function a(E,v,P){return u.apply(this,arguments)}function u(){return u=T()(c()().mark(function E(v,P,i){var f;return c()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return f=new FormData,f.append("file[]",v),f.append("target",P),W.abrupt("return",(0,m.request)("/api/admin/file/upload",s()({method:"POST",data:f},i||{})));case 4:case"end":return W.stop()}},E)})),u.apply(this,arguments)}var h=function(v){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/images/img?path=").concat(v,"&w=").concat(P)};function b(E,v){return M.apply(this,arguments)}function M(){return M=T()(c()().mark(function E(v,P){return c()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,m.request)("/api/admin/file/delete",s()({method:"DELETE",data:{url:v}},P||{})));case 1:case"end":return f.stop()}},E)})),M.apply(this,arguments)}},15746:function(F,g,n){var y=n(21584);g.Z=y.Z},71230:function(F,g,n){var y=n(92820);g.Z=y.Z},97435:function(F,g){function n(y,c){for(var D=Object.assign({},y),s=0;s<c.length;s+=1){var _=c[s];delete D[_]}return D}g.Z=n}}]);
