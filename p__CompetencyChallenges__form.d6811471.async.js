(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"/y+f":function(Ue,M,e){"use strict";e.d(M,"g",function(){return p}),e.d(M,"e",function(){return o}),e.d(M,"f",function(){return F}),e.d(M,"d",function(){return z}),e.d(M,"a",function(){return J}),e.d(M,"c",function(){return I}),e.d(M,"b",function(){return _});var p;(function(c){c.Unselected="",c.RichText="EscolaLms\\TopicTypes\\Models\\TopicContent\\RichText",c.OEmbed="EscolaLms\\TopicTypes\\Models\\TopicContent\\OEmbed",c.Audio="EscolaLms\\TopicTypes\\Models\\TopicContent\\Audio",c.Video="EscolaLms\\TopicTypes\\Models\\TopicContent\\Video",c.H5P="EscolaLms\\TopicTypes\\Models\\TopicContent\\H5P",c.Image="EscolaLms\\TopicTypes\\Models\\TopicContent\\Image",c.PDF="EscolaLms\\TopicTypes\\Models\\TopicContent\\PDF",c.SCORM="EscolaLms\\TopicTypes\\Models\\TopicContent\\ScormSco",c.Project="EscolaLms\\TopicTypeProject\\Models\\Project",c.GiftQuiz="EscolaLms\\TopicTypeGift\\Models\\GiftQuiz"})(p||(p={}));var N;(function(c){c.OrderPaid="EscolaLms\\Cart\\Events\\OrderPaid",c.UserLogged="EscolaLms\\Auth\\Events\\UserLogged"})(N||(N={}));var O;(function(c){c.draft="draft",c.published="published",c.archived="archived"})(O||(O={}));var o;(function(c){c.email="EscolaLms\\TemplatesEmail\\Core\\EmailChannel",c.pdf="EscolaLms\\TemplatesPdf\\Core\\PdfChannel",c.sms="EscolaLms\\TemplatesSms\\Core\\SmsChannel"})(o||(o={}));var F;(function(c){c.ManuallyTriggeredEvent="EscolaLms\\Templates\\Events\\ManuallyTriggeredEvent"})(F||(F={}));var ve;(function(c){c.cart_fixed="cart_fixed",c.cart_percent="cart_percent",c.product_fixed="product_fixed",c.product_percent="product_percent"})(ve||(ve={}));var z;(function(c){c.MULTIPLE_CHOICE="multiple_choice",c.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS="multiple_choice_with_multiple_right_answers",c.TRUE_FALSE="true_false",c.SHORT_ANSWERS="short_answers",c.MATCHING="matching",c.NUMERICAL_QUESTION="numerical_question",c.ESSAY="essay",c.DESCRIPTION="description"})(z||(z={}));var J;(function(c){c.PRESENT="present",c.PRESENT_NOT_EXERCISING="present_not_exercising",c.ABSENT="absent",c.EXCUSED_ABSENCE="excused_absence"})(J||(J={}));var I;(function(c){c.Manual="manual",c.TeamsForms="teams_forms",c.TeamsLecture="teams_lecture",c.TestPortal="test_portal"})(I||(I={}));var _;(function(c){c.Simple="simple",c.Complex="complex"})(_||(_={}))},"60mZ":function(Ue,M,e){},EKp7:function(Ue,M,e){"use strict";e.r(M);var p=e("T2oS"),N=e("W9HT"),O=e("q1tI"),o=e("9kvl"),F=e("Ty5D"),ve=e("tMyG"),z=e("nhC9"),J=e("tKSU"),I=e("qLMh"),_=e("miYZ"),c=e("tsqr"),se=e("9og8"),D=e("k1fw"),C=e("PpiC"),y=e("tJVT"),n=e("VMEa"),w=e("Qurx"),Q=e("yj/a"),Z=e("F/zT"),H=e("BiO0"),E=e("CEpB"),f=e("0WSk"),x=e("Gn8c"),$=e("hd5d"),j=e("YRX9"),U=e("/y+f"),r=e("nKUr"),ie=["authors","category"],fe=Object.values(U.b).map(function(pe){return{value:pe,label:Object(r.jsx)(o.a,{id:"CompetencyChallenges.types.".concat(pe)})}}),Ee=function(){var X=Object(J.b)(),b=X.competencyChallenge,k=X.categoryDepths,A=X.refreshData,ee=Object(F.l)(),B=Number(ee.id),ce=Object(o.l)(),ye=n.a.useForm(),Oe=Object(y.a)(ye,1),ue=Oe[0],ge=n.a.useWatch("type",ue),he=Number.isNaN(B),He=Object(O.useMemo)(function(){if(!(b!=null&&b.data))return{};var te=b==null?void 0:b.data,G=te.authors,K=te.category,Y=Object(C.a)(te,ie);return Object(D.a)(Object(D.a)({},Y),{},{authors:G.map(function(ae){var re=ae.id;return re}),category_id:K==null?void 0:K.id})},[b==null?void 0:b.data]),Ce=Object(O.useCallback)(function(){var te=Object(se.a)(Object(I.a)().mark(function G(K){var Y,ae,re,le,de,S,l,a;return Object(I.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return Y=K.name,ae=K.type,re=K.is_active,le=re===void 0?!1:re,de=K.is_highlighted,S=de===void 0?!1:de,l=K.category_id,s.prev=1,s.next=4,Object(j.a)({name:Y,is_active:le,is_highlighted:S,type:ae,category_id:l});case 4:if(a=s.sent,a.success){s.next=8;break}return c.b.error(a.message),s.abrupt("return");case 8:return c.b.success(ce.formatMessage({id:a.message})),o.f.push("/competency-challenges/".concat(a.data.id,"/main")),s.next=12,A();case 12:s.next=17;break;case 14:s.prev=14,s.t0=s.catch(1),c.b.error(ce.formatMessage({id:"error"}));case 17:case"end":return s.stop()}},G,null,[[1,14]])}));return function(G){return te.apply(this,arguments)}}(),[]),Fe=Object(O.useCallback)(function(){var te=Object(se.a)(Object(I.a)().mark(function G(K){var Y,ae,re,le;return Object(I.a)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.prev=0,Y=ue.getFieldsValue(["image_url","image_path"]),ae=Y.image_url,re=Y.image_path,S.next=4,Object(j.g)(B,Object(D.a)(Object(D.a)({},K),{},{image_url:ae,image_path:re}));case 4:if(le=S.sent,le.success){S.next=8;break}return c.b.error(le.message),S.abrupt("return");case 8:return c.b.success(ce.formatMessage({id:le.message})),S.next=11,A();case 11:S.next=16;break;case 13:S.prev=13,S.t0=S.catch(0),c.b.error(ce.formatMessage({id:"error"}));case 16:case"end":return S.stop()}},G,null,[[0,13]])}));return function(G){return te.apply(this,arguments)}}(),[B]);return Object(r.jsxs)(n.a,{form:ue,initialValues:He,onFinish:he?Ce:Fe,onValuesChange:function(G){(G==null?void 0:G.type)==="complex"&&ue.setFieldValue("category",null)},children:[Object(r.jsxs)(n.a.Group,{title:Object(r.jsx)(o.a,{id:"CompetencyChallenges.base"}),children:[Object(r.jsx)(w.a,{width:"md",name:"name",label:Object(r.jsx)(o.a,{id:"name"}),placeholder:ce.formatMessage({id:"name"}),required:!0,rules:[{required:!0,message:ce.formatMessage({id:"field_required"})}]}),Object(r.jsx)(Q.a,{width:"md",name:"type",label:Object(r.jsx)(o.a,{id:"type"}),options:fe,required:!0,rules:[{required:!0,message:ce.formatMessage({id:"field_required"})}]}),ge==="simple"&&Object(r.jsx)(n.a.Item,{name:"category_id",required:!0,label:Object(r.jsx)(o.a,{id:"category"}),rules:[{required:!0,message:ce.formatMessage({id:"field_required"})}],children:Object(r.jsx)(E.a,{enabledDepth:k.role})}),Object(r.jsx)(Z.a,{name:"is_active",label:Object(r.jsx)(o.a,{id:"is_active"})}),Object(r.jsx)(Z.a,{name:"is_highlighted",label:Object(r.jsx)(o.a,{id:"is_highlighted"}),tooltip:Object(r.jsx)(o.a,{id:"CompetencyChallenges.highlighted"})})]}),!he&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(n.a.Group,{title:Object(r.jsx)(o.a,{id:"CompetencyChallenges.additional"}),children:[Object(r.jsx)(n.a.Item,{name:"description",label:Object(r.jsx)(o.a,{id:"description"}),valuePropName:"value",style:{width:440},children:Object(r.jsx)($.a,{directory:"competency-challenges/".concat(B)})}),Object(r.jsx)(H.a,{width:"lg",name:"summary",label:Object(r.jsx)(o.a,{id:"summary"})}),Object(r.jsx)(n.a.Item,{name:"authors",label:Object(r.jsx)(o.a,{id:"author"}),style:{width:"100%",maxWidth:440},children:Object(r.jsx)(f.a,{multiple:!0})})]}),Object(r.jsx)(x.a,{wrapInForm:!1,folder:"/competency-challenges/".concat(B),title:"image",action:"/api/admin/competency-challenges/".concat(B,"?_method=PATCH"),src_name:"image_url",form_name:"image",getUploadedSrcField:function(G){return G.file.response.data.image_url},setPath:function(G){return ue.setFieldsValue(G)}})]})]})},Me=e("P2fV"),T=e("NJEC"),V=e("5Dmo"),Se=e("3S7+"),P=e("+L6B"),W=e("2/Rp"),be=e("G3dp"),Le=e("/MfK"),Ne=e("Hn4i"),We=e("enqX"),t=["scale_min","category_id"],Ie=[{title:Object(r.jsx)(o.a,{id:"ID"}),dataIndex:"id",editable:!1,render:function(X,b){if(typeof b.id!="string")return"-";var k=b.id.split("-"),A=Object(y.a)(k,2),ee=A[0],B=A[1];return ee==="new"?"-":B}},{title:Object(r.jsx)(o.a,{id:"min_points"}),dataIndex:"scale_min",valueType:"digit",formItemProps:{rules:[{required:!0,message:Object(r.jsx)(o.a,{id:"field_required"})},{type:"number",min:0,max:100,message:Object(r.jsx)(o.a,{id:"number_between",values:{min:0}})}]},fieldProps:{min:0}},{title:Object(r.jsx)(o.a,{id:"category"}),dataIndex:"category_id",render:function(X,b){return b.category_name},formItemProps:{rules:[{required:!0,message:Object(r.jsx)(o.a,{id:"field_required"})}]},renderFormItem:function(X,b,k){var A,ee=((A=k.getFieldValue("table"))!==null&&A!==void 0?A:[]).map(function(B){return B.category_id});return Object(r.jsx)(We.a,{disabledNodes:ee})}}],Be=function(X){return X.map(function(b){var k=b.id,A=b.scale_min,ee=b.category;return{id:"old-".concat(k),scale_min:A,category_id:ee.id,category_name:ee.name_with_breadcrumbs}})},Ke=function(){var X,b,k=Object(J.b)(),A=k.competencyChallenge,ee=k.refreshData,B=Object(F.l)(),ce=Number(B.id),ye=(X=A==null||(b=A.data)===null||b===void 0?void 0:b.scales)!==null&&X!==void 0?X:[],Oe=Object(O.useState)([]),ue=Object(y.a)(Oe,2),ge=ue[0],he=ue[1],He=Object(o.l)(),Ce=Object(O.useRef)(),Fe=Object(O.useRef)(),te=Object(O.useRef)(),G=Object(O.useMemo)(function(){return Be(ye)},[ye]),K=Object(O.useMemo)(function(){return[].concat(Ie,[{valueType:"option",title:Object(r.jsx)(o.a,{id:"options"}),render:function(ae,re,le,de){return[Object(r.jsx)(Se.a,{title:Object(r.jsx)(o.a,{id:"edit",defaultMessage:"edit"}),children:Object(r.jsx)(W.a,{type:"primary",icon:Object(r.jsx)(be.a,{}),onClick:function(){return de==null?void 0:de.startEditable(re.id)}})},"edit"),Object(r.jsx)(T.a,{title:Object(r.jsx)(o.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(se.a)(Object(I.a)().mark(function S(){var l,a,i,s,d,m,v,h;return Object(I.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(typeof re.id=="string"){u.next=2;break}return u.abrupt("return");case 2:if(l=re.id.split("-"),a=Object(y.a)(l,2),i=a[0],s=a[1],i!=="new"){u.next=7;break}return v=(d=Ce.current)===null||d===void 0?void 0:d.getFieldValue("table"),(m=Ce.current)===null||m===void 0||m.setFieldValue("table",v.filter(function(R){var ne=R.id;return ne!==re.id})),u.abrupt("return");case 7:return u.next=9,Object(j.d)(+s);case 9:if(h=u.sent,!h.success){u.next=13;break}return u.next=13,ee();case 13:case"end":return u.stop()}},S)})),okText:Object(r.jsx)(o.a,{id:"ok"}),cancelText:Object(r.jsx)(o.a,{id:"cancel"}),children:Object(r.jsx)(Se.a,{title:Object(r.jsx)(o.a,{id:"delete",defaultMessage:"delete"}),children:Object(r.jsx)(W.a,{type:"primary",icon:Object(r.jsx)(Le.a,{}),danger:!0})})},"delete")]}}])},[]);return Object(r.jsx)(n.a,{formRef:Ce,initialValues:{table:G},submitter:!1,children:Object(r.jsx)(Ne.a,{rowKey:function(ae){return ae.id},editableFormRef:Fe,controlled:!0,actionRef:te,name:"table",columns:K,recordCreatorProps:{creatorButtonText:Object(r.jsx)(o.a,{id:"CompetencyChallenges.addNewRow"}),disabled:ge.length>0,record:function(ae){return{id:"new-".concat(ae)}}},editable:{onlyOneLineEditorAlertMessage:He.formatMessage({id:"CompetencyChallenges.onlyOneRowIsEditable"}),onSave:function(){var Y=Object(se.a)(Object(I.a)().mark(function re(le,de){var S,l,a,i,s,d,m,v,h;return Object(I.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(S=de.scale_min,l=de.category_id,a=Object(C.a)(de,t),typeof a.id=="string"){u.next=3;break}return u.abrupt("return");case 3:if(i=a.id.split("-"),s=Object(y.a)(i,2),d=s[0],m=s[1],d!=="new"){u.next=12;break}return u.next=7,Object(j.b)({scale_min:S,category_id:l,competency_challenge_id:ce});case 7:if(v=u.sent,!v.success){u.next=11;break}return u.next=11,ee();case 11:return u.abrupt("return");case 12:return u.next=14,Object(j.h)(+m,{scale_min:S,category_id:l,competency_challenge_id:ce});case 14:if(h=u.sent,!h.success){u.next=18;break}return u.next=18,ee();case 18:return u.abrupt("return");case 19:case"end":return u.stop()}},re)}));function ae(re,le){return Y.apply(this,arguments)}return ae}(),deletePopconfirmMessage:Object(r.jsx)(o.a,{id:"deleteQuestion"}),actionRender:function(ae,re,le){if(typeof ae.id!="string")return[];var de=ae.id.split("-"),S=Object(y.a)(de,1),l=S[0];return l==="new"?[le.save,le.delete]:[le.save,le.cancel]},type:"single",editableKeys:ge,onChange:he}})})},Je=e("/zsF"),ze=e("PArb"),Ve=e("DYRE"),Re=e("zeV3"),Ge=e("uD7z"),we=e("FJDo"),_e=e("yioT"),ke=e("qRSf"),oe=function(){var X=Object(J.b)(),b=X.competencyChallenge.data,k=Object(O.useState)(!1),A=Object(y.a)(k,2),ee=A[0],B=A[1],ce=Object(O.useState)(),ye=Object(y.a)(ce,2),Oe=ye[0],ue=ye[1],ge=Object(o.l)(),he=Object(O.useCallback)(function(){(b==null?void 0:b.quiz_id)!==void 0&&(B(!0),Object(ke.c)(b==null?void 0:b.quiz_id).then(function(Ce){Ce.success&&ue(Ce.data)}).finally(function(){return B(!1)}))},[b==null?void 0:b.quiz_id]),He=Object(O.useCallback)(function(){var Ce=Object(se.a)(Object(I.a)().mark(function Fe(te){return Object(I.a)().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if((b==null?void 0:b.quiz_id)!==void 0){K.next=2;break}return K.abrupt("return");case 2:B(!0),Object(ke.f)(b==null?void 0:b.quiz_id,Object(D.a)(Object(D.a)({},te),{},{value:"diagnostic-test"})).then(function(Y){Y.success&&ue(Y.data)}).finally(function(){return B(!1)});case 4:case"end":return K.stop()}},Fe)}));return function(Fe){return Ce.apply(this,arguments)}}(),[]);return Object(O.useEffect)(function(){he()},[he]),Oe?Object(r.jsxs)("div",{style:{position:"relative",paddingBottom:"64px"},children:[Object(r.jsx)(n.a,{submitter:{render:function(Fe,te){var G=Object(y.a)(te,2),K=G[0],Y=G[1];return Object(r.jsxs)(Re.b,{style:{position:"absolute",bottom:0,left:0},children:[K,Y]})}},initialValues:Oe,onFinish:He,children:Object(r.jsxs)(Ge.a,{children:[Object(r.jsx)(we.a,{name:"max_attempts",label:Object(r.jsx)(o.a,{id:"max_attempts"}),tooltip:Object(r.jsx)(o.a,{id:"max_attempts"}),placeholder:ge.formatMessage({id:"max_attempts",defaultMessage:"max_attempts"})}),Object(r.jsx)(we.a,{name:"max_execution_time",label:Object(r.jsx)(o.a,{id:"max_execution_time"}),tooltip:Object(r.jsx)(o.a,{id:"max_execution_time"}),placeholder:ge.formatMessage({id:"max_execution_time",defaultMessage:"max_execution_time"})})]})}),Object(r.jsx)(ze.a,{}),Object(r.jsx)(_e.a,{questions:Oe.questions,quizId:Oe.id,onAdded:he,onEdited:he,onRemoved:he,tableHeader:Object(r.jsx)(o.a,{id:"questions"}),tableLoading:ee,questionsCategory:{type:"question"}})]}):Object(r.jsx)(N.a,{})},Xe=function(){var X,b=Object(J.b)(),k=b.competencyChallenge,A=Object(o.l)(),ee=Object(F.l)(),B=ee.id,ce=ee.tab,ye=ce===void 0?"main":ce,Oe=B==="new",ue=Object(O.useMemo)(function(){var ge;return Oe?A.formatMessage({id:"CompetencyChallenges.new_challenge"}):(ge=k.data)!==null&&ge!==void 0&&ge.name?k.data.name:A.formatMessage({id:"menu.Competency challenges"})},[A,(X=k.data)===null||X===void 0?void 0:X.name]);return Object(r.jsx)(ve.a,{title:ue,header:{breadcrumb:{routes:[{path:"competency-challenges",breadcrumbName:A.formatMessage({id:"menu.Competency challenges"})},{path:String(B),breadcrumbName:ue},{path:ye,breadcrumbName:A.formatMessage({id:"CompetencyChallenges.".concat(ye)})}]}},children:Object(r.jsxs)(z.a,{bodyStyle:{padding:"24px"},tabs:{type:"card",cardProps:{loading:k.loading&&Object(r.jsx)(N.a,{})},activeKey:ye,onChange:function(he){o.f.push("/competency-challenges/".concat(B,"/").concat(he))}},children:[Object(r.jsx)(z.a.TabPane,{tab:Object(r.jsx)(o.a,{id:"CompetencyChallenges.main"}),children:Object(r.jsx)(Ee,{})},"main"),Object(r.jsx)(z.a.TabPane,{tab:Object(r.jsx)(o.a,{id:"CompetencyChallenges.scales"}),disabled:Oe,children:Object(r.jsx)(Ke,{})},"scales"),Object(r.jsx)(z.a.TabPane,{tab:Object(r.jsx)(o.a,{id:"CompetencyChallenges.diagnostic-test"}),disabled:Oe,children:Object(r.jsx)(oe,{})},"diagnostic-test")]})})},nt=function(){return Object(r.jsx)(J.a,{children:Object(r.jsx)(Xe,{})})},st=M.default=nt},YRX9:function(Ue,M,e){"use strict";e.d(M,"f",function(){return F}),e.d(M,"e",function(){return z}),e.d(M,"a",function(){return I}),e.d(M,"g",function(){return c}),e.d(M,"c",function(){return D}),e.d(M,"b",function(){return y}),e.d(M,"h",function(){return w}),e.d(M,"d",function(){return Z});var p=e("qLMh"),N=e("k1fw"),O=e("9og8"),o=e("9kvl");function F(E,f){return ve.apply(this,arguments)}function ve(){return ve=Object(O.a)(Object(p.a)().mark(function E(f,x){return Object(p.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(o.i)("/api/admin/competency-challenges",Object(N.a)({method:"GET",useCache:!1,params:f},x||{})));case 1:case"end":return j.stop()}},E)})),ve.apply(this,arguments)}function z(E,f){return J.apply(this,arguments)}function J(){return J=Object(O.a)(Object(p.a)().mark(function E(f,x){return Object(p.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(o.i)("/api/admin/competency-challenges/".concat(f),Object(N.a)({method:"GET",useCache:!1},x||{})));case 1:case"end":return j.stop()}},E)})),J.apply(this,arguments)}function I(E,f){return _.apply(this,arguments)}function _(){return _=Object(O.a)(Object(p.a)().mark(function E(f,x){return Object(p.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(o.i)("/api/admin/competency-challenges",Object(N.a)({method:"POST",headers:{"Content-Type":"application/json"},data:f},x||{})));case 1:case"end":return j.stop()}},E)})),_.apply(this,arguments)}function c(E,f,x){return se.apply(this,arguments)}function se(){return se=Object(O.a)(Object(p.a)().mark(function E(f,x,$){return Object(p.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",Object(o.i)("/api/admin/competency-challenges/".concat(f),Object(N.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:x},$||{})));case 1:case"end":return U.stop()}},E)})),se.apply(this,arguments)}function D(E,f){return C.apply(this,arguments)}function C(){return C=Object(O.a)(Object(p.a)().mark(function E(f,x){return Object(p.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(o.i)("/api/admin/competency-challenges/".concat(f),Object(N.a)({method:"DELETE"},x||{})));case 1:case"end":return j.stop()}},E)})),C.apply(this,arguments)}function y(E,f){return n.apply(this,arguments)}function n(){return n=Object(O.a)(Object(p.a)().mark(function E(f,x){return Object(p.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(o.i)("/api/admin/competency-challenges/scales",Object(N.a)({method:"POST",headers:{"Content-Type":"application/json"},data:f},x||{})));case 1:case"end":return j.stop()}},E)})),n.apply(this,arguments)}function w(E,f,x){return Q.apply(this,arguments)}function Q(){return Q=Object(O.a)(Object(p.a)().mark(function E(f,x,$){return Object(p.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",Object(o.i)("/api/admin/competency-challenges/scales/".concat(f),Object(N.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:x},$||{})));case 1:case"end":return U.stop()}},E)})),Q.apply(this,arguments)}function Z(E,f){return H.apply(this,arguments)}function H(){return H=Object(O.a)(Object(p.a)().mark(function E(f,x){return Object(p.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(o.i)("/api/admin/competency-challenges/scales/".concat(f),Object(N.a)({method:"DELETE"},x||{})));case 1:case"end":return j.stop()}},E)})),H.apply(this,arguments)}},enqX:function(Ue,M,e){"use strict";e.d(M,"a",function(){return se});var p=e("nRaC"),N=e("5RzL"),O=e("tJVT"),o=e("q1tI"),F=e.n(o),ve=e("9kvl"),z=e("JifO"),J=e("tKSU"),I=e("nKUr"),_=e.n(I),c=function D(C,y,n){var w,Q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return(w=C.subcategories)!==null&&w!==void 0&&w.length?{title:C.name,value:C.id,disabled:Q!==n||y.includes(C.id),children:C.subcategories.map(function(Z){return D(Z,y,n,Q+1)})}:{title:C.name,value:C.id,disabled:Q!==n||y.includes(C.id)}},se=function(C){var y,n,w,Q=C.value,Z=C.onChange,H=C.type,E=H===void 0?"scale":H,f=C.disabledNodes,x=f===void 0?[]:f,$=Object(o.useState)([]),j=Object(O.a)($,2),U=j[0],r=j[1],ie=Object(J.b)(),fe=ie.categoryDepths,Ee=ie.competencyChallenge,Me=Object(o.useMemo)(function(){var V;return((V=Ee.data)===null||V===void 0?void 0:V.type)==="simple"?U.filter(function(Se){var P,W;return Se.id===((P=Ee.data)===null||P===void 0||(W=P.category)===null||W===void 0?void 0:W.id)}):U},[U,(y=Ee.data)===null||y===void 0?void 0:y.type,(n=Ee.data)===null||n===void 0||(w=n.category)===null||w===void 0?void 0:w.id]),T=Object(o.useMemo)(function(){return Me.map(function(V){return c(V,x,fe[E])})},[Me,x,E]);return Object(o.useEffect)(function(){Object(z.c)().then(function(V){V.success&&r(V.data)})},[]),Object(I.jsx)(N.a,{loading:U.length===0,showSearch:!0,value:Q,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:Object(I.jsx)(ve.a,{id:"select",defaultMessage:"Please select"}),allowClear:!0,treeDefaultExpandAll:!0,onChange:Z,treeData:T,disabled:U.length===0})}},hd5d:function(Ue,M,e){"use strict";var p=e("qLMh"),N=e("9og8"),O=e("q1tI"),o=e.n(O),F=e("acco"),ve=e.n(F),z=e("BAh9"),J=e("vtG9"),I=e.n(J),_=e("9kvl"),c=e("nKUr"),se=e.n(c),D=function(n){var w=n.attrs,Q=w.href,Z=Q.split("/").pop();return Object(c.jsx)("p",{children:Object(c.jsx)("a",{rel:"noreferrer",href:Q,target:"_blank",children:Z})})},C=function(n){var w=n.value,Q=n.onChange,Z=n.directory,H=Z===void 0?"/wysiwyg":Z,E=Object(_.l)();return Object(c.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(c.jsx)(ve.a,{excludeBlockMenuItems:["Sketch"],embeds:[{matcher:function(x){return!0},component:D}],uploadImage:function(){var f=Object(N.a)(Object(p.a)().mark(function x($){var j,U;return Object(p.a)().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.next=2,Object(z.e)($,H);case 2:if(j=ie.sent,!j.success){ie.next=8;break}if(!$.type.includes("image/")){ie.next=7;break}return U=j.data[0].name.includes("/")?j.data[0].name:"".concat(H).concat(j.data[0].name),ie.abrupt("return",Object(z.d)(U,1e3));case 7:return ie.abrupt("return",j.data[0].url);case 8:throw new Error("Error while uploading");case 9:case"end":return ie.stop()}},x)}));return function(x){return f.apply(this,arguments)}}(),defaultValue:w||"",onChange:function(x){return Q&&Q(x())},placeholder:E.formatMessage({id:"wysiwyg_placeholder"})})})};M.a=C},tKSU:function(Ue,M,e){"use strict";e.d(M,"b",function(){return C}),e.d(M,"a",function(){return y});var p=e("k1fw"),N=e("tJVT"),O=e("qLMh"),o=e("9og8"),F=e("q1tI"),ve=e.n(F),z=e("Ty5D"),J=e("YRX9"),I=e("+up7"),_=e("nKUr"),c=e.n(_),se={categoryDepths:{scale:2,question:1,role:0},competencyChallenge:{data:null,loading:!1},refreshData:function(){var n=Object(o.a)(Object(O.a)().mark(function Q(){return Object(O.a)().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.abrupt("return",console.warn("CONTEXT INIT"));case 1:case"end":return H.stop()}},Q)}));function w(){return n.apply(this,arguments)}return w}()},D=ve.a.createContext(se),C=function(){return Object(F.useContext)(D)},y=function(w){var Q=w.children,Z=Object(F.useState)(se.competencyChallenge),H=Object(N.a)(Z,2),E=H[0],f=H[1],x=Object(F.useState)(se.categoryDepths),$=Object(N.a)(x,2),j=$[0],U=$[1],r=Object(z.l)(),ie=r.id,fe=Number(ie),Ee=Object(F.useCallback)(Object(o.a)(Object(O.a)().mark(function T(){var V;return Object(O.a)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(!Number.isNaN(fe)){P.next=2;break}return P.abrupt("return");case 2:return P.prev=2,f(function(W){return Object(p.a)(Object(p.a)({},W),{},{loading:!0})}),P.next=6,Object(J.e)(fe);case 6:if(V=P.sent,V.success){P.next=10;break}return f(function(W){return Object(p.a)(Object(p.a)({},W),{},{error:V.errors})}),P.abrupt("return");case 10:f(function(W){return Object(p.a)(Object(p.a)({},W),{},{data:V.data})}),P.next=16;break;case 13:P.prev=13,P.t0=P.catch(2),f(function(W){return Object(p.a)(Object(p.a)({},W),{},{error:P.t0})});case 16:return P.prev=16,f(function(W){return Object(p.a)(Object(p.a)({},W),{},{loading:!1})}),P.finish(16);case 19:case"end":return P.stop()}},T,null,[[2,13,16,19]])})),[fe]),Me=Object(F.useCallback)(Object(o.a)(Object(O.a)().mark(function T(){var V,Se,P,W,be,Le,Ne,We,t,Ie,Be,Ke,Je,ze,Ve,Re,Ge,we,_e;return Object(O.a)().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.prev=0,oe.next=3,Object(I.a)();case 3:if(Re=oe.sent,Re.success){oe.next=6;break}return oe.abrupt("return");case 6:Ge=Number((V=Re.data)===null||V===void 0||(Se=V.escolalms_competency_challenge)===null||Se===void 0||(P=Se.category)===null||P===void 0||(W=P.scale)===null||W===void 0||(be=W.depth)===null||be===void 0?void 0:be.value),we=Number((Le=Re.data)===null||Le===void 0||(Ne=Le.escolalms_competency_challenge)===null||Ne===void 0||(We=Ne.category)===null||We===void 0||(t=We.question)===null||t===void 0||(Ie=t.depth)===null||Ie===void 0?void 0:Ie.value),_e=Number((Be=Re.data)===null||Be===void 0||(Ke=Be.escolalms_competency_challenge)===null||Ke===void 0||(Je=Ke.category)===null||Je===void 0||(ze=Je.role)===null||ze===void 0||(Ve=ze.depth)===null||Ve===void 0?void 0:Ve.value),U({scale:Number.isNaN(Ge)?2:Ge,question:Number.isNaN(we)?1:we,role:Number.isNaN(_e)?0:_e}),oe.next=15;break;case 12:oe.prev=12,oe.t0=oe.catch(0),console.error(oe.t0);case 15:case"end":return oe.stop()}},T,null,[[0,12]])})),[]);return Object(F.useEffect)(function(){Ee(),Me()},[Ee,Me]),Object(_.jsx)(D.Provider,{value:{categoryDepths:j,competencyChallenge:E,refreshData:Ee},children:Q})}},vtG9:function(Ue,M,e){},yioT:function(Ue,M,e){"use strict";e.d(M,"a",function(){return S});var p=e("tU7J"),N=e("wFql"),O=e("BoS7"),o=e("Sdc0"),F=e("oBTY"),ve=e("+L6B"),z=e("2/Rp"),J=e("bbsP"),I=e("/wGt"),_=e("qLMh"),c=e("9og8"),se=e("PpiC"),D=e("tJVT"),C=e("k1fw"),y=e("q1tI"),n=e("9kvl"),w=e("YJCA"),Q=e("wYyv"),Z=e("smpX"),H=e("eyie"),E=e("w5pM"),f=e("mWMg"),x=e("Vpfc"),$=e("qRSf"),j=e("DYRE"),U=e("zeV3"),r=e("/zsF"),ie=e("PArb"),fe=e("VMEa"),Ee=e("yj/a"),Me=e("FJDo"),T=e("/y+f"),V=e("enqX"),Se=e("5Dmo"),P=e("3S7+"),W=e("jrin"),be=e("Qurx"),Le=e("x1Ii"),Ne=e("tneF"),We=e("/MfK"),t=e("nKUr"),Ie,Be=(Ie={},Object(W.a)(Ie,T.d.MULTIPLE_CHOICE,[{isCorrect:!1,value:""},{isCorrect:!1,value:""}]),Object(W.a)(Ie,T.d.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS,[{value:"",weight:""},{value:"",weight:""}]),Ie),Ke=function(a){var i,s=a.type,d=Object(n.l)();return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(be.a,{name:"question",label:Object(t.jsx)(n.a,{id:"question"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0}),Object(t.jsx)(Le.b,{name:"answers",creatorButtonProps:{creatorButtonText:d.formatMessage({id:"Questions.addAnswer"})},actionRender:function(){return[]},initialValue:(i=Be[s])!==null&&i!==void 0?i:[],children:function(v,h,L,u){return Object(t.jsxs)(fe.a.Group,{title:Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(n.a,{id:"Questions.answer",values:{ordinalNumber:h+1}}),u>2&&Object(t.jsx)(P.a,{title:d.formatMessage({id:"Questions.deleteAnswer"}),children:Object(t.jsx)(z.a,{type:"text",icon:Object(t.jsx)(We.a,{}),onClick:function(){return L.remove(v.name)}})})]}),titleStyle:{width:"100%",display:"flex",justifyContent:"space-between"},children:[s===T.d.MULTIPLE_CHOICE&&Object(t.jsx)(Ne.a,{name:"isCorrect",label:Object(t.jsx)(n.a,{id:"Questions.correctAnswer",defaultMessage:"Is Correct Answer?"}),rules:[function(R){var ne=R.getFieldValue;return{validator:function(){var me,Qe=(me=ne("answers"))!==null&&me!==void 0?me:[];return Qe.filter(function(xe){return xe==null?void 0:xe.isCorrect}).length>1?Promise.reject("Only one answer can be correct"):Promise.resolve()},message:Object(t.jsx)(n.a,{id:"Questions.onlyOneAnswerIsCorrect"})}}]}),Object(t.jsx)(be.a,{name:"value",rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],label:Object(t.jsx)(n.a,{id:"content",defaultMessage:"Content"})}),s===T.d.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS&&Object(t.jsx)(Me.a,{name:"weight",rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],fieldProps:{min:-Number.MAX_SAFE_INTEGER,addonAfter:"%"},label:Object(t.jsx)(n.a,{id:"weight",defaultMessage:"Weight"})})]})}})]})},Je=function(){return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(be.a,{name:"question",label:Object(t.jsx)(n.a,{id:"question"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0}),Object(t.jsx)(Ne.a,{name:"isCorrect",label:Object(t.jsx)(n.a,{id:"Questions.correctAnswer"})})]})},ze=[{value:""}],Ve=function(){var a=Object(n.l)();return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(be.a,{name:"question",label:Object(t.jsx)(n.a,{id:"question"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0}),Object(t.jsx)(Le.b,{name:"answers",creatorButtonProps:{creatorButtonText:a.formatMessage({id:"Questions.addAnswer"})},deleteIconProps:{tooltipText:a.formatMessage({id:"Questions.deleteAnswer"})},actionRender:function(s,d,m){var v=Object(D.a)(m,2),h=v[1];return[h]},min:1,initialValue:ze,children:function(s,d){return Object(t.jsx)(be.a,{name:"value",rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],label:Object(t.jsx)(n.a,{id:"Questions.answer",values:{ordinalNumber:d+1},defaultMessage:"Answer ".concat(d+1)})})}})]})},Re=[{firstOfPair:"",secondOfPair:""}],Ge=function(){var a=Object(n.l)();return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(be.a,{name:"question",label:Object(t.jsx)(n.a,{id:"question"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0}),Object(t.jsx)(Le.b,{name:"answers",creatorButtonProps:{creatorButtonText:a.formatMessage({id:"Questions.addMatchingPair",defaultMessage:"Add Matching Pair"})},deleteIconProps:{tooltipText:a.formatMessage({id:"Questions.deletePair"})},actionRender:function(s,d,m){var v=Object(D.a)(m,2),h=v[1];return[h]},min:1,initialValue:Re,children:function(s,d){return Object(t.jsxs)(fe.a.Group,{direction:"horizontal",align:"baseline",size:"small",spaceProps:{style:{flexWrap:"nowrap"}},title:Object(t.jsx)(n.a,{id:"Questions.pair",values:{ordinalNumber:d+1},defaultMessage:"Pair ".concat(d+1)}),children:[Object(t.jsx)(be.a,{name:"firstOfPair",rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}]}),Object(t.jsx)(be.a,{name:"secondOfPair",rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}]})]})}})]})},we=function(){return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(be.a,{name:"question",label:Object(t.jsx)(n.a,{id:"question"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0}),Object(t.jsx)(Me.a,{name:"answer",label:Object(t.jsx)(n.a,{id:"answer"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0}),Object(t.jsx)(Me.a,{name:"errorMargin",fieldProps:{addonAfter:"+/-"},label:Object(t.jsx)(n.a,{id:"Questions.errorMargin"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0})]})},_e=e("BiO0"),ke=function(){return Object(t.jsx)(_e.a,{name:"question",label:Object(t.jsx)(n.a,{id:"question"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0})},oe=function(a){var i=a.type;if(!i)return null;switch(i){case T.d.MULTIPLE_CHOICE:case T.d.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS:return Object(t.jsx)(Ke,{type:i});case T.d.TRUE_FALSE:return Object(t.jsx)(Je,{});case T.d.SHORT_ANSWERS:return Object(t.jsx)(Ve,{});case T.d.MATCHING:return Object(t.jsx)(Ge,{});case T.d.NUMERICAL_QUESTION:return Object(t.jsx)(we,{});case T.d.ESSAY:case T.d.DESCRIPTION:return Object(t.jsx)(ke,{})}return Object(t.jsxs)("pre",{children:["Unsupported type ",i]})},Xe=e("rAM+"),nt=function(a){var i=a.question,s=a.answers;if(s.length===0)return"".concat(i,"{}");var d="".concat(i,"{"),m=Object(Xe.a)(s),v;try{for(m.s();!(v=m.n()).done;){var h=v.value,L=h.isCorrect,u=h.value,R=L?"=":"~";d+="".concat(R).concat(u)}}catch(ne){m.e(ne)}finally{m.f()}return d+="}",d.trim()},st=function(a){var i=a.question,s=a.answers;if(s.length==0)return"".concat(i,"{}");var d="".concat(i,"{"),m=Object(Xe.a)(s),v;try{for(m.s();!(v=m.n()).done;){var h=v.value,L=h.value,u=h.weight;d+="~%".concat(u,"%").concat(L)}}catch(R){m.e(R)}finally{m.f()}return d+="}",d.trim()},pe=function(a){var i=a.question,s=a.isCorrect;return"".concat(i,"{").concat(s?"T":"F","}")},X=function(a){var i=a.question,s=a.answers;if(s.length===0)return"".concat(i,"{}");var d="".concat(i,"{"),m=Object(Xe.a)(s),v;try{for(m.s();!(v=m.n()).done;){var h=v.value,L=h.value;d+="=".concat(L)}}catch(u){m.e(u)}finally{m.f()}return d+="}",d.trim()},b=function(a){var i=a.question,s=a.answers;if(s.length===0)return"".concat(i,"{}");var d="".concat(i,"{"),m=Object(Xe.a)(s),v;try{for(m.s();!(v=m.n()).done;){var h=v.value,L=h.firstOfPair,u=h.secondOfPair;d+="=".concat(L,"->").concat(u)}}catch(R){m.e(R)}finally{m.f()}return d+="}",d.trim()},k=function(a){var i=a.question,s=a.answer,d=a.errorMargin;return"".concat(i,"{#").concat(s,":").concat(d,"}")},A=function(a){var i=a.question;return"".concat(i,"{}")},ee=function(a){var i=a.question;return i},B=function(a){switch(a.type){case T.d.MULTIPLE_CHOICE:return nt(a);case T.d.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS:return st(a);case T.d.TRUE_FALSE:return pe(a);case T.d.SHORT_ANSWERS:return X(a);case T.d.MATCHING:return b(a);case T.d.NUMERICAL_QUESTION:return k(a);case T.d.ESSAY:return A(a);case T.d.DESCRIPTION:return ee(a);default:throw new Error("Unsupported type: ".concat(a.type))}},ce=function(a,i){var s=i.type,d=i.score,m=i.category_id,v=a==null?void 0:a.stem.text,h=a.choices.every(function(R){var ne=R.weight;return ne===null});if(h){var L=a.choices.map(function(R){var ne=R.isCorrect,$e=R.text;return{isCorrect:ne,value:$e.text}});return{type:s,score:d,category_id:m,question:v,answers:L}}var u=a.choices.reduce(function(R,ne){var $e=ne.weight,me=ne.text;return $e!==null?[].concat(Object(F.a)(R),[{weight:$e,value:me.text}]):R},[]);return{type:s,score:d,category_id:m,question:v,answers:u}},ye=function(a,i){var s=i.type,d=i.score,m=i.category_id,v=a==null?void 0:a.stem.text,h=a.isTrue;return{type:s,score:d,category_id:m,question:v,isCorrect:h}},Oe=function(a,i){var s=i.type,d=i.score,m=i.category_id,v=a==null?void 0:a.stem.text,h=a.choices.map(function(L){var u=L.text;return{value:u.text}});return{type:s,score:d,category_id:m,question:v,answers:h}},ue=function(a,i){var s=i.type,d=i.score,m=i.category_id,v=a==null?void 0:a.stem.text,h=a.matchPairs.map(function(L){var u=L.subquestion,R=L.subanswer;return{firstOfPair:u.text,secondOfPair:R}});return{type:s,score:d,category_id:m,question:v,answers:h}},ge=function(a,i){var s=i.type,d=i.score,m=i.category_id,v=a==null?void 0:a.stem.text;if(Array.isArray(a==null?void 0:a.choices))throw new Error("Unsupported choices type: array");var h=a==null?void 0:a.choices.number,L=a==null?void 0:a.choices.range;if(h===void 0||L===void 0)throw new Error("Value undefined - answer: ".concat(h," errorMargin: ").concat(L));return{type:s,score:d,category_id:m,question:v,answer:h,errorMargin:L}},he=function(a,i){var s=i.type,d=i.score,m=i.category_id,v=a==null?void 0:a.stem.text;return{type:s,score:d,category_id:m,question:v}};function He(l){if(!!l){var a=Object(Z.parse)(l.value),i=Object(D.a)(a,1),s=i[0];switch(s.type){case"MC":return ce(s,l);case"TF":return ye(s,l);case"Short":return Oe(s,l);case"Matching":return ue(s,l);case"Numerical":return ge(s,l);case"Description":case"Essay":return he(s,l);default:throw new Error("Unsupported type: ".concat(s==null?void 0:s.type))}}}var Ce=["type","score","category"],Fe=Object.values(T.d).reduce(function(l,a){return a?[].concat(Object(F.a)(l),[{value:a,label:Object(t.jsx)(n.a,{id:"gift_type.".concat(a)})}]):l},[]),te=function(a){var i=a.onSubmit,s=a.values,d=a.competencyChallengeCategoryTreeProps,m=d===void 0?!1:d,v=Object(n.l)(),h=fe.a.useForm(),L=Object(D.a)(h,1),u=L[0],R=fe.a.useWatch("type",u),ne=Object(y.useMemo)(function(){return He(s)},[s]),$e=Object(y.useCallback)(function(){var me=Object(c.a)(Object(_.a)().mark(function Qe(xe){var et,qe,at,tt;return Object(_.a)().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return et=B(xe),qe=xe.score,at=xe.category_id,Te.next=4,i({value:et,score:qe,category_id:at});case 4:if(tt=Te.sent,tt){Te.next=7;break}return Te.abrupt("return");case 7:u.resetFields();case 8:case"end":return Te.stop()}},Qe)}));return function(Qe){return me.apply(this,arguments)}}(),[]);return Object(y.useEffect)(function(){u.resetFields()},[ne]),Object(y.useEffect)(function(){if(R){var me=u.getFieldsValue(),Qe=Object.keys(me).filter(function(xe){return!Ce.includes(xe)});u.resetFields(Qe)}},[R]),Object(t.jsxs)(U.b,{direction:"vertical",style:{display:"flex"},children:[Object(t.jsx)(ie.a,{children:Object(t.jsx)(n.a,{id:ne?"Questions.edit":"addNewQuestion"})}),Object(t.jsxs)(fe.a,{layout:"horizontal",form:u,onFinish:$e,initialValues:ne,children:[Object(t.jsx)(Ee.a,{name:"type",placeholder:v.formatMessage({id:"selectNewQuestionType",defaultMessage:"Select new question type"}),label:Object(t.jsx)(n.a,{id:"type",defaultMessage:"Type:"}),options:Fe,rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0}),Object(t.jsx)(oe,{type:R}),Object(t.jsx)(Me.a,{name:"score",label:Object(t.jsx)(n.a,{id:"Questions.score",defaultMessage:"Score"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}]}),m&&Object(t.jsx)(fe.a.Item,{name:"category_id",label:Object(t.jsx)(n.a,{id:"category",defaultMessage:"Category"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0,children:Object(t.jsx)(V.a,Object(C.a)({},typeof m=="object"?m:{}))})]})]})},G=e("60mZ"),K=["className","style"],Y=Object(w.c)(function(){return Object(t.jsx)(H.a,{style:{cursor:"grab",color:"#999"}})}),ae=Object(w.b)(function(l){return Object(t.jsx)("tr",Object(C.a)({},l))}),re=Object(w.a)(function(l){return Object(t.jsx)("tbody",Object(C.a)({},l))}),le=[{title:Object(t.jsx)(n.a,{id:"sort",defaultMessage:"sort"}),dataIndex:"id",width:60,className:"drag-visible",render:function(){return Object(t.jsx)(Y,{})}},{title:Object(t.jsx)(n.a,{id:"type",defaultMessage:"Type"}),dataIndex:"type",hideInForm:!0,hideInSearch:!0,hideInSetting:!0,render:function(a,i){return Object(t.jsx)(n.a,{id:"gift_type.".concat(i.type)})}},{title:Object(t.jsx)(n.a,{id:"question",defaultMessage:"Question"}),dataIndex:"question",hideInForm:!0,hideInSearch:!0,hideInSetting:!0,render:function(a,i){var s=Object(Z.parse)(i.value);return s!=null&&s[0]&&"stem"in s[0]?s[0].stem.text:"question"}}],de={title:Object(t.jsx)(n.a,{id:"category",defaultMessage:"Category"}),dataIndex:"category_id",hideInForm:!0,hideInSearch:!0,hideInSetting:!0,render:function(a,i){return typeof i.category_id=="number"?Object(t.jsx)(x.a,{type:"Category",type_id:i.category_id}):"-"}},S=function(a){var i=a.questions,s=a.onAdded,d=a.onRemoved,m=a.onEdited,v=a.quizId,h=a.tableLoading,L=a.tableHeader,u=a.questionsCategory,R=Object(y.useState)(!1),ne=Object(D.a)(R,2),$e=ne[0],me=ne[1],Qe=Object(y.useState)(!1),xe=Object(D.a)(Qe,2),et=xe[0],qe=xe[1],at=Object(y.useState)(),tt=Object(D.a)(at,2),De=tt[0],Te=tt[1],lt=Object(y.useState)(!1),it=Object(D.a)(lt,2),ut=it[0],dt=it[1],mt=Object(y.useState)(i),ct=Object(D.a)(mt,2),rt=ct[0],ot=ct[1],jt=Object(y.useRef)();Object(y.useEffect)(function(){var je;(je=jt.current)===null||je===void 0||je.reload(),ot(i)},[i]);var vt=function(q){var Ae=q.oldIndex,Pe=q.newIndex;if(Ae!==Pe){var Ye=Object(Q.a)(rt.slice(),Ae,Pe).filter(Boolean).map(function(g,Ze){return Object(C.a)(Object(C.a)({},g),{},{order:Ze})});Ye.forEach(function(g,Ze){g.id!==rt[Ze].id&&Object($.g)(g.id,Object(C.a)(Object(C.a)({},g),{},{order:Ze+1,topic_gift_quiz_id:v}))}),ot(Ye)}},bt=function(q){return Object(t.jsx)(re,Object(C.a)({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:vt},q))},ft=function(q){var Ae=q.className,Pe=q.style,Ye=Object(se.a)(q,K),g=rt.findIndex(function(Ze){return Ze.id===Ye["data-row-key"]});return Object(t.jsx)(ae,Object(C.a)({index:g},Ye))},Ot=Object(y.useCallback)(function(){var je=Object(c.a)(Object(_.a)().mark(function q(Ae){var Pe;return Object(_.a)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.prev=0,me(!0),g.next=4,Object($.a)(Object(C.a)({topic_gift_quiz_id:v},Ae));case 4:return Pe=g.sent,qe(!1),s==null||s(),g.abrupt("return",Pe.success);case 10:return g.prev=10,g.t0=g.catch(0),console.log(g.t0),g.abrupt("return",!1);case 14:return g.prev=14,me(!1),g.finish(14);case 17:case"end":return g.stop()}},q,null,[[0,10,14,17]])}));return function(q){return je.apply(this,arguments)}}(),[et,v]),gt=Object(y.useCallback)(function(){var je=Object(c.a)(Object(_.a)().mark(function q(Ae){var Pe;return Object(_.a)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if((De==null?void 0:De.id)!==void 0){g.next=2;break}return g.abrupt("return",!1);case 2:return g.prev=2,me(!0),g.next=6,Object($.g)(De.id,Object(C.a)({topic_gift_quiz_id:v},Ae));case 6:return Pe=g.sent,Te(void 0),m==null||m(),g.abrupt("return",Pe.success);case 12:return g.prev=12,g.t0=g.catch(2),console.log(g.t0),g.abrupt("return",!1);case 16:return g.prev=16,me(!1),g.finish(16);case 19:case"end":return g.stop()}},q,null,[[2,12,16,19]])}));return function(q){return je.apply(this,arguments)}}(),[De==null?void 0:De.id,v]);return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(I.a,{open:et,onClose:function(){return qe(!1)},children:Object(t.jsx)(te,{onSubmit:Ot,competencyChallengeCategoryTreeProps:u})}),Object(t.jsx)(I.a,{open:!!De,onClose:function(){return Te(void 0)},children:Object(t.jsx)(te,{onSubmit:gt,competencyChallengeCategoryTreeProps:u,values:De})}),Object(t.jsx)(f.a,{search:!1,cardProps:{bodyStyle:{padding:0}},loading:h,headerTitle:L,toolbar:{settings:[]},toolBarRender:function(){return[Object(t.jsxs)(z.a,{icon:Object(t.jsx)(E.a,{}),type:"primary",onClick:function(){return qe(!0)},children:[" ",Object(t.jsx)(n.a,{id:"addNewQuestion",defaultMessage:"Add new question"})]},"add")]},columns:[].concat(le,Object(F.a)(u?[de]:[]),[{title:Object(t.jsx)(n.a,{id:"actions",defaultMessage:"Actions"}),dataIndex:"address",valueType:"option",render:function(q,Ae){return[Object(t.jsx)(z.a,{size:"small",type:"primary",onClick:function(){Te(Ae)},children:Object(t.jsx)(n.a,{id:"Questions.edit",defaultMessage:"Edit Question"})},"edit"),Object(t.jsx)(z.a,{loading:$e,size:"small",danger:!0,onClick:function(){me(!0),Object($.b)(Ae.id).then(function(){d&&d()}).finally(function(){me(!1)})},children:Object(t.jsx)(n.a,{id:"Questions.delete",defaultMessage:"Delete Question"})},"delete")]}}]),rowKey:function(q){return q.id},pagination:!1,dataSource:rt,components:{body:{wrapper:bt,row:ft}}}),Object(t.jsxs)(N.a,{style:{marginTop:"3em"},children:["Debug GIFT: ",Object(t.jsx)(o.a,{checked:ut,onChange:function(q){return dt(q)}})]})]})}}}]);

//# sourceMappingURL=p__CompetencyChallenges__form.d6811471.async.js.map