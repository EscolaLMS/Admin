(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"9A0E":function(D,v,e){"use strict";e.r(v),e.d(v,"channelType",function(){return R});var f=e("q1tI"),p=e("Ty5D"),a=e("9kvl"),j=e("tMyG"),g=e("nhC9"),M=e("P2fV"),d=e("NJEC"),_=e("5Dmo"),A=e("3S7+"),he=e("+L6B"),P=e("2/Rp"),ee=e("miYZ"),L=e("tsqr"),ae=e("9og8"),K=e("tJVT"),te=e("WmNS"),B=e.n(te),ne=e("xvlK"),E=e("G3dp"),u=e("/MfK"),i=e("55Ip"),m=e("sWYD"),O=e("Qiat"),r=e("rWUb"),U=e("mGZj"),t=e("nKUr"),pe=function(Z){var Y=Z.templateType,Q=Z.channel,F=Object(f.useRef)(),Oe=Object(a.i)(),ye=Object(f.useState)(!1),ue=Object(K.a)(ye,2),De=ue[0],G=ue[1],Ce=[{title:Object(t.jsx)(a.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"created_at",defaultMessage:"created_at"}),dataIndex:"created_at",hideInSearch:!0,render:function(N,T){return T.created_at&&Object(m.a)(new Date(T.created_at),U.a)}},{title:Object(t.jsx)(a.a,{id:"name",defaultMessage:"name"}),dataIndex:"name",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"event",defaultMessage:"event"}),dataIndex:"event",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"templates.is_default"}),dataIndex:"default",hideInSearch:!0,render:function(N,T){return T.default&&Object(t.jsx)(a.a,{id:"yes"})}}],Ee=Object(f.useCallback)(function(){var x=Object(ae.a)(B.a.mark(function N(T){var n,c;return B.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return G(!0),n=L.default.loading(Object(t.jsx)(a.a,{id:"loading",defaultMessage:"loading"})),l.prev=2,l.next=5,Object(r.b)(T).then(function(y){G(!1),y.success&&L.default.success(y.message)});case 5:return n(),G(!1),(c=F.current)===null||c===void 0||c.reload(),l.abrupt("return",!0);case 11:return l.prev=11,l.t0=l.catch(2),n(),L.default.error(Object(t.jsx)(a.a,{id:"error",defaultMessage:"error"})),G(!1),l.abrupt("return",!1);case 17:case"end":return l.stop()}},N,null,[[2,11]])}));return function(N){return x.apply(this,arguments)}}(),[F]);return Object(t.jsx)(O.a,{headerTitle:Oe.formatMessage({id:"templates",defaultMessage:"templates"}),loading:De,actionRef:F,rowKey:"id",search:!1,toolBarRender:function(){return[Object(t.jsx)(i.a,{to:"/templates/".concat(Y,"/new"),children:Object(t.jsxs)(P.a,{type:"primary",children:[Object(t.jsx)(ne.a,{})," ",Object(t.jsx)(a.a,{id:"new",defaultMessage:"new"})]},"primary")})]},request:function(N){var T=N.pageSize,n=N.current;return G(!0),Object(r.e)({pageSize:T,current:n}).then(function(c){return c.success?(G(!1),{data:c.data.filter(function(s){return s.channel===Q}),total:c.meta.total,success:!0}):[]})},columns:[].concat(Ce,[{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",render:function(N,T){return[Object(t.jsx)(i.a,{to:"/templates/".concat(Y,"/").concat(T.id),children:Object(t.jsx)(A.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(P.a,{type:"primary",icon:Object(t.jsx)(E.a,{})})})},"edit"),Object(t.jsx)(d.a,{title:Object(t.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:function(){return Ee(T.id)},okText:Object(t.jsx)(a.a,{id:"yes"}),cancelText:Object(t.jsx)(a.a,{id:"no"}),children:Object(t.jsx)(A.a,{title:Object(t.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(P.a,{type:"primary",icon:Object(t.jsx)(u.a,{}),danger:!0})})},"delete")]}}])})},de=pe,R;(function(W){W.email="EscolaLms\\TemplatesEmail\\Core\\EmailChannel",W.pdf="EscolaLms\\TemplatesPdf\\Core\\PdfChannel",W.sms="EscolaLms\\TemplatesSms\\Core\\SmsChannel"})(R||(R={}));var ge=function(){var Z=Object(p.h)(),Y=Z.template;return Object(t.jsx)(j.a,{children:Object(t.jsxs)(g.a,{tabs:{type:"card",activeKey:Y,onChange:function(F){return a.d.push("/templates/".concat(F))}},children:[Object(t.jsx)(g.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"email"}),children:Object(t.jsx)(de,{templateType:"email",channel:R.email})},"email"),Object(t.jsx)(g.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"PDF"}),children:Object(t.jsx)(de,{templateType:"pdf",channel:R.pdf})},"pdf"),Object(t.jsx)(g.a.TabPane,{disabled:!0,tab:Object(t.jsx)("span",{children:Object(t.jsx)(a.a,{id:"Push"})}),children:"Push"},"Push"),Object(t.jsx)(g.a.TabPane,{tab:Object(t.jsx)("span",{children:Object(t.jsx)(a.a,{id:"SMS"})}),children:Object(t.jsx)(de,{templateType:"sms",channel:R.sms})},"sms")]})})},He=v.default=ge},S76h:function(D,v,e){},TLLU:function(D,v,e){"use strict";var f=e("5OYt");function p(){return Object(f.a)()}v.a={useBreakpoint:p}},VzZb:function(D,v,e){},"aK+R":function(D,v,e){},df8c:function(D,v,e){},nhC9:function(D,v,e){"use strict";var f=e("wx14"),p=e("q1tI"),a=e.n(p),j=e("Znn+"),g=e("ZTPi"),M=e("VTBJ"),d=e("rePB"),_=e("U8pU"),A=e("ODXe"),he=e("GNNt"),P=e("wEI+"),ee=e("Ff2n"),L=e("1GLa"),ae=e("TLLU"),K=e("UESt"),te=e("6cGi"),B=e("YSkC"),ne=e("TSYQ"),E=e.n(ne),u=e("BGR+"),i=e("14J3"),m=e("BMrR"),O=e("jCWc"),r=e("kPKH"),U=e("aK+R"),t=function(c){var s=c.style,l=c.prefix;return a.a.createElement("div",{className:"".concat(l,"-loading-content"),style:s},a.a.createElement(m.a,{gutter:8},a.a.createElement(r.a,{span:22},a.a.createElement("div",{className:"".concat(l,"-loading-block")}))),a.a.createElement(m.a,{gutter:8},a.a.createElement(r.a,{span:8},a.a.createElement("div",{className:"".concat(l,"-loading-block")})),a.a.createElement(r.a,{span:15},a.a.createElement("div",{className:"".concat(l,"-loading-block")}))),a.a.createElement(m.a,{gutter:8},a.a.createElement(r.a,{span:6},a.a.createElement("div",{className:"".concat(l,"-loading-block")})),a.a.createElement(r.a,{span:18},a.a.createElement("div",{className:"".concat(l,"-loading-block")}))),a.a.createElement(m.a,{gutter:8},a.a.createElement(r.a,{span:13},a.a.createElement("div",{className:"".concat(l,"-loading-block")})),a.a.createElement(r.a,{span:9},a.a.createElement("div",{className:"".concat(l,"-loading-block")}))),a.a.createElement(m.a,{gutter:8},a.a.createElement(r.a,{span:4},a.a.createElement("div",{className:"".concat(l,"-loading-block")})),a.a.createElement(r.a,{span:3},a.a.createElement("div",{className:"".concat(l,"-loading-block")})),a.a.createElement(r.a,{span:16},a.a.createElement("div",{className:"".concat(l,"-loading-block")}))))},pe=t,de=e("S76h"),R=function(c){var s=c.actions,l=c.prefixCls;return Array.isArray(s)&&(s==null?void 0:s.length)?a.a.createElement("ul",{className:"".concat(l,"-actions")},s.map(function(y,J){return a.a.createElement("li",{style:{width:"".concat(100/s.length,"%")},key:"action-".concat(J)},a.a.createElement("span",null,y))})):s?a.a.createElement("ul",{className:"".concat(l,"-actions")},s):null},ge=R,He=e("df8c"),W=["className","style","bodyStyle","headStyle","title","subTitle","extra","tip","wrap","layout","loading","gutter","tooltip","split","headerBordered","bordered","children","size","actions","ghost","hoverable","direction","collapsed","collapsible","collapsibleIconRender","defaultCollapsed","onCollapse","checked","onChecked","tabs","type"],Z=ae.a.useBreakpoint,Y=a.a.forwardRef(function(n,c){var s,l,y,J=n.className,H=n.style,X=n.bodyStyle,$=X===void 0?{}:X,k=n.headStyle,xe=k===void 0?{}:k,me=n.title,Te=n.subTitle,re=n.extra,Pe=n.tip,ve=n.wrap,Xe=ve===void 0?!1:ve,ke=n.layout,le=n.loading,Le=n.gutter,we=Le===void 0?0:Le,qe=n.tooltip,ce=n.split,Be=n.headerBordered,_e=Be===void 0?!1:Be,Re=n.bordered,ea=Re===void 0?!1:Re,Ge=n.children,$e=n.size,aa=n.actions,ze=n.ghost,ta=ze===void 0?!1:ze,Ke=n.hoverable,na=Ke===void 0?!1:Ke,ra=n.direction,Ue=n.collapsed,We=n.collapsible,la=We===void 0?!1:We,Je=n.collapsibleIconRender,Ve=n.defaultCollapsed,ca=Ve===void 0?!1:Ve,sa=n.onCollapse,oa=n.checked,Se=n.onChecked,Ne=n.tabs,Ie=n.type,se=Object(ee.a)(n,W),ia=Object(p.useContext)(P.default.ConfigContext),da=ia.getPrefixCls,Ze=Z(),ua=Object(te.a)(ca,{value:Ue,onChange:sa}),Ye=Object(A.a)(ua,2),fe=Ye[0],ma=Ye[1],be=["xxl","xl","lg","md","sm","xs"],va=function(h){var b=[0,0],S=Array.isArray(h)?h:[h,0];return S.forEach(function(I,V){if(Object(_.a)(I)==="object")for(var z=0;z<be.length;z+=1){var ie=be[z];if(Ze[ie]&&I[ie]!==void 0){b[V]=I[ie];break}}else b[V]=I||0}),b},oe=function(h,b){return h?b:{}},fa=function(h){var b=h;if(Object(_.a)(h)==="object")for(var S=0;S<be.length;S+=1){var I=be[S];if(Ze[I]&&h[I]!==void 0){b=h[I];break}}var V=oe(typeof b=="string"&&/\d%|\dpx/i.test(b),{width:b,flexShrink:0});return{span:b,colSpanStyle:V}},o=da("pro-card"),ba=va(we),Qe=Object(A.a)(ba,2),w=Qe[0],q=Qe[1],Me=!1,Ae=a.a.Children.toArray(Ge),ja=Ae.map(function(C,h){var b;if(C==null||(b=C.type)===null||b===void 0?void 0:b.isProCard){var S;Me=!0;var I=C.props.colSpan,V=fa(I),z=V.span,ie=V.colSpanStyle,Oa=E()(["".concat(o,"-col")],(S={},Object(d.a)(S,"".concat(o,"-split-vertical"),ce==="vertical"&&h!==Ae.length-1),Object(d.a)(S,"".concat(o,"-split-horizontal"),ce==="horizontal"&&h!==Ae.length-1),Object(d.a)(S,"".concat(o,"-col-").concat(z),typeof z=="number"&&z>=0&&z<=24),S));return a.a.createElement("div",{style:Object(M.a)(Object(M.a)(Object(M.a)({},ie),oe(w>0,{paddingRight:w/2,paddingLeft:w/2})),oe(q>0,{paddingTop:q/2,paddingBottom:q/2})),key:"pro-card-col-".concat((C==null?void 0:C.key)||h),className:Oa},a.a.cloneElement(C))}return C}),ha=E()("".concat(o),J,(s={},Object(d.a)(s,"".concat(o,"-border"),ea),Object(d.a)(s,"".concat(o,"-contain-card"),Me),Object(d.a)(s,"".concat(o,"-loading"),le),Object(d.a)(s,"".concat(o,"-split"),ce==="vertical"||ce==="horizontal"),Object(d.a)(s,"".concat(o,"-ghost"),ta),Object(d.a)(s,"".concat(o,"-hoverable"),na),Object(d.a)(s,"".concat(o,"-size-").concat($e),$e),Object(d.a)(s,"".concat(o,"-type-").concat(Ie),Ie),Object(d.a)(s,"".concat(o,"-collapse"),fe),Object(d.a)(s,"".concat(o,"-checked"),oa),s)),pa=E()("".concat(o,"-body"),(l={},Object(d.a)(l,"".concat(o,"-body-center"),ke==="center"),Object(d.a)(l,"".concat(o,"-body-direction-column"),ce==="horizontal"||ra==="column"),Object(d.a)(l,"".concat(o,"-body-wrap"),Xe&&Me),l)),ga=Object(M.a)(Object(M.a)(Object(M.a)({},oe(w>0,{marginRight:-w/2,marginLeft:-w/2})),oe(q>0,{marginTop:-q/2,marginBottom:-q/2})),$),Fe=a.a.isValidElement(le)?le:a.a.createElement(pe,{prefix:o,style:$.padding===0||$.padding==="0px"?{padding:24}:void 0}),je=la&&Ue===void 0&&(Je?Je({collapsed:fe}):a.a.createElement(K.a,{rotate:fe?void 0:90,className:"".concat(o,"-collapsible-icon")}));return a.a.createElement("div",Object(f.a)({className:ha,style:H,ref:c,onClick:function(h){var b;Se==null||Se(h),se==null||(b=se.onClick)===null||b===void 0||b.call(se,h)}},Object(u.a)(se,["prefixCls","colSpan"])),(me||re||je)&&a.a.createElement("div",{className:E()("".concat(o,"-header"),(y={},Object(d.a)(y,"".concat(o,"-header-border"),_e||Ie==="inner"),Object(d.a)(y,"".concat(o,"-header-collapsible"),je),y)),style:xe,onClick:function(){je&&ma(!fe)}},a.a.createElement("div",{className:"".concat(o,"-title")},je,a.a.createElement(B.a,{label:me,tooltip:qe||Pe,subTitle:Te})),re&&a.a.createElement("div",{className:"".concat(o,"-extra")},re)),Ne?a.a.createElement("div",{className:"".concat(o,"-tabs")},a.a.createElement(g.a,Object(f.a)({onChange:Ne.onChange},Ne),le?Fe:Ge)):a.a.createElement("div",{className:pa,style:ga},le?Fe:ja),a.a.createElement(ge,{actions:aa,prefixCls:o}))}),Q=Y,F=e("VzZb"),Oe=["key","tab","tabKey","disabled","destroyInactiveTabPane","children","className","style","cardProps"],ye=function(c){var s=c.key,l=c.tab,y=c.tabKey,J=c.disabled,H=c.destroyInactiveTabPane,X=c.children,$=c.className,k=c.style,xe=c.cardProps,me=Object(ee.a)(c,Oe),Te=Object(p.useContext)(P.default.ConfigContext),re=Te.getPrefixCls,Pe=re("pro-card-tabpane"),ve=E()(Pe,$);return a.a.createElement(g.a.TabPane,Object(f.a)({key:s,tabKey:y,tab:l,className:ve,style:k,disabled:J,destroyInactiveTabPane:H},me),a.a.createElement(Q,xe,X))},ue=ye,De=e("u1OI"),G=function(c){var s=Object(p.useContext)(P.default.ConfigContext),l=s.getPrefixCls,y=l("pro-card-divider"),J=c.className,H=c.style,X=H===void 0?{}:H,$=c.type,k=E()(y,J,Object(d.a)({},"".concat(y,"-").concat($),$));return a.a.createElement("div",{className:k,style:X})},Ce=G,Ee=function(c){return a.a.createElement(Q,Object(f.a)({bodyStyle:{padding:0}},c))},x=Q;x.isProCard=!0,x.Divider=Ce,x.TabPane=ue,x.Group=Ee;var N=x,T=v.a=N},rWUb:function(D,v,e){"use strict";e.d(v,"e",function(){return M}),e.d(v,"d",function(){return _}),e.d(v,"a",function(){return he}),e.d(v,"f",function(){return ee}),e.d(v,"b",function(){return ae}),e.d(v,"g",function(){return te}),e.d(v,"c",function(){return ne});var f=e("k1fw"),p=e("9og8"),a=e("WmNS"),j=e.n(a),g=e("9kvl");function M(u,i){return d.apply(this,arguments)}function d(){return d=Object(p.a)(j.a.mark(function u(i,m){return j.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(g.f)("/api/admin/templates",Object(f.a)({method:"GET",useCache:!1,params:Object(f.a)(Object(f.a)({},i),{},{per_page:i.pageSize&&i.pageSize,page:i.current&&i.current})},m||{})));case 1:case"end":return r.stop()}},u)})),d.apply(this,arguments)}function _(u,i){return A.apply(this,arguments)}function A(){return A=Object(p.a)(j.a.mark(function u(i,m){return j.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(g.f)("/api/admin/templates/".concat(i),Object(f.a)({method:"GET"},m||{})));case 1:case"end":return r.stop()}},u)})),A.apply(this,arguments)}function he(u,i){return P.apply(this,arguments)}function P(){return P=Object(p.a)(j.a.mark(function u(i,m){return j.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(g.f)("/api/admin/templates",Object(f.a)({method:"POST",headers:{"Content-Type":"application/json"},data:i},m||{})));case 1:case"end":return r.stop()}},u)})),P.apply(this,arguments)}function ee(u,i,m){return L.apply(this,arguments)}function L(){return L=Object(p.a)(j.a.mark(function u(i,m,O){return j.a.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",Object(g.f)("/api/admin/templates/".concat(i),Object(f.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:m},O||{})));case 1:case"end":return U.stop()}},u)})),L.apply(this,arguments)}function ae(u,i){return K.apply(this,arguments)}function K(){return K=Object(p.a)(j.a.mark(function u(i,m){return j.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(g.f)("/api/admin/templates/".concat(i),Object(f.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},m||{})));case 1:case"end":return r.stop()}},u)})),K.apply(this,arguments)}function te(u){return B.apply(this,arguments)}function B(){return B=Object(p.a)(j.a.mark(function u(i){return j.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Object(g.f)("/api/admin/templates/variables",Object(f.a)({method:"GET"},i||{})));case 1:case"end":return O.stop()}},u)})),B.apply(this,arguments)}function ne(u,i){return E.apply(this,arguments)}function E(){return E=Object(p.a)(j.a.mark(function u(i,m){return j.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(g.f)("/api/admin/templates/".concat(i,"/preview"),Object(f.a)({method:"GET"},m||{})));case 1:case"end":return r.stop()}},u)})),E.apply(this,arguments)}},u1OI:function(D,v,e){}}]);
