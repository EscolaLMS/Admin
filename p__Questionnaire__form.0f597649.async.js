(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{A6KM:function(ce,J,t){"use strict";t.d(J,"a",function(){return re});var A=t("OaEy"),B=t("2fM7"),ee=t("T2oS"),ue=t("W9HT"),te=t("oBTY"),G=t("tJVT"),L=t("q1tI"),ae=t.n(L),H=t("H6aw"),i=t("EmS3"),y=t("Gb5Y"),$=t("9kvl"),n=t("nKUr"),O=t.n(n),K=function(E){return E.map(function(F){return"name"in F?{id:Number(F.id),name:F.name}:{id:Number(F.id),name:F.title?F.title:""}})},re=function(E){var F=E.value,q=E.onChange,o=E.multiple,se=o===void 0?!1:o,W=E.defaultValue,le=E.modelType,a=le===void 0?"COURSE":le,ie=Object(L.useState)([]),k=Object(G.a)(ie,2),R=k[0],oe=k[1],fe=Object(L.useState)(!1),me=Object(G.a)(fe,2),he=me[0],Oe=me[1],b=Object(L.useRef)(),pe=Object(L.useCallback)(function(f){var N,Q,e,Y;switch(a){case"COURSE":return Object(H.e)(f,{signal:b==null||(N=b.current)===null||N===void 0?void 0:N.signal});case"WEBINAR":return Object(i.f)(f,{signal:b==null||(Q=b.current)===null||Q===void 0?void 0:Q.signal});case"CONSULTATIONS":return Object(y.b)(f,{signal:b==null||(e=b.current)===null||e===void 0?void 0:e.signal});default:return Object(H.e)(f,{signal:b==null||(Y=b.current)===null||Y===void 0?void 0:Y.signal})}},[a,b]),ge=Object(L.useCallback)(function(f){var N,Q,e,Y;switch(a){case"COURSE":return Object(H.k)(Number(f),{signal:(N=b.current)===null||N===void 0?void 0:N.signal});case"WEBINAR":return Object(i.d)(Number(f),{signal:(Q=b.current)===null||Q===void 0?void 0:Q.signal});case"CONSULTATIONS":return Object(y.e)(Number(f),{signal:(e=b.current)===null||e===void 0?void 0:e.signal});default:return Object(H.k)(Number(f),{signal:(Y=b.current)===null||Y===void 0?void 0:Y.signal})}},[a,b]),de=Object(L.useCallback)(function(f){Oe(!0),b.current&&b.current.abort(),b.current=new AbortController,pe(f?{title:f}:{}).then(function(N){N.success&&oe(K(N.data)),Oe(!1)}).catch(function(){return Oe(!1)})},[a]),ve=Object(L.useCallback)(function(f){de(f)},[de]);return Object(L.useEffect)(function(){return b.current=new AbortController,F&&ge(Number(F)).then(function(f){f&&f.success&&oe(function(N){return[].concat(Object(te.a)(N),Object(te.a)(K([f.data])))})}),function(){b.current&&b.current.abort()}},[F,a]),Object(n.jsx)(B.a,{defaultValue:W,onFocus:function(){return de()},allowClear:!0,style:{width:"100%"},value:F,onChange:q,mode:se?"multiple":void 0,showSearch:!0,onSearch:ve,placeholder:Object(n.jsx)($.a,{id:"select_content",defaultMessage:"select_content"}),optionFilterProp:"children",filterOption:function(N,Q){if(Q&&Q.children){var e;return(Q==null||(e=Q.children)===null||e===void 0?void 0:e.toString().toLowerCase().indexOf(N.toLowerCase()))>=0}return!0},notFoundContent:he?Object(n.jsx)(ue.a,{size:"small"}):null,optionLabelProp:"label",children:R.map(function(f){return Object(n.jsx)(B.a.Option,{value:f.id,label:f.name,children:f.name},f.id)})})}},FJDo:function(ce,J,t){"use strict";var A=t("VTBJ"),B=t("Ff2n"),ee=t("nKUr"),ue=t.n(ee),te=t("q1tI"),G=t.n(te),L=t("adzw"),ae=["fieldProps","min","proFieldProps","max"],H=function(y,$){var n=y.fieldProps,O=y.min,K=y.proFieldProps,re=y.max,d=Object(B.a)(y,ae);return Object(ee.jsx)(L.a,Object(A.a)({valueType:"digit",fieldProps:Object(A.a)({min:O,max:re},n),ref:$,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:K},d))};J.a=G.a.forwardRef(H)},FhbG:function(ce,J,t){"use strict";t.r(J),t.d(J,"ModelTypes",function(){return Me}),t.d(J,"QuestionareForm",function(){return ye});var A=t("+L6B"),B=t("2/Rp"),ee=t("14J3"),ue=t("BMrR"),te=t("jCWc"),G=t("kPKH"),L=t("T2oS"),ae=t("W9HT"),H=t("miYZ"),i=t("tsqr"),y=t("oBTY"),$=t("jrin"),n=t("k1fw"),O=t("qLMh"),K=t("9og8"),re=t("y8nQ"),d=t("Vl3Y"),E=t("tJVT"),F=t("tU7J"),q=t("wFql"),o=t("q1tI"),se=t("tMyG"),W=t("nhC9"),le=t("Ty5D"),a=t("9kvl"),ie=t("Qurx"),k=t("F/zT"),R=t("HuWs"),oe=t("VMEa"),fe=t("A6KM"),me=t("P2fV"),he=t("NJEC"),Oe=t("5Dmo"),b=t("3S7+"),pe=t("xvlK"),ge=t("G3dp"),de=t("/MfK"),ve=t("Qiat"),f=t("rmhi"),N=t("yj/a"),Q=t("FJDo"),e=t("nKUr"),Y;(function(z){z.Rate="rate",z.Text="text",z.Review="review"})(Y||(Y={}));var Fe=function(x){var l=Object(a.l)(),T=x.visible,P=x.onVisibleChange,p=x.onFinish,j=x.id,Z=x.questionsList,I=d.a.useForm(),m=Object(E.a)(I,1),u=m[0];Object(o.useEffect)(function(){typeof j=="number"&&j>0?Object(R.h)(j).then(function(r){r.success&&u.setFieldsValue(r.data)}):u.resetFields()},[j,u]);var v=Object.values(Y).map(function(r){return{name:r,label:l.formatMessage({id:"QuestionType.".concat(r)}),value:r,disabled:r==="review"&&Z.findIndex(function(V){var S=V.type;return S==="review"})!==-1}});return Object(e.jsxs)(f.a,{form:u,title:l.formatMessage({id:typeof j=="number"&&j>0?"question_edit":"question_add",defaultMessage:typeof j=="number"&&j>0?"question_edit":"question_add"}),width:"400px",visible:T,onVisibleChange:P,onFinish:p,children:[Object(e.jsx)(N.a,{name:"type",options:v,label:Object(e.jsx)(a.a,{id:"type"}),initialValue:Y.Rate}),Object(e.jsx)(ie.a,{width:"lg",name:"title",label:Object(e.jsx)(a.a,{id:"title"}),tooltip:Object(e.jsx)(a.a,{id:"title"}),placeholder:l.formatMessage({id:"title"})}),Object(e.jsx)(ie.a,{width:"lg",name:"description",label:Object(e.jsx)(a.a,{id:"description"}),tooltip:Object(e.jsx)(a.a,{id:"description"}),placeholder:l.formatMessage({id:"description"})}),Object(e.jsx)(Q.a,{width:"lg",name:"position",label:Object(e.jsx)(a.a,{id:"position"}),tooltip:Object(e.jsx)(a.a,{id:"position"}),placeholder:l.formatMessage({id:"position",defaultMessage:"position"}),min:0,max:9999,fieldProps:{step:1}}),Object(e.jsx)(k.a,{initialValue:!0,name:"active",label:Object(e.jsx)(a.a,{id:"is_active",defaultMessage:"is_active"})}),Object(e.jsx)(k.a,{initialValue:!0,name:"public_answers",label:Object(e.jsx)(a.a,{id:"show_hide_on_front",defaultMessage:"show_hide_on_front"})})]})},Re=Fe,Ae=t("c+yx"),Le=function(x){var l=x.questionnaireId,T=x.questions,P=x.fetchData,p=Object(a.l)(),j=Object(o.useState)(!1),Z=Object(E.a)(j,2),I=Z[0],m=Z[1],u=Object(o.useMemo)(function(){return[{title:Object(e.jsx)(a.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:Object(e.jsx)(a.a,{id:"title",defaultMessage:"title"}),dataIndex:"title",hideInSearch:!1,sorter:!0},{title:Object(e.jsx)(a.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0,sorter:!0,renderText:function(g,M){return p.formatMessage({id:"QuestionType.".concat(M.type)})}},{title:Object(e.jsx)(a.a,{id:"description",defaultMessage:"description"}),dataIndex:"description",hideInSearch:!0,sorter:!0},{title:Object(e.jsx)(a.a,{id:"position",defaultMessage:"position"}),dataIndex:"position",hideInSearch:!0,sorter:!0}]},[]),v=Object(o.useRef)(),r=function(){var S=Object(K.a)(Object(O.a)().mark(function g(M,s){var _;return Object(O.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return _=i.b.loading(p.formatMessage({id:"loading"})),c.prev=1,c.next=4,s&&s!==-1?Object(R.g)(s,Object(n.a)(Object(n.a)({},M),{},{questionnaire_id:l})):Object(R.a)(Object(n.a)(Object(n.a)({},M),{},{questionnaire_id:l}));case 4:return _(),P(),i.b.success(p.formatMessage({id:"success"})),c.abrupt("return",!0);case 10:return c.prev=10,c.t0=c.catch(1),_(),i.b.error(p.formatMessage({id:"error"})),c.abrupt("return",!1);case 15:case"end":return c.stop()}},g,null,[[1,10]])}));return function(M,s){return S.apply(this,arguments)}}(),V=Object(o.useCallback)(function(){var S=Object(K.a)(Object(O.a)().mark(function g(M){var s,_;return Object(O.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s=i.b.loading(p.formatMessage({id:"loading"})),c.prev=1,c.next=4,Object(R.e)(M);case 4:return s(),P(),(_=v.current)===null||_===void 0||_.reload(),c.abrupt("return",!0);case 10:return c.prev=10,c.t0=c.catch(1),s(),i.b.error(Object(e.jsx)(a.a,{id:"error",defaultMessage:"error"})),c.abrupt("return",!1);case 15:case"end":return c.stop()}},g,null,[[1,10]])}));return function(g){return S.apply(this,arguments)}}(),[v,p]);return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(ve.a,{headerTitle:p.formatMessage({id:"question_list",defaultMessage:"question_list"}),actionRef:v,rowKey:"id",search:{layout:"vertical"},toolBarRender:function(){return[Object(e.jsxs)(B.a,{type:"primary",onClick:function(){m(-1)},children:[Object(e.jsx)(pe.a,{})," ",Object(e.jsx)(a.a,{id:"pages.searchTable.new",defaultMessage:"\u65B0\u5EFA"})]},"primary")]},columns:[].concat(Object(y.a)(u),[{title:Object(e.jsx)(a.a,{id:"options",defaultMessage:"options"}),dataIndex:"option",valueType:"option",render:function(g,M){return[Object(e.jsx)(b.a,{title:Object(e.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(e.jsx)(B.a,{type:"primary",icon:Object(e.jsx)(ge.a,{}),onClick:function(){return M.id&&m(M.id)}})},"edit"),Object(e.jsx)(he.a,{title:Object(e.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:function(){return M.id&&V(M.id)},okText:Object(e.jsx)(a.a,{id:"yes"}),cancelText:Object(e.jsx)(a.a,{id:"no"}),children:Object(e.jsx)(b.a,{title:Object(e.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(e.jsx)(B.a,{type:"primary",icon:Object(e.jsx)(de.a,{}),danger:!0})})},"delete")]}}]),request:function(g,M){var s=g.title,_=M&&Object.entries(M)[0];return new Promise(function(X){var c=T?Object(y.a)(T):[];s&&(c=c.filter(function(Ee){return Ee.title.toLowerCase().includes(s.toLowerCase())})),_&&(c=Object(Ae.i)(c,_[0],_[1]!=="ascend")),X({data:c,success:!0,total:c.length})})}}),Object(e.jsx)(Re,{id:I,visible:Number.isInteger(I),onVisibleChange:function(g){return g===!1&&m(!1)},questionsList:T!=null?T:[],onFinish:function(){var S=Object(K.a)(Object(O.a)().mark(function g(M){var s;return Object(O.a)().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,r(M,Number(I));case 2:s=X.sent,s&&(m(!1),v.current&&v.current.reload());case 4:case"end":return X.stop()}},g)}));return function(g){return S.apply(this,arguments)}}()})]})},Ue=Le,Be=t("PpiC"),Ke=t("Vpfc"),We=t("0WSk"),Ne=t("sWYD"),Ve=t("mGZj"),Qe=["type"],$e=function(x){var l=x.record,T=d.a.useForm(),P=Object(E.a)(T,1),p=P[0],j=Object(a.l)(),Z=Object(o.useMemo)(function(){return{onValuesChange:function(m,u){var v=u,r=v.visible_on_front;Object(R.c)(l.id,{visible_on_front:r}).then(function(V){i.b.success(Object(e.jsx)(a.a,{id:"question_answer_visibility_changed",defaultMessage:V.message}))}).catch(function(){return i.b.error(Object(e.jsx)(a.a,{id:"error",defaultMessage:"error"}))})},submitter:{render:function(){return null}}}},[]);return Object(e.jsx)(oe.a,Object(n.a)(Object(n.a)({form:p},Z),{},{children:Object(e.jsx)(k.a,{name:"visible_on_front",initialValue:l.visible_on_front,checkedChildren:j.formatMessage({id:"visible",defaultMessage:"visible"}),unCheckedChildren:j.formatMessage({id:"hidden",defaultMessage:"hidden"})})}))},_e=function(x){var l=x.questionnaireId,T=x.questions,P=Object(o.useMemo)(function(){return T&&T.reduce(function(I,m){return Object(n.a)(Object(n.a)({},I),{},Object($.a)({},m.id,m.title))},{})},[T]),p=[{title:Object(e.jsx)(a.a,{id:"questions",defaultMessage:"questions"}),dataIndex:"question_id",hideInSearch:!1,valueEnum:P,valueType:"select"}],j=Object(a.l)(),Z=[{title:Object(e.jsx)(a.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:Object(e.jsx)(a.a,{id:"updated_at",defaultMessage:"updated_at"}),dataIndex:"updated_at",hideInSearch:!0,render:function(m,u){return u.updated_at?new Date(u.updated_at).toLocaleString():"-"},sorter:!0},{title:Object(e.jsx)(a.a,{id:"updated_at",defaultMessage:"updated_at"}),dataIndex:"date",hideInSearch:!1,hideInForm:!0,hideInTable:!0,valueType:"date",fieldProps:{allowEmpty:[!0]}},{title:Object(e.jsx)(a.a,{id:"title",defaultMessage:"title"}),dataIndex:"question_title",hideInSearch:!0,sorter:!0},{title:Object(e.jsx)(a.a,{id:"note",defaultMessage:"note"}),dataIndex:"note",hideInSearch:!0,sorter:!0,render:function(m,u){var v,r;return u.note&&((v=u.note)===null||v===void 0?void 0:v.length)>64?((r=u.note)===null||r===void 0?void 0:r.slice(0,64))+"...":u.note}},{title:Object(e.jsx)(a.a,{id:"user",defaultMessage:"user"}),dataIndex:"user_id",hideInSearch:!1,render:function(m,u){var v,r;return Object(e.jsxs)("div",{children:[Object(e.jsx)(Ke.a,{type:"App\\Models\\User",type_id:u.user_id}),Object(e.jsx)("p",{className:"list-paragraph",children:(v=u.user)===null||v===void 0?void 0:v.name}),Object(e.jsx)("p",{className:"list-paragraph",children:(r=u.user)===null||r===void 0?void 0:r.email})]})},renderFormItem:function(m,u,v){var r=u.type,V=Object(Be.a)(u,Qe);if(r==="form")return null;var S=v.getFieldValue("state");return Object(e.jsx)(We.a,Object(n.a)(Object(n.a)({},V),{},{state:{type:S}}))}},{title:Object(e.jsx)(a.a,{id:"sum_rate",defaultMessage:"sum_rate"}),dataIndex:"rate",hideInSearch:!0,sorter:!0},{title:Object(e.jsx)(a.a,{id:"show_hide_on_front",defaultMessage:"show_hide_on_front"}),dataIndex:"visible_on_front",hideInSearch:!0,sorter:!1,render:function(m,u){return Object(e.jsx)($e,{record:u})}}];return Object(e.jsx)(ve.a,{headerTitle:j.formatMessage({id:"answers",defaultMessage:"answers"}),search:{layout:"vertical"},rowKey:"id",request:function(m,u){var v=m.pageSize,r=m.current,V=m.question_id,S=m.user_id,g=m.date,M=u&&Object.entries(u)[0];return Object(R.i)(l,{per_page:v,page:r,question_id:V,user_id:S,updated_at:g?Object(Ne.a)(new Date(g),Ve.a):void 0,order_by:M&&M[0],order:M?M[1]==="ascend"?"ASC":"DESC":void 0}).then(function(s){return s.success?{data:s.data,success:!0}:[]})},columns:[].concat(Z,p)})},we=_e,at=t("OaEy"),Pe=t("2fM7"),rt=t("fOrg"),Je=t("+KLJ"),Ge=t("LDJE"),ze={isGroup:!0,xField:"label",yField:"value",seriesField:"type",marginRatio:0},He=function(x){var l=x.state,T=Object(a.l)();return Object(e.jsxs)(W.a,{headerBordered:!0,style:{height:"500px"},children:[l.mode==="loading"&&Object(e.jsx)(ae.a,{}),l.mode==="loaded"&&l.value.length>0?Object(e.jsx)(Ge.a,Object(n.a)(Object(n.a)({},ze),{},{data:[].concat(Object(y.a)(l.value),Object(y.a)(l.value)).map(function(P,p){return{label:P.title,value:p>l.value.length-1?P.count_answers:Number(P.avg_rate),type:p>l.value.length-1?T.formatMessage({id:"answers"}):"Rating"}})})):l.mode!=="loading"&&Object(e.jsx)("p",{children:Object(e.jsx)(a.a,{id:"no_data",defaultMessage:"no_data"})}),l.mode==="error"&&Object(e.jsx)(Je.a,{message:l.error.data.message,type:"error"})]})},Ye=He,Ze=function(x){var l=x.questionnaireId,T=x.models,P=Object(o.useState)(""),p=Object(E.a)(P,2),j=p[0],Z=p[1],I=Object(o.useState)({mode:"init"}),m=Object(E.a)(I,2),u=m[0],v=m[1];return Object(o.useEffect)(function(){v({mode:"loading"});var r=function(){var V=Object(K.a)(Object(O.a)().mark(function S(){var g;return Object(O.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,!j){s.next=7;break}return s.next=4,Object(R.m)(l,Number(j.split("/")[0]),Number(j.split("/")[1]));case 4:s.t0=s.sent,s.next=10;break;case 7:return s.next=9,Object(R.m)(l);case 9:s.t0=s.sent;case 10:g=s.t0,g.success&&v({mode:"loaded",value:g.data}),s.next=17;break;case 14:s.prev=14,s.t1=s.catch(0),v({mode:"error",error:s.t1});case 17:case"end":return s.stop()}},S,null,[[0,14]])}));return function(){return V.apply(this,arguments)}}();r()},[l,T,j]),Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(q.a.Title,{level:5,children:Object(e.jsx)(a.a,{id:"questionnaire.raports.filter",defaultMessage:"questionnaire.raports.filter"})}),Object(e.jsx)(Pe.a,{allowClear:!0,style:{minWidth:"400px"},onChange:function(V){return Z(V)},children:T.map(function(r){return Object(e.jsxs)(Pe.a.Option,{value:"".concat(r.model_type_id,"/").concat(r.model_id),children:[Object(e.jsx)(a.a,{id:r.model_type_title,defaultMessage:r.model_type_title})," ","- ",r.model_title]},r.id)})}),Object(e.jsx)(W.a,{split:"vertical",children:Object(e.jsx)(W.a,{colSpan:24,layout:"center",children:Object(e.jsx)(Ye,{state:u})})})]})},Xe=Ze,nt=t("GCLz"),qe=q.a.Title,Me;(function(z){z[z.COURSE=1]="COURSE"})(Me||(Me={}));var ye=function(){var x,l,T=Object(le.l)(),P=T.questionnaireId,p=Object(a.l)(),j=P==="new",Z=d.a.useForm(),I=Object(E.a)(Z,1),m=I[0],u=Object(o.useState)(),v=Object(E.a)(u,2),r=v[0],V=v[1],S=Object(o.useState)("questionnaire"),g=Object(E.a)(S,2),M=g[0],s=g[1],_=Object(o.useState)(),X=Object(E.a)(_,2),c=X[0],Ee=X[1],ke=Object(o.useState)({}),Se=Object(E.a)(ke,2),Ce=Se[0],De=Se[1],Te=Object(o.useCallback)(Object(K.a)(Object(O.a)().mark(function D(){var h;return Object(O.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,Object(R.k)();case 2:h=C.sent,h.success&&Ee(h.data);case 4:case"end":return C.stop()}},D)})),[]),Ie=Object(o.useCallback)(function(D,h){return D.reduce(function(U,C){return(U[C[h]]=U[C[h]]||[]).push(C.model_id),U},{})},[]),je=Object(o.useCallback)(Object(K.a)(Object(O.a)().mark(function D(){var h;return Object(O.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,Object(R.j)(Number(P));case 2:h=C.sent,h.success&&(V(Object(n.a)({},h.data)),h.data.models&&De(Ie(h.data.models,"model_type_id")));case 4:case"end":return C.stop()}},D)})),[P,Ie]);Object(o.useEffect)(function(){if(Te(),j){V({title:"new"});return}je()},[P,je,Te,j]);var et=Object(o.useCallback)(function(D,h){De(function(U){return Object(n.a)(Object(n.a)({},U),{},Object($.a)({},h,D))})},[]),xe=Object(o.useCallback)(function(D){var h=[];return Object.keys(D).map(function(U){h.push.apply(h,Object(y.a)(D[U].map(function(C){return{model_id:C,model_type_id:Number(U)}})))}),h},[]),tt=Object(o.useMemo)(function(){return{onFinish:function(){var D=Object(K.a)(Object(O.a)().mark(function U(C){var ne,be;return Object(O.a)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(w.prev=0,!j){w.next=9;break}return w.next=4,Object(R.d)(Object(n.a)(Object(n.a)({},C),{},{models:xe(Ce)}));case 4:ne=w.sent,ne.success&&a.f.push("/other/questionnaire/".concat(ne.data.id)),i.b.success(Object(e.jsx)(a.a,{id:"success",defaultMessage:"success"})),w.next=14;break;case 9:return w.next=11,Object(R.p)(Number(r==null?void 0:r.id),Object(n.a)(Object(n.a)({},C),{},{models:xe(Ce)}));case 11:be=w.sent,be.success&&je(),i.b.success(Object(e.jsx)(a.a,{id:"success",defaultMessage:"success"}));case 14:w.next=19;break;case 16:w.prev=16,w.t0=w.catch(0),i.b.error(Object(e.jsx)(a.a,{id:"error",defaultMessage:"error"}));case 19:case"end":return w.stop()}},U,null,[[0,16]])}));function h(U){return D.apply(this,arguments)}return h}(),initialValues:r}},[r,Ce,je,xe,j]);return r?Object(e.jsx)(se.a,{title:Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(a.a,{id:r!=null&&r.title?"questionnaire":"new_questionnaire"})}),header:{breadcrumb:{routes:[{path:"other/questionnaire",breadcrumbName:p.formatMessage({id:"menu.Other activities.Questionnaire"})},{path:String(P),breadcrumbName:p.formatMessage({id:"form"})},{path:"/",breadcrumbName:String(r==null?void 0:r.title)}]}},children:Object(e.jsxs)(W.a,{tabs:{type:"card",defaultActiveKey:"questionnaire",activeKey:M,onChange:function(h){return s(h)}},children:[Object(e.jsxs)(W.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"questionnaire",defaultMessage:"questionnaire"}),children:[Object(e.jsx)(qe,{level:3,children:Object(e.jsx)(a.a,{id:"questionnaire",defaultMessage:"questionnaire"})})," ",Object(e.jsx)(oe.a,Object(n.a)(Object(n.a)({},tt),{},{form:m,children:Object(e.jsxs)(ue.a,{children:[Object(e.jsx)(G.a,{span:6,children:Object(e.jsx)(ie.a,{label:Object(e.jsx)(a.a,{id:"title",defaultMessage:"title"}),rules:[{required:!0}],width:"md",name:"title"})}),Object(e.jsx)(G.a,{children:Object(e.jsx)(k.a,{initialValue:!0,name:"active",label:Object(e.jsx)(a.a,{id:"is_active",defaultMessage:"is_active"})})})]})}))]},"questionnaire"),Object(e.jsx)(W.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"questions",defaultMessage:"questions"}),disabled:j,children:Object(e.jsx)(Ue,{questionnaireId:Number(P),questions:r.questions||[],fetchData:je})},"questions"),Object(e.jsx)(W.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"answers",defaultMessage:"answers"}),disabled:j,children:Object(e.jsx)(we,{questionnaireId:Number(P),questions:r.questions||[]})},"answers"),c&&c.map(function(D){var h,U,C;return Object(e.jsxs)(W.a.TabPane,{tab:"".concat(p.formatMessage({id:"assign"})," ").concat(p.formatMessage({id:"to"})," ").concat(p.formatMessage({id:(h=D.title)===null||h===void 0?void 0:h.replace(D.title.charAt(0),D.title.charAt(0).toUpperCase())})),disabled:j,children:[Object(e.jsx)(fe.a,{defaultValue:((U=r.models)===null||U===void 0?void 0:U.filter(function(ne){return ne.model_type_title===D.title}).map(function(ne){return{value:ne.model_id,label:ne.model_title}}))||[],multiple:!0,onChange:function(be){return et(be,D.id)},modelType:(C=D.title)===null||C===void 0?void 0:C.toUpperCase()}),Object(e.jsx)(B.a,{className:"submit-btn",type:"primary",onClick:function(){return m.submit()},children:Object(e.jsx)(a.a,{id:"questionnaire.submit",defaultMessage:"questionnaire.submit"})})]},String(D.id))}),Object(e.jsx)(W.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"menu.reports",defaultMessage:"menu.reports"}),disabled:j||((x=r.models)===null||x===void 0?void 0:x.length)===0,children:(r==null?void 0:r.models)&&(r==null||(l=r.models)===null||l===void 0?void 0:l.length)>0&&Object(e.jsx)(Xe,{questionnaireId:Number(P),models:r.models})},"raport")]})}):Object(e.jsx)(ae.a,{})},st=J.default=ye},GCLz:function(ce,J,t){},LDJE:function(ce,J,t){"use strict";var A=t("q1tI"),B=t.n(A),ee=t("ma/q"),ue=t("ZIEt"),te=t("QpZ9"),G=t("GzfL"),L=t("Scwr"),ae=function(i,y){var $={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&y.indexOf(n)<0&&($[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var O=0,n=Object.getOwnPropertySymbols(i);O<n.length;O++)y.indexOf(n[O])<0&&Object.prototype.propertyIsEnumerable.call(i,n[O])&&($[n[O]]=i[n[O]]);return $},H=Object(A.forwardRef)(function(i,y){var $=i.chartRef,n=i.style,O=n===void 0?{height:"inherit"}:n,K=i.className,re=i.loading,d=i.loadingTemplate,E=i.errorTemplate,F=ae(i,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),q=Object(ue.a)(ee.a,F),o=q.chart,se=q.container;return Object(A.useEffect)(function(){Object(te.a)($,o.current)},[o.current]),Object(A.useImperativeHandle)(y,function(){return{getChart:function(){return o.current}}}),B.a.createElement(G.a,{errorTemplate:E},re&&B.a.createElement(L.a,{loadingTemplate:d,theme:i.theme}),B.a.createElement("div",{className:K,style:O,ref:se}))});J.a=H},"yj/a":function(ce,J,t){"use strict";var A=t("VTBJ"),B=t("Ff2n"),ee=t("nKUr"),ue=t.n(ee),te=t("uX+g"),G=t("q1tI"),L=t.n(G),ae=t("lS/g"),H=t("adzw"),i=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],y=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],$=L.a.forwardRef(function(d,E){var F=d.fieldProps,q=d.children,o=d.params,se=d.proFieldProps,W=d.mode,le=d.valueEnum,a=d.request,ie=d.showSearch,k=d.options,R=Object(B.a)(d,i),oe=Object(G.useContext)(ae.b);return Object(ee.jsx)(H.a,Object(A.a)(Object(A.a)({valueEnum:Object(te.a)(le),request:a,params:o,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:Object(A.a)({options:k,mode:W,showSearch:ie,getPopupContainer:oe.getPopupContainer},F),ref:E,proFieldProps:se},R),{},{children:q}))}),n=L.a.forwardRef(function(d,E){var F=d.fieldProps,q=d.children,o=d.params,se=d.proFieldProps,W=d.mode,le=d.valueEnum,a=d.request,ie=d.options,k=Object(B.a)(d,y),R=Object(A.a)({options:ie,mode:W||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},F),oe=Object(G.useContext)(ae.b);return Object(ee.jsx)(H.a,Object(A.a)(Object(A.a)({valueEnum:Object(te.a)(le),request:a,params:o,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:Object(A.a)({getPopupContainer:oe.getPopupContainer},R),ref:E,proFieldProps:se},k),{},{children:q}))}),O=$,K=n,re=O;re.SearchSelect=K,re.displayName="ProFormComponent",J.a=re}}]);

//# sourceMappingURL=p__Questionnaire__form.0f597649.async.js.map