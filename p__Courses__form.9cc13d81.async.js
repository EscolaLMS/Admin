(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[4981,2803,592,7883],{48959:function(Ge,be,t){"use strict";var Me=t(28248),_=t(80854),ve=t(85893),f=function(h){var I=h.open,u=h.onOk,z=h.onCancel,O=h.title,ne=h.content,C=h.okText,oe=h.loading;return(0,ve.jsx)(Me.Z,{width:"600px",title:O!=null?O:(0,ve.jsx)(_.FormattedMessage,{id:"confirmModal.title"}),open:I,onOk:u,onCancel:z,okText:C!=null?C:(0,ve.jsx)(_.FormattedMessage,{id:"save"}),cancelText:(0,ve.jsx)(_.FormattedMessage,{id:"cancel"}),confirmLoading:oe,children:ne!=null?ne:(0,ve.jsx)("p",{children:(0,ve.jsx)(_.FormattedMessage,{id:"confirmModal.content"})})})};be.Z=f},11312:function(Ge,be,t){"use strict";t.d(be,{nu:function(){return S},rL:function(){return fe},Du:function(){return Ze}});var Me=t(9783),_=t.n(Me),ve=t(97857),f=t.n(ve),me=t(19632),h=t.n(me),I=t(5574),u=t.n(I),z=t(45919),O=t(66419),ne=t(78677),C=t(26271),oe=t(78957),R=t(66309),X=t(72051),Q=t(71230),B=t(72269),w=t(83863),l=t(60943),n=t(67294),K=t(70804),e=t(80854),Y=t(62235),H=t(15009),W=t.n(H),p=t(99289),U=t.n(p),L=t(58638),te=t(14726),N=t(76841),v=t(85893),m=function(F){var x=F.course_id,M=F.stat,k=M===void 0?"EscolaLms\\Reports\\Stats\\Course\\FinishedTopics":M,le=(0,n.useState)(!1),q=u()(le,2),Z=q[0],$=q[1],ue=(0,n.useCallback)(function(se){return U()(W()().mark(function Pe(){var Oe,Te;return W()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return $(!0),V.prev=1,V.next=4,(0,N._g)(se,{stat:k});case 4:Oe=V.sent,Oe instanceof Blob&&(Te=document.createElement("a"),Te.href=window.URL.createObjectURL(Oe),Te.download="finished_topics_".concat(x,".xlsx"),document.body.appendChild(Te),Te.click(),document.body.removeChild(Te)),V.next=11;break;case 8:V.prev=8,V.t0=V.catch(1),console.error(V.t0);case 11:return V.prev=11,$(!1),V.finish(11);case 14:case"end":return V.stop()}},Pe,null,[[1,8,11,14]])}))},[k]);return(0,v.jsxs)(te.ZP,{type:"primary",loading:Z,onClick:ue(x),children:[(0,v.jsx)(L.Z,{})," ",(0,v.jsx)(e.FormattedMessage,{id:"export"})]})},Ie=function(F){return F.topicable.content.contents?Object.values(F.topicable.content.contents)[0].library:"H5P"},Ze=function(F){var x=F.course_id,M=F.topics,k=F.stats,le=(0,n.useState)(!1),q=u()(le,2),Z=q[0],$=q[1],ue=(0,n.useMemo)(function(){return[{title:(0,v.jsx)(e.FormattedMessage,{id:"user"}),dataIndex:"id",render:function(Oe){return(0,v.jsx)(Y.Z,{type:"App\\Models\\User",type_id:Oe})}},{title:(0,v.jsx)(e.FormattedMessage,{id:"email"}),dataIndex:"email"}].concat(h()(M.map(function(Pe){var Oe,Te=(Oe=Pe.topicable_type)===null||Oe===void 0?void 0:Oe.split("\\").pop();return Te==="H5P"&&(Te=Ie(Pe)),{render:function(V){var ze=0;switch(V&&(V.started_at&&V.finished_at?ze=1:V.started_at&&(ze=2)),ze){case 1:return(0,v.jsxs)(oe.Z,{children:[(0,v.jsx)(R.Z,{color:"success",children:"F"}),Z&&(V==null?void 0:V.seconds)&&(0,v.jsx)("small",{children:(0,O.Im)(V.seconds)})]});case 2:return(0,v.jsxs)(oe.Z,{children:[(0,v.jsx)(R.Z,{color:"blue",children:"S"}),Z&&(V==null?void 0:V.seconds)&&(0,v.jsx)("small",{children:(0,O.Im)(V.seconds)})]});case 0:default:return(0,v.jsx)(n.Fragment,{children:(0,v.jsx)(R.Z,{color:"error",children:"N"})})}},title:(0,v.jsxs)("small",{children:[(0,v.jsx)(R.Z,{children:Te})," ",Pe.title]}),dataIndex:Pe.id}})))},[M,Z]),se=(0,n.useMemo)(function(){return k.map(function(Pe){return M.reduce(function(Oe,Te){var Fe=Pe.topics.find(function(V){return V.id===Te.id});return f()(f()({},Oe),{},_()({},Number(Te.id),Fe!=null?Fe:0))},{email:Pe.email,id:Pe.id})})},[k,M]);return(0,v.jsx)(X.Z,{title:function(){return(0,v.jsxs)(Q.Z,{justify:"space-between",align:"middle",children:[(0,v.jsxs)(oe.Z,{children:[(0,v.jsx)(e.FormattedMessage,{id:"Finished",defaultMessage:"Finished:"})," ",(0,v.jsx)(R.Z,{color:"success",children:"F"}),(0,v.jsx)(e.FormattedMessage,{id:"Started",defaultMessage:"Started:"})," ",(0,v.jsx)(R.Z,{color:"blue",children:"S"}),(0,v.jsx)(e.FormattedMessage,{id:"NotStarted",defaultMessage:"Not Started:"})," ",(0,v.jsx)(R.Z,{color:"error",children:"N"}),(0,v.jsx)(e.FormattedMessage,{id:"ShowMinutes",defaultMessage:"Show minutes spent on topic:"})," ",(0,v.jsx)(B.Z,{checked:Z,onChange:function(Te){return $(Te)}})]}),(0,v.jsx)(m,{course_id:x})]})},columns:ue,dataSource:se,size:"small",scroll:{x:1500},components:{table:function(Oe){return(0,v.jsx)(K.Z,{horizontal:!0,style:{maxWidth:"auto"},hideScrollbars:!1,children:(0,v.jsx)("table",f()({},Oe))})}}})},fe=function(F){var x=F.stats,M=F.attempts,k=(0,n.useMemo)(function(){return[{title:(0,v.jsx)(e.FormattedMessage,{id:"user"}),dataIndex:"id",render:function(Z){return(0,v.jsx)(Y.Z,{type:"App\\Models\\User",type_id:Z})}},{title:(0,v.jsx)(e.FormattedMessage,{id:"email"}),dataIndex:"email"},{title:(0,v.jsx)(e.FormattedMessage,{id:"attempt",defaultMessage:"Attempt"}),dataIndex:"attempt"},{title:(0,v.jsx)(e.FormattedMessage,{id:"finished_at",defaultMessage:"Finished at"}),dataIndex:"finished_at",render:function(Z){return Z?(0,l.WU)(new Date(Z),z.Cu):""}}]},[]),le=(0,n.useMemo)(function(){return x.map(function(q){var Z=q.id,$=q.email,ue=q.finished_at,se=M==null?void 0:M.find(function(Oe){return Oe.id===Z}),Pe=Array.isArray(se==null?void 0:se.attempts)?se==null?void 0:se.attempts.length:0;return{id:Z,email:$,finished_at:ue,attempt:Pe}})},[x]);return(0,v.jsx)(X.Z,{title:function(){return(0,v.jsx)(oe.Z,{children:(0,v.jsx)(e.FormattedMessage,{id:"course.finished",defaultMessage:"Finished"})})},columns:k,dataSource:le,size:"small",scroll:{x:500}})},S=function(F){var x=F.stats,M=(0,n.useState)(null),k=u()(M,2),le=k[0],q=k[1],Z=(0,n.useState)(null),$=u()(Z,2),ue=$[0],se=$[1],Pe=(0,e.useIntl)(),Oe=(0,n.useMemo)(function(){return x.flatMap(function(Fe){return Object.values(Fe.attempts).flatMap(function(V){var ze=V.dates,He=V.attempt,ee=Object.values(ze).flatMap(function(Ee){var pe=Ee.date,_e=Ee.seconds_total;return{date:pe,attempt:He,seconds_total:_e,email:Fe.email}});return ee})})},[x]),Te={xField:"date",yField:"seconds_total",seriesField:"attempt",isStack:!0,xAxis:{label:{autoHide:!0,autoRotate:!1}},slider:{start:0,end:1},label:{position:"middle",layout:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"}]}};return(0,v.jsx)(C.ZP,{title:(0,v.jsxs)(oe.Z,{children:[(0,v.jsx)(e.FormattedMessage,{id:"course.interactions_time_in_days"}),(0,v.jsx)(w.default,{showSearch:!0,value:le,onChange:function(V){q(V),se(null)},placeholder:(0,v.jsx)(e.FormattedMessage,{id:"select_person",defaultMessage:"Select a person"}),children:x.map(function(Fe){var V=Fe.id,ze=Fe.email;return(0,v.jsx)(w.default.Option,{value:ze,children:ze},V)})}),(0,v.jsx)(w.default,{value:ue,onChange:function(V){return se(V)},disabled:le===null,placeholder:(0,v.jsx)(e.FormattedMessage,{id:"select_attempt",defaultMessage:"Select attempt"}),children:h()(new Set(Oe.filter(function(Fe){var V=Fe.email;return V===le}).map(function(Fe){var V=Fe.attempt;return V}))).map(function(Fe){return(0,v.jsxs)(w.default.Option,{value:Fe,children:[(0,v.jsx)(e.FormattedMessage,{id:"attempt",defaultMessage:"Attempt"})," ",Fe]},Fe)})})]}),colSpan:12,layout:"center",children:(0,v.jsx)("div",{style:{overflow:"auto",minHeight:"400px",width:"100%"},children:(0,v.jsx)(ne.Z,f()(f()({},Te),{},{tooltip:{title:"".concat(Pe.formatMessage({id:"attempt"})),formatter:function(V){var ze=Math.floor(+V.seconds_total/60),He=+V.seconds_total>60?+V.seconds_total-ze*60:0;return{name:V.attempt,value:"".concat(ze,"m ").concat(He,"s")}}},data:Oe.filter(function(Fe){var V=Fe.email;return V===le}).filter(function(Fe){var V=Fe.attempt;return Number.isInteger(ue)?V===ue:!0})}))})})}},28225:function(Ge,be,t){"use strict";var Me=t(28248),_=t(80854),ve=t(85893),f=function(h){var I=h.visible,u=h.setManage;return(0,ve.jsx)(Me.Z,{width:"600px",title:(0,ve.jsx)(_.FormattedMessage,{id:"course.validate_edit.header",defaultMessage:"course.validate_edit.header"}),visible:I,onOk:function(){return u({showModal:!1,disableEdit:!1,clicked:!0})},onCancel:function(){return u({showModal:!1,disableEdit:!0,clicked:!1})},okText:"OK",cancelText:"Cancel",children:(0,ve.jsx)("p",{children:(0,ve.jsx)(_.FormattedMessage,{id:"course.validate_edit.content",defaultMessage:"course.validate_edit.content"})})})};be.Z=f},20568:function(Ge,be,t){"use strict";t.d(be,{Z:function(){return Y}});var Me=t(19632),_=t.n(Me),ve=t(97857),f=t.n(ve),me=t(5574),h=t.n(me),I=t(67294),u=t(17578),z=t(78957),O=t(25514),ne=t(96365),C=t(14726),oe=t(2487),R=t(72252),X=t(82061),Q=t(55725),B=t(69753),w=t(80854),l=t(29477),n=t(85893),K=function(W){var p=W.directory,U=W.onUploaded;return(0,n.jsxs)(z.Z,{align:"start",children:[(0,n.jsxs)(O.Z.Text,{children:[(0,n.jsx)(w.FormattedMessage,{id:"pages.files.filesBrowser"}),(0,n.jsx)(O.Z.Text,{code:!0,children:p})]}),(0,n.jsx)(l.Z,{url:"/api/admin/file/upload",name:"file[]",data:{target:p},onUpload:function(te){te.success&&U(p,te.data)}})]})},e=function(W){var p=W.defaultDirectory,U=p===void 0?"/":p,L=W.onFile,te=W.hideDeleteBtn,N=te===void 0?!1:te,v=W.forceLoading,m=v===void 0?!1:v,Ie=(0,w.useIntl)(),Ze=(0,I.useState)({loading:!1,name:"",directory:U,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),fe=h()(Ze,2),S=fe[0],y=fe[1],F=(0,I.useRef)(),x=(0,I.useCallback)(function(Z){y(function($){return f()(f()({},$),{},{loading:Z})})},[]),M=(0,I.useCallback)(function(Z,$){Z.success&&y(function(ue){return f()(f()(f()({},ue),Z.data),{},{data:[{url:$.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(_()(Z.data.data.map(function(se){return f()(f()({},se),{},{url:se.mime==="directory"?"".concat($,"/").concat(se.name):se.url})}))).filter(function(se){return $==="/"||$===U?se.name!=="..":!0}),directory:$,loading:!1})})},[x]),k=(0,I.useCallback)(function(Z){var $,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,se=function(){return F.current&&F.current.abort()};return se(),F.current=new AbortController,x(!0),(0,u.QZ)({directory:Z,page:ue},{signal:($=F.current)===null||$===void 0?void 0:$.signal}).then(function(Pe){Pe.success&&M(Pe,Z)}).catch(function(){return x(!1)}),function(){se()}},[x]);(0,I.useEffect)(function(){return k(U)},[U,k]);var le=(0,I.useCallback)(function(Z){x(!0),(0,u.Od)(Z).then(function(){k(S.directory)}).catch(function(){x(!1)})},[k,x,S.directory]),q=(0,I.useCallback)(function(Z,$){var ue,se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,Pe=function(){return F.current&&F.current.abort()};return Pe(),F.current=new AbortController,x(!0),(0,u.ht)({directory:Z,name:$,page:se},{signal:(ue=F.current)===null||ue===void 0?void 0:ue.signal}).then(function(Oe){Oe.success&&M(Oe,Z)}).catch(function(){return x(!1)}),function(){Pe()}},[x]);return(0,n.jsxs)("div",{className:"file-browser",children:[(0,n.jsxs)("div",{className:"file-browser__header",children:[(0,n.jsx)(ne.Z,{placeholder:Ie.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function($){return y(function(ue){return f()(f()({},ue),{},{name:$.target.value})})},value:S.name}),(0,n.jsxs)("div",{children:[(0,n.jsx)(C.ZP,{className:"file-browser__button",onClick:function(){return k(S.directory)},children:(0,n.jsx)(w.FormattedMessage,{id:"reset"})}),(0,n.jsx)(C.ZP,{className:"file-browser__button",type:"primary",onClick:function(){return q(S.directory,S.name)},children:(0,n.jsx)(w.FormattedMessage,{id:"query"})})]})]}),(0,n.jsx)(oe.Z,{loading:S.loading||m,size:"small",itemLayout:"horizontal",dataSource:S.data,header:(0,n.jsx)(K,{directory:S.directory,onUploaded:function($,ue){ue&&(k($),L&&L(ue,$))}}),footer:(0,n.jsx)(K,{directory:S.directory,onUploaded:function($,ue){k($),ue&&L&&L(ue,$)}}),renderItem:function($){return(0,n.jsx)(oe.Z.Item,{actions:$.mime!=="directory"&&!N?[(0,n.jsx)(C.ZP,{type:"default",danger:!0,icon:(0,n.jsx)(X.Z,{}),size:"small",onClick:function(){return le($.url)}},"dir")]:[],children:(0,n.jsx)(oe.Z.Item.Meta,{avatar:$.mime==="directory"?(0,n.jsx)(C.ZP,{type:"primary",icon:(0,n.jsx)(Q.Z,{}),size:"small",onClick:function(){return k($.url)}}):(0,n.jsx)("a",{href:$.url,target:"_blank",rel:"noreferrer",children:(0,n.jsx)(C.ZP,{type:"default",icon:(0,n.jsx)(B.Z,{}),size:"small"})}),description:(0,n.jsx)(I.Fragment,{children:(0,n.jsx)(C.ZP,{type:"text",size:"small",onClick:function(){return $.mime==="directory"?k($.url):L&&L($,S.directory)},children:$.name})})})})}}),(0,n.jsx)(R.Z,{pageSizeOptions:[],current:S.current_page,total:S.total,pageSize:S.per_page,onChange:function($){return k(S.directory,$)}})]})},Y=e},89825:function(Ge,be,t){"use strict";t.d(be,{Z:function(){return e}});var Me=t(26271),_=t(80854),ve=t(5574),f=t.n(ve),me=t(50227),h=t(2453),I=t(15746),u=t(71230),z=t(38925),O=t(75081),ne=t(67294);function C(Y){var H=(0,ne.useRef)(Y);(0,ne.useEffect)(function(){var W=function(){var U=localStorage.getItem("TOKEN");H.current(U)};return window.addEventListener("token_change",W),function(){window.removeEventListener("token_change",W)}},[])}var oe=t(97704),R=t(85893),X="h5p-editor",Q=function(Y){return Y.TokenChanged="TOKEN_CHANGED",Y}(Q||{}),B=function(H){var W,p=document.getElementById(X);if(!p){console.error("There is no iframe with id '".concat(X,"'"));return}(W=p.contentWindow)===null||W===void 0||W.postMessage({type:Q.TokenChanged,token:H},"*")},w=function(H){var W=H.id,p=H.onSubmitted,U=H.onLoaded,L=(0,ne.useState)(),te=f()(L,2),N=te[0],v=te[1],m=(0,ne.useState)(!1),Ie=f()(m,2),Ze=Ie[0],fe=Ie[1],S=(0,ne.useState)(),y=f()(S,2),F=y[0],x=y[1],M=(0,_.useIntl)(),k=M.locale.split("-")[0];C(B),(0,ne.useEffect)(function(){W&&(fe(!0),(0,oe.RN)(W==="new"?void 0:W,k).then(function(q){q.success?(U&&U(q.data),v(q.data)):x(q.message)}).catch(function(q){return q&&x(q.toString())}).finally(function(){return fe(!1)}))},[W]);var le=(0,ne.useCallback)(function(q){fe(!0),(0,oe.x0)(q,W==="new"?void 0:W).then(function(Z){Z.success?(p(Z.data.id),h.ZP.success((0,R.jsx)(_.FormattedMessage,{id:"h5p_edited",defaultMessage:"H5P Element edited and saved successfully"}))):x(Z.message)}).catch(function(Z){return Z&&x(Z.toString())}).finally(function(){return fe(!1)})},[]);return N?(0,R.jsxs)(ne.Fragment,{children:[F&&(0,R.jsx)(z.Z,{message:F,type:"error"}),N&&(0,R.jsx)(me.ContextlessEditor,{onError:function(Z){return console.error(Z)},state:N,allowSameOrigin:!0,onSubmit:le,loading:Ze,lang:k,iframeId:X})]}):(0,R.jsx)(I.Z,{children:(0,R.jsxs)(u.Z,{justify:"center",align:"middle",children:[F&&(0,R.jsx)(z.Z,{message:F,type:"error"}),(0,R.jsx)(O.Z,{})]})})},l=w,n=t(66340),K=function(H){var W=H.defaultCard,p=W===void 0?"edit":W,U=H.id,L=H.onSubmit,te=H.onLoaded;return(0,R.jsxs)(Me.ZP,{tabs:{type:"card",defaultActiveKey:p},children:[(0,R.jsx)(Me.ZP.TabPane,{disabled:!U,tab:(0,R.jsx)(_.FormattedMessage,{id:"edit"}),children:(0,R.jsx)(l,{id:U,onSubmitted:L,onLoaded:te},U)},"edit"),U!=="new"&&(0,R.jsx)(Me.ZP.TabPane,{disabled:!U,tab:(0,R.jsx)(_.FormattedMessage,{id:"preview"}),children:(0,R.jsx)(n.Z,{id:U,onLoaded:te})},"preview")]})},e=K},66340:function(Ge,be,t){"use strict";var Me=t(19632),_=t.n(Me),ve=t(5574),f=t.n(ve),me=t(97704),h=t(50227),I=t.n(h),u=t(25514),z=t(15746),O=t(71230),ne=t(38925),C=t(75081),oe=t(96074),R=t(67294),X=t(55171),Q=t.n(X),B=t(80854),w=t(85893),l=u.Z.Title,n=function(e){var Y=e.id,H=e.onXAPI,W=e.onLoaded,p=(0,R.useState)(),U=f()(p,2),L=U[0],te=U[1],N=(0,R.useState)(!1),v=f()(N,2),m=v[0],Ie=v[1],Ze=(0,R.useState)([]),fe=f()(Ze,2),S=fe[0],y=fe[1],F=(0,R.useState)(),x=f()(F,2),M=x[0],k=x[1],le=(0,B.useIntl)(),q=le.locale.split("-")[0];return(0,R.useEffect)(function(){Y&&(Ie(!0),(0,me.LK)(Y,q).then(function(Z){Z.success?(W&&W(Z.data),te(Z.data)):k(Z.message)}).catch(function(Z){return Z&&k(Z.toString())}).finally(function(){return Ie(!1)}))},[Y]),L?(0,w.jsxs)(R.Fragment,{children:[M&&(0,w.jsx)(ne.Z,{message:M,type:"error"}),(0,w.jsx)(h.ContextlessPlayer,{contentId:Y,onError:function($){return console.error($)},state:L,allowSameOrigin:!0,loading:m,onXAPI:function($){H?H($):y(function(ue){return[].concat(_()(ue),[$])})}}),!H&&(0,w.jsxs)(R.Fragment,{children:[(0,w.jsx)(oe.Z,{}),(0,w.jsxs)("div",{style:{overflow:"auto",maxHeight:"400px"},children:[(0,w.jsx)(l,{level:5,children:"XAPI Events"}),(0,w.jsx)(Q(),{src:S})]})]})]}):(0,w.jsx)(z.Z,{children:(0,w.jsxs)(O.Z,{justify:"center",align:"middle",children:[M&&(0,w.jsx)(ne.Z,{message:M,type:"error"}),(0,w.jsx)(C.Z,{})]})})};be.Z=n},9412:function(Ge,be,t){"use strict";var Me=t(29477),_=t(67294),ve=t(85893),f=function(h){var I=h.onSuccess,u=h.onError,z=h.hideLabel;return(0,ve.jsx)(Me.Z,{url:"/api/admin/hh5p/content/upload",name:"h5p_file",accept:".h5p",hideLabel:z,onChange:function(ne){ne.file.status==="done"&&ne.file.response&&I(ne.file.response),ne.file.status==="error"&&u()}})};be.C=f},95486:function(Ge,be,t){"use strict";var Me=t(5574),_=t.n(Me),ve=t(14726),f=t(28248),me=t(55742),h=t(94315),I=t(45823),u=t(67294),z=t(80854),O=t(85893),ne=function(oe){var R=oe.value,X=oe.onChange,Q=(0,u.useState)(!1),B=_()(Q,2),w=B[0],l=B[1],n=(0,u.useCallback)(function(){l(!1)},[]),K=(0,u.useState)("code"),e=_()(K,2),Y=e[0],H=e[1];return(0,O.jsxs)("div",{children:[(0,O.jsx)(ve.ZP,{type:"primary",onClick:function(){return l(!0)},size:"small",children:(0,O.jsx)(z.FormattedMessage,{id:"json_editor"})}),(0,O.jsxs)(f.Z,{title:"JSON",open:w,onOk:n,onCancel:n,destroyOnClose:!0,children:[(0,O.jsxs)(me.ZP.Group,{onChange:function(p){return H(p.target.value)},value:Y,children:[(0,O.jsx)(me.ZP,{value:"tree",children:"tree"}),(0,O.jsx)(me.ZP,{value:"view",children:"view"}),(0,O.jsx)(me.ZP,{value:"form",children:"form"}),(0,O.jsx)(me.ZP,{value:"code",children:"code"}),(0,O.jsx)(me.ZP,{value:"text",children:"text"})]}),(0,O.jsx)(h.A,{mode:Y,value:R,onChange:X},Y)]})]})};be.Z=ne},34201:function(Ge,be,t){"use strict";t.d(be,{Z:function(){return fe}});var Me=t(5574),_=t.n(Me),ve=t(38925),f=t(75081),me=t(96074),h=t(2487),I=t(25514),u=t(14726),z=t(67294),O=t(80854),ne=t(19632),C=t.n(ne),oe=t(93162),R=t(55733),X=t.n(R),Q=t(85893),B=function(y){var F=y.pdfIds,x=y.onProgress,M=y.onFinished,k=y.filename,le=k===void 0?"package.zip":k,q=(0,z.useState)([]),Z=_()(q,2),$=Z[0],ue=Z[1],se=(0,z.useCallback)(function(Pe){var Oe=new(X());Pe.forEach(function(Te,Fe){return Oe.file("".concat(F[Fe],".pdf"),Te)}),Oe.generateAsync({type:"blob"}).then(function(Te){(0,oe.saveAs)(Te,le),M&&M()})},[$,le]);return(0,z.useEffect)(function(){F.forEach(function(Pe){var Oe=fetch("".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/pdfs/generate/").concat(Pe),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}});Oe.then(function(Te){return Te.blob()}).then(function(Te){Te&&Te instanceof Blob&&ue(function(Fe){var V=(Fe.length+1)/F.length;return x&&x(V),V>=1&&se([].concat(C()(Fe),[Te])),[].concat(C()(Fe),[Te])})})})},[F]),(0,Q.jsxs)("p",{children:["Progress ",$.length," / ",F.length]})},w=B,l=t(15009),n=t.n(l),K=t(97857),e=t.n(K),Y=t(99289),H=t.n(Y);function W(S,y){return p.apply(this,arguments)}function p(){return p=H()(n()().mark(function S(y,F){return n()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,O.request)("/api/admin/pdfs",e()({params:e()({},y),method:"GET"},F||{})));case 1:case"end":return M.stop()}},S)})),p.apply(this,arguments)}function U(S,y){return L.apply(this,arguments)}function L(){return L=H()(n()().mark(function S(y,F){return n()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,O.request)("/api/pdfs/".concat(y),e()({method:"GET"},F||{})));case 1:case"end":return M.stop()}},S)})),L.apply(this,arguments)}function te(S,y){return N.apply(this,arguments)}function N(){return N=_asyncToGenerator(_regeneratorRuntime().mark(function S(y,F){return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",request("/api/pdfs/generate/".concat(y),_objectSpread({method:"GET"},F||{})));case 1:case"end":return M.stop()}},S)})),N.apply(this,arguments)}var v=t(62235),m=t(69753),Ie=t(19326),Ze=function(y){var F=y.user_id,x=y.template_id,M=y.title,k=(0,z.useState)({state:"initial"}),le=_()(k,2),q=le[0],Z=le[1],$=(0,z.useState)({state:"initial"}),ue=_()($,2),se=ue[0],Pe=ue[1],Oe=(0,z.useState)(!1),Te=_()(Oe,2),Fe=Te[0],V=Te[1];(0,z.useEffect)(function(){Z({state:"loading"});var He=new AbortController;return W({user_id:F,template_id:x},{signal:He.signal}).then(function(ee){ee&&ee.success?Z({state:"loaded",list:ee.data}):ee&&!ee.success&&Z({state:"error",error:ee.message})}).catch(function(ee){return Z({state:"error",error:ee.toString()})}),function(){He.abort()}},[]);var ze=(0,z.useCallback)(function(He){Pe({state:"loading"}),U(He).then(function(ee){ee.success?Pe({state:"loaded",data:ee.data.content}):Pe({state:"initial"})})},[]);return q.state==="error"?(0,Q.jsx)(ve.Z,{message:"Error Text",type:"error"}):q.state==="loading"||q.state==="initial"?(0,Q.jsx)(f.Z,{}):(0,Q.jsxs)(z.Fragment,{children:[(0,Q.jsx)(me.Z,{}),Fe&&(0,Q.jsx)(w,{pdfIds:q.list.map(function(He){return He.id}),onFinished:function(){return V(!1)}}),(0,Q.jsx)(h.Z,{size:"small",itemLayout:"horizontal",dataSource:q.list,header:(0,Q.jsxs)("div",{children:[(0,Q.jsx)(O.FormattedMessage,{id:"template"})," ",M&&(0,Q.jsx)(I.Z.Text,{strong:!0,children:M}),". ",(0,Q.jsx)(O.FormattedMessage,{id:"generated_pdfs",defaultMessage:"Generated PDFs"})," ",(0,Q.jsx)(u.ZP,{loading:Fe,type:"primary",onClick:function(){return V(!0)},icon:(0,Q.jsx)(m.Z,{}),size:"small",children:(0,Q.jsx)(O.FormattedMessage,{id:"download_all",defaultMessage:"Download all PDFs"})})]}),renderItem:function(ee){return(0,Q.jsxs)(h.Z.Item,{actions:[(0,Q.jsx)(Ie.Z,{url:"/api/pdfs/generate/".concat(ee.id),filename:"generated-".concat(ee.id,".pdf"),size:"small",icon:(0,Q.jsx)(m.Z,{}),type:"primary",onClick:function(){return ze(ee.id)},loading:se.state==="loading",children:(0,Q.jsx)(O.FormattedMessage,{id:"download_pdf",defaultMessage:"Download PDFs"})},"download")],children:[ee.title," ",(0,Q.jsx)(v.Z,{type:"App\\Models\\User",type_id:ee.user_id})]})}})]})},fe=Ze},53957:function(Ge,be,t){"use strict";var Me=t(5574),_=t.n(Me),ve=t(50082),f=t(67294),me=t(85893),h=function(u){var z=u.productable,O=u.type,ne=O===void 0?"card":O,C=(0,f.useState)("attributes"),oe=_()(C,2),R=oe[0],X=oe[1];return(0,me.jsx)(ve.Z,{productable:z,tab:R,onTabChange:function(B){return X(B)},type:ne})};be.C=h},81424:function(Ge,be,t){"use strict";var Me=t(52677),_=t.n(Me),ve=t(5574),f=t.n(ve),me=t(83863),h=t(75081),I=t(67294),u=t(44837),z=t(80854),O=t(85893),ne=function(oe){var R=oe.value,X=oe.onChange,Q=oe.multiple,B=Q===void 0?!1:Q,w=oe.type,l=(0,I.useState)([]),n=f()(l,2),K=n[0],e=n[1],Y=(0,I.useState)(!1),H=f()(Y,2),W=H[0],p=H[1],U=(0,I.useState)([]),L=f()(U,2),te=L[0],N=L[1],v=(0,I.useRef)(),m=(0,I.useCallback)(function(S){p(!0),v.current&&v.current.abort(),v.current=new AbortController,(0,u.RB)({productable_type:w,name:S||void 0},{signal:v.current.signal}).then(function(y){y.success&&e(w?y.data.filter(function(F){return F.type==="single"&&F.productables&&F.productables[0].id}):y.data),p(!1)}).catch(function(){return p(!1)})},[]);(0,I.useEffect)(function(){var S=new AbortController;if(R){var y=Array.isArray(R)?R:[R],F=y.map(function(x){return _()(x)==="object"?Number(x.id):Number(x)});N(F)}return function(){S.abort()}},[R]);var Ie=(0,I.useCallback)(function(S){m(S)},[m]),Ze=(0,I.useCallback)(function(){N([])},[]),fe=(0,I.useCallback)(function(S){S||Ze(),X&&X(S)},[X,Ze]);return(0,O.jsx)(me.default,{onFocus:function(){return m()},allowClear:!0,style:{width:"100%",minWidth:"150px"},value:te,onChange:fe,mode:B?"multiple":void 0,showSearch:!0,onSearch:Ie,onDeselect:Ze,placeholder:(0,O.jsx)(z.FormattedMessage,{id:"select_product",defaultMessage:"Select a product"}),optionFilterProp:"children",filterOption:function(y,F){if(F&&F.children){var x;return(F==null||(x=F.children)===null||x===void 0?void 0:x.toString().toLowerCase().indexOf(y&&y.toLowerCase()||""))>=0}return!1},notFoundContent:W?(0,O.jsx)(h.Z,{size:"small"}):null,children:K.map(function(S){return(0,O.jsx)(me.default.Option,{value:S.id,children:S.name},S.id)})})};be.Z=ne},87366:function(Ge,be,t){"use strict";t.d(be,{Il:function(){return H},_y:function(){return oe},uS:function(){return Q}});var Me=t(5574),_=t.n(Me),ve=t(97857),f=t.n(ve),me=t(19632),h=t.n(me),I=t(2453),u=t(67294),z=t(80854),O=t(99100),ne=t(31472),C=t(85893),oe=u.createContext({}),R=function(){return Math.round(Math.random()*99999)},X=function W(p){return p.reduce(function(U,L){return[].concat(h()(U),h()(L.lessons?W(L.lessons):[]),[L])},[])},Q=function W(p){return p.reduce(function(U,L){var te;return[].concat(h()(U),h()(L.lessons?W(L.lessons):[]),h()((te=L.topics)!==null&&te!==void 0?te:[]))},[])},B=function W(p,U,L){return p.map(function(te){var N,v;return f()(f()({},te),{},{lessons:te.lessons?W(te.lessons,U,L):[],topics:te.id===U?[].concat(h()((N=te.topics)!==null&&N!==void 0?N:[]),[L]):(v=te.topics)!==null&&v!==void 0?v:[]})})},w=function W(p,U,L){return L?p.map(function(te){return f()(f()({},te),{},{lessons:[].concat(h()(te.lessons?W(te.lessons,U,L):[]),h()(te.id===L?[U]:[]))})}):[].concat(h()(p),[U])},l=function W(p,U,L){return p.map(function(te){return f()(f()({},te.id===U?L:te),{},{lessons:te.lessons?W(te.lessons,U,L):[]})})},n=function W(p,U){return p.map(function(L){return f()(f()({},L),{},{parent_id:U,lessons:L.lessons?W(L.lessons,L.id):[]})})},K=function W(p,U){return p.filter(function(L){return L.id!==U}).map(function(L){return f()(f()({},L),{},{lessons:L.lessons?W(L.lessons,U):[]})})},e=function W(p,U){return p.map(function(L){return f()(f()({},L),{},{lessons:L.lessons?W(L.lessons,U):[],topics:L.topics?L.topics.filter(function(te){return te.id!==U}):[]})})},Y=function W(p,U,L,te){return te==null?void 0:te.map(function(N){if(N.id===L){var v;return f()(f()({},N),{},{topics:(v=N.topics)===null||v===void 0?void 0:v.map(function(m){return m.id===p?U.file.response.data:m})})}else if(N.lessons)return f()(f()({},N),{},{lessons:W(p,U,L,N.lessons||[])});return N})},H=function(p){var U=p.children,L=p.id,te=(0,u.useState)(),N=_()(te,2),v=N[0],m=N[1],Ie=(0,z.useIntl)(),Ze=(0,u.useMemo)(function(){return v&&v.lessons?Q(v.lessons):[]},[v]),fe=(0,u.useMemo)(function(){return v&&v.lessons?X(v.lessons):[]},[v]),S=(0,u.useState)([]),y=_()(S,2),F=y[0],x=y[1],M=(0,z.useLocation)(),k=(0,u.useMemo)(function(){var ee=new URLSearchParams(M.search);return{lesson:ee.get("lesson"),topic:ee.get("topic")}},[M]);(0,u.useEffect)(function(){x([])},[]);var le=(0,u.useCallback)(function(){(0,O.Nx)(L).then(function(ee){return ee.success&&m(f()(f()({},ee.data),{},{lessons:n(ee.data.lessons)}))})},[L]);(0,u.useEffect)(function(){le()},[le]);var q=(0,u.useCallback)(function(ee){var Ee=fe.find(function(pe){var _e;return pe==null||(_e=pe.topics)===null||_e===void 0?void 0:_e.find(function(Se){return Se.id===ee})});return Ee?Ee.id:null},[fe]),Z=(0,u.useMemo)(function(){return k.lesson?{mode:"lesson",id:Number(k.lesson),value:fe.find(function(ee){return ee.id===Number(k.lesson)})}:k.topic?{mode:"topic",id:Number(k.topic),value:Ze.find(function(ee){return ee.id===Number(k.topic)})}:{mode:"init"}},[k,v,fe,Ze]),$=(0,u.useCallback)(function(ee){var Ee={course_id:L,topics:[],isNew:!0,id:v?v.lessons.length+1:R(),order:0,title:Ie.formatMessage({id:"add_title_here"}),active:!0,parent_id:ee};return m(function(pe){var _e;return f()(f()({},pe),{},{lessons:w((_e=pe==null?void 0:pe.lessons)!==null&&_e!==void 0?_e:[],Ee,ee)})}),Ee},[L,v]),ue=(0,u.useCallback)(function(ee,Ee){var pe=fe.find(function(Se){return Se.id===ee}),_e=pe&&pe.isNew;return(_e?(0,O.aA)(Ee):(0,O.sI)(ee,Ee)).then(function(Se){return I.ZP.success(Se.message),le(),Se.success&&m(function(ie){var Ce;return f()(f()({},ie),{},{lessons:l((Ce=ie==null?void 0:ie.lessons)!==null&&Ce!==void 0?Ce:[],ee,f()(f()({},Se.data),{},{isNew:!1}))})})})},[v]),se=(0,u.useCallback)(function(ee){var Ee=fe.find(function(_e){return _e.id===ee});if(Ee){var pe=Ee.isNew;pe?m(function(_e){var Se;return f()(f()({},_e),{},{lessons:K((Se=_e==null?void 0:_e.lessons)!==null&&Se!==void 0?Se:[],ee)})}):(0,O.iI)(ee).then(function(_e){_e.success&&(I.ZP.success(_e.message),m(function(Se){var ie;return f()(f()({},Se),{},{lessons:K((ie=Se==null?void 0:Se.lessons)!==null&&ie!==void 0?ie:[],ee)})}))})}},[v]),Pe=(0,u.useCallback)(function(ee,Ee){var pe,_e=q(ee),Se=fe.find(function(Be){return Be.id===_e}),ie=Se&&((pe=Se.topics)===null||pe===void 0?void 0:pe.find(function(Be){return Be.id===ee})),Ce=ie==null?void 0:ie.isNew;return(Ce?(0,O.HV)(Ee):(0,O.Cn)(ee,Ee)).then(function(Be){Be.success&&(I.ZP.success(Be.message),le(),z.history.push("/courses/list/".concat(L,"/program/?topic=").concat(Be.data.id)),(ie==null?void 0:ie.topicable_type)===ne.oz.Video&&setTimeout(function(){le()},5e3))})},[q,v,le]),Oe=(0,u.useCallback)(function(ee){var Ee=q(ee),pe=fe.find(function(ie){return ie.id===Ee});if(pe){var _e=Ze==null?void 0:Ze.find(function(ie){return ie.id===ee}),Se=_e==null?void 0:_e.isNew;Se&&!_e.topicable?m(function(ie){var Ce;return f()(f()({},ie),{},{lessons:e((Ce=ie==null?void 0:ie.lessons)!==null&&Ce!==void 0?Ce:[],ee)})}):(0,O.vJ)(ee).then(function(ie){ie.success&&(I.ZP.success(ie.message),m(function(Ce){var Be;return f()(f()({},Ce),{},{lessons:e((Be=Ce==null?void 0:Ce.lessons)!==null&&Be!==void 0?Be:[],ee)})}))})}},[v,q]),Te=(0,u.useCallback)(function(ee,Ee){var pe={lesson_id:ee,isNew:!0,id:R(),title:Ie.formatMessage({id:"add_title_here"}),active:!0,topicable_type:Ee};return m(function(_e){var Se;return f()(f()({},_e),{},{lessons:B((Se=_e==null?void 0:_e.lessons)!==null&&Se!==void 0?Se:[],ee,pe)})}),pe},[]),Fe=function(Ee,pe){var _e=q(Ee);m(function(Se){return f()(f()({},Se),{},{lessons:Se?Y(Ee,pe,_e,Se.lessons||[]):[]})}),z.history.push("/courses/list/".concat(L,"/program/?topic=").concat(pe.file.response.data.id))},V=(0,u.useCallback)(function(ee){return(0,O.Cx)(ee).then(function(Ee){if(Ee.success){I.ZP.success(Ee.message);var pe=q(ee);m(function(_e){var Se;return f()(f()({},_e),{},{lessons:_e?(Se=_e.lessons)===null||Se===void 0?void 0:Se.map(function(ie){if(ie.id===pe){var Ce=ie.topics||[];return f()(f()({},ie),{},{topics:[].concat(h()(Ce),[Ee.data])})}return ie}):[]})})}})},[v,q]),ze=(0,u.useCallback)(function(ee){return(0,O.if)(ee).then(function(Ee){Ee.success&&(I.ZP.success(Ee.message),m(function(pe){return f()(f()({},pe),{},{lessons:pe?[].concat(h()(pe.lessons),[Ee.data]):[]})}))})},[]),He={state:v,h5ps:F,id:L,addNewLesson:$,updateLesson:ue,updateTopic:Pe,deleteLesson:se,addNewTopic:Te,deleteTopic:Oe,onTopicUploaded:Fe,cloneTopic:V,cloneLesson:ze,currentEditMode:Z,getLessons:le};return(0,C.jsx)(oe.Provider,{value:He,children:U})}},75175:function(Ge,be,t){"use strict";var Me=t(67294),_=t(85893),ve=function(me){var h=me.uuid;return(0,_.jsx)("iframe",{style:{border:"none",background:"none",width:"100%",height:"100%"},className:"scorm-preview-player",src:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/scorm/play/").concat(h)})};be.Z=ve},82238:function(Ge,be,t){"use strict";var Me=t(9783),_=t.n(Me),ve=t(5574),f=t.n(ve),me=t(13769),h=t.n(me),I=t(15009),u=t.n(I),z=t(97857),O=t.n(z),ne=t(99289),C=t.n(ne),oe=t(20568),R=t(29477),X=t(54734),Q=t(14726),B=t(28248),w=t(2453),l=t(67294),n=t(80854),K=t(11238),e=t(85893),Y=["folder","onResponse"],H=function(){var N=C()(u()().mark(function v(m,Ie,Ze){return u()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",(0,K.ZP)(m,O()({method:"POST",data:Ie},Ze||{})));case 1:case"end":return S.stop()}},v)}));return function(m,Ie,Ze){return N.apply(this,arguments)}}(),W=function(v){var m=v.split("//").join("/");return m=m[m.length-1]==="/"?m:"".concat(m,"/"),m=m[0]==="/"?m.slice(1):m,m},p=function(v){return Array.isArray(v)&&v[0]?v[0].name:v.name},U=function(v,m){var Ie=W(v),Ze=p(m);return Ze.includes(Ie)?Ze:"".concat(Ie).concat(Ze)},L=function(v){return{file:{status:"done",uid:"fileFromBrowser",name:"fileFromBrowser",response:v},fileList:[]}};function te(N){var v=N.folder,m=N.onResponse,Ie=h()(N,Y),Ze=(0,l.useState)(!1),fe=f()(Ze,2),S=fe[0],y=fe[1],F=(0,l.useState)(!1),x=f()(F,2),M=x[0],k=x[1],le=Ie.url,q=Ie.name,Z=Ie.onChange,$=Ie.data,ue=(0,l.useCallback)(function(){y(!1)},[]);return(0,e.jsxs)("div",{children:[(0,e.jsxs)(Q.ZP,{onClick:function(){return y(!0)},icon:(0,e.jsx)(X.Z,{}),children:[" ",(0,e.jsx)(n.FormattedMessage,{id:"browse"})]}),S&&(0,e.jsx)(B.Z,{open:S,onCancel:ue,onOk:ue,width:"60vw",children:(0,e.jsx)(oe.Z,{forceLoading:M,hideDeleteBtn:!0,defaultDirectory:v,onFile:function(Pe,Oe){Oe&&(k(!0),H(le,O()(O()({},$),{},_()({},q,U(Oe,Pe)))).then(function(Te){k(!1),m&&m(Te),Te.success?(ue(),Z&&Z(L(Te))):w.ZP.error(Te.message)}).catch(function(Te){k(!1),"data"in Te?w.ZP.error(Te.data.message):w.ZP.error("Unknown Error")}))}})}),(0,e.jsx)("div",{style:{marginTop:"10px"},children:(0,e.jsx)(R.Z,O()({},Ie))})]})}be.Z=te},29477:function(Ge,be,t){"use strict";var Me=t(97857),_=t.n(Me),ve=t(5574),f=t.n(ve),me=t(55523),h=t(75842),I=t(21974),u=t(67294),z=t(80854),O=t(85893);function ne(C){var oe=C.onChange,R=C.onUpload,X=C.url,Q=C.name,B=C.extra,w=C.accept,l=C.data,n=C.wrapInForm,K=n===void 0?!0:n,e=C.title,Y=C.formProps,H=C.maxFiles,W=C.clearListAfterUpload,p=C.hideLabel,U=C.disabled,L=C.showUploadList,te=(0,u.useState)(),N=f()(te,2),v=N[0],m=N[1],Ie=(0,z.useIntl)();return l&&l[Q]&&delete l[Q],(0,O.jsx)(I.Z,{condition:K,wrap:function(fe){return(0,O.jsx)(h.Z,_()(_()({},Y),{},{children:fe}))},children:(0,O.jsx)(me.Z,{title:e||" ".concat(Ie.formatMessage({id:"upload_click_here"})),placeholder:Ie.formatMessage({id:"upload_click_here"}),label:!p&&(0,O.jsx)(z.FormattedMessage,{id:"upload"}),max:H!=null?H:2,fieldProps:{data:l,accept:w,name:Q,showUploadList:L,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))},onChange:function(fe){m(fe),oe&&oe(fe),fe.file.status==="done"&&(R&&R(fe.file.response),W&&m(void 0))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(X),extra:B,fileList:v==null?void 0:v.fileList,disabled:U})})}be.Z=ne},44167:function(Ge,be,t){"use strict";var Me=t(52677),_=t.n(Me),ve=t(19632),f=t.n(ve),me=t(5574),h=t.n(me),I=t(83863),u=t(75081),z=t(67294),O=t(30869),ne=t(80854),C=t(85893),oe=function(X){var Q=X.value,B=X.onChange,w=X.multiple,l=w===void 0?!1:w,n=X.role,K=X.showEmail,e=X.disabled,Y=(0,z.useState)([]),H=h()(Y,2),W=H[0],p=H[1],U=(0,z.useState)(!1),L=h()(U,2),te=L[0],N=L[1],v=(0,z.useState)([]),m=h()(v,2),Ie=m[0],Ze=m[1],fe=(0,z.useRef)(),S=(0,z.useRef)(),y=(0,z.useCallback)(function(le){p(function(q){return[].concat(f()(q),f()(le)).filter(function(Z,$,ue){return ue.findIndex(function(se){return K?se.email===Z.email:se.id===Z.id})===$})})},[]);(0,z.useEffect)(function(){fe.current=W},[W]);var F=(0,z.useCallback)(function(le){N(!0),S.current&&S.current.abort(),S.current=new AbortController,(0,O.rC)({search:le,role:n},{signal:S.current.signal}).then(function(q){q&&q.success&&(y(q.data),N(!1))}).catch(function(){return N(!1)})},[]),x=(0,z.useCallback)(function(le){F(le)},[F]),M=(0,z.useCallback)(function(){Ze([])},[]);(0,z.useEffect)(function(){var le=new AbortController;if(Q){var q=Array.isArray(Q)?Q:[Q],Z=q.map(function($){return _()($)==="object"?Number($.id):Number($)});Ze(Z),Z.filter(function($){var ue;return!((ue=fe.current)!==null&&ue!==void 0&&ue.find(function(se){return se.id===$}))}).forEach(function($){(0,O.EA)(Number($),{signal:le.signal},!1).then(function(ue){ue&&ue.success&&y([ue.data])})})}return function(){le.abort()}},[Q]);var k=(0,z.useCallback)(function(le,q){le||M(),B&&B(le,q)},[B,M]);return(0,C.jsx)(I.default,{disabled:e,onFocus:function(){return F()},allowClear:!0,style:{width:"100%",minWidth:"150px"},value:Ie,onChange:k,mode:l?"multiple":void 0,showSearch:!0,onSearch:x,onDeselect:M,placeholder:(0,C.jsx)(ne.FormattedMessage,{id:"select_person",defaultMessage:"Select a person"}),optionFilterProp:"children",filterOption:function(q,Z){return Z&&Z.children?String("".concat(Z.user.name," ").concat(Z.user.email)).toLowerCase().indexOf(q&&q.toLowerCase()||"")>=0:!0},notFoundContent:te?(0,C.jsx)(u.Z,{size:"small"}):null,children:W.map(function(le){return(0,C.jsxs)(I.default.Option,{value:le.id,user:le,children:[le.name," ",K&&" - ".concat(le.email)]},le.id)})})};be.Z=oe},14408:function(Ge,be,t){"use strict";t.d(be,{Z:function(){return I}});var Me=t(97857),_=t.n(Me),ve=t(5574),f=t.n(ve),me=t(2254),h=t(67294);function I(){var u=(0,h.useState)({showModal:!1,disableEdit:!1,clicked:!1}),z=f()(u,2),O=z[0],ne=z[1],C=function(R){(R==null?void 0:R.status)==="published"&&R!==null&&R!==void 0&&R.active_from&&(0,me.C)(new Date(R==null?void 0:R.active_from))&&!O.clicked?ne(_()(_()({},O),{},{showModal:!1,disableEdit:!0,clicked:!1})):ne(_()(_()({},O),{},{showModal:!1,disableEdit:!1,clicked:!1}))};return{manageCourseEdit:O,setManageCourseEdit:ne,validateCourseEdit:C}}},12648:function(Ge,be,t){"use strict";t.r(be),t.d(be,{default:function(){return Gs}});var Me=t(9783),_=t.n(Me),ve=t(52677),f=t.n(ve),me=t(15009),h=t.n(me),I=t(97857),u=t.n(I),z=t(99289),O=t.n(z),ne=t(5574),C=t.n(ne),oe=t(49677),R=t.n(oe),X=t(95020),Q=t(16894),B=t(2453),w=t(72269),l=t(67294),n=t(80854),K=t(62235),e=t(85893),Y={1:"course"},H=function(b){return b[b.COURSE=1]="COURSE",b}({}),W=[{title:(0,e.jsx)(n.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:(0,e.jsx)(n.FormattedMessage,{id:"title",defaultMessage:"title"}),dataIndex:"title",hideInSearch:!0,sorter:!0,width:"80%",render:function(r,s){return(0,e.jsx)(K.Z,{type:"Questionnaire",type_id:Number(s.id),text:s.title})}}],p=function(r){var s=r.modelType,i=r.id,a=(0,l.useRef)(),o=(0,n.useIntl)(),c=(0,l.useCallback)(function(){var E=O()(h()().mark(function T(g,P){var G,d,j;return h()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(G=B.ZP.loading(o.formatMessage({id:"loading"})),J.prev=1,!P){J.next=8;break}return J.next=5,(0,X.cc)(Y[s],i,g);case 5:J.t0=J.sent,J.next=11;break;case 8:return J.next=10,(0,X.nX)(Y[s],i,g);case 10:J.t0=J.sent;case 11:return d=J.t0,d.success&&(G(),B.ZP.success(d.message),(j=a.current)===null||j===void 0||j.reload()),J.abrupt("return");case 16:return J.prev=16,J.t1=J.catch(1),G(),B.ZP.error((0,e.jsx)(n.FormattedMessage,{id:"error",defaultMessage:"error"})),J.abrupt("return",!1);case 21:case"end":return J.stop()}},T,null,[[1,16]])}));return function(T,g){return E.apply(this,arguments)}}(),[s,i]);return(0,e.jsx)(Q.ZP,{headerTitle:o.formatMessage({id:"questionnaires",defaultMessage:"questionnaires"}),actionRef:a,rowKey:"id",search:!1,request:function(T,g){R()(T);var P=g&&Object.entries(g)[0];return(0,X.SC)({order_by:P&&P[0],order:P?P[1]==="ascend"?"ASC":"DESC":void 0}).then(function(G){return G.success?{data:G.data,success:!0}:[]})},columns:[].concat(W,[{title:(0,e.jsx)(n.FormattedMessage,{id:"assign",defaultMessage:"assign"}),dataIndex:"option",valueType:"option",render:function(T,g){var P;return[(0,e.jsx)(w.Z,{defaultChecked:g.models&&((P=g.models)===null||P===void 0?void 0:P.filter(function(G){return G.model_id===i}).length)>0,onChange:function(d){return c(Number(g.id),d)}},"assign")]}}])})},U=p,L=t(7418),te=t(48959),N=t(19632),v=t.n(N),m=t(31472),Ie=t(61227),Ze=t.n(Ie),fe=t(60943),S=t(45919),y=t(99100),F=t(58638),x=t(14726),M=t(76841),k=function(r){var s=r.topic_id,i=r.stat,a=(0,l.useState)(!1),o=C()(a,2),c=o[0],E=o[1],T=(0,l.useCallback)(function(g){return O()(h()().mark(function P(){var G,d;return h()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(g){A.next=2;break}return A.abrupt("return");case 2:return E(!0),A.prev=3,A.next=6,(0,M.Sx)(g,i);case 6:G=A.sent,G instanceof Blob&&(d=document.createElement("a"),d.href=window.URL.createObjectURL(G),d.download="".concat(i,"_").concat(g,".xlsx"),document.body.appendChild(d),d.click(),document.body.removeChild(d)),A.next=13;break;case 10:A.prev=10,A.t0=A.catch(3),console.error(A.t0);case 13:return A.prev=13,E(!1),A.finish(13);case 16:case"end":return A.stop()}},P,null,[[3,10,13,16]])}))},[i]);return(0,e.jsxs)(x.ZP,{type:"primary",loading:c,disabled:s===void 0,onClick:T(s),children:[(0,e.jsx)(F.Z,{})," ",(0,e.jsx)(n.FormattedMessage,{id:"export"})]})},le=[{dataIndex:"attempt",title:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.attempt"}),hideInSearch:!0,fixed:"left",width:100},{dataIndex:"email",title:(0,e.jsx)(n.FormattedMessage,{id:"email"}),hideInSearch:!0,fixed:"left"},{dataIndex:"user_id",title:(0,e.jsx)(n.FormattedMessage,{id:"user"}),hideInSearch:!0,render:function(r,s){return(0,e.jsx)(K.Z,{type:"App\\Models\\User",type_id:s.user_id})}},{dataIndex:"attempt_date",title:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.attemptDate"}),hideInSearch:!0,render:function(r,s){return s.attempt_date?(0,fe.WU)(new Date(s.attempt_date),S.Cu):"-"}},{dataIndex:"attempt_time",title:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.attemptDuration"}),hideInSearch:!0,render:function(r,s){return s.attempt_time?"".concat(s.attempt_time,"s"):"-"}},{dataIndex:"summary",title:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.result"}),hideInSearch:!0,render:function(r,s){return typeof s.summary=="number"?"".concat((s.summary*100).toFixed(2),"%"):"-"}}],q=function(r){return r!==void 0?Object.keys(r).filter(function(s){return s.includes("question")}).map(function(s,i){return{title:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.question",values:{i:i+1}}),dataIndex:s,hideInSearch:!0}}):[]},Z=function(r){var s,i=r.quizTopics,a=(0,l.useState)(i==null||(s=i[0])===null||s===void 0?void 0:s.id),o=C()(a,2),c=o[0],E=o[1],T=(0,l.useState)([]),g=C()(T,2),P=g[0],G=g[1],d=(0,l.useMemo)(function(){return i.reduce(function(J,D){var re=D.id,de=D.title;return de!==void 0&&re!==void 0?[].concat(v()(J),[{value:re,label:de}]):J},[])},[i]),j=(0,l.useMemo)(function(){var J;return[{dataIndex:"topic_id",title:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.topic"}),hideInTable:!0,valueType:"select",fieldProps:{options:d,defaultValue:d==null||(J=d[0])===null||J===void 0?void 0:J.value,allowClear:!1}}].concat(le,v()(P))},[d,P]),A=(0,l.useCallback)(function(){var J=O()(h()().mark(function D(re){var de,ce,$e,Ae,De,Ke,we,Xe;return h()().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(ce=re.topic_id,$e=ce===void 0?c:ce,$e){qe.next=3;break}return qe.abrupt("return",{success:!1,data:[],total:0});case 3:return qe.next=5,(0,y.ps)($e,m.rX.QuizSummary);case 5:if(Ae=qe.sent,!(!Ae.success||!((de=Ae.data)!==null&&de!==void 0&&de[m.rX.QuizSummary]))){qe.next=8;break}return qe.abrupt("return",{success:!1,data:[],total:0});case 8:return De=Ae.data[m.rX.QuizSummary],Ke=Ze()(De),we=Ke[0],Xe=Ke.slice(1),G(q(we)),qe.abrupt("return",{success:!0,data:Xe,total:Xe.length});case 11:case"end":return qe.stop()}},D)}));return function(D){return J.apply(this,arguments)}}(),[]);return(0,e.jsx)(Q.ZP,{headerTitle:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.title"}),onSubmit:function(D){var re=D.topic_id;return E(re)},onReset:function(){var D;return E(i==null||(D=i[0])===null||D===void 0?void 0:D.id)},toolBarRender:function(){return[(0,e.jsx)(k,{stat:m.rX.QuizSummary,topic_id:c},"export")]},className:"table-standalone",request:A,columns:j,search:{layout:"vertical"},scroll:{x:1500}})},$=function(r){var s=r.flatTopics,i=(0,l.useMemo)(function(){var a;return s.reduce(function(o,c){return u()(u()({},o),{},_()({},c.topicable_type,[].concat(v()(o[c.topicable_type]),[c])))},(a={},_()(_()(_()(_()(_()(_()(_()(_()(_()(_()(a,m.oz.RichText,[]),m.oz.OEmbed,[]),m.oz.Audio,[]),m.oz.Video,[]),m.oz.H5P,[]),m.oz.Image,[]),m.oz.PDF,[]),m.oz.SCORM,[]),m.oz.Project,[]),m.oz.GiftQuiz,[]),_()(a,m.oz.Unselected,[])))},[s]);return(0,e.jsx)(e.Fragment,{children:i[m.oz.GiftQuiz].length>0&&(0,e.jsx)(Z,{quizTopics:i[m.oz.GiftQuiz]})})},ue=t(87366),se=t(26271),Pe=t(25514),Oe=t(75081),Te=t(38925),Fe=t(78677),V=function(r){var s=r.config,i=r.value,a=r.title,o=r.children,c=r.valueLabel,E=(0,l.useCallback)(function(g,P){var G,d=(G=i.find(function(j){return j.type===P.type}))===null||G===void 0?void 0:G.topic;return d?"".concat(d.topicable_type.split("\\").pop(),":").concat(d.title):g},[i]),T=(0,l.useCallback)(function(g){return{name:c||g.type,value:g.value}},[c]);return(0,e.jsx)(se.ZP,{title:a,headerBordered:!0,children:(0,e.jsxs)("div",{style:{overflow:"auto",minHeight:"400px"},children:[(0,e.jsx)(Fe.Z,u()(u()({},s),{},{tooltip:{formatter:T,title:E},data:i})),o&&o]})})},ze=V,He=t(11312),ee={xField:"type",yField:"value",seriesField:"type",isRange:!1,title:null,xAxis:{label:{autoHide:!0,autoRotate:!1}},interactions:[{type:"active-region",enable:!1}],columnBackground:{style:{fill:"rgba(0,0,0,0.1)"}}},Ee=function(r){var s,i,a,o,c=r.courseId,E=(0,l.useState)({mode:"init"}),T=C()(E,2),g=T[0],P=T[1],G=(0,l.useState)([]),d=C()(G,2),j=d[0],A=d[1],J=Pe.Z.Text,D=(0,n.useIntl)();return(0,l.useEffect)(function(){P({mode:"loading"}),Promise.all([(0,y.Nx)(Number(c)),(0,y.ue)(Number(c))]).then(function(re){var de=C()(re,2),ce=de[0],$e=de[1];ce.success&&$e.success&&(A((0,ue.uS)(ce.data.lessons)),P({mode:"loaded",value:Object.entries($e.data).map(function(Ae){var De=C()(Ae,2),Ke=De[0],we=De[1],Xe=D.formatMessage({id:Ke.split("\\").pop()});return{type:Xe,value:we}})}))})},[]),(0,e.jsxs)(se.ZP,{split:"vertical",children:[g.mode==="loading"&&(0,e.jsx)(Oe.Z,{}),g.mode==="loaded"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(He.Du,{course_id:Number(c),topics:j,stats:(s=g.value.find(function(re){return re.type.includes("FinishedTopics")}))===null||s===void 0?void 0:s.value}),(0,e.jsx)(He.rL,{stats:(i=g.value.find(function(re){return re.type.includes("FinishedCourse")}))===null||i===void 0?void 0:i.value,attempts:(a=g.value.find(function(re){return re.type.includes("AttendanceList")}))===null||a===void 0?void 0:a.value}),(0,e.jsx)(He.nu,{stats:(o=g.value.find(function(re){return re.type.includes("AttendanceList")}))===null||o===void 0?void 0:o.value}),(0,e.jsxs)(J,{children:[(0,e.jsx)(n.FormattedMessage,{id:"MoneyEarned"}),": ".concat(g.value.find(function(re){return re.type.split("\\").pop()===D.formatMessage({id:"MoneyEarned"})}).value)]}),(0,e.jsx)(se.ZP,{colSpan:12,layout:"center",children:(0,e.jsx)(ze,{config:ee,title:(0,e.jsx)(n.FormattedMessage,{id:"People"}),value:g.value.filter(function(re){var de=re.type.split("\\").pop();return de===D.formatMessage({id:"PeopleBought"})||de===D.formatMessage({id:"PeopleFinished"})||de===D.formatMessage({id:"PeopleStarted"})})})}),(0,e.jsx)(se.ZP,{colSpan:12,layout:"center",children:(0,e.jsx)(ze,{config:ee,title:(0,e.jsx)(n.FormattedMessage,{id:"AverageTimePerTopic"}),valueLabel:D.formatMessage({id:"seconds",defaultMessage:"seconds"}),value:Object.entries(g.value.find(function(re){return re.type.split("\\").pop()===D.formatMessage({id:"AverageTimePerTopic"})}).value).map(function(re){var de;return{type:re[0],value:(de=re[1])===null||de===void 0?void 0:de.average_time,topic:j.find(function(ce){return ce.id===Number(re[0])})}}),children:(0,e.jsxs)(J,{children:[(0,e.jsx)(n.FormattedMessage,{id:"AverageTime"}),`:
                    `.concat(g.value.find(function(re){return re.type.split("\\").pop()===D.formatMessage({id:"AverageTime"})}).value,`
                  `)]})})}),(0,e.jsx)(se.ZP,{children:(0,e.jsx)($,{flatTopics:j})})]}),g.mode==="error"&&(0,e.jsx)(Te.Z,{message:g.error,type:"error"})]})},pe=Ee,_e=t(28225),Se=t(23535),ie=t(952),Ce=t(71230),Be=t(15746),ht=t(22004),Ir=t.n(ht),Nt=t(82238),Zr=function(r){var s=r.action,i=r.form_name,a=r.src_name,o=r.getUploadedSrcField,c=r.setPath,E=r.folder;return(0,e.jsx)(ie.ZP.Group,{title:(0,e.jsx)(n.FormattedMessage,{id:"video"}),children:(0,e.jsxs)(Ce.Z,{children:[(0,e.jsx)(Be.Z,{children:(0,e.jsx)(ie.ZP.Item,{shouldUpdate:!0,children:function(g){return(0,e.jsxs)(l.Fragment,{children:[(0,e.jsx)(Nt.Z,{folder:E,accept:"video/*",name:i,url:s,onChange:function(G){if(G.file.status==="done"){var d;g.setFieldsValue(_()({},a,o(G))),(d=G.file.response)!==null&&d!==void 0&&d.success&&c(_()(_()({},"".concat(i,"_url"),G.file.response.data["".concat(i,"_url")]),"".concat(i,"_path"),G.file.response.data["".concat(i,"_path")]))}}}),(0,e.jsx)(x.ZP,{danger:!0,onClick:function(){return[c(_()(_()({},"".concat(i,"_url"),""),"".concat(i,"_path"),"")),g.setFieldsValue(_()({},a,""))]},children:(0,e.jsx)(n.FormattedMessage,{id:"delete"})})]})}})}),(0,e.jsx)(Be.Z,{span:24,children:(0,e.jsx)(ie.ZP.Item,{shouldUpdate:!0,children:function(g){return(0,e.jsx)(Ir(),{url:g.getFieldValue(a),controls:!0})}})})]})})},Fr=Zr,Lr=t(53957),jn=t(8266),Rr=t(64599),Ur=t.n(Rr),gt=function(r){var s=new FormData;for(var i in r)if(r[i]!=null||r[i]!=null){if(Array.isArray(r[i])){r[i].length||s.append("".concat(i,"[]"),"[]");var a=Ur()(r[i]),o;try{for(a.s();!(o=a.n()).done;){var c=o.value;s.append("".concat(i,"[]"),c)}}catch(E){a.e(E)}finally{a.f()}continue}s.set(i,r[i])}return s},ft=t(5966),Tt=t(52688),Zt=t(50335),xn=t(64218),St=t(78957),bn=t(86738),Ft=t(96074),Mn=t(35614),En=t(2291),jt=t(19411),wr=t(19054),Br=function b(r,s,i){return r.reduce(function(a,o){var c,E=s===o.id;return[].concat(v()(a),[{value:o.id,title:o.title,label:o.title,disabled:i||E,children:b((c=o==null?void 0:o.lessons)!==null&&c!==void 0?c:[],s,E||i)}])},[])},Pn=function(r){var s=r.name,i=r.currentLessonId,a=(0,n.useIntl)(),o=(0,l.useContext)(ue._y),c=o.state,E=(0,l.useMemo)(function(){var T;return[{value:"",title:a.formatMessage({id:"root",defaultMessage:"Root"}),label:a.formatMessage({id:"root",defaultMessage:"Root"}),children:Br((T=c==null?void 0:c.lessons)!==null&&T!==void 0?T:[],i)}]},[c,i]);return(0,e.jsx)("div",{className:"tree-select",children:(0,e.jsx)(wr.Z,{name:s,label:(0,e.jsx)(n.FormattedMessage,{id:"parent_lesson"}),fieldProps:{treeData:E,treeDefaultExpandAll:!0,treeLine:!0}})})},Wr=function(r){var s=r.onFinish,i=r.onValuesChange,a=r.onDelete,o=r.onClone,c=r.initialValues,E=r.lesson,T=r.loading,g=T===void 0?!1:T,P=ie.ZP.useForm(),G=C()(P,1),d=G[0],j=ie.ZP.useWatch("active_from",d),A=ie.ZP.useWatch("active_to",d),J=(0,n.useIntl)();return(0,e.jsx)(ie.ZP,{form:d,submitter:{render:function(re){return(0,e.jsx)(Ce.Z,{gutter:16,children:(0,e.jsx)(Be.Z,{span:24-8,children:(0,e.jsx)(Ce.Z,{justify:"center",className:"program__cta-footer",children:(0,e.jsx)(xn.Z,{offsetBottom:4,children:(0,e.jsxs)(St.Z,{size:"large",children:[(0,e.jsx)(x.ZP,u()(u()({loading:g,type:"primary",onClick:function(){var ce;return(ce=re.form)===null||ce===void 0?void 0:ce.submit()}},re.submitButtonProps),{},{children:E.isNew?(0,e.jsx)(n.FormattedMessage,{id:"create"}):(0,e.jsx)(n.FormattedMessage,{id:"save"})}),"submit"),!E.isNew&&(0,e.jsx)(x.ZP,{onClick:o,loading:g,children:(0,e.jsx)(n.FormattedMessage,{id:"clone"})}),(0,e.jsx)(bn.Z,{onConfirm:a,title:(0,e.jsx)(n.FormattedMessage,{id:"deleteQuestion"}),okText:(0,e.jsx)(n.FormattedMessage,{id:"yes"}),cancelText:(0,e.jsx)(n.FormattedMessage,{id:"no"}),children:(0,e.jsx)(x.ZP,u()(u()({type:"primary",danger:!0},re.submitButtonProps),{},{loading:g,children:(0,e.jsx)(n.FormattedMessage,{id:"delete"})}))},"delete")]})})})})})}},layout:"horizontal",onFinish:s,onValuesChange:i,initialValues:u()(u()({},c),{},{summary:c.summary||""}),style:{height:"100%"},children:(0,e.jsxs)(Ce.Z,{gutter:16,style:{height:"100%"},children:[(0,e.jsxs)(Be.Z,{span:24-8,children:[(0,e.jsx)(Ft.Z,{children:(0,e.jsx)(n.FormattedMessage,{id:"lesson"})}),(0,e.jsxs)(se.ZP,{children:[(0,e.jsx)(ft.Z,{name:"title",label:(0,e.jsx)(n.FormattedMessage,{id:"title"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"title"}),placeholder:J.formatMessage({id:"title"}),required:!0,labelCol:{span:5}}),(0,e.jsx)(ie.ZP.Item,{name:"summary",label:(0,e.jsx)(n.FormattedMessage,{id:"summary"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"summary_tooltip"}),valuePropName:"value",labelCol:{span:5},children:(0,e.jsx)(jt.ZP,{directory:"course/".concat(E.course_id,"/lesson/").concat(E.id,"/wysiwyg")})})]})]}),(0,e.jsx)(Be.Z,{span:8,children:(0,e.jsxs)("aside",{className:"program-sidebar program-sidebar--right",children:[(0,e.jsx)(ft.Z,{name:"duration",label:(0,e.jsx)(n.FormattedMessage,{id:"duration"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"duration"}),placeholder:J.formatMessage({id:"duration"})}),(0,e.jsx)(Tt.Z,{name:"active",label:(0,e.jsx)(n.FormattedMessage,{id:"is_active"})}),(0,e.jsx)(Zt.Z,{allowClear:!1,width:"md",name:"active_from",label:(0,e.jsx)(n.FormattedMessage,{id:"active_from"}),placeholder:J.formatMessage({id:"active_from",defaultMessage:"active_from"}),rules:[{validator:function(re,de){return de&&A&&(0,Mn.A)(new Date(de),new Date(A))?Promise.reject(new Error(J.formatMessage({id:"invalidDate"}))):Promise.resolve()}}]}),(0,e.jsx)(Zt.Z,{allowClear:!1,width:"md",name:"active_to",label:(0,e.jsx)(n.FormattedMessage,{id:"active_to"}),placeholder:J.formatMessage({id:"active_to",defaultMessage:"active_to"}),disabled:!j&&!A,rules:[{validator:function(re,de){return de&&j&&(0,En.R)(new Date(de),new Date(j))?Promise.reject(new Error(J.formatMessage({id:"invalidDate"}))):Promise.resolve()}}]}),(0,e.jsx)(Pn,{name:"parent_id",currentLessonId:E==null?void 0:E.id})]})})]})})},Kr=Wr,Cn=function(r){var s;return u()(u()({},r),{},{parent_id:(s=r.parent_id)!==null&&s!==void 0?s:""})},Nr=function(){var r=(0,l.useContext)(ue._y),s=r.currentEditMode,i=s&&s.mode==="lesson"&&s.value?s.value:{},a=(0,l.useState)(Cn(i)),o=C()(a,2),c=o[0],E=o[1],T=(0,l.useState)([]),g=C()(T,2),P=g[1],G=(0,l.useState)(!1),d=C()(G,2),j=d[0],A=d[1],J=(0,l.useContext)(ue._y),D=J.updateLesson,re=J.deleteLesson,de=J.cloneLesson,ce=(0,n.useParams)();(0,l.useEffect)(function(){return E(Cn(i)),(i==null?void 0:i.topics)&&P(i.topics)},[i]);var $e=(0,l.useCallback)(function(){A(!0);var Ke=gt(u()(u()({course_id:(i==null?void 0:i.course_id)||ce.course},c),{},{active:c.active?1:0,parent_lesson_id:c.parent_id}));return D&&c.id?D(c.id,Ke).then(function(){return A(!1)}).catch(function(we){console.error(we),A(!1)}):Promise.resolve()},[c,i==null?void 0:i.course_id,D]),Ae=(0,l.useCallback)(function(){return c.id&&re&&re(c.id),Promise.resolve()},[re,c.id]),De=(0,l.useCallback)(function(){return c.id&&(de==null?void 0:de(c.id))},[de,c.id]);return(0,e.jsx)(Kr,{loading:j,lesson:c,initialValues:c,onDelete:Ae,onFinish:$e,onClone:De,onValuesChange:function(we){E(function(Xe){return u()(u()({},Xe),we)})}})},$r=Nr,zr=t(54734),yn=t(55725),$t=t(51042),Tn=t(75625),kr=t(62848),at=t(83062),Vr=t(65400),Lt=t.n(Vr),Sn=t(74253),Gr=t(95486),mt=t(54838),zt=t(28248),Hr=function(r){var s=r.handleOk,i=r.isModalVisible,a=r.initialValues,o=r.courseId;return(0,e.jsxs)(zt.Z,{title:(0,e.jsx)(mt._H,{id:"description"}),visible:i,onOk:s,onCancel:s,width:1e3,footer:[(0,e.jsx)(x.ZP,{type:"primary",onClick:s,children:"Ok"},"back")],children:[(0,e.jsx)(ie.ZP.Item,{name:"introduction",label:(0,e.jsx)(mt._H,{id:"introduction"}),labelCol:{span:5},wrapperCol:{span:19},tooltip:(0,e.jsx)(mt._H,{id:"introduction_tooltip"}),valuePropName:"value",children:(0,e.jsx)(jt.ZP,{directory:"course/".concat(o,"/lesson/").concat(a.lesson_id,"/topic/").concat(a.id,"/wysiwyg")})}),(0,e.jsx)(ie.ZP.Item,{name:"description",label:(0,e.jsx)(mt._H,{id:"description"}),labelCol:{span:5},wrapperCol:{span:19},tooltip:(0,e.jsx)(mt._H,{id:"description_tooltip"}),valuePropName:"value",children:(0,e.jsx)(jt.ZP,{directory:"course/".concat(o,"/lesson/").concat(a.lesson_id,"/topic/").concat(a.id,"/wysiwyg")})}),(0,e.jsx)(ie.ZP.Item,{name:"summary",label:(0,e.jsx)(mt._H,{id:"summary"}),labelCol:{span:5},wrapperCol:{span:19},tooltip:(0,e.jsx)(mt._H,{id:"summary_tooltip"}),valuePropName:"value",children:(0,e.jsx)(jt.ZP,{directory:"course/".concat(o,"/lesson/").concat(a.lesson_id,"/topic/").concat(a.id,"/wysiwyg")})})]})},Qr=function(r){var s=r.onValuesChange,i=r.initialValues,a=r.courseId,o=(0,n.useIntl)(),c=l.useState(!1),E=C()(c,2),T=E[0],g=E[1];return(0,e.jsxs)(ie.ZP,{submitter:!1,onValuesChange:s,initialValues:u()({},i),layout:"horizontal",children:[(0,e.jsx)(ft.Z,{name:"title",label:(0,e.jsx)(n.FormattedMessage,{id:"title"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"title"}),placeholder:o.formatMessage({id:"title",defaultMessage:"title"}),required:!0}),(0,e.jsx)(ft.Z,{name:"duration",label:(0,e.jsx)(n.FormattedMessage,{id:"duration"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"duration"}),placeholder:o.formatMessage({id:"duration"})}),(0,e.jsx)(Pn,{name:"lesson_id"}),(0,e.jsx)(ie.ZP.Item,{label:(0,e.jsx)(n.FormattedMessage,{id:"description"}),children:(0,e.jsx)(x.ZP,{type:"primary",onClick:function(){return g(!0)},children:(0,e.jsx)(n.FormattedMessage,{id:"open_editor"})})}),(0,e.jsx)(Tt.Z,{name:"active",label:(0,e.jsx)(n.FormattedMessage,{id:"is_active"})}),(0,e.jsx)(Tt.Z,{name:"preview",label:(0,e.jsx)(n.FormattedMessage,{id:"able_to_preview"})}),(0,e.jsx)(Tt.Z,{name:"can_skip",label:(0,e.jsx)(n.FormattedMessage,{id:"can_skip"})}),(0,e.jsx)(ie.ZP.Item,{name:"json",label:(0,e.jsx)(n.FormattedMessage,{id:"json"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"json_tooltip"}),valuePropName:"value",children:(0,e.jsx)(Gr.Z,{})}),(0,e.jsx)(Hr,{isModalVisible:T,handleOk:function(){return g(!1)},initialValues:i,courseId:a})]})},Jr=Qr,kt=function(r){if(typeof(r==null?void 0:r.topicable_type)!="string"||!r.topicable_type)return"Unknown";var s=((r==null?void 0:r.topicable_type)||"").split("\\");return s.pop()||"Unknown"},An=t(97704),Et=t(66419),xt=t(83863),Yr=function(r){var s=r.value,i=r.onChange,a=r.multiple,o=a===void 0?!1:a,c=(0,l.useState)([]),E=C()(c,2),T=E[0],g=E[1];return(0,l.useEffect)(function(){(0,An.gq)().then(function(P){return P.success&&g(P.data)})},[]),(0,l.useEffect)(function(){T.length&&(T.find(function(P){return Number(P.id)===Number(s)})||(0,An.gq)().then(function(P){return P.success&&g(P.data)}))},[s]),(0,e.jsx)(xt.default,{loading:T.length===0,style:{width:"100%"},value:s,onChange:i,mode:o?"multiple":void 0,showSearch:!0,placeholder:(0,e.jsx)(n.FormattedMessage,{id:"H5P_select_content"}),optionFilterProp:"children",filterOption:function(G,d){var j,A=d==null||(j=d.children)===null||j===void 0?void 0:j.slice(1,d==null?void 0:d.children.length).join("");return(0,Et.ri)(A,G)},children:T.map(function(P){return(0,e.jsxs)(xt.default.Option,{value:P.id.toString(),children:[(0,e.jsx)("small",{children:P.id})," ",P.title," (",P.library.title,")"]},P.id.toString())})})},Xr=Yr,qr=t(9412),ea=t(89825),ta=function(r){var s=r.id,i=r.onChange,a=(0,n.useIntl)(),o=(0,l.useState)(s==="new"||s===void 0?"new":Number(s)),c=C()(o,2),E=c[0],T=c[1];return(0,e.jsxs)(l.Fragment,{children:[(0,e.jsxs)(Ce.Z,{gutter:16,align:"middle",className:"create-new",children:[(0,e.jsx)(Be.Z,{children:(0,e.jsxs)(x.ZP,{type:"primary",onClick:function(){return T("new")},children:[" ",(0,e.jsx)(n.FormattedMessage,{id:"create_new"})]})}),(0,e.jsx)(Be.Z,{span:4,children:(0,e.jsxs)(Pe.Z,{children:[(0,e.jsx)("small",{children:(0,e.jsx)(n.FormattedMessage,{id:"or"})})," ",(0,e.jsx)(n.FormattedMessage,{id:"reuse_existing"})]})}),(0,e.jsx)(Be.Z,{span:12,children:(0,e.jsx)(Xr,{value:s,onChange:function(P){i(P),T(s==="new"?"new":Number(s))}})})]}),(0,e.jsx)(Ce.Z,{style:{marginTop:"30px"},children:(0,e.jsx)(Be.Z,{span:24,children:(0,e.jsx)(ea.Z,{id:E,onSubmit:function(P){return i(String(P))}},E)})}),(0,e.jsx)(Ft.Z,{}),(0,e.jsx)(Ce.Z,{gutter:16,children:(0,e.jsx)(Be.Z,{span:24,children:(0,e.jsx)(Ce.Z,{children:(0,e.jsx)(qr.C,{onSuccess:function(P){P.data.id&&i(String(P.data.id))},onError:function(){return console.log(a.formatMessage({id:"error"}))}})})})})]})},na=ta,On=t(96365),ra=t(98980),aa=t.n(ra),sa=[{provider_name:"YouTube",provider_url:"https://www.youtube.com/",endpoints:[{schemes:["https://*.youtube.com/watch*","https://*.youtube.com/v/*","https://youtu.be/*","https://*.youtube.com/shorts/*","https://youtube.com/shorts/*"],url:"https://www.youtube.com/oembed",discovery:!0}]},{provider_name:"Reddit",provider_url:"https://reddit.com/",endpoints:[{schemes:["https://reddit.com/r/*/comments/*/*","https://www.reddit.com/r/*/comments/*/*"],url:"https://www.reddit.com/oembed"}]},{provider_name:"Flickr",provider_url:"https://www.flickr.com/",endpoints:[{schemes:["http://*.flickr.com/photos/*","http://flic.kr/p/*","https://*.flickr.com/photos/*","https://flic.kr/p/*"],url:"https://www.flickr.com/services/oembed/",discovery:!0}]},{provider_name:"Vimeo",provider_url:"https://vimeo.com/",endpoints:[{schemes:["https://vimeo.com/*","https://vimeo.com/album/*/video/*","https://vimeo.com/channels/*/*","https://vimeo.com/groups/*/videos/*","https://vimeo.com/ondemand/*/*","https://player.vimeo.com/video/*"],url:"https://vimeo.com/api/oembed.{format}",discovery:!0}]},{provider_name:"SoundCloud",provider_url:"http://soundcloud.com/",endpoints:[{schemes:["http://soundcloud.com/*","https://soundcloud.com/*","https://soundcloud.app.goog.gl/*"],url:"https://soundcloud.com/oembed"}]},{provider_name:"Twitter",provider_url:"http://www.twitter.com/",endpoints:[{schemes:["https://twitter.com/*/status/*","https://*.twitter.com/*/status/*","https://twitter.com/*/moments/*","https://*.twitter.com/*/moments/*"],url:"https://publish.twitter.com/oembed"}]},{provider_name:"GIPHY",provider_url:"https://giphy.com",endpoints:[{schemes:["https://giphy.com/gifs/*","http://gph.is/*","https://media.giphy.com/media/*/giphy.gif"],url:"https://giphy.com/services/oembed",discovery:!0}]}],ia=function(r){return(0,e.jsx)(aa(),u()(u()({},r),{},{providers:sa}))},oa=function(r){var s=r.text,i=r.onChange,a=(0,l.useState)(s),o=C()(a,2),c=o[0],E=o[1],T=(0,l.useState)(s),g=C()(T,2),P=g[0],G=g[1];return(0,e.jsxs)(l.Fragment,{children:[(0,e.jsxs)(Ce.Z,{children:[(0,e.jsx)(On.Z,{value:s,onChange:function(j){E(j.target.value),i(j.target.value)}}),(0,e.jsx)(x.ZP,{onClick:function(){return G(c)},children:(0,e.jsx)(n.FormattedMessage,{id:"preview"})})]}),(0,e.jsx)(Ce.Z,{children:P&&(0,e.jsx)(ia,{url:P},P)})]})},la=oa,ua=function(r){var s=r.text,i=r.onChange,a=r.directory,o=a===void 0?"topics/new":a;return(0,e.jsx)("div",{children:(0,e.jsx)(jt.ZP,{directory:o,value:s,onChange:function(E){i(E)}})})},da=ua,ca=t(26859),ma=t(72252),_a=t(38703),Dn=t(97042),pa=t(56117),fa=t(59037);Dn.default.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(Dn.default.version,"/pdf.worker.min.js");var va={acceptedTypes:_()(_()(_()({audio:".mp3,audio/*",video:".mp3,video/*",document:".doc,.docx,.pdf,.zip"},m.oz.Audio,".mp3,audio/*"),m.oz.Video,".mp3,video/*"),m.oz.PDF,".pdf,application/pdf")},ha=function(r){var s={},i;for(i in r)switch(f()(r[i])){case"boolean":s[i]=r[i]?1:0;break;case"object":s[i]=JSON.stringify(r[i]);break;case"string":case"number":s[i]=r[i];break;default:break}return s},ga=function(r){var s=r.file,i=(0,l.useState)(0),a=C()(i,2),o=a[0],c=a[1],E=(0,l.useState)(1),T=C()(E,2),g=T[0],P=T[1];return(0,e.jsxs)("div",{children:[o===0?(0,e.jsx)(Oe.Z,{}):(0,e.jsxs)("div",{style:{margin:"0.5em 0"},children:[(0,e.jsxs)(Pe.Z,{children:[(0,e.jsx)(n.FormattedMessage,{id:"page"}),":"]}),(0,e.jsx)(ma.Z,{defaultPageSize:1,size:"small",total:o,onChange:function(d){return P(d)},simple:!0})]}),(0,e.jsx)(pa.Z,{file:s,onLoadSuccess:function(d){var j=d.numPages;return c(j)},children:(0,e.jsx)(fa.Z,{pageNumber:g,className:"pdf-preview"})})]})},ja=function(r){var s,i=r.topic,a=(0,l.useContext)(ue._y),o=a.getLessons;if((0,l.useEffect)(function(){var E;if(((E=i.json)===null||E===void 0?void 0:E.ffmpeg.state)==="coding"){var T=setTimeout(function(){o&&o()},1e3);return function(){return clearTimeout(T)}}},[]),((s=i.json)===null||s===void 0?void 0:s.ffmpeg.state)==="coding"){var c;return(0,e.jsxs)(Pe.Z,{children:[(0,e.jsx)(n.FormattedMessage,{id:"encoding_progress",defaultMessage:"Encoding progress:"}),(0,e.jsx)(_a.Z,{percent:(c=i.json)===null||c===void 0||(c=c.ffmpeg)===null||c===void 0?void 0:c.percentage})]})}return(0,e.jsx)(l.Fragment,{})},xa=function(r){var s,i,a,o,c=r.type,E=r.topic;if(E&&E.topicable&&"url"in E.topicable)switch(c){case m.oz.Audio:return E.topicable_type===m.oz.Audio&&(s=E.topicable)!==null&&s!==void 0&&s.url?(0,e.jsx)("audio",{preload:"none",controls:!0,src:E.topicable.url}):(0,e.jsx)(l.Fragment,{});case m.oz.Video:return E.topicable_type===m.oz.Video&&(i=E.topicable)!==null&&i!==void 0&&i.url?(0,e.jsx)("video",{controls:!0,src:E.topicable.url,width:"100%"}):(0,e.jsx)(l.Fragment,{});case m.oz.Image:return E.topicable_type===m.oz.Image&&(a=E.topicable)!==null&&a!==void 0&&a.url?(0,e.jsx)("img",{title:"Topic image",src:E.topicable.url,width:"100%"}):(0,e.jsx)(l.Fragment,{});case m.oz.PDF:return E.topicable_type===m.oz.PDF&&(o=E.topicable)!==null&&o!==void 0&&o.url?(0,e.jsx)(ga,{file:E.topicable.url}):(0,e.jsx)(l.Fragment,{});default:return(0,e.jsx)(l.Fragment,{})}return(0,e.jsx)(l.Fragment,{})},ba=function(r){var s=r.topic,i=r.type,a=r.onUpdate,o=r.disabled,c=o===void 0?!1:o,E=r.currentState,T=r.onChange,g=r.folder,P=r.maxFiles,G=r.clearListAfterUpload,d=(0,l.useCallback)(function(A){return A.file.status==="done"?a&&a(A):T&&T(A)},[a,T]),j=u()(u()({},E),{},{topicable_type:i,active:E.active?1:0,preview:E.preview?1:0,can_skip:E.can_skip?1:0});return j.introduction||j==null||delete j.introduction,j.description||j==null||delete j.description,j.summary||j==null||delete j.summary,j.json||j==null||delete j.json,(0,e.jsxs)(l.Fragment,{children:[(0,e.jsx)(Ce.Z,{children:(0,e.jsx)(Nt.Z,{folder:g,onChange:d,name:"value",url:s.isNew?"/api/admin/topics":"/api/admin/topics/".concat(s.id,"?_method=PUT"),accept:va.acceptedTypes[i],data:ha(j),maxFiles:P,clearListAfterUpload:G,children:(0,e.jsxs)(x.ZP,{disabled:c,icon:(0,e.jsx)(ca.Z,{}),children:["Click to upload ",i]})})}),(0,e.jsx)(Ce.Z,{children:(0,e.jsxs)("div",{style:{padding:"0 12px"},children:[s.topicable_type===m.oz.Video&&(0,e.jsx)(ja,{topic:s}),(0,e.jsx)(xa,{type:i,topic:E})]})})]})},Ma=ba,In=t(82061),Ea=t(69753),Vt=t(2487),Pa=function(r){var s=r.topicId,i=r.folder,a=(0,l.useState)(),o=C()(a,2),c=o[0],E=o[1],T=(0,l.useRef)(),g=(0,l.useCallback)(function(){T.current&&T.current.abort(),T.current=new AbortController,(0,y.Jb)(s,{signal:T.current.signal}).then(function(d){d&&d.success&&E(d.data)})},[s]),P=(0,l.useCallback)(function(d){d&&d.success&&(0,y.Jb)(s).then(function(j){j&&j.success&&E(j.data)})},[]),G=(0,l.useCallback)(function(d){(0,y.fg)(s,d).then(function(j){j.success&&g()})},[s]);return(0,l.useEffect)(function(){g()},[s]),(0,e.jsx)(Vt.Z,{size:"small",itemLayout:"horizontal",dataSource:c,header:(0,e.jsx)(Nt.Z,{folder:i,url:"/api/admin/topics/".concat(s,"/resources"),name:"resource",onChange:function(j){if(j.file.status==="done"){var A;(A=j.file.response)!==null&&A!==void 0&&A.success&&P(j.file.response)}}}),renderItem:function(j){return(0,e.jsx)(Vt.Z.Item,{actions:[(0,e.jsx)(x.ZP,{type:"default",danger:!0,icon:(0,e.jsx)(In.Z,{}),size:"small",onClick:function(){return G(j.id)}},"delete")],children:(0,e.jsx)(Vt.Z.Item.Meta,{avatar:(0,e.jsx)("a",{href:j.url,target:"_blank",rel:"noreferrer",children:(0,e.jsx)(x.ZP,{type:"default",icon:(0,e.jsx)(Ea.Z,{}),size:"small"})}),description:(0,e.jsx)(l.Fragment,{children:(0,e.jsx)(x.ZP,{type:"text",size:"small",children:j.name})})})})}})},Ca=Pa,ya=t(75175),Ta=t(9649),Sa=function(r){var s=r.value,i=r.onChange,a=(0,l.useState)([]),o=C()(a,2),c=o[0],E=o[1],T=(0,l.useState)(!1),g=C()(T,2),P=g[0],G=g[1],d=(0,l.useState)(),j=C()(d,2),A=j[0],J=j[1],D=(0,l.useState)(),re=C()(D,2),de=re[0],ce=re[1],$e=(0,l.useRef)(),Ae=(0,l.useCallback)(function(Ke){G(!0),$e.current&&$e.current.abort(),$e.current=new AbortController,(0,Ta.JZ)({search:Ke,pageSize:0},{signal:$e.current.signal}).then(function(we){if(we.success)return Array.isArray(we.data.data)&&E(we.data.data);G(!1)}).catch(function(){return G(!1)})},[]),De=(0,l.useCallback)(function(Ke){Ae(Ke)},[Ae]);return(0,l.useEffect)(function(){Ae()},[s]),(0,l.useEffect)(function(){J(c.map(function(Ke){return Ke.scos.filter(function(we){return we.id===s})}).flat()[0])},[c]),(0,e.jsxs)(l.Fragment,{children:[de&&(0,e.jsx)(zt.Z,{width:"80vw",bodyStyle:{height:"70vh"},visible:!0,onOk:function(){return ce(void 0)},onCancel:function(){return ce(void 0)},children:(0,e.jsx)(ya.Z,{uuid:de})}),(0,e.jsxs)(St.Z,{children:[(0,e.jsx)(xt.default,{allowClear:!0,style:{width:"100%",minWidth:"300px"},value:A?"".concat(A==null?void 0:A.id,": ").concat(A==null?void 0:A.title):void 0,onChange:function(we){return i&&i(we&&we.split(":")[0])},showSearch:!0,onSearch:De,placeholder:(0,e.jsx)(n.FormattedMessage,{id:"select_scorm_package"}),optionFilterProp:"children",filterOption:function(we,Xe){if(Xe&&Xe.children){var ot;return(Xe==null||(ot=Xe.children)===null||ot===void 0?void 0:ot.toString().toLowerCase().indexOf(we.toLowerCase()))>=0}return!0},notFoundContent:P?(0,e.jsx)(Oe.Z,{size:"small"}):null,children:c.map(function(Ke){return(0,e.jsx)(xt.default.OptGroup,{label:"".concat(Ke.id,": ").concat(Ke.version),children:(0,e.jsx)(l.Fragment,{children:Ke.scos.map(function(we){return(0,e.jsx)(xt.default.Option,{value:"".concat(we.id,": ").concat(we.title),children:we.title},we.id)})})},Ke.id)})}),A&&(0,e.jsx)(x.ZP,{onClick:function(){ce(A==null?void 0:A.uuid)},children:(0,e.jsx)(n.FormattedMessage,{id:"preview"})},s)]})]})},Aa=Sa,Oa=function(r){var s=r.value,i=r.onChange;return(0,e.jsxs)(St.Z,{size:"large",align:"start",children:[(0,e.jsx)(Aa,{value:s,onChange:function(o){return i&&i(Number(o))}}),(0,e.jsx)(x.ZP,{onClick:function(){return i&&i(void 0)},children:(0,e.jsx)(n.FormattedMessage,{id:"clear_selection"})})]})},Zn=Oa,Gt=t(4828),Ht=t(49354),Qt=t(35102),Jt=t(45699),Yt=t(35326),Xt=t(67337),qt=t(68432),en=t(15360),tn=t(43973),nn=t(57619),Da=t(11475),Ia=t(38751),Za=t(24739),Rt=t(31199),Fa=t(89652),La=function(r){var s=r.topicable,i=r.onAdded,a=r.onRemoved,o=r.onEdited,c=r.onChange,E=(0,n.useIntl)();return(0,e.jsxs)(l.Fragment,{children:[(0,e.jsx)(ie.ZP,{initialValues:{max_attempts:s?s.max_attempts:void 0,max_execution_time:s?s.max_execution_time:void 0,min_pass_score:s?s.min_pass_score:void 0},onValuesChange:function(g){var P=Object.keys(g)[0];P&&c(P,g[P])},submitter:!1,children:(0,e.jsxs)(Za.UW,{children:[(0,e.jsx)(Rt.Z,{name:"max_attempts",label:(0,e.jsx)(n.FormattedMessage,{id:"max_attempts"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"max_attempts"}),placeholder:E.formatMessage({id:"max_attempts",defaultMessage:"max_attempts"})}),(0,e.jsx)(Rt.Z,{name:"max_execution_time",label:(0,e.jsx)(n.FormattedMessage,{id:"max_execution_time"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"max_execution_time_tooltip"}),placeholder:E.formatMessage({id:"max_execution_time",defaultMessage:"max_execution_time"})}),(0,e.jsx)(Rt.Z,{name:"min_pass_score",max:100,label:(0,e.jsx)(n.FormattedMessage,{id:"min_pass_score"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"min_pass_score_tooltip"}),placeholder:E.formatMessage({id:"min_pass_score",defaultMessage:"min_pass_score"})})]})}),(0,e.jsx)(Ft.Z,{}),s?(0,e.jsx)(Ia.i,{questions:s.questions,quizId:s.id,onAdded:i,onEdited:o,onRemoved:a}):(0,e.jsx)(Fa.default,{children:(0,e.jsx)(n.FormattedMessage,{id:"pressSaveToCreateQuestions",defaultMessage:"Create this Topic before adding questions"})})]})},Ra=La,Ut=t(44167),Ua=function(r){var s,i=r.onChange,a=r.topicable,o=(0,l.useCallback)(function(c){var E=Object.keys(c)[0];E&&i(c[E])},[]);return(0,e.jsx)(l.Fragment,{children:(0,e.jsx)(ie.ZP,{initialValues:{notify_users:(s=a==null?void 0:a.notify_users)!==null&&s!==void 0?s:[]},onValuesChange:o,submitter:!1,children:(0,e.jsx)(ie.ZP.Item,{name:"notify_users",label:(0,e.jsx)(n.FormattedMessage,{id:"notify_users",defaultMessage:"Users to notify"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"notify_users_tooltip",defaultMessage:"Indicate which users should be notified about project upload"}),children:(0,e.jsx)(Ut.Z,{multiple:!0})})})})},wa=Ua,Fn=function(r){if(r)switch(r){case"ScormSco":return(0,e.jsx)(Gt.Z,{});case"PDF":return(0,e.jsx)(Ht.Z,{});case"Audio":return(0,e.jsx)(Qt.Z,{});case"Image":return(0,e.jsx)(Jt.Z,{});case"OEmbed":return(0,e.jsx)(Yt.Z,{});case"H5P":return(0,e.jsx)(Xt.Z,{});case"Video":return(0,e.jsx)(qt.Z,{});case"RichText":return(0,e.jsx)(en.Z,{});case"Project":return(0,e.jsx)(tn.Z,{});case"GiftQuiz":return(0,e.jsx)(nn.Z,{})}return(0,e.jsx)(Da.Z,{})},Ln=function(r){return[m.oz.GiftQuiz,m.oz.Project,m.oz.GiftQuiz].includes(r)},Ba=function(){var r,s,i,a=(0,l.useContext)(ue._y),o=a.state,c=a.currentEditMode,E=a.updateTopic,T=a.deleteTopic,g=a.onTopicUploaded,P=a.cloneTopic,G=a.getLessons,d=c&&c.mode==="topic"&&c.value?c.value:{},j=(0,l.useState)(!1),A=C()(j,2),J=A[0],D=A[1],re=(0,l.useState)(u()(u()({},d),{},{value:d==null||(r=d.topicable)===null||r===void 0?void 0:r.value})),de=C()(re,2),ce=de[0],$e=de[1],Ae=ce.topicable_type,De=(0,l.useState)(ce.order),Ke=C()(De,1),we=Ke[0],Xe=(0,l.useState)(!1),ot=C()(Xe,2),qe=ot[0],Re=ot[1],he=(0,l.useState)(d),ye=C()(he,2),ae=ye[0],ke=ye[1];(0,l.useEffect)(function(){ke(d)},[d]),(0,l.useEffect)(function(){$e(function(We){var ge;return u()(u()(u()({},We),d),{},{value:Ae===(d==null?void 0:d.topicable_type)?d==null||(ge=d.topicable)===null||ge===void 0?void 0:ge.value:""})}),d!=null&&d.isNew&&D(!Ln(d.topicable_type))},[Ae,d]),(0,l.useEffect)(function(){var We,ge;if(!((ae==null?void 0:ae.topicable_type)!==m.oz.Video||!((We=ae.json)!==null&&We!==void 0&&We.ffmpeg.state)||((ge=ae.json)===null||ge===void 0?void 0:ge.ffmpeg.state)==="finished")){var Qe=function(){var Ve=O()(h()().mark(function nt(){var je;return h()().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(!d.id){Ne.next=5;break}return Ne.next=3,(0,y.BN)(d.id);case 3:je=Ne.sent,je.success&&ke(je.data);case 5:case"end":return Ne.stop()}},nt)}));return function(){return Ve.apply(this,arguments)}}(),st=window.setInterval(Qe,5e3);return function(){window.clearInterval(st)}}},[ae==null?void 0:ae.topicable_type,(s=ae.json)===null||s===void 0||(s=s.ffmpeg)===null||s===void 0?void 0:s.state]);var Ue=(0,l.useCallback)(function(We,ge){$e(function(Qe){return u()(u()({},Qe),{},_()({},We,ge))}),D(!1)},[d]),Je=(0,l.useCallback)(function(We){$e(function(ge){return u()(u()({},ge),We)})},[d]),_t=(0,l.useCallback)(function(We){E&&ce.id&&(Re(!0),E(ce.id,We).then(function(){return Re(!1)}).catch(function(){Re(!1)}))},[ce,E,d]),et=(0,l.useCallback)(function(){var We=u()(u()({},ce),{},{active:ce.active?1:0,preview:ce.preview?1:0,can_skip:ce.can_skip?1:0,order:we,json:ce.json?JSON.stringify(ce.json):null});Ln(d.topicable_type)&&!We.value&&(We.value="theProject");var ge=gt(We);_t(ge)},[ce,_t,we]),ct=(0,l.useCallback)(function(){return d!=null&&d.isNew||Re(!0),T&&ce.id&&T(ce.id)},[ce,T,d]),rt=(0,l.useCallback)(function(){return d.id&&P&&P(d.id)},[d,P]);return(0,e.jsx)(l.Fragment,{children:(0,e.jsxs)(Ce.Z,{gutter:16,style:{height:"100%"},children:[(0,e.jsxs)(Be.Z,{span:24-8,style:{marginBottom:"46px"},children:[(0,e.jsxs)(Sn.Z,{children:[d&&Fn(kt(d))," ",(d==null?void 0:d.topicable_type)&&(d==null?void 0:d.topicable_type.split("\\").pop())," ",(0,e.jsx)(n.FormattedMessage,{id:"type"})]}),!Ae&&(0,e.jsx)(Te.Z,{message:(0,e.jsx)(n.FormattedMessage,{id:"select_type_topic"}),type:"info"}),Ae&&Ae===(m.oz===null||m.oz===void 0?void 0:m.oz.RichText)&&(0,e.jsx)(da,{directory:"course/".concat(o==null?void 0:o.id,"/lesson/").concat(d==null?void 0:d.lesson_id,"/topic/").concat(d==null?void 0:d.id,"/wysiwyg"),text:(d==null?void 0:d.topicable_type)===(m.oz===null||m.oz===void 0?void 0:m.oz.RichText)&&(d==null||(i=d.topicable)===null||i===void 0?void 0:i.value)||"",onChange:function(ge){return Ue("value",ge)}}),d&&Ae&&(Ae===m.oz.Video||Ae===m.oz.Audio||Ae===m.oz.Image||Ae===m.oz.PDF)&&(0,e.jsx)(Ma,{folder:"course/".concat(o==null?void 0:o.id),type:Ae,topic:ae,currentState:ce,onChange:function(ge){Re(!0),ge.file.status==="removed"&&Re(!1)},onUpdate:function(ge){var Qe,st,Ve,nt;d.id&&g&&g(d.id,ge),d.topicable_type===m.oz.Video&&setTimeout(function(){G&&G()},5e3),$e(u()(u()({},ce),{},{id:ge==null||(Qe=ge.file)===null||Qe===void 0||(Qe=Qe.response)===null||Qe===void 0||(Qe=Qe.data)===null||Qe===void 0?void 0:Qe.id,order:(st=ge.file.response.data)===null||st===void 0?void 0:st.order,value:ge==null||(Ve=ge.file)===null||Ve===void 0||(Ve=Ve.response.data)===null||Ve===void 0||(Ve=Ve.topicable)===null||Ve===void 0?void 0:Ve.value,topicable:ge==null||(nt=ge.file)===null||nt===void 0||(nt=nt.response.data)===null||nt===void 0?void 0:nt.topicable})),D(!1),Re(!1)},disabled:!1,maxFiles:1,clearListAfterUpload:!0}),Ae&&Ae===m.oz.OEmbed&&(0,e.jsx)(la,{text:ce.value,onChange:function(ge){return Ue("value",ge)}}),Ae&&Ae===m.oz.Project&&(0,e.jsx)(wa,{onChange:function(ge){return Ue("notify_users",ge)},topicable:d.topicable}),Ae&&Ae===m.oz.GiftQuiz&&(0,e.jsx)(Ra,{onChange:function(ge,Qe){Ue(ge,Qe)},topicable:ce.topicable,onAdded:G,onRemoved:G,onEdited:G}),Ae&&Ae===m.oz.H5P&&(0,e.jsx)(na,{id:ce.value,onChange:function(ge){return Ue("value",ge)}}),Ae&&Ae===m.oz.SCORM&&(0,e.jsx)(Zn,{value:Number(ce.value),onChange:function(ge){return Ue("value",ge)}}),(0,e.jsx)(Ce.Z,{justify:"center",className:"program__cta-footer",children:(0,e.jsx)(xn.Z,{offsetBottom:4,children:(0,e.jsxs)(St.Z,{size:"large",children:[(0,e.jsx)(Lt(),{loading:qe,children:(0,e.jsx)(n.FormattedMessage,{id:"cancel"})}),!d.isNew&&(0,e.jsx)(Lt(),{onClick:rt,loading:qe,children:(0,e.jsx)(n.FormattedMessage,{id:"clone"})}),(0,e.jsx)(Lt(),{type:"primary",onClick:et,disabled:J,loading:qe,children:(0,e.jsx)(n.FormattedMessage,{id:"save"})}),(0,e.jsx)(Lt(),{danger:!0,onClick:ct,loading:qe,children:(0,e.jsx)(n.FormattedMessage,{id:"delete"})})]})})})]}),(0,e.jsx)(Be.Z,{span:8,children:(0,e.jsxs)("aside",{className:"program-sidebar program-sidebar--right",children:[(o==null?void 0:o.lessons)&&(0,e.jsx)(Jr,{courseId:Number(o==null?void 0:o.id),courseLessons:o==null?void 0:o.lessons,initialValues:ce,onValuesChange:function(ge){return Je(ge)}}),!ce.isNew&&(0,e.jsxs)(l.Fragment,{children:[(0,e.jsx)(Sn.Z,{children:(0,e.jsx)(n.FormattedMessage,{id:"file_resources"})}),(0,e.jsx)(Ca,{topicId:Number(d==null?void 0:d.id),folder:"course/".concat(o==null?void 0:o.id)})]})]})})]})})},Wa=Ba,vt=t(57818),Rn=t(43458),Ka=t(13769),Un=t.n(Ka),Na=["initialValue","onCreate"],$a=l.forwardRef(function(b,r){var s=b.initialValue,i=b.onCreate,a=Un()(b,Na),o=(0,l.useState)(""),c=C()(o,2),E=c[0],T=c[1];return(0,e.jsxs)("div",u()(u()({className:"program-sidebar__list-item program-sidebar__list-item--lesson-new",ref:r},a),{},{children:[(0,e.jsx)(yn.Z,{}),(0,e.jsx)(On.Z,{value:E,onChange:function(P){return T(P.target.value)},placeholder:s.title}),(0,e.jsx)("div",{children:(0,e.jsx)(at.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"create"}),children:(0,e.jsx)(x.ZP,{disabled:!E,size:"small",className:"btn-create-lesson",type:"primary",icon:(0,e.jsx)(F.Z,{}),onClick:function(){return i(E)}})})})]}))}),za=t(16165),ka=function(){return(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23.01",height:"18.077",viewBox:"0 0 23.01 18.077",children:(0,e.jsxs)("g",{id:"Group_5","data-name":"Group 5",transform:"translate(-97.496 -306.965)",children:[(0,e.jsx)("path",{id:"Path_2","data-name":"Path 2",d:"M138.934,401.557s8.685.579,12.972-6.836-11.893-6.747-7.254-1.854,16.02-8.07,16.02-8.07",transform:"translate(-40.906 -77.037)",fill:"none",stroke:"#58c35d",strokeLinecap:"round",strokeWidth:"1"}),(0,e.jsx)("path",{id:"Path_3","data-name":"Path 3",d:"M115.761,306.465h5.332V311.8",transform:"translate(-1.087 1)",fill:"none",stroke:"#58c35d",strokeLinecap:"round",strokeWidth:"1"})]})})},wn=function(r){return(0,e.jsx)(za.Z,u()({component:ka},r))},rn=t(21987);function Va(b,r){return an.apply(this,arguments)}function an(){return an=O()(h()().mark(function b(r,s){return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/admin/recommender/course/".concat(r," "),u()({method:"GET",useCache:!1},s||{})));case 1:case"end":return a.stop()}},b)})),an.apply(this,arguments)}function Ga(b,r){return sn.apply(this,arguments)}function sn(){return sn=O()(h()().mark(function b(r,s){return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/admin/recommender/lesson/".concat(r,"/topic "),u()({method:"GET",useCache:!1},s||{})));case 1:case"end":return a.stop()}},b)})),sn.apply(this,arguments)}var Ha=function(r){var s=(0,l.useState)(),i=C()(s,2),a=i[0],o=i[1];return(0,l.useEffect)(function(){Va(r).then(function(c){return c.success&&o(c.data)})},[r]),a},Qa=function(r){var s=(0,l.useState)(),i=C()(s,2),a=i[0],o=i[1];return(0,l.useEffect)(function(){Ga(r).then(function(c){return c.success&&o(c.data)})},[r]),a},Ja=function(r){return r.includes("H5P")?"H5P":r},Ya=function(r){return(r==null?void 0:r.includes("."))&&(r==null?void 0:r.split(".").join(" "))},Bn=function(r){return Math.min(Math.ceil(Math.abs(r)*100),100)},Xa=function(r){var s=r.recommendedData,i=r.createTopic;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(rn.Z,{className:"recommender__paragraph",children:[(0,e.jsx)(n.FormattedMessage,{id:"recommender.add_exercise"}),(0,e.jsx)("span",{className:"recommender__paragraph--span",children:"".concat(Ya(s==null?void 0:s.topic_type),",")}),(0,e.jsx)("br",{}),(0,e.jsx)(n.FormattedMessage,{id:"recommender.increase"}),(0,e.jsx)("span",{className:"recommender__paragraph--span",children:"".concat(Bn(s.probability),"%.")})]}),(0,e.jsx)(x.ZP,{className:"recommender__button",type:"default",onClick:i,children:(0,e.jsx)(n.FormattedMessage,{id:"recommender.add_button"})})]})},qa=function(){return(0,e.jsx)(rn.Z,{className:"recommender__paragraph",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender.save_exercise"})})},es=t(56717),ts=t(55241),ns=function(){return(0,e.jsxs)("div",{className:"recommender__popover-wrapper",children:[(0,e.jsx)("h3",{className:"recommender__popover-title",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender_info.title"})}),(0,e.jsx)("strong",{className:"recommender__popover-text",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender_info.first_title"})}),(0,e.jsx)("p",{className:"recommender__popover-text",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender_info.first_text"})}),(0,e.jsx)("strong",{className:"recommender__popover-text",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender_info.second_title"})}),(0,e.jsx)("p",{className:"recommender__popover-text",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender_info.second_text"})})]})},Wn=function(){return(0,e.jsx)(ts.Z,{placement:"bottomLeft",content:(0,e.jsx)(ns,{}),trigger:"click",showArrow:!1,className:"recommender__popover",children:(0,e.jsx)(es.Z,{style:{color:"#2DAC34"}})})},rs=function(r){var s=r.courseId,i=r.lessonId,a=r.recommenderType,o=a===void 0?m.Zg.Exercise:a,c=(0,l.useContext)(ue._y),E=c.addNewTopic,T=Qa(i),g=(0,l.useCallback)(function(d,j){if(E){var A=E(d,j);n.history.push("/courses/list/".concat(s,"/program/?topic=").concat(A.id))}},[E]),P=function(j){switch(j){case m.Zg.Info:return(0,e.jsx)(qa,{});case m.Zg.Exercise:return T&&(0,e.jsx)(Xa,{createTopic:function(){return g(i,m.oz[Ja(T==null?void 0:T.topic_type)])},recommendedData:T});default:return(0,e.jsx)(n.FormattedMessage,{id:"recommender.no_recommendation"})}},G=o===m.Zg.Exercise&&!T;return(0,e.jsxs)("div",{className:"recommender",children:[(0,e.jsx)(wn,{style:{marginTop:"4px"}}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"recommender__title",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender.title"})}),G&&(0,e.jsx)(Oe.Z,{}),P(o)]}),(0,e.jsx)(Wn,{})]})},as=function(r){var s=r.courseId,i=Ha(s);return i&&i.probability&&i.probability>-.016?null:i?(0,e.jsxs)("div",{className:"recommender",children:[(0,e.jsx)(wn,{style:{marginTop:"4px"}}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"recommender__title",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender.title"})}),(0,e.jsxs)(rn.Z,{className:"recommender__paragraph",children:[(0,e.jsx)(n.FormattedMessage,{id:"recommender.finish"}),(0,e.jsx)("strong",{children:"".concat(Bn(i.probability),"%. ")}),(0,e.jsx)("br",{}),(0,e.jsx)(n.FormattedMessage,{id:"recommender.too_long"})]})]}),(0,e.jsx)(Wn,{})]}):(0,e.jsx)(e.Fragment,{})},ss=t(52745),Kn=t(59234),is=[{type:m.oz.RichText,icon:(0,e.jsx)(en.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"RichText"})},{type:m.oz.OEmbed,icon:(0,e.jsx)(Yt.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"OEmbed"})},{type:m.oz.Audio,icon:(0,e.jsx)(Qt.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"Audio"})},{type:m.oz.Video,icon:(0,e.jsx)(qt.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"Video"})},{type:m.oz.H5P,icon:(0,e.jsx)(Xt.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"H5P"})},{type:m.oz.Image,icon:(0,e.jsx)(Jt.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"Image"})},{type:m.oz.PDF,icon:(0,e.jsx)(Ht.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"PDF"})},{type:m.oz.SCORM,icon:(0,e.jsx)(Gt.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"SCORM"})},{type:m.oz.Project,icon:(0,e.jsx)(tn.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"Project"})},{type:m.oz.GiftQuiz,icon:(0,e.jsx)(nn.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"Quiz"})}],os=function(r){var s=r.onSelected,i=r.positionsToHide,a=(0,l.useState)(!1),o=C()(a,2),c=o[0],E=o[1],T=(0,n.useModel)("@@initialState"),g=T.initialState,P=(0,l.useCallback)(function(j){E(!1),s(j)},[]),G=(0,l.useCallback)((0,Rn.a)(g==null?void 0:g.packages),[g==null?void 0:g.packages]),d=(0,l.useCallback)(function(j){var A,J=Object.keys(m.oz).filter(function(re){return m.oz[re]==j}).pop(),D=J&&(g==null||(A=g.config)===null||A===void 0||(A=A.filter(function(re){return re.key===(0,Kn.Wg)(J)})[0])===null||A===void 0?void 0:A.data);if(D)return!0;switch(j){case m.oz.GiftQuiz:return!G(vt.Z.TopicTypeGift);case m.oz.SCORM:return!G(vt.Z.Scorm);case m.oz.Project:return!G(vt.Z.TopicTypeProject);default:return!G(vt.Z.TopicTypes)}},[g]);return(0,e.jsxs)("div",{className:`topic-types-selector topic-types-selector__recommender-wrapper
       `.concat(c?"topic-types-selector--visible":""),children:[(0,e.jsx)(x.ZP,{type:"text",size:"small",onClick:function(){return E(function(A){return!A})},className:"topic-types-selector__recommender--add-btn",icon:c?(0,e.jsx)(ss.Z,{}):(0,e.jsx)($t.Z,{}),children:(0,e.jsx)(n.FormattedMessage,{id:"recommender.add_new_exercise"})}),(0,e.jsx)("div",{className:"topic-types-selector__recommender".concat(`
          `,c?"topic-types-selector__recommender--active":""),children:is.map(function(j){return!(i!=null&&i.includes(j.type))&&!d(j.type)&&(0,e.jsx)(at.Z,{title:j.title,children:(0,e.jsx)(x.ZP,{block:!0,onClick:function(){return P(j.type)},icon:j.icon})},j.type)})})]})},ls=t(86864),us=function(r){var s=r.onSelected,i=r.onNewLesson,a=r.positionsToHide,o=r.depth,c=o===void 0?0:o,E=(0,l.useState)(!1),T=C()(E,2),g=T[0],P=T[1],G=(0,n.useModel)("@@initialState"),d=G.initialState,j=(0,n.useIntl)(),A=(0,l.useCallback)(function(D){P(!1),s(D)},[]),J=(0,l.useCallback)(function(D){var re,de,ce,$e,Ae,De=Object.keys(m.oz).filter(function(we){return m.oz[we]==D}).pop(),Ke=De&&(d==null||(re=d.config)===null||re===void 0||(re=re.filter(function(we){return we.key===(0,Kn.Wg)(De)})[0])===null||re===void 0?void 0:re.data);if(Ke)return!0;switch(D){case m.oz.GiftQuiz:return!(d!=null&&d.packages&&d!==null&&d!==void 0&&(de=d.packages)!==null&&de!==void 0&&de[vt.Z.TopicTypeGift]);case m.oz.SCORM:return!(d!=null&&d.packages&&d!==null&&d!==void 0&&(ce=d.packages)!==null&&ce!==void 0&&ce[vt.Z.Scorm]);case m.oz.Project:return!(d!=null&&d.packages&&d!==null&&d!==void 0&&($e=d.packages)!==null&&$e!==void 0&&$e[vt.Z.TopicTypeProject]);default:return!(d!=null&&d.packages&&d!==null&&d!==void 0&&(Ae=d.packages)!==null&&Ae!==void 0&&Ae[vt.Z.TopicTypes])}},[d]);return(0,e.jsxs)("div",{className:"topic-types-selector ".concat(g?"topic-types-selector--visible":""),children:[(0,e.jsx)(St.Z,{children:(0,e.jsx)(at.Z,{placement:"top",title:(0,e.jsx)(n.FormattedMessage,{id:"add_new_topic"}),children:(0,e.jsx)(x.ZP,{type:"primary",size:"small",onClick:function(){return P(function(re){return!re})},icon:(0,e.jsx)($t.Z,{})})})}),(0,e.jsxs)("div",{className:"topic-types-selector__list ".concat(g?"topic-types-selector__list--visible":""),children:[!(a!=null&&a.includes("lesson"))&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(at.Z,{placement:"right",title:j.messages["Lesson_level-".concat(c)]?(0,e.jsx)(n.FormattedMessage,{id:"Lesson_level-".concat(c)}):(0,e.jsx)(n.FormattedMessage,{id:"Lesson",defaultMessage:"Lesson"}),children:(0,e.jsx)(x.ZP,{block:!0,onClick:function(){P(!1),i()},icon:(0,e.jsx)(ls.Z,{})})}),(0,e.jsx)(Ft.Z,{})]}),!(a!=null&&a.includes(m.oz.RichText))&&!J(m.oz.RichText)&&(0,e.jsx)(at.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"RichText"}),children:(0,e.jsx)(x.ZP,{block:!0,onClick:function(){return A(m.oz.RichText)},icon:(0,e.jsx)(en.Z,{})})}),!(a!=null&&a.includes(m.oz.OEmbed))&&!J(m.oz.OEmbed)&&(0,e.jsx)(at.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"OEmbed"}),children:(0,e.jsx)(x.ZP,{block:!0,onClick:function(){return A(m.oz.OEmbed)},icon:(0,e.jsx)(Yt.Z,{})})}),!(a!=null&&a.includes(m.oz.Audio))&&!J(m.oz.Audio)&&(0,e.jsx)(at.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"Audio"}),children:(0,e.jsx)(x.ZP,{block:!0,onClick:function(){return A(m.oz.Audio)},icon:(0,e.jsx)(Qt.Z,{})})}),!(a!=null&&a.includes(m.oz.Video))&&!J(m.oz.Video)&&(0,e.jsx)(at.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"Video"}),children:(0,e.jsx)(x.ZP,{block:!0,onClick:function(){return A(m.oz.Video)},icon:(0,e.jsx)(qt.Z,{})})}),!(a!=null&&a.includes(m.oz.H5P))&&!J(m.oz.H5P)&&(0,e.jsx)(at.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"H5P"}),children:(0,e.jsx)(x.ZP,{block:!0,onClick:function(){return A(m.oz.H5P)},icon:(0,e.jsx)(Xt.Z,{})})}),!(a!=null&&a.includes(m.oz.Image))&&!J(m.oz.Image)&&(0,e.jsx)(at.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"Image"}),children:(0,e.jsx)(x.ZP,{block:!0,onClick:function(){return A(m.oz.Image)},icon:(0,e.jsx)(Jt.Z,{})})}),!(a!=null&&a.includes(m.oz.PDF))&&!J(m.oz.PDF)&&(0,e.jsx)(at.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"PDF"}),children:(0,e.jsx)(x.ZP,{block:!0,onClick:function(){return A(m.oz.PDF)},icon:(0,e.jsx)(Ht.Z,{})})}),!(a!=null&&a.includes(m.oz.SCORM))&&!J(m.oz.SCORM)&&(0,e.jsx)(at.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"SCORM"}),children:(0,e.jsx)(x.ZP,{block:!0,onClick:function(){return A(m.oz.SCORM)},icon:(0,e.jsx)(Gt.Z,{})})}),!(a!=null&&a.includes(m.oz.Project))&&!J(m.oz.Project)&&(0,e.jsx)(at.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"Project"}),children:(0,e.jsx)(x.ZP,{block:!0,onClick:function(){return A(m.oz.Project)},icon:(0,e.jsx)(tn.Z,{})})}),!(a!=null&&a.includes(m.oz.GiftQuiz))&&!J(m.oz.GiftQuiz)&&(0,e.jsx)(at.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"Quiz"}),children:(0,e.jsx)(x.ZP,{block:!0,onClick:function(){return A(m.oz.GiftQuiz)},icon:(0,e.jsx)(nn.Z,{})})})]})]})},ds=t(70227),ut=function(b){return b.New="new",b.Lesson="lesson",b.Topic="topic",b}({}),Nn=function(r,s){return r.map(function(i){return u()(u()({},i),{},{id:"topic-".concat(i.id,"-").concat(s)})})},cs=function(r,s){return r.map(function(i){return u()(u()({},i),{},{id:i.isNew?"new-".concat(i.id,"-").concat(s):"lesson-".concat(i.id,"-").concat(s)})})},$n=function(r,s){var i,a;return u()(u()({},r),{},{id:r.isNew?"new-".concat(r.id,"-").concat(s):"lesson-".concat(r.id,"-").concat(s),lessons:cs((i=r==null?void 0:r.lessons)!==null&&i!==void 0?i:[],s+1),topics:Nn((a=r==null?void 0:r.topics)!==null&&a!==void 0?a:[],s+1)})},ms=function b(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return r.reduce(function(i,a){var o;return[].concat(v()(i),v()(b((o=a==null?void 0:a.lessons)!==null&&o!==void 0?o:[],s+1)),[$n(a,s)])},[])},_s=function b(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return r.reduce(function(i,a){var o,c;return[].concat(v()(i),v()(b((o=a==null?void 0:a.lessons)!==null&&o!==void 0?o:[],s+1)),v()(Nn((c=a==null?void 0:a.topics)!==null&&c!==void 0?c:[],s)))},[])},ps=function(r){return r.map(function(s){var i,a,o=$n(s,0),c=[].concat(v()((i=o.lessons)!==null&&i!==void 0?i:[]),v()((a=o.topics)!==null&&a!==void 0?a:[])).map(function(E){var T=E.id;return T});return{id:o.id,children:c,hasChildren:c.length>0,isExpanded:!0,data:o}})},fs=function(r,s){return r.reduce(function(i,a){var o,c,E=[];if("lessons"in a||"topics"in a){var T,g;E=[].concat(v()((T=a.lessons)!==null&&T!==void 0?T:[]),v()((g=a.topics)!==null&&g!==void 0?g:[])).map(function(G){var d=G.id;return d})}var P=(o=s==null||(c=s["".concat(a.id)])===null||c===void 0?void 0:c.isExpanded)!==null&&o!==void 0?o:!0;return u()(u()({},i),{},_()({},"".concat(a.id),{id:a.id,children:E,hasChildren:E.length>0,isExpanded:P,data:a}))},{})},on=function(r,s,i){var a=v()(r),o=s%a.length,c=i%a.length,E=a.splice(o,1),T=C()(E,1),g=T[0];return a.splice(c,0,g),a},wt=function(r,s,i){var a=v()(r),o=a.length===1||s===a.length?s:s%a.length;return a.splice(o,0,i),a},bt=function(r){return r.map(function(s,i){var a=s.toString().split("-"),o=C()(a,2),c=o[1];return[+c,i]})},Mt=function(){var b=O()(h()().mark(function r(s,i,a){var o,c;return h()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return o=void 0,s(function(g){return o=g,ds.d.apply(void 0,[g].concat(v()(i)))}),T.prev=2,T.next=5,a();case 5:c=T.sent,f()(c)==="object"&&c!==null&&"success"in c&&typeof c.success=="boolean"&&!c.success&&o&&s(o),T.next=12;break;case 9:T.prev=9,T.t0=T.catch(2),o&&s(o);case 12:case"end":return T.stop()}},r,null,[[2,9]])}));return function(s,i,a){return b.apply(this,arguments)}}(),vs=function(r,s){return Object.values(r.items).find(function(i){var a=i.children;return a.includes(s)})},zn=function(r,s,i){var a,o;return(a=(o=r.items)===null||o===void 0||(o=o[s])===null||o===void 0||(o=o.children)===null||o===void 0?void 0:o.indexOf(i))!==null&&a!==void 0?a:-1},hs=function(r){var s=r.onNewLesson,i=(0,l.useContext)(ue._y),a=i.state,o=i.currentEditMode,c=i.updateLesson,E=i.addNewTopic,T=i.addNewLesson,g=i.getLessons,P=a==null?void 0:a.id,G=(0,l.useMemo)(function(){var Re;return ps((Re=a==null?void 0:a.lessons)!==null&&Re!==void 0?Re:[])},[a==null?void 0:a.lessons]),d=(0,l.useMemo)(function(){var Re,he;return[].concat(v()(ms((Re=a==null?void 0:a.lessons)!==null&&Re!==void 0?Re:[])),v()(_s((he=a==null?void 0:a.lessons)!==null&&he!==void 0?he:[])))},[a==null?void 0:a.lessons]),j=(0,l.useState)({rootId:0,items:{}}),A=C()(j,2),J=A[0],D=A[1],re=(0,n.useModel)("@@initialState"),de=re.initialState,ce=(0,n.useIntl)(),$e=(0,l.useCallback)((0,Rn.a)(de==null?void 0:de.packages),[de==null?void 0:de.packages]);(0,l.useEffect)(function(){D(function(Re){var he={children:G.map(function(ae){var ke=ae.id;return ke}),id:"root",data:G,isExpanded:!0,hasChildren:G.length>0},ye=fs(d,Re.items);return{rootId:he.id,items:u()(u()({},ye),{},_()({},he.id,he))}})},[d]);var Ae=(0,l.useCallback)(function(Re,he){if(E){var ye=E(Re,he);n.history.push("/courses/list/".concat(P,"/program/?topic=").concat(ye.id))}},[E]),De=(0,l.useMemo)(function(){var Re;return((Re=de==null?void 0:de.config)!==null&&Re!==void 0?Re:[]).reduce(function(he,ye){return ye.key==="maxLessonsNestingInProgram"?u()(u()({},he),{},{lesson:ye.data}):ye.key==="minTopicNestingInProgram"?u()(u()({},he),{},{topic:ye.data}):he},{})},[de==null?void 0:de.config]),Ke=(0,l.useCallback)(function(Re){var he,ye,ae=[],ke=(he=De==null?void 0:De.lesson)!==null&&he!==void 0?he:.5,Ue=(ye=De==null?void 0:De.topic)!==null&&ye!==void 0?ye:.5;return Number.isInteger(ke)&&Re>ke&&ae.push("lesson"),Number.isInteger(Ue)&&Re<Ue&&Object.values(m.oz).forEach(function(Je){return ae.push(Je)}),ae},[De]),we=(0,l.useCallback)(function(Re){var he,ye,ae=Re.item,ke=Re.depth,Ue=Re.provided,Je=Re.onExpand,_t=Re.onCollapse,et=ae.id.toString().split("-"),ct=C()(et,2),rt=ct[0],We=ct[1],ge=Number(We),Qe=function(Ve,nt){var je,Le=d.find(function(Ye){return Ye.id.includes(String(Ve))}),Ne=Le==null||(je=Le.topics)===null||je===void 0?void 0:je[Le.topics.length-1];return(Ne==null?void 0:Ne.id)===nt};return rt==="new"&&ae.data.isNew?(0,e.jsx)($a,u()(u()(u()({},Ue.draggableProps),Ue.dragHandleProps),{},{ref:Ue.innerRef,initialValue:ae.data,onCreate:function(Ve){var nt=gt(u()(u()({},ae.data),{},{parent_lesson_id:ae.data.parent_id,title:Ve,active:ae.data.active?1:0}));c&&c(ge,nt)}})):rt==="lesson"?(0,e.jsxs)("div",u()(u()(u()({},Ue.draggableProps),Ue.dragHandleProps),{},{ref:Ue.innerRef,className:"program-sidebar__list-item program-sidebar__list-item--lesson ".concat((o==null?void 0:o.mode)==="lesson"&&o.id===ge?"program-sidebar__list-item--active":""),children:[(0,e.jsxs)("div",{className:"program-sidebar__text-wrap",children:[(0,e.jsx)("button",{className:"program-sidebar__collapse",onClick:function(){return ae.isExpanded?_t(ae.id):Je(ae.id)},children:ae.isExpanded?(0,e.jsx)(zr.Z,{}):(0,e.jsx)(yn.Z,{})}),(0,e.jsx)(at.Z,{placement:"top",title:ae.data.title,children:(0,e.jsx)(n.NavLink,{to:"/courses/list/".concat(P,"/program/?").concat(rt,"=").concat(ge),className:"program-sidebar__link",children:(0,e.jsx)("span",{className:"program-sidebar__title",children:ae.data.title})})})]}),(0,e.jsx)(us,{onNewLesson:function(){T&&T(ge)},onSelected:function(Ve){return Ae(ge,Ve)},positionsToHide:Ke(ke+1),depth:ke})]})):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.NavLink,u()(u()(u()({className:"program-sidebar__link program-sidebar__list-item program-sidebar__list-item--topic ".concat((o==null?void 0:o.mode)==="topic"&&o.id===ge?"program-sidebar__list-item--active":""),to:"/courses/list/".concat(P,"/program/?").concat(rt,"=").concat(ge)},Ue.draggableProps),Ue.dragHandleProps),{},{ref:Ue.innerRef,children:[(0,e.jsx)(at.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:kt(ae.data)}),children:Fn(kt(ae.data))}),(0,e.jsx)("span",{className:"title",children:ae.data.title})]})),$e(vt.Z.Recommender)&&P&&(o==null?void 0:o.mode)==="topic"&&(o==null||(he=o.value)===null||he===void 0?void 0:he.lesson_id)&&(o==null||(ye=o.value)===null||ye===void 0?void 0:ye.lesson_id)===ae.data.lesson_id&&Qe(o.value.lesson_id,ae.data.id)&&(0,e.jsxs)(e.Fragment,{children:[d.length>5&&(0,e.jsx)(as,{courseId:P}),(0,e.jsx)(rs,{courseId:P,lessonId:o.value.lesson_id,recommenderType:o.value.isNew?m.Zg.Info:m.Zg.Exercise}),(0,e.jsx)(os,{onSelected:function(Ve){return Ae(ae.data.lesson_id,Ve)},positionsToHide:Ke(ke+1)})]})]})},[P,o]),Xe=(0,l.useCallback)(function(Re){return D(function(he){return(0,Tn.U)(he,Re,{isExpanded:!0})})},[]),ot=(0,l.useCallback)(function(Re){return D(function(he){return(0,Tn.U)(he,Re,{isExpanded:!1})})},[]),qe=(0,l.useCallback)(function(){var Re=O()(h()().mark(function he(ye,ae){var ke,Ue,Je,_t,et,ct,rt,We,ge,Qe,st,Ve,nt,je,Le,Ne,Ye,pt,lt,Bt,tt,Pt,Vn,Gn,Hn,Qn,Jn,Yn,Xn,At,qn,er,tr,nr,rr,ar,sr,Wt,ir,or,lr,ur,dr,cr,mr,_r,pr,pn,fn,Ot,fr,vn,hn,vr,Dt,Ct,hr,gr,jr,xr,br,Mr,Er,Pr,gn,Kt,It,yt,Cr,yr,Tr,Sr,Ar,Or,Dr;return h()().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(!(!ae||!P)){xe.next=2;break}return xe.abrupt("return");case 2:if(ke=J.items[ye.parentId].children,Ue=ke[ye.index].toString(),Je=Ue.split("-"),_t=C()(Je,2),et=_t[0],ct=_t[1],rt=J.items[ae.parentId].children,We=De==null?void 0:De.lesson,ge=De==null?void 0:De.topic,et!==ut.New){xe.next=11;break}return B.ZP.warning(ce.formatMessage({id:"new_lessons_cant_be_moved"})),xe.abrupt("return");case 11:if(!ae.parentId.toString().includes("topic")){xe.next=63;break}if(nt=ke.filter(function(dt){return dt.toString().includes("topic")}),je=vs(J,ae.parentId),Le=Number((Qe=(st=((Ve=je==null?void 0:je.id)!==null&&Ve!==void 0?Ve:"").toString().split("-"))===null||st===void 0?void 0:st[2])!==null&&Qe!==void 0?Qe:-2)+1,!(et===ut.Lesson&&We!==void 0&&Le>We)){xe.next=18;break}return B.ZP.warning(ce.formatMessage({id:"max_lesson_nesting"},{max:We})),xe.abrupt("return");case 18:if(!(et===ut.Topic&&ge!==void 0&&Le<ge)){xe.next=21;break}return B.ZP.warning(ce.formatMessage({id:"min_topic_nesting"},{min:ge})),xe.abrupt("return");case 21:if(!((je==null?void 0:je.id)!==void 0&&ye.parentId===je.id)){xe.next=35;break}if(et!==ut.Lesson){xe.next=25;break}return B.ZP.warning(ce.formatMessage({id:"lessons_and_topics_cant_be_mixed"})),xe.abrupt("return");case 25:if(et!==ut.Topic){xe.next=35;break}if(Ne=zn(J,je.id,ae.parentId),!(Ne<0)){xe.next=29;break}return xe.abrupt("return");case 29:return Ye=on(nt,ye.index,Ne),pt=bt(Ye),xe.next=33,Mt(D,[ye,{parentId:je.id,index:Ne}],function(){return(0,y.DY)({class:"Topic",orders:pt,course_id:P})});case 33:return g==null||g(),xe.abrupt("return");case 35:if(!((je==null?void 0:je.id)!==void 0&&ye.parentId!==je.id)){xe.next=62;break}if(lt=je.children.filter(function(dt){return dt.toString().includes("lesson")}),Bt=je.children.filter(function(dt){return dt.toString().includes("topic")}),et!==ut.Lesson){xe.next=50;break}return tt=lt.length,Pt=je.id.toString().split("-"),Vn=C()(Pt,2),Gn=Vn[1],Hn=J.items[Ue].data,Qn={parent_lesson_id:je.id==="root"?"":+Gn,course_id:P,title:Hn.title,order:tt},Jn=gt(Qn),Yn=wt(lt,tt,Ue),Xn=bt(Yn),xe.next=48,Mt(D,[ye,u()(u()({},ae),{},{index:tt})],function(){return(0,y.sI)(+ct,Jn).then(function(){return(0,y.DY)({class:"Lesson",orders:Xn,course_id:P})})});case 48:return g==null||g(),xe.abrupt("return");case 50:if(et!==ut.Topic){xe.next=62;break}if(At=zn(J,je.id,ae.parentId)+1,!(At<1)){xe.next=54;break}return xe.abrupt("return");case 54:return qn=je.id.toString().split("-"),er=C()(qn,2),tr=er[1],nr={lesson_id:+tr,order:At},rr=wt(Bt,At-lt.length,Ue),ar=bt(rr),sr=gt(nr),xe.next=61,Mt(D,[ye,{parentId:je.id,index:At}],function(){return(0,y.Cn)(+ct,sr).then(function(){return(0,y.DY)({class:"Topic",orders:ar,course_id:P})})});case 61:g==null||g();case 62:return xe.abrupt("return");case 63:if(!(ae.parentId==="root"&&et===ut.Topic)){xe.next=66;break}return B.ZP.warning(ce.formatMessage({id:"topic_cant_be_in_root"})),xe.abrupt("return");case 66:if(!(ye.parentId===ae.parentId&&ae.index!==void 0)){xe.next=93;break}if(Wt=ke.filter(function(dt){return dt.toString().includes("lesson")}),ir=ke.filter(function(dt){return dt.toString().includes("topic")}),et!==ut.Lesson){xe.next=81;break}if(or=0,lr=Wt.length-1,!(ae.index<or||ae.index>lr)){xe.next=75;break}return B.ZP.warning(ce.formatMessage({id:"lessons_and_topics_cant_be_mixed"})),xe.abrupt("return");case 75:return ur=on(Wt,ye.index,ae.index),dr=bt(ur),xe.next=79,Mt(D,[ye,ae],function(){return(0,y.DY)({class:"Lesson",orders:dr,course_id:P})});case 79:return g==null||g(),xe.abrupt("return");case 81:if(et!==ut.Topic){xe.next=93;break}if(cr=Wt.length,mr=ke.length-1,!(ae.index<cr||ae.index>mr)){xe.next=87;break}return B.ZP.warning(ce.formatMessage({id:"lessons_and_topics_cant_be_mixed"})),xe.abrupt("return");case 87:return _r=on(ir,ye.index,ae.index),pr=bt(_r),xe.next=91,Mt(D,[ye,ae],function(){return(0,y.DY)({class:"Topic",orders:pr,course_id:P})});case 91:return g==null||g(),xe.abrupt("return");case 93:if(ye.parentId===ae.parentId){xe.next=135;break}if(Ot=rt.filter(function(dt){return dt.toString().includes("lesson")}),fr=rt.filter(function(dt){return dt.toString().includes("topic")}),vn=Number((pn=(fn=ae.parentId.toString().split("-"))===null||fn===void 0?void 0:fn[2])!==null&&pn!==void 0?pn:-2)+1,!(et===ut.Lesson&&We!==void 0&&vn>We)){xe.next=100;break}return B.ZP.warning(ce.formatMessage({id:"max_lesson_nesting"},{max:We})),xe.abrupt("return");case 100:if(!(et===ut.Topic&&ge!==void 0&&vn<ge)){xe.next=103;break}return B.ZP.warning(ce.formatMessage({id:"min_topic_nesting"},{min:ge})),xe.abrupt("return");case 103:if(et!==ut.Lesson){xe.next=120;break}if(vr=0,Dt=Ot.length,Ct=(hn=ae.index)!==null&&hn!==void 0?hn:Dt,!(Dt!==0&&Ct<vr||Dt!==0&&Ct>Dt)){xe.next=110;break}return B.ZP.warning(ce.formatMessage({id:"lessons_and_topics_cant_be_mixed"})),xe.abrupt("return");case 110:return hr=ae.parentId.toString().split("-"),gr=C()(hr,2),jr=gr[1],xr=J.items[Ue].data,br={parent_lesson_id:ae.parentId==="root"?"":+jr,course_id:P,title:xr.title,order:Ct},Mr=gt(br),Er=wt(Ot,Ct,Ue),Pr=bt(Er),xe.next=118,Mt(D,[ye,u()(u()({},ae),{},{index:Ct})],function(){return(0,y.sI)(+ct,Mr).then(function(){return(0,y.DY)({class:"Lesson",orders:Pr,course_id:P})})});case 118:return g==null||g(),xe.abrupt("return");case 120:if(et!==ut.Topic){xe.next=135;break}if(Kt=Ot.length,It=rt.length,yt=(gn=ae.index)!==null&&gn!==void 0?gn:It,!(Kt!==0&&It!==0&&yt<Kt||Kt!==0&&It!==0&&yt>It)){xe.next=127;break}return B.ZP.warning(ce.formatMessage({id:"lessons_and_topics_cant_be_mixed"})),xe.abrupt("return");case 127:return Cr=ae.parentId.toString().split("-"),yr=C()(Cr,2),Tr=yr[1],Sr={lesson_id:+Tr,order:yt},Ar=wt(fr,yt-Ot.length,Ue),Or=bt(Ar),Dr=gt(Sr),xe.next=134,Mt(D,[ye,u()(u()({},ae),{},{index:yt})],function(){return(0,y.Cn)(+ct,Dr).then(function(){return(0,y.DY)({class:"Topic",orders:Or,course_id:P})})});case 134:g==null||g();case 135:case"end":return xe.stop()}},he)}));return function(he,ye){return Re.apply(this,arguments)}}(),[ce,J,P,De]);return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)(kr.Z,{offsetPerLevel:9,tree:J,onExpand:Xe,onCollapse:ot,onDragEnd:qe,renderItem:we,isDragEnabled:!0,isNestingEnabled:!0}),(0,e.jsx)(x.ZP,{onClick:s,type:"primary",className:"program-sidebar__add-btn",icon:(0,e.jsx)($t.Z,{}),children:(0,e.jsx)("span",{children:(0,e.jsx)(n.FormattedMessage,{id:"add_lesson"})})})]})},gs=function(){var r=(0,l.useContext)(ue._y),s=r.state,i=r.addNewLesson,a=(0,l.useCallback)(function(){if(i&&s){var o=i();n.history.push("/courses/list/".concat(s.id,"/program/?lesson=").concat(o.id))}},[i,s]);return s&&s.lessons?(0,e.jsx)("aside",{className:"program-sidebar program-sidebar--left ".concat(s.lessons.length>0?"":"program-sidebar--empty"),children:(0,e.jsx)(hs,{onNewLesson:a})}):(0,e.jsx)("div",{children:(0,e.jsx)(Oe.Z,{})})},js=gs,xs=function(){var r=(0,l.useContext)(ue._y),s=r.state,i=r.currentEditMode,a=Pe.Z.Title;return s&&s.lessons?(0,e.jsxs)("div",{className:"course-block",children:[(0,e.jsxs)(Ce.Z,{gutter:16,children:[(0,e.jsx)(Be.Z,{span:4,children:(0,e.jsx)(js,{})}),(0,e.jsxs)(Be.Z,{span:24-4,children:[i&&i.mode==="lesson"&&i.value&&(0,e.jsx)($r,{},i.id),i&&i.mode==="topic"&&i.value&&(0,e.jsx)(Wa,{},i.id),i&&i.mode==="init"&&(0,e.jsxs)(Ce.Z,{style:{height:"100%"},children:[(0,e.jsx)(Be.Z,{span:16,children:(0,e.jsx)("div",{className:"program__empty-message",children:s.lessons.length>0?(0,e.jsx)(a,{level:4,children:(0,e.jsx)(jn.Z,{id:"program_form_not_selected_list_message"})}):(0,e.jsx)(a,{level:4,children:(0,e.jsx)(jn.Z,{id:"program_form_empty_list_message"})})})}),(0,e.jsx)(Be.Z,{span:8,children:(0,e.jsx)("aside",{className:"program-sidebar program-sidebar--right"})})]})]})]}),(0,e.jsx)("div",{className:"curriculum-lessons-wrapper"})]}):(0,e.jsx)("div",{children:(0,e.jsx)(Oe.Z,{})})},bs=xs,Ms=function(r){var s=r.id;return(0,e.jsxs)(ue.Il,{id:Number(s),children:[(0,e.jsx)(bs,{})," "]})},Es=Ms;function Ps(b,r){return ln.apply(this,arguments)}function ln(){return ln=O()(h()().mark(function b(r,s){return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/admin/topic-project-solutions",u()({params:u()(u()({},r),{},{per_page:r.pageSize,page:r.current}),method:"GET",useCache:!1},s||{})));case 1:case"end":return a.stop()}},b)})),ln.apply(this,arguments)}function Cs(b,r){return un.apply(this,arguments)}function un(){return un=O()(h()().mark(function b(r,s){return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/admin/topic-project-solutions/".concat(r),u()({method:"DELETE"},s||{})));case 1:case"end":return a.stop()}},b)})),un.apply(this,arguments)}var ys=["type","defaultRender"],Ts=function(){var b=O()(h()().mark(function r(s){var i;return h()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Cs(s);case 2:return i=o.sent,i.success&&B.ZP.success(i.message),o.abrupt("return",!0);case 5:case"end":return o.stop()}},r)}));return function(s){return b.apply(this,arguments)}}(),Ss=function b(r){return r.reduce(function(s,i){var a;return[].concat(v()(s),v()(i.lessons?b(i.lessons):[]),v()((a=i.topics)!==null&&a!==void 0?a:[]))},[])},As=function(r){var s=r.courseId,i=(0,n.useIntl)(),a=(0,l.useState)([]),o=C()(a,2),c=o[0],E=o[1],T=(0,l.useMemo)(function(){return c.reduce(function(P,G){var d,j,A;return u()(u()({},P),{},_()({},(d=G.id)!==null&&d!==void 0?d:-1,{text:(j=G.title)!==null&&j!==void 0?j:"",status:(A=G.id)!==null&&A!==void 0?A:-1}))},{})},[c]),g=(0,l.useMemo)(function(){return[{title:(0,e.jsx)(n.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:(0,e.jsx)(n.FormattedMessage,{id:"topic",defaultMessage:"topic"}),dataIndex:"topic_id",hideInSearch:!1,sorter:!0,valueEnum:T,render:function(G,d){var j,A;return(0,e.jsx)(n.Link,{to:"/courses/list/".concat(s,"/program/?topic=").concat(d.topic_id),children:(j=T==null||(A=T[d.topic_id])===null||A===void 0?void 0:A.text)!==null&&j!==void 0?j:d.topic_id})}},{sorter:!0,title:(0,e.jsx)(n.FormattedMessage,{id:"user",defaultMessage:"user"}),dataIndex:"user_id",renderFormItem:function(G,d,j){var A=d.type,J=d.defaultRender,D=Un()(d,ys);if(A==="form")return null;var re=j.getFieldValue("state");return(0,e.jsx)(Ut.Z,u()(u()({},D),{},{state:{type:re}}))},render:function(G,d){return d.user_id&&(0,e.jsx)(K.Z,{type:"EscolaLms\\Core\\Models\\User",type_id:d.user_id},"user")}},{sorter:!0,title:(0,e.jsx)(n.FormattedMessage,{id:"created_at",defaultMessage:"Created at"}),dataIndex:"created_at",hideInSearch:!0,render:function(G,d){return d.created_at&&(0,fe.WU)(new Date(d.created_at),S.Cu)}},{title:(0,e.jsx)(n.FormattedMessage,{id:"download",defaultMessage:"Download"}),dataIndex:"file_url",hideInSearch:!0,render:function(G,d){return(0,e.jsx)(x.ZP,{type:"primary",target:"_blank",size:"small",href:d.file_url,children:(0,e.jsx)(n.FormattedMessage,{id:"download",defaultMessage:"Download"})})}},{hideInSearch:!0,title:(0,e.jsx)(n.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",render:function(G,d,j,A){return[(0,e.jsx)(bn.Z,{title:(0,e.jsx)(n.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:O()(h()().mark(function J(){var D;return h()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=2,Ts(d.id);case 2:if(D=de.sent,D){de.next=5;break}return de.abrupt("return");case 5:A==null||A.reload();case 6:case"end":return de.stop()}},J)})),okText:(0,e.jsx)(n.FormattedMessage,{id:"yes"}),cancelText:(0,e.jsx)(n.FormattedMessage,{id:"no"}),children:(0,e.jsx)(at.Z,{title:(0,e.jsx)(n.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,e.jsx)(x.ZP,{type:"primary",icon:(0,e.jsx)(In.Z,{}),danger:!0})})},"delete")]}}]},[T]);return(0,l.useEffect)(function(){s&&(0,y.Nx)(s).then(function(P){if(P.success){var G=Ss(P.data.lessons).filter(function(d){return d.topicable_type===m.oz.Project});E(G)}})},[s]),(0,e.jsx)(Q.ZP,{headerTitle:i.formatMessage({id:"project_solutions",defaultMessage:"Project Uploaded Solutions"}),search:{layout:"vertical"},rowKey:"id",request:function(){var P=O()(h()().mark(function G(d,j){var A,J,D,re,de,ce,$e;return h()().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return A=d.pageSize,J=d.current,D=d.user_id,re=d.topic_id,de=j&&Object.entries(j)[0],ce=de&&de[0],De.next=5,Ps({pageSize:A,current:J,course_id:s,user_id:D,topic_id:re,order_by:ce,order:de?de[1]==="ascend"?"ASC":"DESC":void 0});case 5:if($e=De.sent,$e.success){De.next=8;break}return De.abrupt("return",{data:[],total:0,success:!1});case 8:return De.abrupt("return",{data:$e.data,total:$e.meta.total,success:!0});case 9:case"end":return De.stop()}},G)}));return function(G,d){return P.apply(this,arguments)}}(),columns:g})},Hs=null,Os=t(39470),Ds=t(54434),Is=t(14408),Zs=function(r){var s=r.visible,i=s===void 0?!1:s,a=r.handleOk,o=r.handleCancel;return(0,e.jsx)(zt.Z,{title:(0,e.jsx)(mt._H,{id:"course_success_modal_title",defaultMessage:"course_success_modal_title"}),visible:i,onOk:a,onCancel:o,footer:[(0,e.jsx)(x.ZP,{onClick:o,children:(0,e.jsx)(mt._H,{id:"course_success_modal_button_cancel",defaultMessage:"course_success_modal_button_cancel"})},"link"),(0,e.jsx)(x.ZP,{type:"primary",onClick:a,children:(0,e.jsx)(mt._H,{id:"course_success_modal_button_ok",defaultMessage:"course_success_modal_button_ok"})},"link")],children:(0,e.jsx)("p",{children:(0,e.jsx)(mt._H,{id:"course_success_modal_content",defaultMessage:"course_success_modal_content"})})})},kn=t(64317),Fs=t(74453),Ls=t(76560),Rs=function(r){var s=r.id;return(0,e.jsxs)(ie.ZP,{onFinish:function(){var i=O()(h()().mark(function a(o){return h()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:(0,y.O1)(Number(s),o).then(function(T){T.success&&B.ZP.success(T.message)});case 1:case"end":return E.stop()}},a)}));return function(a){return i.apply(this,arguments)}}(),request:function(){return(0,y.Pd)(Number(s)).then(function(a){return a.success?{users:a.data.users.map(function(o){return f()(o)==="object"?o.id:o}),groups:a.data.groups.map(function(o){return f()(o)==="object"?o.id:o})}:{users:[],groups:[]}})},children:[(0,e.jsx)(ie.ZP.Item,{valuePropName:"value",name:"users",label:(0,e.jsx)(n.FormattedMessage,{id:"users",defaultMessage:"Users"}),children:(0,e.jsx)(Ut.Z,{multiple:!0})}),(0,e.jsx)(ie.ZP.Item,{valuePropName:"value",name:"groups",label:(0,e.jsx)(n.FormattedMessage,{id:"groups",defaultMessage:"Groups"}),children:(0,e.jsx)(Ls.Z,{multiple:!0})})]})},Us=Rs;function ws(b,r){return dn.apply(this,arguments)}function dn(){return dn=O()(h()().mark(function b(r,s){return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/admin/templates/assignable",u()({method:"GET",useCache:!1,params:r},s||{})));case 1:case"end":return a.stop()}},b)})),dn.apply(this,arguments)}function Bs(b,r,s){return cn.apply(this,arguments)}function cn(){return cn=O()(h()().mark(function b(r,s,i){return h()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,n.request)("/api/admin/templates/".concat(r,"/assign"),u()({method:"POST",headers:{"Content-Type":"application/json"},data:s},i||{})));case 1:case"end":return o.stop()}},b)})),cn.apply(this,arguments)}function Ws(b,r,s){return mn.apply(this,arguments)}function mn(){return mn=O()(h()().mark(function b(r,s,i){return h()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,n.request)("/api/admin/templates/".concat(r,"/unassign"),u()({method:"POST",headers:{"Content-Type":"application/json"},data:s},i||{})));case 1:case"end":return o.stop()}},b)})),mn.apply(this,arguments)}function Ks(b,r){return _n.apply(this,arguments)}function _n(){return _n=O()(h()().mark(function b(r,s){return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/admin/templates/assigned",u()({params:r,method:"GET",useCache:!1},s||{})));case 1:case"end":return a.stop()}},b)})),_n.apply(this,arguments)}var Ns=function(r){var s=r.onChange,i=r.multiple,a=i===void 0?!1:i,o=r.assignable_class,c=r.assignable_id,E=r.onAssign,T=r.onUnassign,g=r.onTemplates,P=(0,l.useState)([]),G=C()(P,2),d=G[0],j=G[1],A=(0,l.useState)([]),J=C()(A,2),D=J[0],re=J[1],de=(0,l.useState)(!1),ce=C()(de,2),$e=ce[0],Ae=ce[1],De=(0,l.useRef)(),Ke=(0,l.useCallback)(function(he){j(he),g&&g(he)},[g]),we=(0,l.useCallback)(function(){Ks({assignable_class:o,assignable_id:Number(c)}).then(function(he){he.success&&re(he.data.map(function(ye){return ye.id}))})},[o,c]),Xe=(0,l.useCallback)(function(){return Ae(!0),De.current&&De.current.abort(),De.current=new AbortController,ws({assignable_class:o},{signal:De.current.signal}).then(function(he){he&&he.success&&Ke(he.data),Ae(!1)}).catch(function(){return Ae(!1)}),function(){De.current&&De.current.abort()}},[o,c]),ot=(0,l.useCallback)(function(he){re(function(ye){return ye.filter(function(ae){return ae!=he})})},[]),qe=(0,l.useCallback)(function(he){re(function(ye){return ye.includes(he)?ye:[].concat(v()(ye),[he])})},[]),Re=(0,l.useCallback)(function(he){var ye=Array.isArray(he)?he:[he],ae=ye.filter(function(Ue){return!D.includes(Ue)}),ke=D.filter(function(Ue){return!ye.includes(Ue)});ae.forEach(function(Ue){Bs(Ue,{assignable_id:Number(c)}).then(function(Je){Je.success&&B.ZP.success(Je.message),Je.success||(B.ZP.error(Je.message),ot(Ue))}).catch(function(Je){B.ZP.error(Je.toString()),ot(Ue)})}),ke.forEach(function(Ue){Ws(Ue,{assignable_id:Number(c)}).then(function(Je){Je.success&&B.ZP.success(Je.message),Je.success||(B.ZP.error(Je.message),qe(Ue))}).catch(function(Je){B.ZP.error(Je.toString()),qe(Ue)})}),ae.length!=0&&E&&E(ae),ke.length!=0&&T&&T(ke),re(ye)},[D,c,E,T]);return(0,l.useEffect)(function(){Xe(),we()},[o,c]),(0,l.useEffect)(function(){s&&s(D)},[D,s]),(0,e.jsx)(xt.default,{style:{width:"100%"},value:D,onChange:Re,mode:a?"multiple":void 0,showSearch:!0,placeholder:(0,e.jsx)(n.FormattedMessage,{id:"select_templates",defaultMessage:"Select a templates"}),optionFilterProp:"children",filterOption:function(ye,ae){if(ae&&ae.children){var ke;return(ae==null||(ke=ae.children)===null||ke===void 0?void 0:ke.toString().toLowerCase().indexOf(ye.toLowerCase()))>=0}return!0},notFoundContent:$e?(0,e.jsx)(Oe.Z,{size:"small"}):null,children:d.map(function(he){return(0,e.jsxs)(xt.default.Option,{value:he.id,children:[he.name," ",(0,e.jsxs)("small",{children:[(0,e.jsx)(n.FormattedMessage,{id:he.channel.split("\\").pop()}),":",(0,e.jsx)(n.FormattedMessage,{id:he.event.split("\\").pop()})]})," "]},he.id)})})},$s=Ns,zs=t(34201),ks=function(r){var s=r.id,i=Pe.Z.Text,a=(0,l.useState)([]),o=C()(a,2),c=o[0],E=o[1],T=(0,l.useState)([]),g=C()(T,2),P=g[0],G=g[1],d=(0,l.useMemo)(function(){return P.map(function(j){return c.find(function(A){return A.id===j})}).filter(function(j){return j!==void 0}).filter(function(j){return j&&j.channel==="EscolaLms\\TemplatesPdf\\Core\\PdfChannel"})},[c,P]);return(0,e.jsxs)("div",{children:[(0,e.jsxs)(Ce.Z,{align:"middle",children:[(0,e.jsx)(Be.Z,{span:3,children:(0,e.jsx)(i,{children:(0,e.jsx)(n.FormattedMessage,{id:"CertificateTemplates",defaultMessage:"Users"})})}),(0,e.jsx)(Be.Z,{span:12,children:(0,e.jsx)($s,{onTemplates:function(A){return E(A)},assignable_class:"EscolaLms\\Courses\\Models\\Course",assignable_id:Number(s),multiple:!0,onChange:function(A){return G(A)}})})]}),d.map(function(j){return j&&(0,e.jsx)(zs.Z,{template_id:j.id,title:j.name},j.id)})]})},Vs=ks,it=function(b){return b.ATTRIBUTES="attributes",b.PRODUCT="product",b.MEDIA="media",b.USER_SUBMISSION="user_submission",b.CATEGORIES="categories",b.PROGRAM="program",b.SCORM="scorm",b.ACCESS="access",b.CERTIFICATES="certificates",b.QUESTIONNAIRES="questionnaires",b.STATISTICS="statistics",b.USER_PROJECTS="user_projects",b}(it||{}),Gs=function(){var b,r,s,i,a=(0,n.useParams)(),o=(0,n.useIntl)(),c=a.course,E=a.tab,T=E===void 0?it.ATTRIBUTES:E,g=c==="new",P=(0,n.useAccess)(),G=(0,l.useState)(),d=C()(G,2),j=d[0],A=d[1],J=(0,Is.Z)(),D=J.manageCourseEdit,re=J.setManageCourseEdit,de=J.validateCourseEdit,ce=(0,l.useState)(null),$e=C()(ce,2),Ae=$e[0],De=$e[1],Ke=(0,l.useState)(null),we=C()(Ke,2),Xe=we[0],ot=we[1],qe=(0,l.useState)({showModal:!1,courseId:0}),Re=C()(qe,2),he=Re[0],ye=Re[1],ae=(0,l.useState)(!0),ke=C()(ae,2),Ue=ke[0],Je=ke[1],_t=(0,n.getAllLocales)()||[],et=(0,n.useModel)("@@initialState"),ct=et.setInitialState,rt=et.initialState,We=ie.ZP.useForm(),ge=C()(We,1),Qe=ge[0],st=(b=rt==null||(r=rt.config)===null||r===void 0||(r=r.find(function(je){return je.key==="showInCourseAdditionalSettings-public"}))===null||r===void 0?void 0:r.data)!==null&&b!==void 0?b:!1,Ve=(s=rt==null||(i=rt.config)===null||i===void 0||(i=i.filter(function(je){return je.key.includes("hideInCourseTabs")}))===null||i===void 0?void 0:i.reduce(function(je,Le){var Ne=Le.key,Ye=Le.data;return je[Ne.split("-")[1]]=Ye,je},{}))!==null&&s!==void 0?s:{};(0,l.useEffect)(function(){T===it.ATTRIBUTES&&j&&Ue&&(de(j),Je(!1))},[j,T,Ue]),(0,l.useEffect)(function(){if(c==="new"){A({title:"new"});return}var je=function(){var Le=O()(h()().mark(function Ne(){var Ye,pt,lt;return h()().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:return tt.next=2,(0,y.XR)(Number(c));case 2:Ye=tt.sent,Ye.success&&(A(u()(u()({},Ye.data),{},{categories:(pt=Ye.data.categories)===null||pt===void 0?void 0:pt.map(Et.i4),tags:(lt=Ye.data.tags)===null||lt===void 0?void 0:lt.map(Et.ZR),summary:Ye.data.summary||""})),De(Ye.data.active_from),ot(Ye.data.active_to));case 4:case"end":return tt.stop()}},Ne)}));return function(){return Le.apply(this,arguments)}}();je()},[c]);var nt=(0,l.useMemo)(function(){return{onValuesChange:function(Le){return re(u()(u()({},D),{},{valuesChanged:!0})),Le.active_from&&De(Le.active_from),Le.active_to&&ot(Le.active_to),Le.title&&A({title:Le.title})},onFinish:function(){var je=O()(h()().mark(function Ne(Ye){var pt,lt;return h()().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:if(!D.disableEdit){tt.next=3;break}return re({showModal:!0,disableEdit:!0,clicked:!1}),tt.abrupt("return");case 3:if(pt=u()(u()({},Ye),{},{active_from:Ye.active_from||(j==null?void 0:j.active_from)||null,active_to:Ye.active_to||(j==null?void 0:j.active_to)||null,authors:Ye.authors&&Ye.authors.map(function(Pt){return f()(Pt)==="object"?Pt.id:Pt}),scorm_sco_id:Ye.scorm_sco_id?Ye.scorm_sco_id:null,image_url:j&&j.image_url,image_path:j&&j.image_url&&(0,Et.Ox)(j.image_url),video_url:j&&j.video_url,video_path:j&&j.video_url&&(0,Et.Ox)(j.video_url),poster_url:j&&j.poster_url,poster_path:j&&j.poster_url&&(0,Et.Ox)(j.poster_url),hours_to_complete:Ye.hours_to_complete||null}),c!=="new"){tt.next=11;break}return tt.next=7,(0,y.P6)(pt);case 7:lt=tt.sent,lt.success&&lt.data.id&&ye({showModal:!0,courseId:lt.data.id}),tt.next=14;break;case 11:return tt.next=13,(0,y.Hf)(Number(c),pt);case 13:lt=tt.sent;case 14:B.ZP.success(o.formatMessage({id:lt.message})),re(u()(u()({},D),{},{showConfirmModal:!1,loading:!1,valuesChanged:!1}));case 16:case"end":return tt.stop()}},Ne)}));function Le(Ne){return je.apply(this,arguments)}return Le}(),initialValues:j,form:Qe}},[c,j,D,Qe]);return j?(0,e.jsxs)(Fs._z,{title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.FormattedMessage,{id:j.title?"course":"new_course"}),", ",(0,e.jsx)(n.FormattedMessage,{id:T})]}),header:{breadcrumb:{routes:[{path:"courses/list",breadcrumbName:o.formatMessage({id:"menu.Courses"})},{path:String(c),breadcrumbName:o.formatMessage({id:"form"})},{path:"/",breadcrumbName:String(j.title)},{path:String(T),breadcrumbName:o.formatMessage({id:T,defaultMessage:String(T)})}]}},children:[(0,e.jsxs)(se.ZP,{bodyStyle:{padding:"24px"},tabs:{type:"card",activeKey:T,onChange:function(Le){ct(u()(u()({},rt),{},{collapsed:Le==="program"})),Le!==it.ATTRIBUTES&&D.valuesChanged?re(u()(u()({},D),{},{showConfirmModal:!0})):n.history.push("/courses/list/".concat(c,"/").concat(Le))}},children:[(0,e.jsxs)(se.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"attributes"}),children:[D.disableEdit&&(0,e.jsx)(Te.Z,{closable:!0,style:{marginBottom:"20px"},type:"warning",message:(0,e.jsx)(n.FormattedMessage,{id:"course_edit_warning_message",defaultMessage:"course_edit_warning_message"}),action:(0,e.jsx)(x.ZP,{onClick:function(){return re({showModal:!0,disableEdit:!0,clicked:!0})},type:"primary",children:(0,e.jsx)(n.FormattedMessage,{id:"questionnaire.submit",defaultMessage:"questionnaire.submit"})})}),(0,e.jsx)(_e.Z,{visible:D.showModal,setManage:re}),(0,e.jsx)(Zs,{visible:he.showModal,handleOk:function(){n.history.push("/courses/list/".concat(he.courseId,"/program"))},handleCancel:function(){return n.history.push("/courses/list/".concat(he.courseId,"/attributes"))}}),(0,e.jsxs)(ie.ZP,u()(u()({},nt),{},{children:[(0,e.jsxs)(ie.ZP.Group,{label:(0,e.jsx)(n.FormattedMessage,{id:"description"}),children:[(0,e.jsx)(ft.Z,{width:"xl",name:"title",label:(0,e.jsx)(n.FormattedMessage,{id:"title"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.title"}),placeholder:o.formatMessage({id:"title",defaultMessage:"title"}),required:!0,disabled:D.disableEdit}),(0,e.jsx)(ft.Z,{width:"xl",name:"subtitle",label:(0,e.jsx)(n.FormattedMessage,{id:"subtitle"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.subtitle"}),placeholder:o.formatMessage({id:"subtitle",defaultMessage:"subtitle"}),disabled:D.disableEdit}),(0,e.jsx)(ie.ZP.Item,{name:"summary",label:(0,e.jsx)(n.FormattedMessage,{id:"summary"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.summary"}),valuePropName:"value",style:{width:697},children:(0,e.jsx)(jt.ZP,{directory:"course/".concat(c,"/wysiwyg")})}),(0,e.jsx)(ie.ZP.Item,{name:"description",label:(0,e.jsx)(n.FormattedMessage,{id:"description"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.description"}),valuePropName:"value",style:{width:697},children:(0,e.jsx)(jt.ZP,{directory:"course/".concat(c,"/wysiwyg")})})]}),(0,e.jsxs)(ie.ZP.Group,{label:(0,e.jsx)(n.FormattedMessage,{id:"duration"}),children:[(0,e.jsx)(Zt.Z,{width:"md",name:"active_from",label:(0,e.jsx)(n.FormattedMessage,{id:"active_from"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.active_from"}),placeholder:o.formatMessage({id:"active_from",defaultMessage:"active_from"}),rules:[{validator:function(Le,Ne){return Ne&&Xe&&(0,Mn.A)(new Date(Ne),new Date(Xe))?Promise.reject(new Error(o.formatMessage({id:"invalidDate"}))):Promise.resolve()}}],disabled:D.disableEdit}),(0,e.jsx)(Zt.Z,{width:"md",name:"active_to",label:(0,e.jsx)(n.FormattedMessage,{id:"active_to"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.active_to"}),placeholder:o.formatMessage({id:"active_to",defaultMessage:"active_to"}),disabled:D.disableEdit||!Ae,rules:[{validator:function(Le,Ne){return Ne&&Ae&&(0,En.R)(new Date(Ne),new Date(Ae))?Promise.reject(new Error(o.formatMessage({id:"invalidDate"}))):Promise.resolve()}}]}),(0,e.jsx)(ft.Z,{width:"md",name:"duration",label:(0,e.jsx)(n.FormattedMessage,{id:"duration"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.duration"}),placeholder:o.formatMessage({id:"duration",defaultMessage:"duration"}),disabled:D.disableEdit}),(0,e.jsx)(Rt.Z,{width:"md",name:"hours_to_complete",label:(0,e.jsx)(n.FormattedMessage,{id:"hours_to_complete"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"hours_to_complete"}),placeholder:o.formatMessage({id:"hours_to_complete",defaultMessage:"hours_to_complete"}),disabled:D.disableEdit})]}),(0,e.jsxs)(ie.ZP.Group,{label:(0,e.jsx)(n.FormattedMessage,{id:"additional"}),children:[st&&(0,e.jsx)(Tt.Z,{width:"xs",name:"public",label:(0,e.jsx)(n.FormattedMessage,{id:"public_label"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"public_tooltip"}),placeholder:o.formatMessage({id:"public",defaultMessage:"public"})}),(0,e.jsx)(ft.Z,{width:"xs",name:"level",label:(0,e.jsx)(n.FormattedMessage,{id:"level"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.level"}),placeholder:o.formatMessage({id:"level",defaultMessage:"level"})}),(0,e.jsx)(kn.Z,{name:"language",width:"xs",label:(0,e.jsx)(n.FormattedMessage,{id:"language"}),placeholder:o.formatMessage({id:"language",defaultMessage:"language"}),valueEnum:_t.map(function(je){return je.split("-")[0]}).reduce(function(je,Le){return u()(u()({},je),{},_()({},Le,Le))},{}),initialValue:(0,n.getLocale)().split("-")[0],disabled:D.disableEdit}),(0,e.jsx)(kn.Z,{name:"status",width:"md",label:(0,e.jsx)(n.FormattedMessage,{id:"status"}),valueEnum:{draft:o.formatMessage({id:"draft",defaultMessage:"draft"}),published:o.formatMessage({id:"published",defaultMessage:"published"}),archived:o.formatMessage({id:"archived",defaultMessage:"archived"}),published_unactivated:o.formatMessage({id:"published_unactivated",defaultMessage:"published_unactivated"})},initialValue:{draft:o.formatMessage({id:"draft",defaultMessage:"draft"})},placeholder:o.formatMessage({id:"status"}),disabled:D.disableEdit,rules:[{required:!0,message:(0,e.jsx)(n.FormattedMessage,{id:"select"})}]}),(0,e.jsx)(ft.Z,{width:"sm",name:"target_group",label:(0,e.jsx)(n.FormattedMessage,{id:"target_group"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.target_group"}),placeholder:o.formatMessage({id:"target_group",defaultMessage:"target_group"}),disabled:D.disableEdit}),(0,e.jsx)(ie.ZP.Item,{name:"authors",label:(0,e.jsx)(n.FormattedMessage,{id:"author_tutor"}),valuePropName:"value",children:(0,e.jsx)(Ut.Z,{multiple:!0})})]})]}))]},it.ATTRIBUTES),!g&&P.salesPermission&&(0,e.jsx)(se.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"product"}),disabled:D.disableEdit,children:c&&(0,e.jsx)(Lr.C,{productable:{class_type:"App\\Models\\Course",class_id:c,name:String(j.title),quantity:1}})},it.PRODUCT),!g&&(0,e.jsx)(se.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"media"}),disabled:D.disableEdit,children:(0,e.jsx)(ie.ZP,u()(u()({},nt),{},{children:(0,e.jsxs)(Ce.Z,{children:[(0,e.jsx)(Be.Z,{children:(0,e.jsx)(Se.Z,{folder:"course/".concat(c),title:"image",action:"/api/admin/courses/".concat(c),src_name:"image_url",form_name:"image",getUploadedSrcField:function(Le){return Le.file.response.data.image_url},setPath:function(Le){return A(function(Ne){return u()(u()({},Ne),Le)})}})}),(0,e.jsx)(Be.Z,{children:(0,e.jsx)(Fr,{folder:"course/".concat(c),action:"/api/admin/courses/".concat(c),src_name:"video_url",form_name:"video",getUploadedSrcField:function(Le){return Le.file.response.data.video_url},setPath:function(Le){return A(function(Ne){return u()(u()({},Ne),Le)})}})}),(0,e.jsx)(Be.Z,{children:(0,e.jsx)(Se.Z,{folder:"course/".concat(c),title:"poster",action:"/api/admin/courses/".concat(c),src_name:"poster_url",form_name:"poster",getUploadedSrcField:function(Le){return Le.file.response.data.poster_url},setPath:function(Le){return A(function(Ne){return u()(u()({},Ne),Le)})}})})]})}))},it.MEDIA),!g&&(0,e.jsx)(se.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"categories_tags"}),disabled:D.disableEdit,children:(0,e.jsx)(ie.ZP,u()(u()({},nt),{},{children:(0,e.jsxs)(Ce.Z,{children:[(0,e.jsx)(Be.Z,{span:12,children:(0,e.jsx)(ie.ZP.Item,{label:(0,e.jsx)(n.FormattedMessage,{id:"categories"}),name:"categories",valuePropName:"value",children:(0,e.jsx)(L.Z,{})})}),(0,e.jsx)(Be.Z,{span:12,children:(0,e.jsx)(ie.ZP.Item,{label:(0,e.jsx)(n.FormattedMessage,{id:"tags"}),name:"tags",valuePropName:"value",children:(0,e.jsx)(Os.Z,{})})})]})}))},it.CATEGORIES),!g&&(0,e.jsx)(se.ZP.TabPane,{className:"program",tab:(0,e.jsx)(n.FormattedMessage,{id:"program"}),disabled:D.disableEdit,cardProps:{bodyStyle:{padding:0}},children:c&&(0,e.jsx)(Es,{id:c})},it.PROGRAM),!g&&P.scormListPermission&&(0,e.jsx)(se.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"scorm"}),disabled:D.disableEdit,children:(0,e.jsx)(ie.ZP,u()(u()({},nt),{},{children:(0,e.jsx)(ie.ZP.Item,{label:"Scorm",name:"scorm_sco_id",valuePropName:"value",children:(0,e.jsx)(Zn,{})})}))},it.SCORM),!g&&(0,e.jsx)(se.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"access"}),disabled:D.disableEdit,children:c&&(0,e.jsx)(Us,{id:c})},it.ACCESS),!g&&P.certificatesPermission&&(0,e.jsx)(se.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"certificates"}),disabled:D.disableEdit,children:c&&(0,e.jsx)(Vs,{id:c})},it.CERTIFICATES),!g&&P.questionnaireListPermission&&(0,e.jsx)(se.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"questionnaires"}),disabled:D.disableEdit,children:c&&(0,e.jsx)(U,{modelType:H.COURSE,id:Number(c)})},it.QUESTIONNAIRES),!g&&!Ve.statistics&&(0,e.jsx)(se.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"statistics"}),disabled:D.disableEdit,children:c&&(0,e.jsx)(pe,{courseId:c})},it.STATISTICS),!g&&!Ve.user_submission&&(0,e.jsx)(se.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"user_submission"}),disabled:D.disableEdit,children:c&&(0,e.jsx)(Ds.ZP,{id:Number(c),type:"App\\Models\\Course"})},it.USER_SUBMISSION),!g&&!Ve.user_projects&&(0,e.jsx)(se.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"user_projects"}),children:(0,e.jsx)(As,{courseId:Number(c)})},it.USER_PROJECTS)]}),(0,e.jsx)(te.Z,{open:!!D.showConfirmModal,onOk:function(){re(u()(u()({},D),{},{loading:!0})),Qe.submit()},onCancel:function(){re(u()(u()({},D),{},{showConfirmModal:!1}))},loading:!!D.loading})]}):(0,e.jsx)(Oe.Z,{})}},62343:function(Ge,be,t){"use strict";var Me=t(52677),_=t.n(Me),ve=t(5574),f=t.n(ve),me=t(952),h=t(37476),I=t(5966),u=t(52688),z=t(86615),O=t(90672),ne=t(63434),C=t(31199),oe=t(96365),R=t(14726),X=t(75842),Q=t(49288),B=t(67294),w=t(43564),l=t(80854),n=t(20568),K=t(19411),e=t(88284),Y=t(28508),H=t(55171),W=t.n(H),p=t(85893),U=function(N){var v=N.value,m=N.onChange,Ie=N.type,Ze=Ie===void 0?"file":Ie,fe=(0,B.useState)(!1),S=f()(fe,2),y=S[0],F=S[1];return(0,p.jsxs)(B.Fragment,{children:[(0,p.jsxs)(me.ZP.Group,{children:[(0,p.jsx)(oe.Z,{value:v,readOnly:!0}),(0,p.jsxs)(R.ZP,{size:"small",type:"primary",onClick:function(){return F(!y)},children:["toggle ",Ze," browser"]})]}),y&&(0,p.jsx)(n.Z,{onFile:function(M,k){return m&&m("".concat(k,"/").concat(M.name))}})]})},L=function(N){var v=(0,l.useIntl)(),m=N.visible,Ie=N.onVisibleChange,Ze=N.onFinish,fe=N.id,S=N.initialData,y=N.groups,F=X.Z.useForm(),x=f()(F,1),M=x[0],k=!fe||fe===-1,le=(0,B.useState)("text"),q=f()(le,2),Z=q[0],$=q[1],ue=(0,B.useCallback)(function(){return!!(M.getFieldValue("group")==="global"||S)},[M,S]),se=(0,B.useState)(""),Pe=f()(se,2),Oe=Pe[0],Te=Pe[1];(0,B.useEffect)(function(){if(_()(fe)==="object"){var V;M.setFieldsValue(fe),$((V=fe.type)!==null&&V!==void 0?V:"text")}else fe&&fe!==-1?(0,w.GF)(Number(fe)).then(function(ze){ze.success&&(M.setFieldsValue(ze.data),$(ze.data.type),Te(ze.data.group))}):(M.resetFields(),$("text"))},[fe,M,S]);var Fe=(0,B.useCallback)(function(V){V.type&&V.type!==Z&&$(V.type)},[Z]);return(0,p.jsxs)(h.Y,{form:M,title:v.formatMessage({id:fe?"editSetting":"newSetting",defaultMessage:fe?"editSetting":"newSetting"}),width:"60vw",visible:!!m,onVisibleChange:Ie,onFinish:Ze,onValuesChange:Fe,children:[(0,p.jsxs)(me.ZP.Group,{children:[S?(0,p.jsx)(I.Z,{label:(0,p.jsx)(l.FormattedMessage,{id:"group",defaultMessage:"group"}),rules:[{required:!0}],width:"md",name:"group",disabled:ue()}):(0,p.jsx)(me.ZP.Item,{label:(0,p.jsx)(l.FormattedMessage,{id:"group",defaultMessage:"group"}),name:"group",children:(0,p.jsx)(Q.Z,{style:{width:"300px"},autoFocus:!0,value:Oe,onChange:function(ze){return Te(ze)},filterOption:function(ze,He){var ee;return(He==null||(ee=He.children)===null||ee===void 0?void 0:ee.toString().toLowerCase().indexOf(ze.toLowerCase()))!==-1},children:y.map(function(V){return(0,p.jsx)(Q.Z.Option,{value:V,children:V},V)})})}),(0,p.jsx)(I.Z,{label:(0,p.jsx)(l.FormattedMessage,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key",disabled:ue()})]}),(0,p.jsxs)(me.ZP.Group,{children:[(0,p.jsx)(u.Z,{name:"enumerable",disabled:ue(),label:(0,p.jsx)(l.FormattedMessage,{id:"enumerable",defaultMessage:"enumerable"})}),(0,p.jsx)(u.Z,{name:"public",disabled:ue(),label:(0,p.jsx)(l.FormattedMessage,{id:"public",defaultMessage:"public"})})]}),(0,p.jsx)(me.ZP.Group,{children:(0,p.jsx)(z.Z.Group,{disabled:!!(!k||S),name:"type",label:(0,p.jsx)(l.FormattedMessage,{id:"type"}),options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"},{label:"json",value:"json"},{label:"file",value:"file"},{label:"image",value:"image"},{label:"boolean",value:"boolean"},{label:"number",value:"number"},{label:"array",value:"array"}]})}),(0,p.jsxs)("div",{children:[Z==="text"&&(0,p.jsx)(I.Z,{width:"lg",name:"value",label:(0,p.jsx)(l.FormattedMessage,{id:"value"})}),Z==="json"&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(O.Z,{width:"lg",name:"value",label:(0,p.jsx)(l.FormattedMessage,{id:"value"}),tooltip:"".concat(v.formatMessage({id:"example_json"}),': {"name":"John", "age":30, "city":["New York","Warsaw"]}')}),(0,p.jsx)(me.ZP.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return(0,p.jsx)(W(),{src:JSON.parse(M.getFieldValue("value"))})}catch(ze){return(0,p.jsx)(W(),{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]}),(Z==="file"||Z==="image")&&(0,p.jsx)(me.ZP.Item,{name:"value",label:"value",tooltip:"select file from current repository or upload new one",valuePropName:"value",children:(0,p.jsx)(U,{type:Z})}),Z==="markdown"&&(0,p.jsx)(me.ZP.Item,{name:"value",label:"value",tooltip:"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.",valuePropName:"value",children:(0,p.jsx)(K.ZP,{directory:"settings/wysiwyg"})}),Z==="boolean"?(0,p.jsx)(u.Z,{name:"data",label:(0,p.jsx)(l.FormattedMessage,{id:"value"}),checkedChildren:(0,p.jsx)(e.Z,{}),unCheckedChildren:(0,p.jsx)(Y.Z,{})}):(0,p.jsx)(me.ZP.Item,{noStyle:!0,hidden:!0,children:(0,p.jsx)(ne.Z,{name:"data",valuePropName:"data"})}),Z==="number"&&(0,p.jsx)(C.Z,{name:"data",label:(0,p.jsx)(l.FormattedMessage,{id:"value"})}),Z==="array"&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(O.Z,{width:"lg",name:"value",label:(0,p.jsx)(l.FormattedMessage,{id:"value"}),tooltip:"".concat(v.formatMessage({id:"example_json"}),": ['tutor', 'student']")}),(0,p.jsx)(me.ZP.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return(0,p.jsx)(W(),{src:JSON.parse(M.getFieldValue("value"))})}catch(ze){return(0,p.jsx)(W(),{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]})]})]})};be.ZP=L},59234:function(Ge,be,t){"use strict";t.d(be,{Wg:function(){return Ze}});var Me=t(5574),_=t.n(Me),ve=t(19632),f=t.n(ve),me=t(15009),h=t.n(me),I=t(97857),u=t.n(I),z=t(99289),O=t.n(z),ne=t(31472),C=t(51042),oe=t(16894),R=t(2453),X=t(83062),Q=t(14726),B=t(86738),w=t(67294),l=t(80854),n=t(43564),K=t(56717),e=t(47389),Y=t(82061),H=t(62343),W=t(20188),p=t(85893),U=function(){var x=O()(h()().mark(function M(k,le,q){var Z,$;return h()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return Z=R.ZP.loading(k.formatMessage({id:"loading"})),se.prev=1,se.next=4,q&&q!==-1?(0,n.VP)(q,u()({},le)):(0,n.oh)(u()({},le));case 4:return $=se.sent,Z(),R.ZP.success(k.formatMessage({id:"success"})),se.abrupt("return",{success:!0,updatedSettings:$});case 10:return se.prev=10,se.t0=se.catch(1),Z(),R.ZP.error(k.formatMessage({id:"error"})),se.abrupt("return",{success:!1,updateSettings:null});case 15:case"end":return se.stop()}},M,null,[[1,10]])}));return function(k,le,q){return x.apply(this,arguments)}}(),L=function(){var x=O()(h()().mark(function M(k,le){var q;return h()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return q=R.ZP.loading(k.formatMessage({id:"loading"})),$.prev=1,$.next=4,(0,n.Rb)(le);case 4:return q(),R.ZP.success(k.formatMessage({id:"success"})),$.abrupt("return",!0);case 9:return $.prev=9,$.t0=$.catch(1),q(),R.ZP.error(k.formatMessage({id:"error"})),$.abrupt("return",!1);case 14:case"end":return $.stop()}},M,null,[[1,9]])}));return function(k,le){return x.apply(this,arguments)}}(),te=function(M){return M.toLowerCase().replace(/(_\w)/g,function(k){return k.toUpperCase().substr(1)})},N=["statistics","user_submission","user_projects"],v=["public"],m=["email","sms"],Ie=function(M){return"hideInMenu-".concat(te(M.split("/").join("_")))},Ze=function(M){return"disableTopicType-".concat(M)},fe=[].concat(f()(Object.keys(ne.oz).map(function(x){return{key:Ze(x),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),f()(["ECommerce","Certificates"].map(function(x){return{key:"disable-".concat(x),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),f()(v.map(function(x){return{key:"showInCourseAdditionalSettings-".concat(x),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),f()(N.map(function(x){return{key:"hideInCourseTabs-".concat(x),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),f()(m.map(function(x){return{key:"hideTemplateTab-".concat(x),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}}))).reduce(function(x,M,k){return x[M.key]=u()(u()({},M),{},{id:-100*k}),x},{}),S=u()({logo:{id:-1,key:"logo",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"image",data:"EscolaLMS"},frontURL:{id:-2,key:"frontURL",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},maxLessonsNestingInProgram:{id:-4,key:"maxLessonsNestingInProgram",group:"global",value:"0",public:!0,enumerable:!0,sort:1,type:"number",data:0},minTopicNestingInProgram:{id:-5,key:"minTopicNestingInProgram",group:"global",value:"0",public:!0,enumerable:!0,sort:1,type:"number",data:0},companyName:{id:-6,key:"companyName",group:"global",value:"Wellms",public:!0,enumerable:!0,sort:0,type:"text",data:"Wellms"},companyURL:{id:-7,key:"companyURL",group:"global",value:"https://www.wellms.io/",public:!0,enumerable:!0,sort:0,type:"text",data:"https://www.wellms.io/"},logoLogin:{id:-8,key:"logoLogin",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"image",data:"EscolaLMS"},logoFooter:{id:-9,key:"logoFooter",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"image",data:"EscolaLMS"},footerFontColor:{id:-10,key:"footerFontColor",group:"global",value:"#00000072",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},showLoginBackgroundImage:{id:-11,key:"showLoginBackgroundImage",group:"global",value:"true",public:!0,enumerable:!0,sort:0,type:"boolean",data:"EscolaLMS"},loginHeaderBackgroundColor:{id:-12,key:"loginHeaderBackgroundColor",group:"global",value:"#f0f2f5",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},loginHeaderFontColor:{id:-13,key:"loginHeaderFontColor",group:"global",value:"#000000D8",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},loginFormBackgroundColor:{id:-14,key:"loginFormBackgroundColor",group:"global",value:"#f0f2f5",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},contentBackgroundColor:{id:-15,key:"contentBackgroundColor",group:"global",value:"#f0f2f5",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},technicalMaintenance:{id:-16,key:"technicalMaintenance",group:"global",value:"false",public:!0,enumerable:!0,sort:0,type:"boolean",data:"EscolaLMS"},technicalMaintenanceText:{id:-17,key:"technicalMaintenanceText",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"}},fe),y=function(M){return typeof M.path=="string"},F=function(){var M=(0,w.useState)(!1),k=_()(M,2),le=k[0],q=k[1],Z=(0,w.useRef)(),$=(0,l.useIntl)(),ue=(0,w.useState)(S),se=_()(ue,2),Pe=se[0],Oe=se[1],Te=(0,l.useModel)("@@initialState"),Fe=Te.setInitialState,V=Te.initialState;(0,w.useEffect)(function(){(0,W.s)().then(function(ee){var Ee=Object.values(ee.routes).filter(y).filter(function(pe){return pe.path&&pe.path!=="/"&&pe.layout!==!1}).map(function(pe){return{path:pe.path,key:Ie(pe.path),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}});Oe(function(pe){return u()(u()({},pe),Ee)})})},[]),(0,w.useEffect)(function(){Z.current&&Z.current.reload()},[Pe]);var ze=[{title:(0,p.jsx)(l.FormattedMessage,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0,render:function(Ee,pe){return(0,p.jsx)(w.Fragment,{children:(0,p.jsxs)(X.Z,{title:(0,p.jsx)(l.FormattedMessage,{id:"Settings.tooltip.".concat(pe.key)}),children:[pe.key," ",(0,p.jsx)(K.Z,{})]})})}},{title:(0,p.jsx)(l.FormattedMessage,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:(0,p.jsx)(l.FormattedMessage,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0,render:function(Ee,pe){return pe.value}},{hideInSearch:!0,title:(0,p.jsx)(l.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(Ee,pe){return[pe.id>0?(0,p.jsx)(X.Z,{title:(0,p.jsx)(l.FormattedMessage,{id:"edit",defaultMessage:"edit"}),children:(0,p.jsx)(Q.ZP,{type:"primary",icon:(0,p.jsx)(e.Z,{}),onClick:function(){return q(pe.id)}})},"edit"):(0,p.jsx)(X.Z,{title:(0,p.jsx)(l.FormattedMessage,{id:"create",defaultMessage:"create"}),children:(0,p.jsx)(Q.ZP,{type:"primary",icon:(0,p.jsx)(C.Z,{}),onClick:function(){q(Pe[pe.key]||-1)}})},"create"),(0,p.jsx)(B.Z,{title:(0,p.jsx)(l.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:O()(h()().mark(function _e(){var Se;return h()().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,L($,pe.id);case 2:Se=Ce.sent,Se&&(q(!1),Z.current&&Z.current.reload());case 4:case"end":return Ce.stop()}},_e)})),okText:(0,p.jsx)(l.FormattedMessage,{id:"yes",defaultMessage:"Yes"}),cancelText:(0,p.jsx)(l.FormattedMessage,{id:"no",defaultMessage:"No"}),children:pe.id>0?(0,p.jsx)(X.Z,{title:(0,p.jsx)(l.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,p.jsx)(Q.ZP,{type:"primary",icon:(0,p.jsx)(Y.Z,{}),danger:!0})}):null},"delete")]}}],He=function(Ee){var pe;if(Ee&&(!(V!=null&&(pe=V.config)!==null&&pe!==void 0&&pe.length)&&Ee&&Fe(u()(u()({},V),{},{config:[Ee]})),!!(V!=null&&V.config))){var _e=V==null?void 0:V.config.map(function(Se){return Se.key===Ee.key?u()(u()({},Se),Ee):Se});Fe(u()(u()({},V),{},{config:_e}))}};return(0,p.jsxs)(w.Fragment,{children:[(0,p.jsx)(oe.ZP,{headerTitle:$.formatMessage({id:"menu.settings"}),search:!1,toolBarRender:!1,actionRef:Z,rowKey:"id",request:function(Ee){var pe=Ee.pageSize,_e=Ee.current;return(0,n.Xd)({per_page:pe,current:_e,group:"global"}).then(function(Se){if(Se.success){var ie=[].concat(f()(Object.keys(Pe).map(function(Ce){return Se.data.find(function(Be){return Be.key===Ce})||Pe[Ce]})),f()(Se.data.filter(function(Ce){return!Object.keys(Pe).includes(Ce.key)})));return{data:ie,total:ie.length,success:!0}}return[]})},columns:ze}),(0,p.jsx)(H.ZP,{groups:[],id:le,visible:le,initialData:Pe,onVisibleChange:function(Ee){return!Ee&&q(!1)},onFinish:function(){var ee=O()(h()().mark(function Ee(pe){var _e,Se,ie,Ce;return h()().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return _e=pe,_e.type==="number"&&(_e=u()(u()({},_e),{},{value:String(_e.data)})),_e.type==="boolean"&&(_e=u()(u()({},_e),{},{value:_e.data})),_e.type==="array"&&(_e=u()(u()({},_e),{},{value:JSON.parse(_e.value)})),ht.next=6,U($,_e,Number(le));case 6:Se=ht.sent,ie=Se.success,Ce=Se.updatedSettings,ie&&(Ce!=null&&Ce.success&&He(Ce.data),q(!1),Z.current&&Z.current.reload());case 10:case"end":return ht.stop()}},Ee)}));return function(Ee){return ee.apply(this,arguments)}}()})]})};be.ZP=F},94116:function(Ge,be,t){"use strict";t.d(be,{CL:function(){return u},W3:function(){return C},bd:function(){return O},k4:function(){return R},uu:function(){return w},yr:function(){return Q}});var Me=t(15009),_=t.n(Me),ve=t(97857),f=t.n(ve),me=t(99289),h=t.n(me),I=t(80854);function u(n){return z.apply(this,arguments)}function z(){return z=h()(_()().mark(function n(K){return _()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.abrupt("return",(0,I.request)("/api/admin/categories/tree",f()({method:"GET",useCache:!1},K||{})));case 1:case"end":return Y.stop()}},n)})),z.apply(this,arguments)}function O(n,K){return ne.apply(this,arguments)}function ne(){return ne=h()(_()().mark(function n(K,e){return _()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.abrupt("return",(0,I.request)("/api/admin/categories",f()({method:"GET",useCache:!1,params:K},e||{})));case 1:case"end":return H.stop()}},n)})),ne.apply(this,arguments)}function C(n,K){return oe.apply(this,arguments)}function oe(){return oe=h()(_()().mark(function n(K,e){return _()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.abrupt("return",(0,I.request)("/api/admin/categories/".concat(K),f()({method:"GET",useCache:!1},e||{})));case 1:case"end":return H.stop()}},n)})),oe.apply(this,arguments)}function R(n,K){return X.apply(this,arguments)}function X(){return X=h()(_()().mark(function n(K,e){return _()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.abrupt("return",(0,I.request)("/api/admin/categories",f()({method:"POST",headers:{"Content-Type":"application/json"},data:K},e||{})));case 1:case"end":return H.stop()}},n)})),X.apply(this,arguments)}function Q(n,K,e){return B.apply(this,arguments)}function B(){return B=h()(_()().mark(function n(K,e,Y){return _()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.abrupt("return",(0,I.request)("/api/admin/categories/".concat(K),f()({method:"POST",headers:{"Content-Type":"application/json"},data:e},Y||{})));case 1:case"end":return W.stop()}},n)})),B.apply(this,arguments)}function w(n,K,e){return l.apply(this,arguments)}function l(){return l=h()(_()().mark(function n(K,e,Y){return _()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.abrupt("return",(0,I.request)("/api/admin/categories/".concat(K),f()({method:"DELETE",headers:{"Content-Type":"application/json"},data:e},Y||{})));case 1:case"end":return W.stop()}},n)})),l.apply(this,arguments)}},17578:function(Ge,be,t){"use strict";t.d(be,{Od:function(){return X},QZ:function(){return u},ht:function(){return O},pV:function(){return R},ws:function(){return C}});var Me=t(15009),_=t.n(Me),ve=t(97857),f=t.n(ve),me=t(99289),h=t.n(me),I=t(80854);function u(B,w){return z.apply(this,arguments)}function z(){return z=h()(_()().mark(function B(w,l){return _()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.abrupt("return",(0,I.request)("/api/admin/file/list",f()({method:"GET",params:w},l||{})));case 1:case"end":return K.stop()}},B)})),z.apply(this,arguments)}function O(B,w){return ne.apply(this,arguments)}function ne(){return ne=h()(_()().mark(function B(w,l){return _()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.abrupt("return",(0,I.request)("/api/admin/file/find",f()({method:"GET",params:w},l||{})));case 1:case"end":return K.stop()}},B)})),ne.apply(this,arguments)}function C(B,w,l){return oe.apply(this,arguments)}function oe(){return oe=h()(_()().mark(function B(w,l,n){var K;return _()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return K=new FormData,K.append("file[]",w),K.append("target",l),Y.abrupt("return",(0,I.request)("/api/admin/file/upload",f()({method:"POST",data:K},n||{})));case 4:case"end":return Y.stop()}},B)})),oe.apply(this,arguments)}var R=function(w){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/images/img?path=").concat(w,"&w=").concat(l)};function X(B,w){return Q.apply(this,arguments)}function Q(){return Q=h()(_()().mark(function B(w,l){return _()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.abrupt("return",(0,I.request)("/api/admin/file/delete",f()({method:"DELETE",data:{url:w}},l||{})));case 1:case"end":return K.stop()}},B)})),Q.apply(this,arguments)}},97704:function(Ge,be,t){"use strict";t.d(be,{Kn:function(){return u},LK:function(){return oe},RN:function(){return C},gq:function(){return w},jc:function(){return Q},x0:function(){return R}});var Me=t(15009),_=t.n(Me),ve=t(97857),f=t.n(ve),me=t(99289),h=t.n(me),I=t(80854);function u(n,K){return z.apply(this,arguments)}function z(){return z=h()(_()().mark(function n(K,e){return _()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.abrupt("return",(0,I.request)("/api/admin/hh5p/content",f()({method:"GET",params:K},e||{})));case 1:case"end":return H.stop()}},n)})),z.apply(this,arguments)}function O(n,K){return ne.apply(this,arguments)}function ne(){return ne=_asyncToGenerator(_regeneratorRuntime().mark(function n(K,e){return _regeneratorRuntime().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.abrupt("return",request("/api/admin/hh5p/content/".concat(K),_objectSpread({method:"GET"},e||{})));case 1:case"end":return H.stop()}},n)})),ne.apply(this,arguments)}var C=function(K){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en",Y=arguments.length>2?arguments[2]:void 0,H=K?"/api/admin/hh5p/editor/".concat(K):"/api/admin/hh5p/editor";return H=e?"".concat(H,"?lang=").concat(e):H,(0,I.request)(H,f()({method:"GET"},Y||{}))},oe=function(K){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en",Y=arguments.length>2?arguments[2]:void 0,H="/api/admin/hh5p/content/".concat(K);return H=e?"".concat(H,"?lang=").concat(e):H,(0,I.request)(H,f()({method:"GET"},Y||{}))};function R(n,K,e){return X.apply(this,arguments)}function X(){return X=h()(_()().mark(function n(K,e,Y){return _()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.abrupt("return",(0,I.request)(e?"/api/admin/hh5p/content/".concat(e):"/api/admin/hh5p/content",f()({method:"POST",headers:{"Content-Type":"application/json"},data:K},Y||{})));case 1:case"end":return W.stop()}},n)})),X.apply(this,arguments)}function Q(n){return B.apply(this,arguments)}function B(){return B=h()(_()().mark(function n(K){return _()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.abrupt("return",(0,I.request)("/api/admin/hh5p/content/".concat(K),{method:"DELETE"}));case 1:case"end":return Y.stop()}},n)})),B.apply(this,arguments)}function w(n){return l.apply(this,arguments)}function l(){return l=h()(_()().mark(function n(K){return _()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.abrupt("return",(0,I.request)("/api/admin/hh5p/content?per_page=0",f()({method:"GET"},K||{})));case 1:case"end":return Y.stop()}},n)})),l.apply(this,arguments)}},44837:function(Ge,be,t){"use strict";t.d(be,{Ir:function(){return Q},RB:function(){return u},fw:function(){return e},nM:function(){return R},nS:function(){return n},q5:function(){return H},rc:function(){return w},ry:function(){return O},wv:function(){return C}});var Me=t(15009),_=t.n(Me),ve=t(97857),f=t.n(ve),me=t(99289),h=t.n(me),I=t(80854);function u(p,U){return z.apply(this,arguments)}function z(){return z=h()(_()().mark(function p(U,L){return _()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",(0,I.request)("/api/admin/products",f()({method:"GET",params:f()(f()({},U),{},{free:typeof U.free!="undefined"?U.free==="true"?1:0:void 0,per_page:U.pageSize,page:U.current})},L||{})));case 1:case"end":return N.stop()}},p)})),z.apply(this,arguments)}function O(p,U){return ne.apply(this,arguments)}function ne(){return ne=h()(_()().mark(function p(U,L){return _()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",(0,I.request)("/api/admin/products",f()({method:"POST",data:U},L||{})));case 1:case"end":return N.stop()}},p)})),ne.apply(this,arguments)}function C(p,U){return oe.apply(this,arguments)}function oe(){return oe=h()(_()().mark(function p(U,L){return _()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",(0,I.request)("/api/admin/products/".concat(U),f()({method:"GET"},L||{})));case 1:case"end":return N.stop()}},p)})),oe.apply(this,arguments)}function R(p,U,L){return X.apply(this,arguments)}function X(){return X=h()(_()().mark(function p(U,L,te){return _()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,I.request)("/api/admin/products/".concat(U,"?_method=PUT"),f()({method:"POST",data:L},te||{})));case 1:case"end":return v.stop()}},p)})),X.apply(this,arguments)}function Q(p,U){return B.apply(this,arguments)}function B(){return B=h()(_()().mark(function p(U,L){return _()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",(0,I.request)("/api/admin/products/".concat(U),f()({method:"DELETE"},L||{})));case 1:case"end":return N.stop()}},p)})),B.apply(this,arguments)}function w(p){return l.apply(this,arguments)}function l(){return l=h()(_()().mark(function p(U){return _()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.abrupt("return",(0,I.request)("/api/admin/productables",f()({method:"GET"},U||{})));case 1:case"end":return te.stop()}},p)})),l.apply(this,arguments)}function n(p,U){return K.apply(this,arguments)}function K(){return K=h()(_()().mark(function p(U,L){return _()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",(0,I.request)("/api/admin/productables/product",f()({method:"GET",params:U},L||{})));case 1:case"end":return N.stop()}},p)})),K.apply(this,arguments)}function e(p,U,L){return Y.apply(this,arguments)}function Y(){return Y=h()(_()().mark(function p(U,L,te){return _()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,I.request)("/api/admin/products/".concat(U,"/attach"),f()({method:"POST",data:L},te||{})));case 1:case"end":return v.stop()}},p)})),Y.apply(this,arguments)}function H(p,U,L){return W.apply(this,arguments)}function W(){return W=h()(_()().mark(function p(U,L,te){return _()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,I.request)("/api/admin/products/".concat(U,"/detach"),f()({method:"POST",data:L},te||{})));case 1:case"end":return v.stop()}},p)})),W.apply(this,arguments)}},76841:function(Ge,be,t){"use strict";t.d(be,{Gm:function(){return u},Sx:function(){return C},_g:function(){return O}});var Me=t(15009),_=t.n(Me),ve=t(97857),f=t.n(ve),me=t(99289),h=t.n(me),I=t(80854);function u(R,X){return z.apply(this,arguments)}function z(){return z=h()(_()().mark(function R(X,Q){return _()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,I.request)("/api/admin/reports/report",f()({params:X,method:"GET",useCache:!1},Q||{})));case 1:case"end":return w.stop()}},R)})),z.apply(this,arguments)}function O(R,X,Q){return ne.apply(this,arguments)}function ne(){return ne=h()(_()().mark(function R(X,Q,B){return _()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,I.request)("/api/admin/stats/course/".concat(X,"/export"),f()({params:Q,method:"GET",useCache:!1,responseType:"blob",headers:{accept:"application/vnd.ms-excel"}},B||{})));case 1:case"end":return l.stop()}},R)})),ne.apply(this,arguments)}function C(R,X,Q){return oe.apply(this,arguments)}function oe(){return oe=h()(_()().mark(function R(X,Q,B){return _()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,I.request)("/api/admin/stats/topic/".concat(X,"/export"),f()({method:"GET",useCache:!1,params:{stat:Q},responseType:"blob",headers:{accept:"application/vnd.ms-excel"}},B||{})));case 1:case"end":return l.stop()}},R)})),oe.apply(this,arguments)}},9649:function(Ge,be,t){"use strict";t.d(be,{JZ:function(){return u},NK:function(){return C}});var Me=t(15009),_=t.n(Me),ve=t(97857),f=t.n(ve),me=t(99289),h=t.n(me),I=t(80854);function u(R,X){return z.apply(this,arguments)}function z(){return z=h()(_()().mark(function R(X,Q){return _()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,I.request)("/api/admin/scorm",f()({params:X,method:"GET",useCache:!1},Q||{})));case 1:case"end":return w.stop()}},R)})),z.apply(this,arguments)}function O(R,X){return ne.apply(this,arguments)}function ne(){return ne=_asyncToGenerator(_regeneratorRuntime().mark(function R(X,Q){return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",request("/api/admin/scorm/scos",_objectSpread({params:_objectSpread(_objectSpread({},X),{},{per_page:X.pageSize,page:X.current}),method:"GET",useCache:!1},Q||{})));case 1:case"end":return w.stop()}},R)})),ne.apply(this,arguments)}function C(R,X){return oe.apply(this,arguments)}function oe(){return oe=h()(_()().mark(function R(X,Q){return _()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,I.request)("/api/admin/scorm/".concat(X),f()({method:"DELETE"},Q||{})));case 1:case"end":return w.stop()}},R)})),oe.apply(this,arguments)}},30869:function(Ge,be,t){"use strict";t.d(be,{EA:function(){return O},Je:function(){return Q},LS:function(){return Ze},N5:function(){return C},Nq:function(){return w},VB:function(){return N},WC:function(){return H},ck:function(){return R},h8:function(){return e},m9:function(){return L},nS:function(){return p},r4:function(){return n},rC:function(){return u},yi:function(){return m}});var Me=t(15009),_=t.n(Me),ve=t(97857),f=t.n(ve),me=t(99289),h=t.n(me),I=t(80854);function u(S,y){return z.apply(this,arguments)}function z(){return z=h()(_()().mark(function S(y,F){return _()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,I.request)("/api/admin/users",f()({params:y,method:"GET",useCache:!1},F||{})));case 1:case"end":return M.stop()}},S)})),z.apply(this,arguments)}function O(S,y,F){return ne.apply(this,arguments)}function ne(){return ne=h()(_()().mark(function S(y,F,x){return _()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",(0,I.request)("/api/admin/users/".concat(y),f()({method:"GET",useCache:x!==void 0?x:!0},F||{})));case 1:case"end":return k.stop()}},S)})),ne.apply(this,arguments)}function C(S){return oe.apply(this,arguments)}function oe(){return oe=h()(_()().mark(function S(y){return _()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",(0,I.request)("/api/profile/me",f()({method:"GET",useCache:!1},y||{})));case 1:case"end":return x.stop()}},S)})),oe.apply(this,arguments)}function R(S,y){return X.apply(this,arguments)}function X(){return X=h()(_()().mark(function S(y,F){return _()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,I.request)("/api/profile/me",f()({data:y,method:"PUT"},F||{})));case 1:case"end":return M.stop()}},S)})),X.apply(this,arguments)}function Q(S,y){return B.apply(this,arguments)}function B(){return B=h()(_()().mark(function S(y,F){return _()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,I.request)("/api/profile/password",f()({data:y,method:"PUT"},F||{})));case 1:case"end":return M.stop()}},S)})),B.apply(this,arguments)}function w(S,y,F){return l.apply(this,arguments)}function l(){return l=h()(_()().mark(function S(y,F,x){return _()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",(0,I.request)("/api/admin/users/".concat(y),f()({data:F,method:"PUT"},x||{})));case 1:case"end":return k.stop()}},S)})),l.apply(this,arguments)}function n(S,y){return K.apply(this,arguments)}function K(){return K=h()(_()().mark(function S(y,F){return _()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,I.request)("/api/admin/users",f()({data:y,method:"POST"},F||{})));case 1:case"end":return M.stop()}},S)})),K.apply(this,arguments)}function e(S,y){return Y.apply(this,arguments)}function Y(){return Y=h()(_()().mark(function S(y,F){return _()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,I.request)("/api/admin/users/".concat(y),f()({method:"DELETE"},F||{})));case 1:case"end":return M.stop()}},S)})),Y.apply(this,arguments)}function H(S,y,F){return W.apply(this,arguments)}function W(){return W=h()(_()().mark(function S(y,F,x){return _()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",(0,I.request)("/api/auth/email/resend",f()({method:"POST",data:{email:y,return_url:F}},x||{})));case 1:case"end":return k.stop()}},S)})),W.apply(this,arguments)}function p(S,y){return U.apply(this,arguments)}function U(){return U=h()(_()().mark(function S(y,F){return _()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,I.request)("/api/admin/users/".concat(y,"/settings"),f()({method:"GET",useCache:!1},F||{})));case 1:case"end":return M.stop()}},S)})),U.apply(this,arguments)}function L(S,y,F,x){return te.apply(this,arguments)}function te(){return te=h()(_()().mark(function S(y,F,x,M){return _()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.abrupt("return",(0,I.request)("/api/admin/users/".concat(y,"/settings"),f()({method:F,data:{settings:[x]},useCache:!1},M||{})));case 1:case"end":return le.stop()}},S)})),te.apply(this,arguments)}function N(S,y){return v.apply(this,arguments)}function v(){return v=h()(_()().mark(function S(y,F){return _()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,I.request)("/api/admin/users/".concat(y,"/avatar"),f()({method:"DELETE"},F||{})));case 1:case"end":return M.stop()}},S)})),v.apply(this,arguments)}function m(S,y,F){return Ie.apply(this,arguments)}function Ie(){return Ie=h()(_()().mark(function S(y,F,x){return _()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",(0,I.request)("/api/admin/users/".concat(y,"/interests"),f()({data:F,method:"PUT"},x||{})));case 1:case"end":return k.stop()}},S)})),Ie.apply(this,arguments)}function Ze(S,y){return fe.apply(this,arguments)}function fe(){return fe=h()(_()().mark(function S(y,F){return _()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,I.request)("/api/admin/stats/date-range",f()({params:y,method:"GET"},F||{})));case 1:case"end":return M.stop()}},S)})),fe.apply(this,arguments)}},24654:function(){},93414:function(){},70172:function(){},2001:function(){},33779:function(){},66558:function(){},82258:function(){}}]);
