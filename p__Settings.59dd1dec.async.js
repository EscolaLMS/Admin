(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{"+up7":function(ie,p,e){"use strict";e.d(p,"f",function(){return T}),e.d(p,"d",function(){return a}),e.d(p,"b",function(){return _}),e.d(p,"h",function(){return S}),e.d(p,"c",function(){return w}),e.d(p,"e",function(){return s}),e.d(p,"a",function(){return E}),e.d(p,"g",function(){return W});var I=e("k1fw"),x=e("9og8"),B=e("WmNS"),r=e.n(B),C=e("9kvl");function T(l,u){return F.apply(this,arguments)}function F(){return F=Object(x.a)(r.a.mark(function l(u,D){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(C.f)("/api/admin/settings",Object(I.a)({method:"GET",useCache:!1,params:Object(I.a)(Object(I.a)({},u),{},{per_page:u.pageSize,page:u.current})},D||{})));case 1:case"end":return n.stop()}},l)})),F.apply(this,arguments)}function a(l,u){return $.apply(this,arguments)}function $(){return $=Object(x.a)(r.a.mark(function l(u,D){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(C.f)("/api/admin/settings/".concat(u),Object(I.a)({method:"GET",useCache:!1},D||{})));case 1:case"end":return n.stop()}},l)})),$.apply(this,arguments)}function _(l,u){return J.apply(this,arguments)}function J(){return J=Object(x.a)(r.a.mark(function l(u,D){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(C.f)("/api/admin/settings",Object(I.a)({method:"POST",headers:{"Content-Type":"application/json"},data:u},D||{})));case 1:case"end":return n.stop()}},l)})),J.apply(this,arguments)}function S(l,u,D){return Z.apply(this,arguments)}function Z(){return Z=Object(x.a)(r.a.mark(function l(u,D,d){return r.a.wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.abrupt("return",Object(C.f)("/api/admin/settings/".concat(u),Object(I.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:D},d||{})));case 1:case"end":return ae.stop()}},l)})),Z.apply(this,arguments)}function w(l,u){return h.apply(this,arguments)}function h(){return h=Object(x.a)(r.a.mark(function l(u,D){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(C.f)("/api/admin/settings/".concat(u),Object(I.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},D||{})));case 1:case"end":return n.stop()}},l)})),h.apply(this,arguments)}function s(l){return M.apply(this,arguments)}function M(){return M=Object(x.a)(r.a.mark(function l(u){return r.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(C.f)("/api/admin/settings/groups",Object(I.a)({method:"GET",useCache:!1},u||{})));case 1:case"end":return d.stop()}},l)})),M.apply(this,arguments)}function E(l){return m.apply(this,arguments)}function m(){return m=Object(x.a)(r.a.mark(function l(u){return r.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(C.f)("/api/admin/config",Object(I.a)({method:"GET",useCache:!1},u||{})));case 1:case"end":return d.stop()}},l)})),m.apply(this,arguments)}function W(l,u){return L.apply(this,arguments)}function L(){return L=Object(x.a)(r.a.mark(function l(u,D){var d,n;return r.a.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return d=u.key,n=u.value,G.abrupt("return",Object(C.f)("/api/admin/config",Object(I.a)({method:"POST",data:{config:[{key:d,value:n}]}},D||{})));case 2:case"end":return G.stop()}},l)})),L.apply(this,arguments)}},"3fxf":function(ie,p,e){"use strict";var I=e("DjyN"),x=e("NUBc"),B=e("Mwp2"),r=e("VXEj"),C=e("+L6B"),T=e("2/Rp"),F=e("5NDa"),a=e("5rEg"),$=e("oBTY"),_=e("k1fw"),J=e("tJVT"),S=e("DYRE"),Z=e("zeV3"),w=e("tU7J"),h=e("wFql"),s=e("q1tI"),M=e.n(s),E=e("BAh9"),m=e("/MfK"),W=e("mAF4"),L=e("dF/Y"),l=e("9kvl"),u=e("DBJ/"),D=e("lLVY"),d=e.n(D),n=e("nKUr"),ae=e.n(n),G=function(ce){var K=ce.directory,le=ce.onUploaded;return Object(n.jsxs)(Z.b,{align:"start",children:[Object(n.jsxs)(h.a.Text,{children:[Object(n.jsx)(l.a,{id:"pages.files.filesBrowser"}),Object(n.jsx)(h.a.Text,{code:!0,children:K})]}),Object(n.jsx)(u.a,{url:"/api/admin/file/upload",name:"file[]",data:{target:K},onChange:function(re){return re.file.status==="done"&&le(K,re.file)}})]})},Oe=function(ce){var K=ce.defaultDirectory,le=K===void 0?"/":K,q=ce.onFile,re=Object(l.i)(),be=Object(s.useState)({loading:!1,name:"",directory:le,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),de=Object(J.a)(be,2),V=de[0],me=de[1],ne=Object(s.useRef)(),Y=Object(s.useCallback)(function(A){me(function(j){return Object(_.a)(Object(_.a)({},j),{},{loading:A})})},[]),t=Object(s.useCallback)(function(A,j){me(function(z){return Object(_.a)(Object(_.a)(Object(_.a)({},z),A.data),{},{data:[{url:j.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object($.a)(A.data.data.map(function(k){return Object(_.a)(Object(_.a)({},k),{},{url:k.mime==="directory"?"".concat(j,"/").concat(k.name):k.url})}))).filter(function(k){return j==="/"?k.name!=="..":!0}),directory:j,loading:!1})})},[Y]),ee=Object(s.useCallback)(function(A){var j,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,k=function(){return ne.current&&ne.current.abort()};return k(),ne.current=new AbortController,Y(!0),Object(E.a)({directory:A,page:z},{signal:(j=ne.current)===null||j===void 0?void 0:j.signal}).then(function(ue){ue.success&&t(ue,A)}).catch(function(){return Y(!1)}),function(){k()}},[Y]);Object(s.useEffect)(function(){return ee(le)},[le,ee]);var he=Object(s.useCallback)(function(A){Y(!0),Object(E.c)(A).then(function(){ee(V.directory)}).catch(function(){Y(!1)})},[ee,Y,V.directory]),ve=Object(s.useCallback)(function(A,j){var z,k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,ue=function(){return ne.current&&ne.current.abort()};return ue(),ne.current=new AbortController,Y(!0),Object(E.b)({directory:A,name:j,page:k},{signal:(z=ne.current)===null||z===void 0?void 0:z.signal}).then(function(je){je.success&&t(je,A)}).catch(function(){return Y(!1)}),function(){ue()}},[Y]);return Object(n.jsxs)("div",{className:"file-browser",children:[Object(n.jsxs)("div",{className:"file-browser__header",children:[Object(n.jsx)(a.a,{placeholder:re.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(j){return me(function(z){return Object(_.a)(Object(_.a)({},z),{},{name:j.target.value})})},value:V.name}),Object(n.jsxs)("div",{children:[Object(n.jsx)(T.a,{className:"file-browser__button",onClick:function(){return ee(V.directory)},children:Object(n.jsx)(l.a,{id:"reset"})}),Object(n.jsx)(T.a,{className:"file-browser__button",type:"primary",onClick:function(){return ve(V.directory,V.name)},children:Object(n.jsx)(l.a,{id:"query"})})]})]}),Object(n.jsx)(r.b,{loading:V.loading,size:"small",itemLayout:"horizontal",dataSource:V.data,header:Object(n.jsx)(G,{directory:V.directory,onUploaded:function(j,z){return ee(j)&&q&&q(z,j)}}),footer:Object(n.jsx)(G,{directory:V.directory,onUploaded:function(j){return ee(j)&&q&&q(name,j)}}),renderItem:function(j){return Object(n.jsx)(r.b.Item,{actions:j.mime!=="directory"?[Object(n.jsx)(T.a,{type:"default",danger:!0,icon:Object(n.jsx)(m.a,{}),size:"small",onClick:function(){return he(j.url)}})]:[],children:Object(n.jsx)(r.b.Item.Meta,{avatar:j.mime==="directory"?Object(n.jsx)(T.a,{type:"primary",icon:Object(n.jsx)(W.a,{}),size:"small",onClick:function(){return ee(j.url)}}):Object(n.jsx)("a",{href:j.url,target:"_blank",rel:"noreferrer",children:Object(n.jsx)(T.a,{type:"default",icon:Object(n.jsx)(L.a,{}),size:"small"})}),description:Object(n.jsx)(M.a.Fragment,{children:Object(n.jsx)(T.a,{type:"text",size:"small",onClick:function(){return j.mime==="directory"?ee(j.url):q&&q(j,V.directory)},children:j.name})})})})}}),Object(n.jsx)(x.a,{pageSizeOptions:[],current:V.current_page,total:V.total,pageSize:V.per_page,onChange:function(j){return ee(V.directory,j)}})]})};p.a=Oe},"5qq5":function(ie,p,e){"use strict";var I=e("7Kak"),x=e("9yH6"),B=e("wx14"),r=e("VTBJ"),C=e("Ff2n"),T=e("q1tI"),F=e.n(T),a=e("adzw"),$=e("uX+g"),_=e("WFLz"),J=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],S=F.a.forwardRef(function(s,M){var E=s.fieldProps,m=s.options,W=s.radioType,L=s.layout,l=s.proFieldProps,u=s.valueEnum,D=Object(C.a)(s,J);return F.a.createElement(a.a,Object(B.a)({mode:"edit",valueType:W==="button"?"radioButton":"radio",ref:M,valueEnum:Object($.a)(u,void 0)},D,{fieldProps:Object(r.a)({options:m,layout:L},E),proFieldProps:l,filedConfig:{customLightMode:!0}}))}),Z=F.a.forwardRef(function(s,M){var E=s.fieldProps,m=s.children;return F.a.createElement(x.a,Object(B.a)({},E,{ref:M}),m)}),w=Object(_.a)(Z,{valuePropName:"checked",ignoreWidth:!0}),h=w;h.Group=S,h.Button=x.a.Button,h.displayName="ProFormComponent",p.a=h},BAh9:function(ie,p,e){"use strict";e.d(p,"a",function(){return T}),e.d(p,"b",function(){return a}),e.d(p,"e",function(){return _}),e.d(p,"d",function(){return S}),e.d(p,"c",function(){return Z});var I=e("k1fw"),x=e("9og8"),B=e("WmNS"),r=e.n(B),C=e("9kvl");function T(h,s){return F.apply(this,arguments)}function F(){return F=Object(x.a)(r.a.mark(function h(s,M){return r.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",Object(C.f)("/api/admin/file/list",Object(I.a)({method:"GET",params:s},M||{})));case 1:case"end":return m.stop()}},h)})),F.apply(this,arguments)}function a(h,s){return $.apply(this,arguments)}function $(){return $=Object(x.a)(r.a.mark(function h(s,M){return r.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",Object(C.f)("/api/admin/file/find",Object(I.a)({method:"GET",params:s},M||{})));case 1:case"end":return m.stop()}},h)})),$.apply(this,arguments)}function _(h,s,M){return J.apply(this,arguments)}function J(){return J=Object(x.a)(r.a.mark(function h(s,M,E){var m;return r.a.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return m=new FormData,m.append("file[]",s),m.append("target",M),L.abrupt("return",Object(C.f)("/api/admin/file/upload",Object(I.a)({method:"POST",data:m},E||{})));case 4:case"end":return L.stop()}},h)})),J.apply(this,arguments)}var S=function(s){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(s,"&w=").concat(M)};function Z(h,s){return w.apply(this,arguments)}function w(){return w=Object(x.a)(r.a.mark(function h(s,M){return r.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",Object(C.f)("/api/admin/file/delete",Object(I.a)({method:"DELETE",data:{url:s}},M||{})));case 1:case"end":return m.stop()}},h)})),w.apply(this,arguments)}},"DBJ/":function(ie,p,e){"use strict";var I=e("y8nQ"),x=e("Vl3Y"),B=e("etVw"),r=e("q1tI"),C=e.n(r),T=e("9kvl"),F=e("qFDU"),a=e("nKUr"),$=e.n(a),_=function(S){var Z=S.onChange,w=S.url,h=S.name,s=S.extra,M=S.accept,E=S.data,m=S.wrapInForm,W=m===void 0?!0:m,L=S.title,l=Object(T.i)();return E&&E[h]&&delete E[h],Object(a.jsx)(F.a,{condition:W,wrap:function(D){return Object(a.jsx)(x.a,{children:D})},children:Object(a.jsx)(B.a,{title:L||Object(a.jsx)(T.a,{id:"upload_click_here"}),placeholder:l.formatMessage({id:"upload_click_here"}),onChange:Z,label:Object(a.jsx)(T.a,{id:"upload"}),max:2,fieldProps:{data:E,accept:M,name:h,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(w),extra:s})})};p.a=_},YjuE:function(ie,p,e){"use strict";e.r(p);var I=e("T2oS"),x=e("W9HT"),B=e("tJVT"),r=e("q1tI"),C=e.n(r),T=e("nhC9"),F=e("Ty5D"),a=e("9kvl"),$=e("tMyG"),_=e("+up7"),J=e("P2fV"),S=e("NJEC"),Z=e("5Dmo"),w=e("3S7+"),h=e("+L6B"),s=e("2/Rp"),M=e("+BJd"),E=e("mr32"),m=e("jrin"),W=e("k1fw"),L=e("miYZ"),l=e("tsqr"),u=e("9og8"),D=e("WmNS"),d=e.n(D),n=e("xvlK"),ae=e("Qiat"),G=e("y8nQ"),Oe=e("Vl3Y"),ge=e("5NDa"),ce=e("5rEg"),K=e("VMEa"),le=e("rmhi"),q=e("Qurx"),re=e("F/zT"),be=e("5qq5"),de=e("BiO0"),V=e("hd5d"),me=e("3fxf"),ne=e("ovOe"),Y=e.n(ne),t=e("nKUr"),ee=function(i){var o=i.value,f=i.onChange,v=i.type,R=v===void 0?"file":v,c=Object(r.useState)(!1),P=Object(B.a)(c,2),Q=P[0],O=P[1];return Object(t.jsxs)(C.a.Fragment,{children:[Object(t.jsxs)(K.a.Group,{children:[Object(t.jsx)(ce.a,{value:o,readOnly:!0}),Object(t.jsxs)(s.a,{size:"small",type:"primary",onClick:function(){return O(!Q)},children:["toggle ",R," browser"]})]}),Q&&Object(t.jsx)(me.a,{onFile:function(H,y){return f&&f("".concat(y,"/").concat(H.name))}})]})},he=function(i){var o=Object(a.i)(),f=i.visible,v=i.onVisibleChange,R=i.onFinish,c=i.id,P=Oe.a.useForm(),Q=Object(B.a)(P,1),O=Q[0],N=!c||c===-1,H=Object(r.useState)("text"),y=Object(B.a)(H,2),b=y[0],g=y[1];Object(r.useEffect)(function(){c&&c!==-1?Object(_.d)(c).then(function(X){X.success&&(O.setFieldsValue(X.data),g(X.data.type))}):(O.resetFields(),g("text"))},[c,O]);var se=Object(r.useCallback)(function(X){X.type&&X.type!==b&&g(X.type)},[b]);return Object(t.jsxs)(le.a,{form:O,title:o.formatMessage({id:c?"editSetting":"newSetting",defaultMessage:c?"editSetting":"newSetting"}),width:"60vw",visible:f,onVisibleChange:v,onFinish:R,onValuesChange:se,children:[Object(t.jsxs)(K.a.Group,{children:[Object(t.jsx)(q.a,{label:Object(t.jsx)(a.a,{id:"group",defaultMessage:"group"}),rules:[{required:!0}],width:"md",name:"group"})," ",Object(t.jsx)(q.a,{label:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"})]}),Object(t.jsxs)(K.a.Group,{children:[Object(t.jsx)(re.a,{name:"enumerable",label:Object(t.jsx)(a.a,{id:"enumerable",defaultMessage:"enumerable"})}),Object(t.jsx)(re.a,{name:"public",label:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"})})]}),Object(t.jsx)(K.a.Group,{children:Object(t.jsx)(be.a.Group,{disabled:!N,name:"type",label:Object(t.jsx)(a.a,{id:"type"}),options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"},{label:"json",value:"json"},{label:"file",value:"file"},{label:"image",value:"image"}]})}),Object(t.jsxs)("div",{children:[b==="text"&&Object(t.jsx)(q.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"})}),b==="json"&&Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(de.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"}),tooltip:"".concat(o.formatMessage({id:"example_json"}),': {"name":"John", "age":30, "city":["New York","Warsaw"]}')}),Object(t.jsx)(K.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(Y.a,{src:JSON.parse(O.getFieldValue("value"))})}catch(te){return Object(t.jsx)(Y.a,{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]}),(b==="file"||b==="image")&&Object(t.jsx)(K.a.Item,{name:"value",label:"value",tooltip:"select file from current repository or upload new one",valuePropName:"value",children:Object(t.jsx)(ee,{type:b})}),b==="markdown"&&Object(t.jsx)(K.a.Item,{name:"value",label:"value",tooltip:"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.",valuePropName:"value",children:Object(t.jsx)(V.a,{directory:"settings/wysiwyg"})})]})]})},ve=he,A=e("G3dp"),j=e("/MfK"),z=function(){var U=Object(u.a)(d.a.mark(function i(o,f,v){var R;return d.a.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return R=l.default.loading(o.formatMessage({id:"loading"})),P.prev=1,P.next=4,v&&v!==-1?Object(_.h)(v,Object(W.a)({},f)):Object(_.b)(Object(W.a)({},f));case 4:return R(),l.default.success(o.formatMessage({id:"success"})),P.abrupt("return",!0);case 9:return P.prev=9,P.t0=P.catch(1),R(),l.default.error(o.formatMessage({id:"error"})),P.abrupt("return",!1);case 14:case"end":return P.stop()}},i,null,[[1,9]])}));return function(o,f,v){return U.apply(this,arguments)}}(),k=function(){var U=Object(u.a)(d.a.mark(function i(o,f){var v;return d.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return v=l.default.loading(o.formatMessage({id:"loading"})),c.prev=1,c.next=4,Object(_.c)(f);case 4:return v(),l.default.success(o.formatMessage({id:"success"})),c.abrupt("return",!0);case 9:return c.prev=9,c.t0=c.catch(1),v(),l.default.error(o.formatMessage({id:"error"})),c.abrupt("return",!1);case 14:case"end":return c.stop()}},i,null,[[1,9]])}));return function(o,f){return U.apply(this,arguments)}}(),ue=function(){var i=Object(r.useState)(!1),o=Object(B.a)(i,2),f=o[0],v=o[1],R=Object(r.useState)([]),c=Object(B.a)(R,2),P=c[0],Q=c[1],O=Object(r.useRef)(),N=Object(a.i)();Object(r.useEffect)(function(){Object(_.e)().then(function(y){y.success&&Q(y.data)})},[]);var H=[{title:Object(t.jsx)(a.a,{id:"group",defaultMessage:"group"}),dataIndex:"group",hideInSearch:!1,key:"group",valueType:"select",width:100,valueEnum:P.sort().reduce(function(y,b){return Object(W.a)(Object(W.a)({},y),{},Object(m.a)({},b,b))},{})},{title:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"enumerable",defaultMessage:"enumerable"}),dataIndex:"enumerable",hideInForm:!0,hideInSearch:!0,render:function(b,g){return Object(t.jsx)(E.a,{color:g.enumerable?"success":"error",children:Object(t.jsx)(a.a,{id:g.enumerable?"true":"false",defaultMessage:g.enumerable?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(b,g){return Object(t.jsx)(E.a,{color:g.public?"success":"error",children:Object(t.jsx)(a.a,{id:g.public?"true":"false",defaultMessage:g.public?"true":"false"})})}},{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(b,g){return[Object(t.jsx)(w.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(s.a,{type:"primary",icon:Object(t.jsx)(A.a,{}),onClick:function(){return v(g.id)}})},"edit"),Object(t.jsx)(S.a,{title:Object(t.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(u.a)(d.a.mark(function se(){var X;return d.a.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.next=2,k(N,g.id);case 2:X=fe.sent,X&&(v(!1),O.current&&O.current.reload());case 4:case"end":return fe.stop()}},se)})),okText:Object(t.jsx)(a.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(a.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(w.a,{title:Object(t.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(s.a,{type:"primary",icon:Object(t.jsx)(j.a,{}),danger:!0})})},"delete")]}}];return Object(t.jsxs)(C.a.Fragment,{children:[Object(t.jsx)(ae.a,{headerTitle:N.formatMessage({id:"menu.settings"}),actionRef:O,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[Object(t.jsxs)(s.a,{type:"primary",onClick:function(){v(-1)},children:[Object(t.jsx)(n.a,{})," ",Object(t.jsx)(a.a,{id:"pages.searchTable.new"})]},"primary")]},request:function(b){var g=b.pageSize,se=b.current,X=b.group;return Object(_.f)({pageSize:g,current:se,group:X}).then(function(te){return te.success?{data:te.data,total:te.meta.total,success:!0}:[]})},columns:H}),Object(t.jsx)(ve,{groups:P,id:f,visible:Number.isInteger(f),onVisibleChange:function(b){return b===!1&&v(!1)},onFinish:function(){var y=Object(u.a)(d.a.mark(function b(g){var se;return d.a.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,z(N,g,Number(f));case 2:se=te.sent,se&&(v(!1),O.current&&O.current.reload());case 4:case"end":return te.stop()}},b)}));return function(b){return y.apply(this,arguments)}}()})]})},je=ue,Be=e("tU7J"),pe=e("wFql"),_e=e("Fghh"),Ee=pe.a.Text,oe;(function(U){U.Array="array",U.String="string"})(oe||(oe={}));var ye=function(i,o){return o===oe.Array?i&&Array.isArray(i)?JSON.stringify(i):"[]":i},Me=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",o=arguments.length>1?arguments[1]:void 0;if(o===oe.Array){var f=JSON.parse(i);return f&&Array.isArray(f)?f:[]}return i},Pe=function(i){var o=Object(_e.j)(),f=i.visible,v=i.onVisibleChange,R=i.onFinish,c=i.value,P=Oe.a.useForm(),Q=Object(B.a)(P,1),O=Q[0],N=Object(r.useMemo)(function(){return(c.rules||[]).includes(oe.Array)?oe.Array:oe.String},[c.rules]);return Object(r.useEffect)(function(){O.setFieldsValue(Object(W.a)(Object(W.a)({},c),{},{value:ye(c.value,N)}))},[N,c,O]),Object(t.jsxs)(le.a,{form:O,title:c.full_key,width:"60vw",visible:f,onVisibleChange:v,onFinish:Object(u.a)(d.a.mark(function H(){var y;return d.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,Object(_.g)({key:c.full_key,value:Me(O.getFieldsValue().value,N)});case 2:if(y=g.sent,!y.success){g.next=6;break}return R(y.success===!0),g.abrupt("return",y.success);case 6:return g.abrupt("return");case 7:case"end":return g.stop()}},H)})),children:[Object(t.jsxs)(K.a.Group,{children:[Object(t.jsx)(re.a,{disabled:!0,name:"public",label:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"})}),Object(t.jsx)(re.a,{disabled:!0,name:"readonly",label:Object(t.jsx)(a.a,{id:"readonly",defaultMessage:"readonly"})}),Object(t.jsx)(K.a.Item,{shouldUpdate:!0,label:Object(t.jsx)(a.a,{id:"rules",defaultMessage:"rules"}),children:function(){return Object(t.jsx)(Ee,{code:!0,children:JSON.stringify(O.getFieldValue("rules"))})}})]}),N===oe.Array?Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(de.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"}),tooltip:"".concat(o.formatMessage({id:"example_json"}),': ["first_field_name", "second_field_name"]')}),Object(t.jsx)(K.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(Y.a,{src:JSON.parse(O.getFieldValue("value"))})}catch(y){return Object(t.jsx)(Y.a,{src:JSON.parse('{ "error": "cannot parse this array" }')})}}})]}):Object(t.jsx)(q.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"})})]})},xe=Pe,De=[{title:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"readonly",defaultMessage:"readonly"}),dataIndex:"readonly",hideInForm:!0,hideInSearch:!0,render:function(i,o){return Object(t.jsx)(E.a,{color:o.readonly?"success":"error",children:Object(t.jsx)(a.a,{id:o.readonly?"true":"false",defaultMessage:o.readonly?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(i,o){return Object(t.jsx)(E.a,{color:o.public?"success":"error",children:Object(t.jsx)(a.a,{id:o.public?"true":"false",defaultMessage:o.public?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0}],Ce=function U(i,o){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return!i||typeof i!="object"?!1:(Object.keys(i).forEach(function(v){var R=i[v];v===o?f.push(i):typeof R=="object"&&U(R,o,f)}),f)},Te=function(i){var o=i.packageName,f=i.values,v=i.onValueUpdated,R=Object(a.i)(),c=Object(r.useState)(),P=Object(B.a)(c,2),Q=P[0],O=P[1],N=Object(r.useMemo)(function(){var H=f[o];return Ce(H,"rules")},[f,o]);return Object(t.jsxs)(C.a.Fragment,{children:[Object(t.jsx)(ae.a,{headerTitle:R.formatMessage({id:"menu.settings"}),rowKey:"key",search:{labelWidth:120},dataSource:N,columns:[].concat(De,[{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(y,b){return[Object(t.jsx)(w.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(s.a,{type:"primary",icon:Object(t.jsx)(A.a,{}),onClick:function(){return O(b)}})},"edit")]}}])}),Q&&Object(t.jsx)(xe,{value:Q,visible:Q!==void 0,onVisibleChange:function(y){return y===!1&&O(void 0)},onFinish:Object(u.a)(d.a.mark(function H(){return d.a.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:v();case 1:case"end":return b.stop()}},H)}))})]})},Ae=Te,Ie=function(i){return i.replaceAll("escolalms","").split("_").join("")},Se=p.default=function(){var U=Object(F.h)(),i=Object(a.i)(),o=U.tab,f=o===void 0?"user_settings":o,v=Object(r.useState)(),R=Object(B.a)(v,2),c=R[0],P=R[1],Q=Object(r.useCallback)(function(){Object(_.a)().then(function(O){O.success&&P(O.data)})},[]);return Object(r.useEffect)(function(){Q()},[]),c?Object(t.jsx)($.a,{title:Object(t.jsx)(a.a,{id:"settings"}),header:{breadcrumb:{routes:[{path:"settings",breadcrumbName:i.formatMessage({id:"menu.Settings"})},{path:String(f),breadcrumbName:String(f)}]}},children:Object(t.jsxs)(T.a,{tabs:{type:"card",activeKey:f,onChange:function(N){return a.d.push("/settings/".concat(N))}},children:[Object(t.jsx)(T.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"user.settings"}),children:Object(t.jsx)(je,{})},"user_settings"),Object.keys(c).map(function(O){return Object(t.jsxs)(T.a.TabPane,{tab:Object(t.jsxs)("span",{children:[Object(t.jsx)(a.a,{id:"package"})," ",Ie(O)]}),children:[Object(t.jsx)(Ae,{values:c,packageName:O,onValueUpdated:function(){return Q()}}),O]},O)})]})}):Object(t.jsx)(x.a,{})}},hd5d:function(ie,p,e){"use strict";var I=e("9og8"),x=e("WmNS"),B=e.n(x),r=e("q1tI"),C=e.n(r),T=e("3Ef1"),F=e.n(T),a=e("BAh9"),$=e("vtG9"),_=e.n($),J=e("9kvl"),S=e("nKUr"),Z=e.n(S),w=function(s){var M=s.value,E=s.onChange,m=s.directory,W=m===void 0?"/wysiwyg":m,L=Object(J.i)();return Object(S.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(S.jsx)(F.a,{uploadImage:function(){var l=Object(I.a)(B.a.mark(function u(D){var d,n;return B.a.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,Object(a.e)(D,W);case 2:if(d=G.sent,!d.success){G.next=6;break}return n=d.data[0].name.includes("/")?d.data[0].name:"".concat(W).concat(d.data[0].name),G.abrupt("return",Object(a.d)(n,1e3));case 6:throw new Error("Error while uploading");case 7:case"end":return G.stop()}},u)}));return function(u){return l.apply(this,arguments)}}(),defaultValue:M||"",onChange:function(u){return E&&E(u())},placeholder:L.formatMessage({id:"wysiwyg_placeholder"})})})};p.a=w},lLVY:function(ie,p,e){},vtG9:function(ie,p,e){}}]);
