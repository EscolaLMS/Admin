"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[6049,2803],{24470:function(N,I,t){t.r(I);var U=t(97857),s=t.n(U),W=t(13769),E=t.n(W),k=t(15009),l=t.n(k),p=t(99289),R=t.n(p),T=t(44167),K=t(45919),g=t(47389),w=t(82061),D=t(51042),F=t(74453),O=t(16894),S=t(2453),j=t(66309),C=t(83062),P=t(14726),Z=t(86738),A=t(60943),$=t(67294),d=t(80854),L=t(62235),v=t(70095),r=t(85893),y=["type","defaultRender"],n=["type","defaultRender"],a=function(){var _=R()(l()().mark(function e(M){return l()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,v._5)(M).then(function(c){return c.success&&S.ZP.success(c.message),!0}));case 1:case"end":return h.stop()}},e)}));return function(M){return _.apply(this,arguments)}}(),i=function(){var e=(0,$.useRef)(),M=(0,d.useIntl)(),G=[{title:(0,r.jsx)(d.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:(0,r.jsx)(d.FormattedMessage,{id:"title",defaultMessage:"title"}),dataIndex:"title",sorter:!0},{title:(0,r.jsx)(d.FormattedMessage,{id:"type",defaultMessage:"type"}),dataIndex:"type",sorter:!0},{title:(0,r.jsx)(d.FormattedMessage,{id:"author",defaultMessage:"author"}),dataIndex:"created_by_id",renderFormItem:function(c,u,m){var o=u.type,x=u.defaultRender,f=E()(u,y);if(o==="form")return null;var b=m.getFieldValue("state");return(0,r.jsx)(T.Z,s()(s()({},f),{},{state:{type:b}}))},render:function(c,u){var m,o;return((m=u.created_by)===null||m===void 0?void 0:m.id)&&(0,r.jsx)(L.Z,{type:"EscolaLms\\Core\\Models\\User",type_id:(o=u.created_by)===null||o===void 0?void 0:o.id},"user")}},{title:(0,r.jsx)(d.FormattedMessage,{id:"assigned",defaultMessage:"assigned"}),dataIndex:"user_id",renderFormItem:function(c,u,m){var o=u.type,x=u.defaultRender,f=E()(u,n);if(o==="form")return null;var b=m.getFieldValue("state");return(0,r.jsx)(T.Z,s()(s()({},f),{},{state:{type:b}}))},render:function(c,u){var m,o;return((m=u.user)===null||m===void 0?void 0:m.id)&&(0,r.jsx)(L.Z,{type:"EscolaLms\\Core\\Models\\User",type_id:(o=u.user)===null||o===void 0?void 0:o.id},"user")}},{title:(0,r.jsx)(d.FormattedMessage,{id:"completed_at",defaultMessage:"Completed at"}),dataIndex:"completed_at",hideInSearch:!0,sorter:!0,render:function(c,u){return u.completed_at?(0,A.WU)(new Date(u.completed_at),K.Cu):(0,r.jsx)(j.Z,{children:(0,r.jsx)(d.FormattedMessage,{id:"uncompleted",defaultMessage:"uncompleted"})})}},{hideInSearch:!0,title:(0,r.jsx)(d.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",render:function(c,u){return[(0,r.jsx)(d.Link,{to:"/other/tasks/".concat(u.id),children:(0,r.jsx)(C.Z,{title:(0,r.jsx)(d.FormattedMessage,{id:"edit",defaultMessage:"edit"}),children:(0,r.jsx)(P.ZP,{type:"primary",icon:(0,r.jsx)(g.Z,{})})})},"edit"),(0,r.jsx)(Z.Z,{title:(0,r.jsx)(d.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:R()(l()().mark(function m(){var o;return l()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,a(u.id);case 2:o=f.sent,o&&e.current&&e.current.reload();case 4:case"end":return f.stop()}},m)})),okText:(0,r.jsx)(d.FormattedMessage,{id:"yes"}),cancelText:(0,r.jsx)(d.FormattedMessage,{id:"no"}),children:(0,r.jsx)(C.Z,{title:(0,r.jsx)(d.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,r.jsx)(P.ZP,{type:"primary",icon:(0,r.jsx)(w.Z,{}),danger:!0})})},"delete")]}}];return(0,r.jsx)(F._z,{children:(0,r.jsx)(O.ZP,{headerTitle:M.formatMessage({id:"menu.Other activities.Tasks",defaultMessage:"Tasks"}),actionRef:e,rowKey:"id",search:{layout:"vertical"},toolBarRender:function(){return[(0,r.jsx)(d.Link,{to:"/other/tasks/new",children:(0,r.jsxs)(P.ZP,{type:"primary",children:[(0,r.jsx)(D.Z,{})," ",(0,r.jsx)(d.FormattedMessage,{id:"new",defaultMessage:"new"})]},"primary")},"new")]},request:function(c,u){var m=c.pageSize,o=c.current,x=c.title,f=c.user_id,b=c.created_by_id,B=u&&Object.entries(u)[0];return(0,v.wq)({pageSize:m,current:o,title:x,created_by_id:b,user_id:f,order_by:B&&B[0],order:B?B[1]==="ascend"?"ASC":"DESC":void 0}).then(function(z){return z.success?{data:z.data,total:z.meta.total,success:!0}:[]})},columns:G})})};I.default=i},70095:function(N,I,t){t.d(I,{PB:function(){return Z},Wl:function(){return C},_5:function(){return K},_X:function(){return w},dL:function(){return $},pz:function(){return r},u6:function(){return L},vr:function(){return F},wq:function(){return R},xJ:function(){return S}});var U=t(15009),s=t.n(U),W=t(97857),E=t.n(W),k=t(99289),l=t.n(k),p=t(80854);function R(n,a){return T.apply(this,arguments)}function T(){return T=l()(s()().mark(function n(a,i){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/api/admin/tasks",E()({method:"GET",params:E()(E()({},a),{},{per_page:a.pageSize,page:a.current})},i||{})));case 1:case"end":return e.stop()}},n)})),T.apply(this,arguments)}function K(n,a){return g.apply(this,arguments)}function g(){return g=l()(s()().mark(function n(a,i){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/api/admin/tasks/".concat(a),E()({method:"DELETE"},i||{})));case 1:case"end":return e.stop()}},n)})),g.apply(this,arguments)}function w(n,a){return D.apply(this,arguments)}function D(){return D=l()(s()().mark(function n(a,i){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/api/admin/tasks/".concat(a),E()({method:"GET"},i||{})));case 1:case"end":return e.stop()}},n)})),D.apply(this,arguments)}function F(n){return O.apply(this,arguments)}function O(){return O=l()(s()().mark(function n(a){return s()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,p.request)("/api/admin/tasks",{method:"POST",data:a}));case 1:case"end":return _.stop()}},n)})),O.apply(this,arguments)}function S(n,a,i){return j.apply(this,arguments)}function j(){return j=l()(s()().mark(function n(a,i,_){return s()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,p.request)("/api/admin/tasks/".concat(a),E()({method:"PATCH",data:i},_||{})));case 1:case"end":return M.stop()}},n)})),j.apply(this,arguments)}function C(n,a){return P.apply(this,arguments)}function P(){return P=l()(s()().mark(function n(a,i){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/api/admin/tasks/complete/".concat(a),E()({method:"POST"},i||{})));case 1:case"end":return e.stop()}},n)})),P.apply(this,arguments)}function Z(n,a){return A.apply(this,arguments)}function A(){return A=l()(s()().mark(function n(a,i){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/api/admin/tasks/incomplete/".concat(a),E()({method:"POST"},i||{})));case 1:case"end":return e.stop()}},n)})),A.apply(this,arguments)}function $(n){return d.apply(this,arguments)}function d(){return d=l()(s()().mark(function n(a){return s()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,p.request)("/api/admin/tasks/notes",{method:"POST",data:a}));case 1:case"end":return _.stop()}},n)})),d.apply(this,arguments)}function L(n,a){return v.apply(this,arguments)}function v(){return v=l()(s()().mark(function n(a,i){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.request)("/api/admin/tasks/notes/".concat(a),{method:"PATCH",data:i}));case 1:case"end":return e.stop()}},n)})),v.apply(this,arguments)}function r(n){return y.apply(this,arguments)}function y(){return y=l()(s()().mark(function n(a){return s()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,p.request)("/api/admin/tasks/notes/".concat(a),{method:"DELETE"}));case 1:case"end":return _.stop()}},n)})),y.apply(this,arguments)}}}]);
