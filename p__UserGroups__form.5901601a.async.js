(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{"2ult":function(Y,f,e){"use strict";var w=e("OaEy"),o=e("2fM7"),v=e("T2oS"),M=e("W9HT"),D=e("oBTY"),U=e("tJVT"),d=e("q1tI"),$=e.n(d),I=e("ri8c"),x=e("9kvl"),A=e("nKUr"),z=e.n(A),L=function(l){var P=l.value,R=l.onChange,j=l.multiple,K=j===void 0?!1:j,a=Object(d.useState)([]),t=Object(U.a)(a,2),_=t[0],E=t[1],r=Object(d.useState)(!1),i=Object(U.a)(r,2),b=i[0],S=i[1],J=Object(d.useRef)(),B=Object(d.useRef)(),y=Object(d.useCallback)(function(c){E(function(g){return[].concat(Object(D.a)(g),Object(D.a)(c)).filter(function(s,m,G){return G.findIndex(function(V){return V.id===s.id})===m})})},[]);Object(d.useEffect)(function(){J.current=_},[_]);var n=Object(d.useCallback)(function(c){S(!0),B.current&&B.current.abort(),B.current=new AbortController,Object(I.g)({search:c},{signal:B.current.signal}).then(function(g){g.success&&y(g.data),S(!1)}).catch(function(){return S(!1)})},[y]),Q=Object(d.useCallback)(function(c){n(c)},[n]);return Object(d.useEffect)(function(){var c=new AbortController;if(P){var g=Array.isArray(P)?P:[P];g.filter(function(s){var m;return!((m=J.current)===null||m===void 0?void 0:m.find(function(G){return G.id===s}))}).forEach(function(s){Object(I.f)(Number(s),{signal:c.signal}).then(function(m){m&&m.success&&y([m.data])})})}return function(){c.abort()}},[P,y]),Object(A.jsx)(o.a,{onFocus:function(){return n()},allowClear:!0,style:{width:"100%"},value:P,onChange:R,mode:K?"multiple":void 0,showSearch:!0,onSearch:Q,placeholder:Object(A.jsx)(x.a,{id:"select_user_group",defaultMessage:"Select user group"}),optionFilterProp:"children",filterOption:function(g,s){if(s&&s.children){var m;return(s==null||(m=s.children)===null||m===void 0?void 0:m.toString().toLowerCase().indexOf(g.toLowerCase()))>=0}return!0},notFoundContent:b?Object(A.jsx)(M.a,{size:"small"}):null,children:_.map(function(c){return Object(A.jsx)(o.a.Option,{value:c.id,children:c.name_with_breadcrumbs},c.id)})})};f.a=L},UNho:function(Y,f,e){"use strict";e.r(f);var w=e("Mwp2"),o=e("VXEj"),v=e("+L6B"),M=e("2/Rp"),D=e("/zsF"),U=e("PArb"),d=e("tU7J"),$=e("wFql"),I=e("T2oS"),x=e("W9HT"),A=e("miYZ"),z=e("tsqr"),L=e("WmNS"),W=e.n(L),l=e("k1fw"),P=e("9og8"),R=e("tJVT"),j=e("q1tI"),K=e.n(j),a=e("VMEa"),t=e("Qurx"),_=e("F/zT"),E=e("nhC9"),r=e("ri8c"),i=e("tMyG"),b=e("9kvl"),S=e("Ty5D"),J=e("/MfK"),B=e("0WSk"),y=e("2ult"),n=e("nKUr"),Q=e.n(n);f.default=function(){var c=Object(b.i)(),g=Object(S.l)(),s=g.group,m=s==="new",G=Object(j.useState)(),V=Object(R.a)(G,2),T=V[0],F=V[1],X=Object(j.useCallback)(Object(P.a)(W.a.mark(function h(){var u;return W.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Object(r.f)(Number(s));case 2:u=p.sent,u.success&&F(Object(l.a)({},u.data));case 4:case"end":return p.stop()}},h)})),[s]),Z=Object(j.useCallback)(function(h){F(function(u){var O;return Object(l.a)(Object(l.a)({},u),{},{users:u?u==null||(O=u.users)===null||O===void 0?void 0:O.filter(function(p){return p.id!==h}):[]})}),Object(r.d)(Number(s),h).then(function(u){u.success&&F(function(O){return Object(l.a)(Object(l.a)({},O),{},{users:u.data})})})},[s]),k=Object(j.useCallback)(function(h){var u;!h||(T==null||(u=T.users)===null||u===void 0?void 0:u.find(function(O){return O.id===h}))||Object(r.a)(Number(s),h).then(function(O){O.success&&F(function(p){return Object(l.a)(Object(l.a)({},p),{},{users:O.data})})})},[T,s]);Object(j.useEffect)(function(){if(s==="new"){F({});return}X()},[s,X]);var q=Object(j.useMemo)(function(){return{onFinish:function(){var h=Object(P.a)(W.a.mark(function O(p){var N,H;return W.a.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(H=Object(l.a)({},p),s!=="new"){C.next=8;break}return C.next=4,Object(r.b)(H);case 4:N=C.sent,N.success&&b.d.push("/user_groups/".concat(N.data.id)),C.next=11;break;case 8:return C.next=10,Object(r.e)(Number(s),H);case 10:N=C.sent;case 11:z.default.success(N.message);case 12:case"end":return C.stop()}},O)}));function u(O){return h.apply(this,arguments)}return u}(),initialValues:T}},[T,s]);return T?Object(n.jsx)(i.a,{title:m?Object(n.jsx)(b.a,{id:"new_user_group"}):Object(n.jsx)(b.a,{id:"edit_user_group"}),children:Object(n.jsx)(E.a,{children:Object(n.jsxs)(a.a,Object(l.a)(Object(l.a)({},q),{},{children:[Object(n.jsxs)(a.a.Group,{children:[Object(n.jsx)(t.a,{width:"md",name:"name",label:Object(n.jsx)(b.a,{id:"name"}),tooltip:Object(n.jsx)(b.a,{id:"name"}),placeholder:c.formatMessage({id:"name"}),required:!0}),Object(n.jsx)(a.a.Item,{style:{minWidth:"300px"},name:"parent_id",label:Object(n.jsx)(b.a,{id:"parent_id_group",defaultMessage:"parent_id_group"}),valuePropName:"value",children:Object(n.jsx)(y.a,{})}),Object(n.jsx)(_.a,{name:"registerable",label:Object(n.jsx)(b.a,{id:"registerable"})})]}),s!=="new"&&Object(n.jsxs)(K.a.Fragment,{children:[Object(n.jsxs)(a.a.Group,{children:[Object(n.jsx)($.a,{children:Object(n.jsx)(b.a,{id:"add_person_to_group",defaultMessage:"Add User to group"})}),Object(n.jsx)(B.a,{onChange:function(u){return k(Number(u))}})]}),Object(n.jsx)(U.a,{}),Object(n.jsx)(o.b,{size:"small",itemLayout:"horizontal",dataSource:T.users,renderItem:function(u){return Object(n.jsxs)(o.b.Item,{actions:[Object(n.jsxs)(M.a,{onClick:function(){return Z(u.id)},type:"primary",icon:Object(n.jsx)(J.a,{}),size:"small",danger:!0,children:[" ",Object(n.jsx)(b.a,{id:"delete"})]})],children:[u.first_name," ",u.last_name," ",Object(n.jsx)("small",{children:u.email})]})}})]}),Object(n.jsx)(U.a,{})]}))})}):Object(n.jsx)(x.a,{})}},ri8c:function(Y,f,e){"use strict";e.d(f,"g",function(){return U}),e.d(f,"f",function(){return $}),e.d(f,"e",function(){return x}),e.d(f,"b",function(){return z}),e.d(f,"c",function(){return W}),e.d(f,"a",function(){return P}),e.d(f,"d",function(){return j});var w=e("WmNS"),o=e.n(w),v=e("k1fw"),M=e("9og8"),D=e("9kvl");function U(a,t){return d.apply(this,arguments)}function d(){return d=Object(M.a)(o.a.mark(function a(t,_){return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(D.f)("/api/admin/user-groups",Object(v.a)({params:Object(v.a)(Object(v.a)({},t),{},{per_page:t.pageSize,page:t.current,search:t.search?t.search:void 0,parent_id:t.parent_id}),method:"GET",useCache:!1},_||{})));case 1:case"end":return r.stop()}},a)})),d.apply(this,arguments)}function $(a,t){return I.apply(this,arguments)}function I(){return I=Object(M.a)(o.a.mark(function a(t,_){return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(D.f)("/api/admin/user-groups/".concat(t),Object(v.a)({method:"GET",useCache:!1},_||{})));case 1:case"end":return r.stop()}},a)})),I.apply(this,arguments)}function x(a,t,_){return A.apply(this,arguments)}function A(){return A=Object(M.a)(o.a.mark(function a(t,_,E){return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(D.f)("/api/admin/user-groups/".concat(t),Object(v.a)({data:_,method:"PUT"},E||{})));case 1:case"end":return i.stop()}},a)})),A.apply(this,arguments)}function z(a,t){return L.apply(this,arguments)}function L(){return L=Object(M.a)(o.a.mark(function a(t,_){return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(D.f)("/api/admin/user-groups",Object(v.a)({data:t,method:"POST"},_||{})));case 1:case"end":return r.stop()}},a)})),L.apply(this,arguments)}function W(a,t){return l.apply(this,arguments)}function l(){return l=Object(M.a)(o.a.mark(function a(t,_){return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(D.f)("/api/admin/user-groups/".concat(t),Object(v.a)({method:"DELETE"},_||{})));case 1:case"end":return r.stop()}},a)})),l.apply(this,arguments)}function P(a,t,_){return R.apply(this,arguments)}function R(){return R=Object(M.a)(o.a.mark(function a(t,_,E){return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(D.f)("/api/admin/user-groups/".concat(t,"/members"),Object(v.a)({data:{user_id:_},method:"POST"},E||{})));case 1:case"end":return i.stop()}},a)})),R.apply(this,arguments)}function j(a,t,_){return K.apply(this,arguments)}function K(){return K=Object(M.a)(o.a.mark(function a(t,_,E){return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(D.f)("/api/admin/user-groups/".concat(t,"/members/").concat(_),Object(v.a)({method:"DELETE"},E||{})));case 1:case"end":return i.stop()}},a)})),K.apply(this,arguments)}}}]);
