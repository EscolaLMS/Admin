"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5036],{29477:function(W,S,e){var I=e(97857),i=e.n(I),x=e(5574),g=e.n(x),D=e(55523),A=e(75842),E=e(21974),O=e(67294),_=e(80854),M=e(85893);function p(n){var f=n.onChange,r=n.onUpload,d=n.url,m=n.name,j=n.extra,t=n.accept,P=n.data,R=n.wrapInForm,y=R===void 0?!0:R,C=n.title,K=n.formProps,L=n.maxFiles,B=n.clearListAfterUpload,F=n.hideLabel,Z=n.disabled,b=n.showUploadList,s=(0,O.useState)(),l=g()(s,2),v=l[0],u=l[1],c=(0,_.useIntl)();return P&&P[m]&&delete P[m],(0,M.jsx)(E.Z,{condition:y,wrap:function(a){return(0,M.jsx)(A.Z,i()(i()({},K),{},{children:a}))},children:(0,M.jsx)(D.Z,{title:C||" ".concat(c.formatMessage({id:"upload_click_here"})),placeholder:c.formatMessage({id:"upload_click_here"}),label:!F&&(0,M.jsx)(_.FormattedMessage,{id:"upload"}),max:L!=null?L:2,fieldProps:{data:P,accept:t,name:m,showUploadList:b,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))},onChange:function(a){u(a),f&&f(a),a.file.status==="done"&&(r&&r(a.file.response),B&&u(void 0))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(d),extra:j,fileList:v==null?void 0:v.fileList,disabled:Z})})}S.Z=p},55045:function(W,S,e){e.r(S),e.d(S,{default:function(){return Z}});var I=e(15009),i=e.n(I),x=e(99289),g=e.n(x),D=e(74453),A=e(16894),E=e(2453),O=e(83062),_=e(14726),M=e(86738),p=e(67294),n=e(80854),f=e(29477),r=e(85893),d=function(s){var l=s.onSuccess,v=s.onError,u=s.hideLabel;return(0,r.jsx)(f.Z,{url:"/api/admin/scorm/upload",name:"zip",accept:"application/zip",hideLabel:u,onChange:function(o){if(!(!o.file.response||o.file.status!=="done")){var a=o.file.response;if(!a.success){v(a);return}l(a.data.model)}}})},m=d,j=e(9649),t=e(1413),P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"},R=P,y=e(84089),C=function(s,l){return p.createElement(y.Z,(0,t.Z)((0,t.Z)({},s),{},{ref:l,icon:R}))};C.displayName="SendOutlined";var K=p.forwardRef(C),L=e(82061),B=function(){var b=g()(i()().mark(function s(l){return i()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,j.NK)(l);case 2:return u.abrupt("return",!0);case 3:case"end":return u.stop()}},s)}));return function(l){return b.apply(this,arguments)}}(),F=function(){var s=(0,p.useRef)(),l=(0,n.useIntl)(),v=[{title:(0,r.jsx)(n.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:(0,r.jsx)(n.FormattedMessage,{id:"version",defaultMessage:"version"}),dataIndex:"version",hideInSearch:!0,sorter:!0},{title:(0,r.jsx)(n.FormattedMessage,{id:"newScorm",defaultMessage:"New Scorm"}),dataIndex:"upload",hideInSearch:!1,hideInTable:!0,renderFormItem:function(){return[(0,r.jsx)(m,{hideLabel:!0,onSuccess:function(){s.current&&s.current.reload(),E.ZP.success(l.formatMessage({id:"scorm_uploaded",defaultMessage:"Scorm uploaded"}))},onError:function(o){return E.ZP.error(o.message||o.toString())}},"upload")]}},{title:(0,r.jsx)(n.FormattedMessage,{id:"SCOS",defaultMessage:"Sharable Content Objects"}),dataIndex:"SCOS",hideInSearch:!0,render:function(c,o){return[o.scos.map(function(a){return(0,r.jsx)(n.Link,{to:"/courses/scorms/preview/".concat(a.uuid),children:(0,r.jsxs)(O.Z,{title:(0,r.jsx)(n.FormattedMessage,{id:"preview",defaultMessage:"preview"}),children:[(0,r.jsx)(_.ZP,{size:"small",icon:(0,r.jsx)(K,{}),type:"primary",children:a.title})," "]})},a.uuid)})]}},{hideInSearch:!0,title:(0,r.jsx)(n.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(c,o){return[(0,r.jsx)(M.Z,{title:(0,r.jsx)(n.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:g()(i()().mark(function a(){var U;return i()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,B(o.id);case 2:U=h.sent,U&&s.current&&s.current.reload();case 4:case"end":return h.stop()}},a)})),okText:(0,r.jsx)(n.FormattedMessage,{id:"yes",defaultMessage:"Yes"}),cancelText:(0,r.jsx)(n.FormattedMessage,{id:"no",defaultMessage:"No"}),children:(0,r.jsx)(O.Z,{title:(0,r.jsx)(n.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,r.jsx)(_.ZP,{type:"primary",icon:(0,r.jsx)(L.Z,{}),danger:!0})})},"delete")]}}];return(0,r.jsx)(D._z,{children:(0,r.jsx)(A.ZP,{headerTitle:l.formatMessage({id:"menu.Courses.SCORMs",defaultMessage:"scorms"}),actionRef:s,rowKey:"id",search:{layout:"vertical"},request:function(c,o){var a=c.pageSize,U=c.current,T=o&&Object.entries(o)[0];return(0,j.JZ)({per_page:a,page:U,order_by:T&&T[0],order:T?T[1]==="ascend"?"ASC":"DESC":void 0}).then(function(h){return h.success?{data:h.data.data,total:h.data.total,success:!0}:[]})},columns:v})})},Z=F},9649:function(W,S,e){e.d(S,{JZ:function(){return O},NK:function(){return n}});var I=e(15009),i=e.n(I),x=e(97857),g=e.n(x),D=e(99289),A=e.n(D),E=e(80854);function O(r,d){return _.apply(this,arguments)}function _(){return _=A()(i()().mark(function r(d,m){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/admin/scorm",g()({params:d,method:"GET",useCache:!1},m||{})));case 1:case"end":return t.stop()}},r)})),_.apply(this,arguments)}function M(r,d){return p.apply(this,arguments)}function p(){return p=_asyncToGenerator(_regeneratorRuntime().mark(function r(d,m){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/admin/scorm/scos",_objectSpread({params:_objectSpread(_objectSpread({},d),{},{per_page:d.pageSize,page:d.current}),method:"GET",useCache:!1},m||{})));case 1:case"end":return t.stop()}},r)})),p.apply(this,arguments)}function n(r,d){return f.apply(this,arguments)}function f(){return f=A()(i()().mark(function r(d,m){return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,E.request)("/api/admin/scorm/".concat(d),g()({method:"DELETE"},m||{})));case 1:case"end":return t.stop()}},r)})),f.apply(this,arguments)}}}]);
