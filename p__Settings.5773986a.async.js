(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"3fxf":function(ae,T,e){"use strict";var N=e("DjyN"),F=e("NUBc"),P=e("Mwp2"),m=e("VXEj"),R=e("+L6B"),y=e("2/Rp"),U=e("5NDa"),a=e("5rEg"),x=e("oBTY"),u=e("k1fw"),p=e("tJVT"),I=e("DYRE"),o=e("zeV3"),$=e("tU7J"),h=e("wFql"),d=e("q1tI"),M=e.n(d),A=e("BAh9"),j=e("/MfK"),X=e("mAF4"),L=e("dF/Y"),Y=e("9kvl"),z=e("DBJ/"),ue=e("lLVY"),ee=e.n(ue),f=e("nKUr"),je=e.n(f),Q=function(ce){var oe=ce.directory,re=ce.onUploaded;return Object(f.jsxs)(o.b,{align:"start",children:[Object(f.jsxs)(h.a.Text,{children:[Object(f.jsx)(Y.a,{id:"pages.files.filesBrowser"}),Object(f.jsx)(h.a.Text,{code:!0,children:oe})]}),Object(f.jsx)(z.a,{url:"/api/admin/file/upload",name:"file[]",data:{target:oe},onChange:function(ne){return ne.file.status==="done"&&re(oe)}})]})},Oe=function(ce){var oe=ce.defaultDirectory,re=oe===void 0?"/":oe,he=ce.onFile,ne=Object(Y.i)(),_e=Object(d.useState)({loading:!1,name:"",directory:re,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),de=Object(p.a)(_e,2),S=de[0],fe=de[1],K=Object(d.useRef)(),Z=Object(d.useCallback)(function(D){fe(function(_){return Object(u.a)(Object(u.a)({},_),{},{loading:D})})},[]),J=Object(d.useCallback)(function(D){var _,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,me=function(){return K.current&&K.current.abort()};return me(),K.current=new AbortController,Z(!0),Object(A.a)({directory:D,page:B},{signal:(_=K.current)===null||_===void 0?void 0:_.signal}).then(function(H){H.success&&fe(function(k){return Object(u.a)(Object(u.a)(Object(u.a)({},k),H.data),{},{data:[{url:D.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(x.a)(H.data.data.map(function(te){return Object(u.a)(Object(u.a)({},te),{},{url:te.mime==="directory"?"".concat(D,"/").concat(te.name):te.url})}))).filter(function(te){return D==="/"?te.name!=="..":!0}),directory:D,loading:!1})})}).catch(function(){return Z(!1)}),function(){me()}},[Z]);Object(d.useEffect)(function(){return J(re)},[re,J]);var Ee=Object(d.useCallback)(function(D){Z(!0),Object(A.c)(D).then(function(){J(S.directory)}).catch(function(){Z(!1)})},[J,Z,S.directory]),pe=Object(d.useCallback)(function(D,_){var B,me=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,H=function(){return K.current&&K.current.abort()};return H(),K.current=new AbortController,Z(!0),Object(A.b)({directory:D,name:_,page:me},{signal:(B=K.current)===null||B===void 0?void 0:B.signal}).then(function(k){k.success&&fe(function(te){return Object(u.a)(Object(u.a)(Object(u.a)({},te),k.data),{},{data:[{url:D.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(x.a)(k.data.data.map(function(se){return Object(u.a)(Object(u.a)({},se),{},{url:se.mime==="directory"?"".concat(D,"/").concat(se.name):se.url})}))).filter(function(se){return D==="/"?se.name!=="..":!0}),directory:D,loading:!1})})}).catch(function(){return Z(!1)}),function(){H()}},[Z]);return Object(f.jsxs)("div",{className:"file-browser",children:[Object(f.jsxs)("div",{className:"file-browser__header",children:[Object(f.jsx)(a.a,{placeholder:ne.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(_){return fe(function(B){return Object(u.a)(Object(u.a)({},B),{},{name:_.target.value})})},value:S.name}),Object(f.jsxs)("div",{children:[Object(f.jsx)(y.a,{className:"file-browser__button",onClick:function(){return J(S.directory)},children:Object(f.jsx)(Y.a,{id:"reset"})}),Object(f.jsx)(y.a,{className:"file-browser__button",type:"primary",onClick:function(){return pe(S.directory,S.name)},children:Object(f.jsx)(Y.a,{id:"query"})})]})]}),Object(f.jsx)(m.b,{loading:S.loading,size:"small",itemLayout:"horizontal",dataSource:S.data,header:Object(f.jsx)(Q,{directory:S.directory,onUploaded:function(_){return J(_)}}),footer:Object(f.jsx)(Q,{directory:S.directory,onUploaded:function(_){return J(_)}}),renderItem:function(_){return Object(f.jsx)(m.b.Item,{actions:_.mime!=="directory"?[Object(f.jsx)(y.a,{type:"default",danger:!0,icon:Object(f.jsx)(j.a,{}),size:"small",onClick:function(){return Ee(_.url)}})]:[],children:Object(f.jsx)(m.b.Item.Meta,{avatar:_.mime==="directory"?Object(f.jsx)(y.a,{type:"primary",icon:Object(f.jsx)(X.a,{}),size:"small",onClick:function(){return J(_.url)}}):Object(f.jsx)("a",{href:_.url,target:"_blank",children:Object(f.jsx)(y.a,{type:"default",icon:Object(f.jsx)(L.a,{}),size:"small"})}),description:Object(f.jsx)(M.a.Fragment,{children:Object(f.jsx)(y.a,{type:"text",size:"small",onClick:function(){return _.mime==="directory"?J(_.url):he&&he(_,S.directory)},children:_.name})})})})}}),Object(f.jsx)(F.a,{pageSizeOptions:[],current:S.current_page,total:S.total,pageSize:S.per_page,onChange:function(_){return J(S.directory,_)}})]})};T.a=Oe},"5qq5":function(ae,T,e){"use strict";var N=e("7Kak"),F=e("9yH6"),P=e("wx14"),m=e("VTBJ"),R=e("Ff2n"),y=e("q1tI"),U=e.n(y),a=e("adzw"),x=e("uX+g"),u=e("WFLz"),p=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],I=U.a.forwardRef(function(d,M){var A=d.fieldProps,j=d.options,X=d.radioType,L=d.layout,Y=d.proFieldProps,z=d.valueEnum,ue=Object(R.a)(d,p);return U.a.createElement(a.a,Object(P.a)({mode:"edit",valueType:X==="button"?"radioButton":"radio",ref:M,valueEnum:Object(x.a)(z,void 0)},ue,{fieldProps:Object(m.a)({options:j,layout:L},A),proFieldProps:Y,filedConfig:{customLightMode:!0}}))}),o=U.a.forwardRef(function(d,M){var A=d.fieldProps,j=d.children;return U.a.createElement(F.a,Object(P.a)({},A,{ref:M}),j)}),$=Object(u.a)(o,{valuePropName:"checked",ignoreWidth:!0}),h=$;h.Group=I,h.Button=F.a.Button,h.displayName="ProFormComponent",T.a=h},BAh9:function(ae,T,e){"use strict";e.d(T,"a",function(){return y}),e.d(T,"b",function(){return a}),e.d(T,"e",function(){return u}),e.d(T,"d",function(){return I}),e.d(T,"c",function(){return o});var N=e("k1fw"),F=e("9og8"),P=e("WmNS"),m=e.n(P),R=e("9kvl");function y(h,d){return U.apply(this,arguments)}function U(){return U=Object(F.a)(m.a.mark(function h(d,M){return m.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(R.f)("/api/admin/file/list",Object(N.a)({method:"GET",params:d},M||{})));case 1:case"end":return j.stop()}},h)})),U.apply(this,arguments)}function a(h,d){return x.apply(this,arguments)}function x(){return x=Object(F.a)(m.a.mark(function h(d,M){return m.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(R.f)("/api/admin/file/find",Object(N.a)({method:"GET",params:d},M||{})));case 1:case"end":return j.stop()}},h)})),x.apply(this,arguments)}function u(h,d,M){return p.apply(this,arguments)}function p(){return p=Object(F.a)(m.a.mark(function h(d,M,A){var j;return m.a.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return j=new FormData,j.append("file[]",d),j.append("target",M),L.abrupt("return",Object(R.f)("/api/admin/file/upload",Object(N.a)({method:"POST",data:j},A||{})));case 4:case"end":return L.stop()}},h)})),p.apply(this,arguments)}var I=function(d){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(d,"&w=").concat(M)};function o(h,d){return $.apply(this,arguments)}function $(){return $=Object(F.a)(m.a.mark(function h(d,M){return m.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(R.f)("/api/admin/file/delete",Object(N.a)({method:"DELETE",data:{url:d}},M||{})));case 1:case"end":return j.stop()}},h)})),$.apply(this,arguments)}},BiO0:function(ae,T,e){"use strict";var N=e("wx14"),F=e("Ff2n"),P=e("q1tI"),m=e.n(P),R=e("adzw"),y=["fieldProps","proFieldProps"],U=function(x,u){var p=x.fieldProps,I=x.proFieldProps,o=Object(F.a)(x,y);return m.a.createElement(R.a,Object(N.a)({ref:u,mode:"edit",valueType:"textarea",fieldProps:p,proFieldProps:I},o))};T.a=m.a.forwardRef(U)},"DBJ/":function(ae,T,e){"use strict";var N=e("y8nQ"),F=e("Vl3Y"),P=e("etVw"),m=e("q1tI"),R=e.n(m),y=e("9kvl"),U=e("qFDU"),a=e("nKUr"),x=e.n(a),u=function(I){var o=I.onChange,$=I.url,h=I.name,d=I.extra,M=I.accept,A=I.data,j=I.wrapInForm,X=j===void 0?!0:j,L=Object(y.i)();return A&&A[h]&&delete A[h],Object(a.jsx)(U.a,{condition:X,wrap:function(z){return Object(a.jsx)(F.a,{children:z})},children:Object(a.jsx)(P.a,{title:Object(a.jsx)(y.a,{id:"upload_click_here"}),placeholder:L.formatMessage({id:"upload_click_here"}),onChange:o,label:Object(a.jsx)(y.a,{id:"upload"}),max:2,fieldProps:{data:A,accept:M,name:h,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat($),extra:d})})};T.a=u},"F/zT":function(ae,T,e){"use strict";var N=e("wx14"),F=e("VTBJ"),P=e("Ff2n"),m=e("q1tI"),R=e.n(m),y=e("adzw"),U=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],a=R.a.forwardRef(function(x,u){var p=x.fieldProps,I=x.unCheckedChildren,o=x.checkedChildren,$=x.proFieldProps,h=Object(P.a)(x,U);return R.a.createElement(y.a,Object(N.a)({valueType:"switch",mode:"edit",fieldProps:Object(F.a)({unCheckedChildren:I,checkedChildren:o},p),ref:u,valuePropName:"checked",proFieldProps:$,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},h))});T.a=a},YjuE:function(ae,T,e){"use strict";e.r(T);var N=e("T2oS"),F=e("W9HT"),P=e("tJVT"),m=e("q1tI"),R=e.n(m),y=e("nhC9"),U=e("Ty5D"),a=e("9kvl"),x=e("tMyG"),u=e("k1fw"),p=e("9og8"),I=e("WmNS"),o=e.n(I);function $(c,r){return h.apply(this,arguments)}function h(){return h=Object(p.a)(o.a.mark(function c(r,n){return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(a.f)("/api/admin/settings",Object(u.a)({method:"GET",useCache:!1,params:Object(u.a)(Object(u.a)({},r),{},{per_page:r.pageSize,page:r.current})},n||{})));case 1:case"end":return s.stop()}},c)})),h.apply(this,arguments)}function d(c,r){return M.apply(this,arguments)}function M(){return M=Object(p.a)(o.a.mark(function c(r,n){return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(a.f)("/api/admin/settings/".concat(r),Object(u.a)({method:"GET",useCache:!1},n||{})));case 1:case"end":return s.stop()}},c)})),M.apply(this,arguments)}function A(c,r){return j.apply(this,arguments)}function j(){return j=Object(p.a)(o.a.mark(function c(r,n){return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(a.f)("/api/admin/settings",Object(u.a)({method:"POST",headers:{"Content-Type":"application/json"},data:r},n||{})));case 1:case"end":return s.stop()}},c)})),j.apply(this,arguments)}function X(c,r,n){return L.apply(this,arguments)}function L(){return L=Object(p.a)(o.a.mark(function c(r,n,i){return o.a.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",Object(a.f)("/api/admin/settings/".concat(r),Object(u.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:n},i||{})));case 1:case"end":return C.stop()}},c)})),L.apply(this,arguments)}function Y(c,r){return z.apply(this,arguments)}function z(){return z=Object(p.a)(o.a.mark(function c(r,n){return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(a.f)("/api/admin/settings/".concat(r),Object(u.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},n||{})));case 1:case"end":return s.stop()}},c)})),z.apply(this,arguments)}function ue(c){return ee.apply(this,arguments)}function ee(){return ee=Object(p.a)(o.a.mark(function c(r){return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(a.f)("/api/admin/settings/groups",Object(u.a)({method:"GET",useCache:!1},r||{})));case 1:case"end":return i.stop()}},c)})),ee.apply(this,arguments)}function f(c){return je.apply(this,arguments)}function je(){return je=Object(p.a)(o.a.mark(function c(r){return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(a.f)("/api/admin/config",Object(u.a)({method:"GET",useCache:!1},r||{})));case 1:case"end":return i.stop()}},c)})),je.apply(this,arguments)}function Q(c,r){return Oe.apply(this,arguments)}function Oe(){return Oe=Object(p.a)(o.a.mark(function c(r,n){var i,s;return o.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return i=r.key,s=r.value,l.abrupt("return",Object(a.f)("/api/admin/config",Object(u.a)({method:"POST",data:{config:[{key:i,value:s}]}},n||{})));case 2:case"end":return l.stop()}},c)})),Oe.apply(this,arguments)}var ge=e("P2fV"),ce=e("NJEC"),oe=e("5Dmo"),re=e("3S7+"),he=e("+L6B"),ne=e("2/Rp"),_e=e("+BJd"),de=e("mr32"),S=e("jrin"),fe=e("miYZ"),K=e("tsqr"),Z=e("xvlK"),J=e("Qiat"),Ee=e("y8nQ"),pe=e("Vl3Y"),D=e("5NDa"),_=e("5rEg"),B=e("VMEa"),me=e("rmhi"),H=e("Qurx"),k=e("F/zT"),te=e("5qq5"),se=e("BiO0"),Me=e("hd5d"),Pe=e("3fxf"),xe=e("ovOe"),ve=e.n(xe),t=e("nKUr"),De=function(r){var n=r.value,i=r.onChange,s=r.type,C=s===void 0?"file":s,l=Object(m.useState)(!1),E=Object(P.a)(l,2),w=E[0],b=E[1];return Object(t.jsxs)(R.a.Fragment,{children:[Object(t.jsxs)(B.b.Group,{children:[Object(t.jsx)(_.a,{value:n,readOnly:!0}),Object(t.jsxs)(ne.a,{size:"small",type:"primary",onClick:function(){return b(!w)},children:["toggle ",C," browser"]})]}),w&&Object(t.jsx)(Pe.a,{onFile:function(V,v){return i&&i("".concat(v,"/").concat(V.name))}})]})},Ce=function(r){var n=Object(a.i)(),i=r.visible,s=r.onVisibleChange,C=r.onFinish,l=r.id,E=pe.a.useForm(),w=Object(P.a)(E,1),b=w[0],W=!l||l===-1,V=Object(m.useState)("text"),v=Object(P.a)(V,2),O=v[0],g=v[1];Object(m.useEffect)(function(){l&&l!==-1?d(l).then(function(G){G.success&&(b.setFieldsValue(G.data),g(G.data.type))}):(b.resetFields(),g("text"))},[l,b]);var ie=Object(m.useCallback)(function(G){G.type&&G.type!==O&&g(G.type)},[O]);return Object(t.jsxs)(me.a,{form:b,title:n.formatMessage({id:l?"editSetting":"newSetting",defaultMessage:l?"editSetting":"newSetting"}),width:"60vw",visible:i,onVisibleChange:s,onFinish:C,onValuesChange:ie,children:[Object(t.jsxs)(B.b.Group,{children:[Object(t.jsx)(H.a,{label:Object(t.jsx)(a.a,{id:"group",defaultMessage:"group"}),rules:[{required:!0}],width:"md",name:"group"})," ",Object(t.jsx)(H.a,{label:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"})]}),Object(t.jsxs)(B.b.Group,{children:[Object(t.jsx)(k.a,{name:"enumerable",label:Object(t.jsx)(a.a,{id:"enumerable",defaultMessage:"enumerable"})}),Object(t.jsx)(k.a,{name:"public",label:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"})})]}),Object(t.jsx)(B.b.Group,{children:Object(t.jsx)(te.a.Group,{disabled:!W,name:"type",label:Object(t.jsx)(a.a,{id:"type"}),options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"},{label:"json",value:"json"},{label:"file",value:"file"},{label:"image",value:"image"}]})}),Object(t.jsxs)("div",{children:[O==="text"&&Object(t.jsx)(H.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"})}),O==="json"&&Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(se.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"}),tooltip:"".concat(n.formatMessage({id:"example_json"}),': {"name":"John", "age":30, "city":["New York","Warsaw"]}')}),Object(t.jsx)(B.b.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(ve.a,{src:JSON.parse(b.getFieldValue("value"))})}catch(q){return Object(t.jsx)(ve.a,{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]}),(O==="file"||O==="image")&&Object(t.jsx)(B.b.Item,{name:"value",label:"value",tooltip:"select file from current repository or upload new one",valuePropName:"value",children:Object(t.jsx)(De,{type:O})}),O==="markdown"&&Object(t.jsx)(B.b.Item,{name:"value",label:"value",tooltip:"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.",valuePropName:"value",children:Object(t.jsx)(Me.a,{directory:"settings/wysiwyg"})})]})]})},Te=Ce,ye=e("G3dp"),Ie=e("/MfK"),Ae=function(){var c=Object(p.a)(o.a.mark(function r(n,i,s){var C;return o.a.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return C=K.default.loading(n.formatMessage({id:"loading"})),E.prev=1,E.next=4,s&&s!==-1?X(s,Object(u.a)({},i)):A(Object(u.a)({},i));case 4:return C(),K.default.success(n.formatMessage({id:"success"})),E.abrupt("return",!0);case 9:return E.prev=9,E.t0=E.catch(1),C(),K.default.error(n.formatMessage({id:"error"})),E.abrupt("return",!1);case 14:case"end":return E.stop()}},r,null,[[1,9]])}));return function(n,i,s){return c.apply(this,arguments)}}(),Be=function(){var c=Object(p.a)(o.a.mark(function r(n,i){var s;return o.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=K.default.loading(n.formatMessage({id:"loading"})),l.prev=1,l.next=4,Y(i);case 4:return s(),K.default.success(n.formatMessage({id:"success"})),l.abrupt("return",!0);case 9:return l.prev=9,l.t0=l.catch(1),s(),K.default.error(n.formatMessage({id:"error"})),l.abrupt("return",!1);case 14:case"end":return l.stop()}},r,null,[[1,9]])}));return function(n,i){return c.apply(this,arguments)}}(),Fe=function(){var r=Object(m.useState)(!1),n=Object(P.a)(r,2),i=n[0],s=n[1],C=Object(m.useState)([]),l=Object(P.a)(C,2),E=l[0],w=l[1],b=Object(m.useRef)(),W=Object(a.i)();Object(m.useEffect)(function(){ue().then(function(v){v.success&&w(v.data)})},[]);var V=[{title:Object(t.jsx)(a.a,{id:"group",defaultMessage:"group"}),dataIndex:"group",hideInSearch:!1,key:"group",valueType:"select",width:100,valueEnum:E.sort().reduce(function(v,O){return Object(u.a)(Object(u.a)({},v),{},Object(S.a)({},O,O))},{})},{title:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"enumerable",defaultMessage:"enumerable"}),dataIndex:"enumerable",hideInForm:!0,hideInSearch:!0,render:function(O,g){return Object(t.jsx)(de.a,{color:g.enumerable?"success":"error",children:Object(t.jsx)(a.a,{id:g.enumerable?"true":"false",defaultMessage:g.enumerable?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(O,g){return Object(t.jsx)(de.a,{color:g.public?"success":"error",children:Object(t.jsx)(a.a,{id:g.public?"true":"false",defaultMessage:g.public?"true":"false"})})}},{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(O,g){return[Object(t.jsx)(re.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(ne.a,{type:"primary",icon:Object(t.jsx)(ye.a,{}),onClick:function(){return s(g.id)}})},"edit"),Object(t.jsx)(ce.a,{title:Object(t.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(p.a)(o.a.mark(function ie(){var G;return o.a.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.next=2,Be(W,g.id);case 2:G=be.sent,G&&(s(!1),b.current&&b.current.reload());case 4:case"end":return be.stop()}},ie)})),okText:Object(t.jsx)(a.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(a.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(re.a,{title:Object(t.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(ne.a,{type:"primary",icon:Object(t.jsx)(Ie.a,{}),danger:!0})})},"delete")]}}];return Object(t.jsxs)(R.a.Fragment,{children:[Object(t.jsx)(J.a,{headerTitle:W.formatMessage({id:"menu.settings"}),actionRef:b,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[Object(t.jsxs)(ne.a,{type:"primary",onClick:function(){s(-1)},children:[Object(t.jsx)(Z.a,{})," ",Object(t.jsx)(a.a,{id:"pages.searchTable.new"})]},"primary")]},request:function(O){var g=O.pageSize,ie=O.current,G=O.group;return $({pageSize:g,current:ie,group:G}).then(function(q){return q.success?{data:q.data,total:q.meta.total,success:!0}:[]})},columns:V}),Object(t.jsx)(Te,{groups:E,id:i,visible:Number.isInteger(i),onVisibleChange:function(O){return O===!1&&s(!1)},onFinish:function(){var v=Object(p.a)(o.a.mark(function O(g){var ie;return o.a.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,Ae(W,g,Number(i));case 2:ie=q.sent,ie&&(s(!1),b.current&&b.current.reload());case 4:case"end":return q.stop()}},O)}));return function(O){return v.apply(this,arguments)}}()})]})},Ue=Fe,Je=e("tU7J"),Re=e("wFql"),Se=e("Fghh"),We=Re.a.Text,le;(function(c){c.Array="array",c.String="string"})(le||(le={}));var Le=function(r,n){return n===le.Array?r&&Array.isArray(r)?JSON.stringify(r):"[]":r},Ke=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;if(n===le.Array){var i=JSON.parse(r);return i&&Array.isArray(i)?i:[]}return r},we=function(r){var n=Object(Se.j)(),i=r.visible,s=r.onVisibleChange,C=r.onFinish,l=r.value,E=pe.a.useForm(),w=Object(P.a)(E,1),b=w[0],W=Object(m.useMemo)(function(){return(l.rules||[]).includes(le.Array)?le.Array:le.String},[l.rules]);return Object(m.useEffect)(function(){b.setFieldsValue(Object(u.a)(Object(u.a)({},l),{},{value:Le(l.value,W)}))},[W,l,b]),Object(t.jsxs)(me.a,{form:b,title:l.full_key,width:"60vw",visible:i,onVisibleChange:s,onFinish:Object(p.a)(o.a.mark(function V(){var v;return o.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,Q({key:l.full_key,value:Ke(b.getFieldsValue().value,W)});case 2:if(v=g.sent,!v.success){g.next=6;break}return C(v.success===!0),g.abrupt("return",v.success);case 6:return g.abrupt("return");case 7:case"end":return g.stop()}},V)})),children:[Object(t.jsxs)(B.b.Group,{children:[Object(t.jsx)(k.a,{disabled:!0,name:"public",label:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"})}),Object(t.jsx)(k.a,{disabled:!0,name:"readonly",label:Object(t.jsx)(a.a,{id:"readonly",defaultMessage:"readonly"})}),Object(t.jsx)(B.b.Item,{shouldUpdate:!0,label:Object(t.jsx)(a.a,{id:"rules",defaultMessage:"rules"}),children:function(){return Object(t.jsx)(We,{code:!0,children:JSON.stringify(b.getFieldValue("rules"))})}})]}),W===le.Array?Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(se.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"}),tooltip:"".concat(n.formatMessage({id:"example_json"}),': ["first_field_name", "second_field_name"]')}),Object(t.jsx)(B.b.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(ve.a,{src:JSON.parse(b.getFieldValue("value"))})}catch(v){return Object(t.jsx)(ve.a,{src:JSON.parse('{ "error": "cannot parse this array" }')})}}})]}):Object(t.jsx)(H.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"})})]})},Ve=we,Ne=[{title:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"readonly",defaultMessage:"readonly"}),dataIndex:"readonly",hideInForm:!0,hideInSearch:!0,render:function(r,n){return Object(t.jsx)(de.a,{color:n.readonly?"success":"error",children:Object(t.jsx)(a.a,{id:n.readonly?"true":"false",defaultMessage:n.readonly?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(r,n){return Object(t.jsx)(de.a,{color:n.public?"success":"error",children:Object(t.jsx)(a.a,{id:n.public?"true":"false",defaultMessage:n.public?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0}],$e=function(r){var n=r.packageName,i=r.values,s=r.onValueUpdated,C=Object(a.i)(),l=Object(m.useState)(),E=Object(P.a)(l,2),w=E[0],b=E[1],W=Object(m.useMemo)(function(){var V=i[n],v=Object.entries(V).map(function(O){return Object(u.a)({key:O[0],full_key:"".concat(n,".").concat(O[0])},O[1])});return v},[i,n]);return Object(t.jsxs)(R.a.Fragment,{children:[Object(t.jsx)(J.a,{headerTitle:C.formatMessage({id:"menu.settings"}),rowKey:"key",search:{labelWidth:120},dataSource:W,columns:[].concat(Ne,[{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(v,O){return[Object(t.jsx)(re.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(ne.a,{type:"primary",icon:Object(t.jsx)(ye.a,{}),onClick:function(){return b(O)}})},"edit")]}}])}),w&&Object(t.jsx)(Ve,{value:w,visible:w!==void 0,onVisibleChange:function(v){return v===!1&&b(void 0)},onFinish:Object(p.a)(o.a.mark(function V(){return o.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:s();case 1:case"end":return O.stop()}},V)}))})]})},ze=$e,Ge=function(r){return r.replaceAll("escolalms","").split("_").join("")},Ye=T.default=function(){var c=Object(U.g)(),r=Object(a.i)(),n=c.tab,i=n===void 0?"user_settings":n,s=Object(m.useState)(),C=Object(P.a)(s,2),l=C[0],E=C[1],w=Object(m.useCallback)(function(){f().then(function(b){b.success&&E(b.data)})},[]);return Object(m.useEffect)(function(){w()},[]),l?Object(t.jsx)(x.a,{title:Object(t.jsx)(a.a,{id:"settings"}),header:{breadcrumb:{routes:[{path:"settings",breadcrumbName:r.formatMessage({id:"menu.Settings"})},{path:String(i),breadcrumbName:String(i)}]}},children:Object(t.jsxs)(y.a,{tabs:{type:"card",activeKey:i,onChange:function(W){return a.d.push("/settings/".concat(W))}},children:[Object(t.jsx)(y.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"user.settings"}),children:Object(t.jsx)(Ue,{})},"user_settings"),Object.keys(l).map(function(b){return Object(t.jsxs)(y.a.TabPane,{tab:Object(t.jsxs)("span",{children:[Object(t.jsx)(a.a,{id:"package"})," ",Ge(b)]}),children:[Object(t.jsx)(ze,{values:l,packageName:b,onValueUpdated:function(){return w()}}),b]},b)})]})}):Object(t.jsx)(F.a,{})}},hd5d:function(ae,T,e){"use strict";var N=e("9og8"),F=e("WmNS"),P=e.n(F),m=e("q1tI"),R=e.n(m),y=e("3Ef1"),U=e.n(y),a=e("BAh9"),x=e("vtG9"),u=e.n(x),p=e("9kvl"),I=e("nKUr"),o=e.n(I),$=function(d){var M=d.value,A=d.onChange,j=d.directory,X=j===void 0?"/wysiwyg":j,L=Object(p.i)();return Object(I.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(I.jsx)(U.a,{uploadImage:function(){var Y=Object(N.a)(P.a.mark(function z(ue){var ee,f;return P.a.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,Object(a.e)(ue,X);case 2:if(ee=Q.sent,!ee.success){Q.next=6;break}return f=ee.data[0].name.includes("/")?ee.data[0].name:"".concat(X).concat(ee.data[0].name),Q.abrupt("return",Object(a.d)(f,1e3));case 6:throw new Error("Error while uploading");case 7:case"end":return Q.stop()}},z)}));return function(z){return Y.apply(this,arguments)}}(),defaultValue:M||"",onChange:function(z){return A&&A(z())},placeholder:L.formatMessage({id:"wysiwyg_placeholder"})})})};T.a=$},lLVY:function(ae,T,e){},vtG9:function(ae,T,e){}}]);
