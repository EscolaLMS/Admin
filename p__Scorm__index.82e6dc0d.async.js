"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5036],{16894:function(y,f,e){var g=e(72717);f.ZP=g.Z},29477:function(y,f,e){var g=e(97857),l=e.n(g),D=e(5574),E=e.n(D),x=e(55523),O=e(75842),M=e(21974),P=e(67294),_=e(80854),j=e(85893);function c(n){var v=n.onChange,r=n.onUpload,o=n.url,i=n.name,S=n.extra,a=n.accept,b=n.data,T=n.wrapInForm,K=T===void 0?!0:T,R=n.title,Z=n.formProps,C=n.maxFiles,B=n.clearListAfterUpload,F=n.hideLabel,W=n.disabled,w=n.showUploadList,I=(0,P.useState)(),s=E()(I,2),u=s[0],A=s[1],d=(0,_.useIntl)();return b&&b[i]&&delete b[i],(0,j.jsx)(M.Z,{condition:K,wrap:function(t){return(0,j.jsx)(O.Z,l()(l()({},Z),{},{children:t}))},children:(0,j.jsx)(x.Z,{title:R||" ".concat(d.formatMessage({id:"upload_click_here"})),placeholder:d.formatMessage({id:"upload_click_here"}),label:!F&&(0,j.jsx)(_.FormattedMessage,{id:"upload"}),max:C!=null?C:2,fieldProps:{data:b,accept:a,name:i,showUploadList:w,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))},onChange:function(t){A(t),v&&v(t),t.file.status==="done"&&(r&&r(t.file.response),B&&A(void 0))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(o),extra:S,fileList:u==null?void 0:u.fileList,disabled:W})})}f.Z=c},55045:function(y,f,e){e.r(f),e.d(f,{default:function(){return w}});var g=e(15009),l=e.n(g),D=e(99289),E=e.n(D),x=e(74453),O=e(16894),M=e(2453),P=e(83062),_=e(14726),j=e(86738),c=e(67294),n=e(80854),v=e(29477),r=e(85893),o=function(s){var u=s.onSuccess,A=s.onError,d=s.hideLabel;return(0,r.jsx)(v.Z,{url:"/api/admin/scorm/upload",name:"zip",accept:"application/zip",hideLabel:d,onChange:function(t){if(!(!t.file.response||t.file.status!=="done")){var m=t.file.response;if(!m.success){A(m);return}u(m.data.model)}}})},i=o,S=e(9649),a=e(1413),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"},T=b,K=e(84089),R=function(s,u){return c.createElement(K.Z,(0,a.Z)((0,a.Z)({},s),{},{ref:u,icon:T}))},Z=c.forwardRef(R),C=Z,B=e(82061),F=function(){var I=E()(l()().mark(function s(u){return l()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,S.NK)(u);case 2:return d.abrupt("return",!0);case 3:case"end":return d.stop()}},s)}));return function(u){return I.apply(this,arguments)}}(),W=function(){var s=(0,c.useRef)(),u=(0,n.useIntl)(),A=[{title:(0,r.jsx)(n.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:(0,r.jsx)(n.FormattedMessage,{id:"version",defaultMessage:"version"}),dataIndex:"version",hideInSearch:!0,sorter:!0},{title:(0,r.jsx)(n.FormattedMessage,{id:"newScorm",defaultMessage:"New Scorm"}),dataIndex:"upload",hideInSearch:!1,hideInTable:!0,renderFormItem:function(){return[(0,r.jsx)(i,{hideLabel:!0,onSuccess:function(){s.current&&s.current.reload(),M.ZP.success(u.formatMessage({id:"scorm_uploaded",defaultMessage:"Scorm uploaded"}))},onError:function(t){return M.ZP.error(t.message||t.toString())}},"upload")]}},{title:(0,r.jsx)(n.FormattedMessage,{id:"SCOS",defaultMessage:"Sharable Content Objects"}),dataIndex:"SCOS",hideInSearch:!0,render:function(p,t){return[t.scos.map(function(m){return(0,r.jsx)(n.Link,{to:"/courses/scorms/preview/".concat(m.uuid),children:(0,r.jsxs)(P.Z,{title:(0,r.jsx)(n.FormattedMessage,{id:"preview",defaultMessage:"preview"}),children:[(0,r.jsx)(_.ZP,{size:"small",icon:(0,r.jsx)(C,{}),type:"primary",children:m.title})," "]})},m.uuid)})]}},{hideInSearch:!0,title:(0,r.jsx)(n.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(p,t){return[(0,r.jsx)(j.Z,{title:(0,r.jsx)(n.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:E()(l()().mark(function m(){var U;return l()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,F(t.id);case 2:U=h.sent,U&&s.current&&s.current.reload();case 4:case"end":return h.stop()}},m)})),okText:(0,r.jsx)(n.FormattedMessage,{id:"yes",defaultMessage:"Yes"}),cancelText:(0,r.jsx)(n.FormattedMessage,{id:"no",defaultMessage:"No"}),children:(0,r.jsx)(P.Z,{title:(0,r.jsx)(n.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,r.jsx)(_.ZP,{type:"primary",icon:(0,r.jsx)(B.Z,{}),danger:!0})})},"delete")]}}];return(0,r.jsx)(x._z,{children:(0,r.jsx)(O.ZP,{headerTitle:u.formatMessage({id:"menu.Courses.SCORMs",defaultMessage:"scorms"}),actionRef:s,rowKey:"id",search:{layout:"vertical"},request:function(p,t){var m=p.pageSize,U=p.current,L=t&&Object.entries(t)[0];return(0,S.JZ)({per_page:m,page:U,order_by:L&&L[0],order:L?L[1]==="ascend"?"ASC":"DESC":void 0}).then(function(h){return h.success?{data:h.data.data,total:h.data.total,success:!0}:[]})},columns:A})})},w=W},9649:function(y,f,e){e.d(f,{JZ:function(){return P},NK:function(){return n}});var g=e(15009),l=e.n(g),D=e(97857),E=e.n(D),x=e(99289),O=e.n(x),M=e(80854);function P(r,o){return _.apply(this,arguments)}function _(){return _=O()(l()().mark(function r(o,i){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,M.request)("/api/admin/scorm",E()({params:o,method:"GET",useCache:!1},i||{})));case 1:case"end":return a.stop()}},r)})),_.apply(this,arguments)}function j(r,o){return c.apply(this,arguments)}function c(){return c=_asyncToGenerator(_regeneratorRuntime().mark(function r(o,i){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",request("/api/admin/scorm/scos",_objectSpread({params:_objectSpread(_objectSpread({},o),{},{per_page:o.pageSize,page:o.current}),method:"GET",useCache:!1},i||{})));case 1:case"end":return a.stop()}},r)})),c.apply(this,arguments)}function n(r,o){return v.apply(this,arguments)}function v(){return v=O()(l()().mark(function r(o,i){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,M.request)("/api/admin/scorm/".concat(o),E()({method:"DELETE"},i||{})));case 1:case"end":return a.stop()}},r)})),v.apply(this,arguments)}}}]);
