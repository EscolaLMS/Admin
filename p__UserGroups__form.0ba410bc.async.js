(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{"2ult":function(Y,f,e){"use strict";var M=e("OaEy"),O=e("2fM7"),w=e("T2oS"),i=e("W9HT"),p=e("oBTY"),L=e("tJVT"),d=e("q1tI"),N=e.n(d),W=e("ri8c"),y=e("9kvl"),P=e("nKUr"),z=e.n(P),l=function(T){var A=T.value,g=T.onChange,j=T.multiple,R=j===void 0?!1:j,a=Object(d.useState)([]),t=Object(L.a)(a,2),_=t[0],E=t[1],r=Object(d.useState)(!1),o=Object(L.a)(r,2),b=o[0],S=o[1],J=Object(d.useRef)(),K=Object(d.useRef)(),B=Object(d.useCallback)(function(c){E(function(C){return[].concat(Object(p.a)(C),Object(p.a)(c)).filter(function(u,v,G){return G.findIndex(function(V){return V.id===u.id})===v})})},[]);Object(d.useEffect)(function(){J.current=_},[_]);var n=Object(d.useCallback)(function(c){S(!0),K.current&&K.current.abort(),K.current=new AbortController,Object(W.g)({search:c},{signal:K.current.signal}).then(function(C){C.success&&B(C.data),S(!1)}).catch(function(){return S(!1)})},[B]),Q=Object(d.useCallback)(function(c){n(c)},[n]);return Object(d.useEffect)(function(){var c=new AbortController;if(A){var C=Array.isArray(A)?A:[A];C.filter(function(u){var v;return!((v=J.current)!==null&&v!==void 0&&v.find(function(G){return G.id===u}))}).forEach(function(u){Object(W.f)(Number(u),{signal:c.signal}).then(function(v){v&&v.success&&B([v.data])})})}return function(){c.abort()}},[A,B]),Object(P.jsx)(O.a,{onFocus:function(){return n()},allowClear:!0,style:{width:"100%"},value:A,onChange:g,mode:R?"multiple":void 0,showSearch:!0,onSearch:Q,placeholder:Object(P.jsx)(y.a,{id:"select_user_group",defaultMessage:"Select user group"}),optionFilterProp:"children",filterOption:function(C,u){return(u==null?void 0:u.children.toLowerCase().indexOf(C.toLowerCase()))>=0},notFoundContent:b?Object(P.jsx)(i.a,{size:"small"}):null,children:_.map(function(c){return Object(P.jsx)(O.a.Option,{value:c.id,children:c.name_with_breadcrumbs},c.id)})})};f.a=l},UNho:function(Y,f,e){"use strict";e.r(f);var M=e("Mwp2"),O=e("VXEj"),w=e("+L6B"),i=e("2/Rp"),p=e("/zsF"),L=e("PArb"),d=e("tU7J"),N=e("wFql"),W=e("T2oS"),y=e("W9HT"),P=e("miYZ"),z=e("tsqr"),l=e("k1fw"),x=e("9og8"),T=e("tJVT"),A=e("WmNS"),g=e.n(A),j=e("q1tI"),R=e.n(j),a=e("VMEa"),t=e("Qurx"),_=e("F/zT"),E=e("nhC9"),r=e("ri8c"),o=e("tMyG"),b=e("9kvl"),S=e("Ty5D"),J=e("/MfK"),K=e("0WSk"),B=e("2ult"),n=e("nKUr"),Q=e.n(n);f.default=function(){var c=Object(b.i)(),C=Object(S.h)(),u=C.group,v=u==="new",G=Object(j.useState)(),V=Object(T.a)(G,2),I=V[0],F=V[1],X=Object(j.useCallback)(Object(x.a)(g.a.mark(function h(){var s;return g.a.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,Object(r.f)(Number(u));case 2:s=D.sent,s.success&&F(Object(l.a)({},s.data));case 4:case"end":return D.stop()}},h)})),[u]),Z=Object(j.useCallback)(function(h){F(function(s){var m;return Object(l.a)(Object(l.a)({},s),{},{users:s?s==null||(m=s.users)===null||m===void 0?void 0:m.filter(function(D){return D.id!==h}):[]})}),Object(r.d)(Number(u),h).then(function(s){s.success&&F(function(m){return Object(l.a)(Object(l.a)({},m),{},{users:s.data})})})},[u]),k=Object(j.useCallback)(function(h){var s;!h||I!=null&&(s=I.users)!==null&&s!==void 0&&s.find(function(m){return m.id===h})||Object(r.a)(Number(u),h).then(function(m){m.success&&F(function(D){return Object(l.a)(Object(l.a)({},D),{},{users:m.data})})})},[I,u]);Object(j.useEffect)(function(){if(u==="new"){F({});return}X()},[u,X]);var q=Object(j.useMemo)(function(){return{onFinish:function(){var h=Object(x.a)(g.a.mark(function m(D){var $,H;return g.a.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(H=Object(l.a)({},D),u!=="new"){U.next=8;break}return U.next=4,Object(r.b)(H);case 4:$=U.sent,$.success&&b.d.push("/user_groups/".concat($.data.id)),U.next=11;break;case 8:return U.next=10,Object(r.e)(Number(u),H);case 10:$=U.sent;case 11:z.default.success($.message);case 12:case"end":return U.stop()}},m)}));function s(m){return h.apply(this,arguments)}return s}(),initialValues:I}},[I,u]);return I?Object(n.jsx)(o.a,{title:v?Object(n.jsx)(b.a,{id:"new_user_group"}):Object(n.jsx)(b.a,{id:"edit_user_group"}),children:Object(n.jsx)(E.a,{children:Object(n.jsxs)(a.a,Object(l.a)(Object(l.a)({},q),{},{children:[Object(n.jsxs)(a.a.Group,{children:[Object(n.jsx)(t.a,{width:"md",name:"name",label:Object(n.jsx)(b.a,{id:"name"}),tooltip:Object(n.jsx)(b.a,{id:"name"}),placeholder:c.formatMessage({id:"name"}),required:!0}),Object(n.jsx)(a.a.Item,{style:{minWidth:"300px"},name:"parent_id",label:Object(n.jsx)(b.a,{id:"parent_id_group",defaultMessage:"parent_id_group"}),valuePropName:"value",children:Object(n.jsx)(B.a,{})}),Object(n.jsx)(_.a,{name:"registerable",label:Object(n.jsx)(b.a,{id:"registerable"})})]}),u!=="new"&&Object(n.jsxs)(R.a.Fragment,{children:[Object(n.jsxs)(a.a.Group,{children:[Object(n.jsx)(N.a,{children:Object(n.jsx)(b.a,{id:"add_person_to_group",defaultMessage:"Add User to group"})}),Object(n.jsx)(K.a,{onChange:function(s){return k(Number(s))}})]}),Object(n.jsx)(L.a,{}),Object(n.jsx)(O.b,{size:"small",itemLayout:"horizontal",dataSource:I.users,renderItem:function(s){return Object(n.jsxs)(O.b.Item,{actions:[Object(n.jsxs)(i.a,{onClick:function(){return Z(s.id)},type:"primary",icon:Object(n.jsx)(J.a,{}),size:"small",danger:!0,children:[" ",Object(n.jsx)(b.a,{id:"delete"})]})],children:[s.first_name," ",s.last_name," ",Object(n.jsx)("small",{children:s.email})]})}})]}),Object(n.jsx)(L.a,{})]}))})}):Object(n.jsx)(y.a,{})}},ri8c:function(Y,f,e){"use strict";e.d(f,"g",function(){return L}),e.d(f,"f",function(){return N}),e.d(f,"e",function(){return y}),e.d(f,"b",function(){return z}),e.d(f,"c",function(){return x}),e.d(f,"a",function(){return A}),e.d(f,"d",function(){return j});var M=e("k1fw"),O=e("9og8"),w=e("WmNS"),i=e.n(w),p=e("9kvl");function L(a,t){return d.apply(this,arguments)}function d(){return d=Object(O.a)(i.a.mark(function a(t,_){return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(p.f)("/api/admin/user-groups",Object(M.a)({params:Object(M.a)(Object(M.a)({},t),{},{per_page:t.pageSize,page:t.current,search:t.search?t.search:void 0,parent_id:t.parent_id}),method:"GET",useCache:!1},_||{})));case 1:case"end":return r.stop()}},a)})),d.apply(this,arguments)}function N(a,t){return W.apply(this,arguments)}function W(){return W=Object(O.a)(i.a.mark(function a(t,_){return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(p.f)("/api/admin/user-groups/".concat(t),Object(M.a)({method:"GET",useCache:!1},_||{})));case 1:case"end":return r.stop()}},a)})),W.apply(this,arguments)}function y(a,t,_){return P.apply(this,arguments)}function P(){return P=Object(O.a)(i.a.mark(function a(t,_,E){return i.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(p.f)("/api/admin/user-groups/".concat(t),Object(M.a)({data:_,method:"PUT"},E||{})));case 1:case"end":return o.stop()}},a)})),P.apply(this,arguments)}function z(a,t){return l.apply(this,arguments)}function l(){return l=Object(O.a)(i.a.mark(function a(t,_){return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(p.f)("/api/admin/user-groups",Object(M.a)({data:t,method:"POST"},_||{})));case 1:case"end":return r.stop()}},a)})),l.apply(this,arguments)}function x(a,t){return T.apply(this,arguments)}function T(){return T=Object(O.a)(i.a.mark(function a(t,_){return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(p.f)("/api/admin/user-groups/".concat(t),Object(M.a)({method:"DELETE"},_||{})));case 1:case"end":return r.stop()}},a)})),T.apply(this,arguments)}function A(a,t,_){return g.apply(this,arguments)}function g(){return g=Object(O.a)(i.a.mark(function a(t,_,E){return i.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(p.f)("/api/admin/user-groups/".concat(t,"/members"),Object(M.a)({data:{user_id:_},method:"POST"},E||{})));case 1:case"end":return o.stop()}},a)})),g.apply(this,arguments)}function j(a,t,_){return R.apply(this,arguments)}function R(){return R=Object(O.a)(i.a.mark(function a(t,_,E){return i.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(p.f)("/api/admin/user-groups/".concat(t,"/members/").concat(_),Object(M.a)({method:"DELETE"},E||{})));case 1:case"end":return o.stop()}},a)})),R.apply(this,arguments)}}}]);
