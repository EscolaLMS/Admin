(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{"F/zT":function(z,b,e){"use strict";var O=e("wx14"),v=e("VTBJ"),t=e("Ff2n"),c=e("q1tI"),x=e.n(c),U=e("adzw"),D=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],I=x.a.forwardRef(function(p,M){var F=p.fieldProps,S=p.unCheckedChildren,A=p.checkedChildren,W=p.proFieldProps,R=Object(t.a)(p,D);return x.a.createElement(U.a,Object(O.a)({valueType:"switch",mode:"edit",fieldProps:Object(v.a)({unCheckedChildren:S,checkedChildren:A},F),ref:M,valuePropName:"checked",proFieldProps:W,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},R))});b.a=I},"G/Ub":function(z,b,e){"use strict";e.d(b,"d",function(){return U}),e.d(b,"a",function(){return I}),e.d(b,"b",function(){return M}),e.d(b,"c",function(){return S}),e.d(b,"e",function(){return W});var O=e("k1fw"),v=e("9og8"),t=e("WmNS"),c=e.n(t),x=e("9kvl");function U(n){return D.apply(this,arguments)}function D(){return D=Object(v.a)(c.a.mark(function n(r){return c.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",Object(x.f)("/api/admin/roles",Object(O.a)({method:"GET",useCache:!1},r||{})));case 1:case"end":return u.stop()}},n)})),D.apply(this,arguments)}function I(n,r){return p.apply(this,arguments)}function p(){return p=Object(v.a)(c.a.mark(function n(r,d){return c.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(x.f)("/api/admin/roles",Object(O.a)({method:"POST",headers:{"Content-Type":"application/json"},data:r},d||{})));case 1:case"end":return i.stop()}},n)})),p.apply(this,arguments)}function M(n,r){return F.apply(this,arguments)}function F(){return F=Object(v.a)(c.a.mark(function n(r,d){return c.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(x.f)("/api/admin/roles/".concat(r),Object(O.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},d||{})));case 1:case"end":return i.stop()}},n)})),F.apply(this,arguments)}function S(n,r){return A.apply(this,arguments)}function A(){return A=Object(v.a)(c.a.mark(function n(r,d){return c.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(x.f)("/api/admin/roles/".concat(r),Object(O.a)({method:"GET",useCache:!1},d||{})));case 1:case"end":return i.stop()}},n)})),A.apply(this,arguments)}function W(n,r,d){return R.apply(this,arguments)}function R(){return R=Object(v.a)(c.a.mark(function n(r,d,u){return c.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",Object(x.f)("/api/admin/roles/".concat(r),Object(O.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:d},u||{})));case 1:case"end":return m.stop()}},n)})),R.apply(this,arguments)}},weGn:function(z,b,e){"use strict";e.r(b);var O=e("nhC9"),v=e("Ty5D"),t=e("9kvl"),c=e("tMyG"),x=e("tU7J"),U=e("wFql"),D=e("DYRE"),I=e("zeV3"),p=e("y8nQ"),M=e("Vl3Y"),F=e("+L6B"),S=e("2/Rp"),A=e("T2oS"),W=e("W9HT"),R=e("miYZ"),n=e("tsqr"),r=e("k1fw"),d=e("9og8"),u=e("tJVT"),i=e("WmNS"),m=e.n(i),g=e("q1tI"),q=e.n(g),L=e("VMEa"),N=e("Qurx"),J=e("F/zT"),_=e("tneF"),B=e("VK58"),ee=e("DBJ/"),ae=e("Jfn2"),te=e("G/Ub"),se=e("+up7"),re=e("C8Qx"),a=e("nKUr"),ne=function(G){var K,E=G.isNew,C=Object(t.i)(),T=Object(v.h)(),f=T.user,Q=Object(g.useState)(),$=Object(u.a)(Q,2),y=$[0],w=$[1],le=Object(g.useState)(),Y=Object(u.a)(le,2),H=Y[0],ce=Y[1],de=Object(g.useState)([]),Z=Object(u.a)(de,2),ue=Z[0],oe=Z[1],je=Object(g.useState)([]),X=Object(u.a)(je,2),me=X[0],he=X[1],k=Object(g.useCallback)(Object(d.a)(m.a.mark(function o(){var s;return m.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,Object(B.k)(Number(f));case 2:s=j.sent,s.success&&w(Object(r.a)({},s.data));case 4:case"end":return j.stop()}},o)})),[f]),fe=Object(g.useCallback)(Object(d.a)(m.a.mark(function o(){var s,l;return m.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,Object(te.d)();case 2:return s=h.sent,h.next=5,s;case 5:l=h.sent,l.success&&ce(l.data);case 7:case"end":return h.stop()}},o)})),[f]),Oe=Object(g.useCallback)(Object(d.a)(m.a.mark(function o(){var s;return m.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,Object(se.a)();case 2:s=j.sent,s.success&&(oe(s.data.escola_auth.additional_fields_required.value),he(s.data.escola_auth.additional_fields.value));case 4:case"end":return j.stop()}},o)})),[]),be=function(){Object(B.c)(Number(f)).then(function(s){s.success&&(n.default.success(s.message),w(function(l){return Object(r.a)(Object(r.a)({},l),{},{avatar:"",path_avatar:""})}))}).catch(function(s){n.default.error(s.data.message)})};Object(g.useEffect)(function(){if(fe(),Oe(),E){w({});return}k()},[f,k]);var ve=Object(g.useMemo)(function(){return{onFinish:function(){var o=Object(d.a)(m.a.mark(function l(j){var h,V;return m.a.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(V=Object(r.a)({},j),!E){P.next=8;break}return P.next=4,Object(B.a)(V);case 4:h=P.sent,h.success&&t.d.push("/users/".concat(h.data.id,"/user_info")),P.next=11;break;case 8:return P.next=10,Object(B.j)(Number(f),V);case 10:h=P.sent;case 11:n.default.success(h.message);case 12:case"end":return P.stop()}},l)}));function s(l){return o.apply(this,arguments)}return s}(),initialValues:y}},[y,f]);return y?Object(a.jsxs)(L.a,Object(r.a)(Object(r.a)({},ve),{},{children:[Object(a.jsxs)(L.a.Group,{children:[Object(a.jsx)(N.a,{width:"md",name:"first_name",label:Object(a.jsx)(t.a,{id:"first_name"}),tooltip:Object(a.jsx)(t.a,{id:"first_name"}),placeholder:C.formatMessage({id:"first_name"}),required:!0}),Object(a.jsx)(N.a,{width:"md",name:"last_name",label:Object(a.jsx)(t.a,{id:"last_name"}),tooltip:Object(a.jsx)(t.a,{id:"last_name"}),placeholder:C.formatMessage({id:"last_name"}),required:!0}),Object(a.jsx)(N.a,{width:"md",name:"email",label:Object(a.jsx)(t.a,{id:"email"}),tooltip:Object(a.jsx)(t.a,{id:"email"}),placeholder:C.formatMessage({id:"email"}),required:!0}),Object(a.jsx)(N.a.Password,{width:"md",name:"password",label:Object(a.jsx)(t.a,{id:"password"}),tooltip:Object(a.jsx)(t.a,{id:"password"}),placeholder:C.formatMessage({id:"password"}),required:E}),!E&&Object(a.jsxs)(I.b,{direction:"vertical",children:[!((K=y.roles)!==null&&K!==void 0&&K.includes("admin"))&&Object(a.jsx)(J.a,{initialValue:y.is_active,name:"email_verified",label:Object(a.jsx)(t.a,{id:"is_email_verified"})}),Object(a.jsx)(M.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(s){return s.getFieldValue("email_verified")?Object(a.jsx)(q.a.Fragment,{}):Object(a.jsx)(S.a,{size:"small",onClick:function(){Object(B.f)(s.getFieldValue("email")).then(function(){n.default.success(C.formatMessage({id:"email_resend"}))})},children:Object(a.jsx)(t.a,{id:"resend"})})}})]}),Object(a.jsx)(J.a,{name:"is_active",label:Object(a.jsx)(t.a,{id:"is_active"})}),H&&Object(a.jsx)(_.a.Group,{name:"roles",layout:"horizontal",label:Object(a.jsx)(t.a,{id:"roles"}),options:H.filter(function(o){return o.guard_name!=="web"}).map(function(o){return o.name})})]}),Object(a.jsx)(re.a,{additionalFields:me,requiredFields:ue,id:y.id}),!E&&Object(a.jsxs)(L.a.Group,{children:[Object(a.jsx)(L.a.Item,{name:"avatar",label:Object(a.jsx)(t.a,{id:"avatar"}),children:y.path_avatar?Object(a.jsx)(ae.a,{path:y.path_avatar,size:600,width:200}):Object(a.jsx)(U.a,{children:Object(a.jsx)(t.a,{id:"avatar_placeholder"})})}),Object(a.jsx)(M.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ee.a,{wrapInForm:!1,url:"/api/admin/users/".concat(f,"/avatar"),name:"avatar",accept:"image/*",onChange:function(l){l.file.status==="done"&&l.file.response.success&&w(l.file.response.data)}}),Object(a.jsx)(S.a,{danger:!0,onClick:be,children:Object(a.jsx)(t.a,{id:"delete"})})]})}})]})]})):Object(a.jsx)(W.a,{})},ie=e("5ddx"),pe=b.default=function(){var G=Object(v.h)(),K=Object(t.i)(),E=G.tab,C=E===void 0?"user_info":E,T=G.user,f=typeof T=="undefined";return Object(a.jsx)(c.a,{title:Object(a.jsx)(t.a,{id:"settings"}),header:{breadcrumb:{routes:[{path:"/users/".concat(T,"/user_info"),breadcrumbName:K.formatMessage({id:"menu.Settings"})},{path:String(C),breadcrumbName:String(C)}]}},children:Object(a.jsxs)(O.a,{tabs:{type:"card",activeKey:C,onChange:function($){return t.d.push("/users/".concat(T,"/").concat($))}},children:[Object(a.jsx)(O.a.TabPane,{tab:f?Object(a.jsx)(t.a,{id:"new_user"}):Object(a.jsx)(t.a,{id:"edit_user"}),children:Object(a.jsx)(ne,{isNew:f})},"user_info"),!f&&Object(a.jsx)(O.a.TabPane,{tab:Object(a.jsx)("span",{children:Object(a.jsx)(t.a,{id:"user.settings"})}),children:T&&Object(a.jsx)(ie.a,{user:T,isProfile:!1})},"settings")]})})}}}]);
