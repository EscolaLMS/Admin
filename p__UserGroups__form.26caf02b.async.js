(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{"2ult":function(Y,j,e){"use strict";var M=e("OaEy"),E=e("2fM7"),w=e("T2oS"),i=e("W9HT"),D=e("oBTY"),L=e("tJVT"),d=e("q1tI"),$=e.n(d),W=e("ri8c"),y=e("9kvl"),p=e("nKUr"),z=e.n(p),l=function(T){var A=T.value,g=T.onChange,b=T.multiple,R=b===void 0?!1:b,a=Object(d.useState)([]),t=Object(L.a)(a,2),_=t[0],f=t[1],r=Object(d.useState)(!1),o=Object(L.a)(r,2),h=o[0],S=o[1],J=Object(d.useRef)(),K=Object(d.useRef)(),B=Object(d.useCallback)(function(c){f(function(C){return[].concat(Object(D.a)(C),Object(D.a)(c)).filter(function(s,m,G){return G.findIndex(function(V){return V.id===s.id})===m})})},[]);Object(d.useEffect)(function(){J.current=_},[_]);var n=Object(d.useCallback)(function(c){S(!0),K.current&&K.current.abort(),K.current=new AbortController,Object(W.g)({search:c},{signal:K.current.signal}).then(function(C){C.success&&B(C.data),S(!1)}).catch(function(){return S(!1)})},[B]),Q=Object(d.useCallback)(function(c){n(c)},[n]);return Object(d.useEffect)(function(){var c=new AbortController;if(A){var C=Array.isArray(A)?A:[A];C.filter(function(s){var m;return!((m=J.current)!==null&&m!==void 0&&m.find(function(G){return G.id===s}))}).forEach(function(s){Object(W.f)(Number(s),{signal:c.signal}).then(function(m){m&&m.success&&B([m.data])})})}return function(){c.abort()}},[A,B]),Object(p.jsx)(E.a,{onFocus:function(){return n()},allowClear:!0,style:{width:"100%"},value:A,onChange:g,mode:R?"multiple":void 0,showSearch:!0,onSearch:Q,placeholder:Object(p.jsx)(y.a,{id:"select_user_group",defaultMessage:"Select user group"}),optionFilterProp:"children",filterOption:function(C,s){if(s&&s.children){var m;return(s==null||(m=s.children)===null||m===void 0?void 0:m.toString().toLowerCase().indexOf(C.toLowerCase()))>=0}return!0},notFoundContent:h?Object(p.jsx)(i.a,{size:"small"}):null,children:_.map(function(c){return Object(p.jsx)(E.a.Option,{value:c.id,children:c.name_with_breadcrumbs},c.id)})})};j.a=l},UNho:function(Y,j,e){"use strict";e.r(j);var M=e("Mwp2"),E=e("VXEj"),w=e("+L6B"),i=e("2/Rp"),D=e("/zsF"),L=e("PArb"),d=e("tU7J"),$=e("wFql"),W=e("T2oS"),y=e("W9HT"),p=e("miYZ"),z=e("tsqr"),l=e("k1fw"),x=e("9og8"),T=e("tJVT"),A=e("WmNS"),g=e.n(A),b=e("q1tI"),R=e.n(b),a=e("VMEa"),t=e("Qurx"),_=e("F/zT"),f=e("nhC9"),r=e("ri8c"),o=e("tMyG"),h=e("9kvl"),S=e("Ty5D"),J=e("/MfK"),K=e("0WSk"),B=e("2ult"),n=e("nKUr"),Q=e.n(n);j.default=function(){var c=Object(h.i)(),C=Object(S.l)(),s=C.group,m=s==="new",G=Object(b.useState)(),V=Object(T.a)(G,2),I=V[0],F=V[1],X=Object(b.useCallback)(Object(x.a)(g.a.mark(function v(){var u;return g.a.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,Object(r.f)(Number(s));case 2:u=P.sent,u.success&&F(Object(l.a)({},u.data));case 4:case"end":return P.stop()}},v)})),[s]),Z=Object(b.useCallback)(function(v){F(function(u){var O;return Object(l.a)(Object(l.a)({},u),{},{users:u?u==null||(O=u.users)===null||O===void 0?void 0:O.filter(function(P){return P.id!==v}):[]})}),Object(r.d)(Number(s),v).then(function(u){u.success&&F(function(O){return Object(l.a)(Object(l.a)({},O),{},{users:u.data})})})},[s]),k=Object(b.useCallback)(function(v){var u;!v||I!=null&&(u=I.users)!==null&&u!==void 0&&u.find(function(O){return O.id===v})||Object(r.a)(Number(s),v).then(function(O){O.success&&F(function(P){return Object(l.a)(Object(l.a)({},P),{},{users:O.data})})})},[I,s]);Object(b.useEffect)(function(){if(s==="new"){F({});return}X()},[s,X]);var q=Object(b.useMemo)(function(){return{onFinish:function(){var v=Object(x.a)(g.a.mark(function O(P){var N,H;return g.a.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(H=Object(l.a)({},P),s!=="new"){U.next=8;break}return U.next=4,Object(r.b)(H);case 4:N=U.sent,N.success&&h.d.push("/user_groups/".concat(N.data.id)),U.next=11;break;case 8:return U.next=10,Object(r.e)(Number(s),H);case 10:N=U.sent;case 11:z.default.success(N.message);case 12:case"end":return U.stop()}},O)}));function u(O){return v.apply(this,arguments)}return u}(),initialValues:I}},[I,s]);return I?Object(n.jsx)(o.a,{title:m?Object(n.jsx)(h.a,{id:"new_user_group"}):Object(n.jsx)(h.a,{id:"edit_user_group"}),children:Object(n.jsx)(f.a,{children:Object(n.jsxs)(a.a,Object(l.a)(Object(l.a)({},q),{},{children:[Object(n.jsxs)(a.a.Group,{children:[Object(n.jsx)(t.a,{width:"md",name:"name",label:Object(n.jsx)(h.a,{id:"name"}),tooltip:Object(n.jsx)(h.a,{id:"name"}),placeholder:c.formatMessage({id:"name"}),required:!0}),Object(n.jsx)(a.a.Item,{style:{minWidth:"300px"},name:"parent_id",label:Object(n.jsx)(h.a,{id:"parent_id_group",defaultMessage:"parent_id_group"}),valuePropName:"value",children:Object(n.jsx)(B.a,{})}),Object(n.jsx)(_.a,{name:"registerable",label:Object(n.jsx)(h.a,{id:"registerable"})})]}),s!=="new"&&Object(n.jsxs)(R.a.Fragment,{children:[Object(n.jsxs)(a.a.Group,{children:[Object(n.jsx)($.a,{children:Object(n.jsx)(h.a,{id:"add_person_to_group",defaultMessage:"Add User to group"})}),Object(n.jsx)(K.a,{onChange:function(u){return k(Number(u))}})]}),Object(n.jsx)(L.a,{}),Object(n.jsx)(E.b,{size:"small",itemLayout:"horizontal",dataSource:I.users,renderItem:function(u){return Object(n.jsxs)(E.b.Item,{actions:[Object(n.jsxs)(i.a,{onClick:function(){return Z(u.id)},type:"primary",icon:Object(n.jsx)(J.a,{}),size:"small",danger:!0,children:[" ",Object(n.jsx)(h.a,{id:"delete"})]})],children:[u.first_name," ",u.last_name," ",Object(n.jsx)("small",{children:u.email})]})}})]}),Object(n.jsx)(L.a,{})]}))})}):Object(n.jsx)(y.a,{})}},ri8c:function(Y,j,e){"use strict";e.d(j,"g",function(){return L}),e.d(j,"f",function(){return $}),e.d(j,"e",function(){return y}),e.d(j,"b",function(){return z}),e.d(j,"c",function(){return x}),e.d(j,"a",function(){return A}),e.d(j,"d",function(){return b});var M=e("k1fw"),E=e("9og8"),w=e("WmNS"),i=e.n(w),D=e("9kvl");function L(a,t){return d.apply(this,arguments)}function d(){return d=Object(E.a)(i.a.mark(function a(t,_){return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(D.f)("/api/admin/user-groups",Object(M.a)({params:Object(M.a)(Object(M.a)({},t),{},{per_page:t.pageSize,page:t.current,search:t.search?t.search:void 0,parent_id:t.parent_id}),method:"GET",useCache:!1},_||{})));case 1:case"end":return r.stop()}},a)})),d.apply(this,arguments)}function $(a,t){return W.apply(this,arguments)}function W(){return W=Object(E.a)(i.a.mark(function a(t,_){return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(D.f)("/api/admin/user-groups/".concat(t),Object(M.a)({method:"GET",useCache:!1},_||{})));case 1:case"end":return r.stop()}},a)})),W.apply(this,arguments)}function y(a,t,_){return p.apply(this,arguments)}function p(){return p=Object(E.a)(i.a.mark(function a(t,_,f){return i.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(D.f)("/api/admin/user-groups/".concat(t),Object(M.a)({data:_,method:"PUT"},f||{})));case 1:case"end":return o.stop()}},a)})),p.apply(this,arguments)}function z(a,t){return l.apply(this,arguments)}function l(){return l=Object(E.a)(i.a.mark(function a(t,_){return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(D.f)("/api/admin/user-groups",Object(M.a)({data:t,method:"POST"},_||{})));case 1:case"end":return r.stop()}},a)})),l.apply(this,arguments)}function x(a,t){return T.apply(this,arguments)}function T(){return T=Object(E.a)(i.a.mark(function a(t,_){return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(D.f)("/api/admin/user-groups/".concat(t),Object(M.a)({method:"DELETE"},_||{})));case 1:case"end":return r.stop()}},a)})),T.apply(this,arguments)}function A(a,t,_){return g.apply(this,arguments)}function g(){return g=Object(E.a)(i.a.mark(function a(t,_,f){return i.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(D.f)("/api/admin/user-groups/".concat(t,"/members"),Object(M.a)({data:{user_id:_},method:"POST"},f||{})));case 1:case"end":return o.stop()}},a)})),g.apply(this,arguments)}function b(a,t,_){return R.apply(this,arguments)}function R(){return R=Object(E.a)(i.a.mark(function a(t,_,f){return i.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(D.f)("/api/admin/user-groups/".concat(t,"/members/").concat(_),Object(M.a)({method:"DELETE"},f||{})));case 1:case"end":return o.stop()}},a)})),R.apply(this,arguments)}}}]);
