(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"5YLw":function(G,p,e){"use strict";var O=e("DBJ/"),f=e("q1tI"),g=e.n(f),c=e("nKUr"),B=e.n(c),j=function(M){var E=M.onSuccess,b=M.onError,x=M.hideLabel;return Object(c.jsx)(O.a,{url:"/api/admin/hh5p/content/upload",name:"h5p_file",accept:".h5p",hideLabel:x,onChange:function(r){r.file.status==="done"&&r.file.response&&E(r.file.response),r.file.status==="error"&&b()}})};p.a=j},"DBJ/":function(G,p,e){"use strict";var O=e("k1fw"),f=e("y8nQ"),g=e("Vl3Y"),c=e("tJVT"),B=e("etVw"),j=e("q1tI"),C=e.n(j),M=e("9kvl"),E=e("qFDU"),b=e("nKUr"),x=e.n(b);function L(r){var U=r.onChange,a=r.onUpload,v=r.url,d=r.name,l=r.extra,u=r.accept,o=r.data,s=r.wrapInForm,I=s===void 0?!0:s,S=r.title,$=r.formProps,t=r.maxFiles,F=r.clearListAfterUpload,z=r.hideLabel,J=Object(j.useState)(),w=Object(c.a)(J,2),K=w[0],H=w[1],P=Object(M.l)();return o&&o[d]&&delete o[d],Object(b.jsx)(E.a,{condition:I,wrap:function(T){return Object(b.jsx)(g.a,Object(O.a)(Object(O.a)({},$),{},{children:T}))},children:Object(b.jsx)(B.a,{title:S||" ".concat(P.formatMessage({id:"upload_click_here"})),placeholder:P.formatMessage({id:"upload_click_here"}),onChange:function(T){H(T),U&&U(T),T.file.status==="done"&&(a&&a(T.file.response),F&&H(void 0))},label:!z&&Object(b.jsx)(M.a,{id:"upload"}),max:t!=null?t:2,fieldProps:{data:o,accept:u,name:d,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(v),extra:l,fileList:K==null?void 0:K.fileList})})}p.a=L},Unir:function(G,p,e){"use strict";e.r(p);var O=e("P2fV"),f=e("NJEC"),g=e("5Dmo"),c=e("3S7+"),B=e("+L6B"),j=e("2/Rp"),C=e("qLMh"),M=e("miYZ"),E=e("tsqr"),b=e("9og8"),x=e("tJVT"),L=e("xvlK"),r=e("q1tI"),U=e.n(r),a=e("9kvl"),v=e("55Ip"),d=e("tMyG"),l=e("Qiat"),u=e("nzng"),o=e("G3dp"),s=e("/MfK"),I=e("2PG1"),S=e("4KAj"),$=e("5YLw"),t=e("nKUr"),F=e.n(t),z=function(){var w=Object(r.useState)(!1),K=Object(x.a)(w,2),H=K[0],P=K[1],R=Object(r.useRef)(),T=Object(a.l)(),Y=Object(r.useCallback)(function(){var m=Object(b.a)(Object(C.a)().mark(function i(n){var D,A;return Object(C.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return P(!0),D=E.b.loading(Object(t.jsx)(a.a,{id:"loading",defaultMessage:"loading"})),_.prev=2,_.next=5,Object(u.e)(n);case 5:return D(),E.b.success(Object(t.jsx)(a.a,{id:"success",defaultMessage:"success"})),P(!1),(A=R.current)===null||A===void 0||A.reload(),_.abrupt("return",!0);case 12:return _.prev=12,_.t0=_.catch(2),D(),E.b.error(Object(t.jsx)(a.a,{id:"error",defaultMessage:"error"})),P(!1),_.abrupt("return",!1);case 18:case"end":return _.stop()}},i,null,[[2,12]])}));return function(i){return m.apply(this,arguments)}}(),[R]),N=Object(r.useCallback)(function(){var m=Object(b.a)(Object(C.a)().mark(function i(n,D){var A,y,_,V,W;return Object(C.a)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return P(!0),A=E.b.loading(Object(t.jsx)(a.a,{id:"loading",defaultMessage:"loading"})),h.prev=2,h.next=5,fetch("".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/admin/hh5p/content/").concat(n,"/export"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}});case 5:if(y=h.sent,y.ok){h.next=8;break}throw Error("Error occured");case 8:return A(),P(!1),E.b.success(Object(t.jsx)(a.a,{id:"downloading",defaultMessage:"Downloading"})),h.next=13,y.blob();case 13:_=h.sent,V=window.URL.createObjectURL(_),W=document.createElement("a"),W.href=V,W.download="".concat(D.split(" ").join("-").toLocaleLowerCase()),W.click(),W.remove(),h.next=28;break;case 22:return h.prev=22,h.t0=h.catch(2),A(),P(!1),E.b.error(Object(t.jsx)(a.a,{id:"cant-download-file",defaultMessage:"Can't download file"})),h.abrupt("return");case 28:case"end":return h.stop()}},i,null,[[2,22]])}));return function(i,n){return m.apply(this,arguments)}}(),[]),Q=[{title:Object(t.jsx)(a.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",sorter:!0,search:!1},{title:Object(t.jsx)(a.a,{id:"newH5P",defaultMessage:"newH5P"}),dataIndex:"upload",hideInSearch:!1,hideInTable:!0,renderFormItem:function(){return[Object(t.jsx)($.a,{hideLabel:!0,onSuccess:function(){R.current&&R.current.reload(),E.b.success(Object(t.jsx)(a.a,{id:"H5P_uploaded",defaultMessage:"new H5P uploaded successfully"}))},onError:function(){return E.b.error(Object(t.jsx)(a.a,{id:"error",defaultMessage:"error"}))}},"upload")]}},{title:Object(t.jsx)(a.a,{id:"title",defaultMessage:"title"}),dataIndex:"title",sorter:function(i,n){return i.title.length-n.title.length},render:function(i,n){return n.title}},{title:Object(t.jsx)(a.a,{id:"library",defaultMessage:"library"}),dataIndex:"library",sorter:function(i,n){return i.library.title.length-n.library.title.length},search:!1,render:function(i,n){return n.library.title}},{title:Object(t.jsx)(a.a,{id:"library_id",defaultMessage:"library_id"}),dataIndex:"library_id",sorter:function(i,n){return i.library.id-n.library.id},render:function(i,n){return n.library.id}},{title:Object(t.jsx)(a.a,{id:"count_h5p",defaultMessage:"count_h5p"}),dataIndex:"count_h5p",sorter:function(i,n){return i.count_h5p-n.count_h5p},search:!1,render:function(i,n){return n.count_h5p}},{title:Object(t.jsx)(a.a,{id:"options",defaultMessage:"options"}),dataIndex:"option",valueType:"option",render:function(i,n){return[Object(t.jsx)(v.a,{to:"/courses/h5ps/".concat(n.id),children:Object(t.jsx)(c.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(j.a,{type:"primary",icon:Object(t.jsx)(o.a,{})})})},"edit"),Object(t.jsx)(f.a,{disabled:n.count_h5p!==0,title:Object(t.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:function(){return n.id&&Y(n.id)},okText:Object(t.jsx)(a.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(a.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(c.a,{title:Object(t.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(j.a,{disabled:n.count_h5p!==0,type:"primary",icon:Object(t.jsx)(s.a,{}),danger:!0})})},"delete"),Object(t.jsx)(v.a,{to:"/courses/h5ps/preview/".concat(n.id),children:Object(t.jsx)(c.a,{title:Object(t.jsx)(a.a,{id:"preview",defaultMessage:"preview"}),children:Object(t.jsx)(j.a,{icon:Object(t.jsx)(I.a,{})})})},"preview"),Object(t.jsx)(c.a,{title:Object(t.jsx)(a.a,{id:"export",defaultMessage:"export"}),children:Object(t.jsx)(j.a,{icon:Object(t.jsx)(S.a,{}),onClick:function(){return N(n.id,n.title)}})},"export")]}}];return Object(t.jsx)(d.a,{children:Object(t.jsx)(l.a,{loading:H,headerTitle:T.formatMessage({id:"menu.Courses.H5Ps",defaultMessage:"H5Ps List"}),actionRef:R,rowKey:"id",search:{layout:"vertical"},toolBarRender:function(){return[Object(t.jsx)(v.a,{to:"/courses/h5ps/new",children:Object(t.jsxs)(j.a,{type:"primary",children:[Object(t.jsx)(L.a,{})," ",Object(t.jsx)(a.a,{id:"new",defaultMessage:"new"})]},"primary")},"new")]},request:function(i){var n=i.pageSize,D=i.current,A=i.title,y=i.library_id;return P(!0),Object(u.d)({title:A,library_id:y,pageSize:n,current:D}).then(function(_){return P(!1),_.success?{data:_.data,total:_.meta.total,success:!0}:[]})},columns:Q})})};p.default=z},nzng:function(G,p,e){"use strict";e.d(p,"d",function(){return B}),e.d(p,"c",function(){return E}),e.d(p,"b",function(){return b}),e.d(p,"f",function(){return x}),e.d(p,"e",function(){return r}),e.d(p,"a",function(){return a});var O=e("qLMh"),f=e("k1fw"),g=e("9og8"),c=e("9kvl");function B(d,l){return j.apply(this,arguments)}function j(){return j=Object(g.a)(Object(O.a)().mark(function d(l,u){return Object(O.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(c.i)("/api/admin/hh5p/content",Object(f.a)({method:"GET",params:Object(f.a)(Object(f.a)({},l),{},{per_page:l.pageSize,page:l.current})},u||{})));case 1:case"end":return s.stop()}},d)})),j.apply(this,arguments)}function C(d,l){return M.apply(this,arguments)}function M(){return M=Object(g.a)(Object(O.a)().mark(function d(l,u){return Object(O.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(c.i)("/api/admin/hh5p/content/".concat(l),Object(f.a)({method:"GET"},u||{})));case 1:case"end":return s.stop()}},d)})),M.apply(this,arguments)}var E=function(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en",o=arguments.length>2?arguments[2]:void 0,s=l?"/api/admin/hh5p/editor/".concat(l):"/api/admin/hh5p/editor";return s=u?"".concat(s,"?lang=").concat(u):s,Object(c.i)(s,Object(f.a)({method:"GET"},o||{}))},b=function(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en",o=arguments.length>2?arguments[2]:void 0,s="/api/admin/hh5p/content/".concat(l);return s=u?"".concat(s,"?lang=").concat(u):s,Object(c.i)(s,Object(f.a)({method:"GET"},o||{}))};function x(d,l,u){return L.apply(this,arguments)}function L(){return L=Object(g.a)(Object(O.a)().mark(function d(l,u,o){return Object(O.a)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",Object(c.i)(u?"/api/admin/hh5p/content/".concat(u):"/api/admin/hh5p/content",Object(f.a)({method:"POST",headers:{"Content-Type":"application/json"},data:l},o||{})));case 1:case"end":return I.stop()}},d)})),L.apply(this,arguments)}function r(d){return U.apply(this,arguments)}function U(){return U=Object(g.a)(Object(O.a)().mark(function d(l){return Object(O.a)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(c.i)("/api/admin/hh5p/content/".concat(l),{method:"DELETE"}));case 1:case"end":return o.stop()}},d)})),U.apply(this,arguments)}function a(d){return v.apply(this,arguments)}function v(){return v=Object(g.a)(Object(O.a)().mark(function d(l){return Object(O.a)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(c.i)("/api/admin/hh5p/content?per_page=0",Object(f.a)({method:"GET"},l||{})));case 1:case"end":return o.stop()}},d)})),v.apply(this,arguments)}}}]);
