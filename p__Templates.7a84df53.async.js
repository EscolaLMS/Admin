(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{"9A0E":function(K,m,e){"use strict";e.r(m),e.d(m,"channelType",function(){return v});var n=e("q1tI"),t=e("Ty5D"),s=e("9kvl"),g=e("tMyG"),j=e("nhC9"),Q=e("P2fV"),ee=e("NJEC"),ce=e("5Dmo"),R=e("3S7+"),H=e("+L6B"),te=e("2/Rp"),U=e("qLMh"),Oe=e("miYZ"),W=e("tsqr"),le=e("9og8"),X=e("tJVT"),se=e("xvlK"),C=e("G3dp"),$=e("/MfK"),T=e("55Ip"),he=e("sWYD"),w=e("Qiat"),i=e("rWUb"),c=e("mGZj"),a=e("nKUr"),h=function(L){var ie=L.templateType,fe=L.channel,k=Object(n.useRef)(),$e=Object(s.j)(),Pe=Object(n.useState)(!1),pe=Object(X.a)(Pe,2),Se=pe[0],D=pe[1],Ge=[{title:Object(a.jsx)(s.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0},{title:Object(a.jsx)(s.a,{id:"created_at",defaultMessage:"created_at"}),dataIndex:"created_at",hideInSearch:!0,render:function(G,P){return P.created_at&&Object(he.a)(new Date(P.created_at),c.a)}},{title:Object(a.jsx)(s.a,{id:"name",defaultMessage:"name"}),dataIndex:"name",hideInSearch:!0},{title:Object(a.jsx)(s.a,{id:"event",defaultMessage:"event"}),dataIndex:"event",hideInSearch:!0},{title:Object(a.jsx)(s.a,{id:"templates.is_default"}),dataIndex:"default",hideInSearch:!0,render:function(G,P){return P.default&&Object(a.jsx)(s.a,{id:"yes"})}}],Me=Object(n.useCallback)(function(){var V=Object(le.a)(Object(U.a)().mark(function G(P){var F,z;return Object(U.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return D(!0),F=W.b.loading(Object(a.jsx)(s.a,{id:"loading",defaultMessage:"loading"})),p.prev=2,p.next=5,Object(i.b)(P).then(function(ge){D(!1),ge.success&&W.b.success(ge.message)});case 5:return F(),D(!1),(z=k.current)===null||z===void 0||z.reload(),p.abrupt("return",!0);case 11:return p.prev=11,p.t0=p.catch(2),F(),W.b.error(Object(a.jsx)(s.a,{id:"error",defaultMessage:"error"})),D(!1),p.abrupt("return",!1);case 17:case"end":return p.stop()}},G,null,[[2,11]])}));return function(G){return V.apply(this,arguments)}}(),[k]);return Object(a.jsx)(w.a,{headerTitle:$e.formatMessage({id:"templates",defaultMessage:"templates"}),loading:Se,actionRef:k,rowKey:"id",search:!1,toolBarRender:function(){return[Object(a.jsx)(T.a,{to:"/configuration/templates/".concat(ie,"/new"),children:Object(a.jsxs)(te.a,{type:"primary",children:[Object(a.jsx)(se.a,{})," ",Object(a.jsx)(s.a,{id:"new",defaultMessage:"new"})]},"primary")},"new")]},request:function(G){var P=G.pageSize,F=G.current;return D(!0),Object(i.e)({pageSize:P,current:F,channel:fe}).then(function(z){return z.success?(D(!1),{data:z.data,total:z.meta.total,success:!0}):[]})},columns:[].concat(Ge,[{hideInSearch:!0,title:Object(a.jsx)(s.a,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",render:function(G,P){return[Object(a.jsx)(T.a,{to:"/configuration/templates/".concat(ie,"/").concat(P.id),children:Object(a.jsx)(R.a,{title:Object(a.jsx)(s.a,{id:"edit",defaultMessage:"edit"}),children:Object(a.jsx)(te.a,{type:"primary",icon:Object(a.jsx)(C.a,{})})})},"edit"),Object(a.jsx)(ee.a,{title:Object(a.jsx)(s.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:function(){return Me(P.id)},okText:Object(a.jsx)(s.a,{id:"yes"}),cancelText:Object(a.jsx)(s.a,{id:"no"}),children:Object(a.jsx)(R.a,{title:Object(a.jsx)(s.a,{id:"delete",defaultMessage:"delete"}),children:Object(a.jsx)(te.a,{type:"primary",icon:Object(a.jsx)($.a,{}),danger:!0})})},"delete")]}}])})},l=h,v;(function(ae){ae.email="EscolaLms\\TemplatesEmail\\Core\\EmailChannel",ae.pdf="EscolaLms\\TemplatesPdf\\Core\\PdfChannel",ae.sms="EscolaLms\\TemplatesSms\\Core\\SmsChannel"})(v||(v={}));var Re=function(){var L=Object(t.l)(),ie=L.template;return Object(a.jsx)(g.a,{children:Object(a.jsxs)(j.a,{tabs:{type:"card",activeKey:ie,onChange:function(k){return s.e.push("/configuration/templates/".concat(k))}},children:[Object(a.jsx)(j.a.TabPane,{tab:Object(a.jsx)(s.a,{id:"email"}),children:Object(a.jsx)(l,{templateType:"email",channel:v.email})},"email"),Object(a.jsx)(j.a.TabPane,{tab:Object(a.jsx)(s.a,{id:"PDF"}),children:Object(a.jsx)(l,{templateType:"pdf",channel:v.pdf})},"pdf"),Object(a.jsx)(j.a.TabPane,{disabled:!0,tab:Object(a.jsx)("span",{children:Object(a.jsx)(s.a,{id:"Push"})}),children:"Push"},"Push"),Object(a.jsx)(j.a.TabPane,{tab:Object(a.jsx)("span",{children:Object(a.jsx)(s.a,{id:"SMS"})}),children:Object(a.jsx)(l,{templateType:"sms",channel:v.sms})},"sms")]})})},M=m.default=Re},LdoY:function(K,m,e){},S76h:function(K,m,e){},VzZb:function(K,m,e){},"aK+R":function(K,m,e){},df8c:function(K,m,e){},nhC9:function(K,m,e){"use strict";var n=e("VTBJ"),t=e("nKUr"),s=e("Znn+"),g=e("ZTPi"),j=e("rePB"),Q=e("U8pU"),ee=e("ODXe"),ce=e("GNNt"),R=e("wEI+"),H=e("Ff2n"),te=e("1GLa"),U=e("TLLU"),Oe=e("UESt"),W=e("5Dmo"),le=e("3S7+"),X=e("+YFz"),se=e("TSYQ"),C=e.n(se),$=e("q1tI"),T=e.n($),he=e("LdoY"),w=function(u){var d=u.label,o=u.tooltip,S=u.ellipsis,N=u.subTitle,J=Object($.useContext)(R.a.ConfigContext),Y=J.getPrefixCls;if(!o&&!N)return Object(t.jsx)(t.Fragment,{children:d});var y=Y("pro-core-label-tip"),E=typeof o=="string"||T.a.isValidElement(o)?{title:o}:o,oe=(E==null?void 0:E.icon)||Object(t.jsx)(X.a,{});return Object(t.jsxs)("div",{className:y,onMouseDown:function(B){return B.stopPropagation()},onMouseLeave:function(B){return B.stopPropagation()},onMouseMove:function(B){return B.stopPropagation()},children:[Object(t.jsx)("div",{className:C()("".concat(y,"-title"),Object(j.a)({},"".concat(y,"-title-ellipsis"),S)),children:d}),N&&Object(t.jsx)("div",{className:"".concat(y,"-subtitle"),children:N}),o&&Object(t.jsx)(le.a,Object(n.a)(Object(n.a)({},E),{},{children:Object(t.jsx)("span",{className:"".concat(y,"-icon"),children:oe})}))]})},i=T.a.memo(w),c=e("BGR+"),a=e("6cGi"),h=e("S76h"),l=function(u){var d=u.actions,o=u.prefixCls;return Array.isArray(d)&&(d==null?void 0:d.length)?Object(t.jsx)("ul",{className:"".concat(o,"-actions"),children:d.map(function(S,N){return Object(t.jsx)("li",{style:{width:"".concat(100/d.length,"%")},children:Object(t.jsx)("span",{children:S})},"action-".concat(N))})}):d?Object(t.jsx)("ul",{className:"".concat(o,"-actions"),children:d}):null},v=l,Re=e("jCWc"),M=e("kPKH"),ae=e("14J3"),L=e("BMrR"),ie=e("aK+R"),fe=function(u){var d=u.style,o=u.prefix;return Object(t.jsxs)("div",{className:"".concat(o,"-loading-content"),style:d,children:[Object(t.jsx)(L.a,{gutter:8,children:Object(t.jsx)(M.a,{span:22,children:Object(t.jsx)("div",{className:"".concat(o,"-loading-block")})})}),Object(t.jsxs)(L.a,{gutter:8,children:[Object(t.jsx)(M.a,{span:8,children:Object(t.jsx)("div",{className:"".concat(o,"-loading-block")})}),Object(t.jsx)(M.a,{span:15,children:Object(t.jsx)("div",{className:"".concat(o,"-loading-block")})})]}),Object(t.jsxs)(L.a,{gutter:8,children:[Object(t.jsx)(M.a,{span:6,children:Object(t.jsx)("div",{className:"".concat(o,"-loading-block")})}),Object(t.jsx)(M.a,{span:18,children:Object(t.jsx)("div",{className:"".concat(o,"-loading-block")})})]}),Object(t.jsxs)(L.a,{gutter:8,children:[Object(t.jsx)(M.a,{span:13,children:Object(t.jsx)("div",{className:"".concat(o,"-loading-block")})}),Object(t.jsx)(M.a,{span:9,children:Object(t.jsx)("div",{className:"".concat(o,"-loading-block")})})]}),Object(t.jsxs)(L.a,{gutter:8,children:[Object(t.jsx)(M.a,{span:4,children:Object(t.jsx)("div",{className:"".concat(o,"-loading-block")})}),Object(t.jsx)(M.a,{span:3,children:Object(t.jsx)("div",{className:"".concat(o,"-loading-block")})}),Object(t.jsx)(M.a,{span:16,children:Object(t.jsx)("div",{className:"".concat(o,"-loading-block")})})]})]})},k=fe,$e=e("df8c"),Pe=["className","style","bodyStyle","headStyle","title","subTitle","extra","tip","wrap","layout","loading","gutter","tooltip","split","headerBordered","bordered","children","size","actions","ghost","hoverable","direction","collapsed","collapsible","collapsibleIconRender","defaultCollapsed","onCollapse","checked","onChecked","tabs","type"],pe=U.a.useBreakpoint,Se=T.a.forwardRef(function(r,u){var d,o,S,N=r.className,J=r.style,Y=r.bodyStyle,y=Y===void 0?{}:Y,E=r.headStyle,oe=E===void 0?{}:E,q=r.title,B=r.subTitle,de=r.extra,Ne=r.tip,ye=r.wrap,_e=ye===void 0?!1:ye,et=r.layout,ue=r.loading,Be=r.gutter,tt=Be===void 0?0:Be,at=r.tooltip,je=r.split,Ke=r.headerBordered,nt=Ke===void 0?!1:Ke,Ue=r.bordered,rt=Ue===void 0?!1:Ue,We=r.children,Ve=r.size,ct=r.actions,Fe=r.ghost,lt=Fe===void 0?!1:Fe,Je=r.hoverable,st=Je===void 0?!1:Je,it=r.direction,Ye=r.collapsed,Ze=r.collapsible,ot=Ze===void 0?!1:Ze,Qe=r.collapsibleIconRender,He=r.defaultCollapsed,dt=He===void 0?!1:He,ut=r.onCollapse,jt=r.checked,Ee=r.onChecked,Ie=r.tabs,Le=r.type,be=Object(H.a)(r,Pe),bt=Object($.useContext)(R.a.ConfigContext),vt=bt.getPrefixCls,Xe=pe(),mt=Object(a.a)(dt,{value:Ye,onChange:ut}),we=Object(ee.a)(mt,2),xe=we[0],Ot=we[1],Ce=["xxl","xl","lg","md","sm","xs"],ht=function(f){var O=[0,0],I=Array.isArray(f)?f:[f,0];return I.forEach(function(A,_){if(Object(Q.a)(A)==="object")for(var Z=0;Z<Ce.length;Z+=1){var me=Ce[Z];if(Xe[me]&&A[me]!==void 0){O[_]=A[me];break}}else O[_]=A||0}),O},ve=function(f,O){return f?O:{}},ft=function(f){var O=f;if(Object(Q.a)(f)==="object")for(var I=0;I<Ce.length;I+=1){var A=Ce[I];if(Xe[A]&&f[A]!==void 0){O=f[A];break}}var _=ve(typeof O=="string"&&/\d%|\dpx/i.test(O),{width:O,flexShrink:0});return{span:O,colSpanStyle:_}},b=vt("pro-card"),pt=ht(tt),ke=Object(ee.a)(pt,2),ne=ke[0],re=ke[1],De=!1,Ae=T.a.Children.toArray(We),gt=Ae.map(function(x,f){var O;if(x==null||(O=x.type)===null||O===void 0?void 0:O.isProCard){var I;De=!0;var A=x.props.colSpan,_=ft(A),Z=_.span,me=_.colSpanStyle,Tt=C()(["".concat(b,"-col")],(I={},Object(j.a)(I,"".concat(b,"-split-vertical"),je==="vertical"&&f!==Ae.length-1),Object(j.a)(I,"".concat(b,"-split-horizontal"),je==="horizontal"&&f!==Ae.length-1),Object(j.a)(I,"".concat(b,"-col-").concat(Z),typeof Z=="number"&&Z>=0&&Z<=24),I));return Object(t.jsx)("div",{style:Object(n.a)(Object(n.a)(Object(n.a)({},me),ve(ne>0,{paddingRight:ne/2,paddingLeft:ne/2})),ve(re>0,{paddingTop:re/2,paddingBottom:re/2})),className:Tt,children:T.a.cloneElement(x)},"pro-card-col-".concat((x==null?void 0:x.key)||f))}return x}),yt=C()("".concat(b),N,(d={},Object(j.a)(d,"".concat(b,"-border"),rt),Object(j.a)(d,"".concat(b,"-contain-card"),De),Object(j.a)(d,"".concat(b,"-loading"),ue),Object(j.a)(d,"".concat(b,"-split"),je==="vertical"||je==="horizontal"),Object(j.a)(d,"".concat(b,"-ghost"),lt),Object(j.a)(d,"".concat(b,"-hoverable"),st),Object(j.a)(d,"".concat(b,"-size-").concat(Ve),Ve),Object(j.a)(d,"".concat(b,"-type-").concat(Le),Le),Object(j.a)(d,"".concat(b,"-collapse"),xe),Object(j.a)(d,"".concat(b,"-checked"),jt),d)),xt=C()("".concat(b,"-body"),(o={},Object(j.a)(o,"".concat(b,"-body-center"),et==="center"),Object(j.a)(o,"".concat(b,"-body-direction-column"),je==="horizontal"||it==="column"),Object(j.a)(o,"".concat(b,"-body-wrap"),_e&&De),o)),Ct=Object(n.a)(Object(n.a)(Object(n.a)({},ve(ne>0,{marginRight:-ne/2,marginLeft:-ne/2})),ve(re>0,{marginTop:-re/2,marginBottom:-re/2})),y),qe=T.a.isValidElement(ue)?ue:Object(t.jsx)(k,{prefix:b,style:y.padding===0||y.padding==="0px"?{padding:24}:void 0}),Te=ot&&Ye===void 0&&(Qe?Qe({collapsed:xe}):Object(t.jsx)(Oe.a,{rotate:xe?void 0:90,className:"".concat(b,"-collapsible-icon")}));return Object(t.jsxs)("div",Object(n.a)(Object(n.a)({className:yt,style:J,ref:u,onClick:function(f){var O;Ee==null||Ee(f),be==null||(O=be.onClick)===null||O===void 0||O.call(be,f)}},Object(c.a)(be,["prefixCls","colSpan"])),{},{children:[(q||de||Te)&&Object(t.jsxs)("div",{className:C()("".concat(b,"-header"),(S={},Object(j.a)(S,"".concat(b,"-header-border"),nt||Le==="inner"),Object(j.a)(S,"".concat(b,"-header-collapsible"),Te),S)),style:oe,onClick:function(){Te&&Ot(!xe)},children:[Object(t.jsxs)("div",{className:"".concat(b,"-title"),children:[Te,Object(t.jsx)(i,{label:q,tooltip:at||Ne,subTitle:B})]}),de&&Object(t.jsx)("div",{className:"".concat(b,"-extra"),children:de})]}),Ie?Object(t.jsx)("div",{className:"".concat(b,"-tabs"),children:Object(t.jsx)(g.a,Object(n.a)(Object(n.a)({onChange:Ie.onChange},Ie),{},{children:ue?qe:We}))}):Object(t.jsx)("div",{className:xt,style:Ct,children:ue?qe:gt}),Object(t.jsx)(v,{actions:ct,prefixCls:b})]}))}),D=Se,Ge=e("u1OI"),Me=function(u){var d=Object($.useContext)(R.a.ConfigContext),o=d.getPrefixCls,S=o("pro-card-divider"),N=u.className,J=u.style,Y=J===void 0?{}:J,y=u.type,E=C()(S,N,Object(j.a)({},"".concat(S,"-").concat(y),y));return Object(t.jsx)("div",{className:E,style:Y})},V=Me,G=e("VzZb"),P=["key","tab","tabKey","disabled","destroyInactiveTabPane","children","className","style","cardProps"],F=function(u){var d=u.key,o=u.tab,S=u.tabKey,N=u.disabled,J=u.destroyInactiveTabPane,Y=u.children,y=u.className,E=u.style,oe=u.cardProps,q=Object(H.a)(u,P),B=Object($.useContext)(R.a.ConfigContext),de=B.getPrefixCls,Ne=de("pro-card-tabpane"),ye=C()(Ne,y);return Object(t.jsx)(g.a.TabPane,Object(n.a)(Object(n.a)({tabKey:S,tab:o,className:ye,style:E,disabled:N,destroyInactiveTabPane:J},q),{},{children:Object(t.jsx)(D,Object(n.a)(Object(n.a)({},oe),{},{children:Y}))}),d)},z=F,ze=function(u){return Object(t.jsx)(D,Object(n.a)({bodyStyle:{padding:0}},u))},p=D;p.isProCard=!0,p.Divider=V,p.TabPane=z,p.Group=ze;var ge=p,Pt=m.a=ge},rWUb:function(K,m,e){"use strict";e.d(m,"e",function(){return j}),e.d(m,"d",function(){return ee}),e.d(m,"a",function(){return R}),e.d(m,"h",function(){return te}),e.d(m,"b",function(){return Oe}),e.d(m,"i",function(){return le}),e.d(m,"c",function(){return se}),e.d(m,"f",function(){return $}),e.d(m,"g",function(){return he});var n=e("qLMh"),t=e("k1fw"),s=e("9og8"),g=e("9kvl");function j(i,c){return Q.apply(this,arguments)}function Q(){return Q=Object(s.a)(Object(n.a)().mark(function i(c,a){return Object(n.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(g.g)("/api/admin/templates",Object(t.a)({method:"GET",useCache:!1,params:Object(t.a)(Object(t.a)({},c),{},{per_page:c&&c.pageSize,page:c&&c.current})},a||{})));case 1:case"end":return l.stop()}},i)})),Q.apply(this,arguments)}function ee(i,c){return ce.apply(this,arguments)}function ce(){return ce=Object(s.a)(Object(n.a)().mark(function i(c,a){return Object(n.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(g.g)("/api/admin/templates/".concat(c),Object(t.a)({method:"GET"},a||{})));case 1:case"end":return l.stop()}},i)})),ce.apply(this,arguments)}function R(i,c){return H.apply(this,arguments)}function H(){return H=Object(s.a)(Object(n.a)().mark(function i(c,a){return Object(n.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(g.g)("/api/admin/templates",Object(t.a)({method:"POST",headers:{"Content-Type":"application/json"},data:c},a||{})));case 1:case"end":return l.stop()}},i)})),H.apply(this,arguments)}function te(i,c,a){return U.apply(this,arguments)}function U(){return U=Object(s.a)(Object(n.a)().mark(function i(c,a,h){return Object(n.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",Object(g.g)("/api/admin/templates/".concat(c),Object(t.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:a},h||{})));case 1:case"end":return v.stop()}},i)})),U.apply(this,arguments)}function Oe(i,c){return W.apply(this,arguments)}function W(){return W=Object(s.a)(Object(n.a)().mark(function i(c,a){return Object(n.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(g.g)("/api/admin/templates/".concat(c),Object(t.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},a||{})));case 1:case"end":return l.stop()}},i)})),W.apply(this,arguments)}function le(i){return X.apply(this,arguments)}function X(){return X=Object(s.a)(Object(n.a)().mark(function i(c){return Object(n.a)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",Object(g.g)("/api/admin/templates/variables",Object(t.a)({method:"GET"},c||{})));case 1:case"end":return h.stop()}},i)})),X.apply(this,arguments)}function se(i,c){return C.apply(this,arguments)}function C(){return C=Object(s.a)(Object(n.a)().mark(function i(c,a){return Object(n.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(g.g)("/api/admin/templates/".concat(c,"/preview"),Object(t.a)({method:"GET"},a||{})));case 1:case"end":return l.stop()}},i)})),C.apply(this,arguments)}function $(i,c,a){return T.apply(this,arguments)}function T(){return T=Object(s.a)(Object(n.a)().mark(function i(c,a,h){return Object(n.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",Object(g.g)("/api/admin/events/trigger-manually/".concat(c),Object(t.a)({method:"POST",headers:{"Content-Type":"application/json"},data:{users:a}},h||{})));case 1:case"end":return v.stop()}},i)})),T.apply(this,arguments)}function he(i,c,a){return w.apply(this,arguments)}function w(){return w=Object(s.a)(Object(n.a)().mark(function i(c,a,h){return Object(n.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",Object(g.g)("/api/admin/products/".concat(a,"/trigger-event-manually/").concat(c),Object(t.a)({method:"POST",headers:{"Content-Type":"application/json"}},h||{})));case 1:case"end":return v.stop()}},i)})),w.apply(this,arguments)}},u1OI:function(K,m,e){}}]);
