(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"9A0E":function(B,f,a){"use strict";a.r(f),a.d(f,"channelType",function(){return v});var y=a("q1tI"),u=a("Ty5D"),e=a("9kvl"),C=a("tMyG"),h=a("nhC9"),I=a("P2fV"),m=a("NJEC"),ae=a("5Dmo"),A=a("3S7+"),pe=a("+L6B"),P=a("2/Rp"),Z=a("WmNS"),z=a.n(Z),ue=a("miYZ"),D=a("tsqr"),te=a("9og8"),K=a("tJVT"),ne=a("xvlK"),E=a("G3dp"),re=a("/MfK"),U=a("55Ip"),L=a("sWYD"),Y=a("Qiat"),r=a("rWUb"),c=a("mGZj"),t=a("nKUr"),b=function(F){var Q=F.templateType,H=F.channel,X=Object(y.useRef)(),Oe=Object(e.i)(),ye=Object(y.useState)(!1),me=Object(K.a)(ye,2),De=me[0],R=me[1],Ce=[{title:Object(t.jsx)(e.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0},{title:Object(t.jsx)(e.a,{id:"created_at",defaultMessage:"created_at"}),dataIndex:"created_at",hideInSearch:!0,render:function(N,T){return T.created_at&&Object(L.a)(new Date(T.created_at),c.a)}},{title:Object(t.jsx)(e.a,{id:"name",defaultMessage:"name"}),dataIndex:"name",hideInSearch:!0},{title:Object(t.jsx)(e.a,{id:"event",defaultMessage:"event"}),dataIndex:"event",hideInSearch:!0},{title:Object(t.jsx)(e.a,{id:"templates.is_default"}),dataIndex:"default",hideInSearch:!0,render:function(N,T){return T.default&&Object(t.jsx)(e.a,{id:"yes"})}}],Ee=Object(y.useCallback)(function(){var x=Object(te.a)(z.a.mark(function N(T){var n,o;return z.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return R(!0),n=D.default.loading(Object(t.jsx)(e.a,{id:"loading",defaultMessage:"loading"})),l.prev=2,l.next=5,Object(r.b)(T).then(function(g){R(!1),g.success&&D.default.success(g.message)});case 5:return n(),R(!1),(o=X.current)===null||o===void 0||o.reload(),l.abrupt("return",!0);case 11:return l.prev=11,l.t0=l.catch(2),n(),D.default.error(Object(t.jsx)(e.a,{id:"error",defaultMessage:"error"})),R(!1),l.abrupt("return",!1);case 17:case"end":return l.stop()}},N,null,[[2,11]])}));return function(N){return x.apply(this,arguments)}}(),[X]);return Object(t.jsx)(Y.a,{headerTitle:Oe.formatMessage({id:"templates",defaultMessage:"templates"}),loading:De,actionRef:X,rowKey:"id",search:!1,toolBarRender:function(){return[Object(t.jsx)(U.a,{to:"/templates/".concat(Q,"/new"),children:Object(t.jsxs)(P.a,{type:"primary",children:[Object(t.jsx)(ne.a,{})," ",Object(t.jsx)(e.a,{id:"new",defaultMessage:"new"})]},"primary")})]},request:function(N){var T=N.pageSize,n=N.current;return R(!0),Object(r.e)({pageSize:T,current:n}).then(function(o){return o.success?(R(!1),{data:o.data.filter(function(i){return i.channel===H}),total:o.meta.total,success:!0}):[]})},columns:[].concat(Ce,[{hideInSearch:!0,title:Object(t.jsx)(e.a,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",render:function(N,T){return[Object(t.jsx)(U.a,{to:"/templates/".concat(Q,"/").concat(T.id),children:Object(t.jsx)(A.a,{title:Object(t.jsx)(e.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(P.a,{type:"primary",icon:Object(t.jsx)(E.a,{})})})},"edit"),Object(t.jsx)(m.a,{title:Object(t.jsx)(e.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:function(){return Ee(T.id)},okText:Object(t.jsx)(e.a,{id:"yes"}),cancelText:Object(t.jsx)(e.a,{id:"no"}),children:Object(t.jsx)(A.a,{title:Object(t.jsx)(e.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(P.a,{type:"primary",icon:Object(t.jsx)(re.a,{}),danger:!0})})},"delete")]}}])})},s=b,v;(function(W){W.email="EscolaLms\\TemplatesEmail\\Core\\EmailChannel",W.pdf="EscolaLms\\TemplatesPdf\\Core\\PdfChannel",W.sms="EscolaLms\\TemplatesSms\\Core\\SmsChannel"})(v||(v={}));var ge=function(){var F=Object(u.l)(),Q=F.template;return Object(t.jsx)(C.a,{children:Object(t.jsxs)(h.a,{tabs:{type:"card",activeKey:Q,onChange:function(X){return e.d.push("/templates/".concat(X))}},children:[Object(t.jsx)(h.a.TabPane,{tab:Object(t.jsx)(e.a,{id:"email"}),children:Object(t.jsx)(s,{templateType:"email",channel:v.email})},"email"),Object(t.jsx)(h.a.TabPane,{tab:Object(t.jsx)(e.a,{id:"PDF"}),children:Object(t.jsx)(s,{templateType:"pdf",channel:v.pdf})},"pdf"),Object(t.jsx)(h.a.TabPane,{disabled:!0,tab:Object(t.jsx)("span",{children:Object(t.jsx)(e.a,{id:"Push"})}),children:"Push"},"Push"),Object(t.jsx)(h.a.TabPane,{tab:Object(t.jsx)("span",{children:Object(t.jsx)(e.a,{id:"SMS"})}),children:Object(t.jsx)(s,{templateType:"sms",channel:v.sms})},"sms")]})})},He=f.default=ge},S76h:function(B,f,a){},TLLU:function(B,f,a){"use strict";var y=a("5OYt");function u(){return Object(y.a)()}f.a={useBreakpoint:u}},VzZb:function(B,f,a){},"aK+R":function(B,f,a){},df8c:function(B,f,a){},nhC9:function(B,f,a){"use strict";var y=a("wx14"),u=a("q1tI"),e=a.n(u),C=a("Znn+"),h=a("ZTPi"),I=a("VTBJ"),m=a("rePB"),ae=a("U8pU"),A=a("ODXe"),pe=a("GNNt"),P=a("wEI+"),Z=a("Ff2n"),z=a("1GLa"),ue=a("TLLU"),D=a("UESt"),te=a("6cGi"),K=a("YSkC"),ne=a("TSYQ"),E=a.n(ne),re=a("BGR+"),U=a("14J3"),L=a("BMrR"),Y=a("jCWc"),r=a("kPKH"),c=a("aK+R"),t=function(o){var i=o.style,l=o.prefix;return e.a.createElement("div",{className:"".concat(l,"-loading-content"),style:i},e.a.createElement(L.a,{gutter:8},e.a.createElement(r.a,{span:22},e.a.createElement("div",{className:"".concat(l,"-loading-block")}))),e.a.createElement(L.a,{gutter:8},e.a.createElement(r.a,{span:8},e.a.createElement("div",{className:"".concat(l,"-loading-block")})),e.a.createElement(r.a,{span:15},e.a.createElement("div",{className:"".concat(l,"-loading-block")}))),e.a.createElement(L.a,{gutter:8},e.a.createElement(r.a,{span:6},e.a.createElement("div",{className:"".concat(l,"-loading-block")})),e.a.createElement(r.a,{span:18},e.a.createElement("div",{className:"".concat(l,"-loading-block")}))),e.a.createElement(L.a,{gutter:8},e.a.createElement(r.a,{span:13},e.a.createElement("div",{className:"".concat(l,"-loading-block")})),e.a.createElement(r.a,{span:9},e.a.createElement("div",{className:"".concat(l,"-loading-block")}))),e.a.createElement(L.a,{gutter:8},e.a.createElement(r.a,{span:4},e.a.createElement("div",{className:"".concat(l,"-loading-block")})),e.a.createElement(r.a,{span:3},e.a.createElement("div",{className:"".concat(l,"-loading-block")})),e.a.createElement(r.a,{span:16},e.a.createElement("div",{className:"".concat(l,"-loading-block")}))))},b=t,s=a("S76h"),v=function(o){var i=o.actions,l=o.prefixCls;return Array.isArray(i)&&(i==null?void 0:i.length)?e.a.createElement("ul",{className:"".concat(l,"-actions")},i.map(function(g,J){return e.a.createElement("li",{style:{width:"".concat(100/i.length,"%")},key:"action-".concat(J)},e.a.createElement("span",null,g))})):i?e.a.createElement("ul",{className:"".concat(l,"-actions")},i):null},ge=v,He=a("df8c"),W=["className","style","bodyStyle","headStyle","title","subTitle","extra","tip","wrap","layout","loading","gutter","tooltip","split","headerBordered","bordered","children","size","actions","ghost","hoverable","direction","collapsed","collapsible","collapsibleIconRender","defaultCollapsed","onCollapse","checked","onChecked","tabs","type"],F=ue.a.useBreakpoint,Q=e.a.forwardRef(function(n,o){var i,l,g,J=n.className,w=n.style,k=n.bodyStyle,$=k===void 0?{}:k,q=n.headStyle,xe=q===void 0?{}:q,ve=n.title,Te=n.subTitle,le=n.extra,Pe=n.tip,fe=n.wrap,Xe=fe===void 0?!1:fe,we=n.layout,ce=n.loading,Le=n.gutter,ke=Le===void 0?0:Le,qe=n.tooltip,se=n.split,Be=n.headerBordered,_e=Be===void 0?!1:Be,Re=n.bordered,ea=Re===void 0?!1:Re,$e=n.children,Ge=n.size,aa=n.actions,ze=n.ghost,ta=ze===void 0?!1:ze,Ke=n.hoverable,na=Ke===void 0?!1:Ke,ra=n.direction,Ue=n.collapsed,We=n.collapsible,la=We===void 0?!1:We,Je=n.collapsibleIconRender,Ve=n.defaultCollapsed,ca=Ve===void 0?!1:Ve,sa=n.onCollapse,oa=n.checked,Se=n.onChecked,Ne=n.tabs,Me=n.type,oe=Object(Z.a)(n,W),ia=Object(u.useContext)(P.default.ConfigContext),da=ia.getPrefixCls,Ze=F(),ua=Object(te.a)(ca,{value:Ue,onChange:sa}),Ye=Object(A.a)(ua,2),be=Ye[0],ma=Ye[1],je=["xxl","xl","lg","md","sm","xs"],va=function(p){var j=[0,0],S=Array.isArray(p)?p:[p,0];return S.forEach(function(M,V){if(Object(ae.a)(M)==="object")for(var G=0;G<je.length;G+=1){var de=je[G];if(Ze[de]&&M[de]!==void 0){j[V]=M[de];break}}else j[V]=M||0}),j},ie=function(p,j){return p?j:{}},fa=function(p){var j=p;if(Object(ae.a)(p)==="object")for(var S=0;S<je.length;S+=1){var M=je[S];if(Ze[M]&&p[M]!==void 0){j=p[M];break}}var V=ie(typeof j=="string"&&/\d%|\dpx/i.test(j),{width:j,flexShrink:0});return{span:j,colSpanStyle:V}},d=da("pro-card"),ba=va(ke),Fe=Object(A.a)(ba,2),_=Fe[0],ee=Fe[1],Ie=!1,Ae=e.a.Children.toArray($e),ja=Ae.map(function(O,p){var j;if(O==null||(j=O.type)===null||j===void 0?void 0:j.isProCard){var S;Ie=!0;var M=O.props.colSpan,V=fa(M),G=V.span,de=V.colSpanStyle,Oa=E()(["".concat(d,"-col")],(S={},Object(m.a)(S,"".concat(d,"-split-vertical"),se==="vertical"&&p!==Ae.length-1),Object(m.a)(S,"".concat(d,"-split-horizontal"),se==="horizontal"&&p!==Ae.length-1),Object(m.a)(S,"".concat(d,"-col-").concat(G),typeof G=="number"&&G>=0&&G<=24),S));return e.a.createElement("div",{style:Object(I.a)(Object(I.a)(Object(I.a)({},de),ie(_>0,{paddingRight:_/2,paddingLeft:_/2})),ie(ee>0,{paddingTop:ee/2,paddingBottom:ee/2})),key:"pro-card-col-".concat((O==null?void 0:O.key)||p),className:Oa},e.a.cloneElement(O))}return O}),ha=E()("".concat(d),J,(i={},Object(m.a)(i,"".concat(d,"-border"),ea),Object(m.a)(i,"".concat(d,"-contain-card"),Ie),Object(m.a)(i,"".concat(d,"-loading"),ce),Object(m.a)(i,"".concat(d,"-split"),se==="vertical"||se==="horizontal"),Object(m.a)(i,"".concat(d,"-ghost"),ta),Object(m.a)(i,"".concat(d,"-hoverable"),na),Object(m.a)(i,"".concat(d,"-size-").concat(Ge),Ge),Object(m.a)(i,"".concat(d,"-type-").concat(Me),Me),Object(m.a)(i,"".concat(d,"-collapse"),be),Object(m.a)(i,"".concat(d,"-checked"),oa),i)),pa=E()("".concat(d,"-body"),(l={},Object(m.a)(l,"".concat(d,"-body-center"),we==="center"),Object(m.a)(l,"".concat(d,"-body-direction-column"),se==="horizontal"||ra==="column"),Object(m.a)(l,"".concat(d,"-body-wrap"),Xe&&Ie),l)),ga=Object(I.a)(Object(I.a)(Object(I.a)({},ie(_>0,{marginRight:-_/2,marginLeft:-_/2})),ie(ee>0,{marginTop:-ee/2,marginBottom:-ee/2})),$),Qe=e.a.isValidElement(ce)?ce:e.a.createElement(b,{prefix:d,style:$.padding===0||$.padding==="0px"?{padding:24}:void 0}),he=la&&Ue===void 0&&(Je?Je({collapsed:be}):e.a.createElement(D.a,{rotate:be?void 0:90,className:"".concat(d,"-collapsible-icon")}));return e.a.createElement("div",Object(y.a)({className:ha,style:w,ref:o,onClick:function(p){var j;Se==null||Se(p),oe==null||(j=oe.onClick)===null||j===void 0||j.call(oe,p)}},Object(re.a)(oe,["prefixCls","colSpan"])),(ve||le||he)&&e.a.createElement("div",{className:E()("".concat(d,"-header"),(g={},Object(m.a)(g,"".concat(d,"-header-border"),_e||Me==="inner"),Object(m.a)(g,"".concat(d,"-header-collapsible"),he),g)),style:xe,onClick:function(){he&&ma(!be)}},e.a.createElement("div",{className:"".concat(d,"-title")},he,e.a.createElement(K.a,{label:ve,tooltip:qe||Pe,subTitle:Te})),le&&e.a.createElement("div",{className:"".concat(d,"-extra")},le)),Ne?e.a.createElement("div",{className:"".concat(d,"-tabs")},e.a.createElement(h.a,Object(y.a)({onChange:Ne.onChange},Ne),ce?Qe:$e)):e.a.createElement("div",{className:pa,style:ga},ce?Qe:ja),e.a.createElement(ge,{actions:aa,prefixCls:d}))}),H=Q,X=a("VzZb"),Oe=["key","tab","tabKey","disabled","destroyInactiveTabPane","children","className","style","cardProps"],ye=function(o){var i=o.key,l=o.tab,g=o.tabKey,J=o.disabled,w=o.destroyInactiveTabPane,k=o.children,$=o.className,q=o.style,xe=o.cardProps,ve=Object(Z.a)(o,Oe),Te=Object(u.useContext)(P.default.ConfigContext),le=Te.getPrefixCls,Pe=le("pro-card-tabpane"),fe=E()(Pe,$);return e.a.createElement(h.a.TabPane,Object(y.a)({key:i,tabKey:g,tab:l,className:fe,style:q,disabled:J,destroyInactiveTabPane:w},ve),e.a.createElement(H,xe,k))},me=ye,De=a("u1OI"),R=function(o){var i=Object(u.useContext)(P.default.ConfigContext),l=i.getPrefixCls,g=l("pro-card-divider"),J=o.className,w=o.style,k=w===void 0?{}:w,$=o.type,q=E()(g,J,Object(m.a)({},"".concat(g,"-").concat($),$));return e.a.createElement("div",{className:q,style:k})},Ce=R,Ee=function(o){return e.a.createElement(H,Object(y.a)({bodyStyle:{padding:0}},o))},x=H;x.isProCard=!0,x.Divider=Ce,x.TabPane=me,x.Group=Ee;var N=x,T=f.a=N},rWUb:function(B,f,a){"use strict";a.d(f,"e",function(){return I}),a.d(f,"d",function(){return ae}),a.d(f,"a",function(){return pe}),a.d(f,"h",function(){return Z}),a.d(f,"b",function(){return ue}),a.d(f,"i",function(){return te}),a.d(f,"c",function(){return ne}),a.d(f,"f",function(){return re}),a.d(f,"g",function(){return L});var y=a("WmNS"),u=a.n(y),e=a("k1fw"),C=a("9og8"),h=a("9kvl");function I(r,c){return m.apply(this,arguments)}function m(){return m=Object(C.a)(u.a.mark(function r(c,t){return u.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(h.f)("/api/admin/templates",Object(e.a)({method:"GET",useCache:!1,params:Object(e.a)(Object(e.a)({},c),{},{per_page:c&&c.pageSize,page:c&&c.current})},t||{})));case 1:case"end":return s.stop()}},r)})),m.apply(this,arguments)}function ae(r,c){return A.apply(this,arguments)}function A(){return A=Object(C.a)(u.a.mark(function r(c,t){return u.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(h.f)("/api/admin/templates/".concat(c),Object(e.a)({method:"GET"},t||{})));case 1:case"end":return s.stop()}},r)})),A.apply(this,arguments)}function pe(r,c){return P.apply(this,arguments)}function P(){return P=Object(C.a)(u.a.mark(function r(c,t){return u.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(h.f)("/api/admin/templates",Object(e.a)({method:"POST",headers:{"Content-Type":"application/json"},data:c},t||{})));case 1:case"end":return s.stop()}},r)})),P.apply(this,arguments)}function Z(r,c,t){return z.apply(this,arguments)}function z(){return z=Object(C.a)(u.a.mark(function r(c,t,b){return u.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",Object(h.f)("/api/admin/templates/".concat(c),Object(e.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:t},b||{})));case 1:case"end":return v.stop()}},r)})),z.apply(this,arguments)}function ue(r,c){return D.apply(this,arguments)}function D(){return D=Object(C.a)(u.a.mark(function r(c,t){return u.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(h.f)("/api/admin/templates/".concat(c),Object(e.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},t||{})));case 1:case"end":return s.stop()}},r)})),D.apply(this,arguments)}function te(r){return K.apply(this,arguments)}function K(){return K=Object(C.a)(u.a.mark(function r(c){return u.a.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",Object(h.f)("/api/admin/templates/variables",Object(e.a)({method:"GET"},c||{})));case 1:case"end":return b.stop()}},r)})),K.apply(this,arguments)}function ne(r,c){return E.apply(this,arguments)}function E(){return E=Object(C.a)(u.a.mark(function r(c,t){return u.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(h.f)("/api/admin/templates/".concat(c,"/preview"),Object(e.a)({method:"GET"},t||{})));case 1:case"end":return s.stop()}},r)})),E.apply(this,arguments)}function re(r,c,t){return U.apply(this,arguments)}function U(){return U=Object(C.a)(u.a.mark(function r(c,t,b){return u.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",Object(h.f)("/api/admin/events/trigger-manually/".concat(c),Object(e.a)({method:"POST",headers:{"Content-Type":"application/json"},data:{users:t}},b||{})));case 1:case"end":return v.stop()}},r)})),U.apply(this,arguments)}function L(r,c,t){return Y.apply(this,arguments)}function Y(){return Y=Object(C.a)(u.a.mark(function r(c,t,b){return u.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",Object(h.f)("/api/admin/products/".concat(t,"/trigger-event-manually/").concat(c),Object(e.a)({method:"POST",headers:{"Content-Type":"application/json"}},b||{})));case 1:case"end":return v.stop()}},r)})),Y.apply(this,arguments)}},u1OI:function(B,f,a){}}]);
