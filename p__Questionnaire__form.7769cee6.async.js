(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{A6KM:function(de,Q,t){"use strict";t.d(Q,"a",function(){return q});var I=t("OaEy"),A=t("2fM7"),H=t("T2oS"),le=t("W9HT"),Z=t("oBTY"),$=t("tJVT"),F=t("q1tI"),X=t.n(F),w=t("H6aw"),i=t("EmS3"),P=t("Gb5Y"),W=t("9kvl"),n=t("nKUr"),c=t.n(n),L=function(E){return E.map(function(U){return"name"in U?{id:Number(U.id),name:U.name}:{id:Number(U.id),name:U.title?U.title:""}})},q=function(E){var U=E.value,ae=E.onChange,o=E.multiple,se=o===void 0?!1:o,_=E.defaultValue,ue=E.modelType,a=ue===void 0?"COURSE":ue,ie=Object(F.useState)([]),re=Object($.a)(ie,2),B=re[0],oe=re[1],fe=Object(F.useState)(!1),me=Object($.a)(fe,2),he=me[0],Oe=me[1],b=Object(F.useRef)(),pe=Object(F.useCallback)(function(f){var N,J,e,k;switch(a){case"COURSE":return Object(w.e)(f,{signal:b==null||(N=b.current)===null||N===void 0?void 0:N.signal});case"WEBINAR":return Object(i.f)(f,{signal:b==null||(J=b.current)===null||J===void 0?void 0:J.signal});case"CONSULTATIONS":return Object(P.b)(f,{signal:b==null||(e=b.current)===null||e===void 0?void 0:e.signal});default:return Object(w.e)(f,{signal:b==null||(k=b.current)===null||k===void 0?void 0:k.signal})}},[a,b]),ge=Object(F.useCallback)(function(f){var N,J,e,k;switch(a){case"COURSE":return Object(w.k)(Number(f),{signal:(N=b.current)===null||N===void 0?void 0:N.signal});case"WEBINAR":return Object(i.d)(Number(f),{signal:(J=b.current)===null||J===void 0?void 0:J.signal});case"CONSULTATIONS":return Object(P.e)(Number(f),{signal:(e=b.current)===null||e===void 0?void 0:e.signal});default:return Object(w.k)(Number(f),{signal:(k=b.current)===null||k===void 0?void 0:k.signal})}},[a,b]),ce=Object(F.useCallback)(function(f){Oe(!0),b.current&&b.current.abort(),b.current=new AbortController,pe(f?{title:f}:{}).then(function(N){N.success&&oe(L(N.data)),Oe(!1)}).catch(function(){return Oe(!1)})},[a]),ve=Object(F.useCallback)(function(f){ce(f)},[ce]);return Object(F.useEffect)(function(){return b.current=new AbortController,U&&ge(Number(U)).then(function(f){f&&f.success&&oe(function(N){return[].concat(Object(Z.a)(N),Object(Z.a)(L([f.data])))})}),function(){b.current&&b.current.abort()}},[U,a]),Object(n.jsx)(A.a,{defaultValue:_,onFocus:function(){return ce()},allowClear:!0,style:{width:"100%"},value:U,onChange:ae,mode:se?"multiple":void 0,showSearch:!0,onSearch:ve,placeholder:Object(n.jsx)(W.a,{id:"select_content",defaultMessage:"select_content"}),optionFilterProp:"children",filterOption:function(N,J){if(J&&J.children){var e;return(J==null||(e=J.children)===null||e===void 0?void 0:e.toString().toLowerCase().indexOf(N.toLowerCase()))>=0}return!0},notFoundContent:he?Object(n.jsx)(le.a,{size:"small"}):null,optionLabelProp:"label",children:B.map(function(f){return Object(n.jsx)(A.a.Option,{value:f.id,label:f.name,children:f.name},f.id)})})}},"F/zT":function(de,Q,t){"use strict";var I=t("VTBJ"),A=t("Ff2n"),H=t("nKUr"),le=t.n(H),Z=t("q1tI"),$=t.n(Z),F=t("adzw"),X=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],w=$.a.forwardRef(function(i,P){var W=i.fieldProps,n=i.unCheckedChildren,c=i.checkedChildren,L=i.proFieldProps,q=Object(A.a)(i,X);return Object(H.jsx)(F.a,Object(I.a)({valueType:"switch",fieldProps:Object(I.a)({unCheckedChildren:n,checkedChildren:c},W),ref:P,valuePropName:"checked",proFieldProps:L,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},q))});Q.a=w},FJDo:function(de,Q,t){"use strict";var I=t("VTBJ"),A=t("Ff2n"),H=t("nKUr"),le=t.n(H),Z=t("q1tI"),$=t.n(Z),F=t("adzw"),X=["fieldProps","min","proFieldProps","max"],w=function(P,W){var n=P.fieldProps,c=P.min,L=P.proFieldProps,q=P.max,j=Object(A.a)(P,X);return Object(H.jsx)(F.a,Object(I.a)({valueType:"digit",fieldProps:Object(I.a)({min:c,max:q},n),ref:W,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:L},j))};Q.a=$.a.forwardRef(w)},FhbG:function(de,Q,t){"use strict";t.r(Q),t.d(Q,"ModelTypes",function(){return Me}),t.d(Q,"QuestionareForm",function(){return ye});var I=t("+L6B"),A=t("2/Rp"),H=t("14J3"),le=t("BMrR"),Z=t("jCWc"),$=t("kPKH"),F=t("T2oS"),X=t("W9HT"),w=t("miYZ"),i=t("tsqr"),P=t("oBTY"),W=t("jrin"),n=t("k1fw"),c=t("qLMh"),L=t("9og8"),q=t("y8nQ"),j=t("Vl3Y"),E=t("tJVT"),U=t("tU7J"),ae=t("wFql"),o=t("q1tI"),se=t("tMyG"),_=t("nhC9"),ue=t("Ty5D"),a=t("9kvl"),ie=t("Qurx"),re=t("F/zT"),B=t("HuWs"),oe=t("VMEa"),fe=t("A6KM"),me=t("P2fV"),he=t("NJEC"),Oe=t("5Dmo"),b=t("3S7+"),pe=t("xvlK"),ge=t("G3dp"),ce=t("/MfK"),ve=t("Qiat"),f=t("rmhi"),N=t("yj/a"),J=t("FJDo"),e=t("nKUr"),k;(function(Y){Y.Rate="rate",Y.Text="text",Y.Review="review"})(k||(k={}));var Fe=function(x){var l=Object(a.l)(),S=x.visible,y=x.onVisibleChange,p=x.onFinish,O=x.id,ee=x.questionsList,R=j.a.useForm(),m=Object(E.a)(R,1),u=m[0];Object(o.useEffect)(function(){typeof O=="number"&&O>0?Object(B.h)(O).then(function(r){r.success&&u.setFieldsValue(r.data)}):u.resetFields()},[O,u]);var v=Object.values(k).map(function(r){return{name:r,label:l.formatMessage({id:"QuestionType.".concat(r)}),value:r,disabled:r==="review"&&ee.findIndex(function(V){var D=V.type;return D==="review"})!==-1}});return Object(e.jsxs)(f.a,{form:u,title:l.formatMessage({id:typeof O=="number"&&O>0?"question_edit":"question_add",defaultMessage:typeof O=="number"&&O>0?"question_edit":"question_add"}),width:"400px",visible:S,onVisibleChange:y,onFinish:p,children:[Object(e.jsx)(N.a,{name:"type",options:v,label:Object(e.jsx)(a.a,{id:"type"}),initialValue:k.Rate}),Object(e.jsx)(ie.a,{width:"lg",name:"title",label:Object(e.jsx)(a.a,{id:"title"}),tooltip:Object(e.jsx)(a.a,{id:"title"}),placeholder:l.formatMessage({id:"title"})}),Object(e.jsx)(ie.a,{width:"lg",name:"description",label:Object(e.jsx)(a.a,{id:"description"}),tooltip:Object(e.jsx)(a.a,{id:"description"}),placeholder:l.formatMessage({id:"description"})}),Object(e.jsx)(J.a,{width:"lg",name:"position",label:Object(e.jsx)(a.a,{id:"position"}),tooltip:Object(e.jsx)(a.a,{id:"position"}),placeholder:l.formatMessage({id:"position",defaultMessage:"position"}),min:0,max:9999,fieldProps:{step:1}}),Object(e.jsx)(re.a,{initialValue:!0,name:"active",label:Object(e.jsx)(a.a,{id:"is_active",defaultMessage:"is_active"})}),Object(e.jsx)(re.a,{initialValue:!0,name:"public_answers",label:Object(e.jsx)(a.a,{id:"show_hide_on_front",defaultMessage:"show_hide_on_front"})})]})},Re=Fe,Ae=t("c+yx"),Le=function(x){var l=x.questionnaireId,S=x.questions,y=x.fetchData,p=Object(a.l)(),O=Object(o.useState)(!1),ee=Object(E.a)(O,2),R=ee[0],m=ee[1],u=Object(o.useMemo)(function(){return[{title:Object(e.jsx)(a.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0},{title:Object(e.jsx)(a.a,{id:"title",defaultMessage:"title"}),dataIndex:"title",hideInSearch:!1,sorter:!0},{title:Object(e.jsx)(a.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0,sorter:!0,renderText:function(g,M){return p.formatMessage({id:"QuestionType.".concat(M.type)})}},{title:Object(e.jsx)(a.a,{id:"description",defaultMessage:"description"}),dataIndex:"description",hideInSearch:!0,sorter:!0},{title:Object(e.jsx)(a.a,{id:"position",defaultMessage:"position"}),dataIndex:"position",hideInSearch:!0,sorter:!0}]},[]),v=Object(o.useRef)(),r=function(){var D=Object(L.a)(Object(c.a)().mark(function g(M,s){var z;return Object(c.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return z=i.b.loading(p.formatMessage({id:"loading"})),d.prev=1,d.next=4,s&&s!==-1?Object(B.g)(s,Object(n.a)(Object(n.a)({},M),{},{questionnaire_id:l})):Object(B.a)(Object(n.a)(Object(n.a)({},M),{},{questionnaire_id:l}));case 4:return z(),y(),i.b.success(p.formatMessage({id:"success"})),d.abrupt("return",!0);case 10:return d.prev=10,d.t0=d.catch(1),z(),i.b.error(p.formatMessage({id:"error"})),d.abrupt("return",!1);case 15:case"end":return d.stop()}},g,null,[[1,10]])}));return function(M,s){return D.apply(this,arguments)}}(),V=Object(o.useCallback)(function(){var D=Object(L.a)(Object(c.a)().mark(function g(M){var s,z;return Object(c.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return s=i.b.loading(p.formatMessage({id:"loading"})),d.prev=1,d.next=4,Object(B.e)(M);case 4:return s(),y(),(z=v.current)===null||z===void 0||z.reload(),d.abrupt("return",!0);case 10:return d.prev=10,d.t0=d.catch(1),s(),i.b.error(Object(e.jsx)(a.a,{id:"error",defaultMessage:"error"})),d.abrupt("return",!1);case 15:case"end":return d.stop()}},g,null,[[1,10]])}));return function(g){return D.apply(this,arguments)}}(),[v,p]);return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(ve.a,{headerTitle:p.formatMessage({id:"question_list",defaultMessage:"question_list"}),actionRef:v,rowKey:"id",search:{layout:"vertical"},toolBarRender:function(){return[Object(e.jsxs)(A.a,{type:"primary",onClick:function(){m(-1)},children:[Object(e.jsx)(pe.a,{})," ",Object(e.jsx)(a.a,{id:"pages.searchTable.new",defaultMessage:"\u65B0\u5EFA"})]},"primary")]},columns:[].concat(Object(P.a)(u),[{title:Object(e.jsx)(a.a,{id:"options",defaultMessage:"options"}),dataIndex:"option",valueType:"option",render:function(g,M){return[Object(e.jsx)(b.a,{title:Object(e.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(e.jsx)(A.a,{type:"primary",icon:Object(e.jsx)(ge.a,{}),onClick:function(){return M.id&&m(M.id)}})},"edit"),Object(e.jsx)(he.a,{title:Object(e.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:function(){return M.id&&V(M.id)},okText:Object(e.jsx)(a.a,{id:"yes"}),cancelText:Object(e.jsx)(a.a,{id:"no"}),children:Object(e.jsx)(b.a,{title:Object(e.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(e.jsx)(A.a,{type:"primary",icon:Object(e.jsx)(ce.a,{}),danger:!0})})},"delete")]}}]),request:function(g,M){var s=g.title,z=M&&Object.entries(M)[0];return new Promise(function(te){var d=S?Object(P.a)(S):[];s&&(d=d.filter(function(Ee){return Ee.title.toLowerCase().includes(s.toLowerCase())})),z&&(d=Object(Ae.i)(d,z[0],z[1]!=="ascend")),te({data:d,success:!0,total:d.length})})}}),Object(e.jsx)(Re,{id:R,visible:Number.isInteger(R),onVisibleChange:function(g){return g===!1&&m(!1)},questionsList:S!=null?S:[],onFinish:function(){var D=Object(L.a)(Object(c.a)().mark(function g(M){var s;return Object(c.a)().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,r(M,Number(R));case 2:s=te.sent,s&&(m(!1),v.current&&v.current.reload());case 4:case"end":return te.stop()}},g)}));return function(g){return D.apply(this,arguments)}}()})]})},Ue=Le,Be=t("PpiC"),Ke=t("Vpfc"),We=t("0WSk"),_e=t("sWYD"),Ne=t("mGZj"),Ve=["type"],Qe=function(x){var l=x.record,S=j.a.useForm(),y=Object(E.a)(S,1),p=y[0],O=Object(a.l)(),ee=Object(o.useMemo)(function(){return{onValuesChange:function(m,u){var v=u,r=v.visible_on_front;Object(B.c)(l.id,{visible_on_front:r}).then(function(V){i.b.success(Object(e.jsx)(a.a,{id:"question_answer_visibility_changed",defaultMessage:V.message}))}).catch(function(){return i.b.error(Object(e.jsx)(a.a,{id:"error",defaultMessage:"error"}))})},submitter:{render:function(){return null}}}},[]);return Object(e.jsx)(oe.a,Object(n.a)(Object(n.a)({form:p},ee),{},{children:Object(e.jsx)(re.a,{name:"visible_on_front",initialValue:l.visible_on_front,checkedChildren:O.formatMessage({id:"visible",defaultMessage:"visible"}),unCheckedChildren:O.formatMessage({id:"hidden",defaultMessage:"hidden"})})}))},$e=function(x){var l=x.questionnaireId,S=x.questions,y=Object(o.useMemo)(function(){return S&&S.reduce(function(R,m){return Object(n.a)(Object(n.a)({},R),{},Object(W.a)({},m.id,m.title))},{})},[S]),p=[{title:Object(e.jsx)(a.a,{id:"questions",defaultMessage:"questions"}),dataIndex:"question_id",hideInSearch:!1,valueEnum:y,valueType:"select"}],O=Object(a.l)(),ee=[{title:Object(e.jsx)(a.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0},{title:Object(e.jsx)(a.a,{id:"updated_at",defaultMessage:"updated_at"}),dataIndex:"updated_at",hideInSearch:!0,render:function(m,u){return u.updated_at?new Date(u.updated_at).toLocaleString():"-"},sorter:!0},{title:Object(e.jsx)(a.a,{id:"updated_at",defaultMessage:"updated_at"}),dataIndex:"date",hideInSearch:!1,hideInForm:!0,hideInTable:!0,valueType:"date",fieldProps:{allowEmpty:[!0]}},{title:Object(e.jsx)(a.a,{id:"title",defaultMessage:"title"}),dataIndex:"question_title",hideInSearch:!0,sorter:!0},{title:Object(e.jsx)(a.a,{id:"note",defaultMessage:"note"}),dataIndex:"note",hideInSearch:!0,sorter:!0,render:function(m,u){var v,r;return u.note&&((v=u.note)===null||v===void 0?void 0:v.length)>64?((r=u.note)===null||r===void 0?void 0:r.slice(0,64))+"...":u.note}},{title:Object(e.jsx)(a.a,{id:"user",defaultMessage:"user"}),dataIndex:"user_id",hideInSearch:!1,render:function(m,u){var v,r;return Object(e.jsxs)("div",{children:[Object(e.jsx)(Ke.a,{type:"App\\Models\\User",type_id:u.user_id}),Object(e.jsx)("p",{className:"list-paragraph",children:(v=u.user)===null||v===void 0?void 0:v.name}),Object(e.jsx)("p",{className:"list-paragraph",children:(r=u.user)===null||r===void 0?void 0:r.email})]})},renderFormItem:function(m,u,v){var r=u.type,V=Object(Be.a)(u,Ve);if(r==="form")return null;var D=v.getFieldValue("state");return Object(e.jsx)(We.a,Object(n.a)(Object(n.a)({},V),{},{state:{type:D}}))}},{title:Object(e.jsx)(a.a,{id:"sum_rate",defaultMessage:"sum_rate"}),dataIndex:"rate",hideInSearch:!0,sorter:!0},{title:Object(e.jsx)(a.a,{id:"show_hide_on_front",defaultMessage:"show_hide_on_front"}),dataIndex:"visible_on_front",hideInSearch:!0,sorter:!1,render:function(m,u){return Object(e.jsx)(Qe,{record:u})}}];return Object(e.jsx)(ve.a,{headerTitle:O.formatMessage({id:"answers",defaultMessage:"answers"}),search:{layout:"vertical"},rowKey:"id",request:function(m,u){var v=m.pageSize,r=m.current,V=m.question_id,D=m.user_id,g=m.date,M=u&&Object.entries(u)[0];return Object(B.i)(l,{per_page:v,page:r,question_id:V,user_id:D,updated_at:g?Object(_e.a)(new Date(g),Ne.a):void 0,order_by:M&&M[0],order:M?M[1]==="ascend"?"ASC":"DESC":void 0}).then(function(s){return s.success?{data:s.data,success:!0}:[]})},columns:[].concat(ee,p)})},Je=$e,at=t("OaEy"),xe=t("2fM7"),rt=t("fOrg"),we=t("+KLJ"),ze=t("LDJE"),Ge={isGroup:!0,xField:"label",yField:"value",seriesField:"type",marginRatio:0},He=function(x){var l=x.state,S=Object(a.l)();return Object(e.jsxs)(_.a,{headerBordered:!0,style:{height:"500px"},children:[l.mode==="loading"&&Object(e.jsx)(X.a,{}),l.mode==="loaded"&&l.value.length>0?Object(e.jsx)(ze.a,Object(n.a)(Object(n.a)({},Ge),{},{data:[].concat(Object(P.a)(l.value),Object(P.a)(l.value)).map(function(y,p){return{label:y.title,value:p>l.value.length-1?y.count_answers:Number(y.avg_rate),type:p>l.value.length-1?S.formatMessage({id:"answers"}):"Rating"}})})):l.mode!=="loading"&&Object(e.jsx)("p",{children:Object(e.jsx)(a.a,{id:"no_data",defaultMessage:"no_data"})}),l.mode==="error"&&Object(e.jsx)(we.a,{message:l.error.data.message,type:"error"})]})},Ye=He,Ze=function(x){var l=x.questionnaireId,S=x.models,y=Object(o.useState)(""),p=Object(E.a)(y,2),O=p[0],ee=p[1],R=Object(o.useState)({mode:"init"}),m=Object(E.a)(R,2),u=m[0],v=m[1];return Object(o.useEffect)(function(){v({mode:"loading"});var r=function(){var V=Object(L.a)(Object(c.a)().mark(function D(){var g;return Object(c.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,!O){s.next=7;break}return s.next=4,Object(B.m)(l,Number(O.split("/")[0]),Number(O.split("/")[1]));case 4:s.t0=s.sent,s.next=10;break;case 7:return s.next=9,Object(B.m)(l);case 9:s.t0=s.sent;case 10:g=s.t0,g.success&&v({mode:"loaded",value:g.data}),s.next=17;break;case 14:s.prev=14,s.t1=s.catch(0),v({mode:"error",error:s.t1});case 17:case"end":return s.stop()}},D,null,[[0,14]])}));return function(){return V.apply(this,arguments)}}();r()},[l,S,O]),Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(ae.a.Title,{level:5,children:Object(e.jsx)(a.a,{id:"questionnaire.raports.filter",defaultMessage:"questionnaire.raports.filter"})}),Object(e.jsx)(xe.a,{allowClear:!0,style:{minWidth:"400px"},onChange:function(V){return ee(V)},children:S.map(function(r){return Object(e.jsxs)(xe.a.Option,{value:"".concat(r.model_type_id,"/").concat(r.model_id),children:[Object(e.jsx)(a.a,{id:r.model_type_title,defaultMessage:r.model_type_title})," ","- ",r.model_title]},r.id)})}),Object(e.jsx)(_.a,{split:"vertical",children:Object(e.jsx)(_.a,{colSpan:24,layout:"center",children:Object(e.jsx)(Ye,{state:u})})})]})},Xe=Ze,nt=t("GCLz"),qe=ae.a.Title,Me;(function(Y){Y[Y.COURSE=1]="COURSE"})(Me||(Me={}));var ye=function(){var x,l,S=Object(ue.l)(),y=S.questionnaireId,p=Object(a.l)(),O=y==="new",ee=j.a.useForm(),R=Object(E.a)(ee,1),m=R[0],u=Object(o.useState)(),v=Object(E.a)(u,2),r=v[0],V=v[1],D=Object(o.useState)("questionnaire"),g=Object(E.a)(D,2),M=g[0],s=g[1],z=Object(o.useState)(),te=Object(E.a)(z,2),d=te[0],Ee=te[1],ke=Object(o.useState)({}),De=Object(E.a)(ke,2),Ce=De[0],Te=De[1],Ie=Object(o.useCallback)(Object(L.a)(Object(c.a)().mark(function T(){var h;return Object(c.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,Object(B.k)();case 2:h=C.sent,h.success&&Ee(h.data);case 4:case"end":return C.stop()}},T)})),[]),Se=Object(o.useCallback)(function(T,h){return T.reduce(function(K,C){return(K[C[h]]=K[C[h]]||[]).push(C.model_id),K},{})},[]),je=Object(o.useCallback)(Object(L.a)(Object(c.a)().mark(function T(){var h;return Object(c.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,Object(B.j)(Number(y));case 2:h=C.sent,h.success&&(V(Object(n.a)({},h.data)),h.data.models&&Te(Se(h.data.models,"model_type_id")));case 4:case"end":return C.stop()}},T)})),[y,Se]);Object(o.useEffect)(function(){if(Ie(),O){V({title:"new"});return}je()},[y,je,Ie,O]);var et=Object(o.useCallback)(function(T,h){Te(function(K){return Object(n.a)(Object(n.a)({},K),{},Object(W.a)({},h,T))})},[]),Pe=Object(o.useCallback)(function(T){var h=[];return Object.keys(T).map(function(K){h.push.apply(h,Object(P.a)(T[K].map(function(C){return{model_id:C,model_type_id:Number(K)}})))}),h},[]),tt=Object(o.useMemo)(function(){return{onFinish:function(){var T=Object(L.a)(Object(c.a)().mark(function K(C){var ne,be;return Object(c.a)().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(G.prev=0,!O){G.next=9;break}return G.next=4,Object(B.d)(Object(n.a)(Object(n.a)({},C),{},{models:Pe(Ce)}));case 4:ne=G.sent,ne.success&&a.f.push("/other/questionnaire/".concat(ne.data.id)),i.b.success(Object(e.jsx)(a.a,{id:"success",defaultMessage:"success"})),G.next=14;break;case 9:return G.next=11,Object(B.p)(Number(r==null?void 0:r.id),Object(n.a)(Object(n.a)({},C),{},{models:Pe(Ce)}));case 11:be=G.sent,be.success&&je(),i.b.success(Object(e.jsx)(a.a,{id:"success",defaultMessage:"success"}));case 14:G.next=19;break;case 16:G.prev=16,G.t0=G.catch(0),i.b.error(Object(e.jsx)(a.a,{id:"error",defaultMessage:"error"}));case 19:case"end":return G.stop()}},K,null,[[0,16]])}));function h(K){return T.apply(this,arguments)}return h}(),initialValues:r}},[r,Ce,je,Pe,O]);return r?Object(e.jsx)(se.a,{title:Object(e.jsx)(e.Fragment,{children:Object(e.jsx)(a.a,{id:r!=null&&r.title?"questionnaire":"new_questionnaire"})}),header:{breadcrumb:{routes:[{path:"other/questionnaire",breadcrumbName:p.formatMessage({id:"menu.Other activities.Questionnaire"})},{path:String(y),breadcrumbName:p.formatMessage({id:"form"})},{path:"/",breadcrumbName:String(r==null?void 0:r.title)}]}},children:Object(e.jsxs)(_.a,{tabs:{type:"card",defaultActiveKey:"questionnaire",activeKey:M,onChange:function(h){return s(h)}},children:[Object(e.jsxs)(_.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"questionnaire",defaultMessage:"questionnaire"}),children:[Object(e.jsx)(qe,{level:3,children:Object(e.jsx)(a.a,{id:"questionnaire",defaultMessage:"questionnaire"})})," ",Object(e.jsx)(oe.a,Object(n.a)(Object(n.a)({},tt),{},{form:m,children:Object(e.jsxs)(le.a,{children:[Object(e.jsx)($.a,{span:6,children:Object(e.jsx)(ie.a,{label:Object(e.jsx)(a.a,{id:"title",defaultMessage:"title"}),rules:[{required:!0}],width:"md",name:"title"})}),Object(e.jsx)($.a,{children:Object(e.jsx)(re.a,{initialValue:!0,name:"active",label:Object(e.jsx)(a.a,{id:"is_active",defaultMessage:"is_active"})})})]})}))]},"questionnaire"),Object(e.jsx)(_.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"questions",defaultMessage:"questions"}),disabled:O,children:Object(e.jsx)(Ue,{questionnaireId:Number(y),questions:r.questions||[],fetchData:je})},"questions"),Object(e.jsx)(_.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"answers",defaultMessage:"answers"}),disabled:O,children:Object(e.jsx)(Je,{questionnaireId:Number(y),questions:r.questions||[]})},"answers"),d&&d.map(function(T){var h,K,C;return Object(e.jsxs)(_.a.TabPane,{tab:"".concat(p.formatMessage({id:"assign"})," ").concat(p.formatMessage({id:"to"})," ").concat(p.formatMessage({id:(h=T.title)===null||h===void 0?void 0:h.replace(T.title.charAt(0),T.title.charAt(0).toUpperCase())})),disabled:O,children:[Object(e.jsx)(fe.a,{defaultValue:((K=r.models)===null||K===void 0?void 0:K.filter(function(ne){return ne.model_type_title===T.title}).map(function(ne){return{value:ne.model_id,label:ne.model_title}}))||[],multiple:!0,onChange:function(be){return et(be,T.id)},modelType:(C=T.title)===null||C===void 0?void 0:C.toUpperCase()}),Object(e.jsx)(A.a,{className:"submit-btn",type:"primary",onClick:function(){return m.submit()},children:Object(e.jsx)(a.a,{id:"questionnaire.submit",defaultMessage:"questionnaire.submit"})})]},String(T.id))}),Object(e.jsx)(_.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"menu.reports",defaultMessage:"menu.reports"}),disabled:O||((x=r.models)===null||x===void 0?void 0:x.length)===0,children:(r==null?void 0:r.models)&&(r==null||(l=r.models)===null||l===void 0?void 0:l.length)>0&&Object(e.jsx)(Xe,{questionnaireId:Number(y),models:r.models})},"raport")]})}):Object(e.jsx)(X.a,{})},st=Q.default=ye},GCLz:function(de,Q,t){},LDJE:function(de,Q,t){"use strict";var I=t("q1tI"),A=t.n(I),H=t("ma/q"),le=t("ZIEt"),Z=t("QpZ9"),$=t("GzfL"),F=t("Scwr"),X=function(i,P){var W={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&P.indexOf(n)<0&&(W[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,n=Object.getOwnPropertySymbols(i);c<n.length;c++)P.indexOf(n[c])<0&&Object.prototype.propertyIsEnumerable.call(i,n[c])&&(W[n[c]]=i[n[c]]);return W},w=Object(I.forwardRef)(function(i,P){var W=i.chartRef,n=i.style,c=n===void 0?{height:"inherit"}:n,L=i.className,q=i.loading,j=i.loadingTemplate,E=i.errorTemplate,U=X(i,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),ae=Object(le.a)(H.a,U),o=ae.chart,se=ae.container;return Object(I.useEffect)(function(){Object(Z.a)(W,o.current)},[o.current]),Object(I.useImperativeHandle)(P,function(){return{getChart:function(){return o.current}}}),A.a.createElement($.a,{errorTemplate:E},q&&A.a.createElement(F.a,{loadingTemplate:j,theme:i.theme}),A.a.createElement("div",{className:L,style:c,ref:se}))});Q.a=w},"yj/a":function(de,Q,t){"use strict";var I=t("VTBJ"),A=t("Ff2n"),H=t("nKUr"),le=t.n(H),Z=t("uX+g"),$=t("q1tI"),F=t.n($),X=t("lS/g"),w=t("adzw"),i=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],P=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],W=F.a.forwardRef(function(j,E){var U=j.fieldProps,ae=j.children,o=j.params,se=j.proFieldProps,_=j.mode,ue=j.valueEnum,a=j.request,ie=j.showSearch,re=j.options,B=Object(A.a)(j,i),oe=Object($.useContext)(X.b);return Object(H.jsx)(w.a,Object(I.a)(Object(I.a)({valueEnum:Object(Z.a)(ue),request:a,params:o,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:Object(I.a)({options:re,mode:_,showSearch:ie,getPopupContainer:oe.getPopupContainer},U),ref:E,proFieldProps:se},B),{},{children:ae}))}),n=F.a.forwardRef(function(j,E){var U=j.fieldProps,ae=j.children,o=j.params,se=j.proFieldProps,_=j.mode,ue=j.valueEnum,a=j.request,ie=j.options,re=Object(A.a)(j,P),B=Object(I.a)({options:ie,mode:_||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},U),oe=Object($.useContext)(X.b);return Object(H.jsx)(w.a,Object(I.a)(Object(I.a)({valueEnum:Object(Z.a)(ue),request:a,params:o,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:Object(I.a)({getPopupContainer:oe.getPopupContainer},B),ref:E,proFieldProps:se},re),{},{children:ae}))}),c=W,L=n,q=c;q.SearchSelect=L,q.displayName="ProFormComponent",Q.a=q}}]);
