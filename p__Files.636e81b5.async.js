(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"/qDX":function(O,e,t){},"14J3":function(O,e,t){"use strict";var d=t("cIOH"),m=t.n(d),D=t("1GLa")},"3fxf":function(O,e,t){"use strict";var d=t("DjyN"),m=t("NUBc"),D=t("Mwp2"),i=t("VXEj"),M=t("+L6B"),v=t("2/Rp"),f=t("oBTY"),s=t("k1fw"),P=t("tJVT"),C=t("DYRE"),U=t("zeV3"),c=t("tU7J"),u=t("wFql"),o=t("q1tI"),E=t.n(o),n=t("BAh9"),_=t("/MfK"),r=t("mAF4"),A=t("dF/Y"),b=t("9kvl"),F=t("DBJ/"),B=t("lLVY"),S=t.n(B),a=t("nKUr"),Y=t.n(a),z=function(L){var I=L.directory,g=L.onUploaded;return Object(a.jsxs)(U.b,{align:"start",children:[Object(a.jsxs)(u.a.Text,{children:[Object(a.jsx)(b.a,{id:"pages.files.filesBrowser"}),Object(a.jsx)(u.a.Text,{code:!0,children:I})]}),Object(a.jsx)(F.a,{url:"/api/admin/file/upload",name:"file[]",data:{target:I},onChange:function(x){return x.file.status==="done"&&g(I)}})]})},J=function(L){var I=L.defaultDirectory,g=I===void 0?"/":I,h=L.onFile,x=Object(o.useState)({loading:!1,directory:g,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),V=Object(P.a)(x,2),j=V[0],$=V[1],R=Object(o.useRef)(),W=Object(o.useCallback)(function(p){$(function(l){return Object(s.a)(Object(s.a)({},l),{},{loading:p})})},[]),y=Object(o.useCallback)(function(p){var l,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,H=function(){return R.current&&R.current.abort()};return H(),R.current=new AbortController,W(!0),Object(n.a)({directory:p,page:G},{signal:(l=R.current)===null||l===void 0?void 0:l.signal}).then(function(N){N.success&&$(function(Q){return Object(s.a)(Object(s.a)(Object(s.a)({},Q),N.data),{},{data:[{url:p.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(f.a)(N.data.data.map(function(K){return Object(s.a)(Object(s.a)({},K),{},{url:K.mime==="directory"?"".concat(p,"/").concat(K.name):K.url})}))).filter(function(K){return p==="/"?K.name!=="..":!0}),directory:p,loading:!1})})}).catch(function(){return W(!1)}),function(){H()}},[W]);Object(o.useEffect)(function(){return y(g)},[g,y]);var X=Object(o.useCallback)(function(p){W(!0),Object(n.b)(p).then(function(){y(j.directory)}).catch(function(){W(!1)})},[y,W,j.directory]);return Object(a.jsxs)("div",{className:"file-browser",children:[Object(a.jsx)(i.b,{loading:j.loading,size:"small",itemLayout:"horizontal",dataSource:j.data,header:Object(a.jsx)(z,{directory:j.directory,onUploaded:function(l){return y(l)}}),footer:Object(a.jsx)(z,{directory:j.directory,onUploaded:function(l){return y(l)}}),renderItem:function(l){return Object(a.jsx)(i.b.Item,{actions:l.mime!=="directory"?[Object(a.jsx)(v.a,{type:"default",danger:!0,icon:Object(a.jsx)(_.a,{}),size:"small",onClick:function(){return X(l.url)}})]:[],children:Object(a.jsx)(i.b.Item.Meta,{avatar:l.mime==="directory"?Object(a.jsx)(v.a,{type:"primary",icon:Object(a.jsx)(r.a,{}),size:"small",onClick:function(){return y(l.url)}}):Object(a.jsx)("a",{href:l.url,target:"_blank",children:Object(a.jsx)(v.a,{type:"default",icon:Object(a.jsx)(A.a,{}),size:"small"})}),description:Object(a.jsx)(E.a.Fragment,{children:Object(a.jsx)(v.a,{type:"text",size:"small",onClick:function(){return l.mime==="directory"?y(l.url):h&&h(l,j.directory)},children:l.name})})})})}}),Object(a.jsx)(m.a,{pageSizeOptions:[],current:j.current_page,total:j.total,pageSize:j.per_page,onChange:function(l){return y(j.directory,l)}})]})};e.a=J},"3wW7":function(O,e,t){},BAh9:function(O,e,t){"use strict";t.d(e,"a",function(){return v}),t.d(e,"d",function(){return s}),t.d(e,"c",function(){return C}),t.d(e,"b",function(){return U});var d=t("k1fw"),m=t("9og8"),D=t("WmNS"),i=t.n(D),M=t("9kvl");function v(u,o){return f.apply(this,arguments)}function f(){return f=Object(m.a)(i.a.mark(function u(o,E){return i.a.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",Object(M.f)("/api/admin/file/list",Object(d.a)({method:"GET",params:o},E||{})));case 1:case"end":return _.stop()}},u)})),f.apply(this,arguments)}function s(u,o,E){return P.apply(this,arguments)}function P(){return P=Object(m.a)(i.a.mark(function u(o,E,n){var _;return i.a.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return _=new FormData,_.append("file[]",o),_.append("target",E),A.abrupt("return",Object(M.f)("/api/admin/file/upload",Object(d.a)({method:"POST",data:_},n||{})));case 4:case"end":return A.stop()}},u)})),P.apply(this,arguments)}var C=function(o){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat("https://escola-lms-api.stage.etd24.pl","/api/images/img?path=").concat(o,"&w=").concat(E)};function U(u,o){return c.apply(this,arguments)}function c(){return c=Object(m.a)(i.a.mark(function u(o,E){return i.a.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",Object(M.f)("/api/admin/file/delete",Object(d.a)({method:"DELETE",data:{url:o}},E||{})));case 1:case"end":return _.stop()}},u)})),c.apply(this,arguments)}},"DBJ/":function(O,e,t){"use strict";var d=t("y8nQ"),m=t("Vl3Y"),D=t("etVw"),i=t("q1tI"),M=t.n(i),v=t("9kvl"),f=function(U){var c=U.condition,u=U.children,o=U.wrap;return c?M.a.cloneElement(o(u)):u},s=t("nKUr"),P=function(c){var u=c.onChange,o=c.url,E=c.name,n=c.extra,_=c.accept,r=c.data,A=c.wrapInForm,b=A===void 0?!0:A,F=Object(v.i)();return Object(s.jsx)(f,{condition:b,wrap:function(S){return Object(s.jsx)(m.a,{children:S})},children:Object(s.jsx)(D.a,{title:Object(s.jsx)(v.a,{id:"upload_click_here"}),placeholder:F.formatMessage({id:"upload_click_here"}),onChange:u,label:Object(s.jsx)(v.a,{id:"upload"}),max:2,fieldProps:{data:r,accept:_,name:E,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://escola-lms-api.stage.etd24.pl").concat(o),extra:n})})},C=e.a=P},DjyN:function(O,e,t){"use strict";var d=t("cIOH"),m=t.n(d),D=t("Urep"),i=t.n(D),M=t("OaEy")},IzEo:function(O,e,t){"use strict";var d=t("cIOH"),m=t.n(d),D=t("lnY3"),i=t.n(D),M=t("Znn+"),v=t("14J3"),f=t("jCWc")},JGo8:function(O,e,t){},Mwp2:function(O,e,t){"use strict";var d=t("cIOH"),m=t.n(d),D=t("3wW7"),i=t.n(D),M=t("R9oj"),v=t("T2oS"),f=t("DjyN"),s=t("1GLa")},Urep:function(O,e,t){},etVw:function(O,e,t){"use strict";var d=t("cIOH"),m=t("JGo8"),D=t("+L6B"),i=t("MXD1"),M=t("5Dmo"),v=t("8z0m"),f=t("2/Rp"),s=t("q1tI"),P=t.n(s),C=t("z7Xi"),U=t("WFLz");function c(){return c=Object.assign||function(E){for(var n=1;n<arguments.length;n++){var _=arguments[n];for(var r in _)Object.prototype.hasOwnProperty.call(_,r)&&(E[r]=_[r])}return E},c.apply(this,arguments)}var u=function(n,_){var r=n.fieldProps,A=n.name,b=n.action,F=n.accept,B=n.listType,S=n.title,a=S===void 0?"\u5355\u51FB\u4E0A\u4F20":S,Y=n.max,z=n.icon,J=z===void 0?P.a.createElement(C.a,null):z,T=n.value,L=n.buttonProps,I=n.onChange,g=n.disabled,h=n.proFieldProps,x=n.fileList,V=(Y===void 0||!T||(T==null?void 0:T.length)<Y)&&(h==null?void 0:h.mode)!=="read",j=(B!=null?B:r==null?void 0:r.listType)==="picture-card";return P.a.createElement(v.a,c({action:b,accept:F,ref:_,name:A||"file",listType:B||"picture",fileList:x!=null?x:T},r,{onChange:function(R){I==null||I(R),(r==null?void 0:r.onChange)&&(r==null||r.onChange(R))}}),V&&(j?P.a.createElement("span",null,J," ",a):P.a.createElement(f.a,c({disabled:g||(r==null?void 0:r.disabled)},L),J,a)))},o=e.a=Object(U.a)(P.a.forwardRef(u),{getValueFromEvent:function(n){return n.fileList}})},jCWc:function(O,e,t){"use strict";var d=t("cIOH"),m=t.n(d),D=t("1GLa")},lLVY:function(O,e,t){},lnY3:function(O,e,t){},tU7J:function(O,e,t){"use strict";var d=t("cIOH"),m=t.n(d),D=t("/qDX"),i=t.n(D),M=t("5Dmo"),v=t("5NDa")},u4ym:function(O,e,t){"use strict";t.r(e);var d=t("IzEo"),m=t("bx4M"),D=t("tU7J"),i=t("wFql"),M=t("q1tI"),v=t.n(M),f=t("tMyG"),s=t("9kvl"),P=t("3fxf"),C=t("nKUr"),U=t.n(C);e.default=function(){return Object(C.jsx)(f.a,{children:Object(C.jsxs)(m.a,{children:[Object(C.jsx)(i.a.Text,{strong:!0,children:Object(C.jsx)(s.a,{id:"pages.files.content"})}),Object(C.jsx)(P.a,{})]})})}}}]);
