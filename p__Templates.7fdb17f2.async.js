(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"9A0E":function(q,o,t){"use strict";t.r(o),t.d(o,"channelType",function(){return E});var i=t("q1tI"),m=t("Ty5D"),a=t("9kvl"),j=t("tMyG"),y=t("nhC9"),K=t("P2fV"),Q=t("NJEC"),B=t("5Dmo"),U=t("3S7+"),W=t("+L6B"),P=t("2/Rp"),T=t("qLMh"),w=t("miYZ"),v=t("tsqr"),V=t("9og8"),J=t("+BJd"),z=t("mr32"),I=t("tJVT"),Y=t("xvlK"),$=t("G3dp"),Z=t("/MfK"),x=t("55Ip"),n=t("sWYD"),r=t("Qiat"),s=t("rWUb"),c=t("mGZj"),e=t("nKUr"),u=function(S){var M=S.templateType,A=S.channel,g=Object(i.useRef)(),L=Object(a.l)(),R=Object(i.useState)(!1),F=Object(I.a)(R,2),N=F[0],f=F[1],X=[{title:Object(e.jsx)(a.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0},{title:Object(e.jsx)(a.a,{id:"created_at",defaultMessage:"created_at"}),dataIndex:"created_at",hideInSearch:!0,sorter:!0,render:function(p,l){return l.created_at&&Object(n.a)(new Date(l.created_at),c.a)}},{title:Object(e.jsx)(a.a,{id:"name",defaultMessage:"name"}),dataIndex:"name",hideInSearch:!1,sorter:!0},{title:Object(e.jsx)(a.a,{id:"event",defaultMessage:"event"}),dataIndex:"event",hideInSearch:!0,sorter:!1,render:function(p,l){return Object(e.jsx)(a.a,{id:l.event,defaultMessage:l.event})}},{title:Object(e.jsx)(a.a,{id:"templates.is_default"}),dataIndex:"default",hideInSearch:!0,valueEnum:{true:Object(e.jsx)(z.a,{color:"success",children:Object(e.jsx)(a.a,{id:"yes"})}),false:Object(e.jsx)(z.a,{color:"error",children:Object(e.jsx)(a.a,{id:"no"})})}}],O=Object(i.useCallback)(function(){var h=Object(V.a)(Object(T.a)().mark(function p(l){var b,G;return Object(T.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return f(!0),b=v.b.loading(Object(e.jsx)(a.a,{id:"loading",defaultMessage:"loading"})),d.prev=2,d.next=5,Object(s.b)(l).then(function(C){f(!1),C.success&&v.b.success(C.message)});case 5:return b(),f(!1),(G=g.current)===null||G===void 0||G.reload(),d.abrupt("return",!0);case 11:return d.prev=11,d.t0=d.catch(2),b(),v.b.error(Object(e.jsx)(a.a,{id:"error",defaultMessage:"error"})),f(!1),d.abrupt("return",!1);case 17:case"end":return d.stop()}},p,null,[[2,11]])}));return function(p){return h.apply(this,arguments)}}(),[g]);return Object(e.jsx)(r.a,{headerTitle:L.formatMessage({id:"templates",defaultMessage:"templates"}),loading:N,actionRef:g,rowKey:"id",search:{layout:"vertical"},toolBarRender:function(){return[Object(e.jsx)(x.a,{to:"/configuration/templates/".concat(M,"/new"),children:Object(e.jsxs)(P.a,{type:"primary",children:[Object(e.jsx)(Y.a,{})," ",Object(e.jsx)(a.a,{id:"new",defaultMessage:"new"})]},"primary")},"new")]},request:function(p,l){var b=p.pageSize,G=p.current,k=p.name;f(!0);var d=l&&Object.entries(l)[0];return Object(s.e)({pageSize:b,current:G,channel:A,name:k||void 0,order_by:d&&d[0],order:d?d[1]==="ascend"?"ASC":"DESC":void 0}).then(function(C){return C.success?(f(!1),{data:C.data,total:C.meta.total,success:!0}):[]})},columns:[].concat(X,[{hideInSearch:!0,title:Object(e.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",render:function(p,l){return[Object(e.jsx)(x.a,{to:"/configuration/templates/".concat(M,"/").concat(l.id),children:Object(e.jsx)(U.a,{title:Object(e.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(e.jsx)(P.a,{type:"primary",icon:Object(e.jsx)($.a,{})})})},"edit"),Object(e.jsx)(Q.a,{title:Object(e.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:function(){return O(l.id)},okText:Object(e.jsx)(a.a,{id:"yes"}),cancelText:Object(e.jsx)(a.a,{id:"no"}),children:Object(e.jsx)(U.a,{title:Object(e.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(e.jsx)(P.a,{type:"primary",icon:Object(e.jsx)(Z.a,{}),danger:!0})})},"delete")]}}])})},H=u,E;(function(D){D.email="EscolaLms\\TemplatesEmail\\Core\\EmailChannel",D.pdf="EscolaLms\\TemplatesPdf\\Core\\PdfChannel",D.sms="EscolaLms\\TemplatesSms\\Core\\SmsChannel"})(E||(E={}));var _=function(){var S,M,A,g,L,R,F=Object(m.l)(),N=F.template,f=Object(a.k)(),X=Object(a.m)("@@initialState"),O=X.initialState,h=(S=O==null||(M=O.config)===null||M===void 0||(A=M.find(function(l){return l.key==="hideTemplateTab-sms"}))===null||A===void 0?void 0:A.data)!==null&&S!==void 0?S:!1,p=(g=O==null||(L=O.config)===null||L===void 0||(R=L.find(function(l){return l.key==="hideTemplateTab-email"}))===null||R===void 0?void 0:R.data)!==null&&g!==void 0?g:!1;return Object(e.jsx)(j.a,{children:Object(e.jsxs)(y.a,{tabs:{type:"card",activeKey:N,onChange:function(b){return a.f.push("/configuration/templates/".concat(b))}},children:[!p&&Object(e.jsx)(y.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"email"}),children:Object(e.jsx)(H,{templateType:"email",channel:E.email})},"email"),f.certificatesPermission&&Object(e.jsx)(y.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"PDF"}),children:Object(e.jsx)(H,{templateType:"pdf",channel:E.pdf})},"pdf"),!h&&Object(e.jsx)(y.a.TabPane,{tab:Object(e.jsx)("span",{children:Object(e.jsx)(a.a,{id:"SMS"})}),children:Object(e.jsx)(H,{templateType:"sms",channel:E.sms})},"sms")]})})},ee=o.default=_},rWUb:function(q,o,t){"use strict";t.d(o,"e",function(){return y}),t.d(o,"d",function(){return Q}),t.d(o,"a",function(){return U}),t.d(o,"h",function(){return P}),t.d(o,"b",function(){return w}),t.d(o,"i",function(){return V}),t.d(o,"c",function(){return z}),t.d(o,"f",function(){return Y}),t.d(o,"g",function(){return Z});var i=t("qLMh"),m=t("k1fw"),a=t("9og8"),j=t("9kvl");function y(n,r){return K.apply(this,arguments)}function K(){return K=Object(a.a)(Object(i.a)().mark(function n(r,s){return Object(i.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(j.i)("/api/admin/templates",Object(m.a)({method:"GET",useCache:!1,params:r},s||{})));case 1:case"end":return e.stop()}},n)})),K.apply(this,arguments)}function Q(n,r){return B.apply(this,arguments)}function B(){return B=Object(a.a)(Object(i.a)().mark(function n(r,s){return Object(i.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(j.i)("/api/admin/templates/".concat(r),Object(m.a)({method:"GET"},s||{})));case 1:case"end":return e.stop()}},n)})),B.apply(this,arguments)}function U(n,r){return W.apply(this,arguments)}function W(){return W=Object(a.a)(Object(i.a)().mark(function n(r,s){return Object(i.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(j.i)("/api/admin/templates",Object(m.a)({method:"POST",headers:{"Content-Type":"application/json"},data:r},s||{})));case 1:case"end":return e.stop()}},n)})),W.apply(this,arguments)}function P(n,r,s){return T.apply(this,arguments)}function T(){return T=Object(a.a)(Object(i.a)().mark(function n(r,s,c){return Object(i.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",Object(j.i)("/api/admin/templates/".concat(r),Object(m.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:s},c||{})));case 1:case"end":return u.stop()}},n)})),T.apply(this,arguments)}function w(n,r){return v.apply(this,arguments)}function v(){return v=Object(a.a)(Object(i.a)().mark(function n(r,s){return Object(i.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(j.i)("/api/admin/templates/".concat(r),Object(m.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},s||{})));case 1:case"end":return e.stop()}},n)})),v.apply(this,arguments)}function V(n){return J.apply(this,arguments)}function J(){return J=Object(a.a)(Object(i.a)().mark(function n(r){return Object(i.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(j.i)("/api/admin/templates/variables",Object(m.a)({method:"GET"},r||{})));case 1:case"end":return c.stop()}},n)})),J.apply(this,arguments)}function z(n,r){return I.apply(this,arguments)}function I(){return I=Object(a.a)(Object(i.a)().mark(function n(r,s){return Object(i.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(j.i)("/api/admin/templates/".concat(r,"/preview"),Object(m.a)({method:"GET"},s||{})));case 1:case"end":return e.stop()}},n)})),I.apply(this,arguments)}function Y(n,r,s){return $.apply(this,arguments)}function $(){return $=Object(a.a)(Object(i.a)().mark(function n(r,s,c){return Object(i.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",Object(j.i)("/api/admin/events/trigger-manually/".concat(r),Object(m.a)({method:"POST",headers:{"Content-Type":"application/json"},data:{users:s}},c||{})));case 1:case"end":return u.stop()}},n)})),$.apply(this,arguments)}function Z(n,r,s){return x.apply(this,arguments)}function x(){return x=Object(a.a)(Object(i.a)().mark(function n(r,s,c){return Object(i.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",Object(j.i)("/api/admin/products/".concat(s,"/trigger-event-manually/").concat(r),Object(m.a)({method:"POST",headers:{"Content-Type":"application/json"}},c||{})));case 1:case"end":return u.stop()}},n)})),x.apply(this,arguments)}}}]);
