(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"/qDX":function(d,r,t){},"14J3":function(d,r,t){"use strict";var i=t("cIOH"),f=t.n(i),u=t("1GLa")},"3wW7":function(d,r,t){},"DBJ/":function(d,r,t){"use strict";var i=t("y8nQ"),f=t("Vl3Y"),u=t("etVw"),m=t("q1tI"),O=t.n(m),_=t("nKUr"),I=t.n(_),K=function(j){var U=j.onChange,B=j.url,y=j.name,S=j.extra,s=j.accept,n=j.data;return Object(_.jsx)(f.a,{children:Object(_.jsx)(u.a,{title:"Click here to upload",placeholder:"Click here to upload",onChange:U,name:y,label:"Upload",max:2,fieldProps:{data:n,accept:s,name:y,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://escola-lms-api.stage.etd24.pl").concat(B),extra:S})})};r.a=K},DjyN:function(d,r,t){"use strict";var i=t("cIOH"),f=t.n(i),u=t("Urep"),m=t.n(u),O=t("OaEy")},IzEo:function(d,r,t){"use strict";var i=t("cIOH"),f=t.n(i),u=t("lnY3"),m=t.n(u),O=t("Znn+"),_=t("14J3"),I=t("jCWc")},JGo8:function(d,r,t){},Mwp2:function(d,r,t){"use strict";var i=t("cIOH"),f=t.n(i),u=t("3wW7"),m=t.n(u),O=t("R9oj"),_=t("T2oS"),I=t("DjyN"),K=t("1GLa")},Urep:function(d,r,t){},etVw:function(d,r,t){"use strict";var i=t("cIOH"),f=t("JGo8"),u=t("+L6B"),m=t("MXD1"),O=t("5Dmo"),_=t("8z0m"),I=t("2/Rp"),K=t("q1tI"),x=t.n(K),j=t("z7Xi"),U=t("WFLz");function B(){return B=Object.assign||function(s){for(var n=1;n<arguments.length;n++){var T=arguments[n];for(var l in T)Object.prototype.hasOwnProperty.call(T,l)&&(s[l]=T[l])}return s},B.apply(this,arguments)}var y=function(n,T){var l=n.fieldProps,b=n.name,Y=n.action,g=n.accept,C=n.listType,J=n.title,L=J===void 0?"\u5355\u51FB\u4E0A\u4F20":J,X=n.max,R=n.icon,G=R===void 0?x.a.createElement(j.a,null):R,M=n.value,Q=n.buttonProps,F=n.onChange,Z=n.disabled,z=n.proFieldProps,e=n.fileList,N=(X===void 0||!M||(M==null?void 0:M.length)<X)&&(z==null?void 0:z.mode)!=="read",w=(C!=null?C:l==null?void 0:l.listType)==="picture-card";return x.a.createElement(_.a,B({action:Y,accept:g,ref:T,name:b||"file",listType:C||"picture",fileList:e!=null?e:M},l,{onChange:function(k){F==null||F(k),(l==null?void 0:l.onChange)&&(l==null||l.onChange(k))}}),N&&(w?x.a.createElement("span",null,G," ",L):x.a.createElement(I.a,B({disabled:Z||(l==null?void 0:l.disabled)},Q),G,L)))},S=r.a=Object(U.a)(x.a.forwardRef(y),{getValueFromEvent:function(n){return n.fileList}})},jCWc:function(d,r,t){"use strict";var i=t("cIOH"),f=t.n(i),u=t("1GLa")},lnY3:function(d,r,t){},tU7J:function(d,r,t){"use strict";var i=t("cIOH"),f=t.n(i),u=t("/qDX"),m=t.n(u),O=t("5Dmo"),_=t("5NDa")},u4ym:function(d,r,t){"use strict";t.r(r);var i=t("IzEo"),f=t("bx4M"),u=t("tU7J"),m=t("wFql"),O=t("q1tI"),_=t.n(O),I=t("tMyG"),K=t("DjyN"),x=t("NUBc"),j=t("Mwp2"),U=t("VXEj"),B=t("+L6B"),y=t("2/Rp"),S=t("oBTY"),s=t("k1fw"),n=t("tJVT"),T=t("DYRE"),l=t("zeV3"),b=t("9og8"),Y=t("WmNS"),g=t.n(Y),C=t("9kvl");function J(D,c){return L.apply(this,arguments)}function L(){return L=Object(b.a)(g.a.mark(function D(c,E){return g.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(C.e)("/api/admin/file/list",Object(s.a)({method:"GET",params:c},E||{})));case 1:case"end":return o.stop()}},D)})),L.apply(this,arguments)}function X(D,c){return R.apply(this,arguments)}function R(){return R=Object(b.a)(g.a.mark(function D(c,E){return g.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(C.e)("/api/admin/file/list",Object(s.a)({method:"POST",params:c},E||{})));case 1:case"end":return o.stop()}},D)})),R.apply(this,arguments)}function G(D,c){return M.apply(this,arguments)}function M(){return M=Object(b.a)(g.a.mark(function D(c,E){return g.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(C.e)("/api/admin/file/delete",Object(s.a)({method:"DELETE",data:{url:c}},E||{})));case 1:case"end":return o.stop()}},D)})),M.apply(this,arguments)}var Q=t("/MfK"),F=t("mAF4"),Z=t("dF/Y"),z=t("DBJ/"),e=t("nKUr"),N=function(c){var E=c.directory,h=c.onUploaded;return Object(e.jsxs)(l.b,{align:"start",children:[Object(e.jsxs)(m.a.Text,{children:["Current dir is ",Object(e.jsx)(m.a.Text,{code:!0,children:E})]}),Object(e.jsx)(z.a,{url:"/api/admin/file/upload",name:"file[]",data:{target:E},onChange:function(q){return q.file.status==="done"&&h(E)}})]})},w=function(c){var E=c.defaultDirectory,h=E===void 0?"/":E,o=c.onFile,q=Object(O.useState)({loading:!1,directory:h,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),et=Object(n.a)(q,2),P=et[0],nt=et[1],V=Object(O.useRef)(),A=Object(O.useCallback)(function(v){nt(function(a){return Object(s.a)(Object(s.a)({},a),{},{loading:v})})},[]),p=Object(O.useCallback)(function(v){var a,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,at=function(){return V.current&&V.current.abort()};return at(),V.current=new AbortController,A(!0),J({directory:v,page:H},{signal:(a=V.current)===null||a===void 0?void 0:a.signal}).then(function($){$.success&&nt(function(ot){return Object(s.a)(Object(s.a)(Object(s.a)({},ot),$.data),{},{data:[{url:v.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(S.a)($.data.data.map(function(W){return Object(s.a)(Object(s.a)({},W),{},{url:W.mime==="directory"?"".concat(v,"/").concat(W.name):W.url})}))).filter(function(W){return v==="/"?W.name!=="..":!0}),directory:v,loading:!1})})}).catch(function(){return A(!1)}),function(){at()}},[A]);Object(O.useEffect)(function(){return p(h)},[h,p]);var lt=Object(O.useCallback)(function(v){A(!0),G(v).then(function(){p(P.directory)}).catch(function(){A(!1)})},[p,A,P.directory]);return Object(e.jsxs)("div",{className:"file-browser",children:[Object(e.jsx)(U.b,{loading:P.loading,size:"small",itemLayout:"horizontal",dataSource:P.data,header:Object(e.jsx)(N,{directory:P.directory,onUploaded:function(a){return p(a)}}),footer:Object(e.jsx)(N,{directory:P.directory,onUploaded:function(a){return p(a)}}),renderItem:function(a){return Object(e.jsx)(U.b.Item,{actions:a.mime!=="directory"?[Object(e.jsx)(y.a,{type:"default",danger:!0,icon:Object(e.jsx)(Q.a,{}),size:"small",onClick:function(){return lt(a.url)}})]:[],children:Object(e.jsx)(U.b.Item.Meta,{avatar:a.mime==="directory"?Object(e.jsx)(y.a,{type:"primary",icon:Object(e.jsx)(F.a,{}),size:"small",onClick:function(){return p(a.url)}}):Object(e.jsx)("a",{href:a.url,target:"_blank",children:Object(e.jsx)(y.a,{type:"default",icon:Object(e.jsx)(Z.a,{}),size:"small"})}),description:Object(e.jsx)(_.a.Fragment,{children:Object(e.jsx)(y.a,{type:"text",size:"small",onClick:function(){return a.mime==="directory"?p(a.url):o&&o(a.url)},children:a.name})})})})}}),Object(e.jsx)(x.a,{pageSizeOptions:[],current:P.current_page,total:P.total,pageSize:P.per_page,onChange:function(a){return p(P.directory,a)}})]})},tt=w,k=r.default=function(){return Object(e.jsx)(I.a,{children:Object(e.jsxs)(f.a,{children:[Object(e.jsx)(m.a.Text,{strong:!0,children:"Pages files list will be here"}),Object(e.jsx)(tt,{})]})})}}}]);
