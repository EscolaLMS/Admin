"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8550],{47389:function(W,p,e){var E=e(1413),o=e(67294),O=e(27363),u=e(84089),D=function(A,f){return o.createElement(u.Z,(0,E.Z)((0,E.Z)({},A),{},{ref:f,icon:O.Z}))},h=o.forwardRef(D);p.Z=h},58638:function(W,p,e){e.d(p,{Z:function(){return A}});var E=e(1413),o=e(67294),O={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},u=O,D=e(84089),h=function(j,P){return o.createElement(D.Z,(0,E.Z)((0,E.Z)({},j),{},{ref:P,icon:u}))},M=o.forwardRef(h),A=M},51042:function(W,p,e){var E=e(1413),o=e(67294),O=e(42110),u=e(84089),D=function(A,f){return o.createElement(u.Z,(0,E.Z)((0,E.Z)({},A),{},{ref:f,icon:O.Z}))},h=o.forwardRef(D);p.Z=h},16894:function(W,p,e){var E=e(72717);p.ZP=E.Z},19326:function(W,p,e){var E=e(97857),o=e.n(E),O=e(15009),u=e.n(O),D=e(99289),h=e.n(D),M=e(5574),A=e.n(M),f=e(13769),j=e.n(f),P=e(2453),m=e(14726),C=e(67294),U=e(80854),T=e(85893),B=["url","filename","children"],K=function(v){var r=v.url,s=v.filename,d=v.children,l=j()(v,B),t=(0,C.useState)(!1),_=A()(t,2),n=_[0],y=_[1],H=(0,C.useCallback)(h()(u()().mark(function F(){var x,R,L,I;return u()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return y(!0),c.prev=1,c.next=4,fetch("".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(r),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}});case 4:return x=c.sent,R=document.createElement("a"),c.next=8,x.blob();case 8:L=c.sent,I=window.URL.createObjectURL(L),R.download=s,R.href=I,R.click(),y(!1),P.ZP.success((0,T.jsx)(U.FormattedMessage,{id:"file_downloaded",defaultMessage:"File downloaded"})),c.next=21;break;case 17:c.prev=17,c.t0=c.catch(1),y(!1),P.ZP.error((0,T.jsx)(U.FormattedMessage,{id:"file_downloaded_error",defaultMessage:"Can't download file"}));case 21:case"end":return c.stop()}},F,null,[[1,17]])})),[r,s]);return(0,T.jsx)(m.ZP,o()(o()({loading:n},l),{},{onClick:H,children:d}))};p.Z=K},9412:function(W,p,e){var E=e(29477),o=e(67294),O=e(85893),u=function(h){var M=h.onSuccess,A=h.onError,f=h.hideLabel;return(0,O.jsx)(E.Z,{url:"/api/admin/hh5p/content/upload",name:"h5p_file",accept:".h5p",hideLabel:f,onChange:function(P){P.file.status==="done"&&P.file.response&&M(P.file.response),P.file.status==="error"&&A()}})};p.C=u},29477:function(W,p,e){var E=e(97857),o=e.n(E),O=e(5574),u=e.n(O),D=e(55523),h=e(75842),M=e(21974),A=e(67294),f=e(80854),j=e(85893);function P(m){var C=m.onChange,U=m.onUpload,T=m.url,B=m.name,K=m.extra,Z=m.accept,v=m.data,r=m.wrapInForm,s=r===void 0?!0:r,d=m.title,l=m.formProps,t=m.maxFiles,_=m.clearListAfterUpload,n=m.hideLabel,y=m.disabled,H=m.showUploadList,F=(0,A.useState)(),x=u()(F,2),R=x[0],L=x[1],I=(0,f.useIntl)();return v&&v[B]&&delete v[B],(0,j.jsx)(M.Z,{condition:s,wrap:function(c){return(0,j.jsx)(h.Z,o()(o()({},l),{},{children:c}))},children:(0,j.jsx)(D.Z,{title:d||" ".concat(I.formatMessage({id:"upload_click_here"})),placeholder:I.formatMessage({id:"upload_click_here"}),label:!n&&(0,j.jsx)(f.FormattedMessage,{id:"upload"}),max:t!=null?t:2,fieldProps:{data:v,accept:Z,name:B,showUploadList:H,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))},onChange:function(c){L(c),C&&C(c),c.file.status==="done"&&(U&&U(c.file.response),_&&L(void 0))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(T),extra:K,fileList:R==null?void 0:R.fileList,disabled:y})})}p.Z=P},5436:function(W,p,e){e.r(p);var E=e(97857),o=e.n(E),O=e(15009),u=e.n(O),D=e(99289),h=e.n(D),M=e(5574),A=e.n(M),f=e(19326),j=e(9412),P=e(97704),m=e(66419),C=e(47389),U=e(82061),T=e(90389),B=e(58638),K=e(51042),Z=e(74453),v=e(16894),r=e(2453),s=e(83062),d=e(14726),l=e(86738),t=e(67294),_=e(80854),n=e(85893),y=function(){var F=(0,t.useState)(!1),x=A()(F,2),R=x[0],L=x[1],I=(0,t.useRef)(),G=(0,_.useIntl)(),c=(0,t.useCallback)(function(){var g=h()(u()().mark(function i(a){var S,w;return u()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return L(!0),S=r.ZP.loading((0,n.jsx)(_.FormattedMessage,{id:"loading",defaultMessage:"loading"})),b.prev=2,b.next=5,(0,P.jc)(a);case 5:return S(),r.ZP.success((0,n.jsx)(_.FormattedMessage,{id:"success",defaultMessage:"success"})),L(!1),(w=I.current)===null||w===void 0||w.reload(),b.abrupt("return",!0);case 12:return b.prev=12,b.t0=b.catch(2),S(),r.ZP.error((0,n.jsx)(_.FormattedMessage,{id:"error",defaultMessage:"error"})),L(!1),b.abrupt("return",!1);case 18:case"end":return b.stop()}},i,null,[[2,12]])}));return function(i){return g.apply(this,arguments)}}(),[I]),N=[{title:(0,n.jsx)(_.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",sorter:!0,search:!1,width:"80px"},{title:(0,n.jsx)(_.FormattedMessage,{id:"newH5P",defaultMessage:"newH5P"}),dataIndex:"upload",hideInSearch:!1,hideInTable:!0,renderFormItem:function(){return[(0,n.jsx)(j.C,{hideLabel:!0,onSuccess:function(){I.current&&I.current.reload(),r.ZP.success((0,n.jsx)(_.FormattedMessage,{id:"H5P_uploaded",defaultMessage:"new H5P uploaded successfully"}))},onError:function(){return r.ZP.error((0,n.jsx)(_.FormattedMessage,{id:"error",defaultMessage:"error"}))}},"upload")]}},{title:(0,n.jsx)(_.FormattedMessage,{id:"title",defaultMessage:"title"}),dataIndex:"title",sorter:function(i,a){return i.title.length-a.title.length},render:function(i,a){return a.title}},{title:(0,n.jsx)(_.FormattedMessage,{id:"library",defaultMessage:"library"}),dataIndex:"library",sorter:function(i,a){return i.library.title.length-a.library.title.length},search:!1,render:function(i,a){return a.library.title}},{title:(0,n.jsx)(_.FormattedMessage,{id:"library_id",defaultMessage:"library_id"}),dataIndex:"library_id",sorter:function(i,a){return i.library.id-a.library.id},render:function(i,a){return a.library.id}},{title:(0,n.jsx)(_.FormattedMessage,{id:"count_h5p",defaultMessage:"count_h5p"}),dataIndex:"count_h5p",sorter:function(i,a){return i.count_h5p-a.count_h5p},search:!1,render:function(i,a){return a.count_h5p}},{title:(0,n.jsx)(_.FormattedMessage,{id:"options",defaultMessage:"options"}),dataIndex:"option",valueType:"option",render:function(i,a){return[(0,n.jsx)(_.Link,{to:"/courses/h5ps/".concat(a.id),children:(0,n.jsx)(s.Z,{title:(0,n.jsx)(_.FormattedMessage,{id:"edit",defaultMessage:"edit"}),children:(0,n.jsx)(d.ZP,{type:"primary",icon:(0,n.jsx)(C.Z,{})})})},"edit"),(0,n.jsx)(l.Z,{disabled:a.count_h5p!==0,title:(0,n.jsx)(_.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:function(){return a.id&&c(a.id)},okText:(0,n.jsx)(_.FormattedMessage,{id:"yes",defaultMessage:"Yes"}),cancelText:(0,n.jsx)(_.FormattedMessage,{id:"no",defaultMessage:"No"}),children:(0,n.jsx)(s.Z,{title:(0,n.jsx)(_.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,n.jsx)(d.ZP,{disabled:a.count_h5p!==0,type:"primary",icon:(0,n.jsx)(U.Z,{}),danger:!0})})},"delete"),(0,n.jsx)(_.Link,{to:"/courses/h5ps/preview/".concat(a.id),children:(0,n.jsx)(s.Z,{title:(0,n.jsx)(_.FormattedMessage,{id:"preview",defaultMessage:"preview"}),children:(0,n.jsx)(d.ZP,{icon:(0,n.jsx)(T.Z,{})})})},"preview"),(0,n.jsx)(s.Z,{title:(0,n.jsx)(_.FormattedMessage,{id:"export",defaultMessage:"export"}),children:(0,n.jsx)(f.Z,{url:"/api/admin/hh5p/content/".concat(a.id,"/export"),filename:"".concat(a.title.split(" ").join("-").toLocaleLowerCase(),".h5p"),icon:(0,n.jsx)(B.Z,{})})},"export")]}}];return(0,n.jsx)(Z._z,{children:(0,n.jsx)(v.ZP,{loading:R,headerTitle:G.formatMessage({id:"menu.Courses.H5Ps",defaultMessage:"H5Ps List"}),actionRef:I,rowKey:"id",search:{layout:"vertical"},toolBarRender:function(){return[(0,n.jsx)(_.Link,{to:"/courses/h5ps/new",children:(0,n.jsxs)(d.ZP,{type:"primary",children:[(0,n.jsx)(K.Z,{})," ",(0,n.jsx)(_.FormattedMessage,{id:"new",defaultMessage:"new"})]},"primary")},"new")]},request:function(i,a){var S=i.pageSize,w=i.current,z=i.title,b=i.library_id;return L(!0),(0,P.Kn)(o()({title:z,library_id:b,per_page:S,page:w},(0,m.di)(a))).then(function($){return L(!1),$.success?{data:$.data,total:$.meta.total,success:!0}:[]})},columns:N})})};p.default=y},97704:function(W,p,e){e.d(p,{Kn:function(){return A},LK:function(){return C},RN:function(){return m},gq:function(){return Z},jc:function(){return B},x0:function(){return U}});var E=e(15009),o=e.n(E),O=e(97857),u=e.n(O),D=e(99289),h=e.n(D),M=e(80854);function A(r,s){return f.apply(this,arguments)}function f(){return f=h()(o()().mark(function r(s,d){return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,M.request)("/api/admin/hh5p/content",u()({method:"GET",params:s},d||{})));case 1:case"end":return t.stop()}},r)})),f.apply(this,arguments)}function j(r,s){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime().mark(function r(s,d){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/admin/hh5p/content/".concat(s),_objectSpread({method:"GET"},d||{})));case 1:case"end":return t.stop()}},r)})),P.apply(this,arguments)}var m=function(s){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en",l=arguments.length>2?arguments[2]:void 0,t=s?"/api/admin/hh5p/editor/".concat(s):"/api/admin/hh5p/editor";return t=d?"".concat(t,"?lang=").concat(d):t,(0,M.request)(t,u()({method:"GET"},l||{}))},C=function(s){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en",l=arguments.length>2?arguments[2]:void 0,t="/api/admin/hh5p/content/".concat(s);return t=d?"".concat(t,"?lang=").concat(d):t,(0,M.request)(t,u()({method:"GET"},l||{}))};function U(r,s,d){return T.apply(this,arguments)}function T(){return T=h()(o()().mark(function r(s,d,l){return o()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,M.request)(d?"/api/admin/hh5p/content/".concat(d):"/api/admin/hh5p/content",u()({method:"POST",headers:{"Content-Type":"application/json"},data:s},l||{})));case 1:case"end":return _.stop()}},r)})),T.apply(this,arguments)}function B(r){return K.apply(this,arguments)}function K(){return K=h()(o()().mark(function r(s){return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,M.request)("/api/admin/hh5p/content/".concat(s),{method:"DELETE"}));case 1:case"end":return l.stop()}},r)})),K.apply(this,arguments)}function Z(r){return v.apply(this,arguments)}function v(){return v=h()(o()().mark(function r(s){return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,M.request)("/api/admin/hh5p/content?per_page=0",u()({method:"GET"},s||{})));case 1:case"end":return l.stop()}},r)})),v.apply(this,arguments)}}}]);
