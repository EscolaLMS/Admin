(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{"DBJ/":function(V,p,e){"use strict";var g=e("k1fw"),y=e("y8nQ"),F=e("Vl3Y"),m=e("etVw"),I=e("q1tI"),D=e.n(I),S=e("9kvl"),L=e("qFDU"),f=e("nKUr"),T=e.n(f),R=function(u){var P=u.onChange,A=u.url,r=u.name,o=u.extra,v=u.accept,n=u.data,a=u.wrapInForm,x=a===void 0?!0:a,G=u.title,Q=u.formProps,Y=Object(S.i)();return n&&n[r]&&delete n[r],Object(f.jsx)(L.a,{condition:x,wrap:function(Z){return Object(f.jsx)(F.a,Object(g.a)(Object(g.a)({},Q),{},{children:Z}))},children:Object(f.jsx)(m.a,{title:G||Object(f.jsx)(S.a,{id:"upload_click_here"}),placeholder:Y.formatMessage({id:"upload_click_here"}),onChange:P,label:Object(f.jsx)(S.a,{id:"upload"}),max:2,fieldProps:{data:n,accept:v,name:r,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(A),extra:o})})};p.a=R},"G/Ub":function(V,p,e){"use strict";e.d(p,"d",function(){return D}),e.d(p,"a",function(){return L}),e.d(p,"b",function(){return T}),e.d(p,"c",function(){return N}),e.d(p,"e",function(){return P});var g=e("k1fw"),y=e("9og8"),F=e("WmNS"),m=e.n(F),I=e("9kvl");function D(r){return S.apply(this,arguments)}function S(){return S=Object(y.a)(m.a.mark(function r(o){return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(I.f)("/api/admin/roles",Object(g.a)({method:"GET",useCache:!1},o||{})));case 1:case"end":return n.stop()}},r)})),S.apply(this,arguments)}function L(r,o){return f.apply(this,arguments)}function f(){return f=Object(y.a)(m.a.mark(function r(o,v){return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(I.f)("/api/admin/roles",Object(g.a)({method:"POST",headers:{"Content-Type":"application/json"},data:o},v||{})));case 1:case"end":return a.stop()}},r)})),f.apply(this,arguments)}function T(r,o){return R.apply(this,arguments)}function R(){return R=Object(y.a)(m.a.mark(function r(o,v){return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(I.f)("/api/admin/roles/".concat(o),Object(g.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},v||{})));case 1:case"end":return a.stop()}},r)})),R.apply(this,arguments)}function N(r,o){return u.apply(this,arguments)}function u(){return u=Object(y.a)(m.a.mark(function r(o,v){return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(I.f)("/api/admin/roles/".concat(o),Object(g.a)({method:"GET",useCache:!1},v||{})));case 1:case"end":return a.stop()}},r)})),u.apply(this,arguments)}function P(r,o,v){return A.apply(this,arguments)}function A(){return A=Object(y.a)(m.a.mark(function r(o,v,n){return m.a.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",Object(I.f)("/api/admin/roles/".concat(o),Object(g.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:v},n||{})));case 1:case"end":return x.stop()}},r)})),A.apply(this,arguments)}},n6PA:function(V,p,e){},u7Dd:function(V,p,e){"use strict";e.r(p),e.d(p,"TableColumns",function(){return ae});var g=e("P2fV"),y=e("NJEC"),F=e("5Dmo"),m=e("3S7+"),I=e("+L6B"),D=e("2/Rp"),S=e("miYZ"),L=e("tsqr"),f=e("tJVT"),T=e("k1fw"),R=e("PpiC"),N=e("+BJd"),u=e("mr32"),P=e("9og8"),A=e("WmNS"),r=e.n(A),o=e("4KAj"),v=e("xvlK"),n=e("q1tI"),a=e("9kvl"),x=e("55Ip"),G=e("tMyG"),Q=e("Qiat"),Y=e("sWYD"),H=e("VK58");function Z(b,i){return X.apply(this,arguments)}function X(){return X=Object(P.a)(r.a.mark(function b(i,s){return r.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(a.f)("/api/admin/csv/users",Object(T.a)({params:Object(T.a)(Object(T.a)({},i),{},{per_page:i&&i.pageSize,page:i&&i.current}),method:"GET",headers:{accept:"application/csv"},useCache:!1},s||{})));case 1:case"end":return d.stop()}},b)})),X.apply(this,arguments)}var re=e("G3dp"),ne=e("/MfK"),se=e("mGZj"),le=e("DBJ/"),me=e("OaEy"),te=e("2fM7"),fe=e("T2oS"),ie=e("W9HT"),ce=e("G/Ub"),t=e("nKUr"),ue=function(i){var s=i.value,E=i.onChange,d=i.multiple,B=d===void 0?!1:d,q=Object(n.useState)(),$=Object(f.a)(q,2),U=$[0],_=$[1],z=Object(n.useState)(!1),J=Object(f.a)(z,2),K=J[0],c=J[1],j=Object(n.useRef)(),h=Object(n.useRef)(),C=Object(n.useCallback)(function(O){_(O)},[]);Object(n.useEffect)(function(){j.current=U},[U]);var l=Object(n.useCallback)(function(O){c(!0),h.current&&h.current.abort(),h.current=new AbortController,Object(ce.d)({search:O}).then(function(w){w.success&&C(w.data),c(!1)}).catch(function(){return c(!1)})},[C]),M=Object(n.useCallback)(function(O){l(O)},[l]);return Object(t.jsx)(te.a,{onFocus:function(){return l()},allowClear:!0,style:{width:"100%"},value:s,onChange:E,mode:B?"multiple":void 0,showSearch:!0,onSearch:M,placeholder:Object(t.jsx)(a.a,{id:"select_user_role",defaultMessage:"Select role"}),optionFilterProp:"children",filterOption:function(w,W){if(W&&W.children){var ee;return(W==null||(ee=W.children)===null||ee===void 0?void 0:ee.toString().toLowerCase().indexOf(w.toLowerCase()))>=0}return!0},notFoundContent:K?Object(t.jsx)(ie.a,{size:"small"}):null,children:U&&U.map(function(O){return Object(t.jsx)(te.a.Option,{value:O.name,children:O.name},O.id)})})},oe=ue,k=e("nhC9"),he=e("n6PA"),de=function(){var b=Object(P.a)(r.a.mark(function i(s){return r.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Object(H.b)(s);case 2:return d.abrupt("return",!0);case 3:case"end":return d.stop()}},i)}));return function(s){return b.apply(this,arguments)}}(),ae=[{title:Object(t.jsx)(a.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"created_at",defaultMessage:"created_at"}),dataIndex:"created_at",hideInSearch:!0,render:function(i,s){return s.created_at&&Object(Y.a)(new Date(s.created_at),se.a)}},{title:Object(t.jsx)(a.a,{id:"first_name",defaultMessage:"first_name"}),dataIndex:"first_name",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"last_name",defaultMessage:"last_name"}),dataIndex:"last_name",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"email",defaultMessage:"email"}),dataIndex:"email",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"search",defaultMessage:"search"}),dataIndex:"search",hideInSearch:!1,hideInTable:!0,hideInDescriptions:!0,tooltip:Object(t.jsx)(a.a,{id:"search_tooltip_1"})},{title:Object(t.jsx)(a.a,{id:"is_active"}),dataIndex:"is_active",hideInSearch:!0,render:function(i,s){return[Object(t.jsx)(u.a,{color:s.is_active?"green":"red",children:s.is_active?Object(t.jsx)(a.a,{id:"Active"}):Object(t.jsx)(a.a,{id:"Inactive"})})]}},{title:Object(t.jsx)(a.a,{id:"email_verified",defaultMessage:"email_verified"}),dataIndex:"email_verified",hideInSearch:!0,render:function(i,s){return[Object(t.jsx)(u.a,{color:s.email_verified?"green":"red",children:s.email_verified?Object(t.jsx)(a.a,{id:"verified"}):Object(t.jsx)(a.a,{id:"unverified"})})]}},{title:Object(t.jsx)(a.a,{id:"roles",defaultMessage:"roles"}),dataIndex:"roles",hideInSearch:!0,render:function(i,s){return s.roles.map(function(E){return Object(t.jsx)(u.a,{children:E},E)})}},{hideInSearch:!1,title:Object(t.jsx)(a.a,{id:"role",defaultMessage:"role"}),dataIndex:"role",renderFormItem:function(i,s){var E=s.type,d=s.defaultRender,B=Object(R.a)(s,["type","defaultRender"]);return Object(t.jsx)(oe,Object(T.a)({},B))}}],je=function(){var i=Object(n.useRef)(),s=Object(a.i)(),E=Object(n.useState)({}),d=Object(f.a)(E,2),B=d[0],q=d[1],$=Object(n.useState)(!1),U=Object(f.a)($,2),_=U[0],z=U[1],J=Object(n.useCallback)(Object(P.a)(r.a.mark(function K(){var c,j,h;return r.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return z(!0),l.prev=1,l.next=4,Z(B);case 4:c=l.sent,c&&(j="data:text/csv;charset=utf-8,"+c,h=document.createElement("a"),h.href=j,h.download="users.csv",document.body.appendChild(h),h.click(),document.body.removeChild(h)),l.next=11;break;case 8:l.prev=8,l.t0=l.catch(1),console.error(l.t0);case 11:return l.prev=11,z(!1),l.finish(11);case 14:case"end":return l.stop()}},K,null,[[1,8,11,14]])})),[B]);return Object(t.jsx)(G.a,{children:Object(t.jsxs)(k.a,{tabs:{type:"card",activeKey:"list",onChange:function(c){switch(c){case"list":return a.d.push("/users");case"fields":return a.d.push("/users/fields");default:return a.d.push("/users/".concat(c))}}},children:[Object(t.jsx)(k.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"list"}),children:Object(t.jsx)(Q.a,{headerTitle:s.formatMessage({id:"users",defaultMessage:"users"}),actionRef:i,rowKey:"key",search:{labelWidth:120},toolBarRender:function(){return[Object(t.jsx)(le.a,{title:s.formatMessage({id:"import_users"}),url:"/api/admin/csv/users",name:"file",accept:".csv",data:{return_url:"".concat(window.location.origin,"/#/user/reset-password")},onChange:function(j){j.file.status==="done"&&j.file.response.success&&L.default.success(j.file.response.message),j.file.status==="error"&&(L.default.error(j.file.response.message),console.error(j.file.response))}}),Object(t.jsxs)(D.a,{loading:_,type:"primary",onClick:function(){return J()},children:[Object(t.jsx)(o.a,{})," ",Object(t.jsx)(a.a,{id:"export",defaultMessage:"export"})]},"primary"),Object(t.jsx)(x.a,{to:"/users/new",children:Object(t.jsxs)(D.a,{type:"primary",children:[Object(t.jsx)(v.a,{})," ",Object(t.jsx)(a.a,{id:"new",defaultMessage:"new"})]},"primary")})]},request:function(c){var j=c.pageSize,h=c.current,C=c.search,l=c.role;q({pageSize:j,current:h,search:C,role:l});var M=l&&l.toString()==="all"?void 0:l;return Object(H.m)({pageSize:j,current:h,search:C,role:M}).then(function(O){return O.success?{data:O.data,total:O.meta.total,success:!0}:[]})},columns:[].concat(ae,[{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption"}),dataIndex:"option",valueType:"option",render:function(c,j){return[Object(t.jsx)(x.a,{to:"/users/".concat(j.id,"/user_info"),children:Object(t.jsx)(m.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(D.a,{type:"primary",icon:Object(t.jsx)(re.a,{})})})},"edit"),Object(t.jsx)(y.a,{title:Object(t.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(P.a)(r.a.mark(function h(){var C;return r.a.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,de(j.id);case 2:C=M.sent,C&&i.current&&i.current.reload();case 4:case"end":return M.stop()}},h)})),okText:Object(t.jsx)(a.a,{id:"yes"}),cancelText:Object(t.jsx)(a.a,{id:"no"}),children:Object(t.jsx)(m.a,{title:Object(t.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(D.a,{type:"primary",icon:Object(t.jsx)(ne.a,{}),danger:!0})})},"delete")]}}])})},"list"),Object(t.jsx)(k.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"ModelFields"})},"fields")]})})},Oe=p.default=je}}]);
