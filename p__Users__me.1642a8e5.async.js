(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{"0TUn":function(J,j,e){"use strict";e.d(j,"c",function(){return b}),e.d(j,"a",function(){return D}),e.d(j,"b",function(){return s});var v=e("k1fw"),M=e("9og8"),p=e("WmNS"),o=e.n(p),d=e("9kvl");function b(_,u){return i.apply(this,arguments)}function i(){return i=Object(M.a)(o.a.mark(function _(u,r){return o.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(d.f)("/api/model-fields",Object(v.a)({method:"GET",params:u},r||{})));case 1:case"end":return l.stop()}},_)})),i.apply(this,arguments)}function D(_,u){return n.apply(this,arguments)}function n(){return n=Object(M.a)(o.a.mark(function _(u,r){return o.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(d.f)("/api/admin/model-fields",Object(v.a)({method:"POST",data:u},r||{})));case 1:case"end":return l.stop()}},_)})),n.apply(this,arguments)}function s(_,u){return m.apply(this,arguments)}function m(){return m=Object(M.a)(o.a.mark(function _(u,r){return o.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(d.f)("/api/admin/model-fields",Object(v.a)({method:"DELETE",data:u},r||{})));case 1:case"end":return l.stop()}},_)})),m.apply(this,arguments)}},"5ddx":function(J,j,e){"use strict";var v=e("9og8"),M=e("+L6B"),p=e("2/Rp"),o=e("tJVT"),d=e("WmNS"),b=e.n(d),i=e("q1tI"),D=e.n(i),n=e("9kvl"),s=e("Qiat"),m=e("VK58"),_=e("xvlK"),u=e("Xcxh"),r=e("y8nQ"),h=e("Vl3Y"),l=e("rmhi"),A=e("VMEa"),x=e("Qurx"),a=e("nKUr"),c=function(K){var W=Object(n.i)(),P=K.visible,B=K.onVisibleChange,I=K.onFinish,y=h.a.useForm(),S=Object(o.a)(y,1),V=S[0];return Object(i.useEffect)(function(){return function(){V.resetFields()}},[]),Object(a.jsx)(l.a,{form:V,title:W.formatMessage({id:"newSetting",defaultMessage:"newSetting"}),width:"30vw",visible:P,onVisibleChange:B,onFinish:I,children:Object(a.jsxs)(A.a.Group,{children:[Object(a.jsx)(x.a,{label:Object(a.jsx)(n.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"}),Object(a.jsx)(x.a,{label:Object(a.jsx)(n.a,{id:"value",defaultMessage:"value"}),rules:[{required:!0}],width:"md",name:"value"})]})})},O=c,F=function(K){var W=K.user,P=K.isProfile,B=P===void 0?!1:P,I=Object(i.useRef)(),y=Object(n.i)(),S=Object(i.useState)(!1),V=Object(o.a)(S,2),U=V[0],N=V[1],Y=Object(i.useState)("PATCH"),z=Object(o.a)(Y,2),T=z[0],C=z[1],R=[{title:Object(a.jsx)(n.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(a.jsx)(n.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInSearch:!0}],L=Object(i.useCallback)(function(g){var E=g&&Object.entries(g).map(function(f){return{key:f[0],value:f[1]}});return E},[W]);return Object(a.jsxs)(D.a.Fragment,{children:[Object(a.jsx)(s.a,{headerTitle:y.formatMessage({id:"menu.settings"}),actionRef:I,rowKey:"id",search:!1,toolBarRender:B?function(){return[Object(a.jsxs)(p.a,{type:"primary",onClick:function(){N(-1),C("PATCH")},children:[Object(a.jsx)(_.a,{})," ",Object(a.jsx)(n.a,{id:"pages.searchTable.new"})]},"primary"),Object(a.jsxs)(p.a,{color:"yellow",type:"primary",onClick:function(){N(-1),C("PUT")},children:[Object(a.jsx)(u.a,{})," ",Object(a.jsx)(n.a,{id:"user.settings.overwrite"})]},"primary")]}:!1,request:function(){return Object(m.d)(Number(W)).then(function(E){return E.success?{data:L(E.data)}:[]})},columns:R}),Object(a.jsx)(O,{id:U,visible:Number.isInteger(U),onVisibleChange:function(E){return E===!1&&N(!1)},onFinish:function(){var g=Object(v.a)(b.a.mark(function E(f){var Q;return b.a.wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,Object(m.g)(Number(W),T,f);case 2:Q=$.sent,Q.success&&(N(!1),I.current&&I.current.reload());case 4:case"end":return $.stop()}},E)}));return function(E){return g.apply(this,arguments)}}()})]})},G=j.a=F},"DBJ/":function(J,j,e){"use strict";var v=e("k1fw"),M=e("y8nQ"),p=e("Vl3Y"),o=e("etVw"),d=e("9kvl"),b=e("qFDU"),i=e("nKUr"),D=e.n(i);function n(s){var m=s.onChange,_=s.onUpload,u=s.url,r=s.name,h=s.extra,l=s.accept,A=s.data,x=s.wrapInForm,a=x===void 0?!0:x,c=s.title,O=s.formProps,F=Object(d.i)();return A&&A[r]&&delete A[r],Object(i.jsx)(b.a,{condition:a,wrap:function(t){return Object(i.jsx)(p.a,Object(v.a)(Object(v.a)({},O),{},{children:t}))},children:Object(i.jsx)(o.a,{title:c||Object(i.jsx)(d.a,{id:"upload_click_here"}),placeholder:F.formatMessage({id:"upload_click_here"}),onChange:function(t){m&&m(t),t.file.status==="done"&&_&&_(t.file.response)},label:Object(i.jsx)(d.a,{id:"upload"}),max:2,fieldProps:{data:A,accept:l,name:r,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(u),extra:h})})}j.a=n},Jfn2:function(J,j,e){"use strict";var v=e("k1fw"),M=e("XCrF"),p=e("1GRj"),o=e("PpiC"),d=e("q1tI"),b=e.n(d),i=e("nKUr"),D=e.n(i),n=function(m){var _=m.path,u=m.size,r=m.srcSizes,h=m.alt,l=h===void 0?"LMS Image":h,A=Object(o.a)(m,["path","size","srcSizes","alt"]),x="".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(_,"&w=").concat(r?r[0]:u),a=r&&r.map(function(c){return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(_,"&w=").concat(c," ").concat(c,"w")});return Object(i.jsx)("div",{className:"escolalms-image",children:Object(i.jsx)(p.a,Object(v.a)({src:x,srcSet:a&&a.join(","),alt:l},A))})};j.a=n},TpMl:function(J,j,e){"use strict";var v=e("tJVT"),M=e("q1tI"),p=e.n(M),o=e("0TUn"),d=function(i){var D=Object(M.useState)({state:"initial"}),n=Object(v.a)(D,2),s=n[0],m=n[1];return Object(M.useEffect)(function(){m({state:"loading"}),Object(o.c)({class_type:i}).then(function(_){_.success&&m({state:"loaded",list:_.data})})},[i]),s};j.a=d},YDZB:function(J,j,e){"use strict";var v=e("2qtc"),M=e("kLXV"),p=e("7Kak"),o=e("9yH6"),d=e("+L6B"),b=e("2/Rp"),i=e("tJVT"),D=e("q1tI"),n=e.n(D),s=e("gU/Y"),m=e("9kvl"),_=e("u95b"),u=e.n(_),r=e("nKUr"),h=e.n(r),l=function(x){var a=x.value,c=x.onChange,O=Object(D.useState)(!1),F=Object(i.a)(O,2),G=F[0],t=F[1],K=Object(D.useCallback)(function(){t(!1)},[]),W=Object(D.useState)("code"),P=Object(i.a)(W,2),B=P[0],I=P[1];return Object(r.jsxs)("div",{children:[Object(r.jsx)(b.a,{type:"primary",onClick:function(){return t(!0)},size:"small",children:Object(r.jsx)(m.a,{id:"json_editor"})}),Object(r.jsxs)(M.a,{title:"JSON",visible:G,onOk:K,onCancel:K,children:[Object(r.jsxs)(o.a.Group,{onChange:function(S){return I(S.target.value)},value:B,children:[Object(r.jsx)(o.a,{value:"tree",children:"tree"}),Object(r.jsx)(o.a,{value:"view",children:"view"}),Object(r.jsx)(o.a,{value:"form",children:"form"}),Object(r.jsx)(o.a,{value:"code",children:"code"}),Object(r.jsx)(o.a,{value:"text",children:"text"})]}),Object(r.jsx)(s.a,{mode:B,value:a,onChange:function(S){return c&&c(S)}},B)]})]})};j.a=l},YDsB:function(J,j,e){"use strict";var v=e("YDZB"),M=e("FJDo"),p=e("tneF"),o=e("Qurx"),d=e("VMEa"),b=e("BiO0"),i=e("q1tI"),D=e.n(i),n=e("9kvl"),s=e("nKUr"),m=e.n(s),_=function(r){var h=r.field,l=Object(n.i)(),A=function(a){var c=a&&a.extra&&a.extra.find(function(O){return O[Object(n.c)()]});switch(a.type){case"number":return Object(s.jsx)(M.a,{width:"md",name:a.name,label:c?c[Object(n.c)()]:Object(s.jsx)(n.a,{id:a.name}),tooltip:Object(s.jsx)(n.a,{id:a.name}),placeholder:l.formatMessage({id:a.name,defaultMessage:a.name}),min:1,max:1024,fieldProps:{step:1}});case"boolean":return Object(s.jsx)(p.a,{name:a.name,children:c?c[Object(n.c)()]:Object(s.jsx)(n.a,{id:a.name})});case"varchar":return Object(s.jsx)(o.a,{width:"md",name:a.name,label:c?c[Object(n.c)()]:Object(s.jsx)(n.a,{id:a.name}),tooltip:Object(s.jsx)(n.a,{id:a.name}),placeholder:l.formatMessage({id:a.name})});case"json":return Object(s.jsx)(d.a.Item,{name:a.name,label:c?c[Object(n.c)()]:Object(s.jsx)(n.a,{id:a.name}),tooltip:Object(s.jsx)(n.a,{id:a.name}),valuePropName:"value",children:Object(s.jsx)(v.a,{})});case"text":default:return Object(s.jsx)(b.a,{width:"md",name:a.name,label:c?c[Object(n.c)()]:Object(s.jsx)(n.a,{id:a.name}),tooltip:Object(s.jsx)(n.a,{id:a.name}),placeholder:l.formatMessage({id:a.name})})}};return Object(s.jsx)(s.Fragment,{children:A(h)})};j.a=_},fWLy:function(J,j,e){"use strict";e.r(j);var v=e("T2oS"),M=e("W9HT"),p=e("miYZ"),o=e("tsqr"),d=e("k1fw"),b=e("9og8"),i=e("tJVT"),D=e("WmNS"),n=e.n(D),s=e("q1tI"),m=e.n(s),_=e("VMEa"),u=e("Qurx"),r=e("nhC9"),h=e("VK58"),l=e("TpMl"),A=e("tMyG"),x=e("DBJ/"),a=e("Jfn2"),c=e("Ty5D"),O=e("9kvl"),F=e("5ddx"),G=e("YDsB"),t=e("nKUr"),K=e.n(t);j.default=function(){var W=Object(c.h)(),P=Object(O.i)(),B=W.tab,I=B===void 0?"general":B,y=Object(l.a)("EscolaLms\\Auth\\Models\\User"),S=Object(s.useState)(),V=Object(i.a)(S,2),U=V[0],N=V[1];Object(s.useEffect)(function(){var T=function(){var C=Object(b.a)(n.a.mark(function R(){var L;return n.a.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,Object(h.e)();case 2:L=E.sent,L.success&&N(Object(d.a)(Object(d.a)({},L.data),{},{bio:L.data.bio||""}));case 4:case"end":return E.stop()}},R)}));return function(){return C.apply(this,arguments)}}();T()},[]);var Y=Object(s.useMemo)(function(){return{onFinish:function(){var T=Object(b.a)(n.a.mark(function R(L){var g;return n.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Object(h.h)(L);case 2:g=f.sent,o.default.success(g.message);case 4:case"end":return f.stop()}},R)}));function C(R){return T.apply(this,arguments)}return C}(),initialValues:U}},[U]),z=Object(s.useMemo)(function(){return{onFinish:function(){var T=Object(b.a)(n.a.mark(function R(L){var g;return n.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Object(h.i)(L);case 2:g=f.sent,o.default.success(g.message);case 4:case"end":return f.stop()}},R)}));function C(R){return T.apply(this,arguments)}return C}(),initialValues:U}},[U]);return U?Object(t.jsx)(A.a,{title:Object(t.jsx)(O.a,{id:"my_profile"}),header:{breadcrumb:{routes:[{path:"users",breadcrumbName:P.formatMessage({id:"menu.Users"})},{path:"me",breadcrumbName:P.formatMessage({id:"my_profile"})},{path:String(I),breadcrumbName:P.formatMessage({id:String(I)})}]}},children:Object(t.jsxs)(r.a,{tabs:{type:"card",activeKey:I,onChange:function(C){return O.d.push("/users/me/".concat(C))}},children:[Object(t.jsx)(r.a.TabPane,{tab:Object(t.jsx)(O.a,{id:"general"}),children:Object(t.jsxs)(_.a,Object(d.a)(Object(d.a)({},Y),{},{children:[Object(t.jsxs)(_.a.Group,{children:[Object(t.jsx)(u.a,{width:"md",name:"first_name",label:Object(t.jsx)(O.a,{id:"first_name"}),tooltip:Object(t.jsx)(O.a,{id:"first_name"}),placeholder:P.formatMessage({id:"first_name"}),required:!0}),Object(t.jsx)(u.a,{width:"md",name:"last_name",label:Object(t.jsx)(O.a,{id:"last_name"}),tooltip:Object(t.jsx)(O.a,{id:"last_name"}),placeholder:P.formatMessage({id:"last_name"}),required:!0})]}),Object(t.jsx)(_.a.Group,{children:y.state==="loaded"&&y.list.map(function(T){return Object(t.jsx)(G.a,{field:T},T.id)})}),Object(t.jsx)(_.a.Group,{children:Object(t.jsxs)(_.a.Item,{name:"avatar",label:Object(t.jsx)(O.a,{id:"avatar"}),children:[U.path_avatar&&Object(t.jsx)(a.a,{path:U.path_avatar,size:600,width:200}),Object(t.jsx)(x.a,{url:"/api/profile/upload-avatar",name:"avatar",accept:"image/*",onUpload:function(C){C.success}})]})})]}))},"general"),Object(t.jsx)(r.a.TabPane,{tab:Object(t.jsx)(O.a,{id:"change_password"}),children:Object(t.jsxs)(_.a,Object(d.a)(Object(d.a)({},z),{},{children:[Object(t.jsx)(_.a.Group,{children:Object(t.jsx)(u.a.Password,{width:"md",name:"current_password",label:Object(t.jsx)(O.a,{id:"current_password"}),placeholder:P.formatMessage({id:"current_password"}),required:!0})}),Object(t.jsxs)(_.a.Group,{children:[Object(t.jsx)(u.a.Password,{width:"md",name:"new_password",label:Object(t.jsx)(O.a,{id:"new_password"}),placeholder:P.formatMessage({id:"new_password"}),required:!0}),Object(t.jsx)(u.a.Password,{width:"md",name:"new_confirm_password",label:Object(t.jsx)(O.a,{id:"new_confirm_password"}),placeholder:P.formatMessage({id:"new_confirm_password"}),required:!0})]})]}))},"change_password"),Object(t.jsx)(r.a.TabPane,{tab:Object(t.jsx)(O.a,{id:"user.settings"}),children:Object(t.jsx)(F.a,{user:String(U.id),isProfile:!0})},"user_settings")]})}):Object(t.jsx)(M.a,{})}}}]);
