(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8382,2803],{64317:function(U,D,e){"use strict";var C=e(1413),n=e(45987),g=e(22270),r=e(67294),s=e(66758),E=e(41550),j=e(85893),m=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],F=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],V=function(i,u){var o=i.fieldProps,b=i.children,Z=i.params,$=i.proFieldProps,B=i.mode,N=i.valueEnum,z=i.request,H=i.showSearch,G=i.options,k=(0,n.Z)(i,m),q=(0,r.useContext)(s.Z);return(0,j.jsx)(E.Z,(0,C.Z)((0,C.Z)({valueEnum:(0,g.h)(N),request:z,params:Z,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,C.Z)({options:G,mode:B,showSearch:H,getPopupContainer:q.getPopupContainer},o),ref:u,proFieldProps:$},k),{},{children:b}))},T=r.forwardRef(function(p,i){var u=p.fieldProps,o=p.children,b=p.params,Z=p.proFieldProps,$=p.mode,B=p.valueEnum,N=p.request,z=p.options,H=(0,n.Z)(p,F),G=(0,C.Z)({options:z,mode:$||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},u),k=(0,r.useContext)(s.Z);return(0,j.jsx)(E.Z,(0,C.Z)((0,C.Z)({valueEnum:(0,g.h)(B),request:N,params:b,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,C.Z)({getPopupContainer:k.getPopupContainer},G),ref:i,proFieldProps:Z},H),{},{children:o}))}),P=r.forwardRef(V),W=T,_=P;_.SearchSelect=W,_.displayName="ProFormComponent",D.Z=_},58664:function(U,D,e){"use strict";e.d(D,{T:function(){return _}});var C=e(19632),n=e.n(C),g=e(5574),r=e.n(g),s=e(83863),E=e(75081),j=e(67294),m=e(51490),F=e(99100),V=e(32283),T=e(80854),P=e(85893),W=function(i){return i.map(function(u){return"name"in u?{id:Number(u.id),name:u.name}:{id:Number(u.id),name:u.title?u.title:""}})},_=function(i){var u=i.value,o=i.onChange,b=i.multiple,Z=b===void 0?!1:b,$=i.defaultValue,B=i.modelType,N=B===void 0?"COURSE":B,z=(0,j.useState)([]),H=r()(z,2),G=H[0],k=H[1],q=(0,j.useState)(!1),ue=r()(q,2),me=ue[0],ae=ue[1],l=(0,j.useRef)(),le=(0,j.useCallback)(function(d){var O,R,t,A;switch(N){case"COURSE":return(0,F.N7)(d,{signal:l==null||(O=l.current)===null||O===void 0?void 0:O.signal});case"WEBINAR":return(0,V.i5)(d,{signal:l==null||(R=l.current)===null||R===void 0?void 0:R.signal});case"CONSULTATIONS":return(0,m.sL)(d,{signal:l==null||(t=l.current)===null||t===void 0?void 0:t.signal});default:return(0,F.N7)(d,{signal:l==null||(A=l.current)===null||A===void 0?void 0:A.signal})}},[N,l]),ve=(0,j.useCallback)(function(d){var O,R,t,A;switch(N){case"COURSE":return(0,F.XR)(Number(d),{signal:(O=l.current)===null||O===void 0?void 0:O.signal});case"WEBINAR":return(0,V.tz)(Number(d),{signal:(R=l.current)===null||R===void 0?void 0:R.signal});case"CONSULTATIONS":return(0,m.hW)(Number(d),{signal:(t=l.current)===null||t===void 0?void 0:t.signal});default:return(0,F.XR)(Number(d),{signal:(A=l.current)===null||A===void 0?void 0:A.signal})}},[N,l]),se=(0,j.useCallback)(function(d){ae(!0),l.current&&l.current.abort(),l.current=new AbortController,le(d?{title:d}:{}).then(function(O){O.success&&k(W(O.data)),ae(!1)}).catch(function(){return ae(!1)})},[N]),oe=(0,j.useCallback)(function(d){se(d)},[se]);return(0,j.useEffect)(function(){return l.current=new AbortController,u&&ve(Number(u)).then(function(d){d&&d.success&&k(function(O){return[].concat(n()(O),n()(W([d.data])))})}),function(){l.current&&l.current.abort()}},[u,N]),(0,P.jsx)(s.default,{defaultValue:$,onFocus:function(){return se()},allowClear:!0,style:{width:"100%"},value:u,onChange:o,mode:Z?"multiple":void 0,showSearch:!0,onSearch:oe,placeholder:(0,P.jsx)(T.FormattedMessage,{id:"select_content",defaultMessage:"select_content"}),optionFilterProp:"children",filterOption:function(O,R){if(R&&R.children){var t;return(R==null||(t=R.children)===null||t===void 0?void 0:t.toString().toLowerCase().indexOf(O.toLowerCase()))>=0}return!0},notFoundContent:me?(0,P.jsx)(E.Z,{size:"small"}):null,optionLabelProp:"label",children:G.map(function(d){return(0,P.jsx)(s.default.Option,{value:d.id,label:d.name,children:d.name},d.id)})})}},64424:function(U,D,e){"use strict";e.r(D),e.d(D,{default:function(){return je}});var C=e(15009),n=e.n(C),g=e(99289),r=e.n(g),s=e(97857),E=e.n(s),j=e(13769),m=e.n(j),F=e(5574),V=e.n(F),T=e(74453),P=e(16894),W=e(66309),_=e(78957),p=e(14726),i=e(60943),u=e(67294),o=e(80854),b=e(58664),Z=e(62235),$=e(44167),B=e(45919);function N(S,f){return z.apply(this,arguments)}function z(){return z=r()(n()().mark(function S(f,c){return n()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.abrupt("return",(0,o.request)("/api/admin/consultation-access-enquiries",E()({method:"GET",params:f},c||{})));case 1:case"end":return L.stop()}},S)})),z.apply(this,arguments)}function H(S,f,c){return G.apply(this,arguments)}function G(){return G=r()(n()().mark(function S(f,c,I){return n()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",(0,o.request)("/api/admin/consultation-access-enquiries/approve/".concat(f),E()({data:c,method:"POST"},I||{})));case 1:case"end":return x.stop()}},S)})),G.apply(this,arguments)}function k(S,f,c){return q.apply(this,arguments)}function q(){return q=r()(n()().mark(function S(f,c,I){return n()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",(0,o.request)("/api/admin/consultation-access-enquiries/disapprove/".concat(f),E()({data:c,method:"POST"},I||{})));case 1:case"end":return x.stop()}},S)})),q.apply(this,arguments)}var ue=e(19632),me=e.n(ue),ae=e(9783),l=e.n(ae),le=e(184),ve=e(64317),se=e(5966),oe=e(75842),d=e(26412),O=e(55877),R=e(57818),t=e(85893),A=function(S){return S.Custom="custom",S.Jitsi="jitsi",S.PencilSpaces="pencil-spaces",S}(A||{}),he=function(f,c){return c?[f]:[]},Ce=function(){return"https://meet.jit.si/".concat((0,O.v4)())},xe=function(f){var c,I=f.meeting_link,L=f.meeting_type,x=l()(l()(l()({},A.Custom,I),A.Jitsi,Ce()),A.PencilSpaces,null);return(c=x==null?void 0:x[L])!==null&&c!==void 0?c:I},Me=function(f){var c=f.term,I=f.onClose,L=f.onSuccess,x=(0,o.useIntl)(),re=(0,o.useModel)("@@initialState"),w=re.initialState,ee=oe.Z.useForm(),Q=V()(ee,1),te=Q[0],de=oe.Z.useWatch("meeting_type",te),h=(0,u.useMemo)(function(){var v;return!!(!(w==null||(v=w.packages)===null||v===void 0)&&v[R.Z.PencilSpaces])},[w==null?void 0:w.packages]),M=(0,u.useMemo)(function(){return[{value:A.Custom,label:x.formatMessage({id:"ConsultationsAccess.meetingType.custom"})},{value:A.Jitsi,label:x.formatMessage({id:"ConsultationsAccess.meetingType.jitsi"})}].concat(me()(he({value:A.PencilSpaces,label:x.formatMessage({id:"ConsultationsAccess.meetingType.pencil-spaces"})},h)))},[x,h]),a=(0,u.useCallback)(function(){var v=r()(n()().mark(function y(ne){var J,X;return n()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(c){K.next=2;break}return K.abrupt("return");case 2:return J=xe(ne),K.next=5,H(c==null?void 0:c.id,{meeting_link:J});case 5:if(X=K.sent,X.success){K.next=8;break}return K.abrupt("return");case 8:I(),L();case 10:case"end":return K.stop()}},y)}));return function(y){return v.apply(this,arguments)}}(),[c]);return(0,t.jsxs)(le.a,{title:(0,t.jsx)(o.FormattedMessage,{id:"approve_form",defaultMessage:"Approve Form"}),onVisibleChange:function(y){return!y&&I()},form:te,visible:!!c,autoFocusFirstInput:!0,drawerProps:{destroyOnClose:!0},submitTimeout:2e3,initialValues:{meeting_type:A.Custom},onFinish:a,children:[c&&(0,t.jsx)(d.Z,{column:2,children:(0,t.jsx)(d.Z.Item,{label:(0,t.jsx)(o.FormattedMessage,{id:"approve_date",defaultMessage:"Approved Date"}),children:(0,i.WU)(new Date(c.proposed_at),B.Cu)})}),(0,t.jsx)(ve.Z,{name:"meeting_type",options:M,label:(0,t.jsx)(o.FormattedMessage,{id:"ConsultationsAccess.meetingType"})}),de===A.Custom&&(0,t.jsx)(se.Z,{rules:[{required:!0}],name:"meeting_link",label:(0,t.jsx)(o.FormattedMessage,{id:"ConsultationsAccess.meetingLink"})})]})},Pe=e(90672),ye=function(f){var c=f.id,I=f.onClose,L=f.onSuccess,x=oe.Z.useForm(),re=V()(x,1),w=re[0];return(0,t.jsx)(le.a,{title:(0,t.jsx)(o.FormattedMessage,{id:"disapprove_form",defaultMessage:"Disapprove Form"}),onVisibleChange:function(Q){return!Q&&I()},form:w,visible:!!c,autoFocusFirstInput:!0,drawerProps:{destroyOnClose:!0},submitTimeout:2e3,onFinish:function(){var ee=r()(n()().mark(function Q(te){return n()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!c){h.next=3;break}return h.next=3,k(c,te).then(function(M){M.success&&(I(),L())});case 3:return h.abrupt("return",!0);case 4:case"end":return h.stop()}},Q)}));return function(Q){return ee.apply(this,arguments)}}(),children:(0,t.jsx)(Pe.Z,{name:"message",label:(0,t.jsx)(o.FormattedMessage,{id:"reason",defaultMessage:"Reason"}),tooltip:(0,t.jsx)(o.FormattedMessage,{id:"reason_tooltip",defaultMessage:"Reason"})})})},Se=["type","defaultRender"],Ee=["type","defaultRender"],Fe=function(){var f=(0,u.useRef)(),c=(0,o.useIntl)(),I=(0,u.useState)(),L=V()(I,2),x=L[0],re=L[1],w=(0,u.useState)(),ee=V()(w,2),Q=ee[0],te=ee[1],de=(0,u.useMemo)(function(){return[{title:(0,t.jsx)(o.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,defaultSortOrder:"descend",sorter:!0,width:"80px"},{title:(0,t.jsx)(o.FormattedMessage,{id:"description",defaultMessage:"Description"}),dataIndex:"description",hideInSearch:!0,sorter:!0},{title:(0,t.jsx)(o.FormattedMessage,{id:"user",defaultMessage:"User"}),dataIndex:"user_id",renderFormItem:function(M,a,v){var y=a.type,ne=a.defaultRender,J=m()(a,Se);if(y==="form")return null;var X=v.getFieldValue("state");return(0,t.jsx)($.Z,E()(E()({},J),{},{state:{type:X}}))},render:function(M,a){var v,y;return((v=a.user)===null||v===void 0?void 0:v.id)&&(0,t.jsx)(Z.Z,{type:"EscolaLms\\Core\\Models\\User",type_id:(y=a.user)===null||y===void 0?void 0:y.id,children:(0,t.jsx)(W.Z,{children:a.user.email})},"user")}},{title:(0,t.jsx)(o.FormattedMessage,{id:"consultation_id",defaultMessage:"Consultation"}),dataIndex:"consultation_id",renderFormItem:function(M,a,v){var y=a.type,ne=a.defaultRender,J=m()(a,Ee);if(y==="form")return null;var X=v.getFieldValue("state");return(0,t.jsx)(b.T,E()(E()({modelType:"CONSULTATIONS"},J),{},{state:{type:X}}))},render:function(M,a){var v,y;return((v=a.consultation)===null||v===void 0?void 0:v.id)&&(0,t.jsx)(Z.Z,{type:"EscolaLms\\Consultations\\Models\\Consultation",type_id:(y=a.consultation)===null||y===void 0?void 0:y.id,children:(0,t.jsx)(W.Z,{children:a.consultation.name})},"consultation_id")}},{title:(0,t.jsx)(o.FormattedMessage,{id:"consultation_term_date",defaultMessage:"Term Date"}),dataIndex:"consultation_term",hideInSearch:!0,sorter:!0,render:function(M,a){return a.consultation_term?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.FormattedMessage,{id:"approved_date",defaultMessage:"Approved Date"}),":",(0,i.WU)(new Date(a.consultation_term.date),B.Cu)]}):(0,t.jsx)(_.Z,{direction:"vertical",children:a.proposed_terms.map(function(v){return(0,t.jsxs)(p.ZP,{size:"small",type:"primary",onClick:function(){te(v)},children:[(0,t.jsx)(o.FormattedMessage,{id:"approve",defaultMessage:"Approve Term"}),":",(0,i.WU)(new Date(v.proposed_at),B.Cu)]},v.id)})})}},{title:(0,t.jsx)(o.FormattedMessage,{id:"meeting_link",defaultMessage:"Meeting Link"}),dataIndex:"meeting_link",hideInSearch:!0,render:function(M,a){return a.meeting_link?(0,t.jsx)(p.ZP,{target:"_blank",type:"primary",href:a.meeting_link,children:new URL(a.meeting_link).host}):(0,t.jsx)(u.Fragment,{})}},{title:(0,t.jsx)(o.FormattedMessage,{id:"created_at",defaultMessage:"Created at"}),dataIndex:"created_at",hideInSearch:!0,sorter:!0,render:function(M,a){return a.created_at&&(0,i.WU)(new Date(a.created_at),B.Cu)}},{title:(0,t.jsx)(o.FormattedMessage,{id:"status",defaultMessage:"Status"}),dataIndex:"status",sorter:!0,valueType:"select",valueEnum:{pending:{text:"pending",status:"pending"},approved:{text:"approved",status:"approved"}},render:function(M,a){return a.status==="pending"?(0,t.jsx)(p.ZP,{danger:!0,size:"small",type:"primary",onClick:function(){re(a.id)},children:(0,t.jsx)(o.FormattedMessage,{id:"disapprove",defaultMessage:"Disapprove"})}):a.status}}]},[]);return(0,t.jsxs)(T._z,{children:[(0,t.jsx)(Me,{term:Q,onClose:function(){return te(void 0)},onSuccess:function(){var M;return(M=f.current)===null||M===void 0?void 0:M.reload()}}),(0,t.jsx)(ye,{id:x,onClose:function(){return re(void 0)},onSuccess:function(){var M;return(M=f.current)===null||M===void 0?void 0:M.reload()}}),(0,t.jsx)(P.ZP,{headerTitle:c.formatMessage({id:"menu.Other activities.Consultation Requests"}),search:{layout:"vertical"},actionRef:f,rowKey:"id",request:function(){var h=r()(n()().mark(function M(a,v){var y,ne,J,X,pe,K,fe,ge,ie,ce;return n()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return y=a.pageSize,ne=a.current,J=a.consultation_id,X=a.status,pe=a.user_id,K=a.is_coming,fe=a.proposed_at_from,ge=a.proposed_at_to,ie=v&&Object.entries(v)[0],Y.next=4,N({per_page:y,page:ne,consultation_id:J,status:X,user_id:pe,is_coming:K,proposed_at_from:fe,proposed_at_to:ge,order_by:ie&&ie[0],order:ie?ie[1]==="ascend"?"ASC":"DESC":void 0});case 4:if(ce=Y.sent,ce.success){Y.next=7;break}return Y.abrupt("return",{data:[],total:0,success:!1});case 7:return Y.abrupt("return",{data:ce.data,total:ce.meta.total,success:!0});case 8:case"end":return Y.stop()}},M)}));return function(M,a){return h.apply(this,arguments)}}(),columns:de})]})},je=Fe},55877:function(U,D,e){var C=e(23570),n=e(71171),g=n;g.v1=C,g.v4=n,U.exports=g},45327:function(U){for(var D=[],e=0;e<256;++e)D[e]=(e+256).toString(16).substr(1);function C(n,g){var r=g||0,s=D;return[s[n[r++]],s[n[r++]],s[n[r++]],s[n[r++]],"-",s[n[r++]],s[n[r++]],"-",s[n[r++]],s[n[r++]],"-",s[n[r++]],s[n[r++]],"-",s[n[r++]],s[n[r++]],s[n[r++]],s[n[r++]],s[n[r++]],s[n[r++]]].join("")}U.exports=C},85217:function(U){var D=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(D){var e=new Uint8Array(16);U.exports=function(){return D(e),e}}else{var C=new Array(16);U.exports=function(){for(var g=0,r;g<16;g++)g&3||(r=Math.random()*4294967296),C[g]=r>>>((g&3)<<3)&255;return C}}},23570:function(U,D,e){var C=e(85217),n=e(45327),g,r,s=0,E=0;function j(m,F,V){var T=F&&V||0,P=F||[];m=m||{};var W=m.node||g,_=m.clockseq!==void 0?m.clockseq:r;if(W==null||_==null){var p=C();W==null&&(W=g=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),_==null&&(_=r=(p[6]<<8|p[7])&16383)}var i=m.msecs!==void 0?m.msecs:new Date().getTime(),u=m.nsecs!==void 0?m.nsecs:E+1,o=i-s+(u-E)/1e4;if(o<0&&m.clockseq===void 0&&(_=_+1&16383),(o<0||i>s)&&m.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=i,E=u,r=_,i+=122192928e5;var b=((i&268435455)*1e4+u)%4294967296;P[T++]=b>>>24&255,P[T++]=b>>>16&255,P[T++]=b>>>8&255,P[T++]=b&255;var Z=i/4294967296*1e4&268435455;P[T++]=Z>>>8&255,P[T++]=Z&255,P[T++]=Z>>>24&15|16,P[T++]=Z>>>16&255,P[T++]=_>>>8|128,P[T++]=_&255;for(var $=0;$<6;++$)P[T+$]=W[$];return F||n(P)}U.exports=j},71171:function(U,D,e){var C=e(85217),n=e(45327);function g(r,s,E){var j=s&&E||0;typeof r=="string"&&(s=r==="binary"?new Array(16):null,r=null),r=r||{};var m=r.random||(r.rng||C)();if(m[6]=m[6]&15|64,m[8]=m[8]&63|128,s)for(var F=0;F<16;++F)s[j+F]=m[F];return s||n(m)}U.exports=g}}]);
