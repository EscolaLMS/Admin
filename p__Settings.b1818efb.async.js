(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{"3fxf":function(de,S,e){"use strict";var re=e("DjyN"),U=e("NUBc"),T=e("Mwp2"),b=e("VXEj"),W=e("+L6B"),B=e("2/Rp"),R=e("5NDa"),n=e("5rEg"),J=e("oBTY"),_=e("k1fw"),c=e("tJVT"),p=e("DYRE"),P=e("zeV3"),$=e("tU7J"),x=e("wFql"),j=e("q1tI"),M=e.n(j),F=e("BAh9"),O=e("/MfK"),q=e("mAF4"),w=e("dF/Y"),Y=e("9kvl"),G=e("DBJ/"),k=e("lLVY"),ee=e.n(k),d=e("nKUr"),je=e.n(d),z=function(ae){var ce=ae.directory,te=ae.onUploaded;return Object(d.jsxs)(P.b,{align:"start",children:[Object(d.jsxs)(x.a.Text,{children:[Object(d.jsx)(Y.a,{id:"pages.files.filesBrowser"}),Object(d.jsx)(x.a.Text,{code:!0,children:ce})]}),Object(d.jsx)(G.a,{url:"/api/admin/file/upload",name:"file[]",data:{target:ce},onUpload:function(Q){Q.success&&te(ce,Q.data)}})]})},fe=function(ae){var ce=ae.defaultDirectory,te=ce===void 0?"/":ce,se=ae.onFile,Q=ae.hideDeleteBtn,Me=Q===void 0?!1:Q,oe=ae.forceLoading,ye=oe===void 0?!1:oe,xe=Object(Y.i)(),ie=Object(j.useState)({loading:!1,name:"",directory:te,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),he=Object(c.a)(ie,2),I=he[0],ge=he[1],H=Object(j.useRef)(),X=Object(j.useCallback)(function(E){ge(function(o){return Object(_.a)(Object(_.a)({},o),{},{loading:E})})},[]),pe=Object(j.useCallback)(function(E,o){ge(function(D){return Object(_.a)(Object(_.a)(Object(_.a)({},D),E.data),{},{data:[{url:o.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(J.a)(E.data.data.map(function(N){return Object(_.a)(Object(_.a)({},N),{},{url:N.mime==="directory"?"".concat(o,"/").concat(N.name):N.url})}))).filter(function(N){return o==="/"||o===te?N.name!=="..":!0}),directory:o,loading:!1})})},[X]),C=Object(j.useCallback)(function(E){var o,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,N=function(){return H.current&&H.current.abort()};return N(),H.current=new AbortController,X(!0),Object(F.a)({directory:E,page:D},{signal:(o=H.current)===null||o===void 0?void 0:o.signal}).then(function(le){le.success&&pe(le,E)}).catch(function(){return X(!1)}),function(){N()}},[X]);Object(j.useEffect)(function(){return C(te)},[te,C]);var ve=Object(j.useCallback)(function(E){X(!0),Object(F.c)(E).then(function(){C(I.directory)}).catch(function(){X(!1)})},[C,X,I.directory]),me=Object(j.useCallback)(function(E,o){var D,N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,le=function(){return H.current&&H.current.abort()};return le(),H.current=new AbortController,X(!0),Object(F.b)({directory:E,name:o,page:N},{signal:(D=H.current)===null||D===void 0?void 0:D.signal}).then(function(Oe){Oe.success&&pe(Oe,E)}).catch(function(){return X(!1)}),function(){le()}},[X]);return Object(d.jsxs)("div",{className:"file-browser",children:[Object(d.jsxs)("div",{className:"file-browser__header",children:[Object(d.jsx)(n.a,{placeholder:xe.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(o){return ge(function(D){return Object(_.a)(Object(_.a)({},D),{},{name:o.target.value})})},value:I.name}),Object(d.jsxs)("div",{children:[Object(d.jsx)(B.a,{className:"file-browser__button",onClick:function(){return C(I.directory)},children:Object(d.jsx)(Y.a,{id:"reset"})}),Object(d.jsx)(B.a,{className:"file-browser__button",type:"primary",onClick:function(){return me(I.directory,I.name)},children:Object(d.jsx)(Y.a,{id:"query"})})]})]}),Object(d.jsx)(b.b,{loading:I.loading||ye,size:"small",itemLayout:"horizontal",dataSource:I.data,header:Object(d.jsx)(z,{directory:I.directory,onUploaded:function(o,D){D&&(C(o),se&&se(D,o))}}),footer:Object(d.jsx)(z,{directory:I.directory,onUploaded:function(o,D){C(o),D&&se&&se(D,o)}}),renderItem:function(o){return Object(d.jsx)(b.b.Item,{actions:o.mime!=="directory"&&!Me?[Object(d.jsx)(B.a,{type:"default",danger:!0,icon:Object(d.jsx)(O.a,{}),size:"small",onClick:function(){return ve(o.url)}},"dir")]:[],children:Object(d.jsx)(b.b.Item.Meta,{avatar:o.mime==="directory"?Object(d.jsx)(B.a,{type:"primary",icon:Object(d.jsx)(q.a,{}),size:"small",onClick:function(){return C(o.url)}}):Object(d.jsx)("a",{href:o.url,target:"_blank",rel:"noreferrer",children:Object(d.jsx)(B.a,{type:"default",icon:Object(d.jsx)(w.a,{}),size:"small"})}),description:Object(d.jsx)(M.a.Fragment,{children:Object(d.jsx)(B.a,{type:"text",size:"small",onClick:function(){return o.mime==="directory"?C(o.url):se&&se(o,I.directory)},children:o.name})})})})}}),Object(d.jsx)(U.a,{pageSizeOptions:[],current:I.current_page,total:I.total,pageSize:I.per_page,onChange:function(o){return C(I.directory,o)}})]})};S.a=fe},BAh9:function(de,S,e){"use strict";e.d(S,"a",function(){return B}),e.d(S,"b",function(){return n}),e.d(S,"e",function(){return _}),e.d(S,"d",function(){return p}),e.d(S,"c",function(){return P});var re=e("WmNS"),U=e.n(re),T=e("k1fw"),b=e("9og8"),W=e("9kvl");function B(x,j){return R.apply(this,arguments)}function R(){return R=Object(b.a)(U.a.mark(function x(j,M){return U.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Object(W.f)("/api/admin/file/list",Object(T.a)({method:"GET",params:j},M||{})));case 1:case"end":return O.stop()}},x)})),R.apply(this,arguments)}function n(x,j){return J.apply(this,arguments)}function J(){return J=Object(b.a)(U.a.mark(function x(j,M){return U.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Object(W.f)("/api/admin/file/find",Object(T.a)({method:"GET",params:j},M||{})));case 1:case"end":return O.stop()}},x)})),J.apply(this,arguments)}function _(x,j,M){return c.apply(this,arguments)}function c(){return c=Object(b.a)(U.a.mark(function x(j,M,F){var O;return U.a.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return O=new FormData,O.append("file[]",j),O.append("target",M),w.abrupt("return",Object(W.f)("/api/admin/file/upload",Object(T.a)({method:"POST",data:O},F||{})));case 4:case"end":return w.stop()}},x)})),c.apply(this,arguments)}var p=function(j){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(j,"&w=").concat(M)};function P(x,j){return $.apply(this,arguments)}function $(){return $=Object(b.a)(U.a.mark(function x(j,M){return U.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Object(W.f)("/api/admin/file/delete",Object(T.a)({method:"DELETE",data:{url:j}},M||{})));case 1:case"end":return O.stop()}},x)})),$.apply(this,arguments)}},"DBJ/":function(de,S,e){"use strict";var re=e("k1fw"),U=e("y8nQ"),T=e("Vl3Y"),b=e("etVw"),W=e("9kvl"),B=e("qFDU"),R=e("nKUr"),n=e.n(R);function J(_){var c=_.onChange,p=_.onUpload,P=_.url,$=_.name,x=_.extra,j=_.accept,M=_.data,F=_.wrapInForm,O=F===void 0?!0:F,q=_.title,w=_.formProps,Y=Object(W.i)();return M&&M[$]&&delete M[$],Object(R.jsx)(B.a,{condition:O,wrap:function(k){return Object(R.jsx)(T.a,Object(re.a)(Object(re.a)({},w),{},{children:k}))},children:Object(R.jsx)(b.a,{title:q||Object(R.jsx)(W.a,{id:"upload_click_here"}),placeholder:Y.formatMessage({id:"upload_click_here"}),onChange:function(k){c&&c(k),k.file.status==="done"&&p&&p(k.file.response)},label:Object(R.jsx)(W.a,{id:"upload"}),max:2,fieldProps:{data:M,accept:j,name:$,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(P),extra:x})})}S.a=J},YjuE:function(de,S,e){"use strict";e.r(S);var re=e("T2oS"),U=e("W9HT"),T=e("tJVT"),b=e("q1tI"),W=e.n(b),B=e("nhC9"),R=e("Ty5D"),n=e("9kvl"),J=e("tMyG"),_=e("WmNS"),c=e.n(_),p=e("k1fw"),P=e("9og8");function $(l,a){return x.apply(this,arguments)}function x(){return x=Object(P.a)(c.a.mark(function l(a,r){return c.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(n.f)("/api/admin/settings",Object(p.a)({method:"GET",useCache:!1,params:Object(p.a)(Object(p.a)({},a),{},{per_page:a.pageSize,page:a.current})},r||{})));case 1:case"end":return s.stop()}},l)})),x.apply(this,arguments)}function j(l,a){return M.apply(this,arguments)}function M(){return M=Object(P.a)(c.a.mark(function l(a,r){return c.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(n.f)("/api/admin/settings/".concat(a),Object(p.a)({method:"GET",useCache:!1},r||{})));case 1:case"end":return s.stop()}},l)})),M.apply(this,arguments)}function F(l,a){return O.apply(this,arguments)}function O(){return O=Object(P.a)(c.a.mark(function l(a,r){return c.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(n.f)("/api/admin/settings",Object(p.a)({method:"POST",headers:{"Content-Type":"application/json"},data:a},r||{})));case 1:case"end":return s.stop()}},l)})),O.apply(this,arguments)}function q(l,a,r){return w.apply(this,arguments)}function w(){return w=Object(P.a)(c.a.mark(function l(a,r,i){return c.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",Object(n.f)("/api/admin/settings/".concat(a),Object(p.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:r},i||{})));case 1:case"end":return v.stop()}},l)})),w.apply(this,arguments)}function Y(l,a){return G.apply(this,arguments)}function G(){return G=Object(P.a)(c.a.mark(function l(a,r){return c.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(n.f)("/api/admin/settings/".concat(a),Object(p.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},r||{})));case 1:case"end":return s.stop()}},l)})),G.apply(this,arguments)}function k(l){return ee.apply(this,arguments)}function ee(){return ee=Object(P.a)(c.a.mark(function l(a){return c.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(n.f)("/api/admin/settings/groups",Object(p.a)({method:"GET",useCache:!1},a||{})));case 1:case"end":return i.stop()}},l)})),ee.apply(this,arguments)}function d(l){return je.apply(this,arguments)}function je(){return je=Object(P.a)(c.a.mark(function l(a){return c.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(n.f)("/api/admin/config",Object(p.a)({method:"GET",useCache:!1},a||{})));case 1:case"end":return i.stop()}},l)})),je.apply(this,arguments)}function z(l,a){return fe.apply(this,arguments)}function fe(){return fe=Object(P.a)(c.a.mark(function l(a,r){var i,s;return c.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return i=a.key,s=a.value,u.abrupt("return",Object(n.f)("/api/admin/config",Object(p.a)({method:"POST",data:{config:[{key:i,value:s}]}},r||{})));case 2:case"end":return u.stop()}},l)})),fe.apply(this,arguments)}var Ee=e("P2fV"),ae=e("NJEC"),ce=e("5Dmo"),te=e("3S7+"),se=e("+L6B"),Q=e("2/Rp"),Me=e("+BJd"),oe=e("mr32"),ye=e("jrin"),xe=e("miYZ"),ie=e("tsqr"),he=e("xvlK"),I=e("Qiat"),ge=e("y8nQ"),H=e("Vl3Y"),X=e("5NDa"),pe=e("5rEg"),C=e("VMEa"),ve=e("rmhi"),me=e("Qurx"),E=e("F/zT"),o=e("5qq5"),D=e("BiO0"),N=e("hd5d"),le=e("3fxf"),Oe=e("ovOe"),_e=e.n(Oe),t=e("nKUr"),Ce=function(a){var r=a.value,i=a.onChange,s=a.type,v=s===void 0?"file":s,u=Object(b.useState)(!1),y=Object(T.a)(u,2),L=y[0],m=y[1];return Object(t.jsxs)(W.a.Fragment,{children:[Object(t.jsxs)(C.a.Group,{children:[Object(t.jsx)(pe.a,{value:r,readOnly:!0}),Object(t.jsxs)(Q.a,{size:"small",type:"primary",onClick:function(){return m(!L)},children:["toggle ",v," browser"]})]}),L&&Object(t.jsx)(le.a,{onFile:function(K,g){return i&&i("".concat(g,"/").concat(K.name))}})]})},De=function(a){var r=Object(n.i)(),i=a.visible,s=a.onVisibleChange,v=a.onFinish,u=a.id,y=H.a.useForm(),L=Object(T.a)(y,1),m=L[0],A=!u||u===-1,K=Object(b.useState)("text"),g=Object(T.a)(K,2),f=g[0],h=g[1];Object(b.useEffect)(function(){u&&u!==-1?j(u).then(function(V){V.success&&(m.setFieldsValue(V.data),h(V.data.type))}):(m.resetFields(),h("text"))},[u,m]);var ne=Object(b.useCallback)(function(V){V.type&&V.type!==f&&h(V.type)},[f]);return Object(t.jsxs)(ve.a,{form:m,title:r.formatMessage({id:u?"editSetting":"newSetting",defaultMessage:u?"editSetting":"newSetting"}),width:"60vw",visible:i,onVisibleChange:s,onFinish:v,onValuesChange:ne,children:[Object(t.jsxs)(C.a.Group,{children:[Object(t.jsx)(me.a,{label:Object(t.jsx)(n.a,{id:"group",defaultMessage:"group"}),rules:[{required:!0}],width:"md",name:"group"})," ",Object(t.jsx)(me.a,{label:Object(t.jsx)(n.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"})]}),Object(t.jsxs)(C.a.Group,{children:[Object(t.jsx)(E.a,{name:"enumerable",label:Object(t.jsx)(n.a,{id:"enumerable",defaultMessage:"enumerable"})}),Object(t.jsx)(E.a,{name:"public",label:Object(t.jsx)(n.a,{id:"public",defaultMessage:"public"})})]}),Object(t.jsx)(C.a.Group,{children:Object(t.jsx)(o.a.Group,{disabled:!A,name:"type",label:Object(t.jsx)(n.a,{id:"type"}),options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"},{label:"json",value:"json"},{label:"file",value:"file"},{label:"image",value:"image"}]})}),Object(t.jsxs)("div",{children:[f==="text"&&Object(t.jsx)(me.a,{width:"lg",name:"value",label:Object(t.jsx)(n.a,{id:"value"})}),f==="json"&&Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(D.a,{width:"lg",name:"value",label:Object(t.jsx)(n.a,{id:"value"}),tooltip:"".concat(r.formatMessage({id:"example_json"}),': {"name":"John", "age":30, "city":["New York","Warsaw"]}')}),Object(t.jsx)(C.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(_e.a,{src:JSON.parse(m.getFieldValue("value"))})}catch(Z){return Object(t.jsx)(_e.a,{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]}),(f==="file"||f==="image")&&Object(t.jsx)(C.a.Item,{name:"value",label:"value",tooltip:"select file from current repository or upload new one",valuePropName:"value",children:Object(t.jsx)(Ce,{type:f})}),f==="markdown"&&Object(t.jsx)(C.a.Item,{name:"value",label:"value",tooltip:"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.",valuePropName:"value",children:Object(t.jsx)(N.a,{directory:"settings/wysiwyg"})})]})]})},Te=De,Pe=e("G3dp"),Ie=e("/MfK"),Ae=function(){var l=Object(P.a)(c.a.mark(function a(r,i,s){var v;return c.a.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return v=ie.default.loading(r.formatMessage({id:"loading"})),y.prev=1,y.next=4,s&&s!==-1?q(s,Object(p.a)({},i)):F(Object(p.a)({},i));case 4:return v(),ie.default.success(r.formatMessage({id:"success"})),y.abrupt("return",!0);case 9:return y.prev=9,y.t0=y.catch(1),v(),ie.default.error(r.formatMessage({id:"error"})),y.abrupt("return",!1);case 14:case"end":return y.stop()}},a,null,[[1,9]])}));return function(r,i,s){return l.apply(this,arguments)}}(),Se=function(){var l=Object(P.a)(c.a.mark(function a(r,i){var s;return c.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return s=ie.default.loading(r.formatMessage({id:"loading"})),u.prev=1,u.next=4,Y(i);case 4:return s(),ie.default.success(r.formatMessage({id:"success"})),u.abrupt("return",!0);case 9:return u.prev=9,u.t0=u.catch(1),s(),ie.default.error(r.formatMessage({id:"error"})),u.abrupt("return",!1);case 14:case"end":return u.stop()}},a,null,[[1,9]])}));return function(r,i){return l.apply(this,arguments)}}(),Ue=function(){var a=Object(b.useState)(!1),r=Object(T.a)(a,2),i=r[0],s=r[1],v=Object(b.useState)([]),u=Object(T.a)(v,2),y=u[0],L=u[1],m=Object(b.useRef)(),A=Object(n.i)();Object(b.useEffect)(function(){k().then(function(g){g.success&&L(g.data)})},[]);var K=[{title:Object(t.jsx)(n.a,{id:"group",defaultMessage:"group"}),dataIndex:"group",hideInSearch:!1,key:"group",valueType:"select",width:100,valueEnum:y.sort().reduce(function(g,f){return Object(p.a)(Object(p.a)({},g),{},Object(ye.a)({},f,f))},{})},{title:Object(t.jsx)(n.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(n.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(t.jsx)(n.a,{id:"enumerable",defaultMessage:"enumerable"}),dataIndex:"enumerable",hideInForm:!0,hideInSearch:!0,render:function(f,h){return Object(t.jsx)(oe.a,{color:h.enumerable?"success":"error",children:Object(t.jsx)(n.a,{id:h.enumerable?"true":"false",defaultMessage:h.enumerable?"true":"false"})})}},{title:Object(t.jsx)(n.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(f,h){return Object(t.jsx)(oe.a,{color:h.public?"success":"error",children:Object(t.jsx)(n.a,{id:h.public?"true":"false",defaultMessage:h.public?"true":"false"})})}},{hideInSearch:!0,title:Object(t.jsx)(n.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(f,h){return[Object(t.jsx)(te.a,{title:Object(t.jsx)(n.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(Q.a,{type:"primary",icon:Object(t.jsx)(Pe.a,{}),onClick:function(){return s(h.id)}})},"edit"),Object(t.jsx)(ae.a,{title:Object(t.jsx)(n.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(P.a)(c.a.mark(function ne(){var V;return c.a.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.next=2,Se(A,h.id);case 2:V=be.sent,V&&(s(!1),m.current&&m.current.reload());case 4:case"end":return be.stop()}},ne)})),okText:Object(t.jsx)(n.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(n.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(te.a,{title:Object(t.jsx)(n.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(Q.a,{type:"primary",icon:Object(t.jsx)(Ie.a,{}),danger:!0})})},"delete")]}}];return Object(t.jsxs)(W.a.Fragment,{children:[Object(t.jsx)(I.a,{headerTitle:A.formatMessage({id:"menu.settings"}),actionRef:m,rowKey:"id",search:{},toolBarRender:function(){return[Object(t.jsxs)(Q.a,{type:"primary",onClick:function(){s(-1)},children:[Object(t.jsx)(he.a,{})," ",Object(t.jsx)(n.a,{id:"pages.searchTable.new"})]},"primary")]},request:function(f){var h=f.pageSize,ne=f.current,V=f.group;return $({pageSize:h,current:ne,group:V}).then(function(Z){return Z.success?{data:Z.data,total:Z.meta.total,success:!0}:[]})},columns:K}),Object(t.jsx)(Te,{groups:y,id:i,visible:Number.isInteger(i),onVisibleChange:function(f){return f===!1&&s(!1)},onFinish:function(){var g=Object(P.a)(c.a.mark(function f(h){var ne;return c.a.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,Ae(A,h,Number(i));case 2:ne=Z.sent,ne&&(s(!1),m.current&&m.current.reload());case 4:case"end":return Z.stop()}},f)}));return function(f){return g.apply(this,arguments)}}()})]})},Be=Ue,Ye=e("tU7J"),Fe=e("wFql"),Re=e("Fghh"),Le=Fe.a.Text,ue;(function(l){l.Array="array",l.String="string"})(ue||(ue={}));var Ke=function(a,r){return r===ue.Array?a&&Array.isArray(a)?JSON.stringify(a):"[]":a},We=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;if(r===ue.Array){var i=JSON.parse(a);return i&&Array.isArray(i)?i:[]}return a},we=function(a){var r=Object(Re.j)(),i=a.visible,s=a.onVisibleChange,v=a.onFinish,u=a.value,y=H.a.useForm(),L=Object(T.a)(y,1),m=L[0],A=Object(b.useMemo)(function(){return(u.rules||[]).includes(ue.Array)?ue.Array:ue.String},[u.rules]);return Object(b.useEffect)(function(){m.setFieldsValue(Object(p.a)(Object(p.a)({},u),{},{value:Ke(u.value,A)}))},[A,u,m]),Object(t.jsxs)(ve.a,{form:m,title:u.full_key,width:"60vw",visible:i,onVisibleChange:s,onFinish:Object(P.a)(c.a.mark(function K(){var g;return c.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,z({key:u.full_key,value:We(m.getFieldsValue().value,A)});case 2:if(g=h.sent,!g.success){h.next=6;break}return v(g.success===!0),h.abrupt("return",g.success);case 6:return h.abrupt("return");case 7:case"end":return h.stop()}},K)})),children:[Object(t.jsxs)(C.a.Group,{children:[Object(t.jsx)(E.a,{disabled:!0,name:"public",label:Object(t.jsx)(n.a,{id:"public",defaultMessage:"public"})}),Object(t.jsx)(E.a,{disabled:!0,name:"readonly",label:Object(t.jsx)(n.a,{id:"readonly",defaultMessage:"readonly"})}),Object(t.jsx)(C.a.Item,{shouldUpdate:!0,label:Object(t.jsx)(n.a,{id:"rules",defaultMessage:"rules"}),children:function(){return Object(t.jsx)(Le,{code:!0,children:JSON.stringify(m.getFieldValue("rules"))})}})]}),A===ue.Array?Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(D.a,{width:"lg",name:"value",label:Object(t.jsx)(n.a,{id:"value"}),tooltip:"".concat(r.formatMessage({id:"example_json"}),': ["first_field_name", "second_field_name"]')}),Object(t.jsx)(C.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(_e.a,{src:JSON.parse(m.getFieldValue("value"))})}catch(g){return Object(t.jsx)(_e.a,{src:JSON.parse('{ "error": "cannot parse this array" }')})}}})]}):Object(t.jsx)(me.a,{width:"lg",name:"value",label:Object(t.jsx)(n.a,{id:"value"})})]})},Ve=we,Ne=[{title:Object(t.jsx)(n.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(n.a,{id:"readonly",defaultMessage:"readonly"}),dataIndex:"readonly",hideInForm:!0,hideInSearch:!0,render:function(a,r){return Object(t.jsx)(oe.a,{color:r.readonly?"success":"error",children:Object(t.jsx)(n.a,{id:r.readonly?"true":"false",defaultMessage:r.readonly?"true":"false"})})}},{title:Object(t.jsx)(n.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(a,r){return Object(t.jsx)(oe.a,{color:r.public?"success":"error",children:Object(t.jsx)(n.a,{id:r.public?"true":"false",defaultMessage:r.public?"true":"false"})})}},{title:Object(t.jsx)(n.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0}],$e=function l(a,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return!a||typeof a!="object"?!1:(Object.keys(a).forEach(function(s){var v=a[s];s===r?i.push(a):typeof v=="object"&&l(v,r,i)}),i)},Ge=function(a){var r=a.packageName,i=a.values,s=a.onValueUpdated,v=Object(n.i)(),u=Object(b.useState)(),y=Object(T.a)(u,2),L=y[0],m=y[1],A=Object(b.useMemo)(function(){var K=i[r];return $e(K,"rules")},[i,r]);return Object(t.jsxs)(W.a.Fragment,{children:[Object(t.jsx)(I.a,{headerTitle:v.formatMessage({id:"menu.settings"}),rowKey:"key",search:{},dataSource:A,columns:[].concat(Ne,[{hideInSearch:!0,title:Object(t.jsx)(n.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(g,f){return[Object(t.jsx)(te.a,{title:Object(t.jsx)(n.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(Q.a,{type:"primary",icon:Object(t.jsx)(Pe.a,{}),onClick:function(){return m(f)}})},"edit")]}}])}),L&&Object(t.jsx)(Ve,{value:L,visible:L!==void 0,onVisibleChange:function(g){return g===!1&&m(void 0)},onFinish:Object(P.a)(c.a.mark(function K(){return c.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:s();case 1:case"end":return f.stop()}},K)}))})]})},ze=Ge,Je=function(a){return a.replaceAll("escolalms","").split("_").join("")},ke=S.default=function(){var l=Object(R.l)(),a=Object(n.i)(),r=l.tab,i=r===void 0?"user_settings":r,s=Object(b.useState)(),v=Object(T.a)(s,2),u=v[0],y=v[1],L=Object(b.useCallback)(function(){d().then(function(m){m.success&&y(m.data)})},[]);return Object(b.useEffect)(function(){L()},[]),u?Object(t.jsx)(J.a,{title:Object(t.jsx)(n.a,{id:"settings"}),header:{breadcrumb:{routes:[{path:"settings",breadcrumbName:a.formatMessage({id:"menu.Settings"})},{path:String(i),breadcrumbName:String(i)}]}},children:Object(t.jsxs)(B.a,{tabs:{type:"card",activeKey:i,onChange:function(A){return n.d.push("/settings/".concat(A))}},children:[Object(t.jsx)(B.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"user.settings"}),children:Object(t.jsx)(Be,{})},"user_settings"),Object.keys(u).map(function(m){return Object(t.jsxs)(B.a.TabPane,{tab:Object(t.jsxs)("span",{children:[Object(t.jsx)(n.a,{id:"package"})," ",Je(m)]}),children:[Object(t.jsx)(ze,{values:u,packageName:m,onValueUpdated:function(){return L()}}),m]},m)})]})}):Object(t.jsx)(U.a,{})}},hd5d:function(de,S,e){"use strict";var re=e("WmNS"),U=e.n(re),T=e("9og8"),b=e("q1tI"),W=e.n(b),B=e("3Ef1"),R=e.n(B),n=e("BAh9"),J=e("vtG9"),_=e.n(J),c=e("9kvl"),p=e("nKUr"),P=e.n(p),$=function(j){var M=j.value,F=j.onChange,O=j.directory,q=O===void 0?"/wysiwyg":O,w=Object(c.i)();return Object(p.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(p.jsx)(R.a,{uploadImage:function(){var Y=Object(T.a)(U.a.mark(function G(k){var ee,d;return U.a.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,Object(n.e)(k,q);case 2:if(ee=z.sent,!ee.success){z.next=6;break}return d=ee.data[0].name.includes("/")?ee.data[0].name:"".concat(q).concat(ee.data[0].name),z.abrupt("return",Object(n.d)(d,1e3));case 6:throw new Error("Error while uploading");case 7:case"end":return z.stop()}},G)}));return function(G){return Y.apply(this,arguments)}}(),defaultValue:M||"",onChange:function(G){return F&&F(G())},placeholder:w.formatMessage({id:"wysiwyg_placeholder"})})})};S.a=$},lLVY:function(de,S,e){},vtG9:function(de,S,e){}}]);
