(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{"2ult":function(z,j,e){"use strict";var u=e("OaEy"),c=e("2fM7"),E=e("T2oS"),D=e("W9HT"),W=e("oBTY"),C=e("tJVT"),m=e("q1tI"),g=e.n(m),B=e("ri8c"),P=e("9kvl"),v=e("nKUr"),R=e.n(v),i=function(M){var d=M.value,I=M.onChange,x=M.multiple,a=x===void 0?!1:x,n=Object(m.useState)([]),l=Object(C.a)(n,2),b=l[0],r=l[1],O=Object(m.useState)(!1),T=Object(C.a)(O,2),H=T[0],G=T[1],J=Object(m.useRef)(),F=Object(m.useRef)(),t=Object(m.useCallback)(function(f){r(function(_){return[].concat(Object(W.a)(_),Object(W.a)(f)).filter(function(A,p,S){return S.findIndex(function(K){return K.id===A.id})===p})})},[]);Object(m.useEffect)(function(){J.current=b},[b]);var V=Object(m.useCallback)(function(f){G(!0),F.current&&F.current.abort(),F.current=new AbortController,Object(B.g)({search:f},{signal:F.current.signal}).then(function(_){_.success&&t(_.data),G(!1)}).catch(function(){return G(!1)})},[t]),Q=Object(m.useCallback)(function(f){V(f)},[V]);return Object(m.useEffect)(function(){var f=new AbortController;if(d){var _=Array.isArray(d)?d:[d];_.filter(function(A){var p;return!((p=J.current)!==null&&p!==void 0&&p.find(function(S){return S.id===A}))}).forEach(function(A){Object(B.f)(Number(A),{signal:f.signal}).then(function(p){p&&p.success&&t([p.data])})})}return function(){f.abort()}},[d,t]),Object(v.jsx)(c.a,{onFocus:function(){return V()},allowClear:!0,style:{width:"100%"},value:d,onChange:I,mode:a?"multiple":void 0,showSearch:!0,onSearch:Q,placeholder:Object(v.jsx)(P.a,{id:"select_user_group",defaultMessage:"Select user group"}),optionFilterProp:"children",filterOption:function(_,A){if(A&&A.children){var p;return(A==null||(p=A.children)===null||p===void 0?void 0:p.toString().toLowerCase().indexOf(_.toLowerCase()))>=0}return!0},notFoundContent:H?Object(v.jsx)(D.a,{size:"small"}):null,children:b.map(function(f){return Object(v.jsx)(c.a.Option,{value:f.id,children:f.name_with_breadcrumbs},f.id)})})};j.a=i},"F/zT":function(z,j,e){"use strict";var u=e("VTBJ"),c=e("Ff2n"),E=e("nKUr"),D=e.n(E),W=e("q1tI"),C=e.n(W),m=e("adzw"),g=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],B=C.a.forwardRef(function(P,v){var R=P.fieldProps,i=P.unCheckedChildren,o=P.checkedChildren,M=P.proFieldProps,d=Object(c.a)(P,g);return Object(E.jsx)(m.a,Object(u.a)({valueType:"switch",fieldProps:Object(u.a)({unCheckedChildren:i,checkedChildren:o},R),ref:v,valuePropName:"checked",proFieldProps:M,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},d))});j.a=B},Qurx:function(z,j,e){"use strict";var u=e("VTBJ"),c=e("Ff2n"),E=e("nKUr"),D=e.n(E),W=e("adzw"),C=["fieldProps","proFieldProps"],m=["fieldProps","proFieldProps"],g="text",B=function(i){var o=i.fieldProps,M=i.proFieldProps,d=Object(c.a)(i,C);return Object(E.jsx)(W.a,Object(u.a)({valueType:g,fieldProps:o,filedConfig:{valueType:g},proFieldProps:M},d))},P=function(i){var o=i.fieldProps,M=i.proFieldProps,d=Object(c.a)(i,m);return Object(E.jsx)(W.a,Object(u.a)({valueType:"password",fieldProps:o,proFieldProps:M,filedConfig:{valueType:g}},d))},v=B;v.Password=P,v.displayName="ProFormComponent",j.a=v},UNho:function(z,j,e){"use strict";e.r(j);var u=e("Mwp2"),c=e("VXEj"),E=e("+L6B"),D=e("2/Rp"),W=e("/zsF"),C=e("PArb"),m=e("tU7J"),g=e("wFql"),B=e("T2oS"),P=e("W9HT"),v=e("miYZ"),R=e("tsqr"),i=e("qLMh"),o=e("k1fw"),M=e("9og8"),d=e("tJVT"),I=e("q1tI"),x=e.n(I),a=e("VMEa"),n=e("Qurx"),l=e("F/zT"),b=e("nhC9"),r=e("ri8c"),O=e("tMyG"),T=e("9kvl"),H=e("Ty5D"),G=e("/MfK"),J=e("0WSk"),F=e("2ult"),t=e("nKUr"),V=e.n(t);j.default=function(){var Q=Object(T.j)(),f=Object(H.l)(),_=f.group,A=_==="new",p=Object(I.useState)(),S=Object(d.a)(p,2),K=S[0],N=S[1],w=Object(I.useCallback)(Object(M.a)(Object(i.a)().mark(function U(){var s;return Object(i.a)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,Object(r.f)(Number(_));case 2:s=L.sent,s.success&&N(Object(o.a)({},s.data));case 4:case"end":return L.stop()}},U)})),[_]),X=Object(I.useCallback)(function(U){N(function(s){var h;return Object(o.a)(Object(o.a)({},s),{},{users:s?s==null||(h=s.users)===null||h===void 0?void 0:h.filter(function(L){return L.id!==U}):[]})}),Object(r.d)(Number(_),U).then(function(s){s.success&&N(function(h){return Object(o.a)(Object(o.a)({},h),{},{users:s.data})})})},[_]),Z=Object(I.useCallback)(function(U){var s;!U||K!=null&&(s=K.users)!==null&&s!==void 0&&s.find(function(h){return h.id===U})||Object(r.a)(Number(_),U).then(function(h){h.success&&N(function(L){return Object(o.a)(Object(o.a)({},L),{},{users:h.data})})})},[K,_]);Object(I.useEffect)(function(){if(_==="new"){N({});return}w()},[_,w]);var k=Object(I.useMemo)(function(){return{onFinish:function(){var U=Object(M.a)(Object(i.a)().mark(function h(L){var $,Y;return Object(i.a)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(Y=Object(o.a)({},L),_!=="new"){y.next=8;break}return y.next=4,Object(r.b)(Y);case 4:$=y.sent,$.success&&T.e.push("/users/groups/".concat($.data.id)),y.next=11;break;case 8:return y.next=10,Object(r.e)(Number(_),Y);case 10:$=y.sent;case 11:R.b.success($.message);case 12:case"end":return y.stop()}},h)}));function s(h){return U.apply(this,arguments)}return s}(),initialValues:K}},[K,_]);return K?Object(t.jsx)(O.a,{title:A?Object(t.jsx)(T.a,{id:"new_user_group"}):Object(t.jsx)(T.a,{id:"edit_user_group"}),children:Object(t.jsx)(b.a,{children:Object(t.jsxs)(a.a,Object(o.a)(Object(o.a)({},k),{},{children:[Object(t.jsxs)(a.a.Group,{children:[Object(t.jsx)(n.a,{width:"md",name:"name",label:Object(t.jsx)(T.a,{id:"name"}),tooltip:Object(t.jsx)(T.a,{id:"name"}),placeholder:Q.formatMessage({id:"name"}),required:!0}),Object(t.jsx)(a.a.Item,{style:{minWidth:"300px"},name:"parent_id",label:Object(t.jsx)(T.a,{id:"parent_id_group",defaultMessage:"parent_id_group"}),valuePropName:"value",children:Object(t.jsx)(F.a,{})}),Object(t.jsx)(l.a,{name:"registerable",label:Object(t.jsx)(T.a,{id:"registerable"})})]}),_!=="new"&&Object(t.jsxs)(x.a.Fragment,{children:[Object(t.jsxs)(a.a.Group,{children:[Object(t.jsx)(g.a,{children:Object(t.jsx)(T.a,{id:"add_person_to_group",defaultMessage:"Add User to group"})}),Object(t.jsx)(J.a,{onChange:function(s){return Z(Number(s))}})]}),Object(t.jsx)(C.a,{}),Object(t.jsx)(c.b,{size:"small",itemLayout:"horizontal",dataSource:K.users,renderItem:function(s){return Object(t.jsxs)(c.b.Item,{actions:[Object(t.jsxs)(D.a,{onClick:function(){return X(s.id)},type:"primary",icon:Object(t.jsx)(G.a,{}),size:"small",danger:!0,children:[" ",Object(t.jsx)(T.a,{id:"delete"})]},"delete")],children:[s.first_name," ",s.last_name," ",Object(t.jsx)("small",{children:s.email})]})}})]}),Object(t.jsx)(C.a,{})]}))})}):Object(t.jsx)(P.a,{})}},ri8c:function(z,j,e){"use strict";e.d(j,"g",function(){return W}),e.d(j,"f",function(){return m}),e.d(j,"e",function(){return B}),e.d(j,"b",function(){return v}),e.d(j,"c",function(){return i}),e.d(j,"a",function(){return M}),e.d(j,"d",function(){return I});var u=e("qLMh"),c=e("k1fw"),E=e("9og8"),D=e("9kvl");function W(a,n){return C.apply(this,arguments)}function C(){return C=Object(E.a)(Object(u.a)().mark(function a(n,l){return Object(u.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(D.g)("/api/admin/user-groups",Object(c.a)({params:Object(c.a)(Object(c.a)({},n),{},{per_page:n.pageSize,page:n.current,search:n.search?n.search:void 0,parent_id:n.parent_id}),method:"GET",useCache:!1},l||{})));case 1:case"end":return r.stop()}},a)})),C.apply(this,arguments)}function m(a,n){return g.apply(this,arguments)}function g(){return g=Object(E.a)(Object(u.a)().mark(function a(n,l){return Object(u.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(D.g)("/api/admin/user-groups/".concat(n),Object(c.a)({method:"GET",useCache:!1},l||{})));case 1:case"end":return r.stop()}},a)})),g.apply(this,arguments)}function B(a,n,l){return P.apply(this,arguments)}function P(){return P=Object(E.a)(Object(u.a)().mark(function a(n,l,b){return Object(u.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Object(D.g)("/api/admin/user-groups/".concat(n),Object(c.a)({data:l,method:"PUT"},b||{})));case 1:case"end":return O.stop()}},a)})),P.apply(this,arguments)}function v(a,n){return R.apply(this,arguments)}function R(){return R=Object(E.a)(Object(u.a)().mark(function a(n,l){return Object(u.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(D.g)("/api/admin/user-groups",Object(c.a)({data:n,method:"POST"},l||{})));case 1:case"end":return r.stop()}},a)})),R.apply(this,arguments)}function i(a,n){return o.apply(this,arguments)}function o(){return o=Object(E.a)(Object(u.a)().mark(function a(n,l){return Object(u.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(D.g)("/api/admin/user-groups/".concat(n),Object(c.a)({method:"DELETE"},l||{})));case 1:case"end":return r.stop()}},a)})),o.apply(this,arguments)}function M(a,n,l){return d.apply(this,arguments)}function d(){return d=Object(E.a)(Object(u.a)().mark(function a(n,l,b){return Object(u.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Object(D.g)("/api/admin/user-groups/".concat(n,"/members"),Object(c.a)({data:{user_id:l},method:"POST"},b||{})));case 1:case"end":return O.stop()}},a)})),d.apply(this,arguments)}function I(a,n,l){return x.apply(this,arguments)}function x(){return x=Object(E.a)(Object(u.a)().mark(function a(n,l,b){return Object(u.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Object(D.g)("/api/admin/user-groups/".concat(n,"/members/").concat(l),Object(c.a)({method:"DELETE"},b||{})));case 1:case"end":return O.stop()}},a)})),x.apply(this,arguments)}}}]);
