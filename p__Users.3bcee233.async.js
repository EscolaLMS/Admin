(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{"DBJ/":function(Y,v,t){"use strict";var J=t("k1fw"),N=t("y8nQ"),Z=t("Vl3Y"),C=t("tJVT"),w=t("etVw"),m=t("q1tI"),re=t.n(m),E=t("9kvl"),P=t("qFDU"),g=t("nKUr"),S=t.n(g);function u(n){var A=n.onChange,U=n.onUpload,p=n.url,a=n.name,L=n.extra,F=n.accept,b=n.data,R=n.wrapInForm,K=R===void 0?!0:R,x=n.title,V=n.formProps,h=n.maxFiles,z=n.clearListAfterUpload,G=Object(m.useState)(),B=Object(C.a)(G,2),D=B[0],y=B[1],$=Object(E.l)();return b&&b[a]&&delete b[a],Object(g.jsx)(P.a,{condition:K,wrap:function(O){return Object(g.jsx)(Z.a,Object(J.a)(Object(J.a)({},V),{},{children:O}))},children:Object(g.jsx)(w.a,{title:x||" ".concat($.formatMessage({id:"upload_click_here"})),placeholder:$.formatMessage({id:"upload_click_here"}),onChange:function(O){y(O),A&&A(O),O.file.status==="done"&&(U&&U(O.file.response),z&&y(void 0))},label:Object(g.jsx)(E.a,{id:"upload"}),max:h!=null?h:2,fieldProps:{data:b,accept:F,name:a,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(p),extra:L,fileList:D==null?void 0:D.fileList})})}v.a=u},n6PA:function(Y,v,t){},u7Dd:function(Y,v,t){"use strict";t.r(v),t.d(v,"TableColumns",function(){return H});var J=t("P2fV"),N=t("NJEC"),Z=t("5Dmo"),C=t("3S7+"),w=t("+L6B"),m=t("2/Rp"),re=t("miYZ"),E=t("tsqr"),P=t("tJVT"),g=t("+BJd"),S=t("mr32"),u=t("qLMh"),n=t("9og8"),A=t("4KAj"),U=t("xvlK"),p=t("q1tI"),a=t("9kvl"),L=t("55Ip"),F=t("tMyG"),b=t("Qiat"),R=t("sWYD"),K=t("VK58"),x=t("k1fw");function V(f,i){return h.apply(this,arguments)}function h(){return h=Object(n.a)(Object(u.a)().mark(function f(i,r){return Object(u.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(a.i)("/api/admin/csv/users",Object(x.a)({params:Object(x.a)(Object(x.a)({},i),{},{per_page:i&&i.pageSize,page:i&&i.current}),method:"GET",headers:{accept:"application/csv"},useCache:!1},r||{})));case 1:case"end":return c.stop()}},f)})),h.apply(this,arguments)}var z=t("G3dp"),G=t("/MfK"),B=t("mGZj"),D=t("DBJ/"),y=t("nhC9"),$=t("n6PA"),e=t("nKUr"),O=function(){var f=Object(n.a)(Object(u.a)().mark(function i(r){return Object(u.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(K.c)(r);case 2:return c.abrupt("return",!0);case 3:case"end":return c.stop()}},i)}));return function(r){return f.apply(this,arguments)}}(),H=[{title:Object(e.jsx)(a.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0},{title:Object(e.jsx)(a.a,{id:"created_at",defaultMessage:"created_at"}),dataIndex:"created_at",hideInSearch:!0,sorter:!0,render:function(i,r){return r.created_at&&Object(R.a)(new Date(r.created_at),B.a)}},{title:Object(e.jsx)(a.a,{id:"first_name",defaultMessage:"first_name"}),dataIndex:"first_name",hideInSearch:!0,sorter:!0},{title:Object(e.jsx)(a.a,{id:"last_name",defaultMessage:"last_name"}),dataIndex:"last_name",hideInSearch:!0,sorter:!0},{title:Object(e.jsx)(a.a,{id:"email",defaultMessage:"email"}),dataIndex:"email",hideInSearch:!0,sorter:!0},{title:Object(e.jsx)(a.a,{id:"search",defaultMessage:"search"}),dataIndex:"search",hideInSearch:!1,hideInTable:!0,hideInDescriptions:!0,tooltip:Object(e.jsx)(a.a,{id:"search_tooltip_1"})},{title:Object(e.jsx)(a.a,{id:"is_active"}),dataIndex:"is_active",hideInSearch:!0,sorter:!0,render:function(i,r){return[Object(e.jsx)(S.a,{color:r.is_active?"green":"red",children:r.is_active?Object(e.jsx)(a.a,{id:"Active"}):Object(e.jsx)(a.a,{id:"Inactive"})},"is_active")]}},{title:Object(e.jsx)(a.a,{id:"email_verified",defaultMessage:"email_verified"}),dataIndex:"email_verified",hideInSearch:!0,render:function(i,r){return[Object(e.jsx)(S.a,{color:r.email_verified?"green":"red",children:r.email_verified?Object(e.jsx)(a.a,{id:"verified"}):Object(e.jsx)(a.a,{id:"unverified"})},"email_verified")]}},{title:Object(e.jsx)(a.a,{id:"created_after",defaultMessage:"Created After"}),key:"from",dataIndex:"from",valueType:"date",hideInTable:!0,hideInDescriptions:!0},{title:Object(e.jsx)(a.a,{id:"created_before",defaultMessage:"Created Before"}),key:"to",dataIndex:"to",valueType:"date",hideInTable:!0,hideInDescriptions:!0},{title:Object(e.jsx)(a.a,{id:"gt_last_login_day",defaultMessage:">= Login last n days"}),key:"gt_last_login_day",dataIndex:"gt_last_login_day",valueType:"digit",hideInTable:!0,hideInDescriptions:!0},{title:Object(e.jsx)(a.a,{id:"lt_last_login_day",defaultMessage:"<= Login last n days"}),key:"lt_last_login_day",dataIndex:"lt_last_login_day",valueType:"digit",hideInTable:!0,hideInDescriptions:!0},{title:Object(e.jsx)(a.a,{id:"roles",defaultMessage:"roles"}),dataIndex:"roles",hideInSearch:!0,render:function(i,r){return r.roles.map(function(I){return Object(e.jsx)(S.a,{children:I},I)})}}],se=function(){var i=Object(p.useRef)(),r=Object(a.l)(),I=Object(p.useState)({}),c=Object(P.a)(I,2),X=c[0],ne=c[1],ie=Object(p.useState)(!1),_=Object(P.a)(ie,2),le=_[0],k=_[1],de=Object(p.useCallback)(Object(n.a)(Object(u.a)().mark(function T(){var s,l,o;return Object(u.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return k(!0),d.prev=1,d.next=4,V(X);case 4:s=d.sent,s&&(l="data:text/csv;charset=utf-8,"+s,o=document.createElement("a"),o.href=l,o.download="users.csv",document.body.appendChild(o),o.click(),document.body.removeChild(o)),d.next=11;break;case 8:d.prev=8,d.t0=d.catch(1),console.error(d.t0);case 11:return d.prev=11,k(!1),d.finish(11);case 14:case"end":return d.stop()}},T,null,[[1,8,11,14]])})),[X]);return Object(e.jsx)(F.a,{children:Object(e.jsxs)(y.a,{tabs:{type:"card",activeKey:"list",onChange:function(s){switch(s){case"list":return a.f.push("/users");case"fields":return a.f.push("/users/fields");default:return a.f.push("/users/".concat(s))}}},children:[Object(e.jsx)(y.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"list"}),children:Object(e.jsx)(b.a,{headerTitle:r.formatMessage({id:"menu.Users",defaultMessage:"users"}),actionRef:i,rowKey:"key",search:{layout:"vertical"},toolBarRender:function(){return[Object(e.jsx)(D.a,{title:r.formatMessage({id:"import_users"}),url:"/api/admin/csv/users",name:"file",accept:".csv",data:{return_url:"".concat(window.location.origin,"/#/user/reset-password")},onChange:function(l){l.file.status==="done"&&l.file.response&&l.file.response.success&&E.b.success(l.file.response.message),l.file.response&&l.file.status==="error"&&(E.b.error(l.file.response.message),console.error(l.file.response))}},"upload"),Object(e.jsxs)(m.a,{loading:le,type:"primary",onClick:function(){return de()},children:[Object(e.jsx)(A.a,{})," ",Object(e.jsx)(a.a,{id:"export",defaultMessage:"export"})]},"primary"),Object(e.jsx)(L.a,{to:"/users/list/new",children:Object(e.jsxs)(m.a,{type:"primary",children:[Object(e.jsx)(U.a,{})," ",Object(e.jsx)(a.a,{id:"new",defaultMessage:"new"})]},"primary")},"link")]},request:function(s,l){var o=s.pageSize,M=s.current,d=s.search,j=s.role,q=s.from,ee=s.to,te=s.gt_last_login_day,ae=s.lt_last_login_day;ne({pageSize:o,current:M,search:d,role:j,from:q,to:ee,gt_last_login_day:te,lt_last_login_day:ae});var W=l&&Object.entries(l)[0],ce=j&&j.toString()==="all"?void 0:j;return Object(K.n)({per_page:o,page:M,search:d,role:ce,from:q,to:ee,gt_last_login_day:te,lt_last_login_day:ae,order_by:W&&W[0],order:W?W[1]==="ascend"?"ASC":"DESC":void 0}).then(function(Q){return Q.success?{data:Q.data,total:Q.meta.total,success:!0}:[]})},columns:[].concat(H,[{hideInSearch:!0,title:Object(e.jsx)(a.a,{id:"pages.searchTable.titleOption"}),dataIndex:"option",valueType:"option",render:function(s,l){return[Object(e.jsx)(L.a,{to:"/users/".concat(l.id,"/user_info"),children:Object(e.jsx)(C.a,{title:Object(e.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(e.jsx)(m.a,{type:"primary",icon:Object(e.jsx)(z.a,{})})})},"edit"),Object(e.jsx)(N.a,{title:Object(e.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(n.a)(Object(u.a)().mark(function o(){var M;return Object(u.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,O(l.id);case 2:M=j.sent,M&&i.current&&i.current.reload();case 4:case"end":return j.stop()}},o)})),okText:Object(e.jsx)(a.a,{id:"yes"}),cancelText:Object(e.jsx)(a.a,{id:"no"}),children:Object(e.jsx)(C.a,{title:Object(e.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(e.jsx)(m.a,{type:"primary",icon:Object(e.jsx)(G.a,{}),danger:!0})})},"delete")]}}])})},"list"),Object(e.jsx)(y.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"ModelFields"})},"fields")]})})},oe=v.default=se}}]);
