(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[4981,2803,2238,7883],{48959:function(Ge,be,t){"use strict";var Me=t(28248),m=t(80854),ve=t(85893),f=function(h){var I=h.open,u=h.onOk,z=h.onCancel,O=h.title,ne=h.content,C=h.okText,oe=h.loading;return(0,ve.jsx)(Me.Z,{width:"600px",title:O!=null?O:(0,ve.jsx)(m.FormattedMessage,{id:"confirmModal.title"}),open:I,onOk:u,onCancel:z,okText:C!=null?C:(0,ve.jsx)(m.FormattedMessage,{id:"save"}),cancelText:(0,ve.jsx)(m.FormattedMessage,{id:"cancel"}),confirmLoading:oe,children:ne!=null?ne:(0,ve.jsx)("p",{children:(0,ve.jsx)(m.FormattedMessage,{id:"confirmModal.content"})})})};be.Z=f},11312:function(Ge,be,t){"use strict";t.d(be,{nu:function(){return S},rL:function(){return me},Du:function(){return Ue}});var Me=t(9783),m=t.n(Me),ve=t(97857),f=t.n(ve),_e=t(19632),h=t.n(_e),I=t(5574),u=t.n(I),z=t(45919),O=t(66419),ne=t(78677),C=t(26271),oe=t(78957),R=t(66309),q=t(72051),J=t(71230),K=t(72269),W=t(83863),l=t(60943),n=t(67294),U=t(70804),e=t(80854),X=t(62235),H=t(15009),N=t.n(H),_=t(99289),w=t.n(_),L=t(58638),Q=t(14726),B=t(76841),p=t(85893),v=function(Z){var x=Z.course_id,M=Z.stat,k=M===void 0?"EscolaLms\\Reports\\Stats\\Course\\FinishedTopics":M,le=(0,n.useState)(!1),ee=u()(le,2),F=ee[0],$=ee[1],de=(0,n.useCallback)(function(se){return w()(N()().mark(function Ee(){var Ce,Fe;return N()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return $(!0),V.prev=1,V.next=4,(0,B._g)(se,{stat:k});case 4:Ce=V.sent,Ce instanceof Blob&&(Fe=document.createElement("a"),Fe.href=window.URL.createObjectURL(Ce),Fe.download="finished_topics_".concat(x,".xlsx"),document.body.appendChild(Fe),Fe.click(),document.body.removeChild(Fe)),V.next=11;break;case 8:V.prev=8,V.t0=V.catch(1),console.error(V.t0);case 11:return V.prev=11,$(!1),V.finish(11);case 14:case"end":return V.stop()}},Ee,null,[[1,8,11,14]])}))},[k]);return(0,p.jsxs)(Q.ZP,{type:"primary",loading:F,onClick:de(x),children:[(0,p.jsx)(L.Z,{})," ",(0,p.jsx)(e.FormattedMessage,{id:"export"})]})},Ze=function(Z){return Z.topicable.content.contents?Object.values(Z.topicable.content.contents)[0].library:"H5P"},Ue=function(Z){var x=Z.course_id,M=Z.topics,k=Z.stats,le=(0,n.useState)(!1),ee=u()(le,2),F=ee[0],$=ee[1],de=(0,n.useMemo)(function(){return[{title:(0,p.jsx)(e.FormattedMessage,{id:"user"}),dataIndex:"id",render:function(Ce){return(0,p.jsx)(X.Z,{type:"App\\Models\\User",type_id:Ce})}},{title:(0,p.jsx)(e.FormattedMessage,{id:"email"}),dataIndex:"email"}].concat(h()(M.map(function(Ee){var Ce,Fe=(Ce=Ee.topicable_type)===null||Ce===void 0?void 0:Ce.split("\\").pop();return Fe==="H5P"&&(Fe=Ze(Ee)),{render:function(V){var ze=0;switch(V&&(V.started_at&&V.finished_at?ze=1:V.started_at&&(ze=2)),ze){case 1:return(0,p.jsxs)(oe.Z,{children:[(0,p.jsx)(R.Z,{color:"success",children:"F"}),F&&(V==null?void 0:V.seconds)&&(0,p.jsx)("small",{children:(0,O.Im)(V.seconds)})]});case 2:return(0,p.jsxs)(oe.Z,{children:[(0,p.jsx)(R.Z,{color:"blue",children:"S"}),F&&(V==null?void 0:V.seconds)&&(0,p.jsx)("small",{children:(0,O.Im)(V.seconds)})]});case 0:default:return(0,p.jsx)(n.Fragment,{children:(0,p.jsx)(R.Z,{color:"error",children:"N"})})}},title:(0,p.jsxs)("small",{children:[(0,p.jsx)(R.Z,{children:Fe})," ",Ee.title]}),dataIndex:Ee.id}})))},[M,F]),se=(0,n.useMemo)(function(){return k.map(function(Ee){return M.reduce(function(Ce,Fe){var De=Ee.topics.find(function(V){return V.id===Fe.id});return f()(f()({},Ce),{},m()({},Number(Fe.id),De!=null?De:0))},{email:Ee.email,id:Ee.id})})},[k,M]);return(0,p.jsx)(q.Z,{title:function(){return(0,p.jsxs)(J.Z,{justify:"space-between",align:"middle",children:[(0,p.jsxs)(oe.Z,{children:[(0,p.jsx)(e.FormattedMessage,{id:"Finished",defaultMessage:"Finished:"})," ",(0,p.jsx)(R.Z,{color:"success",children:"F"}),(0,p.jsx)(e.FormattedMessage,{id:"Started",defaultMessage:"Started:"})," ",(0,p.jsx)(R.Z,{color:"blue",children:"S"}),(0,p.jsx)(e.FormattedMessage,{id:"NotStarted",defaultMessage:"Not Started:"})," ",(0,p.jsx)(R.Z,{color:"error",children:"N"}),(0,p.jsx)(e.FormattedMessage,{id:"ShowMinutes",defaultMessage:"Show minutes spent on topic:"})," ",(0,p.jsx)(K.Z,{checked:F,onChange:function(Fe){return $(Fe)}})]}),(0,p.jsx)(v,{course_id:x})]})},columns:de,dataSource:se,size:"small",scroll:{x:1500},components:{table:function(Ce){return(0,p.jsx)(U.Z,{horizontal:!0,style:{maxWidth:"auto"},hideScrollbars:!1,children:(0,p.jsx)("table",f()({},Ce))})}}})},me=function(Z){var x=Z.stats,M=Z.attempts,k=(0,n.useMemo)(function(){return[{title:(0,p.jsx)(e.FormattedMessage,{id:"user"}),dataIndex:"id",render:function(F){return(0,p.jsx)(X.Z,{type:"App\\Models\\User",type_id:F})}},{title:(0,p.jsx)(e.FormattedMessage,{id:"email"}),dataIndex:"email"},{title:(0,p.jsx)(e.FormattedMessage,{id:"attempt",defaultMessage:"Attempt"}),dataIndex:"attempt"},{title:(0,p.jsx)(e.FormattedMessage,{id:"finished_at",defaultMessage:"Finished at"}),dataIndex:"finished_at",render:function(F){return F?(0,l.WU)(new Date(F),z.Cu):""}}]},[]),le=(0,n.useMemo)(function(){return x.map(function(ee){var F=ee.id,$=ee.email,de=ee.finished_at,se=M==null?void 0:M.find(function(Ce){return Ce.id===F}),Ee=Array.isArray(se==null?void 0:se.attempts)?se==null?void 0:se.attempts.length:0;return{id:F,email:$,finished_at:de,attempt:Ee}})},[x]);return(0,p.jsx)(q.Z,{title:function(){return(0,p.jsx)(oe.Z,{children:(0,p.jsx)(e.FormattedMessage,{id:"course.finished",defaultMessage:"Finished"})})},columns:k,dataSource:le,size:"small",scroll:{x:500}})},S=function(Z){var x=Z.stats,M=(0,n.useState)(null),k=u()(M,2),le=k[0],ee=k[1],F=(0,n.useState)(null),$=u()(F,2),de=$[0],se=$[1],Ee=(0,e.useIntl)(),Ce=(0,n.useMemo)(function(){return x.flatMap(function(De){return Object.values(De.attempts).flatMap(function(V){var ze=V.dates,He=V.attempt,te=Object.values(ze).flatMap(function(Pe){var fe=Pe.date,pe=Pe.seconds_total;return{date:fe,attempt:He,seconds_total:pe,email:De.email}});return te})})},[x]),Fe={xField:"date",yField:"seconds_total",seriesField:"attempt",isStack:!0,xAxis:{label:{autoHide:!0,autoRotate:!1}},slider:{start:0,end:1},label:{position:"middle",layout:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"}]}};return(0,p.jsx)(C.ZP,{title:(0,p.jsxs)(oe.Z,{children:[(0,p.jsx)(e.FormattedMessage,{id:"course.interactions_time_in_days"}),(0,p.jsx)(W.default,{showSearch:!0,value:le,onChange:function(V){ee(V),se(null)},placeholder:(0,p.jsx)(e.FormattedMessage,{id:"select_person",defaultMessage:"Select a person"}),children:x.map(function(De){var V=De.id,ze=De.email;return(0,p.jsx)(W.default.Option,{value:ze,children:ze},V)})}),(0,p.jsx)(W.default,{value:de,onChange:function(V){return se(V)},disabled:le===null,placeholder:(0,p.jsx)(e.FormattedMessage,{id:"select_attempt",defaultMessage:"Select attempt"}),children:h()(new Set(Ce.filter(function(De){var V=De.email;return V===le}).map(function(De){var V=De.attempt;return V}))).map(function(De){return(0,p.jsxs)(W.default.Option,{value:De,children:[(0,p.jsx)(e.FormattedMessage,{id:"attempt",defaultMessage:"Attempt"})," ",De]},De)})})]}),colSpan:12,layout:"center",children:(0,p.jsx)("div",{style:{overflow:"auto",minHeight:"400px",width:"100%"},children:(0,p.jsx)(ne.Z,f()(f()({},Fe),{},{tooltip:{title:"".concat(Ee.formatMessage({id:"attempt"})),formatter:function(V){var ze=Math.floor(+V.seconds_total/60),He=+V.seconds_total>60?+V.seconds_total-ze*60:0;return{name:V.attempt,value:"".concat(ze,"m ").concat(He,"s")}}},data:Ce.filter(function(De){var V=De.email;return V===le}).filter(function(De){var V=De.attempt;return Number.isInteger(de)?V===de:!0})}))})})}},28225:function(Ge,be,t){"use strict";var Me=t(28248),m=t(80854),ve=t(85893),f=function(h){var I=h.visible,u=h.setManage;return(0,ve.jsx)(Me.Z,{width:"600px",title:(0,ve.jsx)(m.FormattedMessage,{id:"course.validate_edit.header",defaultMessage:"course.validate_edit.header"}),visible:I,onOk:function(){return u({showModal:!1,disableEdit:!1,clicked:!0})},onCancel:function(){return u({showModal:!1,disableEdit:!0,clicked:!1})},okText:"OK",cancelText:"Cancel",children:(0,ve.jsx)("p",{children:(0,ve.jsx)(m.FormattedMessage,{id:"course.validate_edit.content",defaultMessage:"course.validate_edit.content"})})})};be.Z=f},20568:function(Ge,be,t){"use strict";t.d(be,{Z:function(){return X}});var Me=t(19632),m=t.n(Me),ve=t(97857),f=t.n(ve),_e=t(5574),h=t.n(_e),I=t(67294),u=t(17578),z=t(78957),O=t(25514),ne=t(96365),C=t(14726),oe=t(2487),R=t(72252),q=t(82061),J=t(55725),K=t(69753),W=t(80854),l=t(29477),n=t(85893),U=function(N){var _=N.directory,w=N.onUploaded;return(0,n.jsxs)(z.Z,{align:"start",children:[(0,n.jsxs)(O.Z.Text,{children:[(0,n.jsx)(W.FormattedMessage,{id:"pages.files.filesBrowser"}),(0,n.jsx)(O.Z.Text,{code:!0,children:_})]}),(0,n.jsx)(l.Z,{url:"/api/admin/file/upload",name:"file[]",data:{target:_},onUpload:function(Q){Q.success&&w(_,Q.data)}})]})},e=function(N){var _=N.defaultDirectory,w=_===void 0?"/":_,L=N.onFile,Q=N.hideDeleteBtn,B=Q===void 0?!1:Q,p=N.forceLoading,v=p===void 0?!1:p,Ze=(0,W.useIntl)(),Ue=(0,I.useState)({loading:!1,name:"",directory:w,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),me=h()(Ue,2),S=me[0],y=me[1],Z=(0,I.useRef)(),x=(0,I.useCallback)(function(F){y(function($){return f()(f()({},$),{},{loading:F})})},[]),M=(0,I.useCallback)(function(F,$){F.success&&y(function(de){return f()(f()(f()({},de),F.data),{},{data:[{url:$.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(m()(F.data.data.map(function(se){return f()(f()({},se),{},{url:se.mime==="directory"?"".concat($,"/").concat(se.name):se.url})}))).filter(function(se){return $==="/"||$===w?se.name!=="..":!0}),directory:$,loading:!1})})},[x]),k=(0,I.useCallback)(function(F){var $,de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,se=function(){return Z.current&&Z.current.abort()};return se(),Z.current=new AbortController,x(!0),(0,u.QZ)({directory:F,page:de},{signal:($=Z.current)===null||$===void 0?void 0:$.signal}).then(function(Ee){Ee.success&&M(Ee,F)}).catch(function(){return x(!1)}),function(){se()}},[x]);(0,I.useEffect)(function(){return k(w)},[w,k]);var le=(0,I.useCallback)(function(F){x(!0),(0,u.Od)(F).then(function(){k(S.directory)}).catch(function(){x(!1)})},[k,x,S.directory]),ee=(0,I.useCallback)(function(F,$){var de,se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,Ee=function(){return Z.current&&Z.current.abort()};return Ee(),Z.current=new AbortController,x(!0),(0,u.ht)({directory:F,name:$,page:se},{signal:(de=Z.current)===null||de===void 0?void 0:de.signal}).then(function(Ce){Ce.success&&M(Ce,F)}).catch(function(){return x(!1)}),function(){Ee()}},[x]);return(0,n.jsxs)("div",{className:"file-browser",children:[(0,n.jsxs)("div",{className:"file-browser__header",children:[(0,n.jsx)(ne.Z,{placeholder:Ze.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function($){return y(function(de){return f()(f()({},de),{},{name:$.target.value})})},value:S.name}),(0,n.jsxs)("div",{children:[(0,n.jsx)(C.ZP,{className:"file-browser__button",onClick:function(){return k(S.directory)},children:(0,n.jsx)(W.FormattedMessage,{id:"reset"})}),(0,n.jsx)(C.ZP,{className:"file-browser__button",type:"primary",onClick:function(){return ee(S.directory,S.name)},children:(0,n.jsx)(W.FormattedMessage,{id:"query"})})]})]}),(0,n.jsx)(oe.Z,{loading:S.loading||v,size:"small",itemLayout:"horizontal",dataSource:S.data,header:(0,n.jsx)(U,{directory:S.directory,onUploaded:function($,de){de&&(k($),L&&L(de,$))}}),footer:(0,n.jsx)(U,{directory:S.directory,onUploaded:function($,de){k($),de&&L&&L(de,$)}}),renderItem:function($){return(0,n.jsx)(oe.Z.Item,{actions:$.mime!=="directory"&&!B?[(0,n.jsx)(C.ZP,{type:"default",danger:!0,icon:(0,n.jsx)(q.Z,{}),size:"small",onClick:function(){return le($.url)}},"dir")]:[],children:(0,n.jsx)(oe.Z.Item.Meta,{avatar:$.mime==="directory"?(0,n.jsx)(C.ZP,{type:"primary",icon:(0,n.jsx)(J.Z,{}),size:"small",onClick:function(){return k($.url)}}):(0,n.jsx)("a",{href:$.url,target:"_blank",rel:"noreferrer",children:(0,n.jsx)(C.ZP,{type:"default",icon:(0,n.jsx)(K.Z,{}),size:"small"})}),description:(0,n.jsx)(I.Fragment,{children:(0,n.jsx)(C.ZP,{type:"text",size:"small",onClick:function(){return $.mime==="directory"?k($.url):L&&L($,S.directory)},children:$.name})})})})}}),(0,n.jsx)(R.Z,{pageSizeOptions:[],current:S.current_page,total:S.total,pageSize:S.per_page,onChange:function($){return k(S.directory,$)}})]})},X=e},89825:function(Ge,be,t){"use strict";t.d(be,{Z:function(){return e}});var Me=t(26271),m=t(80854),ve=t(5574),f=t.n(ve),_e=t(50227),h=t(2453),I=t(15746),u=t(71230),z=t(38925),O=t(75081),ne=t(67294);function C(X){var H=(0,ne.useRef)(X);(0,ne.useEffect)(function(){var N=function(){var w=localStorage.getItem("TOKEN");H.current(w)};return window.addEventListener("token_change",N),function(){window.removeEventListener("token_change",N)}},[])}var oe=t(97704),R=t(85893),q="h5p-editor",J=function(X){return X.TokenChanged="TOKEN_CHANGED",X}(J||{}),K=function(H){var N,_=document.getElementById(q);if(!_){console.error("There is no iframe with id '".concat(q,"'"));return}(N=_.contentWindow)===null||N===void 0||N.postMessage({type:J.TokenChanged,token:H},"*")},W=function(H){var N=H.id,_=H.onSubmitted,w=H.onLoaded,L=(0,ne.useState)(),Q=f()(L,2),B=Q[0],p=Q[1],v=(0,ne.useState)(!1),Ze=f()(v,2),Ue=Ze[0],me=Ze[1],S=(0,ne.useState)(),y=f()(S,2),Z=y[0],x=y[1],M=(0,m.useIntl)(),k=M.locale.split("-")[0];C(K),(0,ne.useEffect)(function(){N&&(me(!0),(0,oe.RN)(N==="new"?void 0:N,k).then(function(ee){ee.success?(w&&w(ee.data),p(ee.data)):x(ee.message)}).catch(function(ee){return ee&&x(ee.toString())}).finally(function(){return me(!1)}))},[N]);var le=(0,ne.useCallback)(function(ee){me(!0),(0,oe.x0)(ee,N==="new"?void 0:N).then(function(F){F.success?(_(F.data.id),h.ZP.success((0,R.jsx)(m.FormattedMessage,{id:"h5p_edited",defaultMessage:"H5P Element edited and saved successfully"}))):x(F.message)}).catch(function(F){return F&&x(F.toString())}).finally(function(){return me(!1)})},[]);return B?(0,R.jsxs)(ne.Fragment,{children:[Z&&(0,R.jsx)(z.Z,{message:Z,type:"error"}),B&&(0,R.jsx)(_e.ContextlessEditor,{onError:function(F){return console.error(F)},state:B,allowSameOrigin:!0,onSubmit:le,loading:Ue,lang:k,iframeId:q})]}):(0,R.jsx)(I.Z,{children:(0,R.jsxs)(u.Z,{justify:"center",align:"middle",children:[Z&&(0,R.jsx)(z.Z,{message:Z,type:"error"}),(0,R.jsx)(O.Z,{})]})})},l=W,n=t(66340),U=function(H){var N=H.defaultCard,_=N===void 0?"edit":N,w=H.id,L=H.onSubmit,Q=H.onLoaded;return(0,R.jsxs)(Me.ZP,{tabs:{type:"card",defaultActiveKey:_},children:[(0,R.jsx)(Me.ZP.TabPane,{disabled:!w,tab:(0,R.jsx)(m.FormattedMessage,{id:"edit"}),children:(0,R.jsx)(l,{id:w,onSubmitted:L,onLoaded:Q},w)},"edit"),w!=="new"&&(0,R.jsx)(Me.ZP.TabPane,{disabled:!w,tab:(0,R.jsx)(m.FormattedMessage,{id:"preview"}),children:(0,R.jsx)(n.Z,{id:w,onLoaded:Q})},"preview")]})},e=U},66340:function(Ge,be,t){"use strict";var Me=t(19632),m=t.n(Me),ve=t(5574),f=t.n(ve),_e=t(97704),h=t(50227),I=t.n(h),u=t(25514),z=t(15746),O=t(71230),ne=t(38925),C=t(75081),oe=t(96074),R=t(67294),q=t(55171),J=t.n(q),K=t(80854),W=t(85893),l=u.Z.Title,n=function(e){var X=e.id,H=e.onXAPI,N=e.onLoaded,_=(0,R.useState)(),w=f()(_,2),L=w[0],Q=w[1],B=(0,R.useState)(!1),p=f()(B,2),v=p[0],Ze=p[1],Ue=(0,R.useState)([]),me=f()(Ue,2),S=me[0],y=me[1],Z=(0,R.useState)(),x=f()(Z,2),M=x[0],k=x[1],le=(0,K.useIntl)(),ee=le.locale.split("-")[0];return(0,R.useEffect)(function(){X&&(Ze(!0),(0,_e.LK)(X,ee).then(function(F){F.success?(N&&N(F.data),Q(F.data)):k(F.message)}).catch(function(F){return F&&k(F.toString())}).finally(function(){return Ze(!1)}))},[X]),L?(0,W.jsxs)(R.Fragment,{children:[M&&(0,W.jsx)(ne.Z,{message:M,type:"error"}),(0,W.jsx)(h.ContextlessPlayer,{contentId:X,onError:function($){return console.error($)},state:L,allowSameOrigin:!0,loading:v,onXAPI:function($){H?H($):y(function(de){return[].concat(m()(de),[$])})}}),!H&&(0,W.jsxs)(R.Fragment,{children:[(0,W.jsx)(oe.Z,{}),(0,W.jsxs)("div",{style:{overflow:"auto",maxHeight:"400px"},children:[(0,W.jsx)(l,{level:5,children:"XAPI Events"}),(0,W.jsx)(J(),{src:S})]})]})]}):(0,W.jsx)(z.Z,{children:(0,W.jsxs)(O.Z,{justify:"center",align:"middle",children:[M&&(0,W.jsx)(ne.Z,{message:M,type:"error"}),(0,W.jsx)(C.Z,{})]})})};be.Z=n},9412:function(Ge,be,t){"use strict";var Me=t(29477),m=t(67294),ve=t(85893),f=function(h){var I=h.onSuccess,u=h.onError,z=h.hideLabel;return(0,ve.jsx)(Me.Z,{url:"/api/admin/hh5p/content/upload",name:"h5p_file",accept:".h5p",hideLabel:z,onChange:function(ne){ne.file.status==="done"&&ne.file.response&&I(ne.file.response),ne.file.status==="error"&&u()}})};be.C=f},95486:function(Ge,be,t){"use strict";var Me=t(5574),m=t.n(Me),ve=t(14726),f=t(28248),_e=t(55742),h=t(94315),I=t(45823),u=t(67294),z=t(80854),O=t(85893),ne=function(oe){var R=oe.value,q=oe.onChange,J=(0,u.useState)(!1),K=m()(J,2),W=K[0],l=K[1],n=(0,u.useCallback)(function(){l(!1)},[]),U=(0,u.useState)("code"),e=m()(U,2),X=e[0],H=e[1];return(0,O.jsxs)("div",{children:[(0,O.jsx)(ve.ZP,{type:"primary",onClick:function(){return l(!0)},size:"small",children:(0,O.jsx)(z.FormattedMessage,{id:"json_editor"})}),(0,O.jsxs)(f.Z,{title:"JSON",open:W,onOk:n,onCancel:n,destroyOnClose:!0,children:[(0,O.jsxs)(_e.ZP.Group,{onChange:function(_){return H(_.target.value)},value:X,children:[(0,O.jsx)(_e.ZP,{value:"tree",children:"tree"}),(0,O.jsx)(_e.ZP,{value:"view",children:"view"}),(0,O.jsx)(_e.ZP,{value:"form",children:"form"}),(0,O.jsx)(_e.ZP,{value:"code",children:"code"}),(0,O.jsx)(_e.ZP,{value:"text",children:"text"})]}),(0,O.jsx)(h.A,{mode:X,value:R,onChange:q},X)]})]})};be.Z=ne},34201:function(Ge,be,t){"use strict";t.d(be,{Z:function(){return me}});var Me=t(5574),m=t.n(Me),ve=t(38925),f=t(75081),_e=t(96074),h=t(2487),I=t(25514),u=t(14726),z=t(67294),O=t(80854),ne=t(19632),C=t.n(ne),oe=t(93162),R=t(55733),q=t.n(R),J=t(85893),K=function(y){var Z=y.pdfIds,x=y.onProgress,M=y.onFinished,k=y.filename,le=k===void 0?"package.zip":k,ee=(0,z.useState)([]),F=m()(ee,2),$=F[0],de=F[1],se=(0,z.useCallback)(function(Ee){var Ce=new(q());Ee.forEach(function(Fe,De){return Ce.file("".concat(Z[De],".pdf"),Fe)}),Ce.generateAsync({type:"blob"}).then(function(Fe){(0,oe.saveAs)(Fe,le),M&&M()})},[$,le]);return(0,z.useEffect)(function(){Z.forEach(function(Ee){var Ce=fetch("".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/pdfs/generate/").concat(Ee),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}});Ce.then(function(Fe){return Fe.blob()}).then(function(Fe){Fe&&Fe instanceof Blob&&de(function(De){var V=(De.length+1)/Z.length;return x&&x(V),V>=1&&se([].concat(C()(De),[Fe])),[].concat(C()(De),[Fe])})})})},[Z]),(0,J.jsxs)("p",{children:["Progress ",$.length," / ",Z.length]})},W=K,l=t(15009),n=t.n(l),U=t(97857),e=t.n(U),X=t(99289),H=t.n(X);function N(S,y){return _.apply(this,arguments)}function _(){return _=H()(n()().mark(function S(y,Z){return n()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,O.request)("/api/admin/pdfs",e()({params:e()({},y),method:"GET"},Z||{})));case 1:case"end":return M.stop()}},S)})),_.apply(this,arguments)}function w(S,y){return L.apply(this,arguments)}function L(){return L=H()(n()().mark(function S(y,Z){return n()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,O.request)("/api/pdfs/".concat(y),e()({method:"GET"},Z||{})));case 1:case"end":return M.stop()}},S)})),L.apply(this,arguments)}function Q(S,y){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime().mark(function S(y,Z){return _regeneratorRuntime().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",request("/api/pdfs/generate/".concat(y),_objectSpread({method:"GET"},Z||{})));case 1:case"end":return M.stop()}},S)})),B.apply(this,arguments)}var p=t(62235),v=t(69753),Ze=t(19326),Ue=function(y){var Z=y.user_id,x=y.template_id,M=y.title,k=(0,z.useState)({state:"initial"}),le=m()(k,2),ee=le[0],F=le[1],$=(0,z.useState)({state:"initial"}),de=m()($,2),se=de[0],Ee=de[1],Ce=(0,z.useState)(!1),Fe=m()(Ce,2),De=Fe[0],V=Fe[1];(0,z.useEffect)(function(){F({state:"loading"});var He=new AbortController;return N({user_id:Z,template_id:x},{signal:He.signal}).then(function(te){te&&te.success?F({state:"loaded",list:te.data}):te&&!te.success&&F({state:"error",error:te.message})}).catch(function(te){return F({state:"error",error:te.toString()})}),function(){He.abort()}},[]);var ze=(0,z.useCallback)(function(He){Ee({state:"loading"}),w(He).then(function(te){te.success?Ee({state:"loaded",data:te.data.content}):Ee({state:"initial"})})},[]);return ee.state==="error"?(0,J.jsx)(ve.Z,{message:"Error Text",type:"error"}):ee.state==="loading"||ee.state==="initial"?(0,J.jsx)(f.Z,{}):(0,J.jsxs)(z.Fragment,{children:[(0,J.jsx)(_e.Z,{}),De&&(0,J.jsx)(W,{pdfIds:ee.list.map(function(He){return He.id}),onFinished:function(){return V(!1)}}),(0,J.jsx)(h.Z,{size:"small",itemLayout:"horizontal",dataSource:ee.list,header:(0,J.jsxs)("div",{children:[(0,J.jsx)(O.FormattedMessage,{id:"template"})," ",M&&(0,J.jsx)(I.Z.Text,{strong:!0,children:M}),". ",(0,J.jsx)(O.FormattedMessage,{id:"generated_pdfs",defaultMessage:"Generated PDFs"})," ",(0,J.jsx)(u.ZP,{loading:De,type:"primary",onClick:function(){return V(!0)},icon:(0,J.jsx)(v.Z,{}),size:"small",children:(0,J.jsx)(O.FormattedMessage,{id:"download_all",defaultMessage:"Download all PDFs"})})]}),renderItem:function(te){return(0,J.jsxs)(h.Z.Item,{actions:[(0,J.jsx)(Ze.Z,{url:"/api/pdfs/generate/".concat(te.id),filename:"generated-".concat(te.id,".pdf"),size:"small",icon:(0,J.jsx)(v.Z,{}),type:"primary",onClick:function(){return ze(te.id)},loading:se.state==="loading",children:(0,J.jsx)(O.FormattedMessage,{id:"download_pdf",defaultMessage:"Download PDFs"})},"download")],children:[te.title," ",(0,J.jsx)(p.Z,{type:"App\\Models\\User",type_id:te.user_id})]})}})]})},me=Ue},53957:function(Ge,be,t){"use strict";var Me=t(5574),m=t.n(Me),ve=t(50082),f=t(67294),_e=t(85893),h=function(u){var z=u.productable,O=u.type,ne=O===void 0?"card":O,C=(0,f.useState)("attributes"),oe=m()(C,2),R=oe[0],q=oe[1];return(0,_e.jsx)(ve.Z,{productable:z,tab:R,onTabChange:function(K){return q(K)},type:ne})};be.C=h},81424:function(Ge,be,t){"use strict";var Me=t(52677),m=t.n(Me),ve=t(5574),f=t.n(ve),_e=t(83863),h=t(75081),I=t(67294),u=t(44837),z=t(80854),O=t(85893),ne=function(oe){var R=oe.value,q=oe.onChange,J=oe.multiple,K=J===void 0?!1:J,W=oe.type,l=(0,I.useState)([]),n=f()(l,2),U=n[0],e=n[1],X=(0,I.useState)(!1),H=f()(X,2),N=H[0],_=H[1],w=(0,I.useState)([]),L=f()(w,2),Q=L[0],B=L[1],p=(0,I.useRef)(),v=(0,I.useCallback)(function(S){_(!0),p.current&&p.current.abort(),p.current=new AbortController,(0,u.RB)({productable_type:W,name:S||void 0},{signal:p.current.signal}).then(function(y){y.success&&e(W?y.data.filter(function(Z){return Z.type==="single"&&Z.productables&&Z.productables[0].id}):y.data),_(!1)}).catch(function(){return _(!1)})},[]);(0,I.useEffect)(function(){var S=new AbortController;if(R){var y=Array.isArray(R)?R:[R],Z=y.map(function(x){return m()(x)==="object"?Number(x.id):Number(x)});B(Z)}return function(){S.abort()}},[R]);var Ze=(0,I.useCallback)(function(S){v(S)},[v]),Ue=(0,I.useCallback)(function(){B([])},[]),me=(0,I.useCallback)(function(S){S||Ue(),q&&q(S)},[q,Ue]);return(0,O.jsx)(_e.default,{onFocus:function(){return v()},allowClear:!0,style:{width:"100%",minWidth:"150px"},value:Q,onChange:me,mode:K?"multiple":void 0,showSearch:!0,onSearch:Ze,onDeselect:Ue,placeholder:(0,O.jsx)(z.FormattedMessage,{id:"select_product",defaultMessage:"Select a product"}),optionFilterProp:"children",filterOption:function(y,Z){if(Z&&Z.children){var x;return(Z==null||(x=Z.children)===null||x===void 0?void 0:x.toString().toLowerCase().indexOf(y&&y.toLowerCase()||""))>=0}return!1},notFoundContent:N?(0,O.jsx)(h.Z,{size:"small"}):null,children:U.map(function(S){return(0,O.jsx)(_e.default.Option,{value:S.id,children:S.name},S.id)})})};be.Z=ne},87366:function(Ge,be,t){"use strict";t.d(be,{Il:function(){return H},_y:function(){return oe},uS:function(){return J}});var Me=t(5574),m=t.n(Me),ve=t(97857),f=t.n(ve),_e=t(19632),h=t.n(_e),I=t(2453),u=t(67294),z=t(80854),O=t(99100),ne=t(31472),C=t(85893),oe=u.createContext({}),R=function(){return Math.round(Math.random()*99999)},q=function N(_){return _.reduce(function(w,L){return[].concat(h()(w),h()(L.lessons?N(L.lessons):[]),[L])},[])},J=function N(_){return _.reduce(function(w,L){var Q;return[].concat(h()(w),h()(L.lessons?N(L.lessons):[]),h()((Q=L.topics)!==null&&Q!==void 0?Q:[]))},[])},K=function N(_,w,L){return _.map(function(Q){var B,p;return f()(f()({},Q),{},{lessons:Q.lessons?N(Q.lessons,w,L):[],topics:Q.id===w?[].concat(h()((B=Q.topics)!==null&&B!==void 0?B:[]),[L]):(p=Q.topics)!==null&&p!==void 0?p:[]})})},W=function N(_,w,L){return L?_.map(function(Q){return f()(f()({},Q),{},{lessons:[].concat(h()(Q.lessons?N(Q.lessons,w,L):[]),h()(Q.id===L?[w]:[]))})}):[].concat(h()(_),[w])},l=function N(_,w,L){return _.map(function(Q){return f()(f()({},Q.id===w?L:Q),{},{lessons:Q.lessons?N(Q.lessons,w,L):[]})})},n=function N(_,w){return _.map(function(L){return f()(f()({},L),{},{parent_id:w,lessons:L.lessons?N(L.lessons,L.id):[]})})},U=function N(_,w){return _.filter(function(L){return L.id!==w}).map(function(L){return f()(f()({},L),{},{lessons:L.lessons?N(L.lessons,w):[]})})},e=function N(_,w){return _.map(function(L){return f()(f()({},L),{},{lessons:L.lessons?N(L.lessons,w):[],topics:L.topics?L.topics.filter(function(Q){return Q.id!==w}):[]})})},X=function N(_,w,L,Q){return Q==null?void 0:Q.map(function(B){if(B.id===L){var p;return f()(f()({},B),{},{topics:(p=B.topics)===null||p===void 0?void 0:p.map(function(v){return v.id===_?w.file.response.data:v})})}else if(B.lessons)return f()(f()({},B),{},{lessons:N(_,w,L,B.lessons||[])});return B})},H=function(_){var w=_.children,L=_.id,Q=(0,u.useState)(),B=m()(Q,2),p=B[0],v=B[1],Ze=(0,z.useIntl)(),Ue=(0,u.useMemo)(function(){return p&&p.lessons?J(p.lessons):[]},[p]),me=(0,u.useMemo)(function(){return p&&p.lessons?q(p.lessons):[]},[p]),S=(0,u.useState)([]),y=m()(S,2),Z=y[0],x=y[1],M=(0,z.useLocation)(),k=(0,u.useMemo)(function(){var te=new URLSearchParams(M.search);return{lesson:te.get("lesson"),topic:te.get("topic")}},[M]);(0,u.useEffect)(function(){x([])},[]);var le=(0,u.useCallback)(function(){(0,O.Nx)(L).then(function(te){return te.success&&v(f()(f()({},te.data),{},{lessons:n(te.data.lessons)}))})},[L]);(0,u.useEffect)(function(){le()},[le]);var ee=(0,u.useCallback)(function(te){var Pe=me.find(function(fe){var pe;return fe==null||(pe=fe.topics)===null||pe===void 0?void 0:pe.find(function(Se){return Se.id===te})});return Pe?Pe.id:null},[me]),F=(0,u.useMemo)(function(){return k.lesson?{mode:"lesson",id:Number(k.lesson),value:me.find(function(te){return te.id===Number(k.lesson)})}:k.topic?{mode:"topic",id:Number(k.topic),value:Ue.find(function(te){return te.id===Number(k.topic)})}:{mode:"init"}},[k,p,me,Ue]),$=(0,u.useCallback)(function(te){var Pe={course_id:L,topics:[],isNew:!0,id:p?p.lessons.length+1:R(),order:0,title:Ze.formatMessage({id:"add_title_here"}),active:!0,parent_id:te};return v(function(fe){var pe;return f()(f()({},fe),{},{lessons:W((pe=fe==null?void 0:fe.lessons)!==null&&pe!==void 0?pe:[],Pe,te)})}),Pe},[L,p]),de=(0,u.useCallback)(function(te,Pe){var fe=me.find(function(Se){return Se.id===te}),pe=fe&&fe.isNew;return(pe?(0,O.aA)(Pe):(0,O.sI)(te,Pe)).then(function(Se){return I.ZP.success(Se.message),le(),Se.success&&v(function(ie){var ye;return f()(f()({},ie),{},{lessons:l((ye=ie==null?void 0:ie.lessons)!==null&&ye!==void 0?ye:[],te,f()(f()({},Se.data),{},{isNew:!1}))})})})},[p]),se=(0,u.useCallback)(function(te){var Pe=me.find(function(pe){return pe.id===te});if(Pe){var fe=Pe.isNew;fe?v(function(pe){var Se;return f()(f()({},pe),{},{lessons:U((Se=pe==null?void 0:pe.lessons)!==null&&Se!==void 0?Se:[],te)})}):(0,O.iI)(te).then(function(pe){pe.success&&(I.ZP.success(pe.message),v(function(Se){var ie;return f()(f()({},Se),{},{lessons:U((ie=Se==null?void 0:Se.lessons)!==null&&ie!==void 0?ie:[],te)})}))})}},[p]),Ee=(0,u.useCallback)(function(te,Pe){var fe,pe=ee(te),Se=me.find(function(Be){return Be.id===pe}),ie=Se&&((fe=Se.topics)===null||fe===void 0?void 0:fe.find(function(Be){return Be.id===te})),ye=ie==null?void 0:ie.isNew;return(ye?(0,O.HV)(Pe):(0,O.Cn)(te,Pe)).then(function(Be){Be.success&&(I.ZP.success(Be.message),le(),z.history.push("/courses/list/".concat(L,"/program/?topic=").concat(Be.data.id)),(ie==null?void 0:ie.topicable_type)===ne.oz.Video&&setTimeout(function(){le()},5e3))})},[ee,p,le]),Ce=(0,u.useCallback)(function(te){var Pe=ee(te),fe=me.find(function(ie){return ie.id===Pe});if(fe){var pe=Ue==null?void 0:Ue.find(function(ie){return ie.id===te}),Se=pe==null?void 0:pe.isNew;Se&&!pe.topicable?v(function(ie){var ye;return f()(f()({},ie),{},{lessons:e((ye=ie==null?void 0:ie.lessons)!==null&&ye!==void 0?ye:[],te)})}):(0,O.vJ)(te).then(function(ie){ie.success&&(I.ZP.success(ie.message),v(function(ye){var Be;return f()(f()({},ye),{},{lessons:e((Be=ye==null?void 0:ye.lessons)!==null&&Be!==void 0?Be:[],te)})}))})}},[p,ee]),Fe=(0,u.useCallback)(function(te,Pe){var fe={lesson_id:te,isNew:!0,id:R(),title:Ze.formatMessage({id:"add_title_here"}),active:!0,topicable_type:Pe};return v(function(pe){var Se;return f()(f()({},pe),{},{lessons:K((Se=pe==null?void 0:pe.lessons)!==null&&Se!==void 0?Se:[],te,fe)})}),fe},[]),De=function(Pe,fe){var pe=ee(Pe);v(function(Se){return f()(f()({},Se),{},{lessons:Se?X(Pe,fe,pe,Se.lessons||[]):[]})}),z.history.push("/courses/list/".concat(L,"/program/?topic=").concat(fe.file.response.data.id))},V=(0,u.useCallback)(function(te){return(0,O.Cx)(te).then(function(Pe){if(Pe.success){I.ZP.success(Pe.message);var fe=ee(te);v(function(pe){var Se;return f()(f()({},pe),{},{lessons:pe?(Se=pe.lessons)===null||Se===void 0?void 0:Se.map(function(ie){if(ie.id===fe){var ye=ie.topics||[];return f()(f()({},ie),{},{topics:[].concat(h()(ye),[Pe.data])})}return ie}):[]})})}})},[p,ee]),ze=(0,u.useCallback)(function(te){return(0,O.if)(te).then(function(Pe){Pe.success&&(I.ZP.success(Pe.message),v(function(fe){return f()(f()({},fe),{},{lessons:fe?[].concat(h()(fe.lessons),[Pe.data]):[]})}))})},[]),He={state:p,h5ps:Z,id:L,addNewLesson:$,updateLesson:de,updateTopic:Ee,deleteLesson:se,addNewTopic:Fe,deleteTopic:Ce,onTopicUploaded:De,cloneTopic:V,cloneLesson:ze,currentEditMode:F,getLessons:le};return(0,C.jsx)(oe.Provider,{value:He,children:w})}},75175:function(Ge,be,t){"use strict";var Me=t(67294),m=t(85893),ve=function(_e){var h=_e.uuid;return(0,m.jsx)("iframe",{style:{border:"none",background:"none",width:"100%",height:"100%"},className:"scorm-preview-player",src:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/scorm/play/").concat(h)})};be.Z=ve},82238:function(Ge,be,t){"use strict";var Me=t(9783),m=t.n(Me),ve=t(5574),f=t.n(ve),_e=t(13769),h=t.n(_e),I=t(15009),u=t.n(I),z=t(97857),O=t.n(z),ne=t(99289),C=t.n(ne),oe=t(20568),R=t(29477),q=t(54734),J=t(14726),K=t(28248),W=t(2453),l=t(67294),n=t(80854),U=t(85893),e=["folder","onResponse"],X=function(){var Q=C()(u()().mark(function B(p,v,Ze){return u()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.abrupt("return",(0,n.request)(p,O()({method:"POST",data:v},Ze||{})));case 1:case"end":return me.stop()}},B)}));return function(p,v,Ze){return Q.apply(this,arguments)}}(),H=function(B){var p=B.split("//").join("/");return p=p[p.length-1]==="/"?p:"".concat(p,"/"),p=p[0]==="/"?p.slice(1):p,p},N=function(B){return Array.isArray(B)&&B[0]?B[0].name:B.name},_=function(B,p){var v=H(B),Ze=N(p);return Ze.includes(v)?Ze:"".concat(v).concat(Ze)},w=function(B){return{file:{status:"done",uid:"fileFromBrowser",name:"fileFromBrowser",response:B},fileList:[]}};function L(Q){var B=Q.folder,p=Q.onResponse,v=h()(Q,e),Ze=(0,l.useState)(!1),Ue=f()(Ze,2),me=Ue[0],S=Ue[1],y=(0,l.useState)(!1),Z=f()(y,2),x=Z[0],M=Z[1],k=v.url,le=v.name,ee=v.onChange,F=v.data,$=(0,l.useCallback)(function(){S(!1)},[]);return(0,U.jsxs)("div",{children:[(0,U.jsxs)(J.ZP,{onClick:function(){return S(!0)},icon:(0,U.jsx)(q.Z,{}),children:[" ",(0,U.jsx)(n.FormattedMessage,{id:"browse"})]}),me&&(0,U.jsx)(K.Z,{open:me,onCancel:$,onOk:$,width:"60vw",children:(0,U.jsx)(oe.Z,{forceLoading:x,hideDeleteBtn:!0,defaultDirectory:B,onFile:function(se,Ee){Ee&&(M(!0),X(k,O()(O()({},F),{},m()({},le,_(Ee,se)))).then(function(Ce){M(!1),p&&p(Ce),Ce.success?($(),ee&&ee(w(Ce))):W.ZP.error(Ce.message)}).catch(function(Ce){M(!1),"data"in Ce?W.ZP.error(Ce.data.message):W.ZP.error("Unknown Error")}))}})}),(0,U.jsx)("div",{style:{marginTop:"10px"},children:(0,U.jsx)(R.Z,O()({},v))})]})}be.Z=L},29477:function(Ge,be,t){"use strict";var Me=t(97857),m=t.n(Me),ve=t(5574),f=t.n(ve),_e=t(55523),h=t(75842),I=t(21974),u=t(67294),z=t(80854),O=t(85893);function ne(C){var oe=C.onChange,R=C.onUpload,q=C.url,J=C.name,K=C.extra,W=C.accept,l=C.data,n=C.wrapInForm,U=n===void 0?!0:n,e=C.title,X=C.formProps,H=C.maxFiles,N=C.clearListAfterUpload,_=C.hideLabel,w=C.disabled,L=C.showUploadList,Q=(0,u.useState)(),B=f()(Q,2),p=B[0],v=B[1],Ze=(0,z.useIntl)();return l&&l[J]&&delete l[J],(0,O.jsx)(I.Z,{condition:U,wrap:function(me){return(0,O.jsx)(h.Z,m()(m()({},X),{},{children:me}))},children:(0,O.jsx)(_e.Z,{title:e||" ".concat(Ze.formatMessage({id:"upload_click_here"})),placeholder:Ze.formatMessage({id:"upload_click_here"}),label:!_&&(0,O.jsx)(z.FormattedMessage,{id:"upload"}),max:H!=null?H:2,fieldProps:{data:l,accept:W,name:J,showUploadList:L,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))},onChange:function(me){v(me),oe&&oe(me),me.file.status==="done"&&(R&&R(me.file.response),N&&v(void 0))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(q),extra:K,fileList:p==null?void 0:p.fileList,disabled:w})})}be.Z=ne},44167:function(Ge,be,t){"use strict";var Me=t(52677),m=t.n(Me),ve=t(19632),f=t.n(ve),_e=t(5574),h=t.n(_e),I=t(83863),u=t(75081),z=t(67294),O=t(30869),ne=t(80854),C=t(85893),oe=function(q){var J=q.value,K=q.onChange,W=q.multiple,l=W===void 0?!1:W,n=q.role,U=q.showEmail,e=q.disabled,X=(0,z.useState)([]),H=h()(X,2),N=H[0],_=H[1],w=(0,z.useState)(!1),L=h()(w,2),Q=L[0],B=L[1],p=(0,z.useState)([]),v=h()(p,2),Ze=v[0],Ue=v[1],me=(0,z.useRef)(),S=(0,z.useRef)(),y=(0,z.useCallback)(function(le){_(function(ee){return[].concat(f()(ee),f()(le)).filter(function(F,$,de){return de.findIndex(function(se){return U?se.email===F.email:se.id===F.id})===$})})},[]);(0,z.useEffect)(function(){me.current=N},[N]);var Z=(0,z.useCallback)(function(le){B(!0),S.current&&S.current.abort(),S.current=new AbortController,(0,O.rC)({search:le,role:n},{signal:S.current.signal}).then(function(ee){ee&&ee.success&&(y(ee.data),B(!1))}).catch(function(){return B(!1)})},[]),x=(0,z.useCallback)(function(le){Z(le)},[Z]),M=(0,z.useCallback)(function(){Ue([])},[]);(0,z.useEffect)(function(){var le=new AbortController;if(J){var ee=Array.isArray(J)?J:[J],F=ee.map(function($){return m()($)==="object"?Number($.id):Number($)});Ue(F),F.filter(function($){var de;return!((de=me.current)!==null&&de!==void 0&&de.find(function(se){return se.id===$}))}).forEach(function($){(0,O.EA)(Number($),{signal:le.signal},!1).then(function(de){de&&de.success&&y([de.data])})})}return function(){le.abort()}},[J]);var k=(0,z.useCallback)(function(le,ee){le||M(),K&&K(le,ee)},[K,M]);return(0,C.jsx)(I.default,{disabled:e,onFocus:function(){return Z()},allowClear:!0,style:{width:"100%",minWidth:"150px"},value:Ze,onChange:k,mode:l?"multiple":void 0,showSearch:!0,onSearch:x,onDeselect:M,placeholder:(0,C.jsx)(ne.FormattedMessage,{id:"select_person",defaultMessage:"Select a person"}),optionFilterProp:"children",filterOption:function(ee,F){return F&&F.children?String("".concat(F.user.name," ").concat(F.user.email)).toLowerCase().indexOf(ee&&ee.toLowerCase()||"")>=0:!0},notFoundContent:Q?(0,C.jsx)(u.Z,{size:"small"}):null,children:N.map(function(le){return(0,C.jsxs)(I.default.Option,{value:le.id,user:le,children:[le.name," ",U&&" - ".concat(le.email)]},le.id)})})};be.Z=oe},14408:function(Ge,be,t){"use strict";t.d(be,{Z:function(){return I}});var Me=t(97857),m=t.n(Me),ve=t(5574),f=t.n(ve),_e=t(2254),h=t(67294);function I(){var u=(0,h.useState)({showModal:!1,disableEdit:!1,clicked:!1}),z=f()(u,2),O=z[0],ne=z[1],C=function(R){(R==null?void 0:R.status)==="published"&&R!==null&&R!==void 0&&R.active_from&&(0,_e.C)(new Date(R==null?void 0:R.active_from))&&!O.clicked?ne(m()(m()({},O),{},{showModal:!1,disableEdit:!0,clicked:!1})):ne(m()(m()({},O),{},{showModal:!1,disableEdit:!1,clicked:!1}))};return{manageCourseEdit:O,setManageCourseEdit:ne,validateCourseEdit:C}}},12648:function(Ge,be,t){"use strict";t.r(be),t.d(be,{default:function(){return Gs}});var Me=t(9783),m=t.n(Me),ve=t(52677),f=t.n(ve),_e=t(15009),h=t.n(_e),I=t(97857),u=t.n(I),z=t(99289),O=t.n(z),ne=t(5574),C=t.n(ne),oe=t(49677),R=t.n(oe),q=t(95020),J=t(16894),K=t(2453),W=t(72269),l=t(67294),n=t(80854),U=t(62235),e=t(85893),X={1:"course"},H=function(b){return b[b.COURSE=1]="COURSE",b}({}),N=[{title:(0,e.jsx)(n.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:(0,e.jsx)(n.FormattedMessage,{id:"title",defaultMessage:"title"}),dataIndex:"title",hideInSearch:!0,sorter:!0,width:"80%",render:function(r,s){return(0,e.jsx)(U.Z,{type:"Questionnaire",type_id:Number(s.id),text:s.title})}}],_=function(r){var s=r.modelType,i=r.id,a=(0,l.useRef)(),o=(0,n.useIntl)(),c=(0,l.useCallback)(function(){var E=O()(h()().mark(function T(g,P){var G,d,j;return h()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(G=K.ZP.loading(o.formatMessage({id:"loading"})),Y.prev=1,!P){Y.next=8;break}return Y.next=5,(0,q.cc)(X[s],i,g);case 5:Y.t0=Y.sent,Y.next=11;break;case 8:return Y.next=10,(0,q.nX)(X[s],i,g);case 10:Y.t0=Y.sent;case 11:return d=Y.t0,d.success&&(G(),K.ZP.success(d.message),(j=a.current)===null||j===void 0||j.reload()),Y.abrupt("return");case 16:return Y.prev=16,Y.t1=Y.catch(1),G(),K.ZP.error((0,e.jsx)(n.FormattedMessage,{id:"error",defaultMessage:"error"})),Y.abrupt("return",!1);case 21:case"end":return Y.stop()}},T,null,[[1,16]])}));return function(T,g){return E.apply(this,arguments)}}(),[s,i]);return(0,e.jsx)(J.ZP,{headerTitle:o.formatMessage({id:"questionnaires",defaultMessage:"questionnaires"}),actionRef:a,rowKey:"id",search:!1,request:function(T,g){R()(T);var P=g&&Object.entries(g)[0];return(0,q.SC)({order_by:P&&P[0],order:P?P[1]==="ascend"?"ASC":"DESC":void 0}).then(function(G){return G.success?{data:G.data,success:!0}:[]})},columns:[].concat(N,[{title:(0,e.jsx)(n.FormattedMessage,{id:"assign",defaultMessage:"assign"}),dataIndex:"option",valueType:"option",render:function(T,g){var P;return[(0,e.jsx)(W.Z,{defaultChecked:g.models&&((P=g.models)===null||P===void 0?void 0:P.filter(function(G){return G.model_id===i}).length)>0,onChange:function(d){return c(Number(g.id),d)}},"assign")]}}])})},w=_,L=t(7418),Q=t(48959),B=t(19632),p=t.n(B),v=t(31472),Ze=t(61227),Ue=t.n(Ze),me=t(60943),S=t(45919),y=t(99100),Z=t(58638),x=t(14726),M=t(76841),k=function(r){var s=r.topic_id,i=r.stat,a=(0,l.useState)(!1),o=C()(a,2),c=o[0],E=o[1],T=(0,l.useCallback)(function(g){return O()(h()().mark(function P(){var G,d;return h()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(g){A.next=2;break}return A.abrupt("return");case 2:return E(!0),A.prev=3,A.next=6,(0,M.Sx)(g,i);case 6:G=A.sent,G instanceof Blob&&(d=document.createElement("a"),d.href=window.URL.createObjectURL(G),d.download="".concat(i,"_").concat(g,".xlsx"),document.body.appendChild(d),d.click(),document.body.removeChild(d)),A.next=13;break;case 10:A.prev=10,A.t0=A.catch(3),console.error(A.t0);case 13:return A.prev=13,E(!1),A.finish(13);case 16:case"end":return A.stop()}},P,null,[[3,10,13,16]])}))},[i]);return(0,e.jsxs)(x.ZP,{type:"primary",loading:c,disabled:s===void 0,onClick:T(s),children:[(0,e.jsx)(Z.Z,{})," ",(0,e.jsx)(n.FormattedMessage,{id:"export"})]})},le=[{dataIndex:"attempt",title:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.attempt"}),hideInSearch:!0,fixed:"left",width:100},{dataIndex:"email",title:(0,e.jsx)(n.FormattedMessage,{id:"email"}),hideInSearch:!0,fixed:"left"},{dataIndex:"user_id",title:(0,e.jsx)(n.FormattedMessage,{id:"user"}),hideInSearch:!0,render:function(r,s){return(0,e.jsx)(U.Z,{type:"App\\Models\\User",type_id:s.user_id})}},{dataIndex:"attempt_date",title:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.attemptDate"}),hideInSearch:!0,render:function(r,s){return s.attempt_date?(0,me.WU)(new Date(s.attempt_date),S.Cu):"-"}},{dataIndex:"attempt_time",title:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.attemptDuration"}),hideInSearch:!0,render:function(r,s){return s.attempt_time?"".concat(s.attempt_time,"s"):"-"}},{dataIndex:"summary",title:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.result"}),hideInSearch:!0,render:function(r,s){return typeof s.summary=="number"?"".concat((s.summary*100).toFixed(2),"%"):"-"}}],ee=function(r){return r!==void 0?Object.keys(r).filter(function(s){return s.includes("question")}).map(function(s,i){return{title:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.question",values:{i:i+1}}),dataIndex:s,hideInSearch:!0}}):[]},F=function(r){var s,i=r.quizTopics,a=(0,l.useState)(i==null||(s=i[0])===null||s===void 0?void 0:s.id),o=C()(a,2),c=o[0],E=o[1],T=(0,l.useState)([]),g=C()(T,2),P=g[0],G=g[1],d=(0,l.useMemo)(function(){return i.reduce(function(Y,D){var re=D.id,ue=D.title;return ue!==void 0&&re!==void 0?[].concat(p()(Y),[{value:re,label:ue}]):Y},[])},[i]),j=(0,l.useMemo)(function(){var Y;return[{dataIndex:"topic_id",title:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.topic"}),hideInTable:!0,valueType:"select",fieldProps:{options:d,defaultValue:d==null||(Y=d[0])===null||Y===void 0?void 0:Y.value,allowClear:!1}}].concat(le,p()(P))},[d,P]),A=(0,l.useCallback)(function(){var Y=O()(h()().mark(function D(re){var ue,ce,$e,Ae,Oe,Ke,we,Xe;return h()().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(ce=re.topic_id,$e=ce===void 0?c:ce,$e){qe.next=3;break}return qe.abrupt("return",{success:!1,data:[],total:0});case 3:return qe.next=5,(0,y.ps)($e,v.rX.QuizSummary);case 5:if(Ae=qe.sent,!(!Ae.success||!((ue=Ae.data)!==null&&ue!==void 0&&ue[v.rX.QuizSummary]))){qe.next=8;break}return qe.abrupt("return",{success:!1,data:[],total:0});case 8:return Oe=Ae.data[v.rX.QuizSummary],Ke=Ue()(Oe),we=Ke[0],Xe=Ke.slice(1),G(ee(we)),qe.abrupt("return",{success:!0,data:Xe,total:Xe.length});case 11:case"end":return qe.stop()}},D)}));return function(D){return Y.apply(this,arguments)}}(),[]);return(0,e.jsx)(J.ZP,{headerTitle:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.title"}),onSubmit:function(D){var re=D.topic_id;return E(re)},onReset:function(){var D;return E(i==null||(D=i[0])===null||D===void 0?void 0:D.id)},toolBarRender:function(){return[(0,e.jsx)(k,{stat:v.rX.QuizSummary,topic_id:c},"export")]},className:"table-standalone",request:A,columns:j,search:{layout:"vertical"},scroll:{x:1500}})},$=function(r){var s=r.flatTopics,i=(0,l.useMemo)(function(){var a;return s.reduce(function(o,c){return u()(u()({},o),{},m()({},c.topicable_type,[].concat(p()(o[c.topicable_type]),[c])))},(a={},m()(m()(m()(m()(m()(m()(m()(m()(m()(m()(a,v.oz.RichText,[]),v.oz.OEmbed,[]),v.oz.Audio,[]),v.oz.Video,[]),v.oz.H5P,[]),v.oz.Image,[]),v.oz.PDF,[]),v.oz.SCORM,[]),v.oz.Project,[]),v.oz.GiftQuiz,[]),m()(a,v.oz.Unselected,[])))},[s]);return(0,e.jsx)(e.Fragment,{children:i[v.oz.GiftQuiz].length>0&&(0,e.jsx)(F,{quizTopics:i[v.oz.GiftQuiz]})})},de=t(87366),se=t(26271),Ee=t(25514),Ce=t(75081),Fe=t(38925),De=t(78677),V=function(r){var s=r.config,i=r.value,a=r.title,o=r.children,c=r.valueLabel,E=(0,l.useCallback)(function(g,P){var G,d=(G=i.find(function(j){return j.type===P.type}))===null||G===void 0?void 0:G.topic;return d?"".concat(d.topicable_type.split("\\").pop(),":").concat(d.title):g},[i]),T=(0,l.useCallback)(function(g){return{name:c||g.type,value:g.value}},[c]);return(0,e.jsx)(se.ZP,{title:a,headerBordered:!0,children:(0,e.jsxs)("div",{style:{overflow:"auto",minHeight:"400px"},children:[(0,e.jsx)(De.Z,u()(u()({},s),{},{tooltip:{formatter:T,title:E},data:i})),o&&o]})})},ze=V,He=t(11312),te={xField:"type",yField:"value",seriesField:"type",isRange:!1,title:null,xAxis:{label:{autoHide:!0,autoRotate:!1}},interactions:[{type:"active-region",enable:!1}],columnBackground:{style:{fill:"rgba(0,0,0,0.1)"}}},Pe=function(r){var s,i,a,o,c=r.courseId,E=(0,l.useState)({mode:"init"}),T=C()(E,2),g=T[0],P=T[1],G=(0,l.useState)([]),d=C()(G,2),j=d[0],A=d[1],Y=Ee.Z.Text,D=(0,n.useIntl)();return(0,l.useEffect)(function(){P({mode:"loading"}),Promise.all([(0,y.Nx)(Number(c)),(0,y.ue)(Number(c))]).then(function(re){var ue=C()(re,2),ce=ue[0],$e=ue[1];ce.success&&$e.success&&(A((0,de.uS)(ce.data.lessons)),P({mode:"loaded",value:Object.entries($e.data).map(function(Ae){var Oe=C()(Ae,2),Ke=Oe[0],we=Oe[1],Xe=D.formatMessage({id:Ke.split("\\").pop()});return{type:Xe,value:we}})}))})},[]),(0,e.jsxs)(se.ZP,{split:"vertical",children:[g.mode==="loading"&&(0,e.jsx)(Ce.Z,{}),g.mode==="loaded"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(He.Du,{course_id:Number(c),topics:j,stats:(s=g.value.find(function(re){return re.type.includes("FinishedTopics")}))===null||s===void 0?void 0:s.value}),(0,e.jsx)(He.rL,{stats:(i=g.value.find(function(re){return re.type.includes("FinishedCourse")}))===null||i===void 0?void 0:i.value,attempts:(a=g.value.find(function(re){return re.type.includes("AttendanceList")}))===null||a===void 0?void 0:a.value}),(0,e.jsx)(He.nu,{stats:(o=g.value.find(function(re){return re.type.includes("AttendanceList")}))===null||o===void 0?void 0:o.value}),(0,e.jsxs)(Y,{children:[(0,e.jsx)(n.FormattedMessage,{id:"MoneyEarned"}),": ".concat(g.value.find(function(re){return re.type.split("\\").pop()===D.formatMessage({id:"MoneyEarned"})}).value)]}),(0,e.jsx)(se.ZP,{colSpan:12,layout:"center",children:(0,e.jsx)(ze,{config:te,title:(0,e.jsx)(n.FormattedMessage,{id:"People"}),value:g.value.filter(function(re){var ue=re.type.split("\\").pop();return ue===D.formatMessage({id:"PeopleBought"})||ue===D.formatMessage({id:"PeopleFinished"})||ue===D.formatMessage({id:"PeopleStarted"})})})}),(0,e.jsx)(se.ZP,{colSpan:12,layout:"center",children:(0,e.jsx)(ze,{config:te,title:(0,e.jsx)(n.FormattedMessage,{id:"AverageTimePerTopic"}),valueLabel:D.formatMessage({id:"seconds",defaultMessage:"seconds"}),value:Object.entries(g.value.find(function(re){return re.type.split("\\").pop()===D.formatMessage({id:"AverageTimePerTopic"})}).value).map(function(re){var ue;return{type:re[0],value:(ue=re[1])===null||ue===void 0?void 0:ue.average_time,topic:j.find(function(ce){return ce.id===Number(re[0])})}}),children:(0,e.jsxs)(Y,{children:[(0,e.jsx)(n.FormattedMessage,{id:"AverageTime"}),`:
                    `.concat(g.value.find(function(re){return re.type.split("\\").pop()===D.formatMessage({id:"AverageTime"})}).value,`
                  `)]})})}),(0,e.jsx)(se.ZP,{children:(0,e.jsx)($,{flatTopics:j})})]}),g.mode==="error"&&(0,e.jsx)(Fe.Z,{message:g.error,type:"error"})]})},fe=Pe,pe=t(28225),Se=t(23535),ie=t(952),ye=t(71230),Be=t(15746),ht=t(22004),Ir=t.n(ht),Nt=t(82238),Zr=function(r){var s=r.action,i=r.form_name,a=r.src_name,o=r.getUploadedSrcField,c=r.setPath,E=r.folder;return(0,e.jsx)(ie.ZP.Group,{title:(0,e.jsx)(n.FormattedMessage,{id:"video"}),children:(0,e.jsxs)(ye.Z,{children:[(0,e.jsx)(Be.Z,{children:(0,e.jsx)(ie.ZP.Item,{shouldUpdate:!0,children:function(g){return(0,e.jsxs)(l.Fragment,{children:[(0,e.jsx)(Nt.Z,{folder:E,accept:"video/*",name:i,url:s,onChange:function(G){if(G.file.status==="done"){var d;g.setFieldsValue(m()({},a,o(G))),(d=G.file.response)!==null&&d!==void 0&&d.success&&c(m()(m()({},"".concat(i,"_url"),G.file.response.data["".concat(i,"_url")]),"".concat(i,"_path"),G.file.response.data["".concat(i,"_path")]))}}}),(0,e.jsx)(x.ZP,{danger:!0,onClick:function(){return[c(m()(m()({},"".concat(i,"_url"),""),"".concat(i,"_path"),"")),g.setFieldsValue(m()({},a,""))]},children:(0,e.jsx)(n.FormattedMessage,{id:"delete"})})]})}})}),(0,e.jsx)(Be.Z,{span:24,children:(0,e.jsx)(ie.ZP.Item,{shouldUpdate:!0,children:function(g){return(0,e.jsx)(Ir(),{url:g.getFieldValue(a),controls:!0})}})})]})})},Fr=Zr,Lr=t(53957),jn=t(8266),Rr=t(64599),Ur=t.n(Rr),gt=function(r){var s=new FormData;for(var i in r)if(r[i]!=null||r[i]!=null){if(Array.isArray(r[i])){r[i].length||s.append("".concat(i,"[]"),"[]");var a=Ur()(r[i]),o;try{for(a.s();!(o=a.n()).done;){var c=o.value;s.append("".concat(i,"[]"),c)}}catch(E){a.e(E)}finally{a.f()}continue}s.set(i,r[i])}return s},ft=t(5966),Tt=t(52688),Zt=t(50335),xn=t(64218),St=t(78957),bn=t(86738),Ft=t(96074),Mn=t(35614),En=t(2291),jt=t(19411),wr=t(19054),Br=function b(r,s,i){return r.reduce(function(a,o){var c,E=s===o.id;return[].concat(p()(a),[{value:o.id,title:o.title,label:o.title,disabled:i||E,children:b((c=o==null?void 0:o.lessons)!==null&&c!==void 0?c:[],s,E||i)}])},[])},Pn=function(r){var s=r.name,i=r.currentLessonId,a=(0,n.useIntl)(),o=(0,l.useContext)(de._y),c=o.state,E=(0,l.useMemo)(function(){var T;return[{value:"",title:a.formatMessage({id:"root",defaultMessage:"Root"}),label:a.formatMessage({id:"root",defaultMessage:"Root"}),children:Br((T=c==null?void 0:c.lessons)!==null&&T!==void 0?T:[],i)}]},[c,i]);return(0,e.jsx)("div",{className:"tree-select",children:(0,e.jsx)(wr.Z,{name:s,label:(0,e.jsx)(n.FormattedMessage,{id:"parent_lesson"}),fieldProps:{treeData:E,treeDefaultExpandAll:!0,treeLine:!0}})})},Wr=function(r){var s=r.onFinish,i=r.onValuesChange,a=r.onDelete,o=r.onClone,c=r.initialValues,E=r.lesson,T=r.loading,g=T===void 0?!1:T,P=ie.ZP.useForm(),G=C()(P,1),d=G[0],j=ie.ZP.useWatch("active_from",d),A=ie.ZP.useWatch("active_to",d),Y=(0,n.useIntl)();return(0,e.jsx)(ie.ZP,{form:d,submitter:{render:function(re){return(0,e.jsx)(ye.Z,{gutter:16,children:(0,e.jsx)(Be.Z,{span:24-8,children:(0,e.jsx)(ye.Z,{justify:"center",className:"program__cta-footer",children:(0,e.jsx)(xn.Z,{offsetBottom:4,children:(0,e.jsxs)(St.Z,{size:"large",children:[(0,e.jsx)(x.ZP,u()(u()({loading:g,type:"primary",onClick:function(){var ce;return(ce=re.form)===null||ce===void 0?void 0:ce.submit()}},re.submitButtonProps),{},{children:E.isNew?(0,e.jsx)(n.FormattedMessage,{id:"create"}):(0,e.jsx)(n.FormattedMessage,{id:"save"})}),"submit"),!E.isNew&&(0,e.jsx)(x.ZP,{onClick:o,loading:g,children:(0,e.jsx)(n.FormattedMessage,{id:"clone"})}),(0,e.jsx)(bn.Z,{onConfirm:a,title:(0,e.jsx)(n.FormattedMessage,{id:"deleteQuestion"}),okText:(0,e.jsx)(n.FormattedMessage,{id:"yes"}),cancelText:(0,e.jsx)(n.FormattedMessage,{id:"no"}),children:(0,e.jsx)(x.ZP,u()(u()({type:"primary",danger:!0},re.submitButtonProps),{},{loading:g,children:(0,e.jsx)(n.FormattedMessage,{id:"delete"})}))},"delete")]})})})})})}},layout:"horizontal",onFinish:s,onValuesChange:i,initialValues:u()(u()({},c),{},{summary:c.summary||""}),style:{height:"100%"},children:(0,e.jsxs)(ye.Z,{gutter:16,style:{height:"100%"},children:[(0,e.jsxs)(Be.Z,{span:24-8,children:[(0,e.jsx)(Ft.Z,{children:(0,e.jsx)(n.FormattedMessage,{id:"lesson"})}),(0,e.jsxs)(se.ZP,{children:[(0,e.jsx)(ft.Z,{name:"title",label:(0,e.jsx)(n.FormattedMessage,{id:"title"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"title"}),placeholder:Y.formatMessage({id:"title"}),required:!0,labelCol:{span:5}}),(0,e.jsx)(ie.ZP.Item,{name:"summary",label:(0,e.jsx)(n.FormattedMessage,{id:"summary"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"summary_tooltip"}),valuePropName:"value",labelCol:{span:5},children:(0,e.jsx)(jt.ZP,{directory:"course/".concat(E.course_id,"/lesson/").concat(E.id,"/wysiwyg")})})]})]}),(0,e.jsx)(Be.Z,{span:8,children:(0,e.jsxs)("aside",{className:"program-sidebar program-sidebar--right",children:[(0,e.jsx)(ft.Z,{name:"duration",label:(0,e.jsx)(n.FormattedMessage,{id:"duration"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"duration"}),placeholder:Y.formatMessage({id:"duration"})}),(0,e.jsx)(Tt.Z,{name:"active",label:(0,e.jsx)(n.FormattedMessage,{id:"is_active"})}),(0,e.jsx)(Zt.Z,{allowClear:!1,width:"md",name:"active_from",label:(0,e.jsx)(n.FormattedMessage,{id:"active_from"}),placeholder:Y.formatMessage({id:"active_from",defaultMessage:"active_from"}),rules:[{validator:function(re,ue){return ue&&A&&(0,Mn.A)(new Date(ue),new Date(A))?Promise.reject(new Error(Y.formatMessage({id:"invalidDate"}))):Promise.resolve()}}]}),(0,e.jsx)(Zt.Z,{allowClear:!1,width:"md",name:"active_to",label:(0,e.jsx)(n.FormattedMessage,{id:"active_to"}),placeholder:Y.formatMessage({id:"active_to",defaultMessage:"active_to"}),disabled:!j&&!A,rules:[{validator:function(re,ue){return ue&&j&&(0,En.R)(new Date(ue),new Date(j))?Promise.reject(new Error(Y.formatMessage({id:"invalidDate"}))):Promise.resolve()}}]}),(0,e.jsx)(Pn,{name:"parent_id",currentLessonId:E==null?void 0:E.id})]})})]})})},Kr=Wr,Cn=function(r){var s;return u()(u()({},r),{},{parent_id:(s=r.parent_id)!==null&&s!==void 0?s:""})},Nr=function(){var r=(0,l.useContext)(de._y),s=r.currentEditMode,i=s&&s.mode==="lesson"&&s.value?s.value:{},a=(0,l.useState)(Cn(i)),o=C()(a,2),c=o[0],E=o[1],T=(0,l.useState)([]),g=C()(T,2),P=g[1],G=(0,l.useState)(!1),d=C()(G,2),j=d[0],A=d[1],Y=(0,l.useContext)(de._y),D=Y.updateLesson,re=Y.deleteLesson,ue=Y.cloneLesson,ce=(0,n.useParams)();(0,l.useEffect)(function(){return E(Cn(i)),(i==null?void 0:i.topics)&&P(i.topics)},[i]);var $e=(0,l.useCallback)(function(){A(!0);var Ke=gt(u()(u()({course_id:(i==null?void 0:i.course_id)||ce.course},c),{},{active:c.active?1:0,parent_lesson_id:c.parent_id}));return D&&c.id?D(c.id,Ke).then(function(){return A(!1)}).catch(function(we){console.error(we),A(!1)}):Promise.resolve()},[c,i==null?void 0:i.course_id,D]),Ae=(0,l.useCallback)(function(){return c.id&&re&&re(c.id),Promise.resolve()},[re,c.id]),Oe=(0,l.useCallback)(function(){return c.id&&(ue==null?void 0:ue(c.id))},[ue,c.id]);return(0,e.jsx)(Kr,{loading:j,lesson:c,initialValues:c,onDelete:Ae,onFinish:$e,onClone:Oe,onValuesChange:function(we){E(function(Xe){return u()(u()({},Xe),we)})}})},$r=Nr,zr=t(54734),yn=t(55725),$t=t(51042),Tn=t(75625),kr=t(62848),at=t(83062),Vr=t(65400),Lt=t.n(Vr),Sn=t(74253),Gr=t(95486),mt=t(54838),zt=t(28248),Hr=function(r){var s=r.handleOk,i=r.isModalVisible,a=r.initialValues,o=r.courseId;return(0,e.jsxs)(zt.Z,{title:(0,e.jsx)(mt._H,{id:"description"}),visible:i,onOk:s,onCancel:s,width:1e3,footer:[(0,e.jsx)(x.ZP,{type:"primary",onClick:s,children:"Ok"},"back")],children:[(0,e.jsx)(ie.ZP.Item,{name:"introduction",label:(0,e.jsx)(mt._H,{id:"introduction"}),labelCol:{span:5},wrapperCol:{span:19},tooltip:(0,e.jsx)(mt._H,{id:"introduction_tooltip"}),valuePropName:"value",children:(0,e.jsx)(jt.ZP,{directory:"course/".concat(o,"/lesson/").concat(a.lesson_id,"/topic/").concat(a.id,"/wysiwyg")})}),(0,e.jsx)(ie.ZP.Item,{name:"description",label:(0,e.jsx)(mt._H,{id:"description"}),labelCol:{span:5},wrapperCol:{span:19},tooltip:(0,e.jsx)(mt._H,{id:"description_tooltip"}),valuePropName:"value",children:(0,e.jsx)(jt.ZP,{directory:"course/".concat(o,"/lesson/").concat(a.lesson_id,"/topic/").concat(a.id,"/wysiwyg")})}),(0,e.jsx)(ie.ZP.Item,{name:"summary",label:(0,e.jsx)(mt._H,{id:"summary"}),labelCol:{span:5},wrapperCol:{span:19},tooltip:(0,e.jsx)(mt._H,{id:"summary_tooltip"}),valuePropName:"value",children:(0,e.jsx)(jt.ZP,{directory:"course/".concat(o,"/lesson/").concat(a.lesson_id,"/topic/").concat(a.id,"/wysiwyg")})})]})},Qr=function(r){var s=r.onValuesChange,i=r.initialValues,a=r.courseId,o=(0,n.useIntl)(),c=l.useState(!1),E=C()(c,2),T=E[0],g=E[1];return(0,e.jsxs)(ie.ZP,{submitter:!1,onValuesChange:s,initialValues:u()({},i),layout:"horizontal",children:[(0,e.jsx)(ft.Z,{name:"title",label:(0,e.jsx)(n.FormattedMessage,{id:"title"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"title"}),placeholder:o.formatMessage({id:"title",defaultMessage:"title"}),required:!0}),(0,e.jsx)(ft.Z,{name:"duration",label:(0,e.jsx)(n.FormattedMessage,{id:"duration"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"duration"}),placeholder:o.formatMessage({id:"duration"})}),(0,e.jsx)(Pn,{name:"lesson_id"}),(0,e.jsx)(ie.ZP.Item,{label:(0,e.jsx)(n.FormattedMessage,{id:"description"}),children:(0,e.jsx)(x.ZP,{type:"primary",onClick:function(){return g(!0)},children:(0,e.jsx)(n.FormattedMessage,{id:"open_editor"})})}),(0,e.jsx)(Tt.Z,{name:"active",label:(0,e.jsx)(n.FormattedMessage,{id:"is_active"})}),(0,e.jsx)(Tt.Z,{name:"preview",label:(0,e.jsx)(n.FormattedMessage,{id:"able_to_preview"})}),(0,e.jsx)(Tt.Z,{name:"can_skip",label:(0,e.jsx)(n.FormattedMessage,{id:"can_skip"})}),(0,e.jsx)(ie.ZP.Item,{name:"json",label:(0,e.jsx)(n.FormattedMessage,{id:"json"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"json_tooltip"}),valuePropName:"value",children:(0,e.jsx)(Gr.Z,{})}),(0,e.jsx)(Hr,{isModalVisible:T,handleOk:function(){return g(!1)},initialValues:i,courseId:a})]})},Jr=Qr,kt=function(r){if(typeof(r==null?void 0:r.topicable_type)!="string"||!r.topicable_type)return"Unknown";var s=((r==null?void 0:r.topicable_type)||"").split("\\");return s.pop()||"Unknown"},An=t(97704),Et=t(66419),xt=t(83863),Yr=function(r){var s=r.value,i=r.onChange,a=r.multiple,o=a===void 0?!1:a,c=(0,l.useState)([]),E=C()(c,2),T=E[0],g=E[1];return(0,l.useEffect)(function(){(0,An.gq)().then(function(P){return P.success&&g(P.data)})},[]),(0,l.useEffect)(function(){T.length&&(T.find(function(P){return Number(P.id)===Number(s)})||(0,An.gq)().then(function(P){return P.success&&g(P.data)}))},[s]),(0,e.jsx)(xt.default,{loading:T.length===0,style:{width:"100%"},value:s,onChange:i,mode:o?"multiple":void 0,showSearch:!0,placeholder:(0,e.jsx)(n.FormattedMessage,{id:"H5P_select_content"}),optionFilterProp:"children",filterOption:function(G,d){var j,A=d==null||(j=d.children)===null||j===void 0?void 0:j.slice(1,d==null?void 0:d.children.length).join("");return(0,Et.ri)(A,G)},children:T.map(function(P){return(0,e.jsxs)(xt.default.Option,{value:P.id.toString(),children:[(0,e.jsx)("small",{children:P.id})," ",P.title," (",P.library.title,")"]},P.id.toString())})})},Xr=Yr,qr=t(9412),ea=t(89825),ta=function(r){var s=r.id,i=r.onChange,a=(0,n.useIntl)(),o=(0,l.useState)(s==="new"||s===void 0?"new":Number(s)),c=C()(o,2),E=c[0],T=c[1];return(0,e.jsxs)(l.Fragment,{children:[(0,e.jsxs)(ye.Z,{gutter:16,align:"middle",className:"create-new",children:[(0,e.jsx)(Be.Z,{children:(0,e.jsxs)(x.ZP,{type:"primary",onClick:function(){return T("new")},children:[" ",(0,e.jsx)(n.FormattedMessage,{id:"create_new"})]})}),(0,e.jsx)(Be.Z,{span:4,children:(0,e.jsxs)(Ee.Z,{children:[(0,e.jsx)("small",{children:(0,e.jsx)(n.FormattedMessage,{id:"or"})})," ",(0,e.jsx)(n.FormattedMessage,{id:"reuse_existing"})]})}),(0,e.jsx)(Be.Z,{span:12,children:(0,e.jsx)(Xr,{value:s,onChange:function(P){i(P),T(s==="new"?"new":Number(s))}})})]}),(0,e.jsx)(ye.Z,{style:{marginTop:"30px"},children:(0,e.jsx)(Be.Z,{span:24,children:(0,e.jsx)(ea.Z,{id:E,onSubmit:function(P){return i(String(P))}},E)})}),(0,e.jsx)(Ft.Z,{}),(0,e.jsx)(ye.Z,{gutter:16,children:(0,e.jsx)(Be.Z,{span:24,children:(0,e.jsx)(ye.Z,{children:(0,e.jsx)(qr.C,{onSuccess:function(P){P.data.id&&i(String(P.data.id))},onError:function(){return console.log(a.formatMessage({id:"error"}))}})})})})]})},na=ta,On=t(96365),ra=t(98980),aa=t.n(ra),sa=[{provider_name:"YouTube",provider_url:"https://www.youtube.com/",endpoints:[{schemes:["https://*.youtube.com/watch*","https://*.youtube.com/v/*","https://youtu.be/*","https://*.youtube.com/shorts/*","https://youtube.com/shorts/*"],url:"https://www.youtube.com/oembed",discovery:!0}]},{provider_name:"Reddit",provider_url:"https://reddit.com/",endpoints:[{schemes:["https://reddit.com/r/*/comments/*/*","https://www.reddit.com/r/*/comments/*/*"],url:"https://www.reddit.com/oembed"}]},{provider_name:"Flickr",provider_url:"https://www.flickr.com/",endpoints:[{schemes:["http://*.flickr.com/photos/*","http://flic.kr/p/*","https://*.flickr.com/photos/*","https://flic.kr/p/*"],url:"https://www.flickr.com/services/oembed/",discovery:!0}]},{provider_name:"Vimeo",provider_url:"https://vimeo.com/",endpoints:[{schemes:["https://vimeo.com/*","https://vimeo.com/album/*/video/*","https://vimeo.com/channels/*/*","https://vimeo.com/groups/*/videos/*","https://vimeo.com/ondemand/*/*","https://player.vimeo.com/video/*"],url:"https://vimeo.com/api/oembed.{format}",discovery:!0}]},{provider_name:"SoundCloud",provider_url:"http://soundcloud.com/",endpoints:[{schemes:["http://soundcloud.com/*","https://soundcloud.com/*","https://soundcloud.app.goog.gl/*"],url:"https://soundcloud.com/oembed"}]},{provider_name:"Twitter",provider_url:"http://www.twitter.com/",endpoints:[{schemes:["https://twitter.com/*/status/*","https://*.twitter.com/*/status/*","https://twitter.com/*/moments/*","https://*.twitter.com/*/moments/*"],url:"https://publish.twitter.com/oembed"}]},{provider_name:"GIPHY",provider_url:"https://giphy.com",endpoints:[{schemes:["https://giphy.com/gifs/*","http://gph.is/*","https://media.giphy.com/media/*/giphy.gif"],url:"https://giphy.com/services/oembed",discovery:!0}]}],ia=function(r){return(0,e.jsx)(aa(),u()(u()({},r),{},{providers:sa}))},oa=function(r){var s=r.text,i=r.onChange,a=(0,l.useState)(s),o=C()(a,2),c=o[0],E=o[1],T=(0,l.useState)(s),g=C()(T,2),P=g[0],G=g[1];return(0,e.jsxs)(l.Fragment,{children:[(0,e.jsxs)(ye.Z,{children:[(0,e.jsx)(On.Z,{value:s,onChange:function(j){E(j.target.value),i(j.target.value)}}),(0,e.jsx)(x.ZP,{onClick:function(){return G(c)},children:(0,e.jsx)(n.FormattedMessage,{id:"preview"})})]}),(0,e.jsx)(ye.Z,{children:P&&(0,e.jsx)(ia,{url:P},P)})]})},la=oa,ua=function(r){var s=r.text,i=r.onChange,a=r.directory,o=a===void 0?"topics/new":a;return(0,e.jsx)("div",{children:(0,e.jsx)(jt.ZP,{directory:o,value:s,onChange:function(E){i(E)}})})},da=ua,ca=t(26859),ma=t(72252),_a=t(38703),Dn=t(97042),pa=t(56117),fa=t(59037);Dn.default.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(Dn.default.version,"/pdf.worker.min.js");var va={acceptedTypes:m()(m()(m()({audio:".mp3,audio/*",video:".mp3,video/*",document:".doc,.docx,.pdf,.zip"},v.oz.Audio,".mp3,audio/*"),v.oz.Video,".mp3,video/*"),v.oz.PDF,".pdf,application/pdf")},ha=function(r){var s={},i;for(i in r)switch(f()(r[i])){case"boolean":s[i]=r[i]?1:0;break;case"object":s[i]=JSON.stringify(r[i]);break;case"string":case"number":s[i]=r[i];break;default:break}return s},ga=function(r){var s=r.file,i=(0,l.useState)(0),a=C()(i,2),o=a[0],c=a[1],E=(0,l.useState)(1),T=C()(E,2),g=T[0],P=T[1];return(0,e.jsxs)("div",{children:[o===0?(0,e.jsx)(Ce.Z,{}):(0,e.jsxs)("div",{style:{margin:"0.5em 0"},children:[(0,e.jsxs)(Ee.Z,{children:[(0,e.jsx)(n.FormattedMessage,{id:"page"}),":"]}),(0,e.jsx)(ma.Z,{defaultPageSize:1,size:"small",total:o,onChange:function(d){return P(d)},simple:!0})]}),(0,e.jsx)(pa.Z,{file:s,onLoadSuccess:function(d){var j=d.numPages;return c(j)},children:(0,e.jsx)(fa.Z,{pageNumber:g,className:"pdf-preview"})})]})},ja=function(r){var s,i=r.topic,a=(0,l.useContext)(de._y),o=a.getLessons;if((0,l.useEffect)(function(){var E;if(((E=i.json)===null||E===void 0?void 0:E.ffmpeg.state)==="coding"){var T=setTimeout(function(){o&&o()},1e3);return function(){return clearTimeout(T)}}},[]),((s=i.json)===null||s===void 0?void 0:s.ffmpeg.state)==="coding"){var c;return(0,e.jsxs)(Ee.Z,{children:[(0,e.jsx)(n.FormattedMessage,{id:"encoding_progress",defaultMessage:"Encoding progress:"}),(0,e.jsx)(_a.Z,{percent:(c=i.json)===null||c===void 0||(c=c.ffmpeg)===null||c===void 0?void 0:c.percentage})]})}return(0,e.jsx)(l.Fragment,{})},xa=function(r){var s,i,a,o,c=r.type,E=r.topic;if(E&&E.topicable&&"url"in E.topicable)switch(c){case v.oz.Audio:return E.topicable_type===v.oz.Audio&&(s=E.topicable)!==null&&s!==void 0&&s.url?(0,e.jsx)("audio",{preload:"none",controls:!0,src:E.topicable.url}):(0,e.jsx)(l.Fragment,{});case v.oz.Video:return E.topicable_type===v.oz.Video&&(i=E.topicable)!==null&&i!==void 0&&i.url?(0,e.jsx)("video",{controls:!0,src:E.topicable.url,width:"100%"}):(0,e.jsx)(l.Fragment,{});case v.oz.Image:return E.topicable_type===v.oz.Image&&(a=E.topicable)!==null&&a!==void 0&&a.url?(0,e.jsx)("img",{title:"Topic image",src:E.topicable.url,width:"100%"}):(0,e.jsx)(l.Fragment,{});case v.oz.PDF:return E.topicable_type===v.oz.PDF&&(o=E.topicable)!==null&&o!==void 0&&o.url?(0,e.jsx)(ga,{file:E.topicable.url}):(0,e.jsx)(l.Fragment,{});default:return(0,e.jsx)(l.Fragment,{})}return(0,e.jsx)(l.Fragment,{})},ba=function(r){var s=r.topic,i=r.type,a=r.onUpdate,o=r.disabled,c=o===void 0?!1:o,E=r.currentState,T=r.onChange,g=r.folder,P=r.maxFiles,G=r.clearListAfterUpload,d=(0,l.useCallback)(function(A){return A.file.status==="done"?a&&a(A):T&&T(A)},[a,T]),j=u()(u()({},E),{},{topicable_type:i,active:E.active?1:0,preview:E.preview?1:0,can_skip:E.can_skip?1:0});return j.introduction||j==null||delete j.introduction,j.description||j==null||delete j.description,j.summary||j==null||delete j.summary,j.json||j==null||delete j.json,(0,e.jsxs)(l.Fragment,{children:[(0,e.jsx)(ye.Z,{children:(0,e.jsx)(Nt.Z,{folder:g,onChange:d,name:"value",url:s.isNew?"/api/admin/topics":"/api/admin/topics/".concat(s.id,"?_method=PUT"),accept:va.acceptedTypes[i],data:ha(j),maxFiles:P,clearListAfterUpload:G,children:(0,e.jsxs)(x.ZP,{disabled:c,icon:(0,e.jsx)(ca.Z,{}),children:["Click to upload ",i]})})}),(0,e.jsx)(ye.Z,{children:(0,e.jsxs)("div",{style:{padding:"0 12px"},children:[s.topicable_type===v.oz.Video&&(0,e.jsx)(ja,{topic:s}),(0,e.jsx)(xa,{type:i,topic:E})]})})]})},Ma=ba,In=t(82061),Ea=t(69753),Vt=t(2487),Pa=function(r){var s=r.topicId,i=r.folder,a=(0,l.useState)(),o=C()(a,2),c=o[0],E=o[1],T=(0,l.useRef)(),g=(0,l.useCallback)(function(){T.current&&T.current.abort(),T.current=new AbortController,(0,y.Jb)(s,{signal:T.current.signal}).then(function(d){d&&d.success&&E(d.data)})},[s]),P=(0,l.useCallback)(function(d){d&&d.success&&(0,y.Jb)(s).then(function(j){j&&j.success&&E(j.data)})},[]),G=(0,l.useCallback)(function(d){(0,y.fg)(s,d).then(function(j){j.success&&g()})},[s]);return(0,l.useEffect)(function(){g()},[s]),(0,e.jsx)(Vt.Z,{size:"small",itemLayout:"horizontal",dataSource:c,header:(0,e.jsx)(Nt.Z,{folder:i,url:"/api/admin/topics/".concat(s,"/resources"),name:"resource",onChange:function(j){if(j.file.status==="done"){var A;(A=j.file.response)!==null&&A!==void 0&&A.success&&P(j.file.response)}}}),renderItem:function(j){return(0,e.jsx)(Vt.Z.Item,{actions:[(0,e.jsx)(x.ZP,{type:"default",danger:!0,icon:(0,e.jsx)(In.Z,{}),size:"small",onClick:function(){return G(j.id)}},"delete")],children:(0,e.jsx)(Vt.Z.Item.Meta,{avatar:(0,e.jsx)("a",{href:j.url,target:"_blank",rel:"noreferrer",children:(0,e.jsx)(x.ZP,{type:"default",icon:(0,e.jsx)(Ea.Z,{}),size:"small"})}),description:(0,e.jsx)(l.Fragment,{children:(0,e.jsx)(x.ZP,{type:"text",size:"small",children:j.name})})})})}})},Ca=Pa,ya=t(75175),Ta=t(9649),Sa=function(r){var s=r.value,i=r.onChange,a=(0,l.useState)([]),o=C()(a,2),c=o[0],E=o[1],T=(0,l.useState)(!1),g=C()(T,2),P=g[0],G=g[1],d=(0,l.useState)(),j=C()(d,2),A=j[0],Y=j[1],D=(0,l.useState)(),re=C()(D,2),ue=re[0],ce=re[1],$e=(0,l.useRef)(),Ae=(0,l.useCallback)(function(Ke){G(!0),$e.current&&$e.current.abort(),$e.current=new AbortController,(0,Ta.JZ)({search:Ke,pageSize:0},{signal:$e.current.signal}).then(function(we){if(we.success)return Array.isArray(we.data.data)&&E(we.data.data);G(!1)}).catch(function(){return G(!1)})},[]),Oe=(0,l.useCallback)(function(Ke){Ae(Ke)},[Ae]);return(0,l.useEffect)(function(){Ae()},[s]),(0,l.useEffect)(function(){Y(c.map(function(Ke){return Ke.scos.filter(function(we){return we.id===s})}).flat()[0])},[c]),(0,e.jsxs)(l.Fragment,{children:[ue&&(0,e.jsx)(zt.Z,{width:"80vw",bodyStyle:{height:"70vh"},visible:!0,onOk:function(){return ce(void 0)},onCancel:function(){return ce(void 0)},children:(0,e.jsx)(ya.Z,{uuid:ue})}),(0,e.jsxs)(St.Z,{children:[(0,e.jsx)(xt.default,{allowClear:!0,style:{width:"100%",minWidth:"300px"},value:A?"".concat(A==null?void 0:A.id,": ").concat(A==null?void 0:A.title):void 0,onChange:function(we){return i&&i(we&&we.split(":")[0])},showSearch:!0,onSearch:Oe,placeholder:(0,e.jsx)(n.FormattedMessage,{id:"select_scorm_package"}),optionFilterProp:"children",filterOption:function(we,Xe){if(Xe&&Xe.children){var ot;return(Xe==null||(ot=Xe.children)===null||ot===void 0?void 0:ot.toString().toLowerCase().indexOf(we.toLowerCase()))>=0}return!0},notFoundContent:P?(0,e.jsx)(Ce.Z,{size:"small"}):null,children:c.map(function(Ke){return(0,e.jsx)(xt.default.OptGroup,{label:"".concat(Ke.id,": ").concat(Ke.version),children:(0,e.jsx)(l.Fragment,{children:Ke.scos.map(function(we){return(0,e.jsx)(xt.default.Option,{value:"".concat(we.id,": ").concat(we.title),children:we.title},we.id)})})},Ke.id)})}),A&&(0,e.jsx)(x.ZP,{onClick:function(){ce(A==null?void 0:A.uuid)},children:(0,e.jsx)(n.FormattedMessage,{id:"preview"})},s)]})]})},Aa=Sa,Oa=function(r){var s=r.value,i=r.onChange;return(0,e.jsxs)(St.Z,{size:"large",align:"start",children:[(0,e.jsx)(Aa,{value:s,onChange:function(o){return i&&i(Number(o))}}),(0,e.jsx)(x.ZP,{onClick:function(){return i&&i(void 0)},children:(0,e.jsx)(n.FormattedMessage,{id:"clear_selection"})})]})},Zn=Oa,Gt=t(4828),Ht=t(49354),Qt=t(35102),Jt=t(45699),Yt=t(35326),Xt=t(67337),qt=t(68432),en=t(15360),tn=t(43973),nn=t(57619),Da=t(11475),Ia=t(38751),Za=t(24739),Rt=t(31199),Fa=t(89652),La=function(r){var s=r.topicable,i=r.onAdded,a=r.onRemoved,o=r.onEdited,c=r.onChange,E=(0,n.useIntl)();return(0,e.jsxs)(l.Fragment,{children:[(0,e.jsx)(ie.ZP,{initialValues:{max_attempts:s?s.max_attempts:void 0,max_execution_time:s?s.max_execution_time:void 0,min_pass_score:s?s.min_pass_score:void 0},onValuesChange:function(g){var P=Object.keys(g)[0];P&&c(P,g[P])},submitter:!1,children:(0,e.jsxs)(Za.UW,{children:[(0,e.jsx)(Rt.Z,{name:"max_attempts",label:(0,e.jsx)(n.FormattedMessage,{id:"max_attempts"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"max_attempts"}),placeholder:E.formatMessage({id:"max_attempts",defaultMessage:"max_attempts"})}),(0,e.jsx)(Rt.Z,{name:"max_execution_time",label:(0,e.jsx)(n.FormattedMessage,{id:"max_execution_time"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"max_execution_time_tooltip"}),placeholder:E.formatMessage({id:"max_execution_time",defaultMessage:"max_execution_time"})}),(0,e.jsx)(Rt.Z,{name:"min_pass_score",max:100,label:(0,e.jsx)(n.FormattedMessage,{id:"min_pass_score"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"min_pass_score_tooltip"}),placeholder:E.formatMessage({id:"min_pass_score",defaultMessage:"min_pass_score"})})]})}),(0,e.jsx)(Ft.Z,{}),s?(0,e.jsx)(Ia.i,{questions:s.questions,quizId:s.id,onAdded:i,onEdited:o,onRemoved:a}):(0,e.jsx)(Fa.default,{children:(0,e.jsx)(n.FormattedMessage,{id:"pressSaveToCreateQuestions",defaultMessage:"Create this Topic before adding questions"})})]})},Ra=La,Ut=t(44167),Ua=function(r){var s,i=r.onChange,a=r.topicable,o=(0,l.useCallback)(function(c){var E=Object.keys(c)[0];E&&i(c[E])},[]);return(0,e.jsx)(l.Fragment,{children:(0,e.jsx)(ie.ZP,{initialValues:{notify_users:(s=a==null?void 0:a.notify_users)!==null&&s!==void 0?s:[]},onValuesChange:o,submitter:!1,children:(0,e.jsx)(ie.ZP.Item,{name:"notify_users",label:(0,e.jsx)(n.FormattedMessage,{id:"notify_users",defaultMessage:"Users to notify"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"notify_users_tooltip",defaultMessage:"Indicate which users should be notified about project upload"}),children:(0,e.jsx)(Ut.Z,{multiple:!0})})})})},wa=Ua,Fn=function(r){if(r)switch(r){case"ScormSco":return(0,e.jsx)(Gt.Z,{});case"PDF":return(0,e.jsx)(Ht.Z,{});case"Audio":return(0,e.jsx)(Qt.Z,{});case"Image":return(0,e.jsx)(Jt.Z,{});case"OEmbed":return(0,e.jsx)(Yt.Z,{});case"H5P":return(0,e.jsx)(Xt.Z,{});case"Video":return(0,e.jsx)(qt.Z,{});case"RichText":return(0,e.jsx)(en.Z,{});case"Project":return(0,e.jsx)(tn.Z,{});case"GiftQuiz":return(0,e.jsx)(nn.Z,{})}return(0,e.jsx)(Da.Z,{})},Ln=function(r){return[v.oz.GiftQuiz,v.oz.Project,v.oz.GiftQuiz].includes(r)},Ba=function(){var r,s,i,a=(0,l.useContext)(de._y),o=a.state,c=a.currentEditMode,E=a.updateTopic,T=a.deleteTopic,g=a.onTopicUploaded,P=a.cloneTopic,G=a.getLessons,d=c&&c.mode==="topic"&&c.value?c.value:{},j=(0,l.useState)(!1),A=C()(j,2),Y=A[0],D=A[1],re=(0,l.useState)(u()(u()({},d),{},{value:d==null||(r=d.topicable)===null||r===void 0?void 0:r.value})),ue=C()(re,2),ce=ue[0],$e=ue[1],Ae=ce.topicable_type,Oe=(0,l.useState)(ce.order),Ke=C()(Oe,1),we=Ke[0],Xe=(0,l.useState)(!1),ot=C()(Xe,2),qe=ot[0],Le=ot[1],he=(0,l.useState)(d),Te=C()(he,2),ae=Te[0],ke=Te[1];(0,l.useEffect)(function(){ke(d)},[d]),(0,l.useEffect)(function(){$e(function(We){var ge;return u()(u()(u()({},We),d),{},{value:Ae===(d==null?void 0:d.topicable_type)?d==null||(ge=d.topicable)===null||ge===void 0?void 0:ge.value:""})}),d!=null&&d.isNew&&D(!Ln(d.topicable_type))},[Ae,d]),(0,l.useEffect)(function(){var We,ge;if(!((ae==null?void 0:ae.topicable_type)!==v.oz.Video||!((We=ae.json)!==null&&We!==void 0&&We.ffmpeg.state)||((ge=ae.json)===null||ge===void 0?void 0:ge.ffmpeg.state)==="finished")){var Qe=function(){var Ve=O()(h()().mark(function nt(){var je;return h()().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:if(!d.id){Ne.next=5;break}return Ne.next=3,(0,y.BN)(d.id);case 3:je=Ne.sent,je.success&&ke(je.data);case 5:case"end":return Ne.stop()}},nt)}));return function(){return Ve.apply(this,arguments)}}(),st=window.setInterval(Qe,5e3);return function(){window.clearInterval(st)}}},[ae==null?void 0:ae.topicable_type,(s=ae.json)===null||s===void 0||(s=s.ffmpeg)===null||s===void 0?void 0:s.state]);var Re=(0,l.useCallback)(function(We,ge){$e(function(Qe){return u()(u()({},Qe),{},m()({},We,ge))}),D(!1)},[d]),Je=(0,l.useCallback)(function(We){$e(function(ge){return u()(u()({},ge),We)})},[d]),_t=(0,l.useCallback)(function(We){E&&ce.id&&(Le(!0),E(ce.id,We).then(function(){return Le(!1)}).catch(function(){Le(!1)}))},[ce,E,d]),et=(0,l.useCallback)(function(){var We=u()(u()({},ce),{},{active:ce.active?1:0,preview:ce.preview?1:0,can_skip:ce.can_skip?1:0,order:we,json:ce.json?JSON.stringify(ce.json):null});Ln(d.topicable_type)&&!We.value&&(We.value="theProject");var ge=gt(We);_t(ge)},[ce,_t,we]),ct=(0,l.useCallback)(function(){return d!=null&&d.isNew||Le(!0),T&&ce.id&&T(ce.id)},[ce,T,d]),rt=(0,l.useCallback)(function(){return d.id&&P&&P(d.id)},[d,P]);return(0,e.jsx)(l.Fragment,{children:(0,e.jsxs)(ye.Z,{gutter:16,style:{height:"100%"},children:[(0,e.jsxs)(Be.Z,{span:24-8,style:{marginBottom:"46px"},children:[(0,e.jsxs)(Sn.Z,{children:[d&&Fn(kt(d))," ",(d==null?void 0:d.topicable_type)&&(d==null?void 0:d.topicable_type.split("\\").pop())," ",(0,e.jsx)(n.FormattedMessage,{id:"type"})]}),!Ae&&(0,e.jsx)(Fe.Z,{message:(0,e.jsx)(n.FormattedMessage,{id:"select_type_topic"}),type:"info"}),Ae&&Ae===(v.oz===null||v.oz===void 0?void 0:v.oz.RichText)&&(0,e.jsx)(da,{directory:"course/".concat(o==null?void 0:o.id,"/lesson/").concat(d==null?void 0:d.lesson_id,"/topic/").concat(d==null?void 0:d.id,"/wysiwyg"),text:(d==null?void 0:d.topicable_type)===(v.oz===null||v.oz===void 0?void 0:v.oz.RichText)&&(d==null||(i=d.topicable)===null||i===void 0?void 0:i.value)||"",onChange:function(ge){return Re("value",ge)}}),d&&Ae&&(Ae===v.oz.Video||Ae===v.oz.Audio||Ae===v.oz.Image||Ae===v.oz.PDF)&&(0,e.jsx)(Ma,{folder:"course/".concat(o==null?void 0:o.id),type:Ae,topic:ae,currentState:ce,onChange:function(ge){Le(!0),ge.file.status==="removed"&&Le(!1)},onUpdate:function(ge){var Qe,st,Ve,nt;d.id&&g&&g(d.id,ge),d.topicable_type===v.oz.Video&&setTimeout(function(){G&&G()},5e3),$e(u()(u()({},ce),{},{id:ge==null||(Qe=ge.file)===null||Qe===void 0||(Qe=Qe.response)===null||Qe===void 0||(Qe=Qe.data)===null||Qe===void 0?void 0:Qe.id,order:(st=ge.file.response.data)===null||st===void 0?void 0:st.order,value:ge==null||(Ve=ge.file)===null||Ve===void 0||(Ve=Ve.response.data)===null||Ve===void 0||(Ve=Ve.topicable)===null||Ve===void 0?void 0:Ve.value,topicable:ge==null||(nt=ge.file)===null||nt===void 0||(nt=nt.response.data)===null||nt===void 0?void 0:nt.topicable})),D(!1),Le(!1)},disabled:!1,maxFiles:1,clearListAfterUpload:!0}),Ae&&Ae===v.oz.OEmbed&&(0,e.jsx)(la,{text:ce.value,onChange:function(ge){return Re("value",ge)}}),Ae&&Ae===v.oz.Project&&(0,e.jsx)(wa,{onChange:function(ge){return Re("notify_users",ge)},topicable:d.topicable}),Ae&&Ae===v.oz.GiftQuiz&&(0,e.jsx)(Ra,{onChange:function(ge,Qe){Re(ge,Qe)},topicable:ce.topicable,onAdded:G,onRemoved:G,onEdited:G}),Ae&&Ae===v.oz.H5P&&(0,e.jsx)(na,{id:ce.value,onChange:function(ge){return Re("value",ge)}}),Ae&&Ae===v.oz.SCORM&&(0,e.jsx)(Zn,{value:Number(ce.value),onChange:function(ge){return Re("value",ge)}}),(0,e.jsx)(ye.Z,{justify:"center",className:"program__cta-footer",children:(0,e.jsx)(xn.Z,{offsetBottom:4,children:(0,e.jsxs)(St.Z,{size:"large",children:[(0,e.jsx)(Lt(),{loading:qe,children:(0,e.jsx)(n.FormattedMessage,{id:"cancel"})}),!d.isNew&&(0,e.jsx)(Lt(),{onClick:rt,loading:qe,children:(0,e.jsx)(n.FormattedMessage,{id:"clone"})}),(0,e.jsx)(Lt(),{type:"primary",onClick:et,disabled:Y,loading:qe,children:(0,e.jsx)(n.FormattedMessage,{id:"save"})}),(0,e.jsx)(Lt(),{danger:!0,onClick:ct,loading:qe,children:(0,e.jsx)(n.FormattedMessage,{id:"delete"})})]})})})]}),(0,e.jsx)(Be.Z,{span:8,children:(0,e.jsxs)("aside",{className:"program-sidebar program-sidebar--right",children:[(o==null?void 0:o.lessons)&&(0,e.jsx)(Jr,{courseId:Number(o==null?void 0:o.id),courseLessons:o==null?void 0:o.lessons,initialValues:ce,onValuesChange:function(ge){return Je(ge)}}),!ce.isNew&&(0,e.jsxs)(l.Fragment,{children:[(0,e.jsx)(Sn.Z,{children:(0,e.jsx)(n.FormattedMessage,{id:"file_resources"})}),(0,e.jsx)(Ca,{topicId:Number(d==null?void 0:d.id),folder:"course/".concat(o==null?void 0:o.id)})]})]})})]})})},Wa=Ba,vt=t(57818),Rn=t(43458),Ka=t(13769),Un=t.n(Ka),Na=["initialValue","onCreate"],$a=l.forwardRef(function(b,r){var s=b.initialValue,i=b.onCreate,a=Un()(b,Na),o=(0,l.useState)(""),c=C()(o,2),E=c[0],T=c[1];return(0,e.jsxs)("div",u()(u()({className:"program-sidebar__list-item program-sidebar__list-item--lesson-new",ref:r},a),{},{children:[(0,e.jsx)(yn.Z,{}),(0,e.jsx)(On.Z,{value:E,onChange:function(P){return T(P.target.value)},placeholder:s.title}),(0,e.jsx)("div",{children:(0,e.jsx)(at.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"create"}),children:(0,e.jsx)(x.ZP,{disabled:!E,size:"small",className:"btn-create-lesson",type:"primary",icon:(0,e.jsx)(Z.Z,{}),onClick:function(){return i(E)}})})})]}))}),za=t(16165),ka=function(){return(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23.01",height:"18.077",viewBox:"0 0 23.01 18.077",children:(0,e.jsxs)("g",{id:"Group_5","data-name":"Group 5",transform:"translate(-97.496 -306.965)",children:[(0,e.jsx)("path",{id:"Path_2","data-name":"Path 2",d:"M138.934,401.557s8.685.579,12.972-6.836-11.893-6.747-7.254-1.854,16.02-8.07,16.02-8.07",transform:"translate(-40.906 -77.037)",fill:"none",stroke:"#58c35d",strokeLinecap:"round",strokeWidth:"1"}),(0,e.jsx)("path",{id:"Path_3","data-name":"Path 3",d:"M115.761,306.465h5.332V311.8",transform:"translate(-1.087 1)",fill:"none",stroke:"#58c35d",strokeLinecap:"round",strokeWidth:"1"})]})})},wn=function(r){return(0,e.jsx)(za.Z,u()({component:ka},r))},rn=t(21987);function Va(b,r){return an.apply(this,arguments)}function an(){return an=O()(h()().mark(function b(r,s){return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/admin/recommender/course/".concat(r," "),u()({method:"GET",useCache:!1},s||{})));case 1:case"end":return a.stop()}},b)})),an.apply(this,arguments)}function Ga(b,r){return sn.apply(this,arguments)}function sn(){return sn=O()(h()().mark(function b(r,s){return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/admin/recommender/lesson/".concat(r,"/topic "),u()({method:"GET",useCache:!1},s||{})));case 1:case"end":return a.stop()}},b)})),sn.apply(this,arguments)}var Ha=function(r){var s=(0,l.useState)(),i=C()(s,2),a=i[0],o=i[1];return(0,l.useEffect)(function(){Va(r).then(function(c){return c.success&&o(c.data)})},[r]),a},Qa=function(r){var s=(0,l.useState)(),i=C()(s,2),a=i[0],o=i[1];return(0,l.useEffect)(function(){Ga(r).then(function(c){return c.success&&o(c.data)})},[r]),a},Ja=function(r){return r.includes("H5P")?"H5P":r},Ya=function(r){return(r==null?void 0:r.includes("."))&&(r==null?void 0:r.split(".").join(" "))},Bn=function(r){return Math.min(Math.ceil(Math.abs(r)*100),100)},Xa=function(r){var s=r.recommendedData,i=r.createTopic;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(rn.Z,{className:"recommender__paragraph",children:[(0,e.jsx)(n.FormattedMessage,{id:"recommender.add_exercise"}),(0,e.jsx)("span",{className:"recommender__paragraph--span",children:"".concat(Ya(s==null?void 0:s.topic_type),",")}),(0,e.jsx)("br",{}),(0,e.jsx)(n.FormattedMessage,{id:"recommender.increase"}),(0,e.jsx)("span",{className:"recommender__paragraph--span",children:"".concat(Bn(s.probability),"%.")})]}),(0,e.jsx)(x.ZP,{className:"recommender__button",type:"default",onClick:i,children:(0,e.jsx)(n.FormattedMessage,{id:"recommender.add_button"})})]})},qa=function(){return(0,e.jsx)(rn.Z,{className:"recommender__paragraph",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender.save_exercise"})})},es=t(56717),ts=t(55241),ns=function(){return(0,e.jsxs)("div",{className:"recommender__popover-wrapper",children:[(0,e.jsx)("h3",{className:"recommender__popover-title",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender_info.title"})}),(0,e.jsx)("strong",{className:"recommender__popover-text",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender_info.first_title"})}),(0,e.jsx)("p",{className:"recommender__popover-text",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender_info.first_text"})}),(0,e.jsx)("strong",{className:"recommender__popover-text",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender_info.second_title"})}),(0,e.jsx)("p",{className:"recommender__popover-text",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender_info.second_text"})})]})},Wn=function(){return(0,e.jsx)(ts.Z,{placement:"bottomLeft",content:(0,e.jsx)(ns,{}),trigger:"click",showArrow:!1,className:"recommender__popover",children:(0,e.jsx)(es.Z,{style:{color:"#2DAC34"}})})},rs=function(r){var s=r.courseId,i=r.lessonId,a=r.recommenderType,o=a===void 0?v.Zg.Exercise:a,c=(0,l.useContext)(de._y),E=c.addNewTopic,T=Qa(i),g=(0,l.useCallback)(function(d,j){if(E){var A=E(d,j);n.history.push("/courses/list/".concat(s,"/program/?topic=").concat(A.id))}},[E]),P=function(j){switch(j){case v.Zg.Info:return(0,e.jsx)(qa,{});case v.Zg.Exercise:return T&&(0,e.jsx)(Xa,{createTopic:function(){return g(i,v.oz[Ja(T==null?void 0:T.topic_type)])},recommendedData:T});default:return(0,e.jsx)(n.FormattedMessage,{id:"recommender.no_recommendation"})}},G=o===v.Zg.Exercise&&!T;return(0,e.jsxs)("div",{className:"recommender",children:[(0,e.jsx)(wn,{style:{marginTop:"4px"}}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"recommender__title",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender.title"})}),G&&(0,e.jsx)(Ce.Z,{}),P(o)]}),(0,e.jsx)(Wn,{})]})},as=function(r){var s=r.courseId,i=Ha(s);return i&&i.probability&&i.probability>-.016?null:i?(0,e.jsxs)("div",{className:"recommender",children:[(0,e.jsx)(wn,{style:{marginTop:"4px"}}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"recommender__title",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender.title"})}),(0,e.jsxs)(rn.Z,{className:"recommender__paragraph",children:[(0,e.jsx)(n.FormattedMessage,{id:"recommender.finish"}),(0,e.jsx)("strong",{children:"".concat(Bn(i.probability),"%. ")}),(0,e.jsx)("br",{}),(0,e.jsx)(n.FormattedMessage,{id:"recommender.too_long"})]})]}),(0,e.jsx)(Wn,{})]}):(0,e.jsx)(e.Fragment,{})},ss=t(52745),Kn=t(59234),is=[{type:v.oz.RichText,icon:(0,e.jsx)(en.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"RichText"})},{type:v.oz.OEmbed,icon:(0,e.jsx)(Yt.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"OEmbed"})},{type:v.oz.Audio,icon:(0,e.jsx)(Qt.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"Audio"})},{type:v.oz.Video,icon:(0,e.jsx)(qt.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"Video"})},{type:v.oz.H5P,icon:(0,e.jsx)(Xt.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"H5P"})},{type:v.oz.Image,icon:(0,e.jsx)(Jt.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"Image"})},{type:v.oz.PDF,icon:(0,e.jsx)(Ht.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"PDF"})},{type:v.oz.SCORM,icon:(0,e.jsx)(Gt.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"SCORM"})},{type:v.oz.Project,icon:(0,e.jsx)(tn.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"Project"})},{type:v.oz.GiftQuiz,icon:(0,e.jsx)(nn.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"Quiz"})}],os=function(r){var s=r.onSelected,i=r.positionsToHide,a=(0,l.useState)(!1),o=C()(a,2),c=o[0],E=o[1],T=(0,n.useModel)("@@initialState"),g=T.initialState,P=(0,l.useCallback)(function(j){E(!1),s(j)},[]),G=(0,l.useCallback)((0,Rn.a)(g==null?void 0:g.packages),[g==null?void 0:g.packages]),d=(0,l.useCallback)(function(j){var A,Y=Object.keys(v.oz).filter(function(re){return v.oz[re]==j}).pop(),D=Y&&(g==null||(A=g.config)===null||A===void 0||(A=A.filter(function(re){return re.key===(0,Kn.Wg)(Y)})[0])===null||A===void 0?void 0:A.data);if(D)return!0;switch(j){case v.oz.GiftQuiz:return!G(vt.Z.TopicTypeGift);case v.oz.SCORM:return!G(vt.Z.Scorm);case v.oz.Project:return!G(vt.Z.TopicTypeProject);default:return!G(vt.Z.TopicTypes)}},[g]);return(0,e.jsxs)("div",{className:`topic-types-selector topic-types-selector__recommender-wrapper
       `.concat(c?"topic-types-selector--visible":""),children:[(0,e.jsx)(x.ZP,{type:"text",size:"small",onClick:function(){return E(function(A){return!A})},className:"topic-types-selector__recommender--add-btn",icon:c?(0,e.jsx)(ss.Z,{}):(0,e.jsx)($t.Z,{}),children:(0,e.jsx)(n.FormattedMessage,{id:"recommender.add_new_exercise"})}),(0,e.jsx)("div",{className:"topic-types-selector__recommender".concat(`
          `,c?"topic-types-selector__recommender--active":""),children:is.map(function(j){return!(i!=null&&i.includes(j.type))&&!d(j.type)&&(0,e.jsx)(at.Z,{title:j.title,children:(0,e.jsx)(x.ZP,{block:!0,onClick:function(){return P(j.type)},icon:j.icon})},j.type)})})]})},ls=t(86864),us=function(r){var s=r.onSelected,i=r.onNewLesson,a=r.positionsToHide,o=r.depth,c=o===void 0?0:o,E=(0,l.useState)(!1),T=C()(E,2),g=T[0],P=T[1],G=(0,n.useModel)("@@initialState"),d=G.initialState,j=(0,n.useIntl)(),A=(0,l.useCallback)(function(D){P(!1),s(D)},[]),Y=(0,l.useCallback)(function(D){var re,ue,ce,$e,Ae,Oe=Object.keys(v.oz).filter(function(we){return v.oz[we]==D}).pop(),Ke=Oe&&(d==null||(re=d.config)===null||re===void 0||(re=re.filter(function(we){return we.key===(0,Kn.Wg)(Oe)})[0])===null||re===void 0?void 0:re.data);if(Ke)return!0;switch(D){case v.oz.GiftQuiz:return!(d!=null&&d.packages&&d!==null&&d!==void 0&&(ue=d.packages)!==null&&ue!==void 0&&ue[vt.Z.TopicTypeGift]);case v.oz.SCORM:return!(d!=null&&d.packages&&d!==null&&d!==void 0&&(ce=d.packages)!==null&&ce!==void 0&&ce[vt.Z.Scorm]);case v.oz.Project:return!(d!=null&&d.packages&&d!==null&&d!==void 0&&($e=d.packages)!==null&&$e!==void 0&&$e[vt.Z.TopicTypeProject]);default:return!(d!=null&&d.packages&&d!==null&&d!==void 0&&(Ae=d.packages)!==null&&Ae!==void 0&&Ae[vt.Z.TopicTypes])}},[d]);return(0,e.jsxs)("div",{className:"topic-types-selector ".concat(g?"topic-types-selector--visible":""),children:[(0,e.jsx)(St.Z,{children:(0,e.jsx)(at.Z,{placement:"top",title:(0,e.jsx)(n.FormattedMessage,{id:"add_new_topic"}),children:(0,e.jsx)(x.ZP,{type:"primary",size:"small",onClick:function(){return P(function(re){return!re})},icon:(0,e.jsx)($t.Z,{})})})}),(0,e.jsxs)("div",{className:"topic-types-selector__list ".concat(g?"topic-types-selector__list--visible":""),children:[!(a!=null&&a.includes("lesson"))&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(at.Z,{placement:"right",title:j.messages["Lesson_level-".concat(c)]?(0,e.jsx)(n.FormattedMessage,{id:"Lesson_level-".concat(c)}):(0,e.jsx)(n.FormattedMessage,{id:"Lesson",defaultMessage:"Lesson"}),children:(0,e.jsx)(x.ZP,{block:!0,onClick:function(){P(!1),i()},icon:(0,e.jsx)(ls.Z,{})})}),(0,e.jsx)(Ft.Z,{})]}),!(a!=null&&a.includes(v.oz.RichText))&&!Y(v.oz.RichText)&&(0,e.jsx)(at.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"RichText"}),children:(0,e.jsx)(x.ZP,{block:!0,onClick:function(){return A(v.oz.RichText)},icon:(0,e.jsx)(en.Z,{})})}),!(a!=null&&a.includes(v.oz.OEmbed))&&!Y(v.oz.OEmbed)&&(0,e.jsx)(at.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"OEmbed"}),children:(0,e.jsx)(x.ZP,{block:!0,onClick:function(){return A(v.oz.OEmbed)},icon:(0,e.jsx)(Yt.Z,{})})}),!(a!=null&&a.includes(v.oz.Audio))&&!Y(v.oz.Audio)&&(0,e.jsx)(at.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"Audio"}),children:(0,e.jsx)(x.ZP,{block:!0,onClick:function(){return A(v.oz.Audio)},icon:(0,e.jsx)(Qt.Z,{})})}),!(a!=null&&a.includes(v.oz.Video))&&!Y(v.oz.Video)&&(0,e.jsx)(at.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"Video"}),children:(0,e.jsx)(x.ZP,{block:!0,onClick:function(){return A(v.oz.Video)},icon:(0,e.jsx)(qt.Z,{})})}),!(a!=null&&a.includes(v.oz.H5P))&&!Y(v.oz.H5P)&&(0,e.jsx)(at.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"H5P"}),children:(0,e.jsx)(x.ZP,{block:!0,onClick:function(){return A(v.oz.H5P)},icon:(0,e.jsx)(Xt.Z,{})})}),!(a!=null&&a.includes(v.oz.Image))&&!Y(v.oz.Image)&&(0,e.jsx)(at.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"Image"}),children:(0,e.jsx)(x.ZP,{block:!0,onClick:function(){return A(v.oz.Image)},icon:(0,e.jsx)(Jt.Z,{})})}),!(a!=null&&a.includes(v.oz.PDF))&&!Y(v.oz.PDF)&&(0,e.jsx)(at.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"PDF"}),children:(0,e.jsx)(x.ZP,{block:!0,onClick:function(){return A(v.oz.PDF)},icon:(0,e.jsx)(Ht.Z,{})})}),!(a!=null&&a.includes(v.oz.SCORM))&&!Y(v.oz.SCORM)&&(0,e.jsx)(at.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"SCORM"}),children:(0,e.jsx)(x.ZP,{block:!0,onClick:function(){return A(v.oz.SCORM)},icon:(0,e.jsx)(Gt.Z,{})})}),!(a!=null&&a.includes(v.oz.Project))&&!Y(v.oz.Project)&&(0,e.jsx)(at.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"Project"}),children:(0,e.jsx)(x.ZP,{block:!0,onClick:function(){return A(v.oz.Project)},icon:(0,e.jsx)(tn.Z,{})})}),!(a!=null&&a.includes(v.oz.GiftQuiz))&&!Y(v.oz.GiftQuiz)&&(0,e.jsx)(at.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"Quiz"}),children:(0,e.jsx)(x.ZP,{block:!0,onClick:function(){return A(v.oz.GiftQuiz)},icon:(0,e.jsx)(nn.Z,{})})})]})]})},ds=t(70227),ut=function(b){return b.New="new",b.Lesson="lesson",b.Topic="topic",b}({}),Nn=function(r,s){return r.map(function(i){return u()(u()({},i),{},{id:"topic-".concat(i.id,"-").concat(s)})})},cs=function(r,s){return r.map(function(i){return u()(u()({},i),{},{id:i.isNew?"new-".concat(i.id,"-").concat(s):"lesson-".concat(i.id,"-").concat(s)})})},$n=function(r,s){var i,a;return u()(u()({},r),{},{id:r.isNew?"new-".concat(r.id,"-").concat(s):"lesson-".concat(r.id,"-").concat(s),lessons:cs((i=r==null?void 0:r.lessons)!==null&&i!==void 0?i:[],s+1),topics:Nn((a=r==null?void 0:r.topics)!==null&&a!==void 0?a:[],s+1)})},ms=function b(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return r.reduce(function(i,a){var o;return[].concat(p()(i),p()(b((o=a==null?void 0:a.lessons)!==null&&o!==void 0?o:[],s+1)),[$n(a,s)])},[])},_s=function b(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return r.reduce(function(i,a){var o,c;return[].concat(p()(i),p()(b((o=a==null?void 0:a.lessons)!==null&&o!==void 0?o:[],s+1)),p()(Nn((c=a==null?void 0:a.topics)!==null&&c!==void 0?c:[],s)))},[])},ps=function(r){return r.map(function(s){var i,a,o=$n(s,0),c=[].concat(p()((i=o.lessons)!==null&&i!==void 0?i:[]),p()((a=o.topics)!==null&&a!==void 0?a:[])).map(function(E){var T=E.id;return T});return{id:o.id,children:c,hasChildren:c.length>0,isExpanded:!0,data:o}})},fs=function(r,s){return r.reduce(function(i,a){var o,c,E=[];if("lessons"in a||"topics"in a){var T,g;E=[].concat(p()((T=a.lessons)!==null&&T!==void 0?T:[]),p()((g=a.topics)!==null&&g!==void 0?g:[])).map(function(G){var d=G.id;return d})}var P=(o=s==null||(c=s["".concat(a.id)])===null||c===void 0?void 0:c.isExpanded)!==null&&o!==void 0?o:!0;return u()(u()({},i),{},m()({},"".concat(a.id),{id:a.id,children:E,hasChildren:E.length>0,isExpanded:P,data:a}))},{})},on=function(r,s,i){var a=p()(r),o=s%a.length,c=i%a.length,E=a.splice(o,1),T=C()(E,1),g=T[0];return a.splice(c,0,g),a},wt=function(r,s,i){var a=p()(r),o=a.length===1||s===a.length?s:s%a.length;return a.splice(o,0,i),a},bt=function(r){return r.map(function(s,i){var a=s.toString().split("-"),o=C()(a,2),c=o[1];return[+c,i]})},Mt=function(){var b=O()(h()().mark(function r(s,i,a){var o,c;return h()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return o=void 0,s(function(g){return o=g,ds.d.apply(void 0,[g].concat(p()(i)))}),T.prev=2,T.next=5,a();case 5:c=T.sent,f()(c)==="object"&&c!==null&&"success"in c&&typeof c.success=="boolean"&&!c.success&&o&&s(o),T.next=12;break;case 9:T.prev=9,T.t0=T.catch(2),o&&s(o);case 12:case"end":return T.stop()}},r,null,[[2,9]])}));return function(s,i,a){return b.apply(this,arguments)}}(),vs=function(r,s){return Object.values(r.items).find(function(i){var a=i.children;return a.includes(s)})},zn=function(r,s,i){var a,o;return(a=(o=r.items)===null||o===void 0||(o=o[s])===null||o===void 0||(o=o.children)===null||o===void 0?void 0:o.indexOf(i))!==null&&a!==void 0?a:-1},hs=function(r){var s=r.onNewLesson,i=(0,l.useContext)(de._y),a=i.state,o=i.currentEditMode,c=i.updateLesson,E=i.addNewTopic,T=i.addNewLesson,g=i.getLessons,P=a==null?void 0:a.id,G=(0,l.useMemo)(function(){var Le;return ps((Le=a==null?void 0:a.lessons)!==null&&Le!==void 0?Le:[])},[a==null?void 0:a.lessons]),d=(0,l.useMemo)(function(){var Le,he;return[].concat(p()(ms((Le=a==null?void 0:a.lessons)!==null&&Le!==void 0?Le:[])),p()(_s((he=a==null?void 0:a.lessons)!==null&&he!==void 0?he:[])))},[a==null?void 0:a.lessons]),j=(0,l.useState)({rootId:0,items:{}}),A=C()(j,2),Y=A[0],D=A[1],re=(0,n.useModel)("@@initialState"),ue=re.initialState,ce=(0,n.useIntl)(),$e=(0,l.useCallback)((0,Rn.a)(ue==null?void 0:ue.packages),[ue==null?void 0:ue.packages]);(0,l.useEffect)(function(){D(function(Le){var he={children:G.map(function(ae){var ke=ae.id;return ke}),id:"root",data:G,isExpanded:!0,hasChildren:G.length>0},Te=fs(d,Le.items);return{rootId:he.id,items:u()(u()({},Te),{},m()({},he.id,he))}})},[d]);var Ae=(0,l.useCallback)(function(Le,he){if(E){var Te=E(Le,he);n.history.push("/courses/list/".concat(P,"/program/?topic=").concat(Te.id))}},[E]),Oe=(0,l.useMemo)(function(){var Le;return((Le=ue==null?void 0:ue.config)!==null&&Le!==void 0?Le:[]).reduce(function(he,Te){return Te.key==="maxLessonsNestingInProgram"?u()(u()({},he),{},{lesson:Te.data}):Te.key==="minTopicNestingInProgram"?u()(u()({},he),{},{topic:Te.data}):he},{})},[ue==null?void 0:ue.config]),Ke=(0,l.useCallback)(function(Le){var he,Te,ae=[],ke=(he=Oe==null?void 0:Oe.lesson)!==null&&he!==void 0?he:.5,Re=(Te=Oe==null?void 0:Oe.topic)!==null&&Te!==void 0?Te:.5;return Number.isInteger(ke)&&Le>ke&&ae.push("lesson"),Number.isInteger(Re)&&Le<Re&&Object.values(v.oz).forEach(function(Je){return ae.push(Je)}),ae},[Oe]),we=(0,l.useCallback)(function(Le){var he,Te,ae=Le.item,ke=Le.depth,Re=Le.provided,Je=Le.onExpand,_t=Le.onCollapse,et=ae.id.toString().split("-"),ct=C()(et,2),rt=ct[0],We=ct[1],ge=Number(We),Qe=function(Ve,nt){var je,Ie=d.find(function(Ye){return Ye.id.includes(String(Ve))}),Ne=Ie==null||(je=Ie.topics)===null||je===void 0?void 0:je[Ie.topics.length-1];return(Ne==null?void 0:Ne.id)===nt};return rt==="new"&&ae.data.isNew?(0,e.jsx)($a,u()(u()(u()({},Re.draggableProps),Re.dragHandleProps),{},{ref:Re.innerRef,initialValue:ae.data,onCreate:function(Ve){var nt=gt(u()(u()({},ae.data),{},{parent_lesson_id:ae.data.parent_id,title:Ve,active:ae.data.active?1:0}));c&&c(ge,nt)}})):rt==="lesson"?(0,e.jsxs)("div",u()(u()(u()({},Re.draggableProps),Re.dragHandleProps),{},{ref:Re.innerRef,className:"program-sidebar__list-item program-sidebar__list-item--lesson ".concat((o==null?void 0:o.mode)==="lesson"&&o.id===ge?"program-sidebar__list-item--active":""),children:[(0,e.jsxs)("div",{className:"program-sidebar__text-wrap",children:[(0,e.jsx)("button",{className:"program-sidebar__collapse",onClick:function(){return ae.isExpanded?_t(ae.id):Je(ae.id)},children:ae.isExpanded?(0,e.jsx)(zr.Z,{}):(0,e.jsx)(yn.Z,{})}),(0,e.jsx)(at.Z,{placement:"top",title:ae.data.title,children:(0,e.jsx)(n.NavLink,{to:"/courses/list/".concat(P,"/program/?").concat(rt,"=").concat(ge),className:"program-sidebar__link",children:(0,e.jsx)("span",{className:"program-sidebar__title",children:ae.data.title})})})]}),(0,e.jsx)(us,{onNewLesson:function(){T&&T(ge)},onSelected:function(Ve){return Ae(ge,Ve)},positionsToHide:Ke(ke+1),depth:ke})]})):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.NavLink,u()(u()(u()({className:"program-sidebar__link program-sidebar__list-item program-sidebar__list-item--topic ".concat((o==null?void 0:o.mode)==="topic"&&o.id===ge?"program-sidebar__list-item--active":""),to:"/courses/list/".concat(P,"/program/?").concat(rt,"=").concat(ge)},Re.draggableProps),Re.dragHandleProps),{},{ref:Re.innerRef,children:[(0,e.jsx)(at.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:kt(ae.data)}),children:Fn(kt(ae.data))}),(0,e.jsx)("span",{className:"title",children:ae.data.title})]})),$e(vt.Z.Recommender)&&P&&(o==null?void 0:o.mode)==="topic"&&(o==null||(he=o.value)===null||he===void 0?void 0:he.lesson_id)&&(o==null||(Te=o.value)===null||Te===void 0?void 0:Te.lesson_id)===ae.data.lesson_id&&Qe(o.value.lesson_id,ae.data.id)&&(0,e.jsxs)(e.Fragment,{children:[d.length>5&&(0,e.jsx)(as,{courseId:P}),(0,e.jsx)(rs,{courseId:P,lessonId:o.value.lesson_id,recommenderType:o.value.isNew?v.Zg.Info:v.Zg.Exercise}),(0,e.jsx)(os,{onSelected:function(Ve){return Ae(ae.data.lesson_id,Ve)},positionsToHide:Ke(ke+1)})]})]})},[P,o]),Xe=(0,l.useCallback)(function(Le){return D(function(he){return(0,Tn.U)(he,Le,{isExpanded:!0})})},[]),ot=(0,l.useCallback)(function(Le){return D(function(he){return(0,Tn.U)(he,Le,{isExpanded:!1})})},[]),qe=(0,l.useCallback)(function(){var Le=O()(h()().mark(function he(Te,ae){var ke,Re,Je,_t,et,ct,rt,We,ge,Qe,st,Ve,nt,je,Ie,Ne,Ye,pt,lt,Bt,tt,Pt,Vn,Gn,Hn,Qn,Jn,Yn,Xn,At,qn,er,tr,nr,rr,ar,sr,Wt,ir,or,lr,ur,dr,cr,mr,_r,pr,pn,fn,Ot,fr,vn,hn,vr,Dt,Ct,hr,gr,jr,xr,br,Mr,Er,Pr,gn,Kt,It,yt,Cr,yr,Tr,Sr,Ar,Or,Dr;return h()().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(!(!ae||!P)){xe.next=2;break}return xe.abrupt("return");case 2:if(ke=Y.items[Te.parentId].children,Re=ke[Te.index].toString(),Je=Re.split("-"),_t=C()(Je,2),et=_t[0],ct=_t[1],rt=Y.items[ae.parentId].children,We=Oe==null?void 0:Oe.lesson,ge=Oe==null?void 0:Oe.topic,et!==ut.New){xe.next=11;break}return K.ZP.warning(ce.formatMessage({id:"new_lessons_cant_be_moved"})),xe.abrupt("return");case 11:if(!ae.parentId.toString().includes("topic")){xe.next=63;break}if(nt=ke.filter(function(dt){return dt.toString().includes("topic")}),je=vs(Y,ae.parentId),Ie=Number((Qe=(st=((Ve=je==null?void 0:je.id)!==null&&Ve!==void 0?Ve:"").toString().split("-"))===null||st===void 0?void 0:st[2])!==null&&Qe!==void 0?Qe:-2)+1,!(et===ut.Lesson&&We!==void 0&&Ie>We)){xe.next=18;break}return K.ZP.warning(ce.formatMessage({id:"max_lesson_nesting"},{max:We})),xe.abrupt("return");case 18:if(!(et===ut.Topic&&ge!==void 0&&Ie<ge)){xe.next=21;break}return K.ZP.warning(ce.formatMessage({id:"min_topic_nesting"},{min:ge})),xe.abrupt("return");case 21:if(!((je==null?void 0:je.id)!==void 0&&Te.parentId===je.id)){xe.next=35;break}if(et!==ut.Lesson){xe.next=25;break}return K.ZP.warning(ce.formatMessage({id:"lessons_and_topics_cant_be_mixed"})),xe.abrupt("return");case 25:if(et!==ut.Topic){xe.next=35;break}if(Ne=zn(Y,je.id,ae.parentId),!(Ne<0)){xe.next=29;break}return xe.abrupt("return");case 29:return Ye=on(nt,Te.index,Ne),pt=bt(Ye),xe.next=33,Mt(D,[Te,{parentId:je.id,index:Ne}],function(){return(0,y.DY)({class:"Topic",orders:pt,course_id:P})});case 33:return g==null||g(),xe.abrupt("return");case 35:if(!((je==null?void 0:je.id)!==void 0&&Te.parentId!==je.id)){xe.next=62;break}if(lt=je.children.filter(function(dt){return dt.toString().includes("lesson")}),Bt=je.children.filter(function(dt){return dt.toString().includes("topic")}),et!==ut.Lesson){xe.next=50;break}return tt=lt.length,Pt=je.id.toString().split("-"),Vn=C()(Pt,2),Gn=Vn[1],Hn=Y.items[Re].data,Qn={parent_lesson_id:je.id==="root"?"":+Gn,course_id:P,title:Hn.title,order:tt},Jn=gt(Qn),Yn=wt(lt,tt,Re),Xn=bt(Yn),xe.next=48,Mt(D,[Te,u()(u()({},ae),{},{index:tt})],function(){return(0,y.sI)(+ct,Jn).then(function(){return(0,y.DY)({class:"Lesson",orders:Xn,course_id:P})})});case 48:return g==null||g(),xe.abrupt("return");case 50:if(et!==ut.Topic){xe.next=62;break}if(At=zn(Y,je.id,ae.parentId)+1,!(At<1)){xe.next=54;break}return xe.abrupt("return");case 54:return qn=je.id.toString().split("-"),er=C()(qn,2),tr=er[1],nr={lesson_id:+tr,order:At},rr=wt(Bt,At-lt.length,Re),ar=bt(rr),sr=gt(nr),xe.next=61,Mt(D,[Te,{parentId:je.id,index:At}],function(){return(0,y.Cn)(+ct,sr).then(function(){return(0,y.DY)({class:"Topic",orders:ar,course_id:P})})});case 61:g==null||g();case 62:return xe.abrupt("return");case 63:if(!(ae.parentId==="root"&&et===ut.Topic)){xe.next=66;break}return K.ZP.warning(ce.formatMessage({id:"topic_cant_be_in_root"})),xe.abrupt("return");case 66:if(!(Te.parentId===ae.parentId&&ae.index!==void 0)){xe.next=93;break}if(Wt=ke.filter(function(dt){return dt.toString().includes("lesson")}),ir=ke.filter(function(dt){return dt.toString().includes("topic")}),et!==ut.Lesson){xe.next=81;break}if(or=0,lr=Wt.length-1,!(ae.index<or||ae.index>lr)){xe.next=75;break}return K.ZP.warning(ce.formatMessage({id:"lessons_and_topics_cant_be_mixed"})),xe.abrupt("return");case 75:return ur=on(Wt,Te.index,ae.index),dr=bt(ur),xe.next=79,Mt(D,[Te,ae],function(){return(0,y.DY)({class:"Lesson",orders:dr,course_id:P})});case 79:return g==null||g(),xe.abrupt("return");case 81:if(et!==ut.Topic){xe.next=93;break}if(cr=Wt.length,mr=ke.length-1,!(ae.index<cr||ae.index>mr)){xe.next=87;break}return K.ZP.warning(ce.formatMessage({id:"lessons_and_topics_cant_be_mixed"})),xe.abrupt("return");case 87:return _r=on(ir,Te.index,ae.index),pr=bt(_r),xe.next=91,Mt(D,[Te,ae],function(){return(0,y.DY)({class:"Topic",orders:pr,course_id:P})});case 91:return g==null||g(),xe.abrupt("return");case 93:if(Te.parentId===ae.parentId){xe.next=135;break}if(Ot=rt.filter(function(dt){return dt.toString().includes("lesson")}),fr=rt.filter(function(dt){return dt.toString().includes("topic")}),vn=Number((pn=(fn=ae.parentId.toString().split("-"))===null||fn===void 0?void 0:fn[2])!==null&&pn!==void 0?pn:-2)+1,!(et===ut.Lesson&&We!==void 0&&vn>We)){xe.next=100;break}return K.ZP.warning(ce.formatMessage({id:"max_lesson_nesting"},{max:We})),xe.abrupt("return");case 100:if(!(et===ut.Topic&&ge!==void 0&&vn<ge)){xe.next=103;break}return K.ZP.warning(ce.formatMessage({id:"min_topic_nesting"},{min:ge})),xe.abrupt("return");case 103:if(et!==ut.Lesson){xe.next=120;break}if(vr=0,Dt=Ot.length,Ct=(hn=ae.index)!==null&&hn!==void 0?hn:Dt,!(Dt!==0&&Ct<vr||Dt!==0&&Ct>Dt)){xe.next=110;break}return K.ZP.warning(ce.formatMessage({id:"lessons_and_topics_cant_be_mixed"})),xe.abrupt("return");case 110:return hr=ae.parentId.toString().split("-"),gr=C()(hr,2),jr=gr[1],xr=Y.items[Re].data,br={parent_lesson_id:ae.parentId==="root"?"":+jr,course_id:P,title:xr.title,order:Ct},Mr=gt(br),Er=wt(Ot,Ct,Re),Pr=bt(Er),xe.next=118,Mt(D,[Te,u()(u()({},ae),{},{index:Ct})],function(){return(0,y.sI)(+ct,Mr).then(function(){return(0,y.DY)({class:"Lesson",orders:Pr,course_id:P})})});case 118:return g==null||g(),xe.abrupt("return");case 120:if(et!==ut.Topic){xe.next=135;break}if(Kt=Ot.length,It=rt.length,yt=(gn=ae.index)!==null&&gn!==void 0?gn:It,!(Kt!==0&&It!==0&&yt<Kt||Kt!==0&&It!==0&&yt>It)){xe.next=127;break}return K.ZP.warning(ce.formatMessage({id:"lessons_and_topics_cant_be_mixed"})),xe.abrupt("return");case 127:return Cr=ae.parentId.toString().split("-"),yr=C()(Cr,2),Tr=yr[1],Sr={lesson_id:+Tr,order:yt},Ar=wt(fr,yt-Ot.length,Re),Or=bt(Ar),Dr=gt(Sr),xe.next=134,Mt(D,[Te,u()(u()({},ae),{},{index:yt})],function(){return(0,y.Cn)(+ct,Dr).then(function(){return(0,y.DY)({class:"Topic",orders:Or,course_id:P})})});case 134:g==null||g();case 135:case"end":return xe.stop()}},he)}));return function(he,Te){return Le.apply(this,arguments)}}(),[ce,Y,P,Oe]);return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)(kr.Z,{offsetPerLevel:9,tree:Y,onExpand:Xe,onCollapse:ot,onDragEnd:qe,renderItem:we,isDragEnabled:!0,isNestingEnabled:!0}),(0,e.jsx)(x.ZP,{onClick:s,type:"primary",className:"program-sidebar__add-btn",icon:(0,e.jsx)($t.Z,{}),children:(0,e.jsx)("span",{children:(0,e.jsx)(n.FormattedMessage,{id:"add_lesson"})})})]})},gs=function(){var r=(0,l.useContext)(de._y),s=r.state,i=r.addNewLesson,a=(0,l.useCallback)(function(){if(i&&s){var o=i();n.history.push("/courses/list/".concat(s.id,"/program/?lesson=").concat(o.id))}},[i,s]);return s&&s.lessons?(0,e.jsx)("aside",{className:"program-sidebar program-sidebar--left ".concat(s.lessons.length>0?"":"program-sidebar--empty"),children:(0,e.jsx)(hs,{onNewLesson:a})}):(0,e.jsx)("div",{children:(0,e.jsx)(Ce.Z,{})})},js=gs,xs=function(){var r=(0,l.useContext)(de._y),s=r.state,i=r.currentEditMode,a=Ee.Z.Title;return s&&s.lessons?(0,e.jsxs)("div",{className:"course-block",children:[(0,e.jsxs)(ye.Z,{gutter:16,children:[(0,e.jsx)(Be.Z,{span:4,children:(0,e.jsx)(js,{})}),(0,e.jsxs)(Be.Z,{span:24-4,children:[i&&i.mode==="lesson"&&i.value&&(0,e.jsx)($r,{},i.id),i&&i.mode==="topic"&&i.value&&(0,e.jsx)(Wa,{},i.id),i&&i.mode==="init"&&(0,e.jsxs)(ye.Z,{style:{height:"100%"},children:[(0,e.jsx)(Be.Z,{span:16,children:(0,e.jsx)("div",{className:"program__empty-message",children:s.lessons.length>0?(0,e.jsx)(a,{level:4,children:(0,e.jsx)(jn.Z,{id:"program_form_not_selected_list_message"})}):(0,e.jsx)(a,{level:4,children:(0,e.jsx)(jn.Z,{id:"program_form_empty_list_message"})})})}),(0,e.jsx)(Be.Z,{span:8,children:(0,e.jsx)("aside",{className:"program-sidebar program-sidebar--right"})})]})]})]}),(0,e.jsx)("div",{className:"curriculum-lessons-wrapper"})]}):(0,e.jsx)("div",{children:(0,e.jsx)(Ce.Z,{})})},bs=xs,Ms=function(r){var s=r.id;return(0,e.jsxs)(de.Il,{id:Number(s),children:[(0,e.jsx)(bs,{})," "]})},Es=Ms;function Ps(b,r){return ln.apply(this,arguments)}function ln(){return ln=O()(h()().mark(function b(r,s){return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/admin/topic-project-solutions",u()({params:u()(u()({},r),{},{per_page:r.pageSize,page:r.current}),method:"GET",useCache:!1},s||{})));case 1:case"end":return a.stop()}},b)})),ln.apply(this,arguments)}function Cs(b,r){return un.apply(this,arguments)}function un(){return un=O()(h()().mark(function b(r,s){return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/admin/topic-project-solutions/".concat(r),u()({method:"DELETE"},s||{})));case 1:case"end":return a.stop()}},b)})),un.apply(this,arguments)}var ys=["type","defaultRender"],Ts=function(){var b=O()(h()().mark(function r(s){var i;return h()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Cs(s);case 2:return i=o.sent,i.success&&K.ZP.success(i.message),o.abrupt("return",!0);case 5:case"end":return o.stop()}},r)}));return function(s){return b.apply(this,arguments)}}(),Ss=function b(r){return r.reduce(function(s,i){var a;return[].concat(p()(s),p()(i.lessons?b(i.lessons):[]),p()((a=i.topics)!==null&&a!==void 0?a:[]))},[])},As=function(r){var s=r.courseId,i=(0,n.useIntl)(),a=(0,l.useState)([]),o=C()(a,2),c=o[0],E=o[1],T=(0,l.useMemo)(function(){return c.reduce(function(P,G){var d,j,A;return u()(u()({},P),{},m()({},(d=G.id)!==null&&d!==void 0?d:-1,{text:(j=G.title)!==null&&j!==void 0?j:"",status:(A=G.id)!==null&&A!==void 0?A:-1}))},{})},[c]),g=(0,l.useMemo)(function(){return[{title:(0,e.jsx)(n.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:(0,e.jsx)(n.FormattedMessage,{id:"topic",defaultMessage:"topic"}),dataIndex:"topic_id",hideInSearch:!1,sorter:!0,valueEnum:T,render:function(G,d){var j,A;return(0,e.jsx)(n.Link,{to:"/courses/list/".concat(s,"/program/?topic=").concat(d.topic_id),children:(j=T==null||(A=T[d.topic_id])===null||A===void 0?void 0:A.text)!==null&&j!==void 0?j:d.topic_id})}},{sorter:!0,title:(0,e.jsx)(n.FormattedMessage,{id:"user",defaultMessage:"user"}),dataIndex:"user_id",renderFormItem:function(G,d,j){var A=d.type,Y=d.defaultRender,D=Un()(d,ys);if(A==="form")return null;var re=j.getFieldValue("state");return(0,e.jsx)(Ut.Z,u()(u()({},D),{},{state:{type:re}}))},render:function(G,d){return d.user_id&&(0,e.jsx)(U.Z,{type:"EscolaLms\\Core\\Models\\User",type_id:d.user_id},"user")}},{sorter:!0,title:(0,e.jsx)(n.FormattedMessage,{id:"created_at",defaultMessage:"Created at"}),dataIndex:"created_at",hideInSearch:!0,render:function(G,d){return d.created_at&&(0,me.WU)(new Date(d.created_at),S.Cu)}},{title:(0,e.jsx)(n.FormattedMessage,{id:"download",defaultMessage:"Download"}),dataIndex:"file_url",hideInSearch:!0,render:function(G,d){return(0,e.jsx)(x.ZP,{type:"primary",target:"_blank",size:"small",href:d.file_url,children:(0,e.jsx)(n.FormattedMessage,{id:"download",defaultMessage:"Download"})})}},{hideInSearch:!0,title:(0,e.jsx)(n.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",render:function(G,d,j,A){return[(0,e.jsx)(bn.Z,{title:(0,e.jsx)(n.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:O()(h()().mark(function Y(){var D;return h()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,Ts(d.id);case 2:if(D=ue.sent,D){ue.next=5;break}return ue.abrupt("return");case 5:A==null||A.reload();case 6:case"end":return ue.stop()}},Y)})),okText:(0,e.jsx)(n.FormattedMessage,{id:"yes"}),cancelText:(0,e.jsx)(n.FormattedMessage,{id:"no"}),children:(0,e.jsx)(at.Z,{title:(0,e.jsx)(n.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,e.jsx)(x.ZP,{type:"primary",icon:(0,e.jsx)(In.Z,{}),danger:!0})})},"delete")]}}]},[T]);return(0,l.useEffect)(function(){s&&(0,y.Nx)(s).then(function(P){if(P.success){var G=Ss(P.data.lessons).filter(function(d){return d.topicable_type===v.oz.Project});E(G)}})},[s]),(0,e.jsx)(J.ZP,{headerTitle:i.formatMessage({id:"project_solutions",defaultMessage:"Project Uploaded Solutions"}),search:{layout:"vertical"},rowKey:"id",request:function(){var P=O()(h()().mark(function G(d,j){var A,Y,D,re,ue,ce,$e;return h()().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return A=d.pageSize,Y=d.current,D=d.user_id,re=d.topic_id,ue=j&&Object.entries(j)[0],ce=ue&&ue[0],Oe.next=5,Ps({pageSize:A,current:Y,course_id:s,user_id:D,topic_id:re,order_by:ce,order:ue?ue[1]==="ascend"?"ASC":"DESC":void 0});case 5:if($e=Oe.sent,$e.success){Oe.next=8;break}return Oe.abrupt("return",{data:[],total:0,success:!1});case 8:return Oe.abrupt("return",{data:$e.data,total:$e.meta.total,success:!0});case 9:case"end":return Oe.stop()}},G)}));return function(G,d){return P.apply(this,arguments)}}(),columns:g})},Hs=null,Os=t(39470),Ds=t(54434),Is=t(14408),Zs=function(r){var s=r.visible,i=s===void 0?!1:s,a=r.handleOk,o=r.handleCancel;return(0,e.jsx)(zt.Z,{title:(0,e.jsx)(mt._H,{id:"course_success_modal_title",defaultMessage:"course_success_modal_title"}),visible:i,onOk:a,onCancel:o,footer:[(0,e.jsx)(x.ZP,{onClick:o,children:(0,e.jsx)(mt._H,{id:"course_success_modal_button_cancel",defaultMessage:"course_success_modal_button_cancel"})},"link"),(0,e.jsx)(x.ZP,{type:"primary",onClick:a,children:(0,e.jsx)(mt._H,{id:"course_success_modal_button_ok",defaultMessage:"course_success_modal_button_ok"})},"link")],children:(0,e.jsx)("p",{children:(0,e.jsx)(mt._H,{id:"course_success_modal_content",defaultMessage:"course_success_modal_content"})})})},kn=t(64317),Fs=t(74453),Ls=t(76560),Rs=function(r){var s=r.id;return(0,e.jsxs)(ie.ZP,{onFinish:function(){var i=O()(h()().mark(function a(o){return h()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:(0,y.O1)(Number(s),o).then(function(T){T.success&&K.ZP.success(T.message)});case 1:case"end":return E.stop()}},a)}));return function(a){return i.apply(this,arguments)}}(),request:function(){return(0,y.Pd)(Number(s)).then(function(a){return a.success?{users:a.data.users.map(function(o){return f()(o)==="object"?o.id:o}),groups:a.data.groups.map(function(o){return f()(o)==="object"?o.id:o})}:{users:[],groups:[]}})},children:[(0,e.jsx)(ie.ZP.Item,{valuePropName:"value",name:"users",label:(0,e.jsx)(n.FormattedMessage,{id:"users",defaultMessage:"Users"}),children:(0,e.jsx)(Ut.Z,{multiple:!0})}),(0,e.jsx)(ie.ZP.Item,{valuePropName:"value",name:"groups",label:(0,e.jsx)(n.FormattedMessage,{id:"groups",defaultMessage:"Groups"}),children:(0,e.jsx)(Ls.Z,{multiple:!0})})]})},Us=Rs;function ws(b,r){return dn.apply(this,arguments)}function dn(){return dn=O()(h()().mark(function b(r,s){return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/admin/templates/assignable",u()({method:"GET",useCache:!1,params:r},s||{})));case 1:case"end":return a.stop()}},b)})),dn.apply(this,arguments)}function Bs(b,r,s){return cn.apply(this,arguments)}function cn(){return cn=O()(h()().mark(function b(r,s,i){return h()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,n.request)("/api/admin/templates/".concat(r,"/assign"),u()({method:"POST",headers:{"Content-Type":"application/json"},data:s},i||{})));case 1:case"end":return o.stop()}},b)})),cn.apply(this,arguments)}function Ws(b,r,s){return mn.apply(this,arguments)}function mn(){return mn=O()(h()().mark(function b(r,s,i){return h()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,n.request)("/api/admin/templates/".concat(r,"/unassign"),u()({method:"POST",headers:{"Content-Type":"application/json"},data:s},i||{})));case 1:case"end":return o.stop()}},b)})),mn.apply(this,arguments)}function Ks(b,r){return _n.apply(this,arguments)}function _n(){return _n=O()(h()().mark(function b(r,s){return h()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/admin/templates/assigned",u()({params:r,method:"GET",useCache:!1},s||{})));case 1:case"end":return a.stop()}},b)})),_n.apply(this,arguments)}var Ns=function(r){var s=r.onChange,i=r.multiple,a=i===void 0?!1:i,o=r.assignable_class,c=r.assignable_id,E=r.onAssign,T=r.onUnassign,g=r.onTemplates,P=(0,l.useState)([]),G=C()(P,2),d=G[0],j=G[1],A=(0,l.useState)([]),Y=C()(A,2),D=Y[0],re=Y[1],ue=(0,l.useState)(!1),ce=C()(ue,2),$e=ce[0],Ae=ce[1],Oe=(0,l.useRef)(),Ke=(0,l.useCallback)(function(he){j(he),g&&g(he)},[g]),we=(0,l.useCallback)(function(){Ks({assignable_class:o,assignable_id:Number(c)}).then(function(he){he.success&&re(he.data.map(function(Te){return Te.id}))})},[o,c]),Xe=(0,l.useCallback)(function(){return Ae(!0),Oe.current&&Oe.current.abort(),Oe.current=new AbortController,ws({assignable_class:o},{signal:Oe.current.signal}).then(function(he){he&&he.success&&Ke(he.data),Ae(!1)}).catch(function(){return Ae(!1)}),function(){Oe.current&&Oe.current.abort()}},[o,c]),ot=(0,l.useCallback)(function(he){re(function(Te){return Te.filter(function(ae){return ae!=he})})},[]),qe=(0,l.useCallback)(function(he){re(function(Te){return Te.includes(he)?Te:[].concat(p()(Te),[he])})},[]),Le=(0,l.useCallback)(function(he){var Te=Array.isArray(he)?he:[he],ae=Te.filter(function(Re){return!D.includes(Re)}),ke=D.filter(function(Re){return!Te.includes(Re)});ae.forEach(function(Re){Bs(Re,{assignable_id:Number(c)}).then(function(Je){Je.success&&K.ZP.success(Je.message),Je.success||(K.ZP.error(Je.message),ot(Re))}).catch(function(Je){K.ZP.error(Je.toString()),ot(Re)})}),ke.forEach(function(Re){Ws(Re,{assignable_id:Number(c)}).then(function(Je){Je.success&&K.ZP.success(Je.message),Je.success||(K.ZP.error(Je.message),qe(Re))}).catch(function(Je){K.ZP.error(Je.toString()),qe(Re)})}),ae.length!=0&&E&&E(ae),ke.length!=0&&T&&T(ke),re(Te)},[D,c,E,T]);return(0,l.useEffect)(function(){Xe(),we()},[o,c]),(0,l.useEffect)(function(){s&&s(D)},[D,s]),(0,e.jsx)(xt.default,{style:{width:"100%"},value:D,onChange:Le,mode:a?"multiple":void 0,showSearch:!0,placeholder:(0,e.jsx)(n.FormattedMessage,{id:"select_templates",defaultMessage:"Select a templates"}),optionFilterProp:"children",filterOption:function(Te,ae){if(ae&&ae.children){var ke;return(ae==null||(ke=ae.children)===null||ke===void 0?void 0:ke.toString().toLowerCase().indexOf(Te.toLowerCase()))>=0}return!0},notFoundContent:$e?(0,e.jsx)(Ce.Z,{size:"small"}):null,children:d.map(function(he){return(0,e.jsxs)(xt.default.Option,{value:he.id,children:[he.name," ",(0,e.jsxs)("small",{children:[(0,e.jsx)(n.FormattedMessage,{id:he.channel.split("\\").pop()}),":",(0,e.jsx)(n.FormattedMessage,{id:he.event.split("\\").pop()})]})," "]},he.id)})})},$s=Ns,zs=t(34201),ks=function(r){var s=r.id,i=Ee.Z.Text,a=(0,l.useState)([]),o=C()(a,2),c=o[0],E=o[1],T=(0,l.useState)([]),g=C()(T,2),P=g[0],G=g[1],d=(0,l.useMemo)(function(){return P.map(function(j){return c.find(function(A){return A.id===j})}).filter(function(j){return j!==void 0}).filter(function(j){return j&&j.channel==="EscolaLms\\TemplatesPdf\\Core\\PdfChannel"})},[c,P]);return(0,e.jsxs)("div",{children:[(0,e.jsxs)(ye.Z,{align:"middle",children:[(0,e.jsx)(Be.Z,{span:3,children:(0,e.jsx)(i,{children:(0,e.jsx)(n.FormattedMessage,{id:"CertificateTemplates",defaultMessage:"Users"})})}),(0,e.jsx)(Be.Z,{span:12,children:(0,e.jsx)($s,{onTemplates:function(A){return E(A)},assignable_class:"EscolaLms\\Courses\\Models\\Course",assignable_id:Number(s),multiple:!0,onChange:function(A){return G(A)}})})]}),d.map(function(j){return j&&(0,e.jsx)(zs.Z,{template_id:j.id,title:j.name},j.id)})]})},Vs=ks,it=function(b){return b.ATTRIBUTES="attributes",b.PRODUCT="product",b.MEDIA="media",b.USER_SUBMISSION="user_submission",b.CATEGORIES="categories",b.PROGRAM="program",b.SCORM="scorm",b.ACCESS="access",b.CERTIFICATES="certificates",b.QUESTIONNAIRES="questionnaires",b.STATISTICS="statistics",b.USER_PROJECTS="user_projects",b}(it||{}),Gs=function(){var b,r,s,i,a=(0,n.useParams)(),o=(0,n.useIntl)(),c=a.course,E=a.tab,T=E===void 0?it.ATTRIBUTES:E,g=c==="new",P=(0,n.useAccess)(),G=(0,l.useState)(),d=C()(G,2),j=d[0],A=d[1],Y=(0,Is.Z)(),D=Y.manageCourseEdit,re=Y.setManageCourseEdit,ue=Y.validateCourseEdit,ce=(0,l.useState)(null),$e=C()(ce,2),Ae=$e[0],Oe=$e[1],Ke=(0,l.useState)(null),we=C()(Ke,2),Xe=we[0],ot=we[1],qe=(0,l.useState)({showModal:!1,courseId:0}),Le=C()(qe,2),he=Le[0],Te=Le[1],ae=(0,l.useState)(!0),ke=C()(ae,2),Re=ke[0],Je=ke[1],_t=(0,n.getAllLocales)()||[],et=(0,n.useModel)("@@initialState"),ct=et.setInitialState,rt=et.initialState,We=ie.ZP.useForm(),ge=C()(We,1),Qe=ge[0],st=(b=rt==null||(r=rt.config)===null||r===void 0||(r=r.find(function(je){return je.key==="showInCourseAdditionalSettings-public"}))===null||r===void 0?void 0:r.data)!==null&&b!==void 0?b:!1,Ve=(s=rt==null||(i=rt.config)===null||i===void 0||(i=i.filter(function(je){return je.key.includes("hideInCourseTabs")}))===null||i===void 0?void 0:i.reduce(function(je,Ie){var Ne=Ie.key,Ye=Ie.data;return je[Ne.split("-")[1]]=Ye,je},{}))!==null&&s!==void 0?s:{};(0,l.useEffect)(function(){T===it.ATTRIBUTES&&j&&Re&&(ue(j),Je(!1))},[j,T,Re]),(0,l.useEffect)(function(){if(c==="new"){A({title:"new"});return}var je=function(){var Ie=O()(h()().mark(function Ne(){var Ye,pt,lt;return h()().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:return tt.next=2,(0,y.XR)(Number(c));case 2:Ye=tt.sent,Ye.success&&(A(u()(u()({},Ye.data),{},{categories:(pt=Ye.data.categories)===null||pt===void 0?void 0:pt.map(Et.i4),tags:(lt=Ye.data.tags)===null||lt===void 0?void 0:lt.map(Et.ZR),summary:Ye.data.summary||""})),Oe(Ye.data.active_from),ot(Ye.data.active_to));case 4:case"end":return tt.stop()}},Ne)}));return function(){return Ie.apply(this,arguments)}}();je()},[c]);var nt=(0,l.useMemo)(function(){return{onValuesChange:function(Ie){return re(u()(u()({},D),{},{valuesChanged:!0})),Ie.active_from&&Oe(Ie.active_from),Ie.active_to&&ot(Ie.active_to),Ie.title&&A({title:Ie.title})},onFinish:function(){var je=O()(h()().mark(function Ne(Ye){var pt,lt;return h()().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:if(!D.disableEdit){tt.next=3;break}return re({showModal:!0,disableEdit:!0,clicked:!1}),tt.abrupt("return");case 3:if(pt=u()(u()({},Ye),{},{active_from:Ye.active_from||(j==null?void 0:j.active_from)||null,active_to:Ye.active_to||(j==null?void 0:j.active_to)||null,authors:Ye.authors&&Ye.authors.map(function(Pt){return f()(Pt)==="object"?Pt.id:Pt}),scorm_sco_id:Ye.scorm_sco_id?Ye.scorm_sco_id:null,image_url:j&&j.image_url,image_path:j&&j.image_url&&(0,Et.Ox)(j.image_url),video_url:j&&j.video_url,video_path:j&&j.video_url&&(0,Et.Ox)(j.video_url),poster_url:j&&j.poster_url,poster_path:j&&j.poster_url&&(0,Et.Ox)(j.poster_url),hours_to_complete:Ye.hours_to_complete||null}),c!=="new"){tt.next=11;break}return tt.next=7,(0,y.P6)(pt);case 7:lt=tt.sent,lt.success&&lt.data.id&&Te({showModal:!0,courseId:lt.data.id}),tt.next=14;break;case 11:return tt.next=13,(0,y.Hf)(Number(c),pt);case 13:lt=tt.sent;case 14:K.ZP.success(o.formatMessage({id:lt.message})),re(u()(u()({},D),{},{showConfirmModal:!1,loading:!1,valuesChanged:!1}));case 16:case"end":return tt.stop()}},Ne)}));function Ie(Ne){return je.apply(this,arguments)}return Ie}(),initialValues:j,form:Qe}},[c,j,D,Qe]);return j?(0,e.jsxs)(Fs._z,{title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.FormattedMessage,{id:j.title?"course":"new_course"}),", ",(0,e.jsx)(n.FormattedMessage,{id:T})]}),header:{breadcrumb:{routes:[{path:"courses/list",breadcrumbName:o.formatMessage({id:"menu.Courses"})},{path:String(c),breadcrumbName:o.formatMessage({id:"form"})},{path:"/",breadcrumbName:String(j.title)},{path:String(T),breadcrumbName:o.formatMessage({id:T,defaultMessage:String(T)})}]}},children:[(0,e.jsxs)(se.ZP,{bodyStyle:{padding:"24px"},tabs:{type:"card",activeKey:T,onChange:function(Ie){ct(u()(u()({},rt),{},{collapsed:Ie==="program"})),Ie!==it.ATTRIBUTES&&D.valuesChanged?re(u()(u()({},D),{},{showConfirmModal:!0})):n.history.push("/courses/list/".concat(c,"/").concat(Ie))}},children:[(0,e.jsxs)(se.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"attributes"}),children:[D.disableEdit&&(0,e.jsx)(Fe.Z,{closable:!0,style:{marginBottom:"20px"},type:"warning",message:(0,e.jsx)(n.FormattedMessage,{id:"course_edit_warning_message",defaultMessage:"course_edit_warning_message"}),action:(0,e.jsx)(x.ZP,{onClick:function(){return re({showModal:!0,disableEdit:!0,clicked:!0})},type:"primary",children:(0,e.jsx)(n.FormattedMessage,{id:"questionnaire.submit",defaultMessage:"questionnaire.submit"})})}),(0,e.jsx)(pe.Z,{visible:D.showModal,setManage:re}),(0,e.jsx)(Zs,{visible:he.showModal,handleOk:function(){n.history.push("/courses/list/".concat(he.courseId,"/program"))},handleCancel:function(){return n.history.push("/courses/list/".concat(he.courseId,"/attributes"))}}),(0,e.jsxs)(ie.ZP,u()(u()({},nt),{},{children:[(0,e.jsxs)(ie.ZP.Group,{label:(0,e.jsx)(n.FormattedMessage,{id:"description"}),children:[(0,e.jsx)(ft.Z,{width:"xl",name:"title",label:(0,e.jsx)(n.FormattedMessage,{id:"title"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.title"}),placeholder:o.formatMessage({id:"title",defaultMessage:"title"}),required:!0,disabled:D.disableEdit}),(0,e.jsx)(ft.Z,{width:"xl",name:"subtitle",label:(0,e.jsx)(n.FormattedMessage,{id:"subtitle"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.subtitle"}),placeholder:o.formatMessage({id:"subtitle",defaultMessage:"subtitle"}),disabled:D.disableEdit}),(0,e.jsx)(ie.ZP.Item,{name:"summary",label:(0,e.jsx)(n.FormattedMessage,{id:"summary"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.summary"}),valuePropName:"value",style:{width:697},children:(0,e.jsx)(jt.ZP,{directory:"course/".concat(c,"/wysiwyg")})}),(0,e.jsx)(ie.ZP.Item,{name:"description",label:(0,e.jsx)(n.FormattedMessage,{id:"description"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.description"}),valuePropName:"value",style:{width:697},children:(0,e.jsx)(jt.ZP,{directory:"course/".concat(c,"/wysiwyg")})})]}),(0,e.jsxs)(ie.ZP.Group,{label:(0,e.jsx)(n.FormattedMessage,{id:"duration"}),children:[(0,e.jsx)(Zt.Z,{width:"md",name:"active_from",label:(0,e.jsx)(n.FormattedMessage,{id:"active_from"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.active_from"}),placeholder:o.formatMessage({id:"active_from",defaultMessage:"active_from"}),rules:[{validator:function(Ie,Ne){return Ne&&Xe&&(0,Mn.A)(new Date(Ne),new Date(Xe))?Promise.reject(new Error(o.formatMessage({id:"invalidDate"}))):Promise.resolve()}}],disabled:D.disableEdit}),(0,e.jsx)(Zt.Z,{width:"md",name:"active_to",label:(0,e.jsx)(n.FormattedMessage,{id:"active_to"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.active_to"}),placeholder:o.formatMessage({id:"active_to",defaultMessage:"active_to"}),disabled:D.disableEdit||!Ae,rules:[{validator:function(Ie,Ne){return Ne&&Ae&&(0,En.R)(new Date(Ne),new Date(Ae))?Promise.reject(new Error(o.formatMessage({id:"invalidDate"}))):Promise.resolve()}}]}),(0,e.jsx)(ft.Z,{width:"md",name:"duration",label:(0,e.jsx)(n.FormattedMessage,{id:"duration"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.duration"}),placeholder:o.formatMessage({id:"duration",defaultMessage:"duration"}),disabled:D.disableEdit}),(0,e.jsx)(Rt.Z,{width:"md",name:"hours_to_complete",label:(0,e.jsx)(n.FormattedMessage,{id:"hours_to_complete"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"hours_to_complete"}),placeholder:o.formatMessage({id:"hours_to_complete",defaultMessage:"hours_to_complete"}),disabled:D.disableEdit})]}),(0,e.jsxs)(ie.ZP.Group,{label:(0,e.jsx)(n.FormattedMessage,{id:"additional"}),children:[st&&(0,e.jsx)(Tt.Z,{width:"xs",name:"public",label:(0,e.jsx)(n.FormattedMessage,{id:"public_label"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"public_tooltip"}),placeholder:o.formatMessage({id:"public",defaultMessage:"public"})}),(0,e.jsx)(ft.Z,{width:"xs",name:"level",label:(0,e.jsx)(n.FormattedMessage,{id:"level"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.level"}),placeholder:o.formatMessage({id:"level",defaultMessage:"level"})}),(0,e.jsx)(kn.Z,{name:"language",width:"xs",label:(0,e.jsx)(n.FormattedMessage,{id:"language"}),placeholder:o.formatMessage({id:"language",defaultMessage:"language"}),valueEnum:_t.map(function(je){return je.split("-")[0]}).reduce(function(je,Ie){return u()(u()({},je),{},m()({},Ie,Ie))},{}),initialValue:(0,n.getLocale)().split("-")[0],disabled:D.disableEdit}),(0,e.jsx)(kn.Z,{name:"status",width:"md",label:(0,e.jsx)(n.FormattedMessage,{id:"status"}),valueEnum:{draft:o.formatMessage({id:"draft",defaultMessage:"draft"}),published:o.formatMessage({id:"published",defaultMessage:"published"}),archived:o.formatMessage({id:"archived",defaultMessage:"archived"}),published_unactivated:o.formatMessage({id:"published_unactivated",defaultMessage:"published_unactivated"})},initialValue:{draft:o.formatMessage({id:"draft",defaultMessage:"draft"})},placeholder:o.formatMessage({id:"status"}),disabled:D.disableEdit,rules:[{required:!0,message:(0,e.jsx)(n.FormattedMessage,{id:"select"})}]}),(0,e.jsx)(ft.Z,{width:"sm",name:"target_group",label:(0,e.jsx)(n.FormattedMessage,{id:"target_group"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.target_group"}),placeholder:o.formatMessage({id:"target_group",defaultMessage:"target_group"}),disabled:D.disableEdit}),(0,e.jsx)(ie.ZP.Item,{name:"authors",label:(0,e.jsx)(n.FormattedMessage,{id:"author_tutor"}),valuePropName:"value",children:(0,e.jsx)(Ut.Z,{multiple:!0})})]})]}))]},it.ATTRIBUTES),!g&&P.salesPermission&&(0,e.jsx)(se.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"product"}),disabled:D.disableEdit,children:c&&(0,e.jsx)(Lr.C,{productable:{class_type:"App\\Models\\Course",class_id:c,name:String(j.title),quantity:1}})},it.PRODUCT),!g&&(0,e.jsx)(se.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"media"}),disabled:D.disableEdit,children:(0,e.jsx)(ie.ZP,u()(u()({},nt),{},{children:(0,e.jsxs)(ye.Z,{children:[(0,e.jsx)(Be.Z,{children:(0,e.jsx)(Se.Z,{folder:"course/".concat(c),title:"image",action:"/api/admin/courses/".concat(c),src_name:"image_url",form_name:"image",getUploadedSrcField:function(Ie){return Ie.file.response.data.image_url},setPath:function(Ie){return A(function(Ne){return u()(u()({},Ne),Ie)})}})}),(0,e.jsx)(Be.Z,{children:(0,e.jsx)(Fr,{folder:"course/".concat(c),action:"/api/admin/courses/".concat(c),src_name:"video_url",form_name:"video",getUploadedSrcField:function(Ie){return Ie.file.response.data.video_url},setPath:function(Ie){return A(function(Ne){return u()(u()({},Ne),Ie)})}})}),(0,e.jsx)(Be.Z,{children:(0,e.jsx)(Se.Z,{folder:"course/".concat(c),title:"poster",action:"/api/admin/courses/".concat(c),src_name:"poster_url",form_name:"poster",getUploadedSrcField:function(Ie){return Ie.file.response.data.poster_url},setPath:function(Ie){return A(function(Ne){return u()(u()({},Ne),Ie)})}})})]})}))},it.MEDIA),!g&&(0,e.jsx)(se.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"categories_tags"}),disabled:D.disableEdit,children:(0,e.jsx)(ie.ZP,u()(u()({},nt),{},{children:(0,e.jsxs)(ye.Z,{children:[(0,e.jsx)(Be.Z,{span:12,children:(0,e.jsx)(ie.ZP.Item,{label:(0,e.jsx)(n.FormattedMessage,{id:"categories"}),name:"categories",valuePropName:"value",children:(0,e.jsx)(L.Z,{})})}),(0,e.jsx)(Be.Z,{span:12,children:(0,e.jsx)(ie.ZP.Item,{label:(0,e.jsx)(n.FormattedMessage,{id:"tags"}),name:"tags",valuePropName:"value",children:(0,e.jsx)(Os.Z,{})})})]})}))},it.CATEGORIES),!g&&(0,e.jsx)(se.ZP.TabPane,{className:"program",tab:(0,e.jsx)(n.FormattedMessage,{id:"program"}),disabled:D.disableEdit,cardProps:{bodyStyle:{padding:0}},children:c&&(0,e.jsx)(Es,{id:c})},it.PROGRAM),!g&&P.scormListPermission&&(0,e.jsx)(se.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"scorm"}),disabled:D.disableEdit,children:(0,e.jsx)(ie.ZP,u()(u()({},nt),{},{children:(0,e.jsx)(ie.ZP.Item,{label:"Scorm",name:"scorm_sco_id",valuePropName:"value",children:(0,e.jsx)(Zn,{})})}))},it.SCORM),!g&&(0,e.jsx)(se.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"access"}),disabled:D.disableEdit,children:c&&(0,e.jsx)(Us,{id:c})},it.ACCESS),!g&&P.certificatesPermission&&(0,e.jsx)(se.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"certificates"}),disabled:D.disableEdit,children:c&&(0,e.jsx)(Vs,{id:c})},it.CERTIFICATES),!g&&P.questionnaireListPermission&&(0,e.jsx)(se.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"questionnaires"}),disabled:D.disableEdit,children:c&&(0,e.jsx)(w,{modelType:H.COURSE,id:Number(c)})},it.QUESTIONNAIRES),!g&&!Ve.statistics&&(0,e.jsx)(se.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"statistics"}),disabled:D.disableEdit,children:c&&(0,e.jsx)(fe,{courseId:c})},it.STATISTICS),!g&&!Ve.user_submission&&(0,e.jsx)(se.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"user_submission"}),disabled:D.disableEdit,children:c&&(0,e.jsx)(Ds.ZP,{id:Number(c),type:"App\\Models\\Course"})},it.USER_SUBMISSION),!g&&!Ve.user_projects&&(0,e.jsx)(se.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"user_projects"}),children:(0,e.jsx)(As,{courseId:Number(c)})},it.USER_PROJECTS)]}),(0,e.jsx)(Q.Z,{open:!!D.showConfirmModal,onOk:function(){re(u()(u()({},D),{},{loading:!0})),Qe.submit()},onCancel:function(){re(u()(u()({},D),{},{showConfirmModal:!1}))},loading:!!D.loading})]}):(0,e.jsx)(Ce.Z,{})}},62343:function(Ge,be,t){"use strict";var Me=t(52677),m=t.n(Me),ve=t(5574),f=t.n(ve),_e=t(952),h=t(37476),I=t(5966),u=t(52688),z=t(86615),O=t(90672),ne=t(63434),C=t(31199),oe=t(96365),R=t(14726),q=t(75842),J=t(49288),K=t(67294),W=t(43564),l=t(80854),n=t(20568),U=t(19411),e=t(88284),X=t(28508),H=t(55171),N=t.n(H),_=t(85893),w=function(B){var p=B.value,v=B.onChange,Ze=B.type,Ue=Ze===void 0?"file":Ze,me=(0,K.useState)(!1),S=f()(me,2),y=S[0],Z=S[1];return(0,_.jsxs)(K.Fragment,{children:[(0,_.jsxs)(_e.ZP.Group,{children:[(0,_.jsx)(oe.Z,{value:p,readOnly:!0}),(0,_.jsxs)(R.ZP,{size:"small",type:"primary",onClick:function(){return Z(!y)},children:["toggle ",Ue," browser"]})]}),y&&(0,_.jsx)(n.Z,{onFile:function(M,k){return v&&v("".concat(k,"/").concat(M.name))}})]})},L=function(B){var p=(0,l.useIntl)(),v=B.visible,Ze=B.onVisibleChange,Ue=B.onFinish,me=B.id,S=B.initialData,y=B.groups,Z=q.Z.useForm(),x=f()(Z,1),M=x[0],k=!me||me===-1,le=(0,K.useState)("text"),ee=f()(le,2),F=ee[0],$=ee[1],de=(0,K.useCallback)(function(){return!!(M.getFieldValue("group")==="global"||S)},[M,S]),se=(0,K.useState)(""),Ee=f()(se,2),Ce=Ee[0],Fe=Ee[1];(0,K.useEffect)(function(){if(m()(me)==="object"){var V;M.setFieldsValue(me),$((V=me.type)!==null&&V!==void 0?V:"text")}else me&&me!==-1?(0,W.GF)(Number(me)).then(function(ze){ze.success&&(M.setFieldsValue(ze.data),$(ze.data.type),Fe(ze.data.group))}):(M.resetFields(),$("text"))},[me,M,S]);var De=(0,K.useCallback)(function(V){V.type&&V.type!==F&&$(V.type)},[F]);return(0,_.jsxs)(h.Y,{form:M,title:p.formatMessage({id:me?"editSetting":"newSetting",defaultMessage:me?"editSetting":"newSetting"}),width:"60vw",visible:!!v,onVisibleChange:Ze,onFinish:Ue,onValuesChange:De,children:[(0,_.jsxs)(_e.ZP.Group,{children:[S?(0,_.jsx)(I.Z,{label:(0,_.jsx)(l.FormattedMessage,{id:"group",defaultMessage:"group"}),rules:[{required:!0}],width:"md",name:"group",disabled:de()}):(0,_.jsx)(_e.ZP.Item,{label:(0,_.jsx)(l.FormattedMessage,{id:"group",defaultMessage:"group"}),name:"group",children:(0,_.jsx)(J.Z,{style:{width:"300px"},autoFocus:!0,value:Ce,onChange:function(ze){return Fe(ze)},filterOption:function(ze,He){var te;return(He==null||(te=He.children)===null||te===void 0?void 0:te.toString().toLowerCase().indexOf(ze.toLowerCase()))!==-1},children:y.map(function(V){return(0,_.jsx)(J.Z.Option,{value:V,children:V},V)})})}),(0,_.jsx)(I.Z,{label:(0,_.jsx)(l.FormattedMessage,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key",disabled:de()})]}),(0,_.jsxs)(_e.ZP.Group,{children:[(0,_.jsx)(u.Z,{name:"enumerable",disabled:de(),label:(0,_.jsx)(l.FormattedMessage,{id:"enumerable",defaultMessage:"enumerable"})}),(0,_.jsx)(u.Z,{name:"public",disabled:de(),label:(0,_.jsx)(l.FormattedMessage,{id:"public",defaultMessage:"public"})})]}),(0,_.jsx)(_e.ZP.Group,{children:(0,_.jsx)(z.Z.Group,{disabled:!!(!k||S),name:"type",label:(0,_.jsx)(l.FormattedMessage,{id:"type"}),options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"},{label:"json",value:"json"},{label:"file",value:"file"},{label:"image",value:"image"},{label:"boolean",value:"boolean"},{label:"number",value:"number"},{label:"array",value:"array"}]})}),(0,_.jsxs)("div",{children:[F==="text"&&(0,_.jsx)(I.Z,{width:"lg",name:"value",label:(0,_.jsx)(l.FormattedMessage,{id:"value"})}),F==="json"&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(O.Z,{width:"lg",name:"value",label:(0,_.jsx)(l.FormattedMessage,{id:"value"}),tooltip:"".concat(p.formatMessage({id:"example_json"}),': {"name":"John", "age":30, "city":["New York","Warsaw"]}')}),(0,_.jsx)(_e.ZP.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return(0,_.jsx)(N(),{src:JSON.parse(M.getFieldValue("value"))})}catch(ze){return(0,_.jsx)(N(),{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]}),(F==="file"||F==="image")&&(0,_.jsx)(_e.ZP.Item,{name:"value",label:"value",tooltip:"select file from current repository or upload new one",valuePropName:"value",children:(0,_.jsx)(w,{type:F})}),F==="markdown"&&(0,_.jsx)(_e.ZP.Item,{name:"value",label:"value",tooltip:"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.",valuePropName:"value",children:(0,_.jsx)(U.ZP,{directory:"settings/wysiwyg"})}),F==="boolean"?(0,_.jsx)(u.Z,{name:"data",label:(0,_.jsx)(l.FormattedMessage,{id:"value"}),checkedChildren:(0,_.jsx)(e.Z,{}),unCheckedChildren:(0,_.jsx)(X.Z,{})}):(0,_.jsx)(_e.ZP.Item,{noStyle:!0,hidden:!0,children:(0,_.jsx)(ne.Z,{name:"data",valuePropName:"data"})}),F==="number"&&(0,_.jsx)(C.Z,{name:"data",label:(0,_.jsx)(l.FormattedMessage,{id:"value"})}),F==="array"&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(O.Z,{width:"lg",name:"value",label:(0,_.jsx)(l.FormattedMessage,{id:"value"}),tooltip:"".concat(p.formatMessage({id:"example_json"}),": ['tutor', 'student']")}),(0,_.jsx)(_e.ZP.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return(0,_.jsx)(N(),{src:JSON.parse(M.getFieldValue("value"))})}catch(ze){return(0,_.jsx)(N(),{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]})]})]})};be.ZP=L},59234:function(Ge,be,t){"use strict";t.d(be,{Wg:function(){return Ue}});var Me=t(5574),m=t.n(Me),ve=t(19632),f=t.n(ve),_e=t(15009),h=t.n(_e),I=t(97857),u=t.n(I),z=t(99289),O=t.n(z),ne=t(31472),C=t(51042),oe=t(16894),R=t(2453),q=t(83062),J=t(14726),K=t(86738),W=t(67294),l=t(80854),n=t(43564),U=t(56717),e=t(47389),X=t(82061),H=t(62343),N=t(20188),_=t(85893),w=function(){var x=O()(h()().mark(function M(k,le,ee){var F,$;return h()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return F=R.ZP.loading(k.formatMessage({id:"loading"})),se.prev=1,se.next=4,ee&&ee!==-1?(0,n.VP)(ee,u()({},le)):(0,n.oh)(u()({},le));case 4:return $=se.sent,F(),R.ZP.success(k.formatMessage({id:"success"})),se.abrupt("return",{success:!0,updatedSettings:$});case 10:return se.prev=10,se.t0=se.catch(1),F(),R.ZP.error(k.formatMessage({id:"error"})),se.abrupt("return",{success:!1,updateSettings:null});case 15:case"end":return se.stop()}},M,null,[[1,10]])}));return function(k,le,ee){return x.apply(this,arguments)}}(),L=function(){var x=O()(h()().mark(function M(k,le){var ee;return h()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return ee=R.ZP.loading(k.formatMessage({id:"loading"})),$.prev=1,$.next=4,(0,n.Rb)(le);case 4:return ee(),R.ZP.success(k.formatMessage({id:"success"})),$.abrupt("return",!0);case 9:return $.prev=9,$.t0=$.catch(1),ee(),R.ZP.error(k.formatMessage({id:"error"})),$.abrupt("return",!1);case 14:case"end":return $.stop()}},M,null,[[1,9]])}));return function(k,le){return x.apply(this,arguments)}}(),Q=function(M){return M.toLowerCase().replace(/(_\w)/g,function(k){return k.toUpperCase().substr(1)})},B=["statistics","user_submission","user_projects"],p=["public"],v=["email","sms"],Ze=function(M){return"hideInMenu-".concat(Q(M.split("/").join("_")))},Ue=function(M){return"disableTopicType-".concat(M)},me=[].concat(f()(Object.keys(ne.oz).map(function(x){return{key:Ue(x),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),f()(["ECommerce","Certificates"].map(function(x){return{key:"disable-".concat(x),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),f()(p.map(function(x){return{key:"showInCourseAdditionalSettings-".concat(x),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),f()(B.map(function(x){return{key:"hideInCourseTabs-".concat(x),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),f()(v.map(function(x){return{key:"hideTemplateTab-".concat(x),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}}))).reduce(function(x,M,k){return x[M.key]=u()(u()({},M),{},{id:-100*k}),x},{}),S=u()({logo:{id:-1,key:"logo",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"image",data:"EscolaLMS"},frontURL:{id:-2,key:"frontURL",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},maxLessonsNestingInProgram:{id:-4,key:"maxLessonsNestingInProgram",group:"global",value:"0",public:!0,enumerable:!0,sort:1,type:"number",data:0},minTopicNestingInProgram:{id:-5,key:"minTopicNestingInProgram",group:"global",value:"0",public:!0,enumerable:!0,sort:1,type:"number",data:0},companyName:{id:-6,key:"companyName",group:"global",value:"Wellms",public:!0,enumerable:!0,sort:0,type:"text",data:"Wellms"},companyURL:{id:-7,key:"companyURL",group:"global",value:"https://www.wellms.io/",public:!0,enumerable:!0,sort:0,type:"text",data:"https://www.wellms.io/"},logoLogin:{id:-8,key:"logoLogin",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"image",data:"EscolaLMS"},logoFooter:{id:-9,key:"logoFooter",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"image",data:"EscolaLMS"},footerFontColor:{id:-10,key:"footerFontColor",group:"global",value:"#00000072",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},showLoginBackgroundImage:{id:-11,key:"showLoginBackgroundImage",group:"global",value:"true",public:!0,enumerable:!0,sort:0,type:"boolean",data:"EscolaLMS"},loginHeaderBackgroundColor:{id:-12,key:"loginHeaderBackgroundColor",group:"global",value:"#f0f2f5",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},loginHeaderFontColor:{id:-13,key:"loginHeaderFontColor",group:"global",value:"#000000D8",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},loginFormBackgroundColor:{id:-14,key:"loginFormBackgroundColor",group:"global",value:"#f0f2f5",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},contentBackgroundColor:{id:-15,key:"contentBackgroundColor",group:"global",value:"#f0f2f5",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},technicalMaintenance:{id:-16,key:"technicalMaintenance",group:"global",value:"false",public:!0,enumerable:!0,sort:0,type:"boolean",data:"EscolaLMS"},technicalMaintenanceText:{id:-17,key:"technicalMaintenanceText",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"}},me),y=function(M){return typeof M.path=="string"},Z=function(){var M=(0,W.useState)(!1),k=m()(M,2),le=k[0],ee=k[1],F=(0,W.useRef)(),$=(0,l.useIntl)(),de=(0,W.useState)(S),se=m()(de,2),Ee=se[0],Ce=se[1],Fe=(0,l.useModel)("@@initialState"),De=Fe.setInitialState,V=Fe.initialState;(0,W.useEffect)(function(){(0,N.s)().then(function(te){var Pe=Object.values(te.routes).filter(y).filter(function(fe){return fe.path&&fe.path!=="/"&&fe.layout!==!1}).map(function(fe){return{path:fe.path,key:Ze(fe.path),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}});Ce(function(fe){return u()(u()({},fe),Pe)})})},[]),(0,W.useEffect)(function(){F.current&&F.current.reload()},[Ee]);var ze=[{title:(0,_.jsx)(l.FormattedMessage,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0,render:function(Pe,fe){return(0,_.jsx)(W.Fragment,{children:(0,_.jsxs)(q.Z,{title:(0,_.jsx)(l.FormattedMessage,{id:"Settings.tooltip.".concat(fe.key)}),children:[fe.key," ",(0,_.jsx)(U.Z,{})]})})}},{title:(0,_.jsx)(l.FormattedMessage,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:(0,_.jsx)(l.FormattedMessage,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0,render:function(Pe,fe){return fe.value}},{hideInSearch:!0,title:(0,_.jsx)(l.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(Pe,fe){return[fe.id>0?(0,_.jsx)(q.Z,{title:(0,_.jsx)(l.FormattedMessage,{id:"edit",defaultMessage:"edit"}),children:(0,_.jsx)(J.ZP,{type:"primary",icon:(0,_.jsx)(e.Z,{}),onClick:function(){return ee(fe.id)}})},"edit"):(0,_.jsx)(q.Z,{title:(0,_.jsx)(l.FormattedMessage,{id:"create",defaultMessage:"create"}),children:(0,_.jsx)(J.ZP,{type:"primary",icon:(0,_.jsx)(C.Z,{}),onClick:function(){ee(Ee[fe.key]||-1)}})},"create"),(0,_.jsx)(K.Z,{title:(0,_.jsx)(l.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:O()(h()().mark(function pe(){var Se;return h()().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ye.next=2,L($,fe.id);case 2:Se=ye.sent,Se&&(ee(!1),F.current&&F.current.reload());case 4:case"end":return ye.stop()}},pe)})),okText:(0,_.jsx)(l.FormattedMessage,{id:"yes",defaultMessage:"Yes"}),cancelText:(0,_.jsx)(l.FormattedMessage,{id:"no",defaultMessage:"No"}),children:fe.id>0?(0,_.jsx)(q.Z,{title:(0,_.jsx)(l.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,_.jsx)(J.ZP,{type:"primary",icon:(0,_.jsx)(X.Z,{}),danger:!0})}):null},"delete")]}}],He=function(Pe){var fe;if(Pe&&(!(V!=null&&(fe=V.config)!==null&&fe!==void 0&&fe.length)&&Pe&&De(u()(u()({},V),{},{config:[Pe]})),!!(V!=null&&V.config))){var pe=V==null?void 0:V.config.map(function(Se){return Se.key===Pe.key?u()(u()({},Se),Pe):Se});De(u()(u()({},V),{},{config:pe}))}};return(0,_.jsxs)(W.Fragment,{children:[(0,_.jsx)(oe.ZP,{headerTitle:$.formatMessage({id:"menu.settings"}),search:!1,toolBarRender:!1,actionRef:F,rowKey:"id",request:function(Pe){var fe=Pe.pageSize,pe=Pe.current;return(0,n.Xd)({per_page:fe,current:pe,group:"global"}).then(function(Se){if(Se.success){var ie=[].concat(f()(Object.keys(Ee).map(function(ye){return Se.data.find(function(Be){return Be.key===ye})||Ee[ye]})),f()(Se.data.filter(function(ye){return!Object.keys(Ee).includes(ye.key)})));return{data:ie,total:ie.length,success:!0}}return[]})},columns:ze}),(0,_.jsx)(H.ZP,{groups:[],id:le,visible:le,initialData:Ee,onVisibleChange:function(Pe){return!Pe&&ee(!1)},onFinish:function(){var te=O()(h()().mark(function Pe(fe){var pe,Se,ie,ye;return h()().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return pe=fe,pe.type==="number"&&(pe=u()(u()({},pe),{},{value:String(pe.data)})),pe.type==="boolean"&&(pe=u()(u()({},pe),{},{value:pe.data})),pe.type==="array"&&(pe=u()(u()({},pe),{},{value:JSON.parse(pe.value)})),ht.next=6,w($,pe,Number(le));case 6:Se=ht.sent,ie=Se.success,ye=Se.updatedSettings,ie&&(ye!=null&&ye.success&&He(ye.data),ee(!1),F.current&&F.current.reload());case 10:case"end":return ht.stop()}},Pe)}));return function(Pe){return te.apply(this,arguments)}}()})]})};be.ZP=Z},94116:function(Ge,be,t){"use strict";t.d(be,{CL:function(){return u},W3:function(){return C},bd:function(){return O},k4:function(){return R},uu:function(){return W},yr:function(){return J}});var Me=t(15009),m=t.n(Me),ve=t(97857),f=t.n(ve),_e=t(99289),h=t.n(_e),I=t(80854);function u(n){return z.apply(this,arguments)}function z(){return z=h()(m()().mark(function n(U){return m()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.abrupt("return",(0,I.request)("/api/admin/categories/tree",f()({method:"GET",useCache:!1},U||{})));case 1:case"end":return X.stop()}},n)})),z.apply(this,arguments)}function O(n,U){return ne.apply(this,arguments)}function ne(){return ne=h()(m()().mark(function n(U,e){return m()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.abrupt("return",(0,I.request)("/api/admin/categories",f()({method:"GET",useCache:!1,params:U},e||{})));case 1:case"end":return H.stop()}},n)})),ne.apply(this,arguments)}function C(n,U){return oe.apply(this,arguments)}function oe(){return oe=h()(m()().mark(function n(U,e){return m()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.abrupt("return",(0,I.request)("/api/admin/categories/".concat(U),f()({method:"GET",useCache:!1},e||{})));case 1:case"end":return H.stop()}},n)})),oe.apply(this,arguments)}function R(n,U){return q.apply(this,arguments)}function q(){return q=h()(m()().mark(function n(U,e){return m()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.abrupt("return",(0,I.request)("/api/admin/categories",f()({method:"POST",headers:{"Content-Type":"application/json"},data:U},e||{})));case 1:case"end":return H.stop()}},n)})),q.apply(this,arguments)}function J(n,U,e){return K.apply(this,arguments)}function K(){return K=h()(m()().mark(function n(U,e,X){return m()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",(0,I.request)("/api/admin/categories/".concat(U),f()({method:"POST",headers:{"Content-Type":"application/json"},data:e},X||{})));case 1:case"end":return N.stop()}},n)})),K.apply(this,arguments)}function W(n,U,e){return l.apply(this,arguments)}function l(){return l=h()(m()().mark(function n(U,e,X){return m()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",(0,I.request)("/api/admin/categories/".concat(U),f()({method:"DELETE",headers:{"Content-Type":"application/json"},data:e},X||{})));case 1:case"end":return N.stop()}},n)})),l.apply(this,arguments)}},17578:function(Ge,be,t){"use strict";t.d(be,{Od:function(){return q},QZ:function(){return u},ht:function(){return O},pV:function(){return R},ws:function(){return C}});var Me=t(15009),m=t.n(Me),ve=t(97857),f=t.n(ve),_e=t(99289),h=t.n(_e),I=t(80854);function u(K,W){return z.apply(this,arguments)}function z(){return z=h()(m()().mark(function K(W,l){return m()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",(0,I.request)("/api/admin/file/list",f()({method:"GET",params:W},l||{})));case 1:case"end":return U.stop()}},K)})),z.apply(this,arguments)}function O(K,W){return ne.apply(this,arguments)}function ne(){return ne=h()(m()().mark(function K(W,l){return m()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",(0,I.request)("/api/admin/file/find",f()({method:"GET",params:W},l||{})));case 1:case"end":return U.stop()}},K)})),ne.apply(this,arguments)}function C(K,W,l){return oe.apply(this,arguments)}function oe(){return oe=h()(m()().mark(function K(W,l,n){var U;return m()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return U=new FormData,U.append("file[]",W),U.append("target",l),X.abrupt("return",(0,I.request)("/api/admin/file/upload",f()({method:"POST",data:U},n||{})));case 4:case"end":return X.stop()}},K)})),oe.apply(this,arguments)}var R=function(W){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/images/img?path=").concat(W,"&w=").concat(l)};function q(K,W){return J.apply(this,arguments)}function J(){return J=h()(m()().mark(function K(W,l){return m()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",(0,I.request)("/api/admin/file/delete",f()({method:"DELETE",data:{url:W}},l||{})));case 1:case"end":return U.stop()}},K)})),J.apply(this,arguments)}},97704:function(Ge,be,t){"use strict";t.d(be,{Kn:function(){return u},LK:function(){return oe},RN:function(){return C},gq:function(){return W},jc:function(){return J},x0:function(){return R}});var Me=t(15009),m=t.n(Me),ve=t(97857),f=t.n(ve),_e=t(99289),h=t.n(_e),I=t(80854);function u(n,U){return z.apply(this,arguments)}function z(){return z=h()(m()().mark(function n(U,e){return m()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.abrupt("return",(0,I.request)("/api/admin/hh5p/content",f()({method:"GET",params:U},e||{})));case 1:case"end":return H.stop()}},n)})),z.apply(this,arguments)}function O(n,U){return ne.apply(this,arguments)}function ne(){return ne=_asyncToGenerator(_regeneratorRuntime().mark(function n(U,e){return _regeneratorRuntime().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.abrupt("return",request("/api/admin/hh5p/content/".concat(U),_objectSpread({method:"GET"},e||{})));case 1:case"end":return H.stop()}},n)})),ne.apply(this,arguments)}var C=function(U){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en",X=arguments.length>2?arguments[2]:void 0,H=U?"/api/admin/hh5p/editor/".concat(U):"/api/admin/hh5p/editor";return H=e?"".concat(H,"?lang=").concat(e):H,(0,I.request)(H,f()({method:"GET"},X||{}))},oe=function(U){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en",X=arguments.length>2?arguments[2]:void 0,H="/api/admin/hh5p/content/".concat(U);return H=e?"".concat(H,"?lang=").concat(e):H,(0,I.request)(H,f()({method:"GET"},X||{}))};function R(n,U,e){return q.apply(this,arguments)}function q(){return q=h()(m()().mark(function n(U,e,X){return m()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.abrupt("return",(0,I.request)(e?"/api/admin/hh5p/content/".concat(e):"/api/admin/hh5p/content",f()({method:"POST",headers:{"Content-Type":"application/json"},data:U},X||{})));case 1:case"end":return N.stop()}},n)})),q.apply(this,arguments)}function J(n){return K.apply(this,arguments)}function K(){return K=h()(m()().mark(function n(U){return m()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.abrupt("return",(0,I.request)("/api/admin/hh5p/content/".concat(U),{method:"DELETE"}));case 1:case"end":return X.stop()}},n)})),K.apply(this,arguments)}function W(n){return l.apply(this,arguments)}function l(){return l=h()(m()().mark(function n(U){return m()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.abrupt("return",(0,I.request)("/api/admin/hh5p/content?per_page=0",f()({method:"GET"},U||{})));case 1:case"end":return X.stop()}},n)})),l.apply(this,arguments)}},44837:function(Ge,be,t){"use strict";t.d(be,{Ir:function(){return J},RB:function(){return u},fw:function(){return e},nM:function(){return R},nS:function(){return n},q5:function(){return H},rc:function(){return W},ry:function(){return O},wv:function(){return C}});var Me=t(15009),m=t.n(Me),ve=t(97857),f=t.n(ve),_e=t(99289),h=t.n(_e),I=t(80854);function u(_,w){return z.apply(this,arguments)}function z(){return z=h()(m()().mark(function _(w,L){return m()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",(0,I.request)("/api/admin/products",f()({method:"GET",params:f()(f()({},w),{},{free:typeof w.free!="undefined"?w.free==="true"?1:0:void 0,per_page:w.pageSize,page:w.current})},L||{})));case 1:case"end":return B.stop()}},_)})),z.apply(this,arguments)}function O(_,w){return ne.apply(this,arguments)}function ne(){return ne=h()(m()().mark(function _(w,L){return m()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",(0,I.request)("/api/admin/products",f()({method:"POST",data:w},L||{})));case 1:case"end":return B.stop()}},_)})),ne.apply(this,arguments)}function C(_,w){return oe.apply(this,arguments)}function oe(){return oe=h()(m()().mark(function _(w,L){return m()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",(0,I.request)("/api/admin/products/".concat(w),f()({method:"GET"},L||{})));case 1:case"end":return B.stop()}},_)})),oe.apply(this,arguments)}function R(_,w,L){return q.apply(this,arguments)}function q(){return q=h()(m()().mark(function _(w,L,Q){return m()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,I.request)("/api/admin/products/".concat(w,"?_method=PUT"),f()({method:"POST",data:L},Q||{})));case 1:case"end":return p.stop()}},_)})),q.apply(this,arguments)}function J(_,w){return K.apply(this,arguments)}function K(){return K=h()(m()().mark(function _(w,L){return m()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",(0,I.request)("/api/admin/products/".concat(w),f()({method:"DELETE"},L||{})));case 1:case"end":return B.stop()}},_)})),K.apply(this,arguments)}function W(_){return l.apply(this,arguments)}function l(){return l=h()(m()().mark(function _(w){return m()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.abrupt("return",(0,I.request)("/api/admin/productables",f()({method:"GET"},w||{})));case 1:case"end":return Q.stop()}},_)})),l.apply(this,arguments)}function n(_,w){return U.apply(this,arguments)}function U(){return U=h()(m()().mark(function _(w,L){return m()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",(0,I.request)("/api/admin/productables/product",f()({method:"GET",params:w},L||{})));case 1:case"end":return B.stop()}},_)})),U.apply(this,arguments)}function e(_,w,L){return X.apply(this,arguments)}function X(){return X=h()(m()().mark(function _(w,L,Q){return m()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,I.request)("/api/admin/products/".concat(w,"/attach"),f()({method:"POST",data:L},Q||{})));case 1:case"end":return p.stop()}},_)})),X.apply(this,arguments)}function H(_,w,L){return N.apply(this,arguments)}function N(){return N=h()(m()().mark(function _(w,L,Q){return m()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,I.request)("/api/admin/products/".concat(w,"/detach"),f()({method:"POST",data:L},Q||{})));case 1:case"end":return p.stop()}},_)})),N.apply(this,arguments)}},76841:function(Ge,be,t){"use strict";t.d(be,{Gm:function(){return u},Sx:function(){return C},_g:function(){return O}});var Me=t(15009),m=t.n(Me),ve=t(97857),f=t.n(ve),_e=t(99289),h=t.n(_e),I=t(80854);function u(R,q){return z.apply(this,arguments)}function z(){return z=h()(m()().mark(function R(q,J){return m()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.abrupt("return",(0,I.request)("/api/admin/reports/report",f()({params:q,method:"GET",useCache:!1},J||{})));case 1:case"end":return W.stop()}},R)})),z.apply(this,arguments)}function O(R,q,J){return ne.apply(this,arguments)}function ne(){return ne=h()(m()().mark(function R(q,J,K){return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,I.request)("/api/admin/stats/course/".concat(q,"/export"),f()({params:J,method:"GET",useCache:!1,responseType:"blob",headers:{accept:"application/vnd.ms-excel"}},K||{})));case 1:case"end":return l.stop()}},R)})),ne.apply(this,arguments)}function C(R,q,J){return oe.apply(this,arguments)}function oe(){return oe=h()(m()().mark(function R(q,J,K){return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,I.request)("/api/admin/stats/topic/".concat(q,"/export"),f()({method:"GET",useCache:!1,params:{stat:J},responseType:"blob",headers:{accept:"application/vnd.ms-excel"}},K||{})));case 1:case"end":return l.stop()}},R)})),oe.apply(this,arguments)}},9649:function(Ge,be,t){"use strict";t.d(be,{JZ:function(){return u},NK:function(){return C}});var Me=t(15009),m=t.n(Me),ve=t(97857),f=t.n(ve),_e=t(99289),h=t.n(_e),I=t(80854);function u(R,q){return z.apply(this,arguments)}function z(){return z=h()(m()().mark(function R(q,J){return m()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.abrupt("return",(0,I.request)("/api/admin/scorm",f()({params:q,method:"GET",useCache:!1},J||{})));case 1:case"end":return W.stop()}},R)})),z.apply(this,arguments)}function O(R,q){return ne.apply(this,arguments)}function ne(){return ne=_asyncToGenerator(_regeneratorRuntime().mark(function R(q,J){return _regeneratorRuntime().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.abrupt("return",request("/api/admin/scorm/scos",_objectSpread({params:_objectSpread(_objectSpread({},q),{},{per_page:q.pageSize,page:q.current}),method:"GET",useCache:!1},J||{})));case 1:case"end":return W.stop()}},R)})),ne.apply(this,arguments)}function C(R,q){return oe.apply(this,arguments)}function oe(){return oe=h()(m()().mark(function R(q,J){return m()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.abrupt("return",(0,I.request)("/api/admin/scorm/".concat(q),f()({method:"DELETE"},J||{})));case 1:case"end":return W.stop()}},R)})),oe.apply(this,arguments)}},30869:function(Ge,be,t){"use strict";t.d(be,{EA:function(){return O},Je:function(){return J},LS:function(){return Ue},N5:function(){return C},Nq:function(){return W},VB:function(){return B},WC:function(){return H},ck:function(){return R},h8:function(){return e},m9:function(){return L},nS:function(){return _},r4:function(){return n},rC:function(){return u},yi:function(){return v}});var Me=t(15009),m=t.n(Me),ve=t(97857),f=t.n(ve),_e=t(99289),h=t.n(_e),I=t(80854);function u(S,y){return z.apply(this,arguments)}function z(){return z=h()(m()().mark(function S(y,Z){return m()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,I.request)("/api/admin/users",f()({params:y,method:"GET",useCache:!1},Z||{})));case 1:case"end":return M.stop()}},S)})),z.apply(this,arguments)}function O(S,y,Z){return ne.apply(this,arguments)}function ne(){return ne=h()(m()().mark(function S(y,Z,x){return m()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",(0,I.request)("/api/admin/users/".concat(y),f()({method:"GET",useCache:x!==void 0?x:!0},Z||{})));case 1:case"end":return k.stop()}},S)})),ne.apply(this,arguments)}function C(S){return oe.apply(this,arguments)}function oe(){return oe=h()(m()().mark(function S(y){return m()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",(0,I.request)("/api/profile/me",f()({method:"GET",useCache:!1},y||{})));case 1:case"end":return x.stop()}},S)})),oe.apply(this,arguments)}function R(S,y){return q.apply(this,arguments)}function q(){return q=h()(m()().mark(function S(y,Z){return m()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,I.request)("/api/profile/me",f()({data:y,method:"PUT"},Z||{})));case 1:case"end":return M.stop()}},S)})),q.apply(this,arguments)}function J(S,y){return K.apply(this,arguments)}function K(){return K=h()(m()().mark(function S(y,Z){return m()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,I.request)("/api/profile/password",f()({data:y,method:"PUT"},Z||{})));case 1:case"end":return M.stop()}},S)})),K.apply(this,arguments)}function W(S,y,Z){return l.apply(this,arguments)}function l(){return l=h()(m()().mark(function S(y,Z,x){return m()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",(0,I.request)("/api/admin/users/".concat(y),f()({data:Z,method:"PUT"},x||{})));case 1:case"end":return k.stop()}},S)})),l.apply(this,arguments)}function n(S,y){return U.apply(this,arguments)}function U(){return U=h()(m()().mark(function S(y,Z){return m()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,I.request)("/api/admin/users",f()({data:y,method:"POST"},Z||{})));case 1:case"end":return M.stop()}},S)})),U.apply(this,arguments)}function e(S,y){return X.apply(this,arguments)}function X(){return X=h()(m()().mark(function S(y,Z){return m()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,I.request)("/api/admin/users/".concat(y),f()({method:"DELETE"},Z||{})));case 1:case"end":return M.stop()}},S)})),X.apply(this,arguments)}function H(S,y,Z){return N.apply(this,arguments)}function N(){return N=h()(m()().mark(function S(y,Z,x){return m()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",(0,I.request)("/api/auth/email/resend",f()({method:"POST",data:{email:y,return_url:Z}},x||{})));case 1:case"end":return k.stop()}},S)})),N.apply(this,arguments)}function _(S,y){return w.apply(this,arguments)}function w(){return w=h()(m()().mark(function S(y,Z){return m()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,I.request)("/api/admin/users/".concat(y,"/settings"),f()({method:"GET",useCache:!1},Z||{})));case 1:case"end":return M.stop()}},S)})),w.apply(this,arguments)}function L(S,y,Z,x){return Q.apply(this,arguments)}function Q(){return Q=h()(m()().mark(function S(y,Z,x,M){return m()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.abrupt("return",(0,I.request)("/api/admin/users/".concat(y,"/settings"),f()({method:Z,data:{settings:[x]},useCache:!1},M||{})));case 1:case"end":return le.stop()}},S)})),Q.apply(this,arguments)}function B(S,y){return p.apply(this,arguments)}function p(){return p=h()(m()().mark(function S(y,Z){return m()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,I.request)("/api/admin/users/".concat(y,"/avatar"),f()({method:"DELETE"},Z||{})));case 1:case"end":return M.stop()}},S)})),p.apply(this,arguments)}function v(S,y,Z){return Ze.apply(this,arguments)}function Ze(){return Ze=h()(m()().mark(function S(y,Z,x){return m()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.abrupt("return",(0,I.request)("/api/admin/users/".concat(y,"/interests"),f()({data:Z,method:"PUT"},x||{})));case 1:case"end":return k.stop()}},S)})),Ze.apply(this,arguments)}function Ue(S,y){return me.apply(this,arguments)}function me(){return me=h()(m()().mark(function S(y,Z){return m()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",(0,I.request)("/api/admin/stats/date-range",f()({params:y,method:"GET"},Z||{})));case 1:case"end":return M.stop()}},S)})),me.apply(this,arguments)}},93414:function(){},70172:function(){},2001:function(){},33779:function(){},66558:function(){},82258:function(){}}]);
