(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"8j+T":function(P,d,r){"use strict";function s(E){for(var g in E)d.hasOwnProperty(g)||(d[g]=E[g])}Object.defineProperty(d,"__esModule",{value:!0}),s(r("Xljc"))},Xljc:function(P,d,r){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var s=function(){function t(){}return t.EOL=`\r
`,t.BOM="\uFEFF",t.DEFAULT_FIELD_SEPARATOR=",",t.DEFAULT_DECIMAL_SEPARATOR=".",t.DEFAULT_QUOTE='"',t.DEFAULT_SHOW_TITLE=!1,t.DEFAULT_TITLE="My Generated Report",t.DEFAULT_FILENAME="generated",t.DEFAULT_SHOW_LABELS=!1,t.DEFAULT_USE_TEXT_FILE=!1,t.DEFAULT_USE_BOM=!0,t.DEFAULT_HEADER=[],t.DEFAULT_KEYS_AS_HEADERS=!1,t}();d.CsvConfigConsts=s,d.ConfigDefaults={filename:s.DEFAULT_FILENAME,fieldSeparator:s.DEFAULT_FIELD_SEPARATOR,quoteStrings:s.DEFAULT_QUOTE,decimalSeparator:s.DEFAULT_DECIMAL_SEPARATOR,showLabels:s.DEFAULT_SHOW_LABELS,showTitle:s.DEFAULT_SHOW_TITLE,title:s.DEFAULT_TITLE,useTextFile:s.DEFAULT_USE_TEXT_FILE,useBom:s.DEFAULT_USE_BOM,headers:s.DEFAULT_HEADER,useKeysAsHeaders:s.DEFAULT_KEYS_AS_HEADERS};var E=function(){function t(e){this._csv="";var o=e||{};this._options=S({},d.ConfigDefaults,o),this._options.useKeysAsHeaders&&this._options.headers&&this._options.headers.length>0&&console.warn("Option to use object keys as headers was set, but headers were still passed!")}return Object.defineProperty(t.prototype,"options",{get:function(){return this._options},set:function(o){this._options=S({},d.ConfigDefaults,o)},enumerable:!0,configurable:!0}),t.prototype.generateCsv=function(e,o){if(o===void 0&&(o=!1),this._csv="",this._parseData(e),this._options.useBom&&(this._csv+=s.BOM),this._options.showTitle&&(this._csv+=this._options.title+`\r

`),this._getHeaders(),this._getBody(),this._csv==""){console.log("Invalid data");return}if(o)return this._csv;var a=this._options.useTextFile?"plain":"csv",c=this._options.useTextFile?".txt":".csv",h=new Blob([this._csv],{type:"text/"+a+";charset=utf8;"});if(navigator.msSaveBlob){var T=this._options.filename.replace(/ /g,"_")+c;navigator.msSaveBlob(h,T)}else{var b=this._options.useTextFile?"text":"csv",O="data:attachment/"+b+";charset=utf-8,"+encodeURI(this._csv),j=document.createElement("a");j.href=URL.createObjectURL(h),j.setAttribute("visibility","hidden"),j.download=this._options.filename.replace(/ /g,"_")+c,document.body.appendChild(j),j.click(),document.body.removeChild(j)}},t.prototype._getHeaders=function(){if(!(!this._options.showLabels&&!this._options.useKeysAsHeaders)){var e=this._options.useKeysAsHeaders,o=e?Object.keys(this._data[0]):this._options.headers;if(o.length>0){for(var a="",c=0;c<o.length;c++)a+=o[c]+this._options.fieldSeparator;a=a.slice(0,-1),this._csv+=a+s.EOL}}},t.prototype._getBody=function(){for(var e=Object.keys(this._data[0]),o=0;o<this._data.length;o++){for(var a="",c=0;c<e.length;c++){var h=e[c];a+=this._formatData(this._data[o][h])+this._options.fieldSeparator}a=a.slice(0,-1),this._csv+=a+s.EOL}},t.prototype._formatData=function(e){return this._options.decimalSeparator==="locale"&&this._isFloat(e)?e.toLocaleString():this._options.decimalSeparator!=="."&&this._isFloat(e)?e.toString().replace(".",this._options.decimalSeparator):typeof e=="string"?(e=e.replace(/"/g,'""'),(this._options.quoteStrings||e.indexOf(",")>-1||e.indexOf(`
`)>-1||e.indexOf("\r")>-1)&&(e=this._options.quoteStrings+e+this._options.quoteStrings),e):typeof e=="boolean"?e?"TRUE":"FALSE":e},t.prototype._isFloat=function(e){return+e===e&&(!isFinite(e)||Boolean(e%1))},t.prototype._parseData=function(e){return this._data=typeof e!="object"?JSON.parse(e):e,this._data},t}();d.ExportToCsv=E;var g=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;function x(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function S(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];for(var a,c=x(t),h,T=1;T<arguments.length;T++){a=Object(arguments[T]);for(var b in a)g.call(a,b)&&(c[b]=a[b]);if(Object.getOwnPropertySymbols){h=Object.getOwnPropertySymbols(a);for(var O=0;O<h.length;O++)I.call(a,h[O])&&(c[h[O]]=a[h[O]])}}return c}},dgLD:function(P,d,r){"use strict";r.r(d);var s=r("q1tI"),E=r.n(s),g=r("tMyG"),I=r("fOrg"),x=r("+KLJ"),S=r("k1fw"),t=r("T2oS"),e=r("W9HT"),o=r("+L6B"),a=r("2/Rp"),c=r("tJVT"),h=r("ma/q"),T=r("ZIEt"),b=r("sy9F"),O=r("GzfL"),j=r("AEj8"),H=function(n,p){var l={};for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&p.indexOf(u)<0&&(l[u]=n[u]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,u=Object.getOwnPropertySymbols(n);f<u.length;f++)p.indexOf(u[f])<0&&Object.prototype.propertyIsEnumerable.call(n,u[f])&&(l[u[f]]=n[u[f]]);return l},K=Object(s.forwardRef)(function(n,p){var l=n.chartRef,u=n.style,f=u===void 0?{height:"inherit"}:u,v=n.className,L=n.loading,U=n.loadingTemplate,R=n.errorTemplate,m=H(n,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),C=Object(T.a)(h.Pie,m),M=C.chart,_=C.container;return Object(s.useEffect)(function(){Object(b.a)(l,M.current)},[M.current]),Object(s.useImperativeHandle)(p,function(){return{getChart:function(){return M.current}}}),E.a.createElement(O.a,{errorTemplate:R},L&&E.a.createElement(j.a,{loadingTemplate:U,theme:n.theme}),E.a.createElement("div",{className:v,style:f,ref:_}))}),w=K,B=r("qLMh"),N=r("9og8"),A=r("9kvl");function G(n,p){return D.apply(this,arguments)}function D(){return D=Object(N.a)(Object(B.a)().mark(function n(p,l){return Object(B.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",Object(A.f)("/api/admin/reports/report",Object(S.a)({params:p,method:"GET",useCache:!1},l||{})));case 1:case"end":return f.stop()}},n)})),D.apply(this,arguments)}var y=r("nhC9"),J=r("Mo4S"),W=r("8j+T"),i=r("nKUr"),X={appendPadding:10,angleField:"value",colorField:"label",radius:.9,label:{type:"inner",offset:"-30%",content:function(p){var l=p.percent;return l>=.01?"".concat((l*100).toFixed(0),"%"):""},style:{fontSize:14,textAlign:"center"}},interactions:[{type:"element-active"}]},z=function(p){var l=p.metric,u=Object(s.useState)({mode:"init"}),f=Object(c.a)(u,2),v=f[0],L=f[1],U=Object(A.g)();Object(s.useEffect)(function(){L({mode:"loading"}),G({metric:l}).then(function(m){m.success?L({mode:"loaded",value:m.data}):L({mode:"error",error:m.message})}).catch(function(m){return L({mode:"error",error:m.toString()})})},[l]);var R=Object(s.useCallback)(function(){if(v.mode==="loaded"){var m={filename:l.split("\\").join("-"),fieldSeparator:",",quoteStrings:'"',decimalSeparator:".",showLabels:!0,showTitle:!0,title:U.formatMessage({id:l.split("\\").pop()}),useTextFile:!1,useBom:!0,useKeysAsHeaders:!0},C=new W.ExportToCsv(m);C.generateCsv(v.value)}},[v]);return Object(i.jsxs)(y.a,{title:Object(i.jsx)(A.a,{id:l.split("\\").pop(),defaultMessage:l.split("\\").pop()}),extra:Object(i.jsxs)(a.a,{icon:Object(i.jsx)(J.a,{}),size:"small",onClick:function(){return R()},children:[" ",Object(i.jsx)(A.a,{id:"download"}),"\xA0","CSV"]}),headerBordered:!0,children:[v.mode==="loading"&&Object(i.jsx)(e.a,{}),v.mode==="loaded"&&Object(i.jsx)("div",{children:Object(i.jsx)(w,Object(S.a)(Object(S.a)({},X),{},{data:v.value}))}),v.mode==="error"&&Object(i.jsx)(x.a,{message:v.error,type:"error"})]})},F=z,Q=d.default=function(){return Object(i.jsxs)(g.a,{children:[Object(i.jsxs)(y.a,{split:"vertical",children:[Object(i.jsx)(y.a,{colSpan:12,layout:"center",children:Object(i.jsx)(F,{metric:"EscolaLms\\Reports\\Metrics\\CoursesMoneySpentMetric"})}),Object(i.jsx)(y.a,{colSpan:12,layout:"center",children:Object(i.jsx)(F,{metric:"EscolaLms\\Reports\\Metrics\\CoursesPopularityMetric"})})]}),Object(i.jsxs)(y.a,{split:"vertical",children:[Object(i.jsx)(y.a,{colSpan:12,layout:"center",children:Object(i.jsx)(F,{metric:"EscolaLms\\Reports\\Metrics\\CoursesSecondsSpentMetric"})}),Object(i.jsx)(y.a,{colSpan:12,layout:"center",children:Object(i.jsx)(F,{metric:"EscolaLms\\Reports\\Metrics\\TutorsPopularityMetric"})})]})]})}}}]);
