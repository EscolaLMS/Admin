(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{BBow:function(N,C,e){"use strict";e.d(C,"a",function(){return T});var T=function(F){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"-",c=F.toString().toLowerCase().trim(),O=[{to:"a",from:"[\xC0\xC1\xC2\xC3\xC5\xC6\u0100\u0102\u0104\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6]"},{to:"ae",from:"[\xC4]"},{to:"c",from:"[\xC7\u0106\u0108\u010C]"},{to:"d",from:"[\xD0\u010E\u0110\xDE]"},{to:"e",from:"[\xC8\xC9\xCA\xCB\u0112\u0114\u0116\u0118\u011A\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6]"},{to:"g",from:"[\u011C\u011E\u0122\u01F4]"},{to:"h",from:"[\u0124\u1E26]"},{to:"i",from:"[\xCC\xCD\xCE\xCF\u0128\u012A\u012E\u0130\u1EC8\u1ECA]"},{to:"j",from:"[\u0134]"},{to:"ij",from:"[\u0132]"},{to:"k",from:"[\u0136]"},{to:"l",from:"[\u0139\u013B\u013D\u0141]"},{to:"m",from:"[\u1E3E]"},{to:"n",from:"[\xD1\u0143\u0145\u0147]"},{to:"o",from:"[\xD2\xD3\xD4\xD5\xD8\u014C\u014E\u0150\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u01EA\u01EC\u01A0]"},{to:"oe",from:"[\u0152\xD6]"},{to:"p",from:"[\u1E55]"},{to:"r",from:"[\u0154\u0156\u0158]"},{to:"s",from:"[\u015A\u015C\u015E\u0160]"},{to:"ss",from:"[\xDF]"},{to:"t",from:"[\u0162\u0164]"},{to:"u",from:"[\xD9\xDA\xDB\u0168\u016A\u016C\u016E\u0170\u0172\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u01AF]"},{to:"ue",from:"[\xDC]"},{to:"w",from:"[\u1E82\u0174\u1E80\u1E84]"},{to:"x",from:"[\u1E8D]"},{to:"y",from:"[\xDD\u0176\u0178\u1EF2\u1EF4\u1EF6\u1EF8]"},{to:"z",from:"[\u0179\u017B\u017D]"},{to:"-",from:"[\xB7/_,:;']"}];return O.forEach(function(x){c=c.replace(new RegExp(x.from,"gi"),x.to)}),c=c.toString().toLowerCase().replace(/\s+/g,"-").replace(/&/g,"-and-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),typeof l!="undefined"&&l!=="-"&&(c=c.replace(/-/g,l)),c}},CEpB:function(N,C,e){"use strict";var T=e("nRaC"),E=e("5RzL"),F=e("tJVT"),l=e("q1tI"),c=e.n(l),O=e("JifO"),x=e("9kvl"),g=e("nKUr"),h=e.n(g),P=function v(a){return a.subcategories&&a.subcategories.length?{title:a.name,value:a.id,children:a.subcategories.map(function(M){return v(M)})}:{title:a.name,value:a.id}},I=function(a){var M=a.value,d=a.onChange,B=a.multiple,y=B===void 0?!1:B,z=Object(l.useState)([]),r=Object(F.a)(z,2),U=r[0],$=r[1];Object(l.useEffect)(function(){Object(O.c)().then(function(J){return $(J.data)})},[]);var A=Object(l.useMemo)(function(){return U.map(function(J){return P(J)})},[U]);return Object(g.jsx)(E.a,{loading:U.length===0,multiple:y,showSearch:!0,style:{width:"100%",minWidth:"310px"},value:M,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:Object(g.jsx)(x.a,{id:"select",defaultMessage:"Please select"}),allowClear:!0,treeDefaultExpandAll:!0,onChange:d,treeData:A,disabled:U.length===0})};C.a=I},"F/zT":function(N,C,e){"use strict";var T=e("wx14"),E=e("VTBJ"),F=e("Ff2n"),l=e("q1tI"),c=e.n(l),O=e("adzw"),x=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],g=c.a.forwardRef(function(h,P){var I=h.fieldProps,v=h.unCheckedChildren,a=h.checkedChildren,M=h.proFieldProps,d=Object(F.a)(h,x);return c.a.createElement(O.a,Object(T.a)({valueType:"switch",mode:"edit",fieldProps:Object(E.a)({unCheckedChildren:v,checkedChildren:a},I),ref:P,valuePropName:"checked",proFieldProps:M,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},d))});C.a=g},N0Of:function(N,C,e){"use strict";e.r(C);var T=e("P2fV"),E=e("NJEC"),F=e("5Dmo"),l=e("3S7+"),c=e("+L6B"),O=e("2/Rp"),x=e("+BJd"),g=e("mr32"),h=e("tJVT"),P=e("k1fw"),I=e("miYZ"),v=e("tsqr"),a=e("9og8"),M=e("WmNS"),d=e.n(M),B=e("xvlK"),y=e("q1tI"),z=e.n(y),r=e("9kvl"),U=e("tMyG"),$=e("Qiat"),A=e("JifO"),J=e("y8nQ"),Z=e("Vl3Y"),X=e("rmhi"),H=e("Qurx"),_=e("F/zT"),k=e("VMEa"),q=e("BBow"),ee=e("CEpB"),te=e("Gn8c"),t=e("nKUr"),ae=function(p){var f=Object(r.i)(),b=Object(y.useState)(!1),o=Object(h.a)(b,2),S=o[0],i=o[1],u=p.visible,Q=p.onVisibleChange,R=p.onFinish,m=p.id,G=Z.a.useForm(),Y=Object(h.a)(G,1),j=Y[0];return Object(y.useEffect)(function(){i(!1),typeof m=="number"&&m>0?Object(A.b)(m).then(function(n){j.setFieldsValue(n.data)}):j.resetFields()},[m,j]),Object(t.jsxs)(X.a,{form:j,title:f.formatMessage({id:typeof m=="number"&&m>0?"editCategory":"newCategory",defaultMessage:typeof m=="number"&&m>0?"editCategory":"newCategory"}),width:"400px",visible:u,onVisibleChange:Q,onFinish:function(s){return R(S?Object(P.a)(Object(P.a)({},s),{},{icon_path:null}):Object(P.a)({},s))},onValuesChange:function(s){s.name&&j.setFieldsValue({slug:Object(q.a)(s.name)})},children:[Object(t.jsx)(H.a,{label:Object(t.jsx)(r.a,{id:"name",defaultMessage:"name"}),rules:[{required:!0}],width:"md",name:"name"}),Object(t.jsx)(H.a,{width:"md",name:"slug",label:Object(t.jsx)(r.a,{id:"slug"}),placeholder:f.formatMessage({id:"slug"}),disabled:!0,required:!0}),Object(t.jsx)(_.a,{name:"is_active",label:Object(t.jsx)(r.a,{id:"is_active",defaultMessage:"is_active"})}),Object(t.jsx)(k.a.Item,{name:"parent_id",label:Object(t.jsx)(r.a,{id:"parent_category",defaultMessage:"parent_category"}),valuePropName:"value",children:Object(t.jsx)(ee.a,{})}),m&&Object(t.jsx)(te.a,{folder:"categories/".concat(m),wrapInForm:!1,title:"icon",action:"/api/admin/categories/".concat(m),src_name:"icon",form_name:"icon",getUploadedSrcField:function(s){return s.file.response.data.icon},setPath:function(s){s.icon_path===""&&i(!0)}})]})},re=ae,ne=e("G3dp"),w=e("/MfK"),se=function(){var K=Object(a.a)(d.a.mark(function p(f,b,o){var S;return d.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return S=v.default.loading(f.formatMessage({id:"loading"})),u.prev=1,u.next=4,o&&o!==-1?Object(A.f)(o,Object(P.a)({},b)):Object(A.d)(Object(P.a)({},b));case 4:return S(),v.default.success(f.formatMessage({id:"success"})),u.abrupt("return",!0);case 9:return u.prev=9,u.t0=u.catch(1),S(),v.default.error(v.default.success(f.formatMessage({id:"error"}))),u.abrupt("return",!1);case 14:case"end":return u.stop()}},p,null,[[1,9]])}));return function(f,b,o){return K.apply(this,arguments)}}(),oe=function(){var K=Object(a.a)(d.a.mark(function p(f,b){var o;return d.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return o=v.default.loading(f.formatMessage({id:"loading"})),i.prev=1,i.next=4,Object(A.e)(b);case 4:return o(),v.default.success(f.formatMessage({id:"success"})),i.abrupt("return",!0);case 9:return i.prev=9,i.t0=i.catch(1),o(),v.default.error(f.formatMessage({id:"error"})),i.abrupt("return",!1);case 14:case"end":return i.stop()}},p,null,[[1,9]])}));return function(f,b){return K.apply(this,arguments)}}(),le=function(){var p=Object(y.useState)(!1),f=Object(h.a)(p,2),b=f[0],o=f[1],S=Object(y.useState)([]),i=Object(h.a)(S,2),u=i[0],Q=i[1],R=Object(y.useRef)(),m=Object(r.i)(),G=Object(y.useCallback)(function(j){return!!u.some(function(n){return n.parent_id===j})},[u]),Y=[{title:Object(t.jsx)(r.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0},{title:Object(t.jsx)(r.a,{id:"name",defaultMessage:"name"}),dataIndex:"name",hideInSearch:!0},{title:Object(t.jsx)(r.a,{id:"full_name",defaultMessage:"full_name"}),dataIndex:"name_with_breadcrumbs",hideInSearch:!0},{title:Object(t.jsx)(r.a,{id:"slug",defaultMessage:"slug"}),dataIndex:"slug",hideInSearch:!0},{title:Object(t.jsx)(r.a,{id:"pages.searchTable.titleStatus",defaultMessage:"\u72B6\u6001"}),dataIndex:"is_active",hideInForm:!0,hideInSearch:!0,render:function(n,s){return s.is_active?Object(t.jsx)(g.a,{color:"success",children:Object(t.jsx)(r.a,{id:"Active",defaultMessage:"Active"})}):Object(t.jsx)(g.a,{color:"error",children:Object(t.jsx)(r.a,{id:"Inactive",defaultMessage:"Inactive"})})}},{hideInSearch:!0,title:Object(t.jsx)(r.a,{id:"parent_id",defaultMessage:"parent_id"}),dataIndex:"parent_id",tip:"name key",render:function(n,s){var D=u.find(function(L){return L.id===s.parent_id});return D?Object(t.jsx)(O.a,{size:"small",onClick:function(){return o(D.id)},children:D.name}):Object(t.jsx)(z.a.Fragment,{children:Object(t.jsx)(r.a,{id:"none"})})}},{hideInSearch:!0,title:Object(t.jsx)(r.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(n,s){return[Object(t.jsx)(l.a,{title:Object(t.jsx)(r.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(O.a,{type:"primary",icon:Object(t.jsx)(ne.a,{}),onClick:function(){return o(s.id)}})},"edit"),G(s.id)?Object(t.jsx)(l.a,{title:Object(t.jsx)(r.a,{id:"cantDelete",defaultMessage:"You can't delete this category because it's parent to others"}),children:Object(t.jsx)(O.a,{disabled:!0,type:"primary",icon:Object(t.jsx)(w.a,{}),danger:!0})},"delete"):Object(t.jsx)(E.a,{title:Object(t.jsx)(r.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(a.a)(d.a.mark(function D(){var L;return d.a.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,oe(m,s.id);case 2:L=V.sent,L&&(o(!1),R.current&&R.current.reload());case 4:case"end":return V.stop()}},D)})),okText:Object(t.jsx)(r.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(r.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(l.a,{title:Object(t.jsx)(r.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(O.a,{type:"primary",icon:Object(t.jsx)(w.a,{}),danger:!0})})},"delete")]}}];return Object(t.jsxs)(U.a,{children:[Object(t.jsx)($.a,{headerTitle:m.formatMessage({id:"categories",defaultMessage:"categories"}),actionRef:R,rowKey:"id",search:{},toolBarRender:function(){return[Object(t.jsxs)(O.a,{type:"primary",onClick:function(){o(-1)},children:[Object(t.jsx)(B.a,{})," ",Object(t.jsx)(r.a,{id:"pages.searchTable.new",defaultMessage:"\u65B0\u5EFA"})]},"primary")]},request:function(){return Object(A.a)().then(function(n){return Q(n.data),n})},columns:Y,pagination:{pageSize:100}}),Object(t.jsx)(re,{id:b,visible:Number.isInteger(b),onVisibleChange:function(n){return n===!1&&o(!1)},onFinish:function(){var j=Object(a.a)(d.a.mark(function n(s){var D;return d.a.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,se(m,s,Number(b));case 2:D=W.sent,D&&(o(!1),R.current&&R.current.reload());case 4:case"end":return W.stop()}},n)}));return function(n){return j.apply(this,arguments)}}()})]})},ie=C.default=le},Qurx:function(N,C,e){"use strict";var T=e("wx14"),E=e("Ff2n"),F=e("q1tI"),l=e.n(F),c=e("adzw"),O=["fieldProps","proFieldProps"],x=["fieldProps","proFieldProps"],g="text",h=function(a){var M=a.fieldProps,d=a.proFieldProps,B=Object(E.a)(a,O);return l.a.createElement(c.a,Object(T.a)({mode:"edit",valueType:g,fieldProps:M,filedConfig:{valueType:g},proFieldProps:d},B))},P=function(a){var M=a.fieldProps,d=a.proFieldProps,B=Object(E.a)(a,x);return l.a.createElement(c.a,Object(T.a)({mode:"edit",valueType:"password",fieldProps:M,proFieldProps:d,filedConfig:{valueType:g}},B))},I=h;I.Password=P,I.displayName="ProFormComponent",C.a=I}}]);
