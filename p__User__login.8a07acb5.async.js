(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{MZhU:function(M,b,a){M.exports={container:"container___3DGcF",lang:"lang___18BEt",content:"content___24x6E",top:"top___Kmd6o",header:"header___1kD8J",logo:"logo___2Fmyt",title:"title___3pcso",desc:"desc___2QZoR",main:"main___3ipCw",icon:"icon___P3cg6",other:"other___3uIfA",register:"register___3Mz8E",prefixIcon:"prefixIcon___Tvd5H"}},Z1IU:function(M,b,a){"use strict";a.r(b);var W=a("/zsF"),T=a("PArb"),X=a("miYZ"),P=a("tsqr"),v=a("k1fw"),h=a("9og8"),S=a("tJVT"),k=a("fOrg"),F=a("+KLJ"),w=a("WmNS"),l=a.n(w),E=a("cJ7L"),J=a("FY4R"),y=a("q1tI"),z=a("VMEa"),I=a("Qurx"),C=a("tneF"),s=a("9kvl"),Z=a("55Ip"),$=a("CwrG");function B(m,c){return x.apply(this,arguments)}function x(){return x=Object(h.a)(l.a.mark(function m(c,u){return l.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(s.f)("/api/auth/login",Object(v.a)({method:"POST",headers:{"Content-Type":"application/json"},data:c},u||{})));case 1:case"end":return d.stop()}},m)})),x.apply(this,arguments)}var K=a("MZhU"),n=a.n(K),e=a("nKUr"),A=function(c){var u=c.content;return Object(e.jsx)(F.a,{style:{marginBottom:24},message:u,type:"error",showIcon:!0})},G=function(){!s.d||setTimeout(function(){var c=s.d.location.query,u=c,p=u.redirect;s.d.push(p||"/")},10)},V=function(){var c=Object(y.useState)(!1),u=Object(S.a)(c,2),p=u[0],d=u[1],D=Object(y.useState)(),L=Object(S.a)(D,2),U=L[0],Q=L[1],N=Object(s.j)("@@initialState"),j=N.initialState,R=N.setInitialState,O=Object(s.i)(),Y=function(){var g=Object(h.a)(l.a.mark(function i(){var r,o;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j==null||(r=j.fetchUserInfo)===null||r===void 0?void 0:r.call(j);case 2:o=t.sent,o&&R(Object(v.a)(Object(v.a)({},j),{},{currentUser:o}));case 4:case"end":return t.stop()}},i)}));return function(){return g.apply(this,arguments)}}(),H=function(){var g=Object(h.a)(l.a.mark(function i(r){var o;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d(!0),t.prev=1,t.next=4,B(Object(v.a)({},r));case 4:if(o=t.sent,!o.success){t.next=12;break}return localStorage.setItem("TOKEN",o.data.token),P.default.success("success"),t.next=10,Y();case 10:return G(),t.abrupt("return");case 12:Q(o),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),console.log(t.t0);case 18:d(!1);case 19:case"end":return t.stop()}},i,null,[[1,15]])}));return function(r){return g.apply(this,arguments)}}();return Object(e.jsxs)("div",{className:n.a.container,children:[Object(e.jsx)("div",{className:n.a.lang,children:s.b&&Object(e.jsx)(s.b,{})}),Object(e.jsxs)("div",{className:n.a.content,children:[Object(e.jsx)("div",{className:n.a.top,children:Object(e.jsx)("div",{className:n.a.header,children:Object(e.jsx)(Z.a,{to:"/",children:Object(e.jsx)("img",{alt:"logo",className:n.a.logo,src:"/logo.svg"})})})}),Object(e.jsx)(T.a,{}),Object(e.jsx)("div",{className:n.a.main,children:Object(e.jsxs)(z.b,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:O.formatMessage({id:"pages.login.submit",defaultMessage:"submit"})},render:function(i,r){return r.pop()},submitButtonProps:{loading:p,size:"large",style:{width:"100%"}}},onFinish:function(){var g=Object(h.a)(l.a.mark(function i(r){return l.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:H(r);case 1:case"end":return f.stop()}},i)}));return function(i){return g.apply(this,arguments)}}(),children:[U&&!U.success&&Object(e.jsx)(A,{content:O.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\uFF08admin/ant.design)"})}),Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)("pre",{children:"email/password: admin@escola-lms.com/secret"}),Object(e.jsx)(I.a,{name:"email",fieldProps:{size:"large",prefix:Object(e.jsx)(E.a,{className:n.a.prefixIcon})},placeholder:O.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"admin or user"}),rules:[{required:!0,message:Object(e.jsx)(s.a,{id:"pages.login.username.required",defaultMessage:"required!"})}]}),Object(e.jsx)(I.a.Password,{name:"password",fieldProps:{size:"large",prefix:Object(e.jsx)(J.a,{className:n.a.prefixIcon})},placeholder:O.formatMessage({id:"pages.login.password.placeholder",defaultMessage:" ant.design"}),rules:[{required:!0,message:Object(e.jsx)(s.a,{id:"pages.login.password.required",defaultMessage:"required"})}]})]}),Object(e.jsxs)("div",{style:{marginBottom:24},children:[Object(e.jsx)(C.a,{noStyle:!0,name:"autoLogin",children:Object(e.jsx)(s.a,{id:"pages.login.rememberMe",defaultMessage:"rememberMe"})}),Object(e.jsx)("a",{style:{float:"right"},children:Object(e.jsx)(s.a,{id:"pages.login.forgotPassword",defaultMessage:"forgotPassword"})})]})]})})]}),Object(e.jsx)($.a,{})]})},q=b.default=V}}]);
