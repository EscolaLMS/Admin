(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{"0TUn":function(J,v,e){"use strict";e.d(v,"c",function(){return j}),e.d(v,"a",function(){return M}),e.d(v,"b",function(){return n});var g=e("WmNS"),O=e.n(g),p=e("k1fw"),d=e("9og8"),E=e("9kvl");function j(i,m){return r.apply(this,arguments)}function r(){return r=Object(d.a)(O.a.mark(function i(m,_){return O.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(E.f)("/api/model-fields",Object(p.a)({method:"GET",params:m},_||{})));case 1:case"end":return o.stop()}},i)})),r.apply(this,arguments)}function M(i,m){return s.apply(this,arguments)}function s(){return s=Object(d.a)(O.a.mark(function i(m,_){return O.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(E.f)("/api/admin/model-fields",Object(p.a)({method:"POST",data:m},_||{})));case 1:case"end":return o.stop()}},i)})),s.apply(this,arguments)}function n(i,m){return c.apply(this,arguments)}function c(){return c=Object(d.a)(O.a.mark(function i(m,_){return O.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(E.f)("/api/admin/model-fields",Object(p.a)({method:"DELETE",data:m},_||{})));case 1:case"end":return o.stop()}},i)})),c.apply(this,arguments)}},"5ddx":function(J,v,e){"use strict";var g=e("WmNS"),O=e.n(g),p=e("9og8"),d=e("+L6B"),E=e("2/Rp"),j=e("tJVT"),r=e("q1tI"),M=e.n(r),s=e("9kvl"),n=e("Qiat"),c=e("VK58"),i=e("xvlK"),m=e("Xcxh"),_=e("y8nQ"),P=e("Vl3Y"),o=e("rmhi"),A=e("VMEa"),x=e("Qurx"),a=e("nKUr"),l=function(K){var W=Object(s.i)(),h=K.visible,B=K.onVisibleChange,I=K.onFinish,y=P.a.useForm(),S=Object(j.a)(y,1),V=S[0];return Object(r.useEffect)(function(){return function(){V.resetFields()}},[]),Object(a.jsx)(o.a,{form:V,title:W.formatMessage({id:"newSetting",defaultMessage:"newSetting"}),width:"30vw",visible:h,onVisibleChange:B,onFinish:I,children:Object(a.jsxs)(A.a.Group,{children:[Object(a.jsx)(x.a,{label:Object(a.jsx)(s.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"}),Object(a.jsx)(x.a,{label:Object(a.jsx)(s.a,{id:"value",defaultMessage:"value"}),rules:[{required:!0}],width:"md",name:"value"})]})})},u=l,F=function(K){var W=K.user,h=K.isProfile,B=h===void 0?!1:h,I=Object(r.useRef)(),y=Object(s.i)(),S=Object(r.useState)(!1),V=Object(j.a)(S,2),U=V[0],N=V[1],Y=Object(r.useState)("PATCH"),z=Object(j.a)(Y,2),T=z[0],C=z[1],R=[{title:Object(a.jsx)(s.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(a.jsx)(s.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInSearch:!0}],L=Object(r.useCallback)(function(D){var b=D&&Object.entries(D).map(function(f){return{key:f[0],value:f[1]}});return b},[W]);return Object(a.jsxs)(M.a.Fragment,{children:[Object(a.jsx)(n.a,{headerTitle:y.formatMessage({id:"menu.settings"}),actionRef:I,rowKey:"id",search:!1,toolBarRender:B?function(){return[Object(a.jsxs)(E.a,{type:"primary",onClick:function(){N(-1),C("PATCH")},children:[Object(a.jsx)(i.a,{})," ",Object(a.jsx)(s.a,{id:"pages.searchTable.new"})]},"primary"),Object(a.jsxs)(E.a,{color:"yellow",type:"primary",onClick:function(){N(-1),C("PUT")},children:[Object(a.jsx)(m.a,{})," ",Object(a.jsx)(s.a,{id:"user.settings.overwrite"})]},"primary")]}:!1,request:function(){return Object(c.d)(Number(W)).then(function(b){return b.success?{data:L(b.data)}:[]})},columns:R}),Object(a.jsx)(u,{id:U,visible:Number.isInteger(U),onVisibleChange:function(b){return b===!1&&N(!1)},onFinish:function(){var D=Object(p.a)(O.a.mark(function b(f){var Q;return O.a.wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,Object(c.g)(Number(W),T,f);case 2:Q=$.sent,Q.success&&(N(!1),I.current&&I.current.reload());case 4:case"end":return $.stop()}},b)}));return function(b){return D.apply(this,arguments)}}()})]})},G=v.a=F},"DBJ/":function(J,v,e){"use strict";var g=e("k1fw"),O=e("y8nQ"),p=e("Vl3Y"),d=e("etVw"),E=e("9kvl"),j=e("qFDU"),r=e("nKUr"),M=e.n(r);function s(n){var c=n.onChange,i=n.onUpload,m=n.url,_=n.name,P=n.extra,o=n.accept,A=n.data,x=n.wrapInForm,a=x===void 0?!0:x,l=n.title,u=n.formProps,F=Object(E.i)();return A&&A[_]&&delete A[_],Object(r.jsx)(j.a,{condition:a,wrap:function(t){return Object(r.jsx)(p.a,Object(g.a)(Object(g.a)({},u),{},{children:t}))},children:Object(r.jsx)(d.a,{title:l||Object(r.jsx)(E.a,{id:"upload_click_here"}),placeholder:F.formatMessage({id:"upload_click_here"}),onChange:function(t){c&&c(t),t.file.status==="done"&&i&&i(t.file.response)},label:Object(r.jsx)(E.a,{id:"upload"}),max:2,fieldProps:{data:A,accept:o,name:_,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(m),extra:P})})}v.a=s},Jfn2:function(J,v,e){"use strict";var g=e("k1fw"),O=e("XCrF"),p=e("1GRj"),d=e("PpiC"),E=e("q1tI"),j=e.n(E),r=e("nKUr"),M=e.n(r),s=function(c){var i=c.path,m=c.size,_=c.srcSizes,P=c.alt,o=P===void 0?"LMS Image":P,A=Object(d.a)(c,["path","size","srcSizes","alt"]),x="".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(i,"&w=").concat(_?_[0]:m),a=_&&_.map(function(l){return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(i,"&w=").concat(l," ").concat(l,"w")});return Object(r.jsx)("div",{className:"escolalms-image",children:Object(r.jsx)(p.a,Object(g.a)({src:x,srcSet:a&&a.join(","),alt:o},A))})};v.a=s},TpMl:function(J,v,e){"use strict";var g=e("tJVT"),O=e("q1tI"),p=e.n(O),d=e("0TUn"),E=function(r){var M=Object(O.useState)({state:"initial"}),s=Object(g.a)(M,2),n=s[0],c=s[1];return Object(O.useEffect)(function(){c({state:"loading"}),Object(d.c)({class_type:r}).then(function(i){i.success&&c({state:"loaded",list:i.data})})},[r]),n};v.a=E},YDZB:function(J,v,e){"use strict";var g=e("2qtc"),O=e("kLXV"),p=e("7Kak"),d=e("9yH6"),E=e("+L6B"),j=e("2/Rp"),r=e("tJVT"),M=e("q1tI"),s=e.n(M),n=e("gU/Y"),c=e("9kvl"),i=e("u95b"),m=e.n(i),_=e("nKUr"),P=e.n(_),o=function(x){var a=x.value,l=x.onChange,u=Object(M.useState)(!1),F=Object(r.a)(u,2),G=F[0],t=F[1],K=Object(M.useCallback)(function(){t(!1)},[]),W=Object(M.useState)("code"),h=Object(r.a)(W,2),B=h[0],I=h[1];return Object(_.jsxs)("div",{children:[Object(_.jsx)(j.a,{type:"primary",onClick:function(){return t(!0)},size:"small",children:Object(_.jsx)(c.a,{id:"json_editor"})}),Object(_.jsxs)(O.a,{title:"JSON",visible:G,onOk:K,onCancel:K,children:[Object(_.jsxs)(d.a.Group,{onChange:function(S){return I(S.target.value)},value:B,children:[Object(_.jsx)(d.a,{value:"tree",children:"tree"}),Object(_.jsx)(d.a,{value:"view",children:"view"}),Object(_.jsx)(d.a,{value:"form",children:"form"}),Object(_.jsx)(d.a,{value:"code",children:"code"}),Object(_.jsx)(d.a,{value:"text",children:"text"})]}),Object(_.jsx)(n.a,{mode:B,value:a,onChange:function(S){return l&&l(S)}},B)]})]})};v.a=o},YDsB:function(J,v,e){"use strict";var g=e("YDZB"),O=e("FJDo"),p=e("tneF"),d=e("Qurx"),E=e("VMEa"),j=e("BiO0"),r=e("q1tI"),M=e.n(r),s=e("9kvl"),n=e("nKUr"),c=e.n(n),i=function(_){var P=_.field,o=Object(s.i)(),A=function(a){var l=a&&a.extra&&a.extra.find(function(u){return u[Object(s.c)()]});switch(a.type){case"number":return Object(n.jsx)(O.a,{width:"md",name:a.name,label:l?l[Object(s.c)()]:Object(n.jsx)(s.a,{id:a.name}),tooltip:Object(n.jsx)(s.a,{id:a.name}),placeholder:o.formatMessage({id:a.name,defaultMessage:a.name}),min:1,max:1024,fieldProps:{step:1}});case"boolean":return Object(n.jsx)(p.a,{name:a.name,children:l?l[Object(s.c)()]:Object(n.jsx)(s.a,{id:a.name})});case"varchar":return Object(n.jsx)(d.a,{width:"md",name:a.name,label:l?l[Object(s.c)()]:Object(n.jsx)(s.a,{id:a.name}),tooltip:Object(n.jsx)(s.a,{id:a.name}),placeholder:o.formatMessage({id:a.name})});case"json":return Object(n.jsx)(E.a.Item,{name:a.name,label:l?l[Object(s.c)()]:Object(n.jsx)(s.a,{id:a.name}),tooltip:Object(n.jsx)(s.a,{id:a.name}),valuePropName:"value",children:Object(n.jsx)(g.a,{})});case"text":default:return Object(n.jsx)(j.a,{width:"md",name:a.name,label:l?l[Object(s.c)()]:Object(n.jsx)(s.a,{id:a.name}),tooltip:Object(n.jsx)(s.a,{id:a.name}),placeholder:o.formatMessage({id:a.name})})}};return Object(n.jsx)(n.Fragment,{children:A(P)})};v.a=i},fWLy:function(J,v,e){"use strict";e.r(v);var g=e("T2oS"),O=e("W9HT"),p=e("miYZ"),d=e("tsqr"),E=e("WmNS"),j=e.n(E),r=e("k1fw"),M=e("9og8"),s=e("tJVT"),n=e("q1tI"),c=e.n(n),i=e("VMEa"),m=e("Qurx"),_=e("nhC9"),P=e("VK58"),o=e("TpMl"),A=e("tMyG"),x=e("DBJ/"),a=e("Jfn2"),l=e("Ty5D"),u=e("9kvl"),F=e("5ddx"),G=e("YDsB"),t=e("nKUr"),K=e.n(t);v.default=function(){var W=Object(l.l)(),h=Object(u.i)(),B=W.tab,I=B===void 0?"general":B,y=Object(o.a)("EscolaLms\\Auth\\Models\\User"),S=Object(n.useState)(),V=Object(s.a)(S,2),U=V[0],N=V[1];Object(n.useEffect)(function(){var T=function(){var C=Object(M.a)(j.a.mark(function R(){var L;return j.a.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,Object(P.e)();case 2:L=b.sent,L.success&&N(Object(r.a)(Object(r.a)({},L.data),{},{bio:L.data.bio||""}));case 4:case"end":return b.stop()}},R)}));return function(){return C.apply(this,arguments)}}();T()},[]);var Y=Object(n.useMemo)(function(){return{onFinish:function(){var T=Object(M.a)(j.a.mark(function R(L){var D;return j.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Object(P.h)(L);case 2:D=f.sent,d.default.success(D.message);case 4:case"end":return f.stop()}},R)}));function C(R){return T.apply(this,arguments)}return C}(),initialValues:U}},[U]),z=Object(n.useMemo)(function(){return{onFinish:function(){var T=Object(M.a)(j.a.mark(function R(L){var D;return j.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Object(P.i)(L);case 2:D=f.sent,d.default.success(D.message);case 4:case"end":return f.stop()}},R)}));function C(R){return T.apply(this,arguments)}return C}(),initialValues:U}},[U]);return U?Object(t.jsx)(A.a,{title:Object(t.jsx)(u.a,{id:"my_profile"}),header:{breadcrumb:{routes:[{path:"users",breadcrumbName:h.formatMessage({id:"menu.Users"})},{path:"me",breadcrumbName:h.formatMessage({id:"my_profile"})},{path:String(I),breadcrumbName:h.formatMessage({id:String(I)})}]}},children:Object(t.jsxs)(_.a,{tabs:{type:"card",activeKey:I,onChange:function(C){return u.d.push("/users/me/".concat(C))}},children:[Object(t.jsx)(_.a.TabPane,{tab:Object(t.jsx)(u.a,{id:"general"}),children:Object(t.jsxs)(i.a,Object(r.a)(Object(r.a)({},Y),{},{children:[Object(t.jsxs)(i.a.Group,{children:[Object(t.jsx)(m.a,{width:"md",name:"first_name",label:Object(t.jsx)(u.a,{id:"first_name"}),tooltip:Object(t.jsx)(u.a,{id:"first_name"}),placeholder:h.formatMessage({id:"first_name"}),required:!0}),Object(t.jsx)(m.a,{width:"md",name:"last_name",label:Object(t.jsx)(u.a,{id:"last_name"}),tooltip:Object(t.jsx)(u.a,{id:"last_name"}),placeholder:h.formatMessage({id:"last_name"}),required:!0})]}),Object(t.jsx)(i.a.Group,{children:y.state==="loaded"&&y.list.map(function(T){return Object(t.jsx)(G.a,{field:T},T.id)})}),Object(t.jsx)(i.a.Group,{children:Object(t.jsxs)(i.a.Item,{name:"avatar",label:Object(t.jsx)(u.a,{id:"avatar"}),children:[U.path_avatar&&Object(t.jsx)(a.a,{path:U.path_avatar,size:600,width:200}),Object(t.jsx)(x.a,{url:"/api/profile/upload-avatar",name:"avatar",accept:"image/*",onUpload:function(C){C.success}})]})})]}))},"general"),Object(t.jsx)(_.a.TabPane,{tab:Object(t.jsx)(u.a,{id:"change_password"}),children:Object(t.jsxs)(i.a,Object(r.a)(Object(r.a)({},z),{},{children:[Object(t.jsx)(i.a.Group,{children:Object(t.jsx)(m.a.Password,{width:"md",name:"current_password",label:Object(t.jsx)(u.a,{id:"current_password"}),placeholder:h.formatMessage({id:"current_password"}),required:!0})}),Object(t.jsxs)(i.a.Group,{children:[Object(t.jsx)(m.a.Password,{width:"md",name:"new_password",label:Object(t.jsx)(u.a,{id:"new_password"}),placeholder:h.formatMessage({id:"new_password"}),required:!0}),Object(t.jsx)(m.a.Password,{width:"md",name:"new_confirm_password",label:Object(t.jsx)(u.a,{id:"new_confirm_password"}),placeholder:h.formatMessage({id:"new_confirm_password"}),required:!0})]})]}))},"change_password"),Object(t.jsx)(_.a.TabPane,{tab:Object(t.jsx)(u.a,{id:"user.settings"}),children:Object(t.jsx)(F.a,{user:String(U.id),isProfile:!0})},"user_settings")]})}):Object(t.jsx)(O.a,{})}}}]);
