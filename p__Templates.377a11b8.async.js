(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{"9A0E":function(I,v,e){"use strict";e.r(v),e.d(v,"channelType",function(){return O});var r=e("q1tI"),a=e("Ty5D"),s=e("9kvl"),p=e("tMyG"),u=e("nhC9"),z=e("P2fV"),Y=e("NJEC"),te=e("5Dmo"),A=e("3S7+"),K=e("+L6B"),F=e("2/Rp"),D=e("x+uP"),de=e("miYZ"),N=e("tsqr"),ae=e("HaE+"),C=e("ODXe"),ne=e("xvlK"),U=e("G3dp"),L=e("/MfK"),T=e("55Ip"),ue=e("sWYD"),W=e("Qiat"),o=e("rWUb"),i=e("mGZj"),t=e("nKUr"),m=function(Q){var X=Q.templateType,je=Q.channel,M=Object(r.useRef)(),De=Object(s.i)(),ge=Object(r.useState)(!1),be=Object(C.a)(ge,2),Le=be[0],B=be[1],ye=[{title:Object(t.jsx)(s.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0},{title:Object(t.jsx)(s.a,{id:"created_at",defaultMessage:"created_at"}),dataIndex:"created_at",hideInSearch:!0,render:function(g,x){return x.created_at&&Object(ue.a)(new Date(x.created_at),i.a)}},{title:Object(t.jsx)(s.a,{id:"name",defaultMessage:"name"}),dataIndex:"name",hideInSearch:!0},{title:Object(t.jsx)(s.a,{id:"event",defaultMessage:"event"}),dataIndex:"event",hideInSearch:!0},{title:Object(t.jsx)(s.a,{id:"templates.is_default"}),dataIndex:"default",hideInSearch:!0,render:function(g,x){return x.default&&Object(t.jsx)(s.a,{id:"yes"})}}],xe=Object(r.useCallback)(function(){var R=Object(ae.a)(Object(D.a)().mark(function g(x){var J,n;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return B(!0),J=N.default.loading(Object(t.jsx)(s.a,{id:"loading",defaultMessage:"loading"})),c.prev=2,c.next=5,Object(o.b)(x).then(function(j){B(!1),j.success&&N.default.success(j.message)});case 5:return J(),B(!1),(n=M.current)===null||n===void 0||n.reload(),c.abrupt("return",!0);case 11:return c.prev=11,c.t0=c.catch(2),J(),N.default.error(Object(t.jsx)(s.a,{id:"error",defaultMessage:"error"})),B(!1),c.abrupt("return",!1);case 17:case"end":return c.stop()}},g,null,[[2,11]])}));return function(g){return R.apply(this,arguments)}}(),[M]);return Object(t.jsx)(W.a,{headerTitle:De.formatMessage({id:"templates",defaultMessage:"templates"}),loading:Le,actionRef:M,rowKey:"id",search:!1,toolBarRender:function(){return[Object(t.jsx)(T.a,{to:"/templates/".concat(X,"/new"),children:Object(t.jsxs)(F.a,{type:"primary",children:[Object(t.jsx)(ne.a,{})," ",Object(t.jsx)(s.a,{id:"new",defaultMessage:"new"})]},"primary")})]},request:function(g){var x=g.pageSize,J=g.current;return B(!0),Object(o.e)({pageSize:x,current:J,channel:je}).then(function(n){return n.success?(B(!1),{data:n.data,total:n.meta.total,success:!0}):[]})},columns:[].concat(ye,[{hideInSearch:!0,title:Object(t.jsx)(s.a,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",render:function(g,x){return[Object(t.jsx)(T.a,{to:"/templates/".concat(X,"/").concat(x.id),children:Object(t.jsx)(A.a,{title:Object(t.jsx)(s.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(F.a,{type:"primary",icon:Object(t.jsx)(U.a,{})})})},"edit"),Object(t.jsx)(Y.a,{title:Object(t.jsx)(s.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:function(){return xe(x.id)},okText:Object(t.jsx)(s.a,{id:"yes"}),cancelText:Object(t.jsx)(s.a,{id:"no"}),children:Object(t.jsx)(A.a,{title:Object(t.jsx)(s.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(F.a,{type:"primary",icon:Object(t.jsx)(L.a,{}),danger:!0})})},"delete")]}}])})},l=m,O;(function(H){H.email="EscolaLms\\TemplatesEmail\\Core\\EmailChannel",H.pdf="EscolaLms\\TemplatesPdf\\Core\\PdfChannel",H.sms="EscolaLms\\TemplatesSms\\Core\\SmsChannel"})(O||(O={}));var pe=function(){var Q=Object(a.l)(),X=Q.template;return Object(t.jsx)(p.a,{children:Object(t.jsxs)(u.a,{tabs:{type:"card",activeKey:X,onChange:function(M){return s.d.push("/templates/".concat(M))}},children:[Object(t.jsx)(u.a.TabPane,{tab:Object(t.jsx)(s.a,{id:"email"}),children:Object(t.jsx)(l,{templateType:"email",channel:O.email})},"email"),Object(t.jsx)(u.a.TabPane,{tab:Object(t.jsx)(s.a,{id:"PDF"}),children:Object(t.jsx)(l,{templateType:"pdf",channel:O.pdf})},"pdf"),Object(t.jsx)(u.a.TabPane,{disabled:!0,tab:Object(t.jsx)("span",{children:Object(t.jsx)(s.a,{id:"Push"})}),children:"Push"},"Push"),Object(t.jsx)(u.a.TabPane,{tab:Object(t.jsx)("span",{children:Object(t.jsx)(s.a,{id:"SMS"})}),children:Object(t.jsx)(l,{templateType:"sms",channel:O.sms})},"sms")]})})},Ae=v.default=pe},S76h:function(I,v,e){},TLLU:function(I,v,e){"use strict";var r=e("5OYt");function a(){return Object(r.a)()}v.a={useBreakpoint:a}},VzZb:function(I,v,e){},"aK+R":function(I,v,e){},df8c:function(I,v,e){},nhC9:function(I,v,e){"use strict";var r=e("VTBJ"),a=e("nKUr"),s=e("Znn+"),p=e("ZTPi"),u=e("rePB"),z=e("U8pU"),Y=e("ODXe"),te=e("GNNt"),A=e("wEI+"),K=e("Ff2n"),F=e("1GLa"),D=e("TLLU"),de=e("UESt"),N=e("YSkC"),ae=e("TSYQ"),C=e.n(ae),ne=e("BGR+"),U=e("6cGi"),L=e("q1tI"),T=e.n(L),ue=e("S76h"),W=function(b){var c=b.actions,j=b.prefixCls;return Array.isArray(c)&&(c==null?void 0:c.length)?Object(a.jsx)("ul",{className:"".concat(j,"-actions"),children:c.map(function(P,V){return Object(a.jsx)("li",{style:{width:"".concat(100/c.length,"%")},children:Object(a.jsx)("span",{children:P})},"action-".concat(V))})}):c?Object(a.jsx)("ul",{className:"".concat(j,"-actions"),children:c}):null},o=W,i=e("jCWc"),t=e("kPKH"),m=e("14J3"),l=e("BMrR"),O=e("aK+R"),pe=function(b){var c=b.style,j=b.prefix;return Object(a.jsxs)("div",{className:"".concat(j,"-loading-content"),style:c,children:[Object(a.jsx)(l.a,{gutter:8,children:Object(a.jsx)(t.a,{span:22,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})})}),Object(a.jsxs)(l.a,{gutter:8,children:[Object(a.jsx)(t.a,{span:8,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})}),Object(a.jsx)(t.a,{span:15,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})})]}),Object(a.jsxs)(l.a,{gutter:8,children:[Object(a.jsx)(t.a,{span:6,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})}),Object(a.jsx)(t.a,{span:18,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})})]}),Object(a.jsxs)(l.a,{gutter:8,children:[Object(a.jsx)(t.a,{span:13,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})}),Object(a.jsx)(t.a,{span:9,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})})]}),Object(a.jsxs)(l.a,{gutter:8,children:[Object(a.jsx)(t.a,{span:4,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})}),Object(a.jsx)(t.a,{span:3,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})}),Object(a.jsx)(t.a,{span:16,children:Object(a.jsx)("div",{className:"".concat(j,"-loading-block")})})]})]})},Ae=pe,H=e("df8c"),Q=["className","style","bodyStyle","headStyle","title","subTitle","extra","tip","wrap","layout","loading","gutter","tooltip","split","headerBordered","bordered","children","size","actions","ghost","hoverable","direction","collapsed","collapsible","collapsibleIconRender","defaultCollapsed","onCollapse","checked","onChecked","tabs","type"],X=D.a.useBreakpoint,je=T.a.forwardRef(function(n,b){var c,j,P,V=n.className,w=n.style,k=n.bodyStyle,$=k===void 0?{}:k,q=n.headStyle,Ce=q===void 0?{}:q,ve=n.title,Te=n.subTitle,re=n.extra,Pe=n.tip,Oe=n.wrap,Xe=Oe===void 0?!1:Oe,we=n.layout,ce=n.loading,Be=n.gutter,ke=Be===void 0?0:Be,qe=n.tooltip,le=n.split,Re=n.headerBordered,_e=Re===void 0?!1:Re,$e=n.bordered,et=$e===void 0?!1:$e,Ge=n.children,ze=n.size,tt=n.actions,Ke=n.ghost,at=Ke===void 0?!1:Ke,Ue=n.hoverable,nt=Ue===void 0?!1:Ue,rt=n.direction,We=n.collapsed,Je=n.collapsible,ct=Je===void 0?!1:Je,Ve=n.collapsibleIconRender,Ze=n.defaultCollapsed,lt=Ze===void 0?!1:Ze,st=n.onCollapse,it=n.checked,Se=n.onChecked,Ee=n.tabs,Ne=n.type,se=Object(K.a)(n,Q),ot=Object(L.useContext)(A.default.ConfigContext),dt=ot.getPrefixCls,Ye=X(),ut=Object(U.a)(lt,{value:We,onChange:st}),Fe=Object(Y.a)(ut,2),fe=Fe[0],jt=Fe[1],me=["xxl","xl","lg","md","sm","xs"],bt=function(h){var f=[0,0],S=Array.isArray(h)?h:[h,0];return S.forEach(function(E,Z){if(Object(z.a)(E)==="object")for(var G=0;G<me.length;G+=1){var oe=me[G];if(Ye[oe]&&E[oe]!==void 0){f[Z]=E[oe];break}}else f[Z]=E||0}),f},ie=function(h,f){return h?f:{}},vt=function(h){var f=h;if(Object(z.a)(h)==="object")for(var S=0;S<me.length;S+=1){var E=me[S];if(Ye[E]&&h[E]!==void 0){f=h[E];break}}var Z=ie(typeof f=="string"&&/\d%|\dpx/i.test(f),{width:f,flexShrink:0});return{span:f,colSpanStyle:Z}},d=dt("pro-card"),Ot=bt(ke),He=Object(Y.a)(Ot,2),_=He[0],ee=He[1],Me=!1,Ie=T.a.Children.toArray(Ge),ft=Ie.map(function(y,h){var f;if(y==null||(f=y.type)===null||f===void 0?void 0:f.isProCard){var S;Me=!0;var E=y.props.colSpan,Z=vt(E),G=Z.span,oe=Z.colSpanStyle,gt=C()(["".concat(d,"-col")],(S={},Object(u.a)(S,"".concat(d,"-split-vertical"),le==="vertical"&&h!==Ie.length-1),Object(u.a)(S,"".concat(d,"-split-horizontal"),le==="horizontal"&&h!==Ie.length-1),Object(u.a)(S,"".concat(d,"-col-").concat(G),typeof G=="number"&&G>=0&&G<=24),S));return Object(a.jsx)("div",{style:Object(r.a)(Object(r.a)(Object(r.a)({},oe),ie(_>0,{paddingRight:_/2,paddingLeft:_/2})),ie(ee>0,{paddingTop:ee/2,paddingBottom:ee/2})),className:gt,children:T.a.cloneElement(y)},"pro-card-col-".concat((y==null?void 0:y.key)||h))}return y}),mt=C()("".concat(d),V,(c={},Object(u.a)(c,"".concat(d,"-border"),et),Object(u.a)(c,"".concat(d,"-contain-card"),Me),Object(u.a)(c,"".concat(d,"-loading"),ce),Object(u.a)(c,"".concat(d,"-split"),le==="vertical"||le==="horizontal"),Object(u.a)(c,"".concat(d,"-ghost"),at),Object(u.a)(c,"".concat(d,"-hoverable"),nt),Object(u.a)(c,"".concat(d,"-size-").concat(ze),ze),Object(u.a)(c,"".concat(d,"-type-").concat(Ne),Ne),Object(u.a)(c,"".concat(d,"-collapse"),fe),Object(u.a)(c,"".concat(d,"-checked"),it),c)),ht=C()("".concat(d,"-body"),(j={},Object(u.a)(j,"".concat(d,"-body-center"),we==="center"),Object(u.a)(j,"".concat(d,"-body-direction-column"),le==="horizontal"||rt==="column"),Object(u.a)(j,"".concat(d,"-body-wrap"),Xe&&Me),j)),pt=Object(r.a)(Object(r.a)(Object(r.a)({},ie(_>0,{marginRight:-_/2,marginLeft:-_/2})),ie(ee>0,{marginTop:-ee/2,marginBottom:-ee/2})),$),Qe=T.a.isValidElement(ce)?ce:Object(a.jsx)(Ae,{prefix:d,style:$.padding===0||$.padding==="0px"?{padding:24}:void 0}),he=ct&&We===void 0&&(Ve?Ve({collapsed:fe}):Object(a.jsx)(de.a,{rotate:fe?void 0:90,className:"".concat(d,"-collapsible-icon")}));return Object(a.jsxs)("div",Object(r.a)(Object(r.a)({className:mt,style:w,ref:b,onClick:function(h){var f;Se==null||Se(h),se==null||(f=se.onClick)===null||f===void 0||f.call(se,h)}},Object(ne.a)(se,["prefixCls","colSpan"])),{},{children:[(ve||re||he)&&Object(a.jsxs)("div",{className:C()("".concat(d,"-header"),(P={},Object(u.a)(P,"".concat(d,"-header-border"),_e||Ne==="inner"),Object(u.a)(P,"".concat(d,"-header-collapsible"),he),P)),style:Ce,onClick:function(){he&&jt(!fe)},children:[Object(a.jsxs)("div",{className:"".concat(d,"-title"),children:[he,Object(a.jsx)(N.a,{label:ve,tooltip:qe||Pe,subTitle:Te})]}),re&&Object(a.jsx)("div",{className:"".concat(d,"-extra"),children:re})]}),Ee?Object(a.jsx)("div",{className:"".concat(d,"-tabs"),children:Object(a.jsx)(p.a,Object(r.a)(Object(r.a)({onChange:Ee.onChange},Ee),{},{children:ce?Qe:Ge}))}):Object(a.jsx)("div",{className:ht,style:pt,children:ce?Qe:ft}),Object(a.jsx)(o,{actions:tt,prefixCls:d})]}))}),M=je,De=e("u1OI"),ge=function(b){var c=Object(L.useContext)(A.default.ConfigContext),j=c.getPrefixCls,P=j("pro-card-divider"),V=b.className,w=b.style,k=w===void 0?{}:w,$=b.type,q=C()(P,V,Object(u.a)({},"".concat(P,"-").concat($),$));return Object(a.jsx)("div",{className:q,style:k})},be=ge,Le=e("VzZb"),B=["key","tab","tabKey","disabled","destroyInactiveTabPane","children","className","style","cardProps"],ye=function(b){var c=b.key,j=b.tab,P=b.tabKey,V=b.disabled,w=b.destroyInactiveTabPane,k=b.children,$=b.className,q=b.style,Ce=b.cardProps,ve=Object(K.a)(b,B),Te=Object(L.useContext)(A.default.ConfigContext),re=Te.getPrefixCls,Pe=re("pro-card-tabpane"),Oe=C()(Pe,$);return Object(a.jsx)(p.a.TabPane,Object(r.a)(Object(r.a)({tabKey:P,tab:j,className:Oe,style:q,disabled:V,destroyInactiveTabPane:w},ve),{},{children:Object(a.jsx)(M,Object(r.a)(Object(r.a)({},Ce),{},{children:k}))}),c)},xe=ye,R=function(b){return Object(a.jsx)(M,Object(r.a)({bodyStyle:{padding:0}},b))},g=M;g.isProCard=!0,g.Divider=be,g.TabPane=xe,g.Group=R;var x=g,J=v.a=x},rWUb:function(I,v,e){"use strict";e.d(v,"e",function(){return u}),e.d(v,"d",function(){return Y}),e.d(v,"a",function(){return A}),e.d(v,"h",function(){return F}),e.d(v,"b",function(){return de}),e.d(v,"i",function(){return ae}),e.d(v,"c",function(){return ne}),e.d(v,"f",function(){return L}),e.d(v,"g",function(){return ue});var r=e("x+uP"),a=e("VTBJ"),s=e("HaE+"),p=e("9kvl");function u(o,i){return z.apply(this,arguments)}function z(){return z=Object(s.a)(Object(r.a)().mark(function o(i,t){return Object(r.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(p.f)("/api/admin/templates",Object(a.a)({method:"GET",useCache:!1,params:Object(a.a)(Object(a.a)({},i),{},{per_page:i&&i.pageSize,page:i&&i.current})},t||{})));case 1:case"end":return l.stop()}},o)})),z.apply(this,arguments)}function Y(o,i){return te.apply(this,arguments)}function te(){return te=Object(s.a)(Object(r.a)().mark(function o(i,t){return Object(r.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(p.f)("/api/admin/templates/".concat(i),Object(a.a)({method:"GET"},t||{})));case 1:case"end":return l.stop()}},o)})),te.apply(this,arguments)}function A(o,i){return K.apply(this,arguments)}function K(){return K=Object(s.a)(Object(r.a)().mark(function o(i,t){return Object(r.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(p.f)("/api/admin/templates",Object(a.a)({method:"POST",headers:{"Content-Type":"application/json"},data:i},t||{})));case 1:case"end":return l.stop()}},o)})),K.apply(this,arguments)}function F(o,i,t){return D.apply(this,arguments)}function D(){return D=Object(s.a)(Object(r.a)().mark(function o(i,t,m){return Object(r.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Object(p.f)("/api/admin/templates/".concat(i),Object(a.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:t},m||{})));case 1:case"end":return O.stop()}},o)})),D.apply(this,arguments)}function de(o,i){return N.apply(this,arguments)}function N(){return N=Object(s.a)(Object(r.a)().mark(function o(i,t){return Object(r.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(p.f)("/api/admin/templates/".concat(i),Object(a.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},t||{})));case 1:case"end":return l.stop()}},o)})),N.apply(this,arguments)}function ae(o){return C.apply(this,arguments)}function C(){return C=Object(s.a)(Object(r.a)().mark(function o(i){return Object(r.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",Object(p.f)("/api/admin/templates/variables",Object(a.a)({method:"GET"},i||{})));case 1:case"end":return m.stop()}},o)})),C.apply(this,arguments)}function ne(o,i){return U.apply(this,arguments)}function U(){return U=Object(s.a)(Object(r.a)().mark(function o(i,t){return Object(r.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(p.f)("/api/admin/templates/".concat(i,"/preview"),Object(a.a)({method:"GET"},t||{})));case 1:case"end":return l.stop()}},o)})),U.apply(this,arguments)}function L(o,i,t){return T.apply(this,arguments)}function T(){return T=Object(s.a)(Object(r.a)().mark(function o(i,t,m){return Object(r.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Object(p.f)("/api/admin/events/trigger-manually/".concat(i),Object(a.a)({method:"POST",headers:{"Content-Type":"application/json"},data:{users:t}},m||{})));case 1:case"end":return O.stop()}},o)})),T.apply(this,arguments)}function ue(o,i,t){return W.apply(this,arguments)}function W(){return W=Object(s.a)(Object(r.a)().mark(function o(i,t,m){return Object(r.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Object(p.f)("/api/admin/products/".concat(t,"/trigger-event-manually/").concat(i),Object(a.a)({method:"POST",headers:{"Content-Type":"application/json"}},m||{})));case 1:case"end":return O.stop()}},o)})),W.apply(this,arguments)}},u1OI:function(I,v,e){}}]);
