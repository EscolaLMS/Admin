(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{Z1IU:function(x,h,e){"use strict";e.r(h);var F=e("miYZ"),D=e("tsqr"),r=e("qLMh"),O=e("k1fw"),s=e("9og8"),b=e("tJVT"),R=e("fOrg"),u=e("+KLJ"),U=e("cJ7L"),T=e("FY4R"),f=e("q1tI"),y=e.n(f),C=e("VMEa"),P=e("Qurx"),L=e("tneF"),c=e("9kvl"),l=e("o36P"),m=e("+up7"),v=e("YRYj"),g=e("rZsG"),E=e.n(g),A=e("nZnz"),I=e("PIu2"),a=e("nKUr"),w=e.n(a),N=function(B){var M=B.content;return Object(a.jsx)(u.a,{style:{marginBottom:24},message:M,type:"error",showIcon:!0})},G=function(){var B=Object(f.useState)(!1),M=Object(b.a)(B,2),K=M[0],p=M[1],Q=Object(f.useState)(),Z=Object(b.a)(Q,2),J=Z[0],X=Z[1],V=Object(c.m)("@@initialState"),W=V.initialState,q=V.setInitialState,ee=Object(f.useState)(!1),H=Object(b.a)(ee,2),$=H[0],Y=H[1],z=Object(c.l)(),ae=function(){var d=Object(s.a)(Object(r.a)().mark(function n(){var o,_,i,S;return Object(r.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,W==null||(o=W.fetchUserInfo)===null||o===void 0?void 0:o.call(W);case 2:return _=j.sent,j.next=5,Object(m.g)({per_page:-1});case 5:return i=j.sent,j.next=8,Object(v.a)();case 8:S=j.sent,_&&q(Object(O.a)(Object(O.a)({},W),{},{currentUser:_,config:i.success?i.data:[],packages:S.success?S.data:{}}));case 10:case"end":return j.stop()}},n)}));return function(){return d.apply(this,arguments)}}(),te=function(){var d=Object(s.a)(Object(r.a)().mark(function n(o){var _,i;return Object(r.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l.b)(Object(O.a)({},o));case 3:if(_=t.sent,!_.success){t.next=11;break}return localStorage.setItem("TOKEN",_.data.token),Object(I.a)(),t.next=9,ae();case 9:return D.b.success(_.message),t.abrupt("return");case 11:X(_),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),D.b.error((t.t0===null||t.t0===void 0||(i=t.t0.data)===null||i===void 0?void 0:i.message)||"Error");case 17:return t.prev=17,p(!1),t.finish(17);case 20:case"end":return t.stop()}},n,null,[[0,14,17,20]])}));return function(o){return d.apply(this,arguments)}}(),re=function(){var d=Object(s.a)(Object(r.a)().mark(function n(o){var _,i;return Object(r.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l.a)(Object(O.a)({},o));case 3:if(_=t.sent,!_.success){t.next=7;break}return D.b.success(_.message),t.abrupt("return");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),D.b.error((t.t0===null||t.t0===void 0||(i=t.t0.data)===null||i===void 0?void 0:i.message)||"Error");case 12:return t.prev=12,p(!1),t.finish(12);case 15:case"end":return t.stop()}},n,null,[[0,9,12,15]])}));return function(o){return d.apply(this,arguments)}}(),se=function(){var d=Object(s.a)(Object(r.a)().mark(function n(o){return Object(r.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:p(!0),"password"in o?te(o):re(Object(O.a)(Object(O.a)({},o),{},{return_url:"".concat(window.location.origin,"/#/user/reset-password")}));case 2:case"end":return i.stop()}},n)}));return function(o){return d.apply(this,arguments)}}();return Object(a.jsx)(A.a,{children:Object(a.jsxs)(C.a,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:$?z.formatMessage({id:"send",defaultMessage:"send"}):z.formatMessage({id:"pages.login.submit",defaultMessage:"submit"})},render:function(n,o){return o.pop()},submitButtonProps:{loading:K,size:"large",style:{width:"100%"}}},onFinish:function(){var d=Object(s.a)(Object(r.a)().mark(function n(o){return Object(r.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:se(o);case 1:case"end":return i.stop()}},n)}));return function(n){return d.apply(this,arguments)}}(),children:[J&&!J.success&&Object(a.jsx)(N,{content:z.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\uFF08admin/ant.design)"})}),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(P.a,{name:"email",fieldProps:{size:"large",prefix:Object(a.jsx)(U.a,{className:E.a.prefixIcon})},rules:[{required:!0,message:Object(a.jsx)(c.a,{id:"pages.login.username.required",defaultMessage:"required!"})}]}),!$&&Object(a.jsx)(P.a.Password,{name:"password",fieldProps:{size:"large",prefix:Object(a.jsx)(T.a,{className:E.a.prefixIcon})},rules:[{required:!0,message:Object(a.jsx)(c.a,{id:"pages.login.password.required",defaultMessage:"required"})}]})]}),Object(a.jsxs)("div",{style:{marginBottom:24},children:[$?Object(a.jsx)("a",{onClick:function(n){n.preventDefault(),Y(!1)},children:Object(a.jsx)(c.a,{id:"back",defaultMessage:"back"})}):Object(a.jsx)(L.a,{noStyle:!0,name:"remember_me",children:Object(a.jsx)(c.a,{id:"pages.login.rememberMe",defaultMessage:"rememberMe"})}),!$&&Object(a.jsx)("a",{style:{float:"right"},onClick:function(n){n.preventDefault(),Y(!0)},children:Object(a.jsx)(c.a,{id:"pages.login.forgotPassword",defaultMessage:"forgotPassword"})})]})]})})};h.default=G},nZnz:function(x,h,e){"use strict";var F=e("q1tI"),D=e.n(F),r=e("CwrG"),O=e("rZsG"),s=e.n(O),b=e("9kvl"),R=e("55Ip"),u=e("nKUr"),U=e.n(u),T=function(y){var C,P,L,c,l,m,v,g,E,A=y.children,I=Object(b.m)("@@initialState"),a=I.initialState,w=(C=a==null||(P=a.publicConfig)===null||P===void 0||(L=P.global)===null||L===void 0?void 0:L.showLoginBackgroundImage)!==null&&C!==void 0?C:!0,N=a==null||(c=a.publicConfig)===null||c===void 0||(l=c.global)===null||l===void 0?void 0:l.loginHeaderFontColor,G=a==null||(m=a.publicConfig)===null||m===void 0||(v=m.global)===null||v===void 0?void 0:v.loginHeaderBackgroundColor,k=a==null||(g=a.publicConfig)===null||g===void 0||(E=g.global)===null||E===void 0?void 0:E.loginFormBackgroundColor,B=Object(F.useMemo)(function(){var M,K,p=a==null||(M=a.publicConfig)===null||M===void 0||(K=M.global)===null||K===void 0?void 0:K.logoLogin;return p?p.includes("http")?p:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/storage").concat(p):""},[a==null?void 0:a.publicConfig]);return Object(u.jsxs)("div",{className:"".concat(s.a.container," ").concat(w?s.a["background-image"]:""),style:{backgroundColor:k},children:[Object(u.jsxs)("header",{className:s.a.header,style:{backgroundColor:G,color:N},children:[Object(u.jsx)("div",{className:s.a.lang,children:b.b&&Object(u.jsx)(b.b,{})}),Object(u.jsx)("div",{className:s.a["logo-wrapper"],children:Object(u.jsx)(R.a,{to:"/",children:Object(u.jsx)("img",{alt:"logo",className:B?s.a["custom-logo"]:s.a.logo,src:B||"/logo.svg"})})})]}),Object(u.jsx)("main",{className:s.a.main,children:A}),Object(u.jsx)(r.a,{})]})};h.a=T},rZsG:function(x,h,e){x.exports={container:"container___2MqLM",lang:"lang___GQeBj","background-image":"background-image___3WSx0","logo-wrapper":"logo-wrapper___V8scu",header:"header___2LHxh","custom-logo":"custom-logo___HBLG3",logo:"logo___3MAcQ",title:"title___3Wr7O",desc:"desc___22Mec",main:"main___1ht25",icon:"icon___ki6v1",other:"other___3NR7b",register:"register___1-tB1",prefixIcon:"prefixIcon___2LycM"}},tneF:function(x,h,e){"use strict";var F=e("sRBo"),D=e("kaz8"),r=e("VTBJ"),O=e("Ff2n"),s=e("nKUr"),b=e.n(s),R=e("uX+g"),u=e("q1tI"),U=e.n(u),T=e("WFLz"),f=e("adzw"),y=["options","fieldProps","proFieldProps","valueEnum"],C=U.a.forwardRef(function(l,m){var v=l.options,g=l.fieldProps,E=l.proFieldProps,A=l.valueEnum,I=Object(O.a)(l,y);return Object(s.jsx)(f.a,Object(r.a)({ref:m,valueType:"checkbox",valueEnum:Object(R.a)(A,void 0),fieldProps:Object(r.a)({options:v},g),lightProps:Object(r.a)({labelFormatter:function(){return Object(s.jsx)(f.a,Object(r.a)({ref:m,valueType:"checkbox",mode:"read",valueEnum:Object(R.a)(A,void 0),filedConfig:{customLightMode:!0},fieldProps:Object(r.a)({options:v},g),proFieldProps:E},I))}},I.lightProps),proFieldProps:E},I))}),P=U.a.forwardRef(function(l,m){var v=l.fieldProps,g=l.children;return Object(s.jsx)(D.a,Object(r.a)(Object(r.a)({ref:m},v),{},{children:g}))}),L=Object(T.a)(P,{valuePropName:"checked"}),c=L;c.Group=C,h.a=c}}]);

//# sourceMappingURL=p__User__login.e8e258a9.async.js.map