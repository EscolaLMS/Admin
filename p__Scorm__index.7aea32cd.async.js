"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5036],{16894:function(y,f,e){var E=e(72717);f.ZP=E.Z},29477:function(y,f,e){var E=e(97857),l=e.n(E),I=e(5574),M=e.n(I),x=e(55523),A=e(75842),j=e(21974),P=e(67294),c=e(80854),S=e(85893);function p(n){var v=n.onChange,r=n.onUpload,d=n.url,m=n.name,O=n.extra,t=n.accept,b=n.data,R=n.wrapInForm,K=R===void 0?!0:R,C=n.title,Z=n.formProps,L=n.maxFiles,B=n.clearListAfterUpload,F=n.hideLabel,W=n.disabled,D=n.showUploadList,s=(0,P.useState)(),i=M()(s,2),g=i[0],u=i[1],_=(0,c.useIntl)();return b&&b[m]&&delete b[m],(0,S.jsx)(j.Z,{condition:K,wrap:function(a){return(0,S.jsx)(A.Z,l()(l()({},Z),{},{children:a}))},children:(0,S.jsx)(x.Z,{title:C||" ".concat(_.formatMessage({id:"upload_click_here"})),placeholder:_.formatMessage({id:"upload_click_here"}),label:!F&&(0,S.jsx)(c.FormattedMessage,{id:"upload"}),max:L!=null?L:2,fieldProps:{data:b,accept:t,name:m,showUploadList:D,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))},onChange:function(a){u(a),v&&v(a),a.file.status==="done"&&(r&&r(a.file.response),B&&u(void 0))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(d),extra:O,fileList:g==null?void 0:g.fileList,disabled:W})})}f.Z=p},55045:function(y,f,e){e.r(f),e.d(f,{default:function(){return W}});var E=e(15009),l=e.n(E),I=e(99289),M=e.n(I),x=e(74453),A=e(16894),j=e(2453),P=e(83062),c=e(14726),S=e(86738),p=e(67294),n=e(80854),v=e(29477),r=e(85893),d=function(s){var i=s.onSuccess,g=s.onError,u=s.hideLabel;return(0,r.jsx)(v.Z,{url:"/api/admin/scorm/upload",name:"zip",accept:"application/zip",hideLabel:u,onChange:function(o){if(!(!o.file.response||o.file.status!=="done")){var a=o.file.response;if(!a.success){g(a);return}i(a.data.model)}}})},m=d,O=e(9649),t=e(1413),b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"},R=b,K=e(84089),C=function(s,i){return p.createElement(K.Z,(0,t.Z)((0,t.Z)({},s),{},{ref:i,icon:R}))};C.displayName="SendOutlined";var Z=p.forwardRef(C),L=e(82061),B=function(){var D=M()(l()().mark(function s(i){return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,O.NK)(i);case 2:return u.abrupt("return",!0);case 3:case"end":return u.stop()}},s)}));return function(i){return D.apply(this,arguments)}}(),F=function(){var s=(0,p.useRef)(),i=(0,n.useIntl)(),g=[{title:(0,r.jsx)(n.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:(0,r.jsx)(n.FormattedMessage,{id:"version",defaultMessage:"version"}),dataIndex:"version",hideInSearch:!0,sorter:!0},{title:(0,r.jsx)(n.FormattedMessage,{id:"newScorm",defaultMessage:"New Scorm"}),dataIndex:"upload",hideInSearch:!1,hideInTable:!0,renderFormItem:function(){return[(0,r.jsx)(m,{hideLabel:!0,onSuccess:function(){s.current&&s.current.reload(),j.ZP.success(i.formatMessage({id:"scorm_uploaded",defaultMessage:"Scorm uploaded"}))},onError:function(o){return j.ZP.error(o.message||o.toString())}},"upload")]}},{title:(0,r.jsx)(n.FormattedMessage,{id:"SCOS",defaultMessage:"Sharable Content Objects"}),dataIndex:"SCOS",hideInSearch:!0,render:function(_,o){return[o.scos.map(function(a){return(0,r.jsx)(n.Link,{to:"/courses/scorms/preview/".concat(a.uuid),children:(0,r.jsxs)(P.Z,{title:(0,r.jsx)(n.FormattedMessage,{id:"preview",defaultMessage:"preview"}),children:[(0,r.jsx)(c.ZP,{size:"small",icon:(0,r.jsx)(Z,{}),type:"primary",children:a.title})," "]})},a.uuid)})]}},{hideInSearch:!0,title:(0,r.jsx)(n.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(_,o){return[(0,r.jsx)(S.Z,{title:(0,r.jsx)(n.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:M()(l()().mark(function a(){var U;return l()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,B(o.id);case 2:U=h.sent,U&&s.current&&s.current.reload();case 4:case"end":return h.stop()}},a)})),okText:(0,r.jsx)(n.FormattedMessage,{id:"yes",defaultMessage:"Yes"}),cancelText:(0,r.jsx)(n.FormattedMessage,{id:"no",defaultMessage:"No"}),children:(0,r.jsx)(P.Z,{title:(0,r.jsx)(n.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,r.jsx)(c.ZP,{type:"primary",icon:(0,r.jsx)(L.Z,{}),danger:!0})})},"delete")]}}];return(0,r.jsx)(x._z,{children:(0,r.jsx)(A.ZP,{headerTitle:i.formatMessage({id:"menu.Courses.SCORMs",defaultMessage:"scorms"}),actionRef:s,rowKey:"id",search:{layout:"vertical"},request:function(_,o){var a=_.pageSize,U=_.current,T=o&&Object.entries(o)[0];return(0,O.JZ)({per_page:a,page:U,order_by:T&&T[0],order:T?T[1]==="ascend"?"ASC":"DESC":void 0}).then(function(h){return h.success?{data:h.data.data,total:h.data.total,success:!0}:[]})},columns:g})})},W=F},9649:function(y,f,e){e.d(f,{JZ:function(){return P},NK:function(){return n}});var E=e(15009),l=e.n(E),I=e(97857),M=e.n(I),x=e(99289),A=e.n(x),j=e(80854);function P(r,d){return c.apply(this,arguments)}function c(){return c=A()(l()().mark(function r(d,m){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,j.request)("/api/admin/scorm",M()({params:d,method:"GET",useCache:!1},m||{})));case 1:case"end":return t.stop()}},r)})),c.apply(this,arguments)}function S(r,d){return p.apply(this,arguments)}function p(){return p=_asyncToGenerator(_regeneratorRuntime().mark(function r(d,m){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/admin/scorm/scos",_objectSpread({params:_objectSpread(_objectSpread({},d),{},{per_page:d.pageSize,page:d.current}),method:"GET",useCache:!1},m||{})));case 1:case"end":return t.stop()}},r)})),p.apply(this,arguments)}function n(r,d){return v.apply(this,arguments)}function v(){return v=A()(l()().mark(function r(d,m){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,j.request)("/api/admin/scorm/".concat(d),M()({method:"DELETE"},m||{})));case 1:case"end":return t.stop()}},r)})),v.apply(this,arguments)}}}]);
