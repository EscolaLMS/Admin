(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"49nl":function(S,K,e){"use strict";e.r(K);var C=e("DYRE"),g=e("zeV3"),s=e("+L6B"),l=e("2/Rp"),n=e("+BJd"),o=e("mr32"),v=e("k1fw"),f=e("PpiC"),j=e("tJVT"),$=e("q1tI"),p=e.n($),r=e("9kvl"),P=e("tMyG"),R=e("Qiat"),y=e("0WSk"),I=e("sWYD"),U=e("mGZj"),B=e("bP8k"),b=e("gFTJ"),E=e("qLMh"),_=e("9og8"),ve=e("y8nQ"),ee=e("Vl3Y"),w=e("+caW"),z=e("Qurx"),se=e("EcEN");function te(x,m){return H.apply(this,arguments)}function H(){return H=Object(_.a)(Object(E.a)().mark(function x(m,O){return Object(E.a)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt("return",Object(r.i)("/api/admin/consultation-access-enquiries",Object(v.a)({method:"GET",params:Object(v.a)(Object(v.a)({},m),{},{per_page:m.pageSize,page:m.current})},O||{})));case 1:case"end":return F.stop()}},x)})),H.apply(this,arguments)}function re(x,m,O){return Q.apply(this,arguments)}function Q(){return Q=Object(_.a)(Object(E.a)().mark(function x(m,O,W){return Object(E.a)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",Object(r.i)("/api/admin/consultation-access-enquiries/approve/".concat(m),Object(v.a)({data:O,method:"POST"},W||{})));case 1:case"end":return D.stop()}},x)})),Q.apply(this,arguments)}function ne(x,m,O){return X.apply(this,arguments)}function X(){return X=Object(_.a)(Object(E.a)().mark(function x(m,O,W){return Object(E.a)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",Object(r.i)("/api/admin/consultation-access-enquiries/disapprove/".concat(m),Object(v.a)({data:O,method:"POST"},W||{})));case 1:case"end":return D.stop()}},x)})),X.apply(this,arguments)}var t=e("nKUr"),c=function(m){var O=m.term,W=m.onClose,F=m.onSuccess,D=ee.a.useForm(),J=Object(j.a)(D,1),Y=J[0];return Object(t.jsxs)(w.a,{title:Object(t.jsx)(r.a,{id:"approve_form",defaultMessage:"Approve Form"}),onVisibleChange:function(V){return!V&&W()},form:Y,visible:!!O,autoFocusFirstInput:!0,drawerProps:{destroyOnClose:!0},submitTimeout:2e3,onFinish:function(){var N=Object(_.a)(Object(E.a)().mark(function V(Z){return Object(E.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!O){d.next=3;break}return d.next=3,re(O==null?void 0:O.id,Z).then(function(i){i.success&&(W(),F())});case 3:return d.abrupt("return",!0);case 4:case"end":return d.stop()}},V)}));return function(V){return N.apply(this,arguments)}}(),children:[O&&Object(t.jsx)(b.b,{column:2,children:Object(t.jsx)(b.b.Item,{label:Object(t.jsx)(r.a,{id:"approve_date",defaultMessage:"Approved Date"}),children:Object(I.a)(new Date(O.proposed_at),U.a)})}),Object(t.jsx)(z.a,{rules:[{required:!0}],name:"meeting_link",label:Object(t.jsx)(r.a,{id:"meeting_link",defaultMessage:"Meeting Link"}),tooltip:Object(t.jsx)(r.a,{id:"meeting_link",defaultMessage:"Meeting Link"})}),Object(t.jsx)(l.a,{onClick:function(){Y.setFieldValue("meeting_link","https://meet.jit.si/".concat(Object(se.v4)()))},children:Object(t.jsx)(r.a,{id:"generate_jitsy",defaultMessage:"Generate Jitsy URL"})})]})},oe=e("BiO0"),ie=function(m){var O=m.id,W=m.onClose,F=m.onSuccess,D=ee.a.useForm(),J=Object(j.a)(D,1),Y=J[0];return Object(t.jsx)(w.a,{title:Object(t.jsx)(r.a,{id:"disapprove_form",defaultMessage:"Disapprove Form"}),onVisibleChange:function(V){return!V&&W()},form:Y,visible:!!O,autoFocusFirstInput:!0,drawerProps:{destroyOnClose:!0},submitTimeout:2e3,onFinish:function(){var N=Object(_.a)(Object(E.a)().mark(function V(Z){return Object(E.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!O){d.next=3;break}return d.next=3,ne(O,Z).then(function(i){i.success&&(W(),F())});case 3:return d.abrupt("return",!0);case 4:case"end":return d.stop()}},V)}));return function(V){return N.apply(this,arguments)}}(),children:Object(t.jsx)(oe.a,{name:"message",label:Object(t.jsx)(r.a,{id:"reason",defaultMessage:"Reason"}),tooltip:Object(t.jsx)(r.a,{id:"reason_tooltip",defaultMessage:"Reason"})})})},G=e("Vpfc"),le=e("A6KM"),u=["type","defaultRender"],M=["type","defaultRender"],T=function(){var m=Object($.useRef)(),O=Object(r.l)(),W=Object($.useState)(),F=Object(j.a)(W,2),D=F[0],J=F[1],Y=Object($.useState)(),N=Object(j.a)(Y,2),V=N[0],Z=N[1],ue=[{title:Object(t.jsx)(r.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0},{title:Object(t.jsx)(r.a,{id:"description",defaultMessage:"Description"}),dataIndex:"description",hideInSearch:!0,sorter:!0},{title:Object(t.jsx)(r.a,{id:"user",defaultMessage:"User"}),dataIndex:"user_id",renderFormItem:function(i,a,h){var A=a.type,ce=a.defaultRender,k=Object(f.a)(a,u);if(A==="form")return null;var q=h.getFieldValue("state");return Object(t.jsx)(y.a,Object(v.a)(Object(v.a)({},k),{},{state:{type:q}}))},render:function(i,a){var h,A;return((h=a.user)===null||h===void 0?void 0:h.id)&&Object(t.jsx)(G.a,{type:"EscolaLms\\Core\\Models\\User",type_id:(A=a.user)===null||A===void 0?void 0:A.id,children:Object(t.jsx)(o.a,{children:a.user.email})},"user")}},{title:Object(t.jsx)(r.a,{id:"consultation_id",defaultMessage:"Consultation"}),dataIndex:"consultation_id",renderFormItem:function(i,a,h){var A=a.type,ce=a.defaultRender,k=Object(f.a)(a,M);if(A==="form")return null;var q=h.getFieldValue("state");return Object(t.jsx)(le.a,Object(v.a)(Object(v.a)({modelType:"CONSULTATIONS"},k),{},{state:{type:q}}))},render:function(i,a){var h,A;return((h=a.consultation)===null||h===void 0?void 0:h.id)&&Object(t.jsx)(G.a,{type:"EscolaLms\\Consultations\\Models\\Consultation",type_id:(A=a.consultation)===null||A===void 0?void 0:A.id,children:Object(t.jsx)(o.a,{children:a.consultation.name})},"consultation_id")}},{title:Object(t.jsx)(r.a,{id:"consultation_term_date",defaultMessage:"Term Date"}),dataIndex:"consultation_term",hideInSearch:!0,sorter:!0,render:function(i,a){return a.consultation_term?Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(r.a,{id:"approved_date",defaultMessage:"Approved Date"}),":",Object(I.a)(new Date(a.consultation_term.date),U.a)]}):Object(t.jsx)(g.b,{direction:"vertical",children:a.proposed_terms.map(function(h){return Object(t.jsxs)(l.a,{size:"small",type:"primary",onClick:function(){Z(h)},children:[Object(t.jsx)(r.a,{id:"approve",defaultMessage:"Approve Term"}),":",Object(I.a)(new Date(h.proposed_at),U.a)]},h.id)})})}},{title:Object(t.jsx)(r.a,{id:"meeting_link",defaultMessage:"Meeting Link"}),dataIndex:"meeting_link",hideInSearch:!0,render:function(i,a){return a.meeting_link?Object(t.jsx)(l.a,{target:"_blank",type:"primary",href:a.meeting_link,children:new URL(a.meeting_link).host}):Object(t.jsx)(p.a.Fragment,{})}},{title:Object(t.jsx)(r.a,{id:"created_at",defaultMessage:"Created at"}),dataIndex:"created_at",hideInSearch:!0,sorter:!0,render:function(i,a){return a.created_at&&Object(I.a)(new Date(a.created_at),U.a)}},{title:Object(t.jsx)(r.a,{id:"status",defaultMessage:"Status"}),dataIndex:"status",sorter:!0,valueType:"select",valueEnum:{pending:{text:"pending",status:"pending"},approved:{text:"approved",status:"approved"}},render:function(i,a){return a.status==="pending"?Object(t.jsx)(l.a,{danger:!0,size:"small",type:"primary",onClick:function(){J(a.id)},children:Object(t.jsx)(r.a,{id:"disapprove",defaultMessage:"Disapprove"})}):a.status}}];return Object(t.jsxs)(P.a,{children:[Object(t.jsx)(c,{term:V,onClose:function(){return Z(void 0)},onSuccess:function(){var i;return m&&((i=m.current)===null||i===void 0?void 0:i.reload())}}),Object(t.jsx)(ie,{id:D,onClose:function(){return J(void 0)},onSuccess:function(){var i;return m&&((i=m.current)===null||i===void 0?void 0:i.reload())}}),Object(t.jsx)(R.a,{headerTitle:O.formatMessage({id:"consultationAccessEnquiries",defaultMessage:"consultation Access Enquiries"}),search:{layout:"vertical"},actionRef:m,rowKey:"id",request:function(i,a){var h=i.pageSize,A=i.current,ce=i.consultation_id,k=i.status,q=i.user_id,fe=i.is_coming,me=i.proposed_at_from,je=i.proposed_at_to,ae=a&&Object.entries(a)[0];return te({pageSize:h,current:A,consultation_id:ce,status:k,user_id:q,is_coming:fe,proposed_at_from:me,proposed_at_to:je,order_by:ae&&ae[0],order:ae?ae[1]==="ascend"?"ASC":"DESC":void 0}).then(function(de){return de.success?{data:de.data,total:de.meta.total,success:!0}:[]})},columns:ue})]})},L=K.default=T},"4fRq":function(S,K){var e=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(e){var C=new Uint8Array(16);S.exports=function(){return e(C),C}}else{var g=new Array(16);S.exports=function(){for(var l=0,n;l<16;l++)(l&3)==0&&(n=Math.random()*4294967296),g[l]=n>>>((l&3)<<3)&255;return g}}},A6KM:function(S,K,e){"use strict";e.d(K,"a",function(){return I});var C=e("OaEy"),g=e("2fM7"),s=e("T2oS"),l=e("W9HT"),n=e("oBTY"),o=e("tJVT"),v=e("q1tI"),f=e.n(v),j=e("H6aw"),$=e("EmS3"),p=e("Gb5Y"),r=e("9kvl"),P=e("nKUr"),R=e.n(P),y=function(B){return B.map(function(b){return"name"in b?{id:Number(b.id),name:b.name}:{id:Number(b.id),name:b.title?b.title:""}})},I=function(B){var b=B.value,E=B.onChange,_=B.multiple,ve=_===void 0?!1:_,ee=B.defaultValue,w=B.modelType,z=w===void 0?"COURSE":w,se=Object(v.useState)([]),te=Object(o.a)(se,2),H=te[0],re=te[1],Q=Object(v.useState)(!1),ne=Object(o.a)(Q,2),X=ne[0],t=ne[1],c=Object(v.useRef)(),oe=Object(v.useCallback)(function(u){var M,T,L,x;switch(z){case"COURSE":return Object(j.e)(u,{signal:c==null||(M=c.current)===null||M===void 0?void 0:M.signal});case"WEBINAR":return Object($.f)(u,{signal:c==null||(T=c.current)===null||T===void 0?void 0:T.signal});case"CONSULTATIONS":return Object(p.b)(u,{signal:c==null||(L=c.current)===null||L===void 0?void 0:L.signal});default:return Object(j.e)(u,{signal:c==null||(x=c.current)===null||x===void 0?void 0:x.signal})}},[z,c]),ie=Object(v.useCallback)(function(u){var M,T,L,x;switch(z){case"COURSE":return Object(j.k)(Number(u),{signal:(M=c.current)===null||M===void 0?void 0:M.signal});case"WEBINAR":return Object($.d)(Number(u),{signal:(T=c.current)===null||T===void 0?void 0:T.signal});case"CONSULTATIONS":return Object(p.e)(Number(u),{signal:(L=c.current)===null||L===void 0?void 0:L.signal});default:return Object(j.k)(Number(u),{signal:(x=c.current)===null||x===void 0?void 0:x.signal})}},[z,c]),G=Object(v.useCallback)(function(u){t(!0),c.current&&c.current.abort(),c.current=new AbortController,oe(u?{title:u}:{}).then(function(M){M.success&&re(y(M.data)),t(!1)}).catch(function(){return t(!1)})},[z]),le=Object(v.useCallback)(function(u){G(u)},[G]);return Object(v.useEffect)(function(){return c.current=new AbortController,b&&ie(Number(b)).then(function(u){u&&u.success&&re(function(M){return[].concat(Object(n.a)(M),Object(n.a)(y([u.data])))})}),function(){c.current&&c.current.abort()}},[b,z]),Object(P.jsx)(g.a,{defaultValue:ee,onFocus:function(){return G()},allowClear:!0,style:{width:"100%"},value:b,onChange:E,mode:ve?"multiple":void 0,showSearch:!0,onSearch:le,placeholder:Object(P.jsx)(r.a,{id:"select_content",defaultMessage:"select_content"}),optionFilterProp:"children",filterOption:function(M,T){if(T&&T.children){var L;return(T==null||(L=T.children)===null||L===void 0?void 0:L.toString().toLowerCase().indexOf(M.toLowerCase()))>=0}return!0},notFoundContent:X?Object(P.jsx)(l.a,{size:"small"}):null,optionLabelProp:"label",children:H.map(function(u){return Object(P.jsx)(g.a.Option,{value:u.id,label:u.name,children:u.name},u.id)})})}},BiO0:function(S,K,e){"use strict";var C=e("VTBJ"),g=e("Ff2n"),s=e("nKUr"),l=e.n(s),n=e("q1tI"),o=e.n(n),v=e("adzw"),f=["fieldProps","proFieldProps"],j=function(p,r){var P=p.fieldProps,R=p.proFieldProps,y=Object(g.a)(p,f);return Object(s.jsx)(v.a,Object(C.a)({ref:r,valueType:"textarea",fieldProps:P,proFieldProps:R},y))};K.a=o.a.forwardRef(j)},EcEN:function(S,K,e){var C=e("xDdU"),g=e("xk4V"),s=g;s.v1=C,s.v4=g,S.exports=s},I2ZF:function(S,K){for(var e=[],C=0;C<256;++C)e[C]=(C+256).toString(16).substr(1);function g(s,l){var n=l||0,o=e;return[o[s[n++]],o[s[n++]],o[s[n++]],o[s[n++]],"-",o[s[n++]],o[s[n++]],"-",o[s[n++]],o[s[n++]],"-",o[s[n++]],o[s[n++]],"-",o[s[n++]],o[s[n++]],o[s[n++]],o[s[n++]],o[s[n++]],o[s[n++]]].join("")}S.exports=g},xDdU:function(S,K,e){var C=e("4fRq"),g=e("I2ZF"),s,l,n=0,o=0;function v(f,j,$){var p=j&&$||0,r=j||[];f=f||{};var P=f.node||s,R=f.clockseq!==void 0?f.clockseq:l;if(P==null||R==null){var y=C();P==null&&(P=s=[y[0]|1,y[1],y[2],y[3],y[4],y[5]]),R==null&&(R=l=(y[6]<<8|y[7])&16383)}var I=f.msecs!==void 0?f.msecs:new Date().getTime(),U=f.nsecs!==void 0?f.nsecs:o+1,B=I-n+(U-o)/1e4;if(B<0&&f.clockseq===void 0&&(R=R+1&16383),(B<0||I>n)&&f.nsecs===void 0&&(U=0),U>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");n=I,o=U,l=R,I+=122192928e5;var b=((I&268435455)*1e4+U)%4294967296;r[p++]=b>>>24&255,r[p++]=b>>>16&255,r[p++]=b>>>8&255,r[p++]=b&255;var E=I/4294967296*1e4&268435455;r[p++]=E>>>8&255,r[p++]=E&255,r[p++]=E>>>24&15|16,r[p++]=E>>>16&255,r[p++]=R>>>8|128,r[p++]=R&255;for(var _=0;_<6;++_)r[p+_]=P[_];return j||g(r)}S.exports=v},xk4V:function(S,K,e){var C=e("4fRq"),g=e("I2ZF");function s(l,n,o){var v=n&&o||0;typeof l=="string"&&(n=l==="binary"?new Array(16):null,l=null),l=l||{};var f=l.random||(l.rng||C)();if(f[6]=f[6]&15|64,f[8]=f[8]&63|128,n)for(var j=0;j<16;++j)n[v+j]=f[j];return n||g(f)}S.exports=s}}]);
