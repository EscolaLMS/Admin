(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{"9A0E":function(N,d,t){"use strict";t.r(d),t.d(d,"channelType",function(){return v});var s=t("q1tI"),m=t("Ty5D"),a=t("9kvl"),j=t("tMyG"),O=t("nhC9"),I=t("P2fV"),U=t("NJEC"),D=t("5Dmo"),A=t("3S7+"),L=t("+L6B"),E=t("2/Rp"),h=t("qLMh"),Y=t("miYZ"),f=t("tsqr"),W=t("9og8"),R=t("+BJd"),$=t("mr32"),M=t("tJVT"),J=t("xvlK"),C=t("G3dp"),z=t("/MfK"),b=t("55Ip"),n=t("sWYD"),r=t("Qiat"),i=t("rWUb"),l=t("mGZj"),e=t("nKUr"),c=function(G){var K=G.templateType,Q=G.channel,B=Object(s.useRef)(),V=Object(a.l)(),w=Object(s.useState)(!1),Z=Object(M.a)(w,2),k=Z[0],g=Z[1],q=[{title:Object(e.jsx)(a.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0},{title:Object(e.jsx)(a.a,{id:"created_at",defaultMessage:"created_at"}),dataIndex:"created_at",hideInSearch:!0,sorter:!0,render:function(p,o){return o.created_at&&Object(n.a)(new Date(o.created_at),l.a)}},{title:Object(e.jsx)(a.a,{id:"name",defaultMessage:"name"}),dataIndex:"name",hideInSearch:!1,sorter:!0},{title:Object(e.jsx)(a.a,{id:"event",defaultMessage:"event"}),dataIndex:"event",hideInSearch:!0,sorter:!1,render:function(p,o){return Object(e.jsx)(a.a,{id:o.event,defaultMessage:o.event})}},{title:Object(e.jsx)(a.a,{id:"templates.is_default"}),dataIndex:"default",hideInSearch:!0,valueEnum:{true:Object(e.jsx)($.a,{color:"success",children:Object(e.jsx)(a.a,{id:"yes"})}),false:Object(e.jsx)($.a,{color:"error",children:Object(e.jsx)(a.a,{id:"no"})})}}],_=Object(s.useCallback)(function(){var y=Object(W.a)(Object(h.a)().mark(function p(o){var T,S;return Object(h.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return g(!0),T=f.b.loading(Object(e.jsx)(a.a,{id:"loading",defaultMessage:"loading"})),u.prev=2,u.next=5,Object(i.b)(o).then(function(x){g(!1),x.success&&f.b.success(x.message)});case 5:return T(),g(!1),(S=B.current)===null||S===void 0||S.reload(),u.abrupt("return",!0);case 11:return u.prev=11,u.t0=u.catch(2),T(),f.b.error(Object(e.jsx)(a.a,{id:"error",defaultMessage:"error"})),g(!1),u.abrupt("return",!1);case 17:case"end":return u.stop()}},p,null,[[2,11]])}));return function(p){return y.apply(this,arguments)}}(),[B]);return Object(e.jsx)(r.a,{headerTitle:V.formatMessage({id:"templates",defaultMessage:"templates"}),loading:k,actionRef:B,rowKey:"id",search:{layout:"vertical"},toolBarRender:function(){return[Object(e.jsx)(b.a,{to:"/configuration/templates/".concat(K,"/new"),children:Object(e.jsxs)(E.a,{type:"primary",children:[Object(e.jsx)(J.a,{})," ",Object(e.jsx)(a.a,{id:"new",defaultMessage:"new"})]},"primary")},"new")]},request:function(p,o){var T=p.pageSize,S=p.current,H=p.name;g(!0);var u=o&&Object.entries(o)[0];return Object(i.e)({pageSize:T,current:S,channel:Q,name:H||void 0,order_by:u&&u[0],order:u?u[1]==="ascend"?"ASC":"DESC":void 0}).then(function(x){return x.success?(g(!1),{data:x.data,total:x.meta.total,success:!0}):[]})},columns:[].concat(q,[{hideInSearch:!0,title:Object(e.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",render:function(p,o){return[Object(e.jsx)(b.a,{to:"/configuration/templates/".concat(K,"/").concat(o.id),children:Object(e.jsx)(A.a,{title:Object(e.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(e.jsx)(E.a,{type:"primary",icon:Object(e.jsx)(C.a,{})})})},"edit"),Object(e.jsx)(U.a,{title:Object(e.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:function(){return _(o.id)},okText:Object(e.jsx)(a.a,{id:"yes"}),cancelText:Object(e.jsx)(a.a,{id:"no"}),children:Object(e.jsx)(A.a,{title:Object(e.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(e.jsx)(E.a,{type:"primary",icon:Object(e.jsx)(z.a,{}),danger:!0})})},"delete")]}}])})},F=c,v;(function(P){P.email="EscolaLms\\TemplatesEmail\\Core\\EmailChannel",P.pdf="EscolaLms\\TemplatesPdf\\Core\\PdfChannel",P.sms="EscolaLms\\TemplatesSms\\Core\\SmsChannel"})(v||(v={}));var X=function(){var G=Object(m.l)(),K=G.template,Q=Object(a.k)();return Object(e.jsx)(j.a,{children:Object(e.jsxs)(O.a,{tabs:{type:"card",activeKey:K,onChange:function(V){return a.f.push("/configuration/templates/".concat(V))}},children:[Object(e.jsx)(O.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"email"}),children:Object(e.jsx)(F,{templateType:"email",channel:v.email})},"email"),Q.certificatesPermission&&Object(e.jsx)(O.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"PDF"}),children:Object(e.jsx)(F,{templateType:"pdf",channel:v.pdf})},"pdf"),Object(e.jsx)(O.a.TabPane,{tab:Object(e.jsx)("span",{children:Object(e.jsx)(a.a,{id:"SMS"})}),children:Object(e.jsx)(F,{templateType:"sms",channel:v.sms})},"sms")]})})},ee=d.default=X},rWUb:function(N,d,t){"use strict";t.d(d,"e",function(){return O}),t.d(d,"d",function(){return U}),t.d(d,"a",function(){return A}),t.d(d,"h",function(){return E}),t.d(d,"b",function(){return Y}),t.d(d,"i",function(){return W}),t.d(d,"c",function(){return $}),t.d(d,"f",function(){return J}),t.d(d,"g",function(){return z});var s=t("qLMh"),m=t("k1fw"),a=t("9og8"),j=t("9kvl");function O(n,r){return I.apply(this,arguments)}function I(){return I=Object(a.a)(Object(s.a)().mark(function n(r,i){return Object(s.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(j.i)("/api/admin/templates",Object(m.a)({method:"GET",useCache:!1,params:r},i||{})));case 1:case"end":return e.stop()}},n)})),I.apply(this,arguments)}function U(n,r){return D.apply(this,arguments)}function D(){return D=Object(a.a)(Object(s.a)().mark(function n(r,i){return Object(s.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(j.i)("/api/admin/templates/".concat(r),Object(m.a)({method:"GET"},i||{})));case 1:case"end":return e.stop()}},n)})),D.apply(this,arguments)}function A(n,r){return L.apply(this,arguments)}function L(){return L=Object(a.a)(Object(s.a)().mark(function n(r,i){return Object(s.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(j.i)("/api/admin/templates",Object(m.a)({method:"POST",headers:{"Content-Type":"application/json"},data:r},i||{})));case 1:case"end":return e.stop()}},n)})),L.apply(this,arguments)}function E(n,r,i){return h.apply(this,arguments)}function h(){return h=Object(a.a)(Object(s.a)().mark(function n(r,i,l){return Object(s.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(j.i)("/api/admin/templates/".concat(r),Object(m.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:i},l||{})));case 1:case"end":return c.stop()}},n)})),h.apply(this,arguments)}function Y(n,r){return f.apply(this,arguments)}function f(){return f=Object(a.a)(Object(s.a)().mark(function n(r,i){return Object(s.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(j.i)("/api/admin/templates/".concat(r),Object(m.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},i||{})));case 1:case"end":return e.stop()}},n)})),f.apply(this,arguments)}function W(n){return R.apply(this,arguments)}function R(){return R=Object(a.a)(Object(s.a)().mark(function n(r){return Object(s.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(j.i)("/api/admin/templates/variables",Object(m.a)({method:"GET"},r||{})));case 1:case"end":return l.stop()}},n)})),R.apply(this,arguments)}function $(n,r){return M.apply(this,arguments)}function M(){return M=Object(a.a)(Object(s.a)().mark(function n(r,i){return Object(s.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(j.i)("/api/admin/templates/".concat(r,"/preview"),Object(m.a)({method:"GET"},i||{})));case 1:case"end":return e.stop()}},n)})),M.apply(this,arguments)}function J(n,r,i){return C.apply(this,arguments)}function C(){return C=Object(a.a)(Object(s.a)().mark(function n(r,i,l){return Object(s.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(j.i)("/api/admin/events/trigger-manually/".concat(r),Object(m.a)({method:"POST",headers:{"Content-Type":"application/json"},data:{users:i}},l||{})));case 1:case"end":return c.stop()}},n)})),C.apply(this,arguments)}function z(n,r,i){return b.apply(this,arguments)}function b(){return b=Object(a.a)(Object(s.a)().mark(function n(r,i,l){return Object(s.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(j.i)("/api/admin/products/".concat(i,"/trigger-event-manually/").concat(r),Object(m.a)({method:"POST",headers:{"Content-Type":"application/json"}},l||{})));case 1:case"end":return c.stop()}},n)})),b.apply(this,arguments)}}}]);
