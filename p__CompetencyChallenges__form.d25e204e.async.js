(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"/y+f":function(Qe,x,e){"use strict";e.d(x,"h",function(){return h}),e.d(x,"e",function(){return l}),e.d(x,"f",function(){return F}),e.d(x,"d",function(){return H}),e.d(x,"a",function(){return J}),e.d(x,"c",function(){return I}),e.d(x,"b",function(){return _}),e.d(x,"g",function(){return R});var h;(function(i){i.Unselected="",i.RichText="EscolaLms\\TopicTypes\\Models\\TopicContent\\RichText",i.OEmbed="EscolaLms\\TopicTypes\\Models\\TopicContent\\OEmbed",i.Audio="EscolaLms\\TopicTypes\\Models\\TopicContent\\Audio",i.Video="EscolaLms\\TopicTypes\\Models\\TopicContent\\Video",i.H5P="EscolaLms\\TopicTypes\\Models\\TopicContent\\H5P",i.Image="EscolaLms\\TopicTypes\\Models\\TopicContent\\Image",i.PDF="EscolaLms\\TopicTypes\\Models\\TopicContent\\PDF",i.SCORM="EscolaLms\\TopicTypes\\Models\\TopicContent\\ScormSco",i.Project="EscolaLms\\TopicTypeProject\\Models\\Project",i.GiftQuiz="EscolaLms\\TopicTypeGift\\Models\\GiftQuiz"})(h||(h={}));var w;(function(i){i.OrderPaid="EscolaLms\\Cart\\Events\\OrderPaid",i.UserLogged="EscolaLms\\Auth\\Events\\UserLogged"})(w||(w={}));var O;(function(i){i.draft="draft",i.published="published",i.archived="archived"})(O||(O={}));var l;(function(i){i.email="EscolaLms\\TemplatesEmail\\Core\\EmailChannel",i.pdf="EscolaLms\\TemplatesPdf\\Core\\PdfChannel",i.sms="EscolaLms\\TemplatesSms\\Core\\SmsChannel"})(l||(l={}));var F;(function(i){i.ManuallyTriggeredEvent="EscolaLms\\Templates\\Events\\ManuallyTriggeredEvent"})(F||(F={}));var ve;(function(i){i.cart_fixed="cart_fixed",i.cart_percent="cart_percent",i.product_fixed="product_fixed",i.product_percent="product_percent"})(ve||(ve={}));var H;(function(i){i.MULTIPLE_CHOICE="multiple_choice",i.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS="multiple_choice_with_multiple_right_answers",i.TRUE_FALSE="true_false",i.SHORT_ANSWERS="short_answers",i.MATCHING="matching",i.NUMERICAL_QUESTION="numerical_question",i.ESSAY="essay",i.DESCRIPTION="description"})(H||(H={}));var J;(function(i){i.PRESENT="present",i.PRESENT_NOT_EXERCISING="present_not_exercising",i.ABSENT="absent",i.EXCUSED_ABSENCE="excused_absence"})(J||(J={}));var I;(function(i){i.Manual="manual",i.TeamsForms="teams_forms",i.TeamsLecture="teams_lecture",i.TestPortal="test_portal"})(I||(I={}));var _;(function(i){i.Simple="simple",i.Complex="complex"})(_||(_={}));var R;(function(i){i.QuizSummary="EscolaLms\\Reports\\Stats\\Topic\\QuizSummaryForTopicTypeGIFT"})(R||(R={}))},"60mZ":function(Qe,x,e){},EKp7:function(Qe,x,e){"use strict";e.r(x);var h=e("T2oS"),w=e("W9HT"),O=e("q1tI"),l=e("9kvl"),F=e("Ty5D"),ve=e("tMyG"),H=e("nhC9"),J=e("tKSU"),I=e("qLMh"),_=e("miYZ"),R=e("tsqr"),i=e("9og8"),D=e("k1fw"),p=e("PpiC"),y=e("tJVT"),n=e("VMEa"),W=e("Qurx"),B=e("yj/a"),k=e("F/zT"),Y=e("BiO0"),C=e("CEpB"),f=e("0WSk"),E=e("Gn8c"),$=e("hd5d"),j=e("YRX9"),U=e("/y+f"),r=e("nKUr"),ne=["authors","category"],Oe=Object.values(U.b).map(function(ye){return{value:ye,label:Object(r.jsx)(l.a,{id:"CompetencyChallenges.types.".concat(ye)})}}),Te=function(){var X=Object(J.b)(),v=X.competencyChallenge,ee=X.categoryDepths,A=X.refreshData,te=Object(F.l)(),z=Number(te.id),se=Object(l.l)(),Ce=n.a.useForm(),ge=Object(y.a)(Ce,1),ue=ge[0],he=n.a.useWatch("type",ue),pe=Number.isNaN(z),Je=Object(O.useMemo)(function(){if(!(v!=null&&v.data))return{};var ie=v==null?void 0:v.data,G=ie.authors,N=ie.category,q=Object(p.a)(ie,ne);return Object(D.a)(Object(D.a)({},q),{},{authors:G.map(function(ae){var re=ae.id;return re}),category_id:N==null?void 0:N.id})},[v==null?void 0:v.data]),Ee=Object(O.useCallback)(function(){var ie=Object(i.a)(Object(I.a)().mark(function G(N){var q,ae,re,oe,de,S,xe,be;return Object(I.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return q=N.name,ae=N.type,re=N.is_active,oe=re===void 0?!1:re,de=N.is_highlighted,S=de===void 0?!1:de,xe=N.category_id,a.prev=1,a.next=4,Object(j.a)({name:q,is_active:oe,is_highlighted:S,type:ae,category_id:xe});case 4:if(be=a.sent,be.success){a.next=8;break}return R.b.error(be.message),a.abrupt("return");case 8:return R.b.success(se.formatMessage({id:be.message})),l.f.push("/competency-challenges/".concat(be.data.id,"/main")),a.next=12,A();case 12:a.next=17;break;case 14:a.prev=14,a.t0=a.catch(1),R.b.error(se.formatMessage({id:"error"}));case 17:case"end":return a.stop()}},G,null,[[1,14]])}));return function(G){return ie.apply(this,arguments)}}(),[]),Ue=Object(O.useCallback)(function(){var ie=Object(i.a)(Object(I.a)().mark(function G(N){var q,ae,re,oe;return Object(I.a)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.prev=0,q=ue.getFieldsValue(["image_url","image_path"]),ae=q.image_url,re=q.image_path,S.next=4,Object(j.g)(z,Object(D.a)(Object(D.a)({},N),{},{image_url:ae,image_path:re}));case 4:if(oe=S.sent,oe.success){S.next=8;break}return R.b.error(oe.message),S.abrupt("return");case 8:return R.b.success(se.formatMessage({id:oe.message})),S.next=11,A();case 11:S.next=16;break;case 13:S.prev=13,S.t0=S.catch(0),R.b.error(se.formatMessage({id:"error"}));case 16:case"end":return S.stop()}},G,null,[[0,13]])}));return function(G){return ie.apply(this,arguments)}}(),[z]);return Object(r.jsxs)(n.a,{form:ue,initialValues:Je,onFinish:pe?Ee:Ue,onValuesChange:function(G){(G==null?void 0:G.type)==="complex"&&ue.setFieldValue("category",null)},children:[Object(r.jsxs)(n.a.Group,{title:Object(r.jsx)(l.a,{id:"CompetencyChallenges.base"}),children:[Object(r.jsx)(W.a,{width:"md",name:"name",label:Object(r.jsx)(l.a,{id:"name"}),placeholder:se.formatMessage({id:"name"}),required:!0,rules:[{required:!0,message:se.formatMessage({id:"field_required"})}]}),Object(r.jsx)(B.a,{width:"md",name:"type",label:Object(r.jsx)(l.a,{id:"type"}),options:Oe,required:!0,rules:[{required:!0,message:se.formatMessage({id:"field_required"})}]}),he==="simple"&&Object(r.jsx)(n.a.Item,{name:"category_id",required:!0,label:Object(r.jsx)(l.a,{id:"category"}),rules:[{required:!0,message:se.formatMessage({id:"field_required"})}],children:Object(r.jsx)(C.a,{enabledDepth:ee.role})}),Object(r.jsx)(k.a,{name:"is_active",label:Object(r.jsx)(l.a,{id:"is_active"})}),Object(r.jsx)(k.a,{name:"is_highlighted",label:Object(r.jsx)(l.a,{id:"is_highlighted"}),tooltip:Object(r.jsx)(l.a,{id:"CompetencyChallenges.highlighted"})})]}),!pe&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(n.a.Group,{title:Object(r.jsx)(l.a,{id:"CompetencyChallenges.additional"}),children:[Object(r.jsx)(n.a.Item,{name:"description",label:Object(r.jsx)(l.a,{id:"description"}),valuePropName:"value",style:{width:440},children:Object(r.jsx)($.a,{directory:"competency-challenges/".concat(z)})}),Object(r.jsx)(Y.a,{width:"lg",name:"summary",label:Object(r.jsx)(l.a,{id:"summary"})}),Object(r.jsx)(n.a.Item,{name:"authors",label:Object(r.jsx)(l.a,{id:"author"}),style:{width:"100%",maxWidth:440},children:Object(r.jsx)(f.a,{multiple:!0})})]}),Object(r.jsx)(E.a,{wrapInForm:!1,folder:"/competency-challenges/".concat(z),title:"image",action:"/api/admin/competency-challenges/".concat(z,"?_method=PATCH"),src_name:"image_url",form_name:"image",getUploadedSrcField:function(G){return G.file.response.data.image_url},setPath:function(G){return ue.setFieldsValue(G)}})]})]})},Pe=e("P2fV"),T=e("NJEC"),V=e("5Dmo"),De=e("3S7+"),M=e("+L6B"),K=e("2/Rp"),fe=e("G3dp"),Fe=e("/MfK"),we=e("Hn4i"),Ke=e("enqX"),t=["scale_min","category_id"],Ae=[{title:Object(r.jsx)(l.a,{id:"ID"}),dataIndex:"id",editable:!1,render:function(X,v){if(typeof v.id!="string")return"-";var ee=v.id.split("-"),A=Object(y.a)(ee,2),te=A[0],z=A[1];return te==="new"?"-":z}},{title:Object(r.jsx)(l.a,{id:"min_points"}),dataIndex:"scale_min",valueType:"digit",formItemProps:{rules:[{required:!0,message:Object(r.jsx)(l.a,{id:"field_required"})},{type:"number",min:0,max:100,message:Object(r.jsx)(l.a,{id:"number_between",values:{min:0}})}]},fieldProps:{min:0}},{title:Object(r.jsx)(l.a,{id:"category"}),dataIndex:"category_id",render:function(X,v){return v.category_name},formItemProps:{rules:[{required:!0,message:Object(r.jsx)(l.a,{id:"field_required"})}]},renderFormItem:function(X,v,ee){var A,te=((A=ee.getFieldValue("table"))!==null&&A!==void 0?A:[]).map(function(z){return z.category_id});return Object(r.jsx)(Ke.a,{disabledNodes:te})}}],ze=function(X){return X.map(function(v){var ee=v.id,A=v.scale_min,te=v.category;return{id:"old-".concat(ee),scale_min:A,category_id:te.id,category_name:te.name_with_breadcrumbs}})},Ge=function(){var X,v,ee=Object(J.b)(),A=ee.competencyChallenge,te=ee.refreshData,z=Object(F.l)(),se=Number(z.id),Ce=(X=A==null||(v=A.data)===null||v===void 0?void 0:v.scales)!==null&&X!==void 0?X:[],ge=Object(O.useState)([]),ue=Object(y.a)(ge,2),he=ue[0],pe=ue[1],Je=Object(l.l)(),Ee=Object(O.useRef)(),Ue=Object(O.useRef)(),ie=Object(O.useRef)(),G=Object(O.useMemo)(function(){return ze(Ce)},[Ce]),N=Object(O.useMemo)(function(){return[].concat(Ae,[{valueType:"option",title:Object(r.jsx)(l.a,{id:"options"}),render:function(ae,re,oe,de){return[Object(r.jsx)(De.a,{title:Object(r.jsx)(l.a,{id:"edit",defaultMessage:"edit"}),children:Object(r.jsx)(K.a,{type:"primary",icon:Object(r.jsx)(fe.a,{}),onClick:function(){return de==null?void 0:de.startEditable(re.id)}})},"edit"),Object(r.jsx)(T.a,{title:Object(r.jsx)(l.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(i.a)(Object(I.a)().mark(function S(){var xe,be,m,a,s,c,o,d;return Object(I.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(typeof re.id=="string"){u.next=2;break}return u.abrupt("return");case 2:if(xe=re.id.split("-"),be=Object(y.a)(xe,2),m=be[0],a=be[1],m!=="new"){u.next=7;break}return o=(s=Ee.current)===null||s===void 0?void 0:s.getFieldValue("table"),(c=Ee.current)===null||c===void 0||c.setFieldValue("table",o.filter(function(L){var P=L.id;return P!==re.id})),u.abrupt("return");case 7:return u.next=9,Object(j.d)(+a);case 9:if(d=u.sent,!d.success){u.next=13;break}return u.next=13,te();case 13:case"end":return u.stop()}},S)})),okText:Object(r.jsx)(l.a,{id:"ok"}),cancelText:Object(r.jsx)(l.a,{id:"cancel"}),children:Object(r.jsx)(De.a,{title:Object(r.jsx)(l.a,{id:"delete",defaultMessage:"delete"}),children:Object(r.jsx)(K.a,{type:"primary",icon:Object(r.jsx)(Fe.a,{}),danger:!0})})},"delete")]}}])},[]);return Object(r.jsx)(n.a,{formRef:Ee,initialValues:{table:G},submitter:!1,children:Object(r.jsx)(we.a,{rowKey:function(ae){return ae.id},editableFormRef:Ue,controlled:!0,actionRef:ie,name:"table",columns:N,recordCreatorProps:{creatorButtonText:Object(r.jsx)(l.a,{id:"CompetencyChallenges.addNewRow"}),disabled:he.length>0,record:function(ae){return{id:"new-".concat(ae)}}},editable:{onlyOneLineEditorAlertMessage:Je.formatMessage({id:"CompetencyChallenges.onlyOneRowIsEditable"}),onSave:function(){var q=Object(i.a)(Object(I.a)().mark(function re(oe,de){var S,xe,be,m,a,s,c,o,d;return Object(I.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(S=de.scale_min,xe=de.category_id,be=Object(p.a)(de,t),typeof be.id=="string"){u.next=3;break}return u.abrupt("return");case 3:if(m=be.id.split("-"),a=Object(y.a)(m,2),s=a[0],c=a[1],s!=="new"){u.next=12;break}return u.next=7,Object(j.b)({scale_min:S,category_id:xe,competency_challenge_id:se});case 7:if(o=u.sent,!o.success){u.next=11;break}return u.next=11,te();case 11:return u.abrupt("return");case 12:return u.next=14,Object(j.h)(+c,{scale_min:S,category_id:xe,competency_challenge_id:se});case 14:if(d=u.sent,!d.success){u.next=18;break}return u.next=18,te();case 18:return u.abrupt("return");case 19:case"end":return u.stop()}},re)}));function ae(re,oe){return q.apply(this,arguments)}return ae}(),deletePopconfirmMessage:Object(r.jsx)(l.a,{id:"deleteQuestion"}),actionRender:function(ae,re,oe){if(typeof ae.id!="string")return[];var de=ae.id.split("-"),S=Object(y.a)(de,1),xe=S[0];return xe==="new"?[oe.save,oe.delete]:[oe.save,oe.cancel]},type:"single",editableKeys:he,onChange:pe}})})},Xe=e("/zsF"),He=e("PArb"),qe=e("DYRE"),$e=e("zeV3"),_e=e("uD7z"),We=e("FJDo"),Ye=e("yioT"),tt=e("qRSf"),ce=function(){var X=Object(J.b)(),v=X.competencyChallenge.data,ee=Object(O.useState)(!1),A=Object(y.a)(ee,2),te=A[0],z=A[1],se=Object(O.useState)(),Ce=Object(y.a)(se,2),ge=Ce[0],ue=Ce[1],he=Object(l.l)(),pe=Object(O.useCallback)(function(){(v==null?void 0:v.quiz_id)!==void 0&&(z(!0),Object(tt.c)(v==null?void 0:v.quiz_id).then(function(Ee){Ee.success&&ue(Ee.data)}).finally(function(){return z(!1)}))},[v==null?void 0:v.quiz_id]),Je=Object(O.useCallback)(function(){var Ee=Object(i.a)(Object(I.a)().mark(function Ue(ie){return Object(I.a)().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if((v==null?void 0:v.quiz_id)!==void 0){N.next=2;break}return N.abrupt("return");case 2:z(!0),Object(tt.f)(v==null?void 0:v.quiz_id,Object(D.a)(Object(D.a)({},ie),{},{value:"diagnostic-test"})).then(function(q){q.success&&ue(q.data)}).finally(function(){return z(!1)});case 4:case"end":return N.stop()}},Ue)}));return function(Ue){return Ee.apply(this,arguments)}}(),[]);return Object(O.useEffect)(function(){pe()},[pe]),ge?Object(r.jsxs)("div",{style:{position:"relative",paddingBottom:"64px"},children:[Object(r.jsx)(n.a,{submitter:{render:function(Ue,ie){var G=Object(y.a)(ie,2),N=G[0],q=G[1];return Object(r.jsxs)($e.b,{style:{position:"absolute",bottom:0,left:0},children:[N,q]})}},initialValues:ge,onFinish:Je,children:Object(r.jsxs)(_e.a,{children:[Object(r.jsx)(We.a,{name:"max_attempts",label:Object(r.jsx)(l.a,{id:"max_attempts"}),tooltip:Object(r.jsx)(l.a,{id:"max_attempts"}),placeholder:he.formatMessage({id:"max_attempts",defaultMessage:"max_attempts"})}),Object(r.jsx)(We.a,{name:"max_execution_time",label:Object(r.jsx)(l.a,{id:"max_execution_time"}),tooltip:Object(r.jsx)(l.a,{id:"max_execution_time"}),placeholder:he.formatMessage({id:"max_execution_time",defaultMessage:"max_execution_time"})})]})}),Object(r.jsx)(He.a,{}),Object(r.jsx)(Ye.a,{questions:ge.questions,quizId:ge.id,onAdded:pe,onEdited:pe,onRemoved:pe,tableHeader:Object(r.jsx)(l.a,{id:"questions"}),tableLoading:te,questionsCategory:{type:"question"}})]}):Object(r.jsx)(w.a,{})},Ze=function(){var X,v=Object(J.b)(),ee=v.competencyChallenge,A=Object(l.l)(),te=Object(F.l)(),z=te.id,se=te.tab,Ce=se===void 0?"main":se,ge=z==="new",ue=Object(O.useMemo)(function(){var he;return ge?A.formatMessage({id:"CompetencyChallenges.new_challenge"}):(he=ee.data)!==null&&he!==void 0&&he.name?ee.data.name:A.formatMessage({id:"menu.Competency challenges"})},[A,(X=ee.data)===null||X===void 0?void 0:X.name]);return Object(r.jsx)(ve.a,{title:ue,header:{breadcrumb:{routes:[{path:"competency-challenges",breadcrumbName:A.formatMessage({id:"menu.Competency challenges"})},{path:String(z),breadcrumbName:ue},{path:Ce,breadcrumbName:A.formatMessage({id:"CompetencyChallenges.".concat(Ce)})}]}},children:Object(r.jsxs)(H.a,{bodyStyle:{padding:"24px"},tabs:{type:"card",cardProps:{loading:ee.loading&&Object(r.jsx)(w.a,{})},activeKey:Ce,onChange:function(pe){l.f.push("/competency-challenges/".concat(z,"/").concat(pe))}},children:[Object(r.jsx)(H.a.TabPane,{tab:Object(r.jsx)(l.a,{id:"CompetencyChallenges.main"}),children:Object(r.jsx)(Te,{})},"main"),Object(r.jsx)(H.a.TabPane,{tab:Object(r.jsx)(l.a,{id:"CompetencyChallenges.scales"}),disabled:ge,children:Object(r.jsx)(Ge,{})},"scales"),Object(r.jsx)(H.a.TabPane,{tab:Object(r.jsx)(l.a,{id:"CompetencyChallenges.diagnostic-test"}),disabled:ge,children:Object(r.jsx)(ce,{})},"diagnostic-test")]})})},it=function(){return Object(r.jsx)(J.a,{children:Object(r.jsx)(Ze,{})})},ct=x.default=it},YRX9:function(Qe,x,e){"use strict";e.d(x,"f",function(){return F}),e.d(x,"e",function(){return H}),e.d(x,"a",function(){return I}),e.d(x,"g",function(){return R}),e.d(x,"c",function(){return D}),e.d(x,"b",function(){return y}),e.d(x,"h",function(){return W}),e.d(x,"d",function(){return k});var h=e("qLMh"),w=e("k1fw"),O=e("9og8"),l=e("9kvl");function F(C,f){return ve.apply(this,arguments)}function ve(){return ve=Object(O.a)(Object(h.a)().mark(function C(f,E){return Object(h.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(l.i)("/api/admin/competency-challenges",Object(w.a)({method:"GET",useCache:!1,params:f},E||{})));case 1:case"end":return j.stop()}},C)})),ve.apply(this,arguments)}function H(C,f){return J.apply(this,arguments)}function J(){return J=Object(O.a)(Object(h.a)().mark(function C(f,E){return Object(h.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(l.i)("/api/admin/competency-challenges/".concat(f),Object(w.a)({method:"GET",useCache:!1},E||{})));case 1:case"end":return j.stop()}},C)})),J.apply(this,arguments)}function I(C,f){return _.apply(this,arguments)}function _(){return _=Object(O.a)(Object(h.a)().mark(function C(f,E){return Object(h.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(l.i)("/api/admin/competency-challenges",Object(w.a)({method:"POST",headers:{"Content-Type":"application/json"},data:f},E||{})));case 1:case"end":return j.stop()}},C)})),_.apply(this,arguments)}function R(C,f,E){return i.apply(this,arguments)}function i(){return i=Object(O.a)(Object(h.a)().mark(function C(f,E,$){return Object(h.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",Object(l.i)("/api/admin/competency-challenges/".concat(f),Object(w.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:E},$||{})));case 1:case"end":return U.stop()}},C)})),i.apply(this,arguments)}function D(C,f){return p.apply(this,arguments)}function p(){return p=Object(O.a)(Object(h.a)().mark(function C(f,E){return Object(h.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(l.i)("/api/admin/competency-challenges/".concat(f),Object(w.a)({method:"DELETE"},E||{})));case 1:case"end":return j.stop()}},C)})),p.apply(this,arguments)}function y(C,f){return n.apply(this,arguments)}function n(){return n=Object(O.a)(Object(h.a)().mark(function C(f,E){return Object(h.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(l.i)("/api/admin/competency-challenges/scales",Object(w.a)({method:"POST",headers:{"Content-Type":"application/json"},data:f},E||{})));case 1:case"end":return j.stop()}},C)})),n.apply(this,arguments)}function W(C,f,E){return B.apply(this,arguments)}function B(){return B=Object(O.a)(Object(h.a)().mark(function C(f,E,$){return Object(h.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",Object(l.i)("/api/admin/competency-challenges/scales/".concat(f),Object(w.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:E},$||{})));case 1:case"end":return U.stop()}},C)})),B.apply(this,arguments)}function k(C,f){return Y.apply(this,arguments)}function Y(){return Y=Object(O.a)(Object(h.a)().mark(function C(f,E){return Object(h.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(l.i)("/api/admin/competency-challenges/scales/".concat(f),Object(w.a)({method:"DELETE"},E||{})));case 1:case"end":return j.stop()}},C)})),Y.apply(this,arguments)}},enqX:function(Qe,x,e){"use strict";e.d(x,"a",function(){return i});var h=e("nRaC"),w=e("5RzL"),O=e("tJVT"),l=e("q1tI"),F=e.n(l),ve=e("9kvl"),H=e("JifO"),J=e("tKSU"),I=e("nKUr"),_=e.n(I),R=function D(p,y,n){var W,B=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return(W=p.subcategories)!==null&&W!==void 0&&W.length?{title:p.name,value:p.id,disabled:B!==n||y.includes(p.id),children:p.subcategories.map(function(k){return D(k,y,n,B+1)})}:{title:p.name,value:p.id,disabled:B!==n||y.includes(p.id)}},i=function(p){var y,n,W,B=p.value,k=p.onChange,Y=p.type,C=Y===void 0?"scale":Y,f=p.disabledNodes,E=f===void 0?[]:f,$=Object(l.useState)([]),j=Object(O.a)($,2),U=j[0],r=j[1],ne=Object(J.b)(),Oe=ne.categoryDepths,Te=ne.competencyChallenge,Pe=Object(l.useMemo)(function(){var V;return((V=Te.data)===null||V===void 0?void 0:V.type)==="simple"?U.filter(function(De){var M,K;return De.id===((M=Te.data)===null||M===void 0||(K=M.category)===null||K===void 0?void 0:K.id)}):U},[U,(y=Te.data)===null||y===void 0?void 0:y.type,(n=Te.data)===null||n===void 0||(W=n.category)===null||W===void 0?void 0:W.id]),T=Object(l.useMemo)(function(){return Pe.map(function(V){return R(V,E,Oe[C])})},[Pe,E,C]);return Object(l.useEffect)(function(){Object(H.c)().then(function(V){V.success&&r(V.data)})},[]),Object(I.jsx)(w.a,{loading:U.length===0,showSearch:!0,value:B,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:Object(I.jsx)(ve.a,{id:"select",defaultMessage:"Please select"}),allowClear:!0,treeDefaultExpandAll:!0,onChange:k,treeData:T,disabled:U.length===0})}},hd5d:function(Qe,x,e){"use strict";var h=e("qLMh"),w=e("9og8"),O=e("q1tI"),l=e.n(O),F=e("acco"),ve=e.n(F),H=e("BAh9"),J=e("vtG9"),I=e.n(J),_=e("9kvl"),R=e("nKUr"),i=e.n(R),D=function(n){var W=n.attrs,B=W.href,k=B.split("/").pop();return Object(R.jsx)("p",{children:Object(R.jsx)("a",{rel:"noreferrer",href:B,target:"_blank",children:k})})},p=function(n){var W=n.value,B=n.onChange,k=n.directory,Y=k===void 0?"/wysiwyg":k,C=Object(_.l)();return Object(R.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(R.jsx)(ve.a,{excludeBlockMenuItems:["Sketch"],embeds:[{matcher:function(E){return!0},component:D}],uploadImage:function(){var f=Object(w.a)(Object(h.a)().mark(function E($){var j,U;return Object(h.a)().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,Object(H.e)($,Y);case 2:if(j=ne.sent,!j.success){ne.next=8;break}if(!$.type.includes("image/")){ne.next=7;break}return U=j.data[0].name.includes("/")?j.data[0].name:"".concat(Y).concat(j.data[0].name),ne.abrupt("return",Object(H.d)(U,1e3));case 7:return ne.abrupt("return",j.data[0].url);case 8:throw new Error("Error while uploading");case 9:case"end":return ne.stop()}},E)}));return function(E){return f.apply(this,arguments)}}(),defaultValue:W||"",onChange:function(E){return B&&B(E())},placeholder:C.formatMessage({id:"wysiwyg_placeholder"})})})};x.a=p},tKSU:function(Qe,x,e){"use strict";e.d(x,"b",function(){return p}),e.d(x,"a",function(){return y});var h=e("k1fw"),w=e("tJVT"),O=e("qLMh"),l=e("9og8"),F=e("q1tI"),ve=e.n(F),H=e("Ty5D"),J=e("YRX9"),I=e("+up7"),_=e("nKUr"),R=e.n(_),i={categoryDepths:{scale:2,question:1,role:0},competencyChallenge:{data:null,loading:!1},refreshData:function(){var n=Object(l.a)(Object(O.a)().mark(function B(){return Object(O.a)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.abrupt("return",console.warn("CONTEXT INIT"));case 1:case"end":return Y.stop()}},B)}));function W(){return n.apply(this,arguments)}return W}()},D=ve.a.createContext(i),p=function(){return Object(F.useContext)(D)},y=function(W){var B=W.children,k=Object(F.useState)(i.competencyChallenge),Y=Object(w.a)(k,2),C=Y[0],f=Y[1],E=Object(F.useState)(i.categoryDepths),$=Object(w.a)(E,2),j=$[0],U=$[1],r=Object(H.l)(),ne=r.id,Oe=Number(ne),Te=Object(F.useCallback)(Object(l.a)(Object(O.a)().mark(function T(){var V;return Object(O.a)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(!Number.isNaN(Oe)){M.next=2;break}return M.abrupt("return");case 2:return M.prev=2,f(function(K){return Object(h.a)(Object(h.a)({},K),{},{loading:!0})}),M.next=6,Object(J.e)(Oe);case 6:if(V=M.sent,V.success){M.next=10;break}return f(function(K){return Object(h.a)(Object(h.a)({},K),{},{error:V.errors})}),M.abrupt("return");case 10:f(function(K){return Object(h.a)(Object(h.a)({},K),{},{data:V.data})}),M.next=16;break;case 13:M.prev=13,M.t0=M.catch(2),f(function(K){return Object(h.a)(Object(h.a)({},K),{},{error:M.t0})});case 16:return M.prev=16,f(function(K){return Object(h.a)(Object(h.a)({},K),{},{loading:!1})}),M.finish(16);case 19:case"end":return M.stop()}},T,null,[[2,13,16,19]])})),[Oe]),Pe=Object(F.useCallback)(Object(l.a)(Object(O.a)().mark(function T(){var V,De,M,K,fe,Fe,we,Ke,t,Ae,ze,Ge,Xe,He,qe,$e,_e,We,Ye;return Object(O.a)().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.prev=0,ce.next=3,Object(I.a)();case 3:if($e=ce.sent,$e.success){ce.next=6;break}return ce.abrupt("return");case 6:_e=Number((V=$e.data)===null||V===void 0||(De=V.escolalms_competency_challenge)===null||De===void 0||(M=De.category)===null||M===void 0||(K=M.scale)===null||K===void 0||(fe=K.depth)===null||fe===void 0?void 0:fe.value),We=Number((Fe=$e.data)===null||Fe===void 0||(we=Fe.escolalms_competency_challenge)===null||we===void 0||(Ke=we.category)===null||Ke===void 0||(t=Ke.question)===null||t===void 0||(Ae=t.depth)===null||Ae===void 0?void 0:Ae.value),Ye=Number((ze=$e.data)===null||ze===void 0||(Ge=ze.escolalms_competency_challenge)===null||Ge===void 0||(Xe=Ge.category)===null||Xe===void 0||(He=Xe.role)===null||He===void 0||(qe=He.depth)===null||qe===void 0?void 0:qe.value),U({scale:Number.isNaN(_e)?2:_e,question:Number.isNaN(We)?1:We,role:Number.isNaN(Ye)?0:Ye}),ce.next=15;break;case 12:ce.prev=12,ce.t0=ce.catch(0),console.error(ce.t0);case 15:case"end":return ce.stop()}},T,null,[[0,12]])})),[]);return Object(F.useEffect)(function(){Te(),Pe()},[Te,Pe]),Object(_.jsx)(D.Provider,{value:{categoryDepths:j,competencyChallenge:C,refreshData:Te},children:B})}},vtG9:function(Qe,x,e){},yioT:function(Qe,x,e){"use strict";e.d(x,"a",function(){return be});var h=e("tU7J"),w=e("wFql"),O=e("BoS7"),l=e("Sdc0"),F=e("oBTY"),ve=e("+L6B"),H=e("2/Rp"),J=e("bbsP"),I=e("/wGt"),_=e("qLMh"),R=e("9og8"),i=e("PpiC"),D=e("tJVT"),p=e("k1fw"),y=e("q1tI"),n=e("9kvl"),W=e("YJCA"),B=e("wYyv"),k=e("smpX"),Y=e("eyie"),C=e("w5pM"),f=e("mWMg"),E=e("Vpfc"),$=e("qRSf"),j=e("DYRE"),U=e("zeV3"),r=e("/zsF"),ne=e("PArb"),Oe=e("VMEa"),Te=e("yj/a"),Pe=e("FJDo"),T=e("/y+f"),V=e("enqX"),De=e("5Dmo"),M=e("3S7+"),K=e("jrin"),fe=e("Qurx"),Fe=e("x1Ii"),we=e("tneF"),Ke=e("/MfK"),t=e("nKUr"),Ae,ze=(Ae={},Object(K.a)(Ae,T.d.MULTIPLE_CHOICE,[{isCorrect:!1,value:""},{isCorrect:!1,value:""}]),Object(K.a)(Ae,T.d.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS,[{value:"",weight:""},{value:"",weight:""}]),Ae),Ge=function(a){var s,c=a.type,o=Object(n.l)();return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(fe.a,{name:"question",label:Object(t.jsx)(n.a,{id:"question"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0}),Object(t.jsx)(Fe.b,{name:"answers",creatorButtonProps:{creatorButtonText:o.formatMessage({id:"Questions.addAnswer"})},actionRender:function(){return[]},initialValue:(s=ze[c])!==null&&s!==void 0?s:[],children:function(b,u,L,P){return Object(t.jsxs)(Oe.a.Group,{title:Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(n.a,{id:"Questions.answer",values:{ordinalNumber:u+1}}),P>2&&Object(t.jsx)(M.a,{title:o.formatMessage({id:"Questions.deleteAnswer"}),children:Object(t.jsx)(H.a,{type:"text",icon:Object(t.jsx)(Ke.a,{}),onClick:function(){return L.remove(b.name)}})})]}),titleStyle:{width:"100%",display:"flex",justifyContent:"space-between"},children:[c===T.d.MULTIPLE_CHOICE&&Object(t.jsx)(we.a,{name:"isCorrect",label:Object(t.jsx)(n.a,{id:"Questions.correctAnswer",defaultMessage:"Is Correct Answer?"}),rules:[function(Q){var le=Q.getFieldValue;return{validator:function(){var me,Be=(me=le("answers"))!==null&&me!==void 0?me:[];return Be.filter(function(Me){return Me==null?void 0:Me.isCorrect}).length>1?Promise.reject("Only one answer can be correct"):Promise.resolve()},message:Object(t.jsx)(n.a,{id:"Questions.onlyOneAnswerIsCorrect"})}}]}),Object(t.jsx)(fe.a,{name:"value",rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],label:Object(t.jsx)(n.a,{id:"content",defaultMessage:"Content"})}),c===T.d.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS&&Object(t.jsx)(Pe.a,{name:"weight",rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],fieldProps:{min:-Number.MAX_SAFE_INTEGER,addonAfter:"%"},label:Object(t.jsx)(n.a,{id:"weight",defaultMessage:"Weight"})})]})}})]})},Xe=function(){return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(fe.a,{name:"question",label:Object(t.jsx)(n.a,{id:"question"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0}),Object(t.jsx)(we.a,{name:"isCorrect",label:Object(t.jsx)(n.a,{id:"Questions.correctAnswer"})})]})},He=[{value:""}],qe=function(){var a=Object(n.l)();return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(fe.a,{name:"question",label:Object(t.jsx)(n.a,{id:"question"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0}),Object(t.jsx)(Fe.b,{name:"answers",creatorButtonProps:{creatorButtonText:a.formatMessage({id:"Questions.addAnswer"})},deleteIconProps:{tooltipText:a.formatMessage({id:"Questions.deleteAnswer"})},actionRender:function(c,o,d){var b=Object(D.a)(d,2),u=b[1];return[u]},min:1,initialValue:He,children:function(c,o){return Object(t.jsx)(fe.a,{name:"value",rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],label:Object(t.jsx)(n.a,{id:"Questions.answer",values:{ordinalNumber:o+1},defaultMessage:"Answer ".concat(o+1)})})}})]})},$e=[{firstOfPair:"",secondOfPair:""}],_e=function(){var a=Object(n.l)();return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(fe.a,{name:"question",label:Object(t.jsx)(n.a,{id:"question"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0}),Object(t.jsx)(Fe.b,{name:"answers",creatorButtonProps:{creatorButtonText:a.formatMessage({id:"Questions.addMatchingPair",defaultMessage:"Add Matching Pair"})},deleteIconProps:{tooltipText:a.formatMessage({id:"Questions.deletePair"})},actionRender:function(c,o,d){var b=Object(D.a)(d,2),u=b[1];return[u]},min:1,initialValue:$e,children:function(c,o){return Object(t.jsxs)(Oe.a.Group,{direction:"horizontal",align:"baseline",size:"small",spaceProps:{style:{flexWrap:"nowrap"}},title:Object(t.jsx)(n.a,{id:"Questions.pair",values:{ordinalNumber:o+1},defaultMessage:"Pair ".concat(o+1)}),children:[Object(t.jsx)(fe.a,{name:"firstOfPair",rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}]}),Object(t.jsx)(fe.a,{name:"secondOfPair",rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}]})]})}})]})},We=function(){return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(fe.a,{name:"question",label:Object(t.jsx)(n.a,{id:"question"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0}),Object(t.jsx)(Pe.a,{name:"answer",label:Object(t.jsx)(n.a,{id:"answer"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0}),Object(t.jsx)(Pe.a,{name:"errorMargin",fieldProps:{addonAfter:"+/-"},label:Object(t.jsx)(n.a,{id:"Questions.errorMargin"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0})]})},Ye=e("BiO0"),tt=function(){return Object(t.jsx)(Ye.a,{name:"question",label:Object(t.jsx)(n.a,{id:"question"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0})},ce=function(a){var s=a.type;if(!s)return null;switch(s){case T.d.MULTIPLE_CHOICE:case T.d.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS:return Object(t.jsx)(Ge,{type:s});case T.d.TRUE_FALSE:return Object(t.jsx)(Xe,{});case T.d.SHORT_ANSWERS:return Object(t.jsx)(qe,{});case T.d.MATCHING:return Object(t.jsx)(_e,{});case T.d.NUMERICAL_QUESTION:return Object(t.jsx)(We,{});case T.d.ESSAY:case T.d.DESCRIPTION:return Object(t.jsx)(tt,{})}return Object(t.jsxs)("pre",{children:["Unsupported type ",s]})},Ze=e("rAM+"),it=["question"],ct=function(a){for(var s=["~","=","#","{","}",":"],c="",o=0;o<a.length;o++){var d=a[o];s.includes(d)?c+="\\".concat(d):c+=d}return c},ye=function(a){var s=a.question,c=a.answers;if(c.length===0)return"".concat(s,"{}");var o="".concat(s,"{"),d=Object(Ze.a)(c),b;try{for(d.s();!(b=d.n()).done;){var u=b.value,L=u.isCorrect,P=u.value,Q=L?"=":"~";o+="".concat(Q).concat(P)}}catch(le){d.e(le)}finally{d.f()}return o+="}",o.trim()},X=function(a){var s=a.question,c=a.answers;if(c.length==0)return"".concat(s,"{}");var o="".concat(s,"{"),d=Object(Ze.a)(c),b;try{for(d.s();!(b=d.n()).done;){var u=b.value,L=u.value,P=u.weight;o+="~%".concat(P,"%").concat(L)}}catch(Q){d.e(Q)}finally{d.f()}return o+="}",o.trim()},v=function(a){var s=a.question,c=a.isCorrect;return"".concat(s,"{").concat(c?"T":"F","}")},ee=function(a){var s=a.question,c=a.answers;if(c.length===0)return"".concat(s,"{}");var o="".concat(s,"{"),d=Object(Ze.a)(c),b;try{for(d.s();!(b=d.n()).done;){var u=b.value,L=u.value;o+="=".concat(L)}}catch(P){d.e(P)}finally{d.f()}return o+="}",o.trim()},A=function(a){var s=a.question,c=a.answers;if(c.length===0)return"".concat(s,"{}");var o="".concat(s,"{"),d=Object(Ze.a)(c),b;try{for(d.s();!(b=d.n()).done;){var u=b.value,L=u.firstOfPair,P=u.secondOfPair;o+="=".concat(L,"->").concat(P)}}catch(Q){d.e(Q)}finally{d.f()}return o+="}",o.trim()},te=function(a){var s=a.question,c=a.answer,o=a.errorMargin;return"".concat(s,"{#").concat(c,":").concat(o,"}")},z=function(a){var s=a.question;return"".concat(s,"{}")},se=function(a){var s=a.question;return s},Ce=function(a){var s=a.question,c=Object(i.a)(a,it),o=Object(p.a)({question:ct(s)},c);switch(o.type){case T.d.MULTIPLE_CHOICE:return ye(o);case T.d.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS:return X(o);case T.d.TRUE_FALSE:return v(o);case T.d.SHORT_ANSWERS:return ee(o);case T.d.MATCHING:return A(o);case T.d.NUMERICAL_QUESTION:return te(o);case T.d.ESSAY:return z(o);case T.d.DESCRIPTION:return se(o);default:throw new Error("Unsupported type: ".concat(o.type))}},ge=function(a,s){var c=s.type,o=s.score,d=s.category_id,b=a==null?void 0:a.stem.text,u=a.choices.every(function(Q){var le=Q.weight;return le===null});if(u){var L=a.choices.map(function(Q){var le=Q.isCorrect,Ne=Q.text;return{isCorrect:le,value:Ne.text}});return{type:c,score:o,category_id:d,question:b,answers:L}}var P=a.choices.reduce(function(Q,le){var Ne=le.weight,me=le.text;return Ne!==null?[].concat(Object(F.a)(Q),[{weight:Ne,value:me.text}]):Q},[]);return{type:c,score:o,category_id:d,question:b,answers:P}},ue=function(a,s){var c=s.type,o=s.score,d=s.category_id,b=a==null?void 0:a.stem.text,u=a.isTrue;return{type:c,score:o,category_id:d,question:b,isCorrect:u}},he=function(a,s){var c=s.type,o=s.score,d=s.category_id,b=a==null?void 0:a.stem.text,u=a.choices.map(function(L){var P=L.text;return{value:P.text}});return{type:c,score:o,category_id:d,question:b,answers:u}},pe=function(a,s){var c=s.type,o=s.score,d=s.category_id,b=a==null?void 0:a.stem.text,u=a.matchPairs.map(function(L){var P=L.subquestion,Q=L.subanswer;return{firstOfPair:P.text,secondOfPair:Q}});return{type:c,score:o,category_id:d,question:b,answers:u}},Je=function(a,s){var c=s.type,o=s.score,d=s.category_id,b=a==null?void 0:a.stem.text;if(Array.isArray(a==null?void 0:a.choices))throw new Error("Unsupported choices type: array");var u=a==null?void 0:a.choices.number,L=a==null?void 0:a.choices.range;if(u===void 0||L===void 0)throw new Error("Value undefined - answer: ".concat(u," errorMargin: ").concat(L));return{type:c,score:o,category_id:d,question:b,answer:u,errorMargin:L}},Ee=function(a,s){var c=s.type,o=s.score,d=s.category_id,b=a==null?void 0:a.stem.text;return{type:c,score:o,category_id:d,question:b}};function Ue(m){if(!!m){var a=Object(k.parse)(m.value),s=Object(D.a)(a,1),c=s[0];switch(c.type){case"MC":return ge(c,m);case"TF":return ue(c,m);case"Short":return he(c,m);case"Matching":return pe(c,m);case"Numerical":return Je(c,m);case"Description":case"Essay":return Ee(c,m);default:throw new Error("Unsupported type: ".concat(c==null?void 0:c.type))}}}var ie=["type","score","category"],G=Object.values(T.d).reduce(function(m,a){return a?[].concat(Object(F.a)(m),[{value:a,label:Object(t.jsx)(n.a,{id:"gift_type.".concat(a)})}]):m},[]),N=function(a){var s=a.onSubmit,c=a.values,o=a.competencyChallengeCategoryTreeProps,d=o===void 0?!1:o,b=Object(n.l)(),u=Oe.a.useForm(),L=Object(D.a)(u,1),P=L[0],Q=Oe.a.useWatch("type",P),le=Object(y.useMemo)(function(){return Ue(c)},[c]),Ne=Object(y.useCallback)(function(){var me=Object(R.a)(Object(_.a)().mark(function Be(Me){var at,ke,nt,rt;return Object(_.a)().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return at=Ce(Me),ke=Me.score,nt=Me.category_id,Se.next=4,s({value:at,score:ke,category_id:nt});case 4:if(rt=Se.sent,rt){Se.next=7;break}return Se.abrupt("return");case 7:P.resetFields();case 8:case"end":return Se.stop()}},Be)}));return function(Be){return me.apply(this,arguments)}}(),[]);return Object(y.useEffect)(function(){P.resetFields()},[le]),Object(y.useEffect)(function(){if(Q){var me=P.getFieldsValue(),Be=Object.keys(me).filter(function(Me){return!ie.includes(Me)});P.resetFields(Be)}},[Q]),Object(t.jsxs)(U.b,{direction:"vertical",style:{display:"flex"},children:[Object(t.jsx)(ne.a,{children:Object(t.jsx)(n.a,{id:le?"Questions.edit":"addNewQuestion"})}),Object(t.jsxs)(Oe.a,{layout:"horizontal",form:P,onFinish:Ne,initialValues:le,children:[Object(t.jsx)(Te.a,{name:"type",placeholder:b.formatMessage({id:"selectNewQuestionType",defaultMessage:"Select new question type"}),label:Object(t.jsx)(n.a,{id:"type",defaultMessage:"Type:"}),options:G,rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0}),Object(t.jsx)(ce,{type:Q}),Object(t.jsx)(Pe.a,{name:"score",label:Object(t.jsx)(n.a,{id:"Questions.score",defaultMessage:"Score"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}]}),d&&Object(t.jsx)(Oe.a.Item,{name:"category_id",label:Object(t.jsx)(n.a,{id:"category",defaultMessage:"Category"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0,children:Object(t.jsx)(V.a,Object(p.a)({},typeof d=="object"?d:{}))})]})]})},q=e("60mZ"),ae=["className","style"],re=Object(W.c)(function(){return Object(t.jsx)(Y.a,{style:{cursor:"grab",color:"#999"}})}),oe=Object(W.b)(function(m){return Object(t.jsx)("tr",Object(p.a)({},m))}),de=Object(W.a)(function(m){return Object(t.jsx)("tbody",Object(p.a)({},m))}),S=[{title:Object(t.jsx)(n.a,{id:"sort",defaultMessage:"sort"}),dataIndex:"id",width:60,className:"drag-visible",render:function(){return Object(t.jsx)(re,{})}},{title:Object(t.jsx)(n.a,{id:"type",defaultMessage:"Type"}),dataIndex:"type",hideInForm:!0,hideInSearch:!0,hideInSetting:!0,render:function(a,s){return Object(t.jsx)(n.a,{id:"gift_type.".concat(s.type)})}},{title:Object(t.jsx)(n.a,{id:"question",defaultMessage:"Question"}),dataIndex:"question",hideInForm:!0,hideInSearch:!0,hideInSetting:!0,render:function(a,s){var c=Object(k.parse)(s.value);return c!=null&&c[0]&&"stem"in c[0]?c[0].stem.text:"question"}}],xe={title:Object(t.jsx)(n.a,{id:"category",defaultMessage:"Category"}),dataIndex:"category_id",hideInForm:!0,hideInSearch:!0,hideInSetting:!0,render:function(a,s){return typeof s.category_id=="number"?Object(t.jsx)(E.a,{type:"Category",type_id:s.category_id}):"-"}},be=function(a){var s=a.questions,c=a.onAdded,o=a.onRemoved,d=a.onEdited,b=a.quizId,u=a.tableLoading,L=a.tableHeader,P=a.questionsCategory,Q=Object(y.useState)(!1),le=Object(D.a)(Q,2),Ne=le[0],me=le[1],Be=Object(y.useState)(!1),Me=Object(D.a)(Be,2),at=Me[0],ke=Me[1],nt=Object(y.useState)(),rt=Object(D.a)(nt,2),Le=rt[0],Se=rt[1],dt=Object(y.useState)(!1),ot=Object(D.a)(dt,2),mt=ot[0],jt=ot[1],vt=Object(y.useState)(s),lt=Object(D.a)(vt,2),st=lt[0],ut=lt[1],ft=Object(y.useRef)();Object(y.useEffect)(function(){var je;(je=ft.current)===null||je===void 0||je.reload(),ut(s)},[s]);var bt=function(Z){var Re=Z.oldIndex,Ie=Z.newIndex;if(Re!==Ie){var Ve=Object(B.a)(st.slice(),Re,Ie).filter(Boolean).map(function(g,et){return Object(p.a)(Object(p.a)({},g),{},{order:et})});Ve.forEach(function(g,et){g.id!==st[et].id&&Object($.g)(g.id,Object(p.a)(Object(p.a)({},g),{},{order:et+1,topic_gift_quiz_id:b}))}),ut(Ve)}},Ot=function(Z){return Object(t.jsx)(de,Object(p.a)({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:bt},Z))},gt=function(Z){var Re=Z.className,Ie=Z.style,Ve=Object(i.a)(Z,ae),g=st.findIndex(function(et){return et.id===Ve["data-row-key"]});return Object(t.jsx)(oe,Object(p.a)({index:g},Ve))},ht=Object(y.useCallback)(function(){var je=Object(R.a)(Object(_.a)().mark(function Z(Re){var Ie;return Object(_.a)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.prev=0,me(!0),g.next=4,Object($.a)(Object(p.a)({topic_gift_quiz_id:b},Re));case 4:return Ie=g.sent,ke(!1),c==null||c(),g.abrupt("return",Ie.success);case 10:return g.prev=10,g.t0=g.catch(0),console.log(g.t0),g.abrupt("return",!1);case 14:return g.prev=14,me(!1),g.finish(14);case 17:case"end":return g.stop()}},Z,null,[[0,10,14,17]])}));return function(Z){return je.apply(this,arguments)}}(),[at,b]),pt=Object(y.useCallback)(function(){var je=Object(R.a)(Object(_.a)().mark(function Z(Re){var Ie;return Object(_.a)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if((Le==null?void 0:Le.id)!==void 0){g.next=2;break}return g.abrupt("return",!1);case 2:return g.prev=2,me(!0),g.next=6,Object($.g)(Le.id,Object(p.a)({topic_gift_quiz_id:b},Re));case 6:return Ie=g.sent,Se(void 0),d==null||d(),g.abrupt("return",Ie.success);case 12:return g.prev=12,g.t0=g.catch(2),console.log(g.t0),g.abrupt("return",!1);case 16:return g.prev=16,me(!1),g.finish(16);case 19:case"end":return g.stop()}},Z,null,[[2,12,16,19]])}));return function(Z){return je.apply(this,arguments)}}(),[Le==null?void 0:Le.id,b]);return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(I.a,{open:at,onClose:function(){return ke(!1)},children:Object(t.jsx)(N,{onSubmit:ht,competencyChallengeCategoryTreeProps:P})}),Object(t.jsx)(I.a,{open:!!Le,onClose:function(){return Se(void 0)},children:Object(t.jsx)(N,{onSubmit:pt,competencyChallengeCategoryTreeProps:P,values:Le})}),Object(t.jsx)(f.a,{search:!1,cardProps:{bodyStyle:{padding:0}},loading:u,headerTitle:L,toolbar:{settings:[]},toolBarRender:function(){return[Object(t.jsxs)(H.a,{icon:Object(t.jsx)(C.a,{}),type:"primary",onClick:function(){return ke(!0)},children:[" ",Object(t.jsx)(n.a,{id:"addNewQuestion",defaultMessage:"Add new question"})]},"add")]},columns:[].concat(S,Object(F.a)(P?[xe]:[]),[{title:Object(t.jsx)(n.a,{id:"actions",defaultMessage:"Actions"}),dataIndex:"address",valueType:"option",render:function(Z,Re){return[Object(t.jsx)(H.a,{size:"small",type:"primary",onClick:function(){Se(Re)},children:Object(t.jsx)(n.a,{id:"Questions.edit",defaultMessage:"Edit Question"})},"edit"),Object(t.jsx)(H.a,{loading:Ne,size:"small",danger:!0,onClick:function(){me(!0),Object($.b)(Re.id).then(function(){o&&o()}).finally(function(){me(!1)})},children:Object(t.jsx)(n.a,{id:"Questions.delete",defaultMessage:"Delete Question"})},"delete")]}}]),rowKey:function(Z){return Z.id},pagination:!1,dataSource:st,components:{body:{wrapper:Ot,row:gt}}}),Object(t.jsxs)(w.a,{style:{marginTop:"3em"},children:["Debug GIFT: ",Object(t.jsx)(l.a,{checked:mt,onChange:function(Z){return jt(Z)}})]})]})}}}]);

//# sourceMappingURL=p__CompetencyChallenges__form.d25e204e.async.js.map