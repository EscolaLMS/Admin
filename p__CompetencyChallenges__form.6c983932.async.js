(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"/y+f":function(ge,F,t){"use strict";t.d(F,"g",function(){return $}),t.d(F,"e",function(){return E}),t.d(F,"f",function(){return f}),t.d(F,"d",function(){return K}),t.d(F,"a",function(){return _}),t.d(F,"c",function(){return X}),t.d(F,"b",function(){return Z});var $;(function(s){s.Unselected="",s.RichText="EscolaLms\\TopicTypes\\Models\\TopicContent\\RichText",s.OEmbed="EscolaLms\\TopicTypes\\Models\\TopicContent\\OEmbed",s.Audio="EscolaLms\\TopicTypes\\Models\\TopicContent\\Audio",s.Video="EscolaLms\\TopicTypes\\Models\\TopicContent\\Video",s.H5P="EscolaLms\\TopicTypes\\Models\\TopicContent\\H5P",s.Image="EscolaLms\\TopicTypes\\Models\\TopicContent\\Image",s.PDF="EscolaLms\\TopicTypes\\Models\\TopicContent\\PDF",s.SCORM="EscolaLms\\TopicTypes\\Models\\TopicContent\\ScormSco",s.Project="EscolaLms\\TopicTypeProject\\Models\\Project",s.GiftQuiz="EscolaLms\\TopicTypeGift\\Models\\GiftQuiz"})($||($={}));var w;(function(s){s.OrderPaid="EscolaLms\\Cart\\Events\\OrderPaid",s.UserLogged="EscolaLms\\Auth\\Events\\UserLogged"})(w||(w={}));var N;(function(s){s.draft="draft",s.published="published",s.archived="archived"})(N||(N={}));var E;(function(s){s.email="EscolaLms\\TemplatesEmail\\Core\\EmailChannel",s.pdf="EscolaLms\\TemplatesPdf\\Core\\PdfChannel",s.sms="EscolaLms\\TemplatesSms\\Core\\SmsChannel"})(E||(E={}));var f;(function(s){s.ManuallyTriggeredEvent="EscolaLms\\Templates\\Events\\ManuallyTriggeredEvent"})(f||(f={}));var le;(function(s){s.cart_fixed="cart_fixed",s.cart_percent="cart_percent",s.product_fixed="product_fixed",s.product_percent="product_percent"})(le||(le={}));var K;(function(s){s.MULTIPLE_CHOICE="multiple_choice",s.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS="multiple_choice_with_multiple_right_answers",s.TRUE_FALSE="true_false",s.SHORT_ANSWERS="short_answers",s.MATCHING="matching",s.NUMERICAL_QUESTION="numerical_question",s.ESSAY="essay",s.DESCRIPTION="description"})(K||(K={}));var _;(function(s){s.PRESENT="present",s.PRESENT_NOT_EXERCISING="present_not_exercising",s.ABSENT="absent",s.EXCUSED_ABSENCE="excused_absence"})(_||(_={}));var X;(function(s){s.Manual="manual",s.TeamsForms="teams_forms",s.TeamsLecture="teams_lecture",s.TestPortal="test_portal"})(X||(X={}));var Z;(function(s){s.Simple="simple",s.Complex="complex"})(Z||(Z={}))},"60mZ":function(ge,F,t){},EKp7:function(ge,F,t){"use strict";t.r(F);var $=t("T2oS"),w=t("W9HT"),N=t("tJVT"),E=t("q1tI"),f=t("9kvl"),le=t("Ty5D"),K=t("tMyG"),_=t("nhC9"),X=t("YRX9"),Z=t("k1fw"),s=t("qLMh"),g=t("miYZ"),b=t("tsqr"),M=t("9og8"),k=t("VMEa"),ae=t("Qurx"),q=t("yj/a"),ne=t("F/zT"),je=t("BiO0"),be=t("0WSk"),R=t("Gn8c"),T=t("hd5d"),G=t("/y+f"),a=t("nKUr"),C=Object.values(G.b).map(function(ee){return{value:ee,label:Object(a.jsx)(f.a,{id:"CompetencyChallenges.types.".concat(ee)})}}),A=function(S){var h=S.data,L=S.competency_challenge_id,D=S.onAddSuccess,H=S.onUpdateSuccess,U=Object(f.l)(),se=k.a.useForm(),B=Object(N.a)(se,1),y=B[0],c=Number.isNaN(L),o=Object(E.useCallback)(function(){var j=Object(M.a)(Object(s.a)().mark(function l(n){var m,v,d,x,O;return Object(s.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return m=n.name,v=n.type,d=n.is_active,x=d===void 0?!1:d,i.prev=1,i.next=4,Object(X.a)({name:m,is_active:x,type:v});case 4:if(O=i.sent,O.success){i.next=8;break}return b.b.error(O.message),i.abrupt("return");case 8:b.b.success(U.formatMessage({id:O.message})),f.f.push("/competency-challenges/".concat(O.data.id,"/main")),D==null||D(O),i.next=16;break;case 13:i.prev=13,i.t0=i.catch(1),b.b.error(U.formatMessage({id:"error"}));case 16:case"end":return i.stop()}},l,null,[[1,13]])}));return function(l){return j.apply(this,arguments)}}(),[]),u=Object(E.useCallback)(function(){var j=Object(M.a)(Object(s.a)().mark(function l(n){var m,v,d,x;return Object(s.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,m=y.getFieldsValue(["image_url","image_path"]),v=m.image_url,d=m.image_path,r.next=4,Object(X.g)(L,Object(Z.a)(Object(Z.a)({},n),{},{image_url:v,image_path:d}));case 4:if(x=r.sent,x.success){r.next=8;break}return b.b.error(x.message),r.abrupt("return");case 8:b.b.success(U.formatMessage({id:x.message})),H==null||H(x),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),b.b.error(U.formatMessage({id:"error"}));case 15:case"end":return r.stop()}},l,null,[[0,12]])}));return function(l){return j.apply(this,arguments)}}(),[L]);return Object(a.jsxs)(k.a,{form:y,initialValues:h!=null?h:{},onFinish:c?o:u,children:[Object(a.jsxs)(k.a.Group,{title:Object(a.jsx)(f.a,{id:"CompetencyChallenges.base"}),children:[Object(a.jsx)(ae.a,{width:"md",name:"name",label:Object(a.jsx)(f.a,{id:"name"}),placeholder:U.formatMessage({id:"name"}),required:!0,rules:[{required:!0,message:U.formatMessage({id:"field_required"})}]}),Object(a.jsx)(q.a,{width:"md",name:"type",label:Object(a.jsx)(f.a,{id:"type"}),options:C,required:!0,rules:[{required:!0,message:U.formatMessage({id:"field_required"})}]}),Object(a.jsx)(ne.a,{name:"is_active",label:Object(a.jsx)(f.a,{id:"is_active"})})]}),!c&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(k.a.Group,{title:Object(a.jsx)(f.a,{id:"CompetencyChallenges.additional"}),children:[Object(a.jsx)(k.a.Item,{name:"description",label:Object(a.jsx)(f.a,{id:"description"}),valuePropName:"value",style:{width:440},children:Object(a.jsx)(T.a,{directory:"competency-challenges/".concat(L)})}),Object(a.jsx)(je.a,{width:"lg",name:"summary",label:Object(a.jsx)(f.a,{id:"summary"})}),Object(a.jsx)(k.a.Item,{name:"authors",label:Object(a.jsx)(f.a,{id:"author"}),style:{width:"100%",maxWidth:440},children:Object(a.jsx)(be.a,{multiple:!0})})]}),Object(a.jsx)(R.a,{wrapInForm:!1,folder:"/competency-challenges/".concat(L),title:"image",action:"/api/admin/competency-challenges/".concat(L,"?_method=PATCH"),src_name:"image_url",form_name:"image",getUploadedSrcField:function(l){return l.file.response.data.image_url},setPath:function(l){return y.setFieldsValue(l)}})]})]})},Fe=t("PpiC"),ce=t("P2fV"),Ye=t("NJEC"),$e=t("5Dmo"),ue=t("3S7+"),et=t("+L6B"),xe=t("2/Rp"),Je=t("Vpfc"),me=t("G3dp"),we=t("/MfK"),re=t("Hn4i"),Ie=t("nRaC"),he=t("5RzL"),e=t("JifO"),Pe=function ee(S,h){var L,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return(L=S.subcategories)!==null&&L!==void 0&&L.length?{title:S.name,value:S.id,disabled:D===0||h.includes(S.id),children:S.subcategories.map(function(H){return ee(H,h,D+1)})}:{title:S.name,value:S.id,disabled:D===0||h.includes(S.id)}},Ae=function(S){var h=S.value,L=S.onChange,D=S.multiple,H=D===void 0?!1:D,U=S.disabledNodes,se=U===void 0?[]:U,B=Object(E.useState)([]),y=Object(N.a)(B,2),c=y[0],o=y[1];Object(E.useEffect)(function(){Object(e.c)().then(function(j){j.success&&o(j.data)})},[]);var u=Object(E.useMemo)(function(){return c.map(function(j){return Pe(j,se)})},[c,se]);return Object(a.jsx)(he.a,{loading:c.length===0,multiple:H,showSearch:!0,value:h,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:Object(a.jsx)(f.a,{id:"select",defaultMessage:"Please select"}),allowClear:!0,treeDefaultExpandAll:!0,onChange:L,treeData:u,disabled:c.length===0})},De=["scale_min","category_id"],Re=[{title:Object(a.jsx)(f.a,{id:"ID"}),dataIndex:"id",editable:!1,render:function(S,h){if(typeof h.id!="string")return"-";var L=h.id.split("-"),D=Object(N.a)(L,2),H=D[0],U=D[1];return H==="new"?"-":U}},{title:Object(a.jsx)(f.a,{id:"min_percent"}),dataIndex:"scale_min",valueType:"percent",formItemProps:{rules:[{required:!0,message:Object(a.jsx)(f.a,{id:"field_required"})},{type:"number",min:0,max:100,message:Object(a.jsx)(f.a,{id:"number_between",values:{min:0,max:100}})}]},fieldProps:{min:0,max:100}},{title:Object(a.jsx)(f.a,{id:"category"}),dataIndex:"category_id",render:function(S,h){return Object(a.jsx)(Je.a,{type:"Category",type_id:h.category_id})},formItemProps:{rules:[{required:!0,message:Object(a.jsx)(f.a,{id:"field_required"})}]},renderFormItem:function(S,h,L){var D,H=((D=L.getFieldValue("table"))!==null&&D!==void 0?D:[]).map(function(U){return U.category_id});return Object(a.jsx)(Ae,{disabledNodes:H})}}],Le=function(S){return S.map(function(h){var L=h.id,D=h.scale_min,H=h.category;return{id:"old-".concat(L),scale_min:D,category_id:H.id}})},ze=function(S){var h=S.competency_challenge_id,L=S.scales,D=S.onScaleDelete,H=S.onScaleAdd,U=S.onScaleUpdate,se=Object(E.useState)([]),B=Object(N.a)(se,2),y=B[0],c=B[1],o=Object(f.l)(),u=Object(E.useRef)(),j=Object(E.useRef)(),l=Object(E.useRef)(),n=Object(E.useMemo)(function(){return Le(L)},[L]),m=Object(E.useMemo)(function(){return[].concat(Re,[{valueType:"option",title:Object(a.jsx)(f.a,{id:"options"}),render:function(d,x,O,r){return[Object(a.jsx)(ue.a,{title:Object(a.jsx)(f.a,{id:"edit",defaultMessage:"edit"}),children:Object(a.jsx)(xe.a,{type:"primary",icon:Object(a.jsx)(me.a,{}),onClick:function(){return r==null?void 0:r.startEditable(x.id)}})},"edit"),Object(a.jsx)(Ye.a,{title:Object(a.jsx)(f.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(M.a)(Object(s.a)().mark(function i(){var p,I,Y,V,ie,W,P,de;return Object(s.a)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(typeof x.id=="string"){z.next=2;break}return z.abrupt("return");case 2:if(p=x.id.split("-"),I=Object(N.a)(p,2),Y=I[0],V=I[1],Y!=="new"){z.next=7;break}return P=(ie=u.current)===null||ie===void 0?void 0:ie.getFieldValue("table"),(W=u.current)===null||W===void 0||W.setFieldValue("table",P.filter(function(ve){var Me=ve.id;return Me!==x.id})),z.abrupt("return");case 7:return z.next=9,Object(X.d)(+V);case 9:de=z.sent,de.success&&(D==null||D());case 11:case"end":return z.stop()}},i)})),okText:Object(a.jsx)(f.a,{id:"ok"}),cancelText:Object(a.jsx)(f.a,{id:"cancel"}),children:Object(a.jsx)(ue.a,{title:Object(a.jsx)(f.a,{id:"delete",defaultMessage:"delete"}),children:Object(a.jsx)(xe.a,{type:"primary",icon:Object(a.jsx)(we.a,{}),danger:!0})})},"delete")]}}])},[]);return Object(a.jsx)(k.a,{formRef:u,initialValues:{table:n},submitter:!1,children:Object(a.jsx)(re.a,{rowKey:function(d){return d.id},editableFormRef:j,controlled:!0,actionRef:l,maxLength:10,name:"table",columns:m,recordCreatorProps:{creatorButtonText:Object(a.jsx)(f.a,{id:"CompetencyChallenges.addNewRow"}),disabled:y.length>0,record:function(d){return{id:"new-".concat(d)}}},editable:{onlyOneLineEditorAlertMessage:o.formatMessage({id:"CompetencyChallenges.onlyOneRowIsEditable"}),onSave:function(){var v=Object(M.a)(Object(s.a)().mark(function x(O,r){var i,p,I,Y,V,ie,W,P,de;return Object(s.a)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(i=r.scale_min,p=r.category_id,I=Object(Fe.a)(r,De),typeof I.id=="string"){z.next=3;break}return z.abrupt("return");case 3:if(Y=I.id.split("-"),V=Object(N.a)(Y,2),ie=V[0],W=V[1],ie!=="new"){z.next=10;break}return z.next=7,Object(X.b)({scale_min:i,category_id:p,competency_challenge_id:h});case 7:return P=z.sent,P.success&&(H==null||H()),z.abrupt("return");case 10:return z.next=12,Object(X.h)(+W,{scale_min:i,category_id:p,competency_challenge_id:h});case 12:return de=z.sent,de.success&&(U==null||U()),z.abrupt("return");case 15:case"end":return z.stop()}},x)}));function d(x,O){return v.apply(this,arguments)}return d}(),deletePopconfirmMessage:Object(a.jsx)(f.a,{id:"deleteQuestion"}),actionRender:function(d,x,O){if(typeof d.id!="string")return[];var r=d.id.split("-"),i=Object(N.a)(r,1),p=i[0];return p==="new"?[O.save,O.delete]:[O.save,O.cancel]},type:"single",editableKeys:y,onChange:c}})})},We=t("/zsF"),Ne=t("PArb"),He=t("DYRE"),Q=t("zeV3"),oe=t("uD7z"),Qe=t("FJDo"),Be=t("yioT"),Ue=t("qRSf"),Xe=function(S){var h=S.data,L=Object(E.useState)(!1),D=Object(N.a)(L,2),H=D[0],U=D[1],se=Object(E.useState)(),B=Object(N.a)(se,2),y=B[0],c=B[1],o=Object(f.l)(),u=Object(E.useCallback)(function(){(h==null?void 0:h.quiz_id)!==void 0&&(U(!0),Object(Ue.c)(h==null?void 0:h.quiz_id).then(function(l){l.success&&c(l.data)}).finally(function(){return U(!1)}))},[h==null?void 0:h.quiz_id]),j=Object(E.useCallback)(function(){var l=Object(M.a)(Object(s.a)().mark(function n(m){return Object(s.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if((h==null?void 0:h.quiz_id)!==void 0){d.next=2;break}return d.abrupt("return");case 2:U(!0),Object(Ue.f)(h==null?void 0:h.quiz_id,Object(Z.a)(Object(Z.a)({},m),{},{value:"diagnostic-test"})).then(function(x){x.success&&c(x.data)}).finally(function(){return U(!1)});case 4:case"end":return d.stop()}},n)}));return function(n){return l.apply(this,arguments)}}(),[]);return Object(E.useEffect)(function(){u()},[u]),y?Object(a.jsxs)("div",{style:{position:"relative",paddingBottom:"64px"},children:[Object(a.jsx)(k.a,{submitter:{render:function(n,m){var v=Object(N.a)(m,2),d=v[0],x=v[1];return Object(a.jsxs)(Q.b,{style:{position:"absolute",bottom:0,left:0},children:[d,x]})}},title:o.formatMessage({id:"base",defaultMessage:"base"}),initialValues:y,onFinish:j,children:Object(a.jsxs)(oe.a,{children:[Object(a.jsx)(Qe.a,{name:"max_attempts",label:Object(a.jsx)(f.a,{id:"max_attempts"}),tooltip:Object(a.jsx)(f.a,{id:"max_attempts"}),placeholder:o.formatMessage({id:"max_attempts",defaultMessage:"max_attempts"}),required:!0,rules:[{required:!0,message:Object(a.jsx)(f.a,{id:"field_required"})}]}),Object(a.jsx)(Qe.a,{name:"max_execution_time",label:Object(a.jsx)(f.a,{id:"max_execution_time"}),tooltip:Object(a.jsx)(f.a,{id:"max_execution_time"}),placeholder:o.formatMessage({id:"max_execution_time",defaultMessage:"max_execution_time"}),required:!0,rules:[{required:!0,message:Object(a.jsx)(f.a,{id:"field_required"})}]})]})}),Object(a.jsx)(Ne.a,{}),Object(a.jsx)(Be.a,{questions:y.questions,quizId:y.id,onAdded:u,onEdited:u,onRemoved:u,tableHeader:Object(a.jsx)(f.a,{id:"questions"}),tableLoading:H,questionsCategory:{disabledDepth:1}})]}):Object(a.jsx)(w.a,{})},Ke=function(){var S,h=Object(E.useState)(!1),L=Object(N.a)(h,2),D=L[0],H=L[1],U=Object(E.useState)(),se=Object(N.a)(U,2),B=se[0],y=se[1],c=Object(f.l)(),o=Object(le.l)(),u=o.id,j=o.tab,l=j===void 0?"main":j,n=u==="new",m=Number(u),v=Object(E.useMemo)(function(){return n?c.formatMessage({id:"CompetencyChallenges.new_challenge"}):B!=null&&B.name?B.name:c.formatMessage({id:"menu.Competency challenges"})},[c,B==null?void 0:B.name]),d=Object(E.useCallback)(function(){Number.isNaN(m)||(H(!0),Object(X.e)(m).then(function(x){x.success&&y(x.data)}).finally(function(){return H(!1)}))},[m]);return Object(E.useEffect)(function(){d()},[d]),Object(a.jsx)(K.a,{title:v,header:{breadcrumb:{routes:[{path:"competency-challenges",breadcrumbName:c.formatMessage({id:"menu.Competency challenges"})},{path:String(u),breadcrumbName:v},{path:l,breadcrumbName:c.formatMessage({id:"CompetencyChallenges.".concat(l)})}]}},children:Object(a.jsxs)(_.a,{bodyStyle:{padding:"24px"},tabs:{type:"card",cardProps:{loading:D&&Object(a.jsx)(w.a,{})},activeKey:l,onChange:function(O){f.f.push("/competency-challenges/".concat(u,"/").concat(O))}},children:[Object(a.jsx)(_.a.TabPane,{tab:Object(a.jsx)(f.a,{id:"CompetencyChallenges.main"}),children:Object(a.jsx)(A,{competency_challenge_id:m,data:B,onUpdateSuccess:d})},"main"),Object(a.jsx)(_.a.TabPane,{tab:Object(a.jsx)(f.a,{id:"CompetencyChallenges.scales"}),disabled:n,children:Object(a.jsx)(ze,{competency_challenge_id:m,scales:(S=B==null?void 0:B.scales)!==null&&S!==void 0?S:[],onScaleDelete:d,onScaleAdd:d,onScaleUpdate:d})},"scales"),Object(a.jsx)(_.a.TabPane,{tab:Object(a.jsx)(f.a,{id:"CompetencyChallenges.diagnostic-test"}),disabled:n,children:Object(a.jsx)(Xe,{data:B})},"diagnostic-test")]})})},Ze=F.default=Ke},YRX9:function(ge,F,t){"use strict";t.d(F,"f",function(){return f}),t.d(F,"e",function(){return K}),t.d(F,"a",function(){return X}),t.d(F,"g",function(){return s}),t.d(F,"c",function(){return b}),t.d(F,"b",function(){return k}),t.d(F,"h",function(){return q}),t.d(F,"d",function(){return je});var $=t("qLMh"),w=t("k1fw"),N=t("9og8"),E=t("9kvl");function f(R,T){return le.apply(this,arguments)}function le(){return le=Object(N.a)(Object($.a)().mark(function R(T,G){return Object($.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",Object(E.i)("/api/admin/competency-challenges",Object(w.a)({method:"GET",useCache:!1,params:T},G||{})));case 1:case"end":return C.stop()}},R)})),le.apply(this,arguments)}function K(R,T){return _.apply(this,arguments)}function _(){return _=Object(N.a)(Object($.a)().mark(function R(T,G){return Object($.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",Object(E.i)("/api/admin/competency-challenges/".concat(T),Object(w.a)({method:"GET",useCache:!1},G||{})));case 1:case"end":return C.stop()}},R)})),_.apply(this,arguments)}function X(R,T){return Z.apply(this,arguments)}function Z(){return Z=Object(N.a)(Object($.a)().mark(function R(T,G){return Object($.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",Object(E.i)("/api/admin/competency-challenges",Object(w.a)({method:"POST",headers:{"Content-Type":"application/json"},data:T},G||{})));case 1:case"end":return C.stop()}},R)})),Z.apply(this,arguments)}function s(R,T,G){return g.apply(this,arguments)}function g(){return g=Object(N.a)(Object($.a)().mark(function R(T,G,a){return Object($.a)().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",Object(E.i)("/api/admin/competency-challenges/".concat(T),Object(w.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:G},a||{})));case 1:case"end":return A.stop()}},R)})),g.apply(this,arguments)}function b(R,T){return M.apply(this,arguments)}function M(){return M=Object(N.a)(Object($.a)().mark(function R(T,G){return Object($.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",Object(E.i)("/api/admin/competency-challenges/".concat(T),Object(w.a)({method:"DELETE"},G||{})));case 1:case"end":return C.stop()}},R)})),M.apply(this,arguments)}function k(R,T){return ae.apply(this,arguments)}function ae(){return ae=Object(N.a)(Object($.a)().mark(function R(T,G){return Object($.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",Object(E.i)("/api/admin/competency-challenges/scales",Object(w.a)({method:"POST",headers:{"Content-Type":"application/json"},data:T},G||{})));case 1:case"end":return C.stop()}},R)})),ae.apply(this,arguments)}function q(R,T,G){return ne.apply(this,arguments)}function ne(){return ne=Object(N.a)(Object($.a)().mark(function R(T,G,a){return Object($.a)().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",Object(E.i)("/api/admin/competency-challenges/scales/".concat(T),Object(w.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:G},a||{})));case 1:case"end":return A.stop()}},R)})),ne.apply(this,arguments)}function je(R,T){return be.apply(this,arguments)}function be(){return be=Object(N.a)(Object($.a)().mark(function R(T,G){return Object($.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",Object(E.i)("/api/admin/competency-challenges/scales/".concat(T),Object(w.a)({method:"DELETE"},G||{})));case 1:case"end":return C.stop()}},R)})),be.apply(this,arguments)}},hd5d:function(ge,F,t){"use strict";var $=t("qLMh"),w=t("9og8"),N=t("q1tI"),E=t.n(N),f=t("acco"),le=t.n(f),K=t("BAh9"),_=t("vtG9"),X=t.n(_),Z=t("9kvl"),s=t("nKUr"),g=t.n(s),b=function(ae){var q=ae.attrs,ne=q.href,je=ne.split("/").pop();return Object(s.jsx)("p",{children:Object(s.jsx)("a",{rel:"noreferrer",href:ne,target:"_blank",children:je})})},M=function(ae){var q=ae.value,ne=ae.onChange,je=ae.directory,be=je===void 0?"/wysiwyg":je,R=Object(Z.l)();return Object(s.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(s.jsx)(le.a,{excludeBlockMenuItems:["Sketch"],embeds:[{matcher:function(G){return!0},component:b}],uploadImage:function(){var T=Object(w.a)(Object($.a)().mark(function G(a){var C,A;return Object($.a)().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.next=2,Object(K.e)(a,be);case 2:if(C=ce.sent,!C.success){ce.next=8;break}if(!a.type.includes("image/")){ce.next=7;break}return A=C.data[0].name.includes("/")?C.data[0].name:"".concat(be).concat(C.data[0].name),ce.abrupt("return",Object(K.d)(A,1e3));case 7:return ce.abrupt("return",C.data[0].url);case 8:throw new Error("Error while uploading");case 9:case"end":return ce.stop()}},G)}));return function(G){return T.apply(this,arguments)}}(),defaultValue:q||"",onChange:function(G){return ne&&ne(G())},placeholder:R.formatMessage({id:"wysiwyg_placeholder"})})})};F.a=M},vtG9:function(ge,F,t){},yioT:function(ge,F,t){"use strict";t.d(F,"a",function(){return B});var $=t("tU7J"),w=t("wFql"),N=t("BoS7"),E=t("Sdc0"),f=t("oBTY"),le=t("+L6B"),K=t("2/Rp"),_=t("bbsP"),X=t("/wGt"),Z=t("PpiC"),s=t("tJVT"),g=t("k1fw"),b=t("q1tI"),M=t("9kvl"),k=t("YJCA"),ae=t("wYyv"),q=t("smpX"),ne=t("eyie"),je=t("w5pM"),be=t("mWMg"),R=t("Vpfc"),T=t("qRSf"),G=t("giR+"),a=t("fyUT"),C=t("DYRE"),A=t("zeV3"),Fe=t("OaEy"),ce=t("2fM7"),Ye=t("/zsF"),$e=t("PArb"),ue=t("jrin"),et=t("sRBo"),xe=t("kaz8"),Je=t("5Dmo"),me=t("3S7+"),we=t("iJl9"),re=t.n(we),Ie=t("/MfK"),he=t("Fghh"),e=t("nKUr"),Pe=function(c){var o=c.value,u=c.onChange,j=Object(b.useMemo)(function(){if(o)return Object(q.parse)(o)},[o]),l=Object(he.k)(),n=Object(b.useMemo)(function(){if(j&&j[0].type==="MC")return j[0]},[j]),m=Object(b.useCallback)(function(r,i){u("".concat(r,"{").concat(i.map(function(p){return"".concat(p.isCorrect?"=":"~").concat(p.weight?"%".concat(p.weight,"%"):"").concat(p.text.text)}).join(" "),"}"))},[]),v=Object(b.useCallback)(function(r){n&&m(r,n==null?void 0:n.choices)},[n]),d=Object(b.useCallback)(function(r,i){if(n){var p=n.choices.map(function(I,Y){return Y===i?r:I});m(n.stem.text,p)}},[n]),x=Object(b.useCallback)(function(){if(n){var r={text:{format:"moodle",text:"New Choice"},weight:null,feedback:null,isCorrect:!1},i=[].concat(Object(f.a)(n.choices),[r]);m(n.stem.text,i)}},[n]),O=Object(b.useCallback)(function(r){if(n){var i=n.choices.filter(function(p,I){return I!==r});m(n.stem.text,i)}},[n]);return Object(e.jsx)("div",{children:n&&Object(e.jsxs)(A.b,{direction:"vertical",size:"middle",style:{display:"flex"},children:[Object(e.jsx)(me.a,{title:l.formatMessage({id:"multipleChoiceTooltip",defaultMessage:'Title, use `_____` for "Mark the Word" question type'}),children:Object(e.jsx)(re.a,{size:"small",value:n.stem.text,onChange:function(i){return v(i.target.value)}})}),b.Children.toArray(n.choices.map(function(r,i){return Object(e.jsx)("div",{children:Object(e.jsxs)(A.b,{direction:"horizontal",children:[Object(e.jsx)(me.a,{title:l.formatMessage({id:"correctAnswer",defaultMessage:"Is Correct Answer?"}),children:Object(e.jsx)(xe.a,{checked:r.isCorrect,onChange:function(I){return d(Object(g.a)(Object(g.a)({},r),{},{isCorrect:I.target.checked}),i)}})}),Object(e.jsx)(me.a,{title:l.formatMessage({id:"answer",defaultMessage:"Answer"}),children:Object(e.jsx)(re.a,{size:"small",value:r.text.text,onChange:function(I){return d(Object(g.a)(Object(g.a)({},r),{},{text:Object(g.a)(Object(g.a)({},r.text),{},{text:I.target.value})}),i)}})}),Object(e.jsx)(me.a,{title:l.formatMessage({id:"weight",defaultMessage:"Weight"}),children:Object(e.jsx)(a.a,{size:"small",addonAfter:"%",defaultValue:void 0,value:r.weight,min:1,max:100,onChange:function(I){d(Object(g.a)(Object(g.a)({},r),{},{weight:I!=null?I:null}),i)}})}),Object(e.jsx)(K.a,{size:"small",icon:Object(e.jsx)(Ie.a,{}),onClick:function(){return O(i)}})]})})})),Object(e.jsx)(K.a,{size:"small",onClick:function(){return x()},children:Object(e.jsx)(M.a,{id:"Questions.add",defaultMessage:"Add question"})})]})})},Ae=function(c){var o=c.value,u=c.onChange,j=Object(b.useMemo)(function(){if(o)return Object(q.parse)(o)},[o]),l=Object(b.useMemo)(function(){if(j&&j[0].type==="Essay")return j[0]},[j]),n=Object(b.useCallback)(function(v){u("".concat(v,"{}"))},[]),m=Object(b.useMemo)(function(){return l==null?void 0:l.stem.text},[l]);return Object(e.jsx)("div",{children:l&&Object(e.jsx)(A.b,{direction:"vertical",size:"middle",style:{display:"flex"},children:Object(e.jsx)(re.a.TextArea,{defaultValue:m,size:"small",value:m,onChange:function(d){return n(d.target.value)}})})})},De=function(c){var o=c.value,u=c.onChange,j=Object(b.useMemo)(function(){if(o)return Object(q.parse)(o)},[o]),l=Object(he.k)(),n=Object(b.useMemo)(function(){if(j&&j[0].type==="TF")return j[0]},[j]),m=Object(b.useCallback)(function(v,d){u("".concat(v,"{").concat(d?"T":"F","}"))},[]);return Object(e.jsx)("div",{children:n&&Object(e.jsxs)(A.b,{direction:"vertical",size:"middle",style:{display:"flex"},children:[Object(e.jsx)(me.a,{title:l.formatMessage({id:"trueAnswer",defaultMessage:"True Statement"}),children:Object(e.jsx)(xe.a,{checked:n.isTrue,onChange:function(d){return m(n.stem.text,d.target.checked)}})}),Object(e.jsx)(re.a.TextArea,{size:"small",value:n.stem.text,onChange:function(d){return m(d.target.value,n.isTrue)}})]})})},Re=function(c){var o=c.value,u=c.onChange,j=Object(b.useMemo)(function(){if(o)return Object(q.parse)(o)},[o]),l=Object(b.useMemo)(function(){if(j&&j[0].type==="Matching")return j[0]},[j]),n=Object(b.useCallback)(function(O,r){u("".concat(O,`{
        `).concat(r.map(function(i){return"=".concat(i.subquestion.text," -> ").concat(i.subanswer)}).join(`
`),`
      }`))},[]),m=Object(b.useCallback)(function(O){l&&n(O,l==null?void 0:l.matchPairs)},[l]),v=Object(b.useCallback)(function(O,r){if(l){var i=l.matchPairs.map(function(p,I){return I===r?O:p});n(l.stem.text,i)}},[l]),d=Object(b.useCallback)(function(){if(l){var O={subanswer:"Answer",subquestion:{format:"moodle",text:"New Question"}},r=[].concat(Object(f.a)(l.matchPairs),[O]);n(l.stem.text,r)}},[l]),x=Object(b.useCallback)(function(O){if(l){var r=l.matchPairs.filter(function(i,p){return p!==O});n(l.stem.text,r)}},[l]);return Object(e.jsx)("div",{children:l&&Object(e.jsxs)(A.b,{direction:"vertical",size:"middle",style:{display:"flex"},children:[Object(e.jsx)(re.a,{size:"small",value:l.stem.text,onChange:function(r){return m(r.target.value)}}),b.Children.toArray(l.matchPairs.map(function(O,r){return Object(e.jsx)("div",{children:Object(e.jsxs)(A.b,{direction:"horizontal",children:[Object(e.jsx)(re.a,{size:"small",value:O.subquestion.text,onChange:function(p){return v(Object(g.a)(Object(g.a)({},O),{},{subquestion:Object(g.a)(Object(g.a)({},O.subquestion),{},{text:p.target.value})}),r)}}),Object(e.jsx)(re.a,{size:"small",value:O.subanswer,onChange:function(p){return v(Object(g.a)(Object(g.a)({},O),{},{subanswer:p.target.value}),r)}}),Object(e.jsx)(K.a,{size:"small",icon:Object(e.jsx)(Ie.a,{}),onClick:function(){return x(r)}})]})})})),Object(e.jsx)(K.a,{size:"small",onClick:function(){return d()},children:Object(e.jsx)(M.a,{id:"Questions.addMatchingPair",defaultMessage:"Add Matching Pair"})})]})})},Le=function(c){var o=c.value,u=c.onChange,j=Object(b.useMemo)(function(){if(o)return Object(q.parse)(o)},[o]),l=Object(b.useMemo)(function(){if(j&&j[0].type==="Description")return j[0]},[j]),n=Object(b.useCallback)(function(m){u("".concat(m))},[]);return Object(e.jsx)("div",{children:l&&Object(e.jsx)(A.b,{direction:"vertical",size:"middle",style:{display:"flex"},children:Object(e.jsx)(re.a.TextArea,{size:"small",value:l.stem.text,onChange:function(v){return n(v.target.value)}})})})},ze=function(c){var o=c.value,u=c.onChange,j=Object(b.useMemo)(function(){if(o)return Object(q.parse)(o)},[o]),l=Object(he.k)(),n=Object(b.useMemo)(function(){if(j&&j[0].type==="Numerical")return j[0]},[j]),m=Object(b.useCallback)(function(v,d){u("".concat(v,"{#").concat(d.number,":").concat(d.range,"}"))},[]);return Object(e.jsx)("div",{children:n&&Object(e.jsxs)(A.b,{direction:"horizontal",size:"middle",style:{display:"flex"},children:[Object(e.jsx)(re.a,{size:"small",value:n.stem.text,onChange:function(d){return m(d.target.value,n.choices)}}),Object(e.jsx)(me.a,{title:l.formatMessage({id:"correctAnswer",defaultMessage:"Correct Answer"}),children:Object(e.jsx)(a.a,{size:"small",value:n.choices.number,onChange:function(d){d&&m(n.stem.text,Object(g.a)(Object(g.a)({},n.choices),{},{number:d}))}})}),Object(e.jsx)(me.a,{title:l.formatMessage({id:"errorMargin",defaultMessage:"Error Margin"}),children:Object(e.jsx)(a.a,{size:"small",defaultValue:0,addonAfter:"+/-",value:n.choices.range,onChange:function(d){m(n.stem.text,Object(g.a)(Object(g.a)({},n.choices),{},{range:d!=null?d:0}))}})})]})})},We=function(c){var o=c.value,u=c.onChange,j=Object(b.useMemo)(function(){if(o)return Object(q.parse)(o)},[o]),l=Object(he.k)(),n=Object(b.useMemo)(function(){if(j&&j[0].type==="Short")return j[0]},[j]),m=Object(b.useCallback)(function(r,i){u("".concat(r,"{").concat(i.map(function(p){return"=".concat(p.text.text)}).join(" "),"}"))},[]),v=Object(b.useCallback)(function(r){n&&m(r,n==null?void 0:n.choices)},[n]),d=Object(b.useCallback)(function(r,i){if(n){var p=n.choices.map(function(I,Y){return Y===i?r:I});m(n.stem.text,p)}},[n]),x=Object(b.useCallback)(function(){if(n){var r={text:{format:"moodle",text:"New Answer"},weight:null,feedback:null,isCorrect:!1},i=[].concat(Object(f.a)(n.choices),[r]);m(n.stem.text,i)}},[n]),O=Object(b.useCallback)(function(r){if(n){var i=n.choices.filter(function(p,I){return I!==r});m(n.stem.text,i)}},[n]);return Object(e.jsx)("div",{children:n&&Object(e.jsxs)(A.b,{direction:"vertical",size:"middle",style:{display:"flex"},children:[Object(e.jsx)(re.a,{size:"small",value:n.stem.text,onChange:function(i){return v(i.target.value)}}),b.Children.toArray(n.choices.map(function(r,i){return Object(e.jsx)("div",{children:Object(e.jsxs)(A.b,{direction:"horizontal",children:[Object(e.jsx)(me.a,{title:l.formatMessage({id:"answer",defaultMessage:"Answer"}),children:Object(e.jsx)(re.a,{size:"small",value:r.text.text,onChange:function(I){return d(Object(g.a)(Object(g.a)({},r),{},{text:Object(g.a)(Object(g.a)({},r.text),{},{text:I.target.value})}),i)}})}),Object(e.jsx)(K.a,{size:"small",icon:Object(e.jsx)(Ie.a,{}),onClick:function(){return O(i)}})]})})})),Object(e.jsx)(K.a,{size:"small",onClick:function(){return x()},children:Object(e.jsx)(M.a,{id:"Questions.add",defaultMessage:"Add Question"})})]})})};function Ne(y){var c=["number","undefined"];return c.includes(typeof y)}var He=t("CEpB"),Q=t("/y+f"),oe,Qe=(oe={},Object(ue.a)(oe,Q.d.DESCRIPTION,"You can use your pencil and paper for these next math questions."),Object(ue.a)(oe,Q.d.ESSAY,"Write a short biography of Dag Hammarskj\xF6ld. {}"),Object(ue.a)(oe,Q.d.MATCHING,`Match the following countries with their corresponding capitals. {
        =Canada -> Ottawa
        =Italy  -> Rome
        =Japan  -> Tokyo
        =India  -> New Delhi
        }`),Object(ue.a)(oe,Q.d.MULTIPLE_CHOICE,"Who's buried in Grant's tomb?{=Grant ~no one ~Napoleon ~Churchill ~Mother Teresa }"),Object(ue.a)(oe,Q.d.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS,`What two people are entombed in Grant's tomb? {
        ~%-100%No one
        ~%50%Grant
        ~%50%Grant's wife
        ~%-100%Grant's father
     }`),Object(ue.a)(oe,Q.d.NUMERICAL_QUESTION,"When was Ulysses S. Grant born?{#1822:5}"),Object(ue.a)(oe,Q.d.SHORT_ANSWERS,"Who's buried in Grant's tomb?{=Grant =Ulysses S. Grant =Ulysses Grant}"),Object(ue.a)(oe,Q.d.TRUE_FALSE,"Grant was buried in a tomb in New York City.{T}"),oe),Be=Object.values(Q.d).reduce(function(y,c){return c?[].concat(Object(f.a)(y),[{value:c,label:Object(e.jsx)(M.a,{id:"gift_type.".concat(c)})}]):y},[]),Ue=function(c){var o=c.value,u=c.onChange,j=c.loading,l=j===void 0?!1:j,n=c.onCreate,m=c.categoryProps,v=m===void 0?!1:m,d=c.debug,x=d===void 0?!1:d,O=Object(b.useState)(),r=Object(s.a)(O,2),i=r[0],p=r[1],I=Object(b.useState)(),Y=Object(s.a)(I,2),V=Y[0],ie=Y[1];return Object(b.useEffect)(function(){u({value:i?Qe[i]:"",score:o.score})},[i]),Object(b.useEffect)(function(){u(function(W){return Object(g.a)(Object(g.a)({},W),{},{category_id:V})})},[V]),Object(e.jsxs)(A.b,{direction:"vertical",style:{display:"flex"},children:[Object(e.jsx)($e.a,{children:Object(e.jsx)(M.a,{id:"addNewQuestion",defaultMessage:"New Question"})}),Object(e.jsxs)(A.b,{wrap:!0,children:[Object(e.jsxs)(w.a,{children:[Object(e.jsx)(M.a,{id:"type",defaultMessage:"Type:"}),":"]}),Object(e.jsx)(ce.a,{value:i,onChange:function(P){return p(P)},placeholder:Object(e.jsx)(M.a,{id:"selectNewQuestionType",defaultMessage:"Select new question type"}),options:Be,style:{maxWidth:"330px"}})]}),v&&Object(e.jsxs)(A.b,{wrap:!0,children:[Object(e.jsxs)(w.a,{children:[Object(e.jsx)(M.a,{id:"category",defaultMessage:"Category"}),":"]}),Object(e.jsx)(He.a,Object(g.a)(Object(g.a)({},typeof v=="object"?v:{}),{},{value:V,onChange:function(P){return Ne(P)&&ie(P)}}))]}),(i===Q.d.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS||i===Q.d.MULTIPLE_CHOICE)&&Object(e.jsx)(Pe,{value:o.value,onChange:function(P){return u({value:P,score:o.score})}}),i===Q.d.ESSAY&&Object(e.jsx)(Ae,{value:o.value,onChange:function(P){return u({value:P,score:o.score})}}),i===Q.d.DESCRIPTION&&Object(e.jsx)(Le,{value:o.value,onChange:function(P){return u({value:P,score:o.score})}}),i===Q.d.TRUE_FALSE&&Object(e.jsx)(De,{value:o.value,onChange:function(P){return u({value:P,score:o.score})}}),i===Q.d.MATCHING&&Object(e.jsx)(Re,{value:o.value,onChange:function(P){return u({value:P,score:o.score})}}),i===Q.d.NUMERICAL_QUESTION&&Object(e.jsx)(ze,{value:o.value,onChange:function(P){return u({value:P,score:o.score})}}),i===Q.d.SHORT_ANSWERS&&Object(e.jsx)(We,{value:o.value,onChange:function(P){return u({value:P,score:o.score})}}),i&&Object(e.jsxs)(A.b,{children:[Object(e.jsxs)(w.a,{children:[Object(e.jsx)(M.a,{id:"Questions.score",defaultMessage:"Score"}),":"]}),Object(e.jsx)(a.a,{disabled:l,size:"small",value:o.score,onChange:function(P){return u({score:P!=null?P:1,value:o.value})}})]}),i&&Object(e.jsx)(K.a,{loading:l,size:"small",type:"primary",onClick:function(){n(),p(void 0),ie(void 0)},children:Object(e.jsx)(M.a,{id:"Questions.create",defaultMessage:"Create Question"})},"new"),i&&x&&Object(e.jsx)(w.a.Paragraph,{code:!0,children:o.value})]})},Xe=t("5NDa"),Ke=t("5rEg"),Ze=function(c){var o=c.type,u=c.value,j=c.onChange,l=c.loading,n=l===void 0?!1:l,m=Object(b.useCallback)(function(v){v!==u&&j(v)},[]);switch(o){case Q.d.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS:case Q.d.MULTIPLE_CHOICE:return Object(e.jsx)(Pe,{value:u,onChange:m});case Q.d.ESSAY:return Object(e.jsx)(Ae,{value:u,onChange:m});case Q.d.DESCRIPTION:return Object(e.jsx)(Le,{value:u,onChange:m});case Q.d.TRUE_FALSE:return Object(e.jsx)(De,{value:u,onChange:m});case Q.d.MATCHING:return Object(e.jsx)(Re,{value:u,onChange:m});case Q.d.NUMERICAL_QUESTION:return Object(e.jsx)(ze,{value:u,onChange:m});case Q.d.SHORT_ANSWERS:return Object(e.jsx)(We,{value:u,onChange:m});default:return Object(e.jsx)(Ke.a.TextArea,{disabled:n,value:u,onChange:function(d){return m(d.target.value)}})}},ee=function(c){var o,u=c.question,j=c.onRemoved,l=c.onEdited,n=c.quizId,m=c.loading,v=m===void 0?!1:m,d=c.onLoading,x=c.debug,O=x===void 0?!1:x,r=c.categoryProps,i=r===void 0?!1:r,p=Object(b.useState)(u.value),I=Object(s.a)(p,2),Y=I[0],V=I[1],ie=Object(b.useState)(u.score),W=Object(s.a)(ie,2),P=W[0],de=W[1],Ee=Object(b.useState)((o=u.category_id)!==null&&o!==void 0?o:void 0),z=Object(s.a)(Ee,2),ve=z[0],Me=z[1];return Object(e.jsxs)(A.b,{direction:"vertical",style:{display:"flex"},children:[Object(e.jsx)($e.a,{children:Object(e.jsx)(M.a,{id:"gift_type.".concat(u.type)})}),i&&Object(e.jsxs)(A.b,{wrap:!0,children:[Object(e.jsxs)(w.a,{children:[Object(e.jsx)(M.a,{id:"category",defaultMessage:"Category"}),":"]}),Object(e.jsx)(He.a,Object(g.a)(Object(g.a)({},typeof i=="object"?i:{}),{},{value:ve,onChange:function(fe){return Ne(fe)&&Me(fe)}}))]}),Object(e.jsx)(Ze,{type:u.type,loading:v,value:Y,onChange:function(fe){return V(fe)}}),Object(e.jsxs)(A.b,{children:[Object(e.jsxs)(w.a,{children:[Object(e.jsx)(M.a,{id:"Questions.score",defaultMessage:"Score"}),":"]}),Object(e.jsx)(a.a,{disabled:v,size:"small",value:P,onChange:function(fe){return fe&&de(fe)}})]}),O&&Object(e.jsx)(w.a.Paragraph,{code:!0,children:Y}),Object(e.jsx)(K.a,{loading:v,size:"small",type:"primary",onClick:function(){d(),Object(T.g)(u.id,Object(g.a)(Object(g.a)({},u),{},{topic_gift_quiz_id:n,value:Y,score:P,category_id:ve})).then(function(){l&&l()})},children:Object(e.jsx)(M.a,{id:"Questions.edit",defaultMessage:"Edit Question"})},"update"),Object(e.jsx)(K.a,{loading:v,size:"small",danger:!0,onClick:function(){d(),Object(T.b)(u.id).then(function(){j&&j()})},children:Object(e.jsx)(M.a,{id:"Questions.delete",defaultMessage:"Delete Question"})},"delete")]})},S=t("60mZ"),h=["className","style"],L=Object(k.c)(function(){return Object(e.jsx)(ne.a,{style:{cursor:"grab",color:"#999"}})}),D=Object(k.b)(function(y){return Object(e.jsx)("tr",Object(g.a)({},y))}),H=Object(k.a)(function(y){return Object(e.jsx)("tbody",Object(g.a)({},y))}),U=[{title:Object(e.jsx)(M.a,{id:"sort",defaultMessage:"sort"}),dataIndex:"id",width:60,className:"drag-visible",render:function(){return Object(e.jsx)(L,{})}},{title:Object(e.jsx)(M.a,{id:"type",defaultMessage:"Type"}),dataIndex:"type",hideInForm:!0,hideInSearch:!0,hideInSetting:!0,render:function(c,o){return Object(e.jsx)(M.a,{id:o.type})}},{title:Object(e.jsx)(M.a,{id:"question",defaultMessage:"Question"}),dataIndex:"question",hideInForm:!0,hideInSearch:!0,hideInSetting:!0,render:function(c,o){var u=Object(q.parse)(o.value);return u!=null&&u[0]&&"stem"in u[0]?u[0].stem.text:"question"}}],se={title:Object(e.jsx)(M.a,{id:"category",defaultMessage:"Category"}),dataIndex:"category_id",hideInForm:!0,hideInSearch:!0,hideInSetting:!0,render:function(c,o){return typeof o.category_id=="number"?Object(e.jsx)(R.a,{type:"Category",type_id:o.category_id}):"-"}},B=function(c){var o=c.questions,u=c.onAdded,j=c.onRemoved,l=c.onEdited,n=c.quizId,m=c.tableLoading,v=c.tableHeader,d=c.questionsCategory,x=Object(b.useState)(),O=Object(s.a)(x,2),r=O[0],i=O[1],p=Object(b.useState)(!1),I=Object(s.a)(p,2),Y=I[0],V=I[1],ie=Object(b.useState)(!1),W=Object(s.a)(ie,2),P=W[0],de=W[1],Ee=Object(b.useState)(!1),z=Object(s.a)(Ee,2),ve=z[0],Me=z[1],pe=Object(b.useState)({score:1,value:""}),fe=Object(s.a)(pe,2),Ve=fe[0],ke=fe[1],tt=Object(b.useState)(o),qe=Object(s.a)(tt,2),Ge=qe[0],_e=qe[1],at=Object(b.useRef)();Object(b.useEffect)(function(){var J;(J=at.current)===null||J===void 0||J.reload(),_e(o)},[o]);var nt=function(te){var Ce=te.oldIndex,Se=te.newIndex;if(Ce!==Se){var Te=Object(ae.a)(Ge.slice(),Ce,Se).filter(Boolean).map(function(Oe,ye){return Object(g.a)(Object(g.a)({},Oe),{},{order:ye})});Te.forEach(function(Oe,ye){Oe.id!==Ge[ye].id&&Object(T.g)(Oe.id,Object(g.a)(Object(g.a)({},Oe),{},{order:ye+1,topic_gift_quiz_id:n}))}),_e(Te)}},rt=function(te){return Object(e.jsx)(H,Object(g.a)({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:nt},te))},st=function(te){var Ce=te.className,Se=te.style,Te=Object(Z.a)(te,h),Oe=Ge.findIndex(function(ye){return ye.id===Te["data-row-key"]});return Object(e.jsx)(D,Object(g.a)({index:Oe},Te))},it=Object(b.useCallback)(function(){V(!0),Object(T.a)(Object(g.a)({topic_gift_quiz_id:n},Ve)).catch(function(J){return console.log("err",J)}).then(function(){ke({value:"",score:1}),de(!1),u&&u()}).finally(function(){V(!1)})},[Ve,n]);return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(X.a,{open:!!r,onClose:function(){return i(void 0)},children:r&&Object(e.jsx)(ee,{debug:ve,onLoading:function(){return V(!0)},loading:Y,quizId:n,question:r,onRemoved:function(){j==null||j(),V(!1)},onEdited:function(){l==null||l(),V(!1)},categoryProps:d})}),Object(e.jsx)(X.a,{open:P,onClose:function(){return de(!1)},children:Object(e.jsx)(Ue,{debug:ve,onCreate:it,value:Ve,onChange:ke,categoryProps:d})}),Object(e.jsx)(be.a,{search:!1,cardProps:{bodyStyle:{padding:0}},loading:m,headerTitle:v,toolbar:{settings:[]},toolBarRender:function(){return[Object(e.jsxs)(K.a,{icon:Object(e.jsx)(je.a,{}),type:"primary",onClick:function(){return de(!0)},children:[" ",Object(e.jsx)(M.a,{id:"addNewQuestion",defaultMessage:"Add new question"})]},"add")]},columns:[].concat(U,Object(f.a)(d?[se]:[]),[{title:Object(e.jsx)(M.a,{id:"actions",defaultMessage:"Actions"}),dataIndex:"address",valueType:"option",render:function(te,Ce){return[Object(e.jsx)(K.a,{size:"small",type:"primary",onClick:function(){i(Ce)},children:Object(e.jsx)(M.a,{id:"Questions.edit",defaultMessage:"Edit Question"})},"edit"),Object(e.jsx)(K.a,{loading:Y,size:"small",danger:!0,onClick:function(){V(!0),Object(T.b)(Ce.id).then(function(){j&&j()}).finally(function(){V(!1)})},children:Object(e.jsx)(M.a,{id:"Questions.delete",defaultMessage:"Delete Question"})},"delete")]}}]),rowKey:function(te){return te.id},pagination:!1,dataSource:Ge,components:{body:{wrapper:rt,row:st}}}),Object(e.jsxs)(w.a,{style:{marginTop:"3em"},children:["Debug GIFT: ",Object(e.jsx)(E.a,{checked:ve,onChange:function(te){return Me(te)}})]})]})}}}]);
