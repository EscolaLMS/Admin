"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[6626,2803,8047],{45484:function(D,g,e){e.r(g),e.d(g,{default:function(){return U}});var T=e(97857),o=e.n(T),M=e(13769),c=e.n(M),b=e(62235),m=e(44167),f=e(91115),x=e(54464),p=e(53302),h=e(31472),_=e(51042),A=e(16894),v=e(14726),i=e(67294),n=e(80854),t=e(85893),y=["type","defaultRender"],r=[{title:(0,t.jsx)(n.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:(0,t.jsx)(n.FormattedMessage,{id:"user_id",defaultMessage:"user_id"}),dataIndex:"notifiable_id",hideInSearch:!0,sorter:!0,valueType:"select",renderFormItem:function(u,s){var a=s.type,d=s.defaultRender,l=c()(s,y);return(0,t.jsx)(m.Z,o()({},l))},render:function(u,s){return s.users&&s.users.map(function(a){return(0,t.jsx)(b.Z,{type:"App\\Models\\User",type_id:a},"user-".concat(a))})}},{title:(0,t.jsx)(n.FormattedMessage,{id:"title",defaultMessage:"title"}),dataIndex:"sections",hideInSearch:!0,sorter:!1,valueType:"select",render:function(u,s){var a;return((a=s.sections.find(function(d){var l=d.key;return l===h.hg.TITLE}))===null||a===void 0?void 0:a.value)||""}},{title:(0,t.jsx)(n.FormattedMessage,{id:"content",defaultMessage:"content"}),dataIndex:"sections",hideInSearch:!0,sorter:!1,valueType:"select",render:function(u,s){var a;return((a=s.sections.find(function(d){var l=d.key;return l===h.hg.BODY}))===null||a===void 0?void 0:a.value)||""}}],O=function(u){var s=u.templateType,a=u.channel,d=(0,i.useRef)(),l=(0,n.useIntl)(),k=(0,x.T)(),F=k.checkPermission;return(0,t.jsx)(A.ZP,{headerTitle:l.formatMessage({id:"Bulknotifications.pushListTitle",defaultMessage:"Push notifications sent"}),actionRef:d,rowKey:"id",search:!1,toolBarRender:function(){return F(f.Z.UserBulkNotificationCreate)?[(0,t.jsx)(n.Link,{to:"/users/notifications/".concat(s,"/new"),children:(0,t.jsxs)(v.ZP,{type:"primary",children:[(0,t.jsx)(_.Z,{})," ",(0,t.jsx)(n.FormattedMessage,{id:"new",defaultMessage:"new"})]},"primary")},"new")]:[]},request:function(I,C){var K=I.pageSize,W=I.current,P=C&&Object.entries(C)[0];return(0,p.xv)({per_page:K,page:W,order_by:P&&P[0],order:P?P[1]==="ascend"?"ASC":"DESC":void 0,channel:a}).then(function(E){return E.success?{data:E.data,total:E.meta.total,success:!0}:[]})},columns:[].concat(r)})},R=O,B=e(78715),S=e(74453),L=function(){var u=(0,n.useParams)(),s=u.template;return(0,t.jsx)(S._z,{children:(0,t.jsx)(B.ZP,{tabs:{type:"card",activeKey:s,onChange:function(d){return n.history.push("/configuration/templates/".concat(d))}},children:(0,t.jsx)(B.ZP.TabPane,{tab:(0,t.jsx)(n.FormattedMessage,{id:"Bulknotifications.push"}),children:(0,t.jsx)(R,{templateType:"push",channel:h.wg.PUSH})},"push")})})},U=L},53302:function(D,g,e){e.d(g,{MH:function(){return A},ol:function(){return h},xv:function(){return x}});var T=e(15009),o=e.n(T),M=e(97857),c=e.n(M),b=e(99289),m=e.n(b),f=e(80854);function x(i,n){return p.apply(this,arguments)}function p(){return p=m()(o()().mark(function i(n,t){return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,f.request)("/api/admin/bulk-notifications",c()({method:"GET",useCache:!1,params:n},t||{})));case 1:case"end":return r.stop()}},i)})),p.apply(this,arguments)}function h(i,n){return _.apply(this,arguments)}function _(){return _=m()(o()().mark(function i(n,t){return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,f.request)("/api/admin/bulk-notifications/send",c()({method:"POST",headers:{"Content-Type":"application/json"},data:n},t||{})));case 1:case"end":return r.stop()}},i)})),_.apply(this,arguments)}function A(i,n){return v.apply(this,arguments)}function v(){return v=m()(o()().mark(function i(n,t){return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,f.request)("/api/admin/bulk-notifications/send/multicast",c()({method:"POST",headers:{"Content-Type":"application/json"},data:n},t||{})));case 1:case"end":return r.stop()}},i)})),v.apply(this,arguments)}}}]);
