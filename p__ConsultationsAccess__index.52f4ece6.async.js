(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8382,2803,8047],{58664:function(b,_,e){"use strict";e.d(_,{T:function(){return U}});var P=e(19632),r=e.n(P),h=e(5574),a=e.n(h),s=e(74656),T=e(74330),D=e(67294),m=e(51490),A=e(99100),N=e(32283),F=e(80854),x=e(85893),$=function(M){return M.map(function(d){return"name"in d?{id:Number(d.id),name:d.name}:{id:Number(d.id),name:d.title?d.title:""}})},U=function(M){var d=M.value,o=M.onChange,Z=M.multiple,V=Z===void 0?!1:Z,w=M.defaultValue,J=M.modelType,z=J===void 0?"COURSE":J,q=(0,D.useState)([]),se=a()(q,2),ee=se[0],oe=se[1],te=(0,D.useState)(!1),ie=a()(te,2),ue=ie[0],le=ie[1],i=(0,D.useRef)(),de=(0,D.useCallback)(function(u){var j,E,t,S;switch(z){case"COURSE":return(0,A.N7)(u,{signal:i==null||(j=i.current)===null||j===void 0?void 0:j.signal});case"WEBINAR":return(0,N.i5)(u,{signal:i==null||(E=i.current)===null||E===void 0?void 0:E.signal});case"CONSULTATIONS":return(0,m.sL)(u,{signal:i==null||(t=i.current)===null||t===void 0?void 0:t.signal});default:return(0,A.N7)(u,{signal:i==null||(S=i.current)===null||S===void 0?void 0:S.signal})}},[z,i]),me=(0,D.useCallback)(function(u){var j,E,t,S;switch(z){case"COURSE":return(0,A.XR)(Number(u),{signal:(j=i.current)===null||j===void 0?void 0:j.signal});case"WEBINAR":return(0,N.tz)(Number(u),{signal:(E=i.current)===null||E===void 0?void 0:E.signal});case"CONSULTATIONS":return(0,m.hW)(Number(u),{signal:(t=i.current)===null||t===void 0?void 0:t.signal});default:return(0,A.XR)(Number(u),{signal:(S=i.current)===null||S===void 0?void 0:S.signal})}},[z,i]),ne=(0,D.useCallback)(function(u){le(!0),i.current&&i.current.abort(),i.current=new AbortController,de(u?{name:u}:{}).then(function(j){j.success&&oe($(j.data))}).catch(function(j){return console.error(j)}).finally(function(){le(!1)})},[z]),re=(0,D.useCallback)(function(u){ne(u)},[ne]);return(0,D.useEffect)(function(){return i.current=new AbortController,d&&me(Number(d)).then(function(u){u&&u.success&&oe(function(j){return[].concat(r()(j),r()($([u.data])))})}),function(){i.current&&i.current.abort()}},[d,z]),(0,x.jsx)(s.default,{defaultValue:w,onFocus:function(){return ne()},allowClear:!0,style:{width:"100%"},value:d,onChange:o,mode:V?"multiple":void 0,showSearch:!0,onSearch:re,placeholder:(0,x.jsx)(F.FormattedMessage,{id:"select_content",defaultMessage:"select_content"}),optionFilterProp:"children",filterOption:function(j,E){if(E&&E.children){var t;return(E==null||(t=E.children)===null||t===void 0?void 0:t.toString().toLowerCase().indexOf(j.toLowerCase()))>=0}return!0},loading:ue,notFoundContent:ue?(0,x.jsx)(T.Z,{size:"small"}):null,optionLabelProp:"label",children:ee.map(function(u){return(0,x.jsx)(s.default.Option,{value:u.id,label:u.name,children:u.name},u.id)})})}},64424:function(b,_,e){"use strict";e.r(_),e.d(_,{default:function(){return Fe}});var P=e(15009),r=e.n(P),h=e(99289),a=e.n(h),s=e(97857),T=e.n(s),D=e(13769),m=e.n(D),A=e(5574),N=e.n(A),F=e(74453),x=e(16894),$=e(66309),U=e(78957),I=e(14726),M=e(60943),d=e(67294),o=e(80854),Z=e(58664),V=e(62235),w=e(44167),J=e(45919);function z(y,v){return q.apply(this,arguments)}function q(){return q=a()(r()().mark(function y(v,l){return r()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",(0,o.request)("/api/admin/consultation-access-enquiries",T()({method:"GET",params:v},l||{})));case 1:case"end":return R.stop()}},y)})),q.apply(this,arguments)}function se(y,v,l){return ee.apply(this,arguments)}function ee(){return ee=a()(r()().mark(function y(v,l,O){return r()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,o.request)("/api/admin/consultation-access-enquiries/approve/".concat(v),T()({data:l,method:"POST"},O||{})));case 1:case"end":return p.stop()}},y)})),ee.apply(this,arguments)}function oe(y,v,l){return te.apply(this,arguments)}function te(){return te=a()(r()().mark(function y(v,l,O){return r()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,o.request)("/api/admin/consultation-access-enquiries/disapprove/".concat(v),T()({data:l,method:"POST"},O||{})));case 1:case"end":return p.stop()}},y)})),te.apply(this,arguments)}var ie=e(19632),ue=e.n(ie),le=e(9783),i=e.n(le),de=e(184),me=e(64317),ne=e(5966),re=e(75842),u=e(26412),j=e(55877),E=e(57818),t=e(85893),S=function(y){return y.Custom="custom",y.Jitsi="jitsi",y.PencilSpaces="pencil-spaces",y}(S||{}),he=function(v,l){return l?[v]:[]},Ce=function(){return"https://meet.jit.si/".concat((0,j.v4)())},xe=function(v){var l,O=v.meeting_link,R=v.meeting_type,p=i()(i()(i()({},S.Custom,O),S.Jitsi,Ce()),S.PencilSpaces,null);return(l=p==null?void 0:p[R])!==null&&l!==void 0?l:O},Me=function(v){var l=v.term,O=v.onClose,R=v.onSuccess,p=(0,o.useIntl)(),Q=(0,o.useModel)("@@initialState"),W=Q.initialState,X=re.Z.useForm(),k=N()(X,1),H=k[0],ce=re.Z.useWatch("meeting_type",H),f=(0,d.useMemo)(function(){var c;return!!(!(W==null||(c=W.packages)===null||c===void 0)&&c[E.Z.PencilSpaces])},[W==null?void 0:W.packages]),g=(0,d.useMemo)(function(){return[{value:S.Custom,label:p.formatMessage({id:"ConsultationsAccess.meetingType.custom"})},{value:S.Jitsi,label:p.formatMessage({id:"ConsultationsAccess.meetingType.jitsi"})}].concat(ue()(he({value:S.PencilSpaces,label:p.formatMessage({id:"ConsultationsAccess.meetingType.pencil-spaces"})},f)))},[p,f]),n=(0,d.useCallback)(function(){var c=a()(r()().mark(function C(Y){var K,B;return r()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(l){L.next=2;break}return L.abrupt("return");case 2:return K=xe(Y),L.next=5,se(l==null?void 0:l.id,{meeting_link:K});case 5:if(B=L.sent,B.success){L.next=8;break}return L.abrupt("return");case 8:O(),R();case 10:case"end":return L.stop()}},C)}));return function(C){return c.apply(this,arguments)}}(),[l]);return(0,t.jsxs)(de.a,{title:(0,t.jsx)(o.FormattedMessage,{id:"approve_form",defaultMessage:"Approve Form"}),onVisibleChange:function(C){return!C&&O()},form:H,visible:!!l,autoFocusFirstInput:!0,drawerProps:{destroyOnClose:!0},submitTimeout:2e3,initialValues:{meeting_type:S.Custom},onFinish:n,children:[l&&(0,t.jsx)(u.Z,{column:2,children:(0,t.jsx)(u.Z.Item,{label:(0,t.jsx)(o.FormattedMessage,{id:"approve_date",defaultMessage:"Approved Date"}),children:(0,M.WU)(new Date(l.proposed_at),J.Cu)})}),(0,t.jsx)(me.Z,{name:"meeting_type",options:g,label:(0,t.jsx)(o.FormattedMessage,{id:"ConsultationsAccess.meetingType"})}),ce===S.Custom&&(0,t.jsx)(ne.Z,{rules:[{required:!0}],name:"meeting_link",label:(0,t.jsx)(o.FormattedMessage,{id:"ConsultationsAccess.meetingLink"})})]})},ye=e(90672),je=function(v){var l=v.id,O=v.onClose,R=v.onSuccess,p=re.Z.useForm(),Q=N()(p,1),W=Q[0];return(0,t.jsx)(de.a,{title:(0,t.jsx)(o.FormattedMessage,{id:"disapprove_form",defaultMessage:"Disapprove Form"}),onVisibleChange:function(k){return!k&&O()},form:W,visible:!!l,autoFocusFirstInput:!0,drawerProps:{destroyOnClose:!0},submitTimeout:2e3,onFinish:function(){var X=a()(r()().mark(function k(H){return r()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!l){f.next=3;break}return f.next=3,oe(l,H).then(function(g){g.success&&(O(),R())});case 3:return f.abrupt("return",!0);case 4:case"end":return f.stop()}},k)}));return function(k){return X.apply(this,arguments)}}(),children:(0,t.jsx)(ye.Z,{name:"message",label:(0,t.jsx)(o.FormattedMessage,{id:"reason",defaultMessage:"Reason"}),tooltip:(0,t.jsx)(o.FormattedMessage,{id:"reason_tooltip",defaultMessage:"Reason"})})})},Se=["type","defaultRender"],Ae=["type","defaultRender"],Te=function(){var v=(0,d.useRef)(),l=(0,o.useIntl)(),O=(0,d.useState)(),R=N()(O,2),p=R[0],Q=R[1],W=(0,d.useState)(),X=N()(W,2),k=X[0],H=X[1],ce=(0,d.useMemo)(function(){return[{title:(0,t.jsx)(o.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,defaultSortOrder:"descend",sorter:!0,width:"80px"},{title:(0,t.jsx)(o.FormattedMessage,{id:"description",defaultMessage:"Description"}),dataIndex:"description",hideInSearch:!0,sorter:!0},{title:(0,t.jsx)(o.FormattedMessage,{id:"user",defaultMessage:"User"}),dataIndex:"user_id",renderFormItem:function(g,n,c){var C=n.type,Y=n.defaultRender,K=m()(n,Se);if(C==="form")return null;var B=c.getFieldValue("state");return(0,t.jsx)(w.Z,T()(T()({},K),{},{state:{type:B}}))},render:function(g,n){var c,C;return((c=n.user)===null||c===void 0?void 0:c.id)&&(0,t.jsx)(V.Z,{type:"EscolaLms\\Core\\Models\\User",type_id:(C=n.user)===null||C===void 0?void 0:C.id,children:(0,t.jsx)($.Z,{children:n.user.email})},"user")}},{title:(0,t.jsx)(o.FormattedMessage,{id:"consultation_id",defaultMessage:"Consultation"}),dataIndex:"consultation_id",renderFormItem:function(g,n,c){var C=n.type,Y=n.defaultRender,K=m()(n,Ae);if(C==="form")return null;var B=c.getFieldValue("state");return(0,t.jsx)(Z.T,T()(T()({modelType:"CONSULTATIONS"},K),{},{state:{type:B}}))},render:function(g,n){var c,C;return((c=n.consultation)===null||c===void 0?void 0:c.id)&&(0,t.jsx)(V.Z,{type:"EscolaLms\\Consultations\\Models\\Consultation",type_id:(C=n.consultation)===null||C===void 0?void 0:C.id,children:(0,t.jsx)($.Z,{children:n.consultation.name})},"consultation_id")}},{title:(0,t.jsx)(o.FormattedMessage,{id:"consultation_term_date",defaultMessage:"Term Date"}),dataIndex:"consultation_term",hideInSearch:!0,sorter:!0,render:function(g,n){return n.consultation_term?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.FormattedMessage,{id:"approved_date",defaultMessage:"Approved Date"}),":",(0,M.WU)(new Date(n.consultation_term.date),J.Cu)]}):(0,t.jsx)(U.Z,{direction:"vertical",children:n.proposed_terms.map(function(c){return(0,t.jsxs)(I.ZP,{size:"small",type:"primary",onClick:function(){H(c)},children:[(0,t.jsx)(o.FormattedMessage,{id:"approve",defaultMessage:"Approve Term"}),":",(0,M.WU)(new Date(c.proposed_at),J.Cu)]},c.id)})})}},{title:(0,t.jsx)(o.FormattedMessage,{id:"meeting_link",defaultMessage:"Meeting Link"}),dataIndex:"meeting_link",hideInSearch:!0,render:function(g,n){return n.meeting_link?(0,t.jsx)(I.ZP,{target:"_blank",type:"primary",href:n.meeting_link,children:new URL(n.meeting_link).host}):(0,t.jsx)(d.Fragment,{})}},{title:(0,t.jsx)(o.FormattedMessage,{id:"created_at",defaultMessage:"Created at"}),dataIndex:"created_at",hideInSearch:!0,sorter:!0,render:function(g,n){return n.created_at&&(0,M.WU)(new Date(n.created_at),J.Cu)}},{title:(0,t.jsx)(o.FormattedMessage,{id:"status",defaultMessage:"Status"}),dataIndex:"status",sorter:!0,valueType:"select",valueEnum:{pending:{text:"pending",status:"pending"},approved:{text:"approved",status:"approved"}},render:function(g,n){return n.status==="pending"?(0,t.jsx)(I.ZP,{danger:!0,size:"small",type:"primary",onClick:function(){Q(n.id)},children:(0,t.jsx)(o.FormattedMessage,{id:"disapprove",defaultMessage:"Disapprove"})}):n.status}}]},[]);return(0,t.jsxs)(F._z,{children:[(0,t.jsx)(Me,{term:k,onClose:function(){return H(void 0)},onSuccess:function(){var g;return(g=v.current)===null||g===void 0?void 0:g.reload()}}),(0,t.jsx)(je,{id:p,onClose:function(){return Q(void 0)},onSuccess:function(){var g;return(g=v.current)===null||g===void 0?void 0:g.reload()}}),(0,t.jsx)(x.ZP,{headerTitle:l.formatMessage({id:"menu.Other activities.Consultation Requests"}),search:{layout:"vertical"},actionRef:v,rowKey:"id",request:function(){var f=a()(r()().mark(function g(n,c){var C,Y,K,B,fe,L,pe,ge,ae,ve;return r()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return C=n.pageSize,Y=n.current,K=n.consultation_id,B=n.status,fe=n.user_id,L=n.is_coming,pe=n.proposed_at_from,ge=n.proposed_at_to,ae=c&&Object.entries(c)[0],G.next=4,z({per_page:C,page:Y,consultation_id:K,status:B,user_id:fe,is_coming:L,proposed_at_from:pe,proposed_at_to:ge,order_by:ae&&ae[0],order:ae?ae[1]==="ascend"?"ASC":"DESC":void 0});case 4:if(ve=G.sent,ve.success){G.next=7;break}return G.abrupt("return",{data:[],total:0,success:!1});case 7:return G.abrupt("return",{data:ve.data,total:ve.meta.total,success:!0});case 8:case"end":return G.stop()}},g)}));return function(g,n){return f.apply(this,arguments)}}(),columns:ce})]})},Fe=Te},55877:function(b,_,e){var P=e(23570),r=e(71171),h=r;h.v1=P,h.v4=r,b.exports=h},45327:function(b){for(var _=[],e=0;e<256;++e)_[e]=(e+256).toString(16).substr(1);function P(r,h){var a=h||0,s=_;return[s[r[a++]],s[r[a++]],s[r[a++]],s[r[a++]],"-",s[r[a++]],s[r[a++]],"-",s[r[a++]],s[r[a++]],"-",s[r[a++]],s[r[a++]],"-",s[r[a++]],s[r[a++]],s[r[a++]],s[r[a++]],s[r[a++]],s[r[a++]]].join("")}b.exports=P},85217:function(b){var _=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(_){var e=new Uint8Array(16);b.exports=function(){return _(e),e}}else{var P=new Array(16);b.exports=function(){for(var h=0,a;h<16;h++)h&3||(a=Math.random()*4294967296),P[h]=a>>>((h&3)<<3)&255;return P}}},23570:function(b,_,e){var P=e(85217),r=e(45327),h,a,s=0,T=0;function D(m,A,N){var F=A&&N||0,x=A||[];m=m||{};var $=m.node||h,U=m.clockseq!==void 0?m.clockseq:a;if($==null||U==null){var I=P();$==null&&($=h=[I[0]|1,I[1],I[2],I[3],I[4],I[5]]),U==null&&(U=a=(I[6]<<8|I[7])&16383)}var M=m.msecs!==void 0?m.msecs:new Date().getTime(),d=m.nsecs!==void 0?m.nsecs:T+1,o=M-s+(d-T)/1e4;if(o<0&&m.clockseq===void 0&&(U=U+1&16383),(o<0||M>s)&&m.nsecs===void 0&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=M,T=d,a=U,M+=122192928e5;var Z=((M&268435455)*1e4+d)%4294967296;x[F++]=Z>>>24&255,x[F++]=Z>>>16&255,x[F++]=Z>>>8&255,x[F++]=Z&255;var V=M/4294967296*1e4&268435455;x[F++]=V>>>8&255,x[F++]=V&255,x[F++]=V>>>24&15|16,x[F++]=V>>>16&255,x[F++]=U>>>8|128,x[F++]=U&255;for(var w=0;w<6;++w)x[F+w]=$[w];return A||r(x)}b.exports=D},71171:function(b,_,e){var P=e(85217),r=e(45327);function h(a,s,T){var D=s&&T||0;typeof a=="string"&&(s=a==="binary"?new Array(16):null,a=null),a=a||{};var m=a.random||(a.rng||P)();if(m[6]=m[6]&15|64,m[8]=m[8]&63|128,s)for(var A=0;A<16;++A)s[D+A]=m[A];return s||r(m)}b.exports=h}}]);
