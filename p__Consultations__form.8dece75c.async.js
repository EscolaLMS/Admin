(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"4f6N":function(_,y,t){"use strict";var W=t("2qtc"),A=t("kLXV"),u=t("9kvl"),j=t("nKUr"),F=t.n(j),N=function(b){var U=b.visible,E=b.setManage;return Object(j.jsx)(A.a,{width:"600px",title:Object(j.jsx)(u.a,{id:"course.validate_edit.header",defaultMessage:"course.validate_edit.header"}),visible:U,onOk:function(){return E({showModal:!1,disableEdit:!1,clicked:!0})},onCancel:function(){return E({showModal:!1,disableEdit:!0,clicked:!1})},okText:"OK",cancelText:"Cancel",children:Object(j.jsx)("p",{children:Object(j.jsx)(u.a,{id:"course.validate_edit.content",defaultMessage:"course.validate_edit.content"})})})};y.a=N},"5qq5":function(_,y,t){"use strict";var W=t("7Kak"),A=t("9yH6"),u=t("VTBJ"),j=t("Ff2n"),F=t("nKUr"),N=t.n(F),G=t("uX+g"),b=t("q1tI"),U=t.n(b),E=t("WFLz"),h=t("adzw"),x=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],M=U.a.forwardRef(function(o,$){var C=o.fieldProps,q=o.options,at=o.radioType,et=o.layout,J=o.proFieldProps,nt=o.valueEnum,st=Object(j.a)(o,x);return Object(F.jsx)(h.a,Object(u.a)(Object(u.a)({valueType:at==="button"?"radioButton":"radio",ref:$,valueEnum:Object(G.a)(nt,void 0)},st),{},{fieldProps:Object(u.a)({options:q,layout:et},C),proFieldProps:J,filedConfig:{customLightMode:!0}}))}),a=U.a.forwardRef(function(o,$){var C=o.fieldProps,q=o.children;return Object(F.jsx)(A.a,Object(u.a)(Object(u.a)({},C),{},{ref:$,children:q}))}),V=Object(E.a)(a,{valuePropName:"checked",ignoreWidth:!0}),R=V;R.Group=M,R.Button=A.a.Button,R.displayName="ProFormComponent",y.a=R},CiXh:function(_,y,t){"use strict";var W=t("2qtc"),A=t("kLXV"),u=t("9kvl"),j=t("nKUr"),F=t.n(j),N=function(b){var U=b.open,E=b.onOk,h=b.onCancel,x=b.title,M=b.content,a=b.okText,V=b.loading;return Object(j.jsx)(A.a,{width:"600px",title:x!=null?x:Object(j.jsx)(u.a,{id:"confirmModal.title"}),open:U,onOk:E,onCancel:h,okText:a!=null?a:Object(j.jsx)(u.a,{id:"save"}),cancelText:Object(j.jsx)(u.a,{id:"cancel"}),confirmLoading:V,children:M!=null?M:Object(j.jsx)("p",{children:Object(j.jsx)(u.a,{id:"confirmModal.content"})})})};y.a=N},FJDo:function(_,y,t){"use strict";var W=t("VTBJ"),A=t("Ff2n"),u=t("nKUr"),j=t.n(u),F=t("q1tI"),N=t.n(F),G=t("adzw"),b=["fieldProps","min","proFieldProps","max"],U=function(h,x){var M=h.fieldProps,a=h.min,V=h.proFieldProps,R=h.max,o=Object(A.a)(h,b);return Object(u.jsx)(G.a,Object(W.a)({valueType:"digit",fieldProps:Object(W.a)({min:a,max:R},M),ref:x,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:V},o))};y.a=N.a.forwardRef(U)},GZq3:function(_,y,t){},"J+hL":function(_,y,t){},eFHa:function(_,y,t){"use strict";t.d(y,"a",function(){return G});var W=t("k1fw"),A=t("tJVT"),u=t("q1tI"),j=t("/Tr7"),F=t("jIYg");function N(b){return Object(F.a)(1,arguments),Object(j.a)(b).getTime()<Date.now()}function G(){var b=Object(u.useState)({showModal:!1,disableEdit:!1,clicked:!1}),U=Object(A.a)(b,2),E=U[0],h=U[1],x=function(a){(a==null?void 0:a.status)==="published"&&a!==null&&a!==void 0&&a.active_from&&N(new Date(a==null?void 0:a.active_from))&&!E.clicked?h(Object(W.a)(Object(W.a)({},E),{},{showModal:!1,disableEdit:!0,clicked:!1})):h(Object(W.a)(Object(W.a)({},E),{},{showModal:!1,disableEdit:!1,clicked:!1}))};return{manageCourseEdit:E,setManageCourseEdit:h,validateCourseEdit:x}}},q34N:function(_,y,t){"use strict";var W=t("tJVT"),A=t("0eZe"),u=t("q1tI"),j=t.n(u),F=t("nKUr"),N=t.n(F),G=function(U){var E=U.productable,h=U.type,x=h===void 0?"card":h,M=Object(u.useState)("attributes"),a=Object(W.a)(M,2),V=a[0],R=a[1];return Object(F.jsx)(A.a,{productable:E,tab:V,onTabChange:function($){return R($)},type:x})};y.a=G},rh3J:function(_,y,t){"use strict";t.r(y);var W=t("14J3"),A=t("BMrR"),u=t("jCWc"),j=t("kPKH"),F=t("fOrg"),N=t("+KLJ"),G=t("+L6B"),b=t("2/Rp"),U=t("T2oS"),E=t("W9HT"),h=t("miYZ"),x=t("tsqr"),M=t("qLMh"),a=t("k1fw"),V=t("9og8"),R=t("tJVT"),o=t("q1tI"),$=t.n(o),C=t("VMEa"),q=t("Qurx"),at=t("yj/a"),et=t("lR9U"),J=t("nhC9"),nt=t("hd5d"),st=t("tMyG"),n=t("9kvl"),Ot=t("Ty5D"),bt=t("0WSk"),vt=t("TWax"),tt=t("Gb5Y"),Wt=t("OaEy"),mt=t("2fM7"),Ft=t("iQDF"),it=t("+eQT"),Lt=t("+BJd"),ft=t("mr32"),ht=t("oBTY"),gt=t("wd/R"),k=t.n(gt),Kt=t("GZq3"),e=t("nKUr"),lt=function(i){return i.local().valueOf()},pt=function(i){var v=i.value,s=v===void 0?[]:v,I=i.onChange,p=i.format,S=p===void 0?"DD-MM-YYYY HH:mm":p,z=i.selectProps,X=z===void 0?{}:z,l=Object(o.useState)(!1),L=Object(R.a)(l,2),Q=L[0],r=L[1],P=Object(o.useCallback)(function(f){var T=lt(f),O=s.indexOf(T),d=Object(ht.a)(s);O>-1?d.splice(O,1):d.push(T),I(d)},[s]),c=Object(o.useCallback)(function(f){var T=s.indexOf(lt(f))>-1;return Object(e.jsx)("div",{className:"ant-picker-cell-inner",style:T?{position:"relative",zIndex:2,display:"inlineBlock",width:"24px",height:"22px",lineHeight:"22px",backgroundColor:"#1890ff",color:"#fff",margin:"auto",borderRadius:"2px",transition:"background 0.3s, border 0.3s"}:{},children:f.date()})},[s]),D=Object(o.useCallback)(function(f){var T=f.value,O=f.onClose,d=function(){O(),I(s.filter(function(K){return K!==T}))};return Object(e.jsx)(ft.a,{onClose:d,closable:!0,children:k()(T).format(S)})},[s]),B=function(){return{disabledMinutes:function(){return Array.from({length:59},function(O,d){return d+1})}}};return Object(e.jsx)(mt.a,Object(a.a)(Object(a.a)({},X),{},{allowClear:!0,mode:"multiple",value:s,onClear:function(){return I&&I([])},tagRender:D,open:Q,onFocus:function(){return r(!0)},onBlur:function(){return r(!1)},dropdownMatchSelectWidth:!1,dropdownClassName:"multipleDropdownClassName",dropdownStyle:{height:"310px",width:"335px",minWidth:"0"},dropdownRender:function(){return Object(e.jsx)(it.a,{disabledDate:function(O){var d=new Date;return O&&O.valueOf()<=d.setDate(d.getDate()-1)},showTime:{format:"HH"},disabledTime:B,onChange:function(O){return O&&P(O)},open:!0,dateRender:c,style:{visibility:"hidden"},getPopupContainer:function(O){var d=O.parentNode;return d},defaultValue:k()("00:00","HH")})}}))},Et=pt,ot=t("c+yx"),dt=t("Gn8c"),rt;(function(g){g.draft="draft",g.published="published",g.archived="archived"})(rt||(rt={}));var xt=t("eFHa"),Mt=t("4f6N"),Nt=t("qbNl"),Ct=t("JBPa"),Vt=t("5Dmo"),Pt=t("3S7+"),Ht=t("Awhp"),ct=t("KrTs"),Dt=t("Qiat"),Tt=function(i){var v=i.data,s=i.onChange,I=Object(o.useState)(!1),p=Object(R.a)(I,2),S=p[0],z=p[1],X=Object(o.useState)(k()(v.date)),l=Object(R.a)(X,2),L=l[0],Q=l[1],r=Object(o.useCallback)(function(P){Q(k()(P)),z(!0),Object(tt.a)(v.consultation_term_id,P).then(function(c){c.success?(x.b.success(c.message),s(L)):x.b.error(c.message)}).catch(function(c){return x.b.error(c.toString())}).finally(function(){return z(!1)})},[L]);return Object(e.jsx)($.a.Fragment,{children:Object(e.jsx)(it.a,{disabledDate:function(c){var D=new Date;return c&&c.valueOf()<=D.setDate(D.getDate()-1)},disabled:S,value:L,showTime:{format:"HH"},onChange:function(c){c&&r(c.toISOString())}})})},ut={reported:"warning",reject:"error",approved:"success"},yt=[{title:Object(e.jsx)(n.a,{id:"id",defaultMessage:"id"}),dataIndex:"consultation_term_id",hideInSearch:!0},{title:Object(e.jsx)(n.a,{id:"user",defaultMessage:"user"}),dataIndex:"user",render:function(i,v){var s,I,p;return"".concat((s=v.user)===null||s===void 0?void 0:s.first_name," ").concat((I=v.user)===null||I===void 0?void 0:I.last_name," ").concat((p=v.user)===null||p===void 0?void 0:p.email)}},{title:Object(e.jsx)(n.a,{id:"date",defaultMessage:"date"}),dataIndex:"date",render:function(i,v){return k()(v.date).format("yyyy-MM-DD HH:mm")}},{title:Object(e.jsx)(n.a,{id:"status",defaultMessage:"status"}),dataIndex:"status",render:function(i,v){return Object(e.jsx)(ct.a,{status:ut[v.status],text:Object(e.jsx)(n.a,{id:v.status})})}}],Rt=function(i){var v=i.consultation,s=Object(o.useState)(!1),I=Object(R.a)(s,2),p=I[0],S=I[1],z=Object(o.useState)([]),X=Object(R.a)(z,2),l=X[0],L=X[1],Q=Object(n.l)(),r=Object(o.useCallback)(function(){S(!0),Object(tt.f)(v).then(function(c){c.success&&L(c.data)}).catch(function(){x.b.error(Object(e.jsx)(n.a,{id:"error",defaultMessage:"error"}))}).finally(function(){return S(!1)})},[v]);Object(o.useEffect)(function(){r()},[v]);var P=Object(o.useCallback)(function(c){return Object(e.jsx)("ul",{className:"events",children:l.map(function(D){if(c.format("yyyy-MM-DD")===k()(D.date).format("yyyy-MM-DD")){var B,f,T,O;return Object(e.jsx)("li",{children:Object(e.jsx)(ct.a,{status:ut[D.status],text:Object(e.jsx)($.a.Fragment,{children:Object(e.jsxs)(Pt.a,{title:"".concat((B=D.user)===null||B===void 0?void 0:B.first_name," ").concat((f=D.user)===null||f===void 0?void 0:f.last_name," ").concat((T=D.user)===null||T===void 0?void 0:T.email),children:[Object(e.jsx)("small",{children:k()(D.date).format("HH:mm")})," ",(O=D.user)===null||O===void 0?void 0:O.email]})})})},D.consultation_term_id)}return null})})},[l]);return Object(e.jsxs)($.a.Fragment,{children:[p&&Object(e.jsx)(E.a,{}),Object(e.jsx)(Ct.a,{dateCellRender:P}),p?Object(e.jsx)(E.a,{}):Object(e.jsx)(Dt.a,{headerTitle:Q.formatMessage({id:"Consultations",defaultMessage:"Consultations"}),loading:p,rowKey:"consultation_term_id",search:!1,request:Object(V.a)(Object(M.a)().mark(function c(){return Object(M.a)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",{data:l,total:l.length,success:!0});case 1:case"end":return B.stop()}},c)})),columns:[].concat(yt,[{title:Object(e.jsx)(n.a,{id:"options",defaultMessage:"options"}),dataIndex:"option",valueType:"option",width:"20%",render:function(D,B){return[Object(e.jsx)(Tt,{data:B,onChange:function(){return r()}},"change_date")]}}])})]})},It=Rt,St=t("q34N"),At=t("5RzD"),Ut=t("CiXh"),Gt=t("J+hL"),Y;(function(g){g.ATTRIBUTES="attributes",g.PRODUCT="product",g.MEDIA="media",g.CATEGORIES="categories",g.BRANDING="branding",g.USER_SUBMISSION="user_submission",g.CALENDAR="calendar"})(Y||(Y={}));var Bt=function(){var i=Object(n.l)(),v=Object(Ot.l)(),s=v.consultation,I=v.tab,p=I===void 0?"attributes":I,S=s==="new",z=Object(o.useState)(),X=Object(R.a)(z,2),l=X[0],L=X[1],Q=Object(xt.a)(),r=Q.manageCourseEdit,P=Q.setManageCourseEdit,c=Q.validateCourseEdit,D=C.a.useForm(),B=Object(R.a)(D,1),f=B[0],T=Object(o.useCallback)(Object(V.a)(Object(M.a)().mark(function d(){var m,K;return Object(M.a)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,Object(tt.e)(Number(s));case 2:m=Z.sent,m.success&&(p==="attributes"&&c(m.data),L(Object(a.a)(Object(a.a)({},m.data),{},{author_id:m.data.author&&m.data.author.id,categories:(K=m.data.categories)===null||K===void 0?void 0:K.map(ot.a)})));case 4:case"end":return Z.stop()}},d)})),[s]);Object(o.useEffect)(function(){if(S){L({name:"new"});return}T()},[s]);var O=Object(o.useMemo)(function(){return{onValuesChange:function(){P(Object(a.a)(Object(a.a)({},r),{},{valuesChanged:!0}))},onFinish:function(){var d=Object(V.a)(Object(M.a)().mark(function K(jt){var Z,w;return Object(M.a)().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!r.disableEdit){H.next=3;break}return P({showModal:!0,disableEdit:!0,clicked:!1}),H.abrupt("return");case 3:if(Z=Object(a.a)(Object(a.a)({},jt),{},{image_url:l&&l.image_url,image_path:l&&l.image_url&&Object(ot.j)(l.image_url),logotype_url:l&&l.logotype_url,logotype_path:l&&l.logotype_path&&Object(ot.j)(l.logotype_path)}),!S){H.next=11;break}return H.next=7,Object(tt.c)(Z);case 7:w=H.sent,w.success&&n.f.push("/other/consultations/".concat(w.data.id)),H.next=15;break;case 11:return H.next=13,Object(tt.g)(Number(s),Z);case 13:w=H.sent,w.success&&(c(w.data),n.f.push("/other/consultations/".concat(w.data.id,"/").concat(p)));case 15:x.b.success(w.message),P(Object(a.a)(Object(a.a)({},r),{},{showConfirmModal:!1,loading:!1,valuesChanged:!1}));case 17:case"end":return H.stop()}},K)}));function m(K){return d.apply(this,arguments)}return m}(),initialValues:l}},[l,s,p,r]);return l?Object(e.jsxs)(st.a,{title:S?Object(e.jsx)(n.a,{id:"consultation"}):Object(e.jsx)(n.a,{id:"consultations.edit"}),header:{breadcrumb:{routes:[{path:"other/consultations",breadcrumbName:i.formatMessage({id:"menu.Other activities.Consultations"})},{path:String(s),breadcrumbName:i.formatMessage({id:"form"})},{path:"/",breadcrumbName:String(l.name)},{path:String(p),breadcrumbName:String(l.name)}]}},children:[Object(e.jsxs)(J.a,{tabs:{type:"card",activeKey:p,onChange:function(m){m!==Y.ATTRIBUTES&&r.valuesChanged?P(Object(a.a)(Object(a.a)({},r),{},{showConfirmModal:!0})):n.f.push("/other/consultations/".concat(s,"/").concat(m))}},children:[Object(e.jsxs)(J.a.TabPane,{tab:Object(e.jsx)(n.a,{id:"attributes"}),children:[r.disableEdit&&Object(e.jsx)(N.a,{closable:!0,style:{marginBottom:"20px"},type:"warning",message:Object(e.jsx)(n.a,{id:"course_edit_warning_message",defaultMessage:"course_edit_warning_message"}),action:Object(e.jsx)(b.a,{onClick:function(){return P({showModal:!0,disableEdit:!0,clicked:!0})},type:"primary",children:Object(e.jsx)(n.a,{id:"questionnaire.submit",defaultMessage:"questionnaire.submit"})})}),Object(e.jsx)(Mt.a,{visible:r.showModal,setManage:P}),Object(e.jsxs)(C.a,Object(a.a)(Object(a.a)({},O),{},{form:f,children:[Object(e.jsxs)(C.a.Group,{children:[Object(e.jsx)(q.a,{width:"md",name:"name",label:Object(e.jsx)(n.a,{id:"name"}),tooltip:Object(e.jsx)(n.a,{id:"name"}),placeholder:i.formatMessage({id:"name",defaultMessage:"name"}),required:!0,disabled:r.disableEdit}),Object(e.jsx)(q.a,{width:"sm",name:"duration",label:Object(e.jsx)(n.a,{id:"duration"}),tooltip:Object(e.jsx)(n.a,{id:"consultations.duration_tooltip"}),placeholder:i.formatMessage({id:"duration",defaultMessage:"duration"}),disabled:r.disableEdit}),Object(e.jsx)(at.a,{name:"status",width:"sm",label:Object(e.jsx)(n.a,{id:"status"}),tooltip:Object(e.jsx)(n.a,{id:"status_consultation_tooltip"}),valueEnum:{draft:i.formatMessage({id:"draft",defaultMessage:"draft"}),published:i.formatMessage({id:"published",defaultMessage:"published"}),archived:i.formatMessage({id:"archived",defaultMessage:"archived"})},initialValue:rt.draft,placeholder:i.formatMessage({id:"status"}),rules:[{required:!0,message:Object(e.jsx)(n.a,{id:"select"})}],disabled:r.disableEdit})]}),Object(e.jsxs)(C.a.Group,{children:[Object(e.jsx)(et.a,{width:"sm",name:"active_from",label:Object(e.jsx)(n.a,{id:"active_from"}),tooltip:Object(e.jsx)(n.a,{id:"active_from"}),placeholder:i.formatMessage({id:"active_from",defaultMessage:"active_from"}),disabled:r.disableEdit}),Object(e.jsx)(et.a,{width:"sm",name:"active_to",label:Object(e.jsx)(n.a,{id:"active_to"}),tooltip:Object(e.jsx)(n.a,{id:"active_to"}),placeholder:i.formatMessage({id:"active_to",defaultMessage:"active_to"}),disabled:r.disableEdit}),Object(e.jsx)(C.a.Item,{name:"author_id",label:Object(e.jsx)(n.a,{id:"tutor"}),tooltip:Object(e.jsx)(n.a,{id:"tutor_consultation_tooltip"}),valuePropName:"value",required:!0,children:Object(e.jsx)(bt.a,{})})]}),Object(e.jsx)(C.a.Group,{children:Object(e.jsx)(C.a.Item,{name:"description",label:Object(e.jsx)(n.a,{id:"description"}),tooltip:Object(e.jsx)(n.a,{id:"description_tooltip"}),valuePropName:"value",required:!0,children:Object(e.jsx)(nt.a,{directory:"consultation/".concat(s,"/wysiwyg")})})}),Object(e.jsx)(C.a.Group,{children:Object(e.jsx)(C.a.Item,{valuePropName:"value",name:"proposed_terms",tooltip:Object(e.jsx)(n.a,{id:"proposed_terms_tooltip"}),label:Object(e.jsx)(n.a,{id:"consultations.proposed_terms"}),children:Object(e.jsx)(Et,{})})})]}))]},Y.ATTRIBUTES),!S&&Object(e.jsx)(J.a.TabPane,{tab:Object(e.jsx)(n.a,{id:"product"}),disabled:r.disableEdit,children:s&&Object(e.jsx)(St.a,{type:"line",productable:{class_type:"App\\Models\\Consultation",class_id:s,name:String(l.name),quantity:1}})},Y.PRODUCT),!S&&Object(e.jsx)(J.a.TabPane,{tab:Object(e.jsx)(n.a,{id:"media"}),disabled:r.disableEdit,children:Object(e.jsx)(C.a,Object(a.a)(Object(a.a)({},O),{},{children:Object(e.jsx)(dt.a,{folder:"consultation/".concat(s),title:"image",action:"/api/admin/consultations/".concat(s),src_name:"image_url",form_name:"image",getUploadedSrcField:function(m){return m.file.response.data.image_url},setPath:function(m){return L(function(K){return Object(a.a)(Object(a.a)({},K),m)})}})}))},Y.MEDIA),!S&&Object(e.jsx)(J.a.TabPane,{tab:Object(e.jsx)(n.a,{id:"categories"}),disabled:r.disableEdit,children:Object(e.jsx)(A.a,{children:Object(e.jsx)(j.a,{span:12,children:Object(e.jsx)(C.a,Object(a.a)(Object(a.a)({},O),{},{children:Object(e.jsx)(C.a.Item,{label:Object(e.jsx)(n.a,{id:"categories"}),name:"categories",valuePropName:"value",children:Object(e.jsx)(vt.a,{})})}))})})},Y.CATEGORIES)," ",!S&&Object(e.jsx)(J.a.TabPane,{tab:Object(e.jsx)(n.a,{id:"branding"}),disabled:r.disableEdit,children:Object(e.jsx)(C.a,Object(a.a)(Object(a.a)({},O),{},{children:Object(e.jsx)(dt.a,{folder:"consultation/".concat(s),title:i.formatMessage({id:"logotype"}),action:"/api/admin/consultations/".concat(s),src_name:"logotype_url",form_name:"logotype",getUploadedSrcField:function(m){return m.file.response.data.logotype_url},setPath:function(m){return L(function(K){return Object(a.a)(Object(a.a)({},K),m)})}})}))},Y.BRANDING)," ",!S&&Object(e.jsx)(J.a.TabPane,{tab:Object(e.jsx)(n.a,{id:"user_submission"}),disabled:r.disableEdit,children:Object(e.jsx)(A.a,{children:Object(e.jsx)(j.a,{span:12,children:s&&Object(e.jsx)(At.a,{id:Number(s),type:"App\\Models\\Consultation"})})})},Y.USER_SUBMISSION),!S&&Object(e.jsx)(J.a.TabPane,{tab:Object(e.jsx)(n.a,{id:"consultations.calendar"}),children:Object(e.jsx)(It,{consultation:Number(s)})},Y.CALENDAR)]}),Object(e.jsx)(Ut.a,{open:!!r.showConfirmModal,onOk:function(){P(Object(a.a)(Object(a.a)({},r),{},{loading:!0})),f.submit()},onCancel:function(){P(Object(a.a)(Object(a.a)({},r),{},{showConfirmModal:!1}))},loading:!!r.loading})]}):Object(e.jsx)(E.a,{})},Jt=y.default=Bt}}]);
