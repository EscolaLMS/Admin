(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{"2ult":function($,f,e){"use strict";var h=e("OaEy"),E=e("2fM7"),a=e("T2oS"),b=e("W9HT"),j=e("oBTY"),g=e("tJVT"),r=e("q1tI"),K=e.n(r),y=e("ri8c"),Y=e("9kvl"),P=e("nKUr"),V=e.n(P),m=function(D){var U=D.value,N=D.onChange,x=D.multiple,B=x===void 0?!1:x,i=Object(r.useState)([]),c=Object(g.a)(i,2),d=c[0],L=c[1],n=Object(r.useState)(!1),p=Object(g.a)(n,2),I=p[0],q=p[1],de=Object(r.useRef)(),Q=Object(r.useRef)(),X=Object(r.useCallback)(function(M){L(function(F){return[].concat(Object(j.a)(F),Object(j.a)(M)).filter(function(v,G,ee){return ee.findIndex(function(ne){return ne.id===v.id})===G})})},[]);Object(r.useEffect)(function(){de.current=d},[d]);var l=Object(r.useCallback)(function(M){q(!0),Q.current&&Q.current.abort(),Q.current=new AbortController,Object(y.g)({search:M},{signal:Q.current.signal}).then(function(F){F.success&&X(F.data),q(!1)}).catch(function(){return q(!1)})},[X]),Ee=Object(r.useCallback)(function(M){l(M)},[l]);return Object(r.useEffect)(function(){var M=new AbortController;if(U){var F=Array.isArray(U)?U:[U];F.filter(function(v){var G;return!((G=de.current)!==null&&G!==void 0&&G.find(function(ee){return ee.id===v}))}).forEach(function(v){Object(y.f)(Number(v),{signal:M.signal}).then(function(G){G&&G.success&&X([G.data])})})}return function(){M.abort()}},[U,X]),Object(P.jsx)(E.a,{onFocus:function(){return l()},allowClear:!0,style:{width:"100%"},value:U,onChange:N,mode:B?"multiple":void 0,showSearch:!0,onSearch:Ee,placeholder:Object(P.jsx)(Y.a,{id:"select_user_group",defaultMessage:"Select user group"}),optionFilterProp:"children",filterOption:function(F,v){return(v==null?void 0:v.children.toLowerCase().indexOf(F.toLowerCase()))>=0},notFoundContent:I?Object(P.jsx)(b.a,{size:"small"}):null,children:d.map(function(M){return Object(P.jsx)(E.a.Option,{value:M.id,children:M.name_with_breadcrumbs},M.id)})})};f.a=m},"F/zT":function($,f,e){"use strict";var h=e("wx14"),E=e("VTBJ"),a=e("Ff2n"),b=e("q1tI"),j=e.n(b),g=e("adzw"),r=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],K=j.a.forwardRef(function(y,Y){var P=y.fieldProps,V=y.unCheckedChildren,m=y.checkedChildren,S=y.proFieldProps,D=Object(a.a)(y,r);return j.a.createElement(g.a,Object(h.a)({valueType:"switch",mode:"edit",fieldProps:Object(E.a)({unCheckedChildren:V,checkedChildren:m},P),ref:Y,valuePropName:"checked",proFieldProps:S,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},D))});f.a=K},Qurx:function($,f,e){"use strict";var h=e("wx14"),E=e("Ff2n"),a=e("q1tI"),b=e.n(a),j=e("adzw"),g=["fieldProps","proFieldProps"],r=["fieldProps","proFieldProps"],K="text",y=function(m){var S=m.fieldProps,D=m.proFieldProps,U=Object(E.a)(m,g);return b.a.createElement(j.a,Object(h.a)({mode:"edit",valueType:K,fieldProps:S,filedConfig:{valueType:K},proFieldProps:D},U))},Y=function(m){var S=m.fieldProps,D=m.proFieldProps,U=Object(E.a)(m,r);return b.a.createElement(j.a,Object(h.a)({mode:"edit",valueType:"password",fieldProps:S,proFieldProps:D,filedConfig:{valueType:K}},U))},P=y;P.Password=Y,P.displayName="ProFormComponent",f.a=P},S76h:function($,f,e){},TLLU:function($,f,e){"use strict";var h=e("5OYt");function E(){return Object(h.a)()}f.a={useBreakpoint:E}},UNho:function($,f,e){"use strict";e.r(f);var h=e("Mwp2"),E=e("VXEj"),a=e("+L6B"),b=e("2/Rp"),j=e("/zsF"),g=e("PArb"),r=e("tU7J"),K=e("wFql"),y=e("T2oS"),Y=e("W9HT"),P=e("miYZ"),V=e("tsqr"),m=e("k1fw"),S=e("9og8"),D=e("tJVT"),U=e("WmNS"),N=e.n(U),x=e("q1tI"),B=e.n(x),i=e("VMEa"),c=e("Qurx"),d=e("F/zT"),L=e("nhC9"),n=e("ri8c"),p=e("tMyG"),I=e("9kvl"),q=e("Ty5D"),de=e("/MfK"),Q=e("0WSk"),X=e("2ult"),l=e("nKUr"),Ee=e.n(l);f.default=function(){var M=Object(I.i)(),F=Object(q.h)(),v=F.group,G=v==="new",ee=Object(x.useState)(),ne=Object(D.a)(ee,2),Z=ne[0],re=ne[1],be=Object(x.useCallback)(Object(S.a)(N.a.mark(function R(){var O;return N.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(n.f)(Number(v));case 2:O=s.sent,O.success&&re(Object(m.a)({},O.data));case 4:case"end":return s.stop()}},R)})),[v]),Ce=Object(x.useCallback)(function(R){re(function(O){var t;return Object(m.a)(Object(m.a)({},O),{},{users:O?O==null||(t=O.users)===null||t===void 0?void 0:t.filter(function(s){return s.id!==R}):[]})}),Object(n.d)(Number(v),R).then(function(O){O.success&&re(function(t){return Object(m.a)(Object(m.a)({},t),{},{users:O.data})})})},[v]),ge=Object(x.useCallback)(function(R){var O;!R||Z!=null&&(O=Z.users)!==null&&O!==void 0&&O.find(function(t){return t.id===R})||Object(n.a)(Number(v),R).then(function(t){t.success&&re(function(s){return Object(m.a)(Object(m.a)({},s),{},{users:t.data})})})},[Z,v]);Object(x.useEffect)(function(){if(v==="new"){re({});return}be()},[v,be]);var ae=Object(x.useMemo)(function(){return{onFinish:function(){var R=Object(S.a)(N.a.mark(function t(s){var o,u;return N.a.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(u=Object(m.a)({},s),v!=="new"){T.next=8;break}return T.next=4,Object(n.b)(u);case 4:o=T.sent,o.success&&I.d.push("/user_groups/".concat(o.data.id)),T.next=11;break;case 8:return T.next=10,Object(n.e)(Number(v),u);case 10:o=T.sent;case 11:V.default.success(o.message);case 12:case"end":return T.stop()}},t)}));function O(t){return R.apply(this,arguments)}return O}(),initialValues:Z}},[Z,v]);return Z?Object(l.jsx)(p.a,{title:G?Object(l.jsx)(I.a,{id:"new_user_group"}):Object(l.jsx)(I.a,{id:"edit_user_group"}),children:Object(l.jsx)(L.a,{children:Object(l.jsxs)(i.a,Object(m.a)(Object(m.a)({},ae),{},{children:[Object(l.jsxs)(i.a.Group,{children:[Object(l.jsx)(c.a,{width:"md",name:"name",label:Object(l.jsx)(I.a,{id:"name"}),tooltip:Object(l.jsx)(I.a,{id:"name"}),placeholder:M.formatMessage({id:"name"}),required:!0}),Object(l.jsx)(i.a.Item,{style:{minWidth:"300px"},name:"parent_id",label:Object(l.jsx)(I.a,{id:"parent_id_group",defaultMessage:"parent_id_group"}),valuePropName:"value",children:Object(l.jsx)(X.a,{})}),Object(l.jsx)(d.a,{name:"registerable",label:Object(l.jsx)(I.a,{id:"registerable"})})]}),v!=="new"&&Object(l.jsxs)(B.a.Fragment,{children:[Object(l.jsxs)(i.a.Group,{children:[Object(l.jsx)(K.a,{children:Object(l.jsx)(I.a,{id:"add_person_to_group",defaultMessage:"Add User to group"})}),Object(l.jsx)(Q.a,{onChange:function(O){return ge(Number(O))}})]}),Object(l.jsx)(g.a,{}),Object(l.jsx)(E.b,{size:"small",itemLayout:"horizontal",dataSource:Z.users,renderItem:function(O){return Object(l.jsxs)(E.b.Item,{actions:[Object(l.jsxs)(b.a,{onClick:function(){return Ce(O.id)},type:"primary",icon:Object(l.jsx)(de.a,{}),size:"small",danger:!0,children:[" ",Object(l.jsx)(I.a,{id:"delete"})]})],children:[O.first_name," ",O.last_name," ",Object(l.jsx)("small",{children:O.email})]})}})]}),Object(l.jsx)(g.a,{})]}))})}):Object(l.jsx)(Y.a,{})}},VzZb:function($,f,e){},"aK+R":function($,f,e){},df8c:function($,f,e){},nhC9:function($,f,e){"use strict";var h=e("wx14"),E=e("q1tI"),a=e.n(E),b=e("Znn+"),j=e("ZTPi"),g=e("VTBJ"),r=e("rePB"),K=e("U8pU"),y=e("ODXe"),Y=e("GNNt"),P=e("wEI+"),V=e("Ff2n"),m=e("1GLa"),S=e("TLLU"),D=e("UESt"),U=e("6cGi"),N=e("YSkC"),x=e("TSYQ"),B=e.n(x),i=e("BGR+"),c=e("14J3"),d=e("BMrR"),L=e("jCWc"),n=e("kPKH"),p=e("aK+R"),I=function(s){var o=s.style,u=s.prefix;return a.a.createElement("div",{className:"".concat(u,"-loading-content"),style:o},a.a.createElement(d.a,{gutter:8},a.a.createElement(n.a,{span:22},a.a.createElement("div",{className:"".concat(u,"-loading-block")}))),a.a.createElement(d.a,{gutter:8},a.a.createElement(n.a,{span:8},a.a.createElement("div",{className:"".concat(u,"-loading-block")})),a.a.createElement(n.a,{span:15},a.a.createElement("div",{className:"".concat(u,"-loading-block")}))),a.a.createElement(d.a,{gutter:8},a.a.createElement(n.a,{span:6},a.a.createElement("div",{className:"".concat(u,"-loading-block")})),a.a.createElement(n.a,{span:18},a.a.createElement("div",{className:"".concat(u,"-loading-block")}))),a.a.createElement(d.a,{gutter:8},a.a.createElement(n.a,{span:13},a.a.createElement("div",{className:"".concat(u,"-loading-block")})),a.a.createElement(n.a,{span:9},a.a.createElement("div",{className:"".concat(u,"-loading-block")}))),a.a.createElement(d.a,{gutter:8},a.a.createElement(n.a,{span:4},a.a.createElement("div",{className:"".concat(u,"-loading-block")})),a.a.createElement(n.a,{span:3},a.a.createElement("div",{className:"".concat(u,"-loading-block")})),a.a.createElement(n.a,{span:16},a.a.createElement("div",{className:"".concat(u,"-loading-block")}))))},q=I,de=e("S76h"),Q=function(s){var o=s.actions,u=s.prefixCls;return Array.isArray(o)&&(o==null?void 0:o.length)?a.a.createElement("ul",{className:"".concat(u,"-actions")},o.map(function(z,T){return a.a.createElement("li",{style:{width:"".concat(100/o.length,"%")},key:"action-".concat(T)},a.a.createElement("span",null,z))})):o?a.a.createElement("ul",{className:"".concat(u,"-actions")},o):null},X=Q,l=e("df8c"),Ee=["className","style","bodyStyle","headStyle","title","subTitle","extra","tip","wrap","layout","loading","gutter","tooltip","split","headerBordered","bordered","children","size","actions","ghost","hoverable","direction","collapsed","collapsible","defaultCollapsed","onCollapse","checked","onChecked","tabs","type"],M=S.a.useBreakpoint,F=a.a.forwardRef(function(t,s){var o,u,z,T=t.className,se=t.style,le=t.bodyStyle,w=le===void 0?{}:le,oe=t.headStyle,ye=oe===void 0?{}:oe,he=t.title,Me=t.subTitle,ue=t.extra,De=t.tip,je=t.wrap,He=je===void 0?!1:je,Qe=t.layout,_e=t.loading,Ie=t.gutter,Xe=Ie===void 0?0:Ie,we=t.tooltip,me=t.split,Re=t.headerBordered,ke=Re===void 0?!1:Re,We=t.bordered,qe=We===void 0?!1:We,Ke=t.children,Se=t.size,ea=t.actions,Ne=t.ghost,aa=Ne===void 0?!1:Ne,Fe=t.hoverable,ta=Fe===void 0?!1:Fe,na=t.direction,Ge=t.collapsed,ze=t.collapsible,ra=ze===void 0?!1:ze,$e=t.defaultCollapsed,sa=$e===void 0?!1:$e,la=t.onCollapse,oa=t.checked,Te=t.onChecked,Ae=t.tabs,Ue=t.type,ve=Object(V.a)(t,Ee),ca=Object(E.useContext)(P.default.ConfigContext),ia=ca.getPrefixCls,Ve=M(),da=Object(U.a)(sa,{value:Ge,onChange:la}),Je=Object(y.a)(da,2),xe=Je[0],ua=Je[1],Pe=["xxl","xl","lg","md","sm","xs"],_a=function(A){var C=[0,0],J=Array.isArray(A)?A:[A,0];return J.forEach(function(H,te){if(Object(K.a)(H)==="object")for(var k=0;k<Pe.length;k+=1){var fe=Pe[k];if(Ve[fe]&&H[fe]!==void 0){C[te]=H[fe];break}}else C[te]=H||0}),C},Oe=function(A,C){return A?C:{}},ma=function(A){var C=A;if(Object(K.a)(A)==="object")for(var J=0;J<Pe.length;J+=1){var H=Pe[J];if(Ve[H]&&A[H]!==void 0){C=A[H];break}}var te=Oe(typeof C=="string"&&/\d%|\dpx/i.test(C),{width:C,flexShrink:0});return{span:C,colSpanStyle:te}},_=ia("pro-card"),va=_a(Xe),Ye=Object(y.a)(va,2),ce=Ye[0],ie=Ye[1],Be=!1,Le=a.a.Children.toArray(Ke),Oa=Le.map(function(W,A){var C;if(W==null||(C=W.type)===null||C===void 0?void 0:C.isProCard){var J;Be=!0;var H=W.props.colSpan,te=ma(H),k=te.span,fe=te.colSpanStyle,ha=B()(["".concat(_,"-col")],(J={},Object(r.a)(J,"".concat(_,"-split-vertical"),me==="vertical"&&A!==Le.length-1),Object(r.a)(J,"".concat(_,"-split-horizontal"),me==="horizontal"&&A!==Le.length-1),Object(r.a)(J,"".concat(_,"-col-").concat(k),typeof k=="number"&&k>=0&&k<=24),J));return a.a.createElement("div",{style:Object(g.a)(Object(g.a)(Object(g.a)({},fe),Oe(ce>0,{paddingRight:ce/2,paddingLeft:ce/2})),Oe(ie>0,{paddingTop:ie/2,paddingBottom:ie/2})),key:"pro-card-col-".concat((W==null?void 0:W.key)||A),className:ha},a.a.cloneElement(W))}return W}),fa=B()("".concat(_),T,(o={},Object(r.a)(o,"".concat(_,"-border"),qe),Object(r.a)(o,"".concat(_,"-contain-card"),Be),Object(r.a)(o,"".concat(_,"-loading"),_e),Object(r.a)(o,"".concat(_,"-split"),me==="vertical"||me==="horizontal"),Object(r.a)(o,"".concat(_,"-ghost"),aa),Object(r.a)(o,"".concat(_,"-hoverable"),ta),Object(r.a)(o,"".concat(_,"-size-").concat(Se),Se),Object(r.a)(o,"".concat(_,"-type-").concat(Ue),Ue),Object(r.a)(o,"".concat(_,"-collapse"),xe),Object(r.a)(o,"".concat(_,"-checked"),oa),o)),Ea=B()("".concat(_,"-body"),(u={},Object(r.a)(u,"".concat(_,"-body-center"),Qe==="center"),Object(r.a)(u,"".concat(_,"-body-direction-column"),me==="horizontal"||na==="column"),Object(r.a)(u,"".concat(_,"-body-wrap"),He&&Be),u)),ba=Object(g.a)(Object(g.a)(Object(g.a)({},Oe(ce>0,{marginRight:-ce/2,marginLeft:-ce/2})),Oe(ie>0,{marginTop:-ie/2,marginBottom:-ie/2})),w),Ze=a.a.isValidElement(_e)?_e:a.a.createElement(q,{prefix:_,style:w.padding===0||w.padding==="0px"?{padding:24}:void 0}),pe=ra&&Ge===void 0&&a.a.createElement(D.a,{rotate:xe?void 0:90,className:"".concat(_,"-collapsible-icon")});return a.a.createElement("div",Object(h.a)({className:fa,style:se,ref:s,onClick:function(A){var C;Te==null||Te(A),ve==null||(C=ve.onClick)===null||C===void 0||C.call(ve,A)}},Object(i.a)(ve,["prefixCls","colSpan"])),(he||ue||pe)&&a.a.createElement("div",{className:B()("".concat(_,"-header"),(z={},Object(r.a)(z,"".concat(_,"-header-border"),ke||Ue==="inner"),Object(r.a)(z,"".concat(_,"-header-collapsible"),pe),z)),style:ye,onClick:function(){pe&&ua(!xe)}},a.a.createElement("div",{className:"".concat(_,"-title")},pe,a.a.createElement(N.a,{label:he,tooltip:we||De,subTitle:Me})),ue&&a.a.createElement("div",{className:"".concat(_,"-extra")},ue)),Ae?a.a.createElement("div",{className:"".concat(_,"-tabs")},a.a.createElement(j.a,Object(h.a)({onChange:Ae.onChange},Ae),_e?Ze:Ke)):a.a.createElement("div",{className:Ea,style:ba},_e?Ze:Oa),a.a.createElement(X,{actions:ea,prefixCls:_}))}),v=F,G=e("VzZb"),ee=["key","tab","tabKey","disabled","destroyInactiveTabPane","children","className","style","cardProps"],ne=function(s){var o=s.key,u=s.tab,z=s.tabKey,T=s.disabled,se=s.destroyInactiveTabPane,le=s.children,w=s.className,oe=s.style,ye=s.cardProps,he=Object(V.a)(s,ee),Me=Object(E.useContext)(P.default.ConfigContext),ue=Me.getPrefixCls,De=ue("pro-card-tabpane"),je=B()(De,w);return a.a.createElement(j.a.TabPane,Object(h.a)({key:o,tabKey:z,tab:u,className:je,style:oe,disabled:T,destroyInactiveTabPane:se},he),a.a.createElement(v,ye,le))},Z=ne,re=e("u1OI"),be=function(s){var o=Object(E.useContext)(P.default.ConfigContext),u=o.getPrefixCls,z=u("pro-card-divider"),T=s.className,se=s.style,le=se===void 0?{}:se,w=s.type,oe=B()(z,T,Object(r.a)({},"".concat(z,"-").concat(w),w));return a.a.createElement("div",{className:oe,style:le})},Ce=be,ge=function(s){return a.a.createElement(v,Object(h.a)({bodyStyle:{padding:0}},s))},ae=v;ae.isProCard=!0,ae.Divider=Ce,ae.TabPane=Z,ae.Group=ge;var R=ae,O=f.a=R},ri8c:function($,f,e){"use strict";e.d(f,"g",function(){return g}),e.d(f,"f",function(){return K}),e.d(f,"e",function(){return Y}),e.d(f,"b",function(){return V}),e.d(f,"c",function(){return S}),e.d(f,"a",function(){return U}),e.d(f,"d",function(){return x});var h=e("k1fw"),E=e("9og8"),a=e("WmNS"),b=e.n(a),j=e("9kvl");function g(i,c){return r.apply(this,arguments)}function r(){return r=Object(E.a)(b.a.mark(function i(c,d){return b.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(j.f)("/api/admin/user-groups",Object(h.a)({params:Object(h.a)(Object(h.a)({},c),{},{per_page:c.pageSize,page:c.current,search:c.search?c.search:void 0,parent_id:c.parent_id}),method:"GET",useCache:!1},d||{})));case 1:case"end":return n.stop()}},i)})),r.apply(this,arguments)}function K(i,c){return y.apply(this,arguments)}function y(){return y=Object(E.a)(b.a.mark(function i(c,d){return b.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(j.f)("/api/admin/user-groups/".concat(c),Object(h.a)({method:"GET",useCache:!1},d||{})));case 1:case"end":return n.stop()}},i)})),y.apply(this,arguments)}function Y(i,c,d){return P.apply(this,arguments)}function P(){return P=Object(E.a)(b.a.mark(function i(c,d,L){return b.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",Object(j.f)("/api/admin/user-groups/".concat(c),Object(h.a)({data:d,method:"PUT"},L||{})));case 1:case"end":return p.stop()}},i)})),P.apply(this,arguments)}function V(i,c){return m.apply(this,arguments)}function m(){return m=Object(E.a)(b.a.mark(function i(c,d){return b.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(j.f)("/api/admin/user-groups",Object(h.a)({data:c,method:"POST"},d||{})));case 1:case"end":return n.stop()}},i)})),m.apply(this,arguments)}function S(i,c){return D.apply(this,arguments)}function D(){return D=Object(E.a)(b.a.mark(function i(c,d){return b.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(j.f)("/api/admin/user-groups/".concat(c),Object(h.a)({method:"DELETE"},d||{})));case 1:case"end":return n.stop()}},i)})),D.apply(this,arguments)}function U(i,c,d){return N.apply(this,arguments)}function N(){return N=Object(E.a)(b.a.mark(function i(c,d,L){return b.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",Object(j.f)("/api/admin/user-groups/".concat(c,"/members"),Object(h.a)({data:{user_id:d},method:"POST"},L||{})));case 1:case"end":return p.stop()}},i)})),N.apply(this,arguments)}function x(i,c,d){return B.apply(this,arguments)}function B(){return B=Object(E.a)(b.a.mark(function i(c,d,L){return b.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",Object(j.f)("/api/admin/user-groups/".concat(c,"/members/").concat(d),Object(h.a)({method:"DELETE"},L||{})));case 1:case"end":return p.stop()}},i)})),B.apply(this,arguments)}},u1OI:function($,f,e){}}]);
