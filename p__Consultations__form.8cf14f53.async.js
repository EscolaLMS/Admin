(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"4f6N":function(G,u,e){"use strict";var j=e("2qtc"),c=e("kLXV"),P=e("9kvl"),l=e("nKUr"),f=e.n(l),N=function(D){var h=D.visible,R=D.setManage;return Object(l.jsx)(c.a,{width:"600px",title:Object(l.jsx)(P.a,{id:"course.validate_edit.header",defaultMessage:"course.validate_edit.header"}),visible:h,onOk:function(){return R({showModal:!1,disableEdit:!1,clicked:!0})},onCancel:function(){return R({showModal:!1,disableEdit:!0,clicked:!1})},okText:"OK",cancelText:"Cancel",children:Object(l.jsx)("p",{children:Object(l.jsx)(P.a,{id:"course.validate_edit.content",defaultMessage:"course.validate_edit.content"})})})};u.a=N},GZq3:function(G,u,e){},Gb5Y:function(G,u,e){"use strict";e.d(u,"a",function(){return N}),e.d(u,"b",function(){return D}),e.d(u,"d",function(){return R}),e.d(u,"f",function(){return v}),e.d(u,"c",function(){return Z}),e.d(u,"e",function(){return X});var j=e("k1fw"),c=e("9og8"),P=e("WmNS"),l=e.n(P),f=e("9kvl");function N(s,a){return y.apply(this,arguments)}function y(){return y=Object(c.a)(l.a.mark(function s(a,p){return l.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(f.f)("/api/admin/consultations",Object(j.a)({method:"GET",useCache:!1,params:Object(j.a)(Object(j.a)({},a),{},{per_page:a&&a.pageSize,page:a&&a.current})},p||{})));case 1:case"end":return o.stop()}},s)})),y.apply(this,arguments)}function D(s,a){return h.apply(this,arguments)}function h(){return h=Object(c.a)(l.a.mark(function s(a,p){return l.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(f.f)("/api/admin/consultations",Object(j.a)({method:"POST",headers:{"Content-Type":"application/json"},data:a},p||{})));case 1:case"end":return o.stop()}},s)})),h.apply(this,arguments)}function R(s,a){return W.apply(this,arguments)}function W(){return W=Object(c.a)(l.a.mark(function s(a,p){return l.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(f.f)("/api/admin/consultations/".concat(a),Object(j.a)({method:"GET",useCache:!1},p||{})));case 1:case"end":return o.stop()}},s)})),W.apply(this,arguments)}function v(s,a,p){return d.apply(this,arguments)}function d(){return d=Object(c.a)(l.a.mark(function s(a,p,$){return l.a.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",Object(f.f)("/api/admin/consultations/".concat(a),Object(j.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:p},$||{})));case 1:case"end":return x.stop()}},s)})),d.apply(this,arguments)}function Z(s,a){return S.apply(this,arguments)}function S(){return S=Object(c.a)(l.a.mark(function s(a,p){return l.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(f.f)("/api/admin/consultations/".concat(a),Object(j.a)({method:"DELETE",useCache:!1},p||{})));case 1:case"end":return o.stop()}},s)})),S.apply(this,arguments)}function X(s,a){return F.apply(this,arguments)}function F(){return F=Object(c.a)(l.a.mark(function s(a,p){return l.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(f.f)("/api/admin/consultations/".concat(a,"/schedule"),Object(j.a)({method:"GET",useCache:!1},p||{})));case 1:case"end":return o.stop()}},s)})),F.apply(this,arguments)}},"J+hL":function(G,u,e){},VlvL:function(G,u,e){"use strict";var j=e("9kvl"),c=e("Ty5D"),P=e("nKUr"),l=e.n(P),f=function(y){var D=y.show,h=Object(j.i)();return Object(P.jsx)(c.a,{when:D,message:h.formatMessage({id:"unsaved_changes"})})};u.a=f},eFHa:function(G,u,e){"use strict";e.d(u,"a",function(){return f});var j=e("tJVT"),c=e("q1tI"),P=e.n(c),l=e("HZtn");function f(){var N=Object(c.useState)({showModal:!1,disableEdit:!1,clicked:!1}),y=Object(j.a)(N,2),D=y[0],h=y[1],R=function(v){(v==null?void 0:v.status)==="published"&&v!==null&&v!==void 0&&v.active_from&&Object(l.a)(new Date(v==null?void 0:v.active_from))&&!D.clicked?h({showModal:!1,disableEdit:!0,clicked:!1}):h({showModal:!1,disableEdit:!1,clicked:!1})};return{manageCourseEdit:D,setManageCourseEdit:h,validateCourseEdit:R}}},q34N:function(G,u,e){"use strict";var j=e("tJVT"),c=e("0eZe"),P=e("q1tI"),l=e.n(P),f=e("nKUr"),N=e.n(f),y=function(h){var R=h.productable,W=h.type,v=W===void 0?"card":W,d=Object(P.useState)("attributes"),Z=Object(j.a)(d,2),S=Z[0],X=Z[1];return Object(f.jsx)(c.a,{productable:R,tab:S,onTabChange:function(s){return X(s)},type:v})};u.a=y},rh3J:function(G,u,e){"use strict";e.r(u);var j=e("14J3"),c=e("BMrR"),P=e("jCWc"),l=e("kPKH"),f=e("fOrg"),N=e("+KLJ"),y=e("+L6B"),D=e("2/Rp"),h=e("T2oS"),R=e("W9HT"),W=e("miYZ"),v=e("tsqr"),d=e("k1fw"),Z=e("9og8"),S=e("tJVT"),X=e("WmNS"),F=e.n(X),s=e("q1tI"),a=e("VMEa"),p=e("Qurx"),$=e("yj/a"),o=e("lR9U"),x=e("nhC9"),ce=e("hd5d"),ue=e("tMyG"),n=e("9kvl"),je=e("Ty5D"),me=e("0WSk"),be=e("TWax"),k=e("Gb5Y"),Be=e("OaEy"),Oe=e("2fM7"),Ie=e("iQDF"),ve=e("+eQT"),Ke=e("+BJd"),fe=e("mr32"),he=e("oBTY"),pe=e("wd/R"),se=e.n(pe),Le=e("GZq3"),t=e("nKUr"),re=function(b){return b.local().valueOf()},ge=function(b){var J=b.value,r=J===void 0?[]:J,B=b.onChange,T=b.format,C=T===void 0?"DD-MM-YYYY HH:mm":T,z=b.selectProps,H=z===void 0?{}:z,I=Object(s.useState)(!1),M=Object(S.a)(I,2),ae=M[0],w=M[1],O=Object(s.useCallback)(function(i){var E=re(i),g=r.indexOf(E),A=Object(he.a)(r);g>-1?A.splice(g,1):A.push(E),B(A)},[r]),Q=Object(s.useCallback)(function(i){var E=r.indexOf(re(i))>-1;return Object(t.jsx)("div",{className:"ant-picker-cell-inner",style:E?{position:"relative",zIndex:2,display:"inlineBlock",width:"24px",height:"22px",lineHeight:"22px",backgroundColor:"#1890ff",color:"#fff",margin:"auto",borderRadius:"2px",transition:"background 0.3s, border 0.3s"}:{},children:i.date()})},[r]),_=Object(s.useCallback)(function(i){var E=i.value,g=i.onClose,A=function(){g(),B(r.filter(function(ne){return ne!==E}))};return Object(t.jsx)(fe.a,{onClose:A,closable:!0,children:se()(E).format(C)})},[r]);return Object(t.jsx)(Oe.a,Object(d.a)(Object(d.a)({},H),{},{allowClear:!0,mode:"multiple",value:r,onClear:function(){return B&&B([])},tagRender:_,open:ae,onFocus:function(){return w(!0)},onBlur:function(){return w(!1)},dropdownMatchSelectWidth:!1,dropdownClassName:"multipleDropdownClassName",dropdownStyle:{height:"310px",width:"390px",minWidth:"0"},dropdownRender:function(){return Object(t.jsx)(ve.a,{disabledDate:function(g){var A=new Date;return g&&g.valueOf()<=A.setDate(A.getDate()-1)},showTime:{format:"HH:mm"},onChange:function(g){return g&&O(g)},open:!0,dateRender:Q,style:{visibility:"hidden"},getPopupContainer:function(g){var A=g.parentNode;return A}})}}))},Ee=ge,ee=e("c+yx"),oe=e("Gn8c"),xe=e("VlvL"),ie=e("viv7"),Ce=e("eFHa"),Me=e("4f6N"),Ne=e("qbNl"),Pe=e("JBPa"),Fe=e("Awhp"),ye=e("KrTs"),De={reported:"warning",reject:"error",approved:"success"},Te=function(b){var J=b.consultation,r=Object(s.useState)([]),B=Object(S.a)(r,2),T=B[0],C=B[1];Object(s.useEffect)(function(){var H=function(){Object(k.e)(J).then(function(M){M.success&&C(M.data)}).catch(function(){v.default.error(Object(t.jsx)(n.a,{id:"error",defaultMessage:"error"}))})};H()},[J]);var z=Object(s.useCallback)(function(H){return Object(t.jsx)("ul",{className:"events",children:T.map(function(I){if(H.format("yyyy-MM-DD")===se()(I.date).format("yyyy-MM-DD")){var M;return Object(t.jsx)("li",{children:Object(t.jsx)(ye.a,{status:De[I.status],text:"".concat(I==null||(M=I.user)===null||M===void 0?void 0:M.email," ")})})}return null})})},[T]);return Object(t.jsx)(Pe.a,{dateCellRender:z})},Ae=Te,Ve=e("J+hL"),Se=e("q34N"),Ue=e("5RzD"),Re=function(){var b=Object(n.i)(),J=Object(je.h)(),r=J.consultation,B=J.tab,T=B===void 0?"attributes":B,C=r==="new",z=Object(s.useState)(!1),H=Object(S.a)(z,2),I=H[0],M=H[1],ae=Object(s.useState)(),w=Object(S.a)(ae,2),O=w[0],Q=w[1],_=Object(Ce.a)(),i=_.manageCourseEdit,E=_.setManageCourseEdit,g=_.validateCourseEdit,A=a.a.useForm(),le=Object(S.a)(A,1),ne=le[0],We=Object(s.useCallback)(Object(Z.a)(F.a.mark(function K(){var m,L;return F.a.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,Object(k.d)(Number(r));case 2:m=V.sent,m.success&&(T==="attributes"&&g(m.data),Q(Object(d.a)(Object(d.a)({},m.data),{},{author_id:m.data.author&&m.data.author.id,categories:(L=m.data.categories)===null||L===void 0?void 0:L.map(ee.a)})));case 4:case"end":return V.stop()}},K)})),[r]);Object(s.useEffect)(function(){if(C){Q({name:"new"});return}We()},[r]);var q=Object(s.useMemo)(function(){return{onFinish:function(){var K=Object(Z.a)(F.a.mark(function L(de){var V,Y;return F.a.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(!i.disableEdit){U.next=3;break}return E({showModal:!0,disableEdit:!0,clicked:!1}),U.abrupt("return");case 3:if(V=Object(d.a)(Object(d.a)({},de),{},{image_url:O&&O.image_url,image_path:O&&O.image_url&&Object(ee.e)(O.image_url),logotype_url:O&&O.logotype_url,logotype_path:O&&O.logotype_path&&Object(ee.e)(O.logotype_path)}),!C){U.next=11;break}return U.next=7,Object(k.b)(V);case 7:Y=U.sent,Y.success&&(M(!1),n.d.push("/consultations/".concat(Y.data.id))),U.next=15;break;case 11:return U.next=13,Object(k.f)(Number(r),V);case 13:Y=U.sent,Y.success&&(M(!1),g(Y.data),n.d.push("/consultations/".concat(Y.data.id,"/").concat(T)));case 15:v.default.success(Y.message);case 16:case"end":return U.stop()}},L)}));function m(L){return K.apply(this,arguments)}return m}(),initialValues:O}},[O,r,T,i]);return O?Object(t.jsx)(ue.a,{title:C?Object(t.jsx)(n.a,{id:"consultation"}):Object(t.jsx)(n.a,{id:"consultations.edit"}),header:{breadcrumb:{routes:[{path:"consultations",breadcrumbName:b.formatMessage({id:"menu.Consultations"})},{path:String(r),breadcrumbName:b.formatMessage({id:"form"})},{path:"/",breadcrumbName:b.formatMessage({id:String(O.name)})},{path:String(T),breadcrumbName:b.formatMessage({id:String(T)})}]}},children:Object(t.jsxs)(x.a,{tabs:{type:"card",activeKey:T,onChange:function(m){return n.d.push("/consultations/".concat(r,"/").concat(m))}},children:[Object(t.jsxs)(x.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"attributes"}),children:[i.disableEdit&&Object(t.jsx)(N.a,{closable:!0,style:{marginBottom:"20px"},type:"warning",message:Object(t.jsx)(n.a,{id:"course_edit_warning_message",defaultMessage:"course_edit_warning_message"}),action:Object(t.jsx)(D.a,{onClick:function(){return E({showModal:!0,disableEdit:!0,clicked:!0})},type:"primary",children:Object(t.jsx)(n.a,{id:"questionnaire.submit",defaultMessage:"questionnaire.submit"})})}),Object(t.jsx)(xe.a,{show:I})," ",Object(t.jsx)(Me.a,{visible:i.showModal,setManage:E}),Object(t.jsxs)(a.a,Object(d.a)(Object(d.a)({},q),{},{form:ne,onValuesChange:function(){M(!0)},children:[Object(t.jsxs)(a.a.Group,{children:[Object(t.jsx)(p.a,{width:"md",name:"name",label:Object(t.jsx)(n.a,{id:"name"}),tooltip:Object(t.jsx)(n.a,{id:"name"}),placeholder:b.formatMessage({id:"name",defaultMessage:"name"}),required:!0,disabled:i.disableEdit}),Object(t.jsx)(p.a,{width:"sm",name:"duration",label:Object(t.jsx)(n.a,{id:"duration"}),tooltip:Object(t.jsx)(n.a,{id:"duration"}),placeholder:b.formatMessage({id:"duration",defaultMessage:"duration"}),disabled:i.disableEdit}),Object(t.jsx)($.a,{name:"status",width:"xs",label:Object(t.jsx)(n.a,{id:"status"}),tooltip:Object(t.jsx)(n.a,{id:"status_consultation_tooltip"}),valueEnum:ie.a,initialValue:ie.a.draft,placeholder:b.formatMessage({id:"status"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"select"})}],disabled:i.disableEdit})]}),Object(t.jsxs)(a.a.Group,{children:[Object(t.jsx)(o.a,{width:"sm",name:"active_from",label:Object(t.jsx)(n.a,{id:"active_from"}),tooltip:Object(t.jsx)(n.a,{id:"active_from"}),placeholder:b.formatMessage({id:"active_from",defaultMessage:"active_from"}),disabled:i.disableEdit}),Object(t.jsx)(o.a,{width:"sm",name:"active_to",label:Object(t.jsx)(n.a,{id:"active_to"}),tooltip:Object(t.jsx)(n.a,{id:"active_to"}),placeholder:b.formatMessage({id:"active_to",defaultMessage:"active_to"}),disabled:i.disableEdit}),Object(t.jsx)(a.a.Item,{name:"author_id",label:Object(t.jsx)(n.a,{id:"tutor"}),tooltip:Object(t.jsx)(n.a,{id:"tutor_consultation_tooltip"}),valuePropName:"value",required:!0,children:Object(t.jsx)(me.a,{})})]}),Object(t.jsx)(a.a.Group,{children:Object(t.jsx)(a.a.Item,{name:"description",label:Object(t.jsx)(n.a,{id:"description"}),tooltip:Object(t.jsx)(n.a,{id:"description_tooltip"}),valuePropName:"value",required:!0,children:Object(t.jsx)(ce.a,{directory:"consultation/".concat(r,"/wysiwyg")})})}),Object(t.jsx)(a.a.Group,{children:Object(t.jsx)(a.a.Item,{valuePropName:"value",name:"proposed_terms",tooltip:Object(t.jsx)(n.a,{id:"proposed_terms_tooltip"}),label:Object(t.jsx)(n.a,{id:"consultations.proposed_terms"}),children:Object(t.jsx)(Ee,{})})})]}))]},"attributes"),!C&&Object(t.jsx)(x.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"product"}),disabled:i.disableEdit,children:r&&Object(t.jsx)(Se.a,{type:"line",productable:{class_type:"App\\Models\\Consultation",class_id:r,name:String(O.name)}})},"product"),!C&&Object(t.jsx)(x.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"media"}),disabled:i.disableEdit,children:Object(t.jsx)(a.a,Object(d.a)(Object(d.a)({},q),{},{children:Object(t.jsx)(oe.a,{folder:"consultations/".concat(r),title:"image",action:"/api/admin/consultations/".concat(r),src_name:"image_url",form_name:"image",getUploadedSrcField:function(m){return m.file.response.data.image_url},setPath:function(m){return Q(function(L){return Object(d.a)(Object(d.a)({},L),m)})}})}))},"media"),!C&&Object(t.jsx)(x.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"categories"}),disabled:i.disableEdit,children:Object(t.jsx)(c.a,{children:Object(t.jsx)(l.a,{span:12,children:Object(t.jsx)(a.a,Object(d.a)(Object(d.a)({},q),{},{children:Object(t.jsx)(a.a.Item,{label:Object(t.jsx)(n.a,{id:"categories"}),name:"categories",valuePropName:"value",children:Object(t.jsx)(be.a,{})})}))})})},"categories")," ",!C&&Object(t.jsx)(x.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"branding"}),disabled:i.disableEdit,children:Object(t.jsx)(a.a,Object(d.a)(Object(d.a)({},q),{},{children:Object(t.jsx)(oe.a,{folder:"consultation/".concat(r),title:"logotype",action:"/api/admin/consultations/".concat(r),src_name:"logotype_url",form_name:"logotype",getUploadedSrcField:function(m){return m.file.response.data.logotype_url},setPath:function(m){return Q(function(L){return Object(d.a)(Object(d.a)({},L),m)})}})}))},"branding")," ",!C&&Object(t.jsx)(x.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"user_submission"}),disabled:i.disableEdit,children:Object(t.jsx)(c.a,{children:Object(t.jsx)(l.a,{span:12,children:r&&Object(t.jsx)(Ue.a,{id:Number(r),type:"App\\Models\\Consultation"})})})},"user_submission"),!C&&Object(t.jsx)(x.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"consultations.calendar"}),children:Object(t.jsx)(Ae,{consultation:Number(r)})},"calendar")]})}):Object(t.jsx)(R.a,{})},Ge=u.default=Re},viv7:function(G,u,e){"use strict";e.d(u,"a",function(){return j});var j;(function(c){c.draft="draft",c.published="published",c.archived="archived",c.published_unactivated="published_unactivated"})(j||(j={}))}}]);
