(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"4f6N":function(N,c,e){"use strict";var u=e("2qtc"),d=e("kLXV"),E=e("9kvl"),o=e("nKUr"),v=e.n(o),B=function(x){var O=x.visible,U=x.setManage;return Object(o.jsx)(d.a,{width:"600px",title:Object(o.jsx)(E.a,{id:"course.validate_edit.header",defaultMessage:"course.validate_edit.header"}),visible:O,onOk:function(){return U({showModal:!1,disableEdit:!1,clicked:!0})},onCancel:function(){return U({showModal:!1,disableEdit:!0,clicked:!1})},okText:"OK",cancelText:"Cancel",children:Object(o.jsx)("p",{children:Object(o.jsx)(E.a,{id:"course.validate_edit.content",defaultMessage:"course.validate_edit.content"})})})};c.a=B},GZq3:function(N,c,e){},Gb5Y:function(N,c,e){"use strict";e.d(c,"a",function(){return B}),e.d(c,"b",function(){return x}),e.d(c,"d",function(){return U}),e.d(c,"f",function(){return b}),e.d(c,"c",function(){return Z}),e.d(c,"e",function(){return Q});var u=e("k1fw"),d=e("9og8"),E=e("WmNS"),o=e.n(E),v=e("9kvl");function B(s,a){return C.apply(this,arguments)}function C(){return C=Object(d.a)(o.a.mark(function s(a,f){return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(v.f)("/api/admin/consultations",Object(u.a)({method:"GET",useCache:!1,params:Object(u.a)(Object(u.a)({},a),{},{per_page:a&&a.pageSize,page:a&&a.current})},f||{})));case 1:case"end":return r.stop()}},s)})),C.apply(this,arguments)}function x(s,a){return O.apply(this,arguments)}function O(){return O=Object(d.a)(o.a.mark(function s(a,f){return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(v.f)("/api/admin/consultations",Object(u.a)({method:"POST",headers:{"Content-Type":"application/json"},data:a},f||{})));case 1:case"end":return r.stop()}},s)})),O.apply(this,arguments)}function U(s,a){return R.apply(this,arguments)}function R(){return R=Object(d.a)(o.a.mark(function s(a,f){return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(v.f)("/api/admin/consultations/".concat(a),Object(u.a)({method:"GET",useCache:!1},f||{})));case 1:case"end":return r.stop()}},s)})),R.apply(this,arguments)}function b(s,a,f){return m.apply(this,arguments)}function m(){return m=Object(d.a)(o.a.mark(function s(a,f,F){return o.a.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",Object(v.f)("/api/admin/consultations/".concat(a),Object(u.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:f},F||{})));case 1:case"end":return M.stop()}},s)})),m.apply(this,arguments)}function Z(s,a){return A.apply(this,arguments)}function A(){return A=Object(d.a)(o.a.mark(function s(a,f){return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(v.f)("/api/admin/consultations/".concat(a),Object(u.a)({method:"DELETE",useCache:!1},f||{})));case 1:case"end":return r.stop()}},s)})),A.apply(this,arguments)}function Q(s,a){return I.apply(this,arguments)}function I(){return I=Object(d.a)(o.a.mark(function s(a,f){return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(v.f)("/api/admin/consultations/".concat(a,"/schedule"),Object(u.a)({method:"GET",useCache:!1},f||{})));case 1:case"end":return r.stop()}},s)})),I.apply(this,arguments)}},"J+hL":function(N,c,e){},VlvL:function(N,c,e){"use strict";var u=e("9kvl"),d=e("Ty5D"),E=e("nKUr"),o=e.n(E),v=function(C){var x=C.show,O=Object(u.i)();return Object(E.jsx)(d.a,{when:x,message:O.formatMessage({id:"unsaved_changes"})})};c.a=v},eFHa:function(N,c,e){"use strict";e.d(c,"a",function(){return v});var u=e("tJVT"),d=e("q1tI"),E=e.n(d),o=e("HZtn");function v(){var B=Object(d.useState)({showModal:!1,disableEdit:!1,clicked:!1}),C=Object(u.a)(B,2),x=C[0],O=C[1],U=function(b){(b==null?void 0:b.status)==="published"&&b!==null&&b!==void 0&&b.active_from&&Object(o.a)(new Date(b==null?void 0:b.active_from))&&!x.clicked?O({showModal:!1,disableEdit:!0,clicked:!1}):O({showModal:!1,disableEdit:!1,clicked:!1})};return{manageCourseEdit:x,setManageCourseEdit:O,validateCourseEdit:U}}},q34N:function(N,c,e){"use strict";var u=e("tJVT"),d=e("0eZe"),E=e("q1tI"),o=e.n(E),v=e("nKUr"),B=e.n(v),C=function(O){var U=O.productable,R=O.type,b=R===void 0?"card":R,m=Object(E.useState)("attributes"),Z=Object(u.a)(m,2),A=Z[0],Q=Z[1];return Object(v.jsx)(d.a,{productable:U,tab:A,onTabChange:function(s){return Q(s)},type:b})};c.a=C},rh3J:function(N,c,e){"use strict";e.r(c);var u=e("14J3"),d=e("BMrR"),E=e("jCWc"),o=e("kPKH"),v=e("fOrg"),B=e("+KLJ"),C=e("+L6B"),x=e("2/Rp"),O=e("T2oS"),U=e("W9HT"),R=e("miYZ"),b=e("tsqr"),m=e("k1fw"),Z=e("9og8"),A=e("tJVT"),Q=e("WmNS"),I=e.n(Q),s=e("q1tI"),a=e("VMEa"),f=e("Qurx"),F=e("yj/a"),r=e("lR9U"),M=e("nhC9"),de=e("hd5d"),ce=e("tMyG"),n=e("9kvl"),ue=e("Ty5D"),me=e("0WSk"),je=e("TWax"),k=e("Gb5Y"),Be=e("OaEy"),be=e("2fM7"),Ie=e("iQDF"),ve=e("+eQT"),Ke=e("+BJd"),Oe=e("mr32"),fe=e("oBTY"),he=e("wd/R"),ne=e.n(he),Le=e("GZq3"),t=e("nKUr"),se=function(j){return j.local().valueOf()},pe=function(j){var V=j.value,i=V===void 0?[]:V,W=j.onChange,P=j.format,y=P===void 0?"DD-MM-YYYY HH:mm":P,z=j.selectProps,$=z===void 0?{}:z,G=Object(s.useState)(!1),K=Object(A.a)(G,2),ee=K[0],X=K[1],D=Object(s.useCallback)(function(l){var g=se(l),h=i.indexOf(g),T=Object(fe.a)(i);h>-1?T.splice(h,1):T.push(g),W(T)},[i]),w=Object(s.useCallback)(function(l){var g=i.indexOf(se(l))>-1;return Object(t.jsx)("div",{className:"ant-picker-cell-inner",style:g?{position:"relative",zIndex:2,display:"inlineBlock",width:"24px",height:"22px",lineHeight:"22px",backgroundColor:"#1890ff",color:"#fff",margin:"auto",borderRadius:"2px",transition:"background 0.3s, border 0.3s"}:{},children:l.date()})},[i]),_=Object(s.useCallback)(function(l){var g=l.value,h=l.onClose,T=function(){h(),W(i.filter(function(te){return te!==g}))};return Object(t.jsx)(Oe.a,{onClose:T,closable:!0,children:ne()(g).format(y)})},[i]);return Object(t.jsx)(be.a,Object(m.a)(Object(m.a)({},$),{},{allowClear:!0,mode:"multiple",value:i,onClear:function(){return W&&W([])},tagRender:_,open:ee,onFocus:function(){return X(!0)},onBlur:function(){return X(!1)},dropdownMatchSelectWidth:!1,dropdownClassName:"multipleDropdownClassName",dropdownStyle:{height:"310px",width:"390px",minWidth:"0"},dropdownRender:function(){return Object(t.jsx)(ve.a,{disabledDate:function(h){var T=new Date;return h&&h.valueOf()<=T.setDate(T.getDate()-1)},showTime:{format:"HH:mm"},onChange:function(h){return h&&D(h)},open:!0,dateRender:w,style:{visibility:"hidden"},getPopupContainer:function(h){var T=h.parentNode;return T}})}}))},ge=pe,re=e("c+yx"),Ee=e("Gn8c"),Ce=e("VlvL"),ie=e("viv7"),xe=e("eFHa"),Me=e("4f6N"),Ne=e("qbNl"),Pe=e("JBPa"),Fe=e("Awhp"),ye=e("KrTs"),De={reported:"warning",reject:"error",approved:"success"},Te=function(j){var V=j.consultation,i=Object(s.useState)([]),W=Object(A.a)(i,2),P=W[0],y=W[1];Object(s.useEffect)(function(){var $=function(){Object(k.e)(V).then(function(K){K.success&&y(K.data)}).catch(function(){b.default.error(Object(t.jsx)(n.a,{id:"error",defaultMessage:"error"}))})};$()},[V]);var z=Object(s.useCallback)(function($){return Object(t.jsx)("ul",{className:"events",children:P.map(function(G){return $.format("yyyy-MM-DD")===ne()(G.date).format("yyyy-MM-DD")?Object(t.jsx)("li",{children:Object(t.jsx)(ye.a,{status:De[G.status],text:"".concat(G.author.email," ")})}):null})})},[P]);return Object(t.jsx)(Pe.a,{dateCellRender:z})},Ae=Te,Ve=e("J+hL"),Se=e("q34N"),Ue=e("5RzD"),Re=function(){var j=Object(n.i)(),V=Object(ue.h)(),i=V.consultation,W=V.tab,P=W===void 0?"attributes":W,y=i==="new",z=Object(s.useState)(!1),$=Object(A.a)(z,2),G=$[0],K=$[1],ee=Object(s.useState)(),X=Object(A.a)(ee,2),D=X[0],w=X[1],_=Object(xe.a)(),l=_.manageCourseEdit,g=_.setManageCourseEdit,h=_.validateCourseEdit,T=a.a.useForm(),oe=Object(A.a)(T,1),te=oe[0],We=Object(s.useCallback)(Object(Z.a)(I.a.mark(function J(){var p,H;return I.a.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,Object(k.d)(Number(i));case 2:p=L.sent,p.success&&(P==="attributes"&&h(p.data),w(Object(m.a)(Object(m.a)({},p.data),{},{author_id:p.data.author&&p.data.author.id,categories:(H=p.data.categories)===null||H===void 0?void 0:H.map(re.a)})));case 4:case"end":return L.stop()}},J)})),[i]);Object(s.useEffect)(function(){if(y){w({name:"new"});return}We()},[i]);var ae=Object(s.useMemo)(function(){return{onFinish:function(){var J=Object(Z.a)(I.a.mark(function H(le){var L,Y;return I.a.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!l.disableEdit){S.next=3;break}return g({showModal:!0,disableEdit:!0,clicked:!1}),S.abrupt("return");case 3:if(L=Object(m.a)(Object(m.a)({},le),{},{image_url:D&&D.image_url,image_path:D&&D.image_url&&Object(re.e)(D.image_url)}),!y){S.next=11;break}return S.next=7,Object(k.b)(L);case 7:Y=S.sent,Y.success&&(K(!1),n.d.push("/consultations/".concat(Y.data.id))),S.next=15;break;case 11:return S.next=13,Object(k.f)(Number(i),L);case 13:Y=S.sent,Y.success&&(K(!1),h(Y.data),n.d.push("/consultations/".concat(Y.data.id,"/").concat(P)));case 15:b.default.success(Y.message);case 16:case"end":return S.stop()}},H)}));function p(H){return J.apply(this,arguments)}return p}(),initialValues:D}},[D,i,P,l]);return D?Object(t.jsx)(ce.a,{title:y?Object(t.jsx)(n.a,{id:"consultation"}):Object(t.jsx)(n.a,{id:"consultations.edit"}),header:{breadcrumb:{routes:[{path:"consultations",breadcrumbName:j.formatMessage({id:"menu.Consultations"})},{path:String(i),breadcrumbName:j.formatMessage({id:"form"})},{path:"/",breadcrumbName:j.formatMessage({id:String(D.name)})},{path:String(P),breadcrumbName:j.formatMessage({id:String(P)})}]}},children:Object(t.jsxs)(M.a,{tabs:{type:"card",activeKey:P,onChange:function(p){return n.d.push("/consultations/".concat(i,"/").concat(p))}},children:[Object(t.jsxs)(M.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"attributes"}),children:[l.disableEdit&&Object(t.jsx)(B.a,{closable:!0,style:{marginBottom:"20px"},type:"warning",message:Object(t.jsx)(n.a,{id:"course_edit_warning_message",defaultMessage:"course_edit_warning_message"}),action:Object(t.jsx)(x.a,{onClick:function(){return g({showModal:!0,disableEdit:!0,clicked:!0})},type:"primary",children:Object(t.jsx)(n.a,{id:"questionnaire.submit",defaultMessage:"questionnaire.submit"})})}),Object(t.jsx)(Ce.a,{show:G})," ",Object(t.jsx)(Me.a,{visible:l.showModal,setManage:g}),Object(t.jsxs)(a.a,Object(m.a)(Object(m.a)({},ae),{},{form:te,onValuesChange:function(){K(!0)},children:[Object(t.jsxs)(a.a.Group,{children:[Object(t.jsx)(f.a,{width:"md",name:"name",label:Object(t.jsx)(n.a,{id:"name"}),tooltip:Object(t.jsx)(n.a,{id:"name"}),placeholder:j.formatMessage({id:"name",defaultMessage:"name"}),required:!0,disabled:l.disableEdit}),Object(t.jsx)(f.a,{width:"sm",name:"duration",label:Object(t.jsx)(n.a,{id:"duration"}),tooltip:Object(t.jsx)(n.a,{id:"duration"}),placeholder:j.formatMessage({id:"duration",defaultMessage:"duration"}),disabled:l.disableEdit}),Object(t.jsx)(F.a,{name:"status",width:"xs",label:Object(t.jsx)(n.a,{id:"status"}),tooltip:Object(t.jsx)(n.a,{id:"status_consultation_tooltip"}),valueEnum:ie.a,initialValue:ie.a.draft,placeholder:j.formatMessage({id:"status"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"select"})}],disabled:l.disableEdit})]}),Object(t.jsxs)(a.a.Group,{children:[Object(t.jsx)(r.a,{width:"sm",name:"active_from",label:Object(t.jsx)(n.a,{id:"active_from"}),tooltip:Object(t.jsx)(n.a,{id:"active_from"}),placeholder:j.formatMessage({id:"active_from",defaultMessage:"active_from"}),disabled:l.disableEdit}),Object(t.jsx)(r.a,{width:"sm",name:"active_to",label:Object(t.jsx)(n.a,{id:"active_to"}),tooltip:Object(t.jsx)(n.a,{id:"active_to"}),placeholder:j.formatMessage({id:"active_to",defaultMessage:"active_to"}),disabled:l.disableEdit}),Object(t.jsx)(a.a.Item,{name:"author_id",label:Object(t.jsx)(n.a,{id:"tutor"}),tooltip:Object(t.jsx)(n.a,{id:"tutor_consultation_tooltip"}),valuePropName:"value",required:!0,children:Object(t.jsx)(me.a,{})})]}),Object(t.jsx)(a.a.Group,{children:Object(t.jsx)(a.a.Item,{name:"description",label:Object(t.jsx)(n.a,{id:"description"}),tooltip:Object(t.jsx)(n.a,{id:"description_tooltip"}),valuePropName:"value",required:!0,children:Object(t.jsx)(de.a,{directory:"consultation/".concat(i,"/wysiwyg")})})}),Object(t.jsx)(a.a.Group,{children:Object(t.jsx)(a.a.Item,{valuePropName:"value",name:"proposed_terms",tooltip:Object(t.jsx)(n.a,{id:"proposed_terms_tooltip"}),label:Object(t.jsx)(n.a,{id:"consultations.proposed_terms"}),children:Object(t.jsx)(ge,{})})})]}))]},"attributes"),!y&&Object(t.jsx)(M.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"product"}),disabled:l.disableEdit,children:i&&Object(t.jsx)(Se.a,{type:"line",productable:{class_type:"App\\Models\\Consultation",class_id:i,name:String(D.name)}})},"product"),!y&&Object(t.jsx)(M.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"media"}),disabled:l.disableEdit,children:Object(t.jsx)(a.a,Object(m.a)(Object(m.a)({},ae),{},{children:Object(t.jsx)(Ee.a,{folder:"consultations/".concat(i),title:"image",action:"/api/admin/consultations/".concat(i),src_name:"image_url",form_name:"image",getUploadedSrcField:function(p){return p.file.response.data.image_url},setPath:function(p){return w(function(H){return Object(m.a)(Object(m.a)({},H),p)})}})}))},"media"),!y&&Object(t.jsx)(M.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"categories"}),disabled:l.disableEdit,children:Object(t.jsx)(d.a,{children:Object(t.jsx)(o.a,{span:12,children:Object(t.jsx)(a.a,Object(m.a)(Object(m.a)({},ae),{},{children:Object(t.jsx)(a.a.Item,{label:Object(t.jsx)(n.a,{id:"categories"}),name:"categories",valuePropName:"value",children:Object(t.jsx)(je.a,{})})}))})})},"categories"),!y&&Object(t.jsx)(M.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"user_submission"}),disabled:l.disableEdit,children:Object(t.jsx)(d.a,{children:Object(t.jsx)(o.a,{span:12,children:i&&Object(t.jsx)(Ue.a,{id:Number(i),type:"App\\Models\\Consultation"})})})},"user_submission"),!y&&Object(t.jsx)(M.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"consultations.calendar"}),children:Object(t.jsx)(Ae,{consultation:Number(i)})},"calendar")]})}):Object(t.jsx)(U.a,{})},$e=c.default=Re},viv7:function(N,c,e){"use strict";e.d(c,"a",function(){return u});var u;(function(d){d.draft="draft",d.published="published",d.archived="archived"})(u||(u={}))}}]);
