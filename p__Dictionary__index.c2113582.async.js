"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5797,3507],{29477:function(re,I,e){var K=e(97857),p=e.n(K),S=e(5574),o=e.n(S),T=e(55523),f=e(75842),R=e(21974),m=e(67294),Z=e(80854),x=e(85893);function b(r){var h=r.onChange,U=r.onUpload,V=r.url,w=r.name,n=r.extra,X=r.accept,M=r.data,N=r.wrapInForm,s=N===void 0?!0:N,W=r.title,H=r.formProps,l=r.maxFiles,a=r.clearListAfterUpload,t=r.hideLabel,Q=r.disabled,g=r.showUploadList,v=(0,m.useState)(),P=o()(v,2),D=P[0],O=P[1],$=(0,Z.useIntl)();return M&&M[w]&&delete M[w],(0,x.jsx)(R.Z,{condition:s,wrap:function(c){return(0,x.jsx)(f.Z,p()(p()({},H),{},{children:c}))},children:(0,x.jsx)(T.Z,{title:W||" ".concat($.formatMessage({id:"upload_click_here"})),placeholder:$.formatMessage({id:"upload_click_here"}),label:!t&&(0,x.jsx)(Z.FormattedMessage,{id:"upload"}),max:l!=null?l:2,fieldProps:{data:M,accept:X,name:w,showUploadList:g,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))},onChange:function(c){O(c),h&&h(c),c.file.status==="done"&&(U&&U(c.file.response),a&&O(void 0))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(V),extra:n,fileList:D==null?void 0:D.fileList,disabled:Q})})}I.Z=b},54464:function(re,I,e){e.d(I,{T:function(){return S}});var K=e(67294),p=e(80854),S=function(){var T,f=(0,p.useModel)("@@initialState"),R=f.initialState,m=(R==null||(T=R.currentUser)===null||T===void 0?void 0:T.permissions)||[],Z=(0,K.useCallback)(function(x){return Array.isArray(m)?!!(m!=null&&m.find(function(b){return b.includes(x)})):!1},[m]);return{checkPermission:Z}}},73197:function(re,I,e){e.r(I),e.d(I,{DictionaryTabNames:function(){return ie},default:function(){return ue}});var K=e(97857),p=e.n(K),S=e(15009),o=e.n(S),T=e(99289),f=e.n(T),R=e(5574),m=e.n(R),Z=e(29477),x=e(91115),b=e(54464),r=e(61441),h=e(42782),U=e(66419),V=e(47389),w=e(82061),n=e(51042),X=e(16894),M=e(2453),N=e(66309),s=e(83062),W=e(14726),H=e(86738),l=e(67294),a=e(80854),t=e(85893),Q=function(){var y=f()(o()().mark(function A(d){return o()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,h.FX)(d).then(function(z){return z.success&&M.ZP.success(z.message),!0}));case 1:case"end":return _.stop()}},A)}));return function(d){return y.apply(this,arguments)}}(),g=function(){var A=(0,l.useRef)(),d=(0,a.useIntl)(),J=(0,a.useParams)(),_=J.dictionaryId,z=J.tab,ee=(0,b.T)(),Y=ee.checkPermission,te=[{title:(0,t.jsx)(a.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:(0,t.jsx)(a.FormattedMessage,{id:"word",defaultMessage:"word"}),dataIndex:"word",sorter:!0},{title:(0,t.jsx)(a.FormattedMessage,{id:"categories",defaultMessage:"categories"}),dataIndex:"categories",sorter:!1,hideInSearch:!0,render:function(F,i){var u;return(0,t.jsx)(l.Fragment,{children:(u=i.categories)===null||u===void 0?void 0:u.map(function(L){return(0,t.jsx)(N.Z,{children:L.name},L.name)})})}},{hideInSearch:!0,title:(0,t.jsx)(a.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",width:100,render:function(F,i){return[(0,t.jsx)(a.Link,{to:"/other/dictionary/".concat(_,"/").concat(z,"/").concat(i.id,"/").concat(r.DictionaryWordsTabNames.FORM),children:(0,t.jsx)(s.Z,{title:(0,t.jsx)(a.FormattedMessage,{id:"edit",defaultMessage:"edit"}),children:(0,t.jsx)(W.ZP,{type:"primary",icon:(0,t.jsx)(V.Z,{})})})},"edit"),(0,t.jsx)(H.Z,{title:(0,t.jsx)(a.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:f()(o()().mark(function u(){var L;return o()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,Q(i.id);case 2:L=E.sent,L&&A.current&&A.current.reload();case 4:case"end":return E.stop()}},u)})),okText:(0,t.jsx)(a.FormattedMessage,{id:"yes"}),cancelText:(0,t.jsx)(a.FormattedMessage,{id:"no"}),children:(0,t.jsx)(s.Z,{title:(0,t.jsx)(a.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,t.jsx)(W.ZP,{type:"primary",icon:(0,t.jsx)(w.Z,{}),danger:!0})})},"delete")]}}];return(0,t.jsx)(X.ZP,{headerTitle:d.formatMessage({id:"words",defaultMessage:"Words"}),actionRef:A,rowKey:"id",search:{layout:"vertical"},toolBarRender:function(){return[(0,t.jsx)(a.Link,{to:"/other/dictionary/".concat(_,"/").concat(z,"/new/").concat(r.DictionaryWordsTabNames.FORM),children:(0,t.jsxs)(W.ZP,{type:"primary",children:[(0,t.jsx)(n.Z,{})," ",(0,t.jsx)(a.FormattedMessage,{id:"new",defaultMessage:"new"})]},"primary")},"new"),Y(x.Z.DictionaryImport)?(0,t.jsx)("div",{className:"import-dictionary",children:(0,t.jsx)(Z.Z,{title:d.formatMessage({id:"import_dictionary",defaultMessage:"Import dictionary"}),url:"/api/admin/dictionary-words/import",name:"file",accept:".csv, .xlsx",data:{dictionary_id:Number(_)},onChange:function(i){if(i.file.status==="done"&&i.file.response&&i.file.response.success){var u;M.ZP.success(i.file.response.message),(u=A.current)===null||u===void 0||u.reload()}i.file.response&&i.file.status==="error"&&(M.ZP.error(i.file.response.message),console.error(i.file.response))},hideLabel:!0,wrapInForm:!1,maxFiles:1,clearListAfterUpload:!0})}):void 0]},request:function(F,i){var u=F.pageSize,L=F.current,ae=F.word;return(0,h.uz)(p()({per_page:u,page:L,word:ae,dictionary_id:Number(_)},(0,U.di)(i,"created_at"))).then(function(E){return E.success?{data:E.data,total:E.meta.total,success:!0}:[]})},columns:te})},v=g,P=e(26271),D=e(952),O=e(5966),$=e(31199),j=e(74453),c=e(74330),le=e(71230),ne=e(15746),ie=function(y){return y.FORM="form",y.WORDS="words",y}({}),ue=function(){var y=(0,a.useIntl)(),A=(0,a.useParams)(),d=A.dictionaryId,J=A.tab,_=d==="new",z=(0,l.useState)(),ee=m()(z,2),Y=ee[0],te=ee[1],k=(0,l.useState)(!1),F=m()(k,2),i=F[0],u=F[1],L=D.ZP.useForm(),ae=m()(L,1),E=ae[0],de=(0,l.useCallback)(f()(o()().mark(function se(){var G;return o()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return u(!0),B.next=3,(0,h.RC)(Number(d));case 3:G=B.sent,G.success&&te(G.data),u(!1);case 6:case"end":return B.stop()}},se)})),[d]);(0,l.useEffect)(function(){if(d==="new"){te({});return}de()},[d,de]);var me=(0,l.useMemo)(function(){return{onFinish:function(){var se=f()(o()().mark(function oe(B){var q;return o()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(d!=="new"){C.next=7;break}return C.next=3,(0,h.Xk)(B);case 3:q=C.sent,q.success&&a.history.push("/other/dictionary/".concat(q.data.id,"/form")),C.next=10;break;case 7:return C.next=9,(0,h.ax)(Number(d),B);case 9:q=C.sent;case 10:M.ZP.success(q.message);case 11:case"end":return C.stop()}},oe)}));function G(oe){return se.apply(this,arguments)}return G}(),initialValues:Y}},[Y,d]);return Y?(0,t.jsx)(j._z,{title:_?(0,t.jsx)(a.FormattedMessage,{id:"new_dictionary"}):(0,t.jsx)(a.FormattedMessage,{id:"edit_dictionary"}),children:(0,t.jsxs)(P.ZP,{tabs:{type:"card",activeKey:J,onChange:function(G){a.history.push("/other/dictionary/".concat(d,"/").concat(G))}},children:[(0,t.jsx)(P.ZP.TabPane,{tab:(0,t.jsx)(a.FormattedMessage,{id:"attributes"}),children:(0,t.jsxs)(D.ZP,p()(p()({},me),{},{form:E,children:[(0,t.jsxs)(le.Z,{gutter:[16,16],children:[(0,t.jsx)(ne.Z,{xs:{span:24},md:{span:12},children:(0,t.jsx)(O.Z,{name:"name",label:(0,t.jsx)(a.FormattedMessage,{id:"name"}),tooltip:(0,t.jsx)(a.FormattedMessage,{id:"name"}),placeholder:y.formatMessage({id:"Name"}),required:!0})}),!_&&(0,t.jsx)(ne.Z,{xs:{span:24},md:{span:12},children:(0,t.jsx)(O.Z,{name:"slug",label:(0,t.jsx)(a.FormattedMessage,{id:"slug"}),placeholder:y.formatMessage({id:"slug"}),disabled:!0,required:!0})}),(0,t.jsx)(ne.Z,{xs:{span:24},md:{span:12},children:(0,t.jsx)($.Z,{name:"free_views_count",label:(0,t.jsx)(a.FormattedMessage,{id:"free_views_count"}),tooltip:(0,t.jsx)(a.FormattedMessage,{id:"free_views_count_tooltip"}),placeholder:y.formatMessage({id:"Free views count"}),min:0})})]}),i&&(0,t.jsx)(c.Z,{})]}))},ie.FORM),(0,t.jsx)(P.ZP.TabPane,{tab:(0,t.jsx)(a.FormattedMessage,{id:"words"}),disabled:_,children:(0,t.jsx)(v,{})},ie.WORDS)]})}):(0,t.jsx)(c.Z,{})}},17948:function(re,I,e){e.r(I);var K=e(97857),p=e.n(K),S=e(15009),o=e.n(S),T=e(99289),f=e.n(T),R=e(47389),m=e(82061),Z=e(51042),x=e(74453),b=e(16894),r=e(2453),h=e(83062),U=e(14726),V=e(86738),w=e(67294),n=e(80854),X=e(42782),M=e(66419),N=e(73197),s=e(85893),W=function(){var l=f()(o()().mark(function a(t){return o()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,X.c)(t).then(function(v){return v.success&&r.ZP.success(v.message),!0}));case 1:case"end":return g.stop()}},a)}));return function(t){return l.apply(this,arguments)}}(),H=function(){var a=(0,w.useRef)(),t=(0,n.useIntl)(),Q=[{title:(0,s.jsx)(n.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:(0,s.jsx)(n.FormattedMessage,{id:"name",defaultMessage:"name"}),dataIndex:"name",sorter:!0},{title:(0,s.jsx)(n.FormattedMessage,{id:"slug",defaultMessage:"slug"}),dataIndex:"slug",sorter:!0},{title:(0,s.jsx)(n.FormattedMessage,{id:"free_views_count",defaultMessage:"free_views_count"}),dataIndex:"free_views_count",sorter:!0},{hideInSearch:!0,title:(0,s.jsx)(n.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",render:function(v,P){return[(0,s.jsx)(n.Link,{to:"/other/dictionary/".concat(P.id,"/").concat(N.DictionaryTabNames.FORM),children:(0,s.jsx)(h.Z,{title:(0,s.jsx)(n.FormattedMessage,{id:"edit",defaultMessage:"edit"}),children:(0,s.jsx)(U.ZP,{type:"primary",icon:(0,s.jsx)(R.Z,{})})})},"edit"),(0,s.jsx)(V.Z,{title:(0,s.jsx)(n.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:f()(o()().mark(function D(){var O;return o()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,W(P.id);case 2:O=j.sent,O&&a.current&&a.current.reload();case 4:case"end":return j.stop()}},D)})),okText:(0,s.jsx)(n.FormattedMessage,{id:"yes"}),cancelText:(0,s.jsx)(n.FormattedMessage,{id:"no"}),children:(0,s.jsx)(h.Z,{title:(0,s.jsx)(n.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,s.jsx)(U.ZP,{type:"primary",icon:(0,s.jsx)(m.Z,{}),danger:!0})})},"delete")]}}];return(0,s.jsx)(x._z,{children:(0,s.jsx)(b.ZP,{headerTitle:t.formatMessage({id:"menu.Other activities.Dictionary",defaultMessage:"Dictionary"}),actionRef:a,rowKey:"id",search:{layout:"vertical"},toolBarRender:function(){return[(0,s.jsx)(n.Link,{to:"/other/dictionary/new/".concat(N.DictionaryTabNames.FORM),children:(0,s.jsxs)(U.ZP,{type:"primary",children:[(0,s.jsx)(Z.Z,{})," ",(0,s.jsx)(n.FormattedMessage,{id:"new",defaultMessage:"new"})]},"primary")},"new")]},request:function(v,P){var D=v.pageSize,O=v.current,$=v.name,j=v.slug;return(0,X.yX)(p()({per_page:D,page:O,name:$,slug:j},(0,M.di)(P,"created_at"))).then(function(c){return c.success?{data:c.data,total:c.meta.total,success:!0}:[]})},columns:Q})})};I.default=H}}]);
