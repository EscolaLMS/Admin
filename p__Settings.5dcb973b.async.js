(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"+up7":function(ee,j,e){"use strict";e.d(j,"f",function(){return y}),e.d(j,"d",function(){return a}),e.d(j,"b",function(){return b}),e.d(j,"h",function(){return o}),e.d(j,"c",function(){return D}),e.d(j,"e",function(){return s}),e.d(j,"a",function(){return p}),e.d(j,"g",function(){return K});var T=e("k1fw"),_=e("9og8"),M=e("WmNS"),r=e.n(M),h=e("9kvl");function y(i,u){return x.apply(this,arguments)}function x(){return x=Object(_.a)(r.a.mark(function i(u,C){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(h.f)("/api/admin/settings",Object(T.a)({method:"GET",useCache:!1,params:Object(T.a)(Object(T.a)({},u),{},{per_page:u.pageSize,page:u.current})},C||{})));case 1:case"end":return n.stop()}},i)})),x.apply(this,arguments)}function a(i,u){return A.apply(this,arguments)}function A(){return A=Object(_.a)(r.a.mark(function i(u,C){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(h.f)("/api/admin/settings/".concat(u),Object(T.a)({method:"GET",useCache:!1},C||{})));case 1:case"end":return n.stop()}},i)})),A.apply(this,arguments)}function b(i,u){return L.apply(this,arguments)}function L(){return L=Object(_.a)(r.a.mark(function i(u,C){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(h.f)("/api/admin/settings",Object(T.a)({method:"POST",headers:{"Content-Type":"application/json"},data:u},C||{})));case 1:case"end":return n.stop()}},i)})),L.apply(this,arguments)}function o(i,u,C){return z.apply(this,arguments)}function z(){return z=Object(_.a)(r.a.mark(function i(u,C,d){return r.a.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.abrupt("return",Object(h.f)("/api/admin/settings/".concat(u),Object(T.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:C},d||{})));case 1:case"end":return te.stop()}},i)})),z.apply(this,arguments)}function D(i,u){return f.apply(this,arguments)}function f(){return f=Object(_.a)(r.a.mark(function i(u,C){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(h.f)("/api/admin/settings/".concat(u),Object(T.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},C||{})));case 1:case"end":return n.stop()}},i)})),f.apply(this,arguments)}function s(i){return U.apply(this,arguments)}function U(){return U=Object(_.a)(r.a.mark(function i(u){return r.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(h.f)("/api/admin/settings/groups",Object(T.a)({method:"GET",useCache:!1},u||{})));case 1:case"end":return d.stop()}},i)})),U.apply(this,arguments)}function p(i){return c.apply(this,arguments)}function c(){return c=Object(_.a)(r.a.mark(function i(u){return r.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(h.f)("/api/admin/config",Object(T.a)({method:"GET",useCache:!1},u||{})));case 1:case"end":return d.stop()}},i)})),c.apply(this,arguments)}function K(i,u){return S.apply(this,arguments)}function S(){return S=Object(_.a)(r.a.mark(function i(u,C){var d,n;return r.a.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return d=u.key,n=u.value,V.abrupt("return",Object(h.f)("/api/admin/config",Object(T.a)({method:"POST",data:{config:[{key:d,value:n}]}},C||{})));case 2:case"end":return V.stop()}},i)})),S.apply(this,arguments)}},"3fxf":function(ee,j,e){"use strict";var T=e("DjyN"),_=e("NUBc"),M=e("Mwp2"),r=e("VXEj"),h=e("+L6B"),y=e("2/Rp"),x=e("5NDa"),a=e("5rEg"),A=e("oBTY"),b=e("k1fw"),L=e("tJVT"),o=e("DYRE"),z=e("zeV3"),D=e("tU7J"),f=e("wFql"),s=e("q1tI"),U=e.n(s),p=e("BAh9"),c=e("/MfK"),K=e("mAF4"),S=e("dF/Y"),i=e("9kvl"),u=e("DBJ/"),C=e("lLVY"),d=e.n(C),n=e("nKUr"),te=e.n(n),V=function(ie){var G=ie.directory,ne=ie.onUploaded;return Object(n.jsxs)(z.b,{align:"start",children:[Object(n.jsxs)(f.a.Text,{children:[Object(n.jsx)(i.a,{id:"pages.files.filesBrowser"}),Object(n.jsx)(f.a.Text,{code:!0,children:G})]}),Object(n.jsx)(u.a,{url:"/api/admin/file/upload",name:"file[]",data:{target:G},onChange:function(le){return le.file.status==="done"&&ne(G,le.file)}})]})},oe=function(ie){var G=ie.defaultDirectory,ne=G===void 0?"/":G,Y=ie.onFile,le=Object(i.i)(),he=Object(s.useState)({loading:!1,name:"",directory:ne,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),me=Object(L.a)(he,2),w=me[0],Oe=me[1],se=Object(s.useRef)(),X=Object(s.useCallback)(function(W){Oe(function(v){return Object(b.a)(Object(b.a)({},v),{},{loading:W})})},[]),t=Object(s.useCallback)(function(W,v){Oe(function(Q){return Object(b.a)(Object(b.a)(Object(b.a)({},Q),W.data),{},{data:[{url:v.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(A.a)(W.data.data.map(function(q){return Object(b.a)(Object(b.a)({},q),{},{url:q.mime==="directory"?"".concat(v,"/").concat(q.name):q.url})}))).filter(function(q){return v==="/"?q.name!=="..":!0}),directory:v,loading:!1})})},[X]),ae=Object(s.useCallback)(function(W){var v,Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,q=function(){return se.current&&se.current.abort()};return q(),se.current=new AbortController,X(!0),Object(p.a)({directory:W,page:Q},{signal:(v=se.current)===null||v===void 0?void 0:v.signal}).then(function(ce){ce.success&&t(ce,W)}).catch(function(){return X(!1)}),function(){q()}},[X]);Object(s.useEffect)(function(){return ae(ne)},[ne,ae]);var be=Object(s.useCallback)(function(W){X(!0),Object(p.c)(W).then(function(){ae(w.directory)}).catch(function(){X(!1)})},[ae,X,w.directory]),_e=Object(s.useCallback)(function(W,v){var Q,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,ce=function(){return se.current&&se.current.abort()};return ce(),se.current=new AbortController,X(!0),Object(p.b)({directory:W,name:v,page:q},{signal:(Q=se.current)===null||Q===void 0?void 0:Q.signal}).then(function(je){je.success&&t(je,W)}).catch(function(){return X(!1)}),function(){ce()}},[X]);return Object(n.jsxs)("div",{className:"file-browser",children:[Object(n.jsxs)("div",{className:"file-browser__header",children:[Object(n.jsx)(a.a,{placeholder:le.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(v){return Oe(function(Q){return Object(b.a)(Object(b.a)({},Q),{},{name:v.target.value})})},value:w.name}),Object(n.jsxs)("div",{children:[Object(n.jsx)(y.a,{className:"file-browser__button",onClick:function(){return ae(w.directory)},children:Object(n.jsx)(i.a,{id:"reset"})}),Object(n.jsx)(y.a,{className:"file-browser__button",type:"primary",onClick:function(){return _e(w.directory,w.name)},children:Object(n.jsx)(i.a,{id:"query"})})]})]}),Object(n.jsx)(r.b,{loading:w.loading,size:"small",itemLayout:"horizontal",dataSource:w.data,header:Object(n.jsx)(V,{directory:w.directory,onUploaded:function(v,Q){return ae(v)&&Y&&Y(Q,v)}}),footer:Object(n.jsx)(V,{directory:w.directory,onUploaded:function(v){return ae(v)&&Y&&Y(name,v)}}),renderItem:function(v){return Object(n.jsx)(r.b.Item,{actions:v.mime!=="directory"?[Object(n.jsx)(y.a,{type:"default",danger:!0,icon:Object(n.jsx)(c.a,{}),size:"small",onClick:function(){return be(v.url)}})]:[],children:Object(n.jsx)(r.b.Item.Meta,{avatar:v.mime==="directory"?Object(n.jsx)(y.a,{type:"primary",icon:Object(n.jsx)(K.a,{}),size:"small",onClick:function(){return ae(v.url)}}):Object(n.jsx)("a",{href:v.url,target:"_blank",rel:"noreferrer",children:Object(n.jsx)(y.a,{type:"default",icon:Object(n.jsx)(S.a,{}),size:"small"})}),description:Object(n.jsx)(U.a.Fragment,{children:Object(n.jsx)(y.a,{type:"text",size:"small",onClick:function(){return v.mime==="directory"?ae(v.url):Y&&Y(v,w.directory)},children:v.name})})})})}}),Object(n.jsx)(_.a,{pageSizeOptions:[],current:w.current_page,total:w.total,pageSize:w.per_page,onChange:function(v){return ae(w.directory,v)}})]})};j.a=oe},"5qq5":function(ee,j,e){"use strict";var T=e("7Kak"),_=e("9yH6"),M=e("wx14"),r=e("VTBJ"),h=e("Ff2n"),y=e("q1tI"),x=e.n(y),a=e("adzw"),A=e("uX+g"),b=e("WFLz"),L=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],o=x.a.forwardRef(function(s,U){var p=s.fieldProps,c=s.options,K=s.radioType,S=s.layout,i=s.proFieldProps,u=s.valueEnum,C=Object(h.a)(s,L);return x.a.createElement(a.a,Object(M.a)({mode:"edit",valueType:K==="button"?"radioButton":"radio",ref:U,valueEnum:Object(A.a)(u,void 0)},C,{fieldProps:Object(r.a)({options:c,layout:S},p),proFieldProps:i,filedConfig:{customLightMode:!0}}))}),z=x.a.forwardRef(function(s,U){var p=s.fieldProps,c=s.children;return x.a.createElement(_.a,Object(M.a)({},p,{ref:U}),c)}),D=Object(b.a)(z,{valuePropName:"checked",ignoreWidth:!0}),f=D;f.Group=o,f.Button=_.a.Button,f.displayName="ProFormComponent",j.a=f},BAh9:function(ee,j,e){"use strict";e.d(j,"a",function(){return y}),e.d(j,"b",function(){return a}),e.d(j,"e",function(){return b}),e.d(j,"d",function(){return o}),e.d(j,"c",function(){return z});var T=e("k1fw"),_=e("9og8"),M=e("WmNS"),r=e.n(M),h=e("9kvl");function y(f,s){return x.apply(this,arguments)}function x(){return x=Object(_.a)(r.a.mark(function f(s,U){return r.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(h.f)("/api/admin/file/list",Object(T.a)({method:"GET",params:s},U||{})));case 1:case"end":return c.stop()}},f)})),x.apply(this,arguments)}function a(f,s){return A.apply(this,arguments)}function A(){return A=Object(_.a)(r.a.mark(function f(s,U){return r.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(h.f)("/api/admin/file/find",Object(T.a)({method:"GET",params:s},U||{})));case 1:case"end":return c.stop()}},f)})),A.apply(this,arguments)}function b(f,s,U){return L.apply(this,arguments)}function L(){return L=Object(_.a)(r.a.mark(function f(s,U,p){var c;return r.a.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return c=new FormData,c.append("file[]",s),c.append("target",U),S.abrupt("return",Object(h.f)("/api/admin/file/upload",Object(T.a)({method:"POST",data:c},p||{})));case 4:case"end":return S.stop()}},f)})),L.apply(this,arguments)}var o=function(s){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(s,"&w=").concat(U)};function z(f,s){return D.apply(this,arguments)}function D(){return D=Object(_.a)(r.a.mark(function f(s,U){return r.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(h.f)("/api/admin/file/delete",Object(T.a)({method:"DELETE",data:{url:s}},U||{})));case 1:case"end":return c.stop()}},f)})),D.apply(this,arguments)}},BiO0:function(ee,j,e){"use strict";var T=e("wx14"),_=e("Ff2n"),M=e("q1tI"),r=e.n(M),h=e("adzw"),y=["fieldProps","proFieldProps"],x=function(A,b){var L=A.fieldProps,o=A.proFieldProps,z=Object(_.a)(A,y);return r.a.createElement(h.a,Object(T.a)({ref:b,mode:"edit",valueType:"textarea",fieldProps:L,proFieldProps:o},z))};j.a=r.a.forwardRef(x)},"DBJ/":function(ee,j,e){"use strict";var T=e("y8nQ"),_=e("Vl3Y"),M=e("etVw"),r=e("q1tI"),h=e.n(r),y=e("9kvl"),x=e("qFDU"),a=e("nKUr"),A=e.n(a),b=function(o){var z=o.onChange,D=o.url,f=o.name,s=o.extra,U=o.accept,p=o.data,c=o.wrapInForm,K=c===void 0?!0:c,S=o.title,i=Object(y.i)();return p&&p[f]&&delete p[f],Object(a.jsx)(x.a,{condition:K,wrap:function(C){return Object(a.jsx)(_.a,{children:C})},children:Object(a.jsx)(M.a,{title:S||Object(a.jsx)(y.a,{id:"upload_click_here"}),placeholder:i.formatMessage({id:"upload_click_here"}),onChange:z,label:Object(a.jsx)(y.a,{id:"upload"}),max:2,fieldProps:{data:p,accept:U,name:f,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(D),extra:s})})};j.a=b},"F/zT":function(ee,j,e){"use strict";var T=e("wx14"),_=e("VTBJ"),M=e("Ff2n"),r=e("q1tI"),h=e.n(r),y=e("adzw"),x=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],a=h.a.forwardRef(function(A,b){var L=A.fieldProps,o=A.unCheckedChildren,z=A.checkedChildren,D=A.proFieldProps,f=Object(M.a)(A,x);return h.a.createElement(y.a,Object(T.a)({valueType:"switch",mode:"edit",fieldProps:Object(_.a)({unCheckedChildren:o,checkedChildren:z},L),ref:b,valuePropName:"checked",proFieldProps:D,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},f))});j.a=a},YjuE:function(ee,j,e){"use strict";e.r(j);var T=e("T2oS"),_=e("W9HT"),M=e("tJVT"),r=e("q1tI"),h=e.n(r),y=e("nhC9"),x=e("Ty5D"),a=e("9kvl"),A=e("tMyG"),b=e("+up7"),L=e("P2fV"),o=e("NJEC"),z=e("5Dmo"),D=e("3S7+"),f=e("+L6B"),s=e("2/Rp"),U=e("+BJd"),p=e("mr32"),c=e("jrin"),K=e("k1fw"),S=e("miYZ"),i=e("tsqr"),u=e("9og8"),C=e("WmNS"),d=e.n(C),n=e("xvlK"),te=e("Qiat"),V=e("y8nQ"),oe=e("Vl3Y"),ve=e("5NDa"),ie=e("5rEg"),G=e("VMEa"),ne=e("rmhi"),Y=e("Qurx"),le=e("F/zT"),he=e("5qq5"),me=e("BiO0"),w=e("hd5d"),Oe=e("3fxf"),se=e("ovOe"),X=e.n(se),t=e("nKUr"),ae=function(l){var m=l.value,g=l.onChange,I=l.type,$=I===void 0?"file":I,O=Object(r.useState)(!1),F=Object(M.a)(O,2),H=F[0],E=F[1];return Object(t.jsxs)(h.a.Fragment,{children:[Object(t.jsxs)(G.a.Group,{children:[Object(t.jsx)(ie.a,{value:m,readOnly:!0}),Object(t.jsxs)(s.a,{size:"small",type:"primary",onClick:function(){return E(!H)},children:["toggle ",$," browser"]})]}),H&&Object(t.jsx)(Oe.a,{onFile:function(Z,R){return g&&g("".concat(R,"/").concat(Z.name))}})]})},be=function(l){var m=Object(a.i)(),g=l.visible,I=l.onVisibleChange,$=l.onFinish,O=l.id,F=oe.a.useForm(),H=Object(M.a)(F,1),E=H[0],J=!O||O===-1,Z=Object(r.useState)("text"),R=Object(M.a)(Z,2),P=R[0],B=R[1];Object(r.useEffect)(function(){O&&O!==-1?Object(b.d)(O).then(function(k){k.success&&(E.setFieldsValue(k.data),B(k.data.type))}):(E.resetFields(),B("text"))},[O,E]);var ue=Object(r.useCallback)(function(k){k.type&&k.type!==P&&B(k.type)},[P]);return Object(t.jsxs)(ne.a,{form:E,title:m.formatMessage({id:O?"editSetting":"newSetting",defaultMessage:O?"editSetting":"newSetting"}),width:"60vw",visible:g,onVisibleChange:I,onFinish:$,onValuesChange:ue,children:[Object(t.jsxs)(G.a.Group,{children:[Object(t.jsx)(Y.a,{label:Object(t.jsx)(a.a,{id:"group",defaultMessage:"group"}),rules:[{required:!0}],width:"md",name:"group"})," ",Object(t.jsx)(Y.a,{label:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"})]}),Object(t.jsxs)(G.a.Group,{children:[Object(t.jsx)(le.a,{name:"enumerable",label:Object(t.jsx)(a.a,{id:"enumerable",defaultMessage:"enumerable"})}),Object(t.jsx)(le.a,{name:"public",label:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"})})]}),Object(t.jsx)(G.a.Group,{children:Object(t.jsx)(he.a.Group,{disabled:!J,name:"type",label:Object(t.jsx)(a.a,{id:"type"}),options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"},{label:"json",value:"json"},{label:"file",value:"file"},{label:"image",value:"image"}]})}),Object(t.jsxs)("div",{children:[P==="text"&&Object(t.jsx)(Y.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"})}),P==="json"&&Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(me.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"}),tooltip:"".concat(m.formatMessage({id:"example_json"}),': {"name":"John", "age":30, "city":["New York","Warsaw"]}')}),Object(t.jsx)(G.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(X.a,{src:JSON.parse(E.getFieldValue("value"))})}catch(re){return Object(t.jsx)(X.a,{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]}),(P==="file"||P==="image")&&Object(t.jsx)(G.a.Item,{name:"value",label:"value",tooltip:"select file from current repository or upload new one",valuePropName:"value",children:Object(t.jsx)(ae,{type:P})}),P==="markdown"&&Object(t.jsx)(G.a.Item,{name:"value",label:"value",tooltip:"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.",valuePropName:"value",children:Object(t.jsx)(w.a,{directory:"settings/wysiwyg"})})]})]})},_e=be,W=e("G3dp"),v=e("/MfK"),Q=function(){var N=Object(u.a)(d.a.mark(function l(m,g,I){var $;return d.a.wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return $=i.default.loading(m.formatMessage({id:"loading"})),F.prev=1,F.next=4,I&&I!==-1?Object(b.h)(I,Object(K.a)({},g)):Object(b.b)(Object(K.a)({},g));case 4:return $(),i.default.success(m.formatMessage({id:"success"})),F.abrupt("return",!0);case 9:return F.prev=9,F.t0=F.catch(1),$(),i.default.error(m.formatMessage({id:"error"})),F.abrupt("return",!1);case 14:case"end":return F.stop()}},l,null,[[1,9]])}));return function(m,g,I){return N.apply(this,arguments)}}(),q=function(){var N=Object(u.a)(d.a.mark(function l(m,g){var I;return d.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return I=i.default.loading(m.formatMessage({id:"loading"})),O.prev=1,O.next=4,Object(b.c)(g);case 4:return I(),i.default.success(m.formatMessage({id:"success"})),O.abrupt("return",!0);case 9:return O.prev=9,O.t0=O.catch(1),I(),i.default.error(m.formatMessage({id:"error"})),O.abrupt("return",!1);case 14:case"end":return O.stop()}},l,null,[[1,9]])}));return function(m,g){return N.apply(this,arguments)}}(),ce=function(){var l=Object(r.useState)(!1),m=Object(M.a)(l,2),g=m[0],I=m[1],$=Object(r.useState)([]),O=Object(M.a)($,2),F=O[0],H=O[1],E=Object(r.useRef)(),J=Object(a.i)();Object(r.useEffect)(function(){Object(b.e)().then(function(R){R.success&&H(R.data)})},[]);var Z=[{title:Object(t.jsx)(a.a,{id:"group",defaultMessage:"group"}),dataIndex:"group",hideInSearch:!1,key:"group",valueType:"select",width:100,valueEnum:F.sort().reduce(function(R,P){return Object(K.a)(Object(K.a)({},R),{},Object(c.a)({},P,P))},{})},{title:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"enumerable",defaultMessage:"enumerable"}),dataIndex:"enumerable",hideInForm:!0,hideInSearch:!0,render:function(P,B){return Object(t.jsx)(p.a,{color:B.enumerable?"success":"error",children:Object(t.jsx)(a.a,{id:B.enumerable?"true":"false",defaultMessage:B.enumerable?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(P,B){return Object(t.jsx)(p.a,{color:B.public?"success":"error",children:Object(t.jsx)(a.a,{id:B.public?"true":"false",defaultMessage:B.public?"true":"false"})})}},{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(P,B){return[Object(t.jsx)(D.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(s.a,{type:"primary",icon:Object(t.jsx)(W.a,{}),onClick:function(){return I(B.id)}})},"edit"),Object(t.jsx)(o.a,{title:Object(t.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(u.a)(d.a.mark(function ue(){var k;return d.a.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.next=2,q(J,B.id);case 2:k=fe.sent,k&&(I(!1),E.current&&E.current.reload());case 4:case"end":return fe.stop()}},ue)})),okText:Object(t.jsx)(a.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(a.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(D.a,{title:Object(t.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(s.a,{type:"primary",icon:Object(t.jsx)(v.a,{}),danger:!0})})},"delete")]}}];return Object(t.jsxs)(h.a.Fragment,{children:[Object(t.jsx)(te.a,{headerTitle:J.formatMessage({id:"menu.settings"}),actionRef:E,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[Object(t.jsxs)(s.a,{type:"primary",onClick:function(){I(-1)},children:[Object(t.jsx)(n.a,{})," ",Object(t.jsx)(a.a,{id:"pages.searchTable.new"})]},"primary")]},request:function(P){var B=P.pageSize,ue=P.current,k=P.group;return Object(b.f)({pageSize:B,current:ue,group:k}).then(function(re){return re.success?{data:re.data,total:re.meta.total,success:!0}:[]})},columns:Z}),Object(t.jsx)(_e,{groups:F,id:g,visible:Number.isInteger(g),onVisibleChange:function(P){return P===!1&&I(!1)},onFinish:function(){var R=Object(u.a)(d.a.mark(function P(B){var ue;return d.a.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,Q(J,B,Number(g));case 2:ue=re.sent,ue&&(I(!1),E.current&&E.current.reload());case 4:case"end":return re.stop()}},P)}));return function(P){return R.apply(this,arguments)}}()})]})},je=ce,Be=e("tU7J"),pe=e("wFql"),ge=e("Fghh"),Ee=pe.a.Text,de;(function(N){N.Array="array",N.String="string"})(de||(de={}));var Pe=function(l,m){return m===de.Array?l&&Array.isArray(l)?JSON.stringify(l):"[]":l},Me=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",m=arguments.length>1?arguments[1]:void 0;if(m===de.Array){var g=JSON.parse(l);return g&&Array.isArray(g)?g:[]}return l},ye=function(l){var m=Object(ge.j)(),g=l.visible,I=l.onVisibleChange,$=l.onFinish,O=l.value,F=oe.a.useForm(),H=Object(M.a)(F,1),E=H[0],J=Object(r.useMemo)(function(){return(O.rules||[]).includes(de.Array)?de.Array:de.String},[O.rules]);return Object(r.useEffect)(function(){E.setFieldsValue(Object(K.a)(Object(K.a)({},O),{},{value:Pe(O.value,J)}))},[J,O,E]),Object(t.jsxs)(ne.a,{form:E,title:O.full_key,width:"60vw",visible:g,onVisibleChange:I,onFinish:Object(u.a)(d.a.mark(function Z(){var R;return d.a.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,Object(b.g)({key:O.full_key,value:Me(E.getFieldsValue().value,J)});case 2:if(R=B.sent,!R.success){B.next=6;break}return $(R.success===!0),B.abrupt("return",R.success);case 6:return B.abrupt("return");case 7:case"end":return B.stop()}},Z)})),children:[Object(t.jsxs)(G.a.Group,{children:[Object(t.jsx)(le.a,{disabled:!0,name:"public",label:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"})}),Object(t.jsx)(le.a,{disabled:!0,name:"readonly",label:Object(t.jsx)(a.a,{id:"readonly",defaultMessage:"readonly"})}),Object(t.jsx)(G.a.Item,{shouldUpdate:!0,label:Object(t.jsx)(a.a,{id:"rules",defaultMessage:"rules"}),children:function(){return Object(t.jsx)(Ee,{code:!0,children:JSON.stringify(E.getFieldValue("rules"))})}})]}),J===de.Array?Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(me.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"}),tooltip:"".concat(m.formatMessage({id:"example_json"}),': ["first_field_name", "second_field_name"]')}),Object(t.jsx)(G.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(X.a,{src:JSON.parse(E.getFieldValue("value"))})}catch(R){return Object(t.jsx)(X.a,{src:JSON.parse('{ "error": "cannot parse this array" }')})}}})]}):Object(t.jsx)(Y.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"})})]})},De=ye,Ce=[{title:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"readonly",defaultMessage:"readonly"}),dataIndex:"readonly",hideInForm:!0,hideInSearch:!0,render:function(l,m){return Object(t.jsx)(p.a,{color:m.readonly?"success":"error",children:Object(t.jsx)(a.a,{id:m.readonly?"true":"false",defaultMessage:m.readonly?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(l,m){return Object(t.jsx)(p.a,{color:m.public?"success":"error",children:Object(t.jsx)(a.a,{id:m.public?"true":"false",defaultMessage:m.public?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0}],xe=function N(l,m){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return!l||typeof l!="object"?!1:(Object.keys(l).forEach(function(I){var $=l[I];I===m?g.push(l):typeof $=="object"&&N($,m,g)}),g)},Te=function(l){var m=l.packageName,g=l.values,I=l.onValueUpdated,$=Object(a.i)(),O=Object(r.useState)(),F=Object(M.a)(O,2),H=F[0],E=F[1],J=Object(r.useMemo)(function(){var Z=g[m];return xe(Z,"rules")},[g,m]);return Object(t.jsxs)(h.a.Fragment,{children:[Object(t.jsx)(te.a,{headerTitle:$.formatMessage({id:"menu.settings"}),rowKey:"key",search:{labelWidth:120},dataSource:J,columns:[].concat(Ce,[{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(R,P){return[Object(t.jsx)(D.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(s.a,{type:"primary",icon:Object(t.jsx)(W.a,{}),onClick:function(){return E(P)}})},"edit")]}}])}),H&&Object(t.jsx)(De,{value:H,visible:H!==void 0,onVisibleChange:function(R){return R===!1&&E(void 0)},onFinish:Object(u.a)(d.a.mark(function Z(){return d.a.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:I();case 1:case"end":return P.stop()}},Z)}))})]})},Ae=Te,Ie=function(l){return l.replaceAll("escolalms","").split("_").join("")},Ue=j.default=function(){var N=Object(x.h)(),l=Object(a.i)(),m=N.tab,g=m===void 0?"user_settings":m,I=Object(r.useState)(),$=Object(M.a)(I,2),O=$[0],F=$[1],H=Object(r.useCallback)(function(){Object(b.a)().then(function(E){E.success&&F(E.data)})},[]);return Object(r.useEffect)(function(){H()},[]),O?Object(t.jsx)(A.a,{title:Object(t.jsx)(a.a,{id:"settings"}),header:{breadcrumb:{routes:[{path:"settings",breadcrumbName:l.formatMessage({id:"menu.Settings"})},{path:String(g),breadcrumbName:String(g)}]}},children:Object(t.jsxs)(y.a,{tabs:{type:"card",activeKey:g,onChange:function(J){return a.d.push("/settings/".concat(J))}},children:[Object(t.jsx)(y.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"user.settings"}),children:Object(t.jsx)(je,{})},"user_settings"),Object.keys(O).map(function(E){return Object(t.jsxs)(y.a.TabPane,{tab:Object(t.jsxs)("span",{children:[Object(t.jsx)(a.a,{id:"package"})," ",Ie(E)]}),children:[Object(t.jsx)(Ae,{values:O,packageName:E,onValueUpdated:function(){return H()}}),E]},E)})]})}):Object(t.jsx)(_.a,{})}},etVw:function(ee,j,e){"use strict";var T=e("DZo9"),_=e("8z0m"),M=e("+L6B"),r=e("2/Rp"),h=e("wx14"),y=e("q1tI"),x=e.n(y),a=e("z7Xi"),A=e("WFLz"),b=function(o,z){var D=o.fieldProps,f=o.name,s=o.action,U=o.accept,p=o.listType,c=o.title,K=c===void 0?"\u5355\u51FB\u4E0A\u4F20":c,S=o.max,i=o.icon,u=i===void 0?x.a.createElement(a.a,null):i,C=o.value,d=o.buttonProps,n=o.onChange,te=o.disabled,V=o.proFieldProps,oe=o.fileList,ve=(S===void 0||!C||(C==null?void 0:C.length)<S)&&(V==null?void 0:V.mode)!=="read",ie=(p!=null?p:D==null?void 0:D.listType)==="picture-card";return x.a.createElement(_.a,Object(h.a)({action:s,accept:U,ref:z,name:f||"file",listType:p||"picture",fileList:oe!=null?oe:C},D,{onChange:function(ne){var Y;n==null||n(ne),D==null||(Y=D.onChange)===null||Y===void 0||Y.call(D,ne)}}),ve&&(ie?x.a.createElement("span",null,u," ",K):x.a.createElement(r.a,Object(h.a)({disabled:te||(D==null?void 0:D.disabled)},d),u,K)))};j.a=Object(A.a)(x.a.forwardRef(b),{getValueFromEvent:function(o){return o.fileList}})},hd5d:function(ee,j,e){"use strict";var T=e("9og8"),_=e("WmNS"),M=e.n(_),r=e("q1tI"),h=e.n(r),y=e("3Ef1"),x=e.n(y),a=e("BAh9"),A=e("vtG9"),b=e.n(A),L=e("9kvl"),o=e("nKUr"),z=e.n(o),D=function(s){var U=s.value,p=s.onChange,c=s.directory,K=c===void 0?"/wysiwyg":c,S=Object(L.i)();return Object(o.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(o.jsx)(x.a,{uploadImage:function(){var i=Object(T.a)(M.a.mark(function u(C){var d,n;return M.a.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,Object(a.e)(C,K);case 2:if(d=V.sent,!d.success){V.next=6;break}return n=d.data[0].name.includes("/")?d.data[0].name:"".concat(K).concat(d.data[0].name),V.abrupt("return",Object(a.d)(n,1e3));case 6:throw new Error("Error while uploading");case 7:case"end":return V.stop()}},u)}));return function(u){return i.apply(this,arguments)}}(),defaultValue:U||"",onChange:function(u){return p&&p(u())},placeholder:S.formatMessage({id:"wysiwyg_placeholder"})})})};j.a=D},lLVY:function(ee,j,e){},qFDU:function(ee,j,e){"use strict";var T=e("q1tI"),_=e.n(T);j.a=function(M){var r=M.condition,h=M.children,y=M.wrap;return r?_.a.cloneElement(y(h)):h}},vtG9:function(ee,j,e){}}]);
