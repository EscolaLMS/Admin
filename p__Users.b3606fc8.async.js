(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{"DBJ/":function(N,g,t){"use strict";var W=t("k1fw"),Z=t("y8nQ"),w=t("Vl3Y"),C=t("tJVT"),H=t("etVw"),m=t("q1tI"),se=t.n(m),T=t("9kvl"),P=t("qFDU"),p=t("nKUr"),h=t.n(p);function u(s){var S=s.onChange,A=s.onUpload,x=s.url,a=s.name,L=s.extra,J=s.accept,I=s.data,U=s.wrapInForm,R=U===void 0?!0:U,y=s.title,F=s.formProps,v=s.maxFiles,V=s.clearListAfterUpload,z=s.hideLabel,G=Object(m.useState)(),K=Object(C.a)(G,2),b=K[0],$=K[1],e=Object(T.l)();return I&&I[a]&&delete I[a],Object(p.jsx)(P.a,{condition:R,wrap:function(j){return Object(p.jsx)(w.a,Object(W.a)(Object(W.a)({},F),{},{children:j}))},children:Object(p.jsx)(H.a,{title:y||" ".concat(e.formatMessage({id:"upload_click_here"})),placeholder:e.formatMessage({id:"upload_click_here"}),onChange:function(j){$(j),S&&S(j),j.file.status==="done"&&(A&&A(j.file.response),V&&$(void 0))},label:!z&&Object(p.jsx)(T.a,{id:"upload"}),max:v!=null?v:2,fieldProps:{data:I,accept:J,name:a,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(x),extra:L,fileList:b==null?void 0:b.fileList})})}g.a=u},n6PA:function(N,g,t){},u7Dd:function(N,g,t){"use strict";t.r(g),t.d(g,"TableColumns",function(){return j});var W=t("P2fV"),Z=t("NJEC"),w=t("5Dmo"),C=t("3S7+"),H=t("+L6B"),m=t("2/Rp"),se=t("miYZ"),T=t("tsqr"),P=t("tJVT"),p=t("+BJd"),h=t("mr32"),u=t("qLMh"),s=t("9og8"),S=t("4KAj"),A=t("xvlK"),x=t("q1tI"),a=t("9kvl"),L=t("55Ip"),J=t("tMyG"),I=t("Qiat"),U=t("sWYD"),R=t("VK58"),y=t("k1fw");function F(O,i){return v.apply(this,arguments)}function v(){return v=Object(s.a)(Object(u.a)().mark(function O(i,r){return Object(u.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(a.i)("/api/admin/csv/users",Object(y.a)({params:Object(y.a)(Object(y.a)({},i),{},{per_page:i&&i.pageSize,page:i&&i.current}),method:"GET",headers:{accept:"application/csv"},useCache:!1},r||{})));case 1:case"end":return c.stop()}},O)})),v.apply(this,arguments)}var V=t("G3dp"),z=t("/MfK"),G=t("mGZj"),K=t("DBJ/"),b=t("nhC9"),$=t("n6PA"),e=t("nKUr"),Q=function(){var O=Object(s.a)(Object(u.a)().mark(function i(r){return Object(u.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(R.c)(r);case 2:return c.abrupt("return",!0);case 3:case"end":return c.stop()}},i)}));return function(r){return O.apply(this,arguments)}}(),j=[{title:Object(e.jsx)(a.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0},{title:Object(e.jsx)(a.a,{id:"created_at",defaultMessage:"created_at"}),dataIndex:"created_at",hideInSearch:!0,sorter:!0,render:function(i,r){return r.created_at&&Object(U.a)(new Date(r.created_at),G.a)}},{title:Object(e.jsx)(a.a,{id:"first_name",defaultMessage:"first_name"}),dataIndex:"first_name",hideInSearch:!0,sorter:!0},{title:Object(e.jsx)(a.a,{id:"last_name",defaultMessage:"last_name"}),dataIndex:"last_name",hideInSearch:!0,sorter:!0},{title:Object(e.jsx)(a.a,{id:"email",defaultMessage:"email"}),dataIndex:"email",hideInSearch:!0,sorter:!0},{title:Object(e.jsx)(a.a,{id:"search",defaultMessage:"search"}),dataIndex:"search",hideInSearch:!1,hideInTable:!0,hideInDescriptions:!0,tooltip:Object(e.jsx)(a.a,{id:"search_tooltip_1"})},{title:Object(e.jsx)(a.a,{id:"is_active"}),dataIndex:"is_active",hideInSearch:!0,sorter:!0,render:function(i,r){return[Object(e.jsx)(h.a,{color:r.is_active?"green":"red",children:r.is_active?Object(e.jsx)(a.a,{id:"Active"}):Object(e.jsx)(a.a,{id:"Inactive"})},"is_active")]}},{title:Object(e.jsx)(a.a,{id:"email_verified",defaultMessage:"email_verified"}),dataIndex:"email_verified",hideInSearch:!0,render:function(i,r){return[Object(e.jsx)(h.a,{color:r.email_verified?"green":"red",children:r.email_verified?Object(e.jsx)(a.a,{id:"verified"}):Object(e.jsx)(a.a,{id:"unverified"})},"email_verified")]}},{title:Object(e.jsx)(a.a,{id:"created_after",defaultMessage:"Created After"}),key:"from",dataIndex:"from",valueType:"date",hideInTable:!0,hideInDescriptions:!0},{title:Object(e.jsx)(a.a,{id:"created_before",defaultMessage:"Created Before"}),key:"to",dataIndex:"to",valueType:"date",hideInTable:!0,hideInDescriptions:!0},{title:Object(e.jsx)(a.a,{id:"role",defaultMessage:"role"}),dataIndex:"role",hideInTable:!0,valueEnum:{student:{text:Object(e.jsx)(h.a,{children:Object(e.jsx)(a.a,{id:"student",defaultMessage:"student"})}),status:"student"},admin:{text:Object(e.jsx)(h.a,{children:Object(e.jsx)(a.a,{id:"admin",defaultMessage:"admin"})}),status:"admin"},tutor:{text:Object(e.jsx)(h.a,{children:Object(e.jsx)(a.a,{id:"tutor",defaultMessage:"tutor"})}),status:"tutor"}}},{title:Object(e.jsx)(a.a,{id:"gt_last_login_day",defaultMessage:">= Login last n days"}),key:"gt_last_login_day",dataIndex:"gt_last_login_day",valueType:"digit",hideInTable:!0,hideInDescriptions:!0},{title:Object(e.jsx)(a.a,{id:"lt_last_login_day",defaultMessage:"<= Login last n days"}),key:"lt_last_login_day",dataIndex:"lt_last_login_day",valueType:"digit",hideInTable:!0,hideInDescriptions:!0},{title:Object(e.jsx)(a.a,{id:"roles",defaultMessage:"roles"}),dataIndex:"roles",hideInSearch:!0,render:function(i,r){return r.roles.map(function(M){return Object(e.jsx)(h.a,{children:M},M)})}}],re=function(){var i=Object(x.useRef)(),r=Object(a.l)(),M=Object(x.useState)({}),c=Object(P.a)(M,2),X=c[0],ne=c[1],ie=Object(x.useState)(!1),_=Object(P.a)(ie,2),de=_[0],k=_[1],le=Object(x.useCallback)(Object(s.a)(Object(u.a)().mark(function D(){var n,d,o;return Object(u.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return k(!0),l.prev=1,l.next=4,F(X);case 4:n=l.sent,n&&(d="data:text/csv;charset=utf-8,"+n,o=document.createElement("a"),o.href=d,o.download="users.csv",document.body.appendChild(o),o.click(),document.body.removeChild(o)),l.next=11;break;case 8:l.prev=8,l.t0=l.catch(1),console.error(l.t0);case 11:return l.prev=11,k(!1),l.finish(11);case 14:case"end":return l.stop()}},D,null,[[1,8,11,14]])})),[X]);return Object(e.jsx)(J.a,{children:Object(e.jsxs)(b.a,{tabs:{type:"card",activeKey:"list",onChange:function(n){switch(n){case"list":return a.f.push("/users");case"fields":return a.f.push("/users/fields");default:return a.f.push("/users/".concat(n))}}},children:[Object(e.jsx)(b.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"list"}),children:Object(e.jsx)(I.a,{headerTitle:r.formatMessage({id:"menu.Users",defaultMessage:"users"}),actionRef:i,rowKey:"key",search:{layout:"vertical"},toolBarRender:function(){return[Object(e.jsx)(K.a,{title:r.formatMessage({id:"import_users"}),url:"/api/admin/csv/users",name:"file",accept:".csv",data:{return_url:"".concat(window.location.origin,"/#/user/reset-password")},onChange:function(d){d.file.status==="done"&&d.file.response&&d.file.response.success&&T.b.success(d.file.response.message),d.file.response&&d.file.status==="error"&&(T.b.error(d.file.response.message),console.error(d.file.response))}},"upload"),Object(e.jsxs)(m.a,{loading:de,type:"primary",onClick:function(){return le()},children:[Object(e.jsx)(S.a,{})," ",Object(e.jsx)(a.a,{id:"export",defaultMessage:"export"})]},"primary"),Object(e.jsx)(L.a,{to:"/users/list/new",children:Object(e.jsxs)(m.a,{type:"primary",children:[Object(e.jsx)(A.a,{})," ",Object(e.jsx)(a.a,{id:"new",defaultMessage:"new"})]},"primary")},"link")]},request:function(n,d){var o=n.pageSize,E=n.current,l=n.search,f=n.role,q=n.from,ee=n.to,te=n.gt_last_login_day,ae=n.lt_last_login_day;ne({pageSize:o,current:E,search:l,role:f,from:q,to:ee,gt_last_login_day:te,lt_last_login_day:ae});var B=d&&Object.entries(d)[0];return Object(R.n)({per_page:o,page:E,search:l,role:f||void 0,from:q,to:ee,gt_last_login_day:te,lt_last_login_day:ae,order_by:B&&B[0],order:B?B[1]==="ascend"?"ASC":"DESC":void 0}).then(function(Y){return Y.success?{data:Y.data,total:Y.meta.total,success:!0}:[]})},columns:[].concat(j,[{hideInSearch:!0,title:Object(e.jsx)(a.a,{id:"pages.searchTable.titleOption"}),dataIndex:"option",valueType:"option",render:function(n,d){return[Object(e.jsx)(L.a,{to:"/users/".concat(d.id,"/user_info"),children:Object(e.jsx)(C.a,{title:Object(e.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(e.jsx)(m.a,{type:"primary",icon:Object(e.jsx)(V.a,{})})})},"edit"),Object(e.jsx)(Z.a,{title:Object(e.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(s.a)(Object(u.a)().mark(function o(){var E;return Object(u.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Q(d.id);case 2:E=f.sent,E&&i.current&&i.current.reload();case 4:case"end":return f.stop()}},o)})),okText:Object(e.jsx)(a.a,{id:"yes"}),cancelText:Object(e.jsx)(a.a,{id:"no"}),children:Object(e.jsx)(C.a,{title:Object(e.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(e.jsx)(m.a,{type:"primary",icon:Object(e.jsx)(z.a,{}),danger:!0})})},"delete")]}}])})},"list"),Object(e.jsx)(b.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"ModelFields"})},"fields")]})})},ce=g.default=re}}]);
