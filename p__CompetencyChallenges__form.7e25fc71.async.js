(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[4173,2803,8047],{64789:function(De,Oe,d){"use strict";d.d(Oe,{Z:function(){return b}});var xe=d(1413),u=d(67294),I={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},E=I,e=d(84089),w=function(ie,_){return u.createElement(e.Z,(0,xe.Z)((0,xe.Z)({},ie),{},{ref:_,icon:E}))},k=u.forwardRef(w),b=k},88280:function(De,Oe,d){"use strict";d.d(Oe,{Z:function(){return mt}});var xe=d(4942),u=d(97685),I=d(45987),E=d(74165),e=d(15861),w=d(1413),k=d(87462),b=d(67294),P=d(42110),ie=d(32867),_=function(pe,be){return b.createElement(ie.Z,(0,k.Z)({},pe,{ref:be,icon:P.Z}))},Q=b.forwardRef(_),se=Q,He=d(97462),fe=d(952),ut=d(10915),We=d(48171),ct=d(53914),Ke=d(22270),$e=d(60249),nt=d(14726),ke=d(75842),Ee=d(21770),Je=d(88306),Ye=d(8880),c=d(7807),ne=d(85893),dt=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef"],ft=["record","position","creatorButtonText","newRecordType","parentKey","style"],Xe=b.createContext(void 0);function at(f){var pe=f.children,be=f.record,Ne=f.position,we=f.newRecordType,me=f.parentKey,ve=(0,b.useContext)(Xe);return b.cloneElement(pe,(0,w.Z)((0,w.Z)({},pe.props),{},{onClick:function(){var he=(0,e.Z)((0,E.Z)().mark(function _e(et){var Me,Pe,je,Re;return(0,E.Z)().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,(Me=(Pe=pe.props).onClick)===null||Me===void 0?void 0:Me.call(Pe,et);case 2:if(Re=re.sent,Re!==!1){re.next=5;break}return re.abrupt("return");case 5:ve==null||(je=ve.current)===null||je===void 0||je.addEditRecord(be,{position:Ne,newRecordType:we,parentKey:me});case 6:case"end":return re.stop()}},_e)}));function Ze(_e){return he.apply(this,arguments)}return Ze}()}))}function qe(f){var pe,be,Ne=(0,ut.YB)(),we=f.onTableChange,me=f.maxLength,ve=f.formItemProps,he=f.recordCreatorProps,Ze=f.rowKey,_e=f.controlled,et=f.defaultValue,Me=f.onChange,Pe=f.editableFormRef,je=(0,I.Z)(f,dt),Re=(0,b.useRef)(void 0),ze=(0,b.useRef)(),re=(0,b.useRef)();(0,b.useImperativeHandle)(je.actionRef,function(){return ze.current},[ze.current]);var vt=(0,Ee.Z)(function(){return f.value||et||[]},{value:f.value,onChange:f.onChange}),it=(0,u.Z)(vt,2),U=it[0],ht=it[1],Te=b.useMemo(function(){return typeof Ze=="function"?Ze:function(F,B){return F[Ze]||B}},[Ze]),ae=(0,We.J)(function(F){if(typeof F=="number"&&!f.name){if(F>=U.length)return F;var B=U&&U[F];return Te==null?void 0:Te(B,F)}if((typeof F=="string"||F>=U.length)&&f.name){var y=U.findIndex(function(x,A){var Z;return(Te==null||(Z=Te(x,A))===null||Z===void 0?void 0:Z.toString())===(F==null?void 0:F.toString())});if(y!==-1)return y}return F});(0,b.useImperativeHandle)(Pe,function(){var F=function(x){var A,Z;if(x==null)throw new Error("rowIndex is required");var T=ae(x),N=[f.name,(A=T==null?void 0:T.toString())!==null&&A!==void 0?A:""].flat(1).filter(Boolean);return(Z=re.current)===null||Z===void 0?void 0:Z.getFieldValue(N)},B=function(){var x,A=[f.name].flat(1).filter(Boolean);if(Array.isArray(A)&&A.length===0){var Z,T=(Z=re.current)===null||Z===void 0?void 0:Z.getFieldsValue();return Array.isArray(T)?T:Object.keys(T).map(function(N){return T[N]})}return(x=re.current)===null||x===void 0?void 0:x.getFieldValue(A)};return(0,w.Z)((0,w.Z)({},re.current),{},{getRowData:F,getRowsData:B,setRowData:function(x,A){var Z,T;if(x==null)throw new Error("rowIndex is required");var N=ae(x),G=[f.name,(Z=N==null?void 0:N.toString())!==null&&Z!==void 0?Z:""].flat(1).filter(Boolean),Y=Object.assign({},(0,w.Z)((0,w.Z)({},F(x)),A||{})),V=(0,Ye.Z)({},G,Y);return(T=re.current)===null||T===void 0||T.setFieldsValue(V),!0}})},[ae,f.name,re.current]),(0,b.useEffect)(function(){f.controlled&&(U||[]).forEach(function(F,B){var y;(y=re.current)===null||y===void 0||y.setFieldsValue((0,xe.Z)({},"".concat(Te(F,B)),F))},{})},[(0,ct.ZP)(U),f.controlled]),(0,b.useEffect)(function(){if(f.name){var F;re.current=f==null||(F=f.editable)===null||F===void 0?void 0:F.form}},[(pe=f.editable)===null||pe===void 0?void 0:pe.form,f.name]);var D=he||{},j=D.record,J=D.position,K=D.creatorButtonText,ee=D.newRecordType,q=D.parentKey,H=D.style,le=(0,I.Z)(D,ft),ge=J==="top",W=(0,b.useMemo)(function(){return typeof me=="number"&&me<=(U==null?void 0:U.length)?!1:he!==!1&&(0,ne.jsx)(at,{record:(0,Ke.h)(j,U==null?void 0:U.length,U)||{},position:J,parentKey:(0,Ke.h)(q,U==null?void 0:U.length,U),newRecordType:ee,children:(0,ne.jsx)(nt.ZP,(0,w.Z)((0,w.Z)({type:"dashed",style:(0,w.Z)({display:"block",margin:"10px 0",width:"100%"},H),icon:(0,ne.jsx)(se,{})},le),{},{children:K||Ne.getMessage("editableTable.action.add","\u6DFB\u52A0\u4E00\u884C\u6570\u636E")}))})},[he,me,U==null?void 0:U.length]),ue=(0,b.useMemo)(function(){return W?ge?{components:{header:{wrapper:function(B){var y,x=B.className,A=B.children;return(0,ne.jsxs)("thead",{className:x,children:[A,(0,ne.jsxs)("tr",{style:{position:"relative"},children:[(0,ne.jsx)("td",{colSpan:0,style:{visibility:"hidden"},children:W}),(0,ne.jsx)("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:(y=je.columns)===null||y===void 0?void 0:y.length,children:W})]})]})}}}}:{tableViewRender:function(B,y){var x,A;return(0,ne.jsxs)(ne.Fragment,{children:[(x=(A=f.tableViewRender)===null||A===void 0?void 0:A.call(f,B,y))!==null&&x!==void 0?x:y,W]})}}:{}},[ge,W]),oe=(0,w.Z)({},f.editable),ce=(0,We.J)(function(F,B){var y,x,A;if((y=f.editable)===null||y===void 0||(x=y.onValuesChange)===null||x===void 0||x.call(y,F,B),(A=f.onValuesChange)===null||A===void 0||A.call(f,B,F),f.controlled){var Z;f==null||(Z=f.onChange)===null||Z===void 0||Z.call(f,B)}});return(f!=null&&f.onValuesChange||(be=f.editable)!==null&&be!==void 0&&be.onValuesChange||f.controlled&&f!==null&&f!==void 0&&f.onChange)&&(oe.onValuesChange=ce),(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(Xe.Provider,{value:ze,children:(0,ne.jsx)(c.Z,(0,w.Z)((0,w.Z)((0,w.Z)({search:!1,options:!1,pagination:!1,rowKey:Ze,revalidateOnFocus:!1},je),ue),{},{tableLayout:"fixed",actionRef:ze,onChange:we,editable:(0,w.Z)((0,w.Z)({},oe),{},{formProps:(0,w.Z)({formRef:re},oe.formProps)}),dataSource:U,onDataSourceChange:function(B){if(ht(B),f.name&&J==="top"){var y,x=(0,Ye.Z)({},[f.name].flat(1).filter(Boolean),B);(y=re.current)===null||y===void 0||y.setFieldsValue(x)}}}))}),f.name?(0,ne.jsx)(He.Z,{name:[f.name],children:function(B){var y,x;if(!Re.current)return Re.current=U,null;var A=(0,Je.Z)(B,[f.name].flat(1)),Z=A==null?void 0:A.find(function(T,N){var G;return!(0,$e.A)(T,(G=Re.current)===null||G===void 0?void 0:G[N])});return Re.current=U,Z&&(f==null||(y=f.editable)===null||y===void 0||(x=y.onValuesChange)===null||x===void 0||x.call(y,Z,A)),null}}):null]})}function Le(f){var pe=fe.ZP.useFormInstance();return f.name?(0,ne.jsx)(ke.Z.Item,(0,w.Z)((0,w.Z)({style:{maxWidth:"100%"}},f==null?void 0:f.formItemProps),{},{name:f.name,shouldUpdate:function(Ne,we){var me=[f.name].flat(1);try{return JSON.stringify((0,Je.Z)(Ne,me))!==JSON.stringify((0,Je.Z)(we,me))}catch(ve){return!0}},children:(0,ne.jsx)(qe,(0,w.Z)((0,w.Z)({tableLayout:"fixed",scroll:{x:"max-content"}},f),{},{editable:(0,w.Z)((0,w.Z)({},f.editable),{},{form:pe})}))})):(0,ne.jsx)(qe,(0,w.Z)({tableLayout:"fixed",scroll:{x:"max-content"}},f))}Le.RecordCreator=at;var mt=Le},49252:function(De){"use strict";function Oe(u,I){function E(){this.constructor=u}E.prototype=I.prototype,u.prototype=new E}function d(u,I,E,e){this.message=u,this.expected=I,this.found=E,this.location=e,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,d)}function xe(u,I){I=I!==void 0?I:{};var E,e={},w={GIFTQuestions:kt},k=kt,b=R("Category"),P=z("$",!1),ie="CATEGORY:",_=z("CATEGORY:",!1),Q=R("Description"),se=z("{",!1),He=z("}",!1),fe=function(r,n,i,l){var m=l!==null,h=n?n.text+(m?" ":""):"",p=n&&n.format||l&&l.format||"moodle",g=h+(m?"_____ "+l.text:""),o={type:i.type,title:r,stem:{format:p,text:g},hasEmbeddedAnswers:m};return o=function(v,C){switch(v.globalFeedback=C.globalFeedback,v.type){case"TF":v.isTrue=C.isTrue,v.incorrectFeedback=C.feedback[1],v.correctFeedback=C.feedback[2];break;case"MC":case"Numerical":case"Short":v.choices=C.choices;break;case"Matching":v.matchPairs=C.matchPairs}return v.type=="MC"&&function(O){for(var $=!0,X=0;X<O.length;X++)$&=O[X].isCorrect;return $}(v.choices)&&(v.type="Short"),v.id=jt,v.tags=tt,v}(o,i),fr(),o},ut=R(`{= match1 -> Match1
...}`),We=R("matches"),ct=R("match"),Ke=z("=",!1),$e="->",nt=z("->",!1),ke=R("{T} or {F} or {TRUE} or {FALSE}"),Ee="TRUE",Je=z("TRUE",!1),Ye=z("T",!1),c="FALSE",ne=z("FALSE",!1),dt=z("F",!1),ft=R("{=correct choice ~incorrect choice ... }"),Xe=R("Choices"),at=R("Choice"),qe=/^[=~]/,Le=gt(["=","~"],!1,!1),mt=R("(weight)"),f=z("%",!1),pe=/^[\-]/,be=gt(["-"],!1,!1),Ne=R("(percent)"),we="100",me=z("100",!1),ve=/^[0-9]/,he=gt([["0","9"]],!1,!1),Ze=/^[.]/,_e=gt(["."],!1,!1),et=R("(feedback)"),Me="#",Pe=z("#",!1),je=z("###",!1),Re=R("Essay question { ... }"),ze=R("Single short answer { ... }"),re=R("{#... }"),vt=R("Numerical Answers"),it=R("Multiple Numerical Choices"),U=R("Numerical Choice"),ht=R("Single numeric answer"),Te=R("(number with range)"),ae=":",D=z(":",!1),j=R("(number with high-low)"),J="..",K=z("..",!1),ee=R("(number answer)"),q=R(":: Title ::"),H="::",le=z("::",!1),ge=R("Question stem"),W=function(r){var n;return n=r.format,Nt=n,r},ue=R("(blank lines separator)"),oe=R("(blank lines)"),ce=R("blank line"),F=R("(Title text)"),B=R("(text character)"),y=R("format"),x=z("[",!1),A="html",Z=z("html",!1),T="markdown",N=z("markdown",!1),G="plain",Y=z("plain",!1),V="moodle",Ce=z("moodle",!1),ye=z("]",!1),Qe=R("(escape character)"),te=z("\\",!1),Ue=R("escape sequence"),Be=z("~",!1),Ge=R(""),Se={type:"any"},Ft=function(){return Gt()},L=R("(formatted text excluding '->'"),At=function(r,n){return{format:r!==null?r:zt(),text:r!=="html"?dr(n.join("")):n.join("").replace(/\r\n/g,`
`)}},wt=R("(formatted text)"),mr=R("(unformatted text)"),vr=R("(category text)"),Bt=".",Kt=z(".",!1),Lt="####",hr=z("####",!1),gr=R("(single line whitespace)"),yr=R("(multiple line whitespace)"),Vt=z(" ",!1),Qt=R("(comment)"),Zt="//",Ut=z("//",!1),Mt=/^[^\n\r]/,Pt=gt([`
`,"\r"],!0,!1),pr=R("(space)"),xr=z("	",!1),Cr=R("(end of line)"),br=z(`\r
`,!1),jr=z(`
`,!1),Fr=z("\r",!1),t=0,M=0,Rt=[{line:1,column:1}],Ve=0,It=[],a=0;if("startRule"in I){if(!(I.startRule in w))throw new Error(`Can't start parsing from rule "`+I.startRule+'".');k=w[I.startRule]}function Gt(){return u.substring(M,t)}function z(r,n){return{type:"literal",text:r,ignoreCase:n}}function gt(r,n,i){return{type:"class",parts:r,inverted:n,ignoreCase:i}}function R(r){return{type:"other",description:r}}function Ht(r){var n,i=Rt[r];if(i)return i;for(n=r-1;!Rt[n];)n--;for(i={line:(i=Rt[n]).line,column:i.column};n<r;)u.charCodeAt(n)===10?(i.line++,i.column=1):i.column++,n++;return Rt[r]=i,i}function Wt(r,n){var i=Ht(r),l=Ht(n);return{start:{offset:r,line:i.line,column:i.column},end:{offset:n,line:l.line,column:l.column}}}function s(r){t<Ve||(t>Ve&&(Ve=t,It=[]),It.push(r))}function Ar(r,n,i){return new d(d.buildMessage(r,n),r,n,i)}function kt(){var r,n,i;if(r=t,n=[],(i=Jt())===e&&(i=Yt())===e&&(i=Xt()),i!==e)for(;i!==e;)n.push(i),(i=Jt())===e&&(i=Yt())===e&&(i=Xt());else n=e;return n!==e&&(i=S())!==e&&Et()!==e?(M=r,r=n=n):(t=r,r=e),r}function Jt(){var r,n,i,l;return a++,r=t,Ot()!==e&&Et()!==e?(u.charCodeAt(t)===36?(n="$",t++):(n=e,a===0&&s(P)),n!==e?(u.substr(t,9)===ie?(i=ie,t+=9):(i=e,a===0&&s(_)),i!==e&&S()!==e?(l=function(){var m,h,p,g,o;for(a++,m=t,h=[],p=t,g=t,a++,o=Ie(),a--,o===e?g=void 0:(t=g,g=e),g!==e?(u.length>t?(o=u.charAt(t),t++):(o=e,a===0&&s(Se)),o!==e?p=g=[g,o]:(t=p,p=e)):(t=p,p=e);p!==e;)h.push(p),p=t,g=t,a++,o=Ie(),a--,o===e?g=void 0:(t=g,g=e),g!==e?(u.length>t?(o=u.charAt(t),t++):(o=e,a===0&&s(Se)),o!==e?p=g=[g,o]:(t=p,p=e)):(t=p,p=e);return h!==e?(p=t,a++,(g=Ie())===e&&(g=ur()),a--,g!==e?(t=p,p=void 0):p=e,p!==e?(M=m,m=h=h.flat().join("")):(t=m,m=e)):(t=m,m=e),a--,m===e&&(h=e,a===0&&s(vr)),m}(),l!==e&&pt()!==e?(M=r,r={type:"Category",title:l}):(t=r,r=e)):(t=r,r=e)):(t=r,r=e)):(t=r,r=e),a--,r===e&&a===0&&s(b),r}function Yt(){var r,n,i,l,m;if(a++,r=t,(n=Ot())!==e)if(Et()!==e){for(i=[],l=ot();l!==e;)i.push(l),l=ot();i!==e?((l=nr())===e&&(l=null),l!==e&&S()!==e&&(m=Dt())!==e&&pt()!==e?(M=r,n=function(h,p){var g={id:jt,tags:tt,type:"Description",title:h,stem:p,hasEmbeddedAnswers:!1};return fr(),jt=null,tt=null,g}(l,m),r=n):(t=r,r=e)):(t=r,r=e)}else t=r,r=e;else t=r,r=e;return a--,r===e&&(n=e,a===0&&s(Q)),r}function Xt(){var r,n,i,l,m,h,p,g;if(r=t,Ot()!==e)if(Et()!==e){for(n=[],i=ot();i!==e;)n.push(i),i=ot();n!==e?((i=nr())===e&&(i=null),i!==e&&S()!==e?((l=Dt())===e&&(l=null),l!==e&&S()!==e?(u.charCodeAt(t)===123?(m="{",t++):(m=e,a===0&&s(se)),m!==e&&S()!==e?(h=function(){var o,v,C;return a++,o=t,v=function(){var O,$,X;if(a++,O=t,$=[],(X=qt())!==e)for(;X!==e;)$.push(X),X=qt();else $=e;return $!==e&&(M=O,$=$),a--,(O=$)===e&&($=e,a===0&&s(We)),O}(),v!==e&&S()!==e?((C=lt())===e&&(C=null),C!==e&&S()!==e?(M=o,o=v={type:"Matching",matchPairs:v,globalFeedback:C}):(t=o,o=e)):(t=o,o=e),a--,o===e&&(v=e,a===0&&s(ut)),o}(),h===e&&(h=function(){var o,v,C,O,$,X;return a++,o=t,v=function(){var Fe,Ae;return Fe=t,Ae=function(){var rt,de;return rt=t,u.substr(t,4)===Ee?(de=Ee,t+=4):(de=e,a===0&&s(Je)),de===e&&(u.charCodeAt(t)===84?(de="T",t++):(de=e,a===0&&s(Ye))),de!==e&&(M=rt,de=!0),rt=de}(),Ae===e&&(Ae=function(){var rt,de;return rt=t,u.substr(t,5)===c?(de=c,t+=5):(de=e,a===0&&s(ne)),de===e&&(u.charCodeAt(t)===70?(de="F",t++):(de=e,a===0&&s(dt))),de!==e&&(M=rt,de=!1),rt=de}()),Ae!==e&&(M=Fe,Ae=Ae),Fe=Ae}(),v!==e&&S()!==e?(C=t,(O=S())!==e?(($=yt())===e&&($=null),$!==e?((X=yt())===e&&(X=null),X!==e?C=O=[O,$,X]:(t=C,C=e)):(t=C,C=e)):(t=C,C=e),C!==e&&(O=S())!==e?(($=lt())===e&&($=null),$!==e?(M=o,o=v={type:"TF",isTrue:v,feedback:C,globalFeedback:$}):(t=o,o=e)):(t=o,o=e)):(t=o,o=e),a--,o===e&&(v=e,a===0&&s(ke)),o}(),h===e&&(h=function(){var o,v,C;return a++,o=t,v=function(){var O,$,X;if(a++,O=t,$=[],(X=_t())!==e)for(;X!==e;)$.push(X),X=_t();else $=e;return $!==e&&(M=O,$=$),a--,(O=$)===e&&($=e,a===0&&s(Xe)),O}(),v!==e&&S()!==e?((C=lt())===e&&(C=null),C!==e&&S()!==e?(M=o,o=v={type:"MC",choices:v,globalFeedback:C}):(t=o,o=e)):(t=o,o=e),a--,o===e&&(v=e,a===0&&s(ft)),o}(),h===e&&(h=function(){var o,v,C,O;return a++,o=t,u.charCodeAt(t)===35?(v=Me,t++):(v=e,a===0&&s(Pe)),v!==e&&S()!==e?(C=function(){var $;return a++,$=function(){var X,Fe,Ae;if(a++,X=t,Fe=[],(Ae=tr())!==e)for(;Ae!==e;)Fe.push(Ae),Ae=tr();else Fe=e;return Fe!==e&&(M=X,Fe=Fe),a--,(X=Fe)===e&&(Fe=e,a===0&&s(it)),X}(),$===e&&($=rr()),a--,$===e&&a===0&&s(vt),$}(),C!==e&&S()!==e?((O=lt())===e&&(O=null),O!==e?(M=o,o=v={type:"Numerical",choices:C,globalFeedback:O}):(t=o,o=e)):(t=o,o=e)):(t=o,o=e),a--,o===e&&(v=e,a===0&&s(re)),o}(),h===e&&(h=function(){var o,v,C,O;a++,o=t,(v=Ct())!==e&&S()!==e?((C=yt())===e&&(C=null),C!==e&&S()!==e?((O=lt())===e&&(O=null),O!==e&&S()!==e?(M=o,$=O,(X=[]).push({isCorrect:!0,text:v,feedback:C,weight:null}),o=v={type:"Short",choices:X,globalFeedback:$}):(t=o,o=e)):(t=o,o=e)):(t=o,o=e);var $,X;return a--,o===e&&(v=e,a===0&&s(ze)),o}(),h===e&&(h=function(){var o,v;return a++,o=t,e!==""&&S()!==e?((v=lt())===e&&(v=null),v!==e&&S()!==e?(M=o,o={type:"Essay",globalFeedback:v}):(t=o,o=e)):(t=o,o=e),a--,o===e&&a===0&&s(Re),o}()))))),h!==e&&S()!==e?(u.charCodeAt(t)===125?(p="}",t++):(p=e,a===0&&s(He)),p!==e&&S()!==e?(g=function(){var o,v,C,O;if(a++,o=t,u.substr(t,2)===Zt?(v=Zt,t+=2):(v=e,a===0&&s(Ut)),v!==e){for(C=[],Mt.test(u.charAt(t))?(O=u.charAt(t),t++):(O=e,a===0&&s(Pt));O!==e;)C.push(O),Mt.test(u.charAt(t))?(O=u.charAt(t),t++):(O=e,a===0&&s(Pt));C!==e?(M=o,o=v=null):(t=o,o=e)}else t=o,o=e;return a--,o===e&&(v=e,a===0&&s(Qt)),o}(),g===e&&(g=Dt()),g===e&&(g=null),g!==e&&pt()!==e?(M=r,r=fe(i,l,h,g)):(t=r,r=e)):(t=r,r=e)):(t=r,r=e)):(t=r,r=e)):(t=r,r=e)):(t=r,r=e)):(t=r,r=e)}else t=r,r=e;else t=r,r=e;return r}function qt(){var r,n,i,l,m,h,p;return a++,r=t,S()!==e?(u.charCodeAt(t)===61?(n="=",t++):(n=e,a===0&&s(Ke)),n!==e&&S()!==e?(i=function(){var g,o,v,C;if(a++,g=t,(o=lr())===e&&(o=null),o!==e)if(S()!==e){if(v=[],(C=ir())!==e)for(;C!==e;)v.push(C),C=ir();else v=e;v!==e?(M=g,g=o=At(o,v)):(t=g,g=e)}else t=g,g=e;else t=g,g=e;return a--,g===e&&(o=e,a===0&&s(L)),g}(),i===e&&(i=null),i!==e&&S()!==e?(u.substr(t,2)===$e?(l=$e,t+=2):(l=e,a===0&&s(nt)),l!==e&&S()!==e?(m=function(){var g,o,v;if(a++,g=t,o=[],(v=St())!==e)for(;v!==e;)o.push(v),v=St();else o=e;return o!==e&&(M=g,o=dr(o.join(""))),a--,(g=o)===e&&(o=e,a===0&&s(mr)),g}(),m!==e&&S()!==e?(M=r,p=m,r={subquestion:{format:(h=i)!==null?h.format:zt(),text:h!==null?h.text:""},subanswer:p}):(t=r,r=e)):(t=r,r=e)):(t=r,r=e)):(t=r,r=e)):(t=r,r=e),a--,r===e&&a===0&&s(ct),r}function _t(){var r,n,i,l,m,h,p,g,o,v,C;return a++,r=t,S()!==e?(n=t,qe.test(u.charAt(t))?(i=u.charAt(t),t++):(i=e,a===0&&s(Le)),i!==e&&(l=S())!==e?((m=er())===e&&(m=null),m!==e&&(h=S())!==e&&(p=Ct())!==e?n=i=[i,l,m,h,p]:(t=n,n=e)):(t=n,n=e),n!==e?((i=yt())===e&&(i=null),i!==e&&(l=S())!==e?(M=r,o=i,v=(g=n)[2],C=g[4],r={isCorrect:g[0]=="=",weight:v,text:C,feedback:o}):(t=r,r=e)):(t=r,r=e)):(t=r,r=e),a--,r===e&&a===0&&s(at),r}function er(){var r,n,i,l,m;return a++,r=t,u.charCodeAt(t)===37?(n="%",t++):(n=e,a===0&&s(f)),n!==e?(i=t,pe.test(u.charAt(t))?(l=u.charAt(t),t++):(l=e,a===0&&s(be)),l===e&&(l=null),l!==e?(m=function(){var h,p,g,o,v,C;if(a++,u.substr(t,3)===we?(h=we,t+=3):(h=e,a===0&&s(me)),h===e)if(h=t,ve.test(u.charAt(t))?(p=u.charAt(t),t++):(p=e,a===0&&s(he)),p!==e)if(ve.test(u.charAt(t))?(g=u.charAt(t),t++):(g=e,a===0&&s(he)),g===e&&(g=null),g!==e)if(Ze.test(u.charAt(t))?(o=u.charAt(t),t++):(o=e,a===0&&s(_e)),o===e&&(o=null),o!==e){for(v=[],ve.test(u.charAt(t))?(C=u.charAt(t),t++):(C=e,a===0&&s(he));C!==e;)v.push(C),ve.test(u.charAt(t))?(C=u.charAt(t),t++):(C=e,a===0&&s(he));v!==e?(M=h,h=p=Gt()):(t=h,h=e)}else t=h,h=e;else t=h,h=e;else t=h,h=e;return a--,h===e&&(p=e,a===0&&s(Ne)),h}(),m!==e?i=l=[l,m]:(t=i,i=e)):(t=i,i=e),i!==e?(u.charCodeAt(t)===37?(l="%",t++):(l=e,a===0&&s(f)),l!==e?(M=r,r=n=parseFloat(i.join(""))):(t=r,r=e)):(t=r,r=e)):(t=r,r=e),a--,r===e&&(n=e,a===0&&s(mt)),r}function yt(){var r,n,i,l,m;return a++,r=t,u.charCodeAt(t)===35?(n=Me,t++):(n=e,a===0&&s(Pe)),n!==e?(i=t,a++,u.substr(t,3)==="###"?(l="###",t+=3):(l=e,a===0&&s(je)),a--,l===e?i=void 0:(t=i,i=e),i!==e&&(l=S())!==e?((m=Ct())===e&&(m=null),m!==e?(M=r,r=n=m):(t=r,r=e)):(t=r,r=e)):(t=r,r=e),a--,r===e&&(n=e,a===0&&s(et)),r}function tr(){var r,n,i,l,m,h,p,g,o,v;return a++,r=t,S()!==e?(n=t,qe.test(u.charAt(t))?(i=u.charAt(t),t++):(i=e,a===0&&s(Le)),i!==e?((l=er())===e&&(l=null),l!==e?((m=rr())===e&&(m=null),m!==e?n=i=[i,l,m]:(t=n,n=e)):(t=n,n=e)):(t=n,n=e),n!==e&&(i=S())!==e?((l=yt())===e&&(l=null),l!==e&&(m=S())!==e?(M=r,p=l,g=(h=n)[0],o=h[1],v=h[2],r={isCorrect:g=="=",weight:o,text:v!==null?v:{format:zt(),text:"*"},feedback:p}):(t=r,r=e)):(t=r,r=e)):(t=r,r=e),a--,r===e&&a===0&&s(U),r}function rr(){var r;return a++,r=function(){var n,i,l,m;return a++,n=t,(i=bt())!==e?(u.charCodeAt(t)===58?(l=ae,t++):(l=e,a===0&&s(D)),l!==e&&(m=bt())!==e?(M=n,n=i={type:"range",number:i,range:m}):(t=n,n=e)):(t=n,n=e),a--,n===e&&(i=e,a===0&&s(Te)),n}(),r===e&&(r=function(){var n,i,l,m;return a++,n=t,(i=bt())!==e?(u.substr(t,2)===J?(l=J,t+=2):(l=e,a===0&&s(K)),l!==e&&(m=bt())!==e?(M=n,n=i={type:"high-low",numberHigh:m,numberLow:i}):(t=n,n=e)):(t=n,n=e),a--,n===e&&(i=e,a===0&&s(j)),n}(),r===e&&(r=function(){var n,i;return a++,n=t,(i=bt())!==e&&(M=n,i={type:"simple",number:i}),a--,(n=i)===e&&(i=e,a===0&&s(ee)),n}())),a--,r===e&&a===0&&s(ht),r}function nr(){var r,n,i,l;if(a++,r=t,u.substr(t,2)===H?(n=H,t+=2):(n=e,a===0&&s(le)),n!==e){if(i=[],(l=ar())!==e)for(;l!==e;)i.push(l),l=ar();else i=e;i!==e?(u.substr(t,2)===H?(l=H,t+=2):(l=e,a===0&&s(le)),l!==e?(M=r,r=n=i.join("")):(t=r,r=e)):(t=r,r=e)}else t=r,r=e;return a--,r===e&&(n=e,a===0&&s(q)),r}function Dt(){var r,n;return a++,r=t,(n=Ct())!==e&&(M=r,n=W(n)),a--,(r=n)===e&&(n=e,a===0&&s(ge)),r}function pt(){var r,n,i;return a++,r=function(){var l,m,h,p;if(a++,l=t,(m=Ie())!==e){if(h=[],(p=Tt())!==e)for(;p!==e;)h.push(p),p=Tt();else h=e;h!==e?l=m=[m,h]:(t=l,l=e)}else t=l,l=e;return a--,l===e&&(m=e,a===0&&s(oe)),l}(),r===e&&(r=t,(n=Ie())===e&&(n=null),n!==e&&(i=ur())!==e?r=n=[n,i]:(t=r,r=e)),a--,r===e&&(n=e,a===0&&s(ue)),r}function Tt(){var r,n,i;for(a++,r=t,n=[],i=st();i!==e;)n.push(i),i=st();return n!==e&&(i=Ie())!==e?r=n=[n,i]:(t=r,r=e),a--,r===e&&(n=e,a===0&&s(ce)),r}function ar(){var r,n,i;return a++,r=t,n=t,a++,u.substr(t,2)===H?(i=H,t+=2):(i=e,a===0&&s(le)),a--,i===e?n=void 0:(t=n,n=e),n!==e?((i=xt())===e&&(i=or()),i!==e?(M=r,r=n=i):(t=r,r=e)):(t=r,r=e),a--,r===e&&(n=e,a===0&&s(F)),r}function St(){var r;return a++,(r=or())===e&&(r=xt())===e&&(r=$t()),a--,r===e&&a===0&&s(B),r}function ir(){var r;return a++,r=function(){var n,i,l;return a++,n=t,i=t,a++,(l=xt())===e&&(l=sr())===e&&(u.substr(t,2)===$e?(l=$e,t+=2):(l=e,a===0&&s(nt)),l===e&&(l=pt())),a--,l===e?i=void 0:(t=i,i=e),i!==e?(u.length>t?(l=u.charAt(t),t++):(l=e,a===0&&s(Se)),l!==e?(M=n,n=i=Ft()):(t=n,n=e)):(t=n,n=e),a--,n===e&&(i=e,a===0&&s(Ge)),n}(),r===e&&(r=xt())===e&&(r=$t()),a--,r===e&&a===0&&s(B),r}function lr(){var r,n,i,l;return a++,r=t,u.charCodeAt(t)===91?(n="[",t++):(n=e,a===0&&s(x)),n!==e?(u.substr(t,4)===A?(i=A,t+=4):(i=e,a===0&&s(Z)),i===e&&(u.substr(t,8)===T?(i=T,t+=8):(i=e,a===0&&s(N)),i===e&&(u.substr(t,5)===G?(i=G,t+=5):(i=e,a===0&&s(Y)),i===e&&(u.substr(t,6)===V?(i=V,t+=6):(i=e,a===0&&s(Ce))))),i!==e?(u.charCodeAt(t)===93?(l="]",t++):(l=e,a===0&&s(ye)),l!==e?(M=r,r=n=i):(t=r,r=e)):(t=r,r=e)):(t=r,r=e),a--,r===e&&(n=e,a===0&&s(y)),r}function $t(){var r;return a++,u.charCodeAt(t)===92?(r="\\",t++):(r=e,a===0&&s(te)),a--,r===e&&a===0&&s(Qe),r}function xt(){var r,n;return a++,r=t,$t()!==e?((n=$t())===e&&(u.charCodeAt(t)===58?(n=ae,t++):(n=e,a===0&&s(D)),n===e&&(u.charCodeAt(t)===126?(n="~",t++):(n=e,a===0&&s(Be)),n===e&&(u.charCodeAt(t)===61?(n="=",t++):(n=e,a===0&&s(Ke)),n===e&&(u.charCodeAt(t)===35?(n=Me,t++):(n=e,a===0&&s(Pe)),n===e&&(u.charCodeAt(t)===91?(n="[",t++):(n=e,a===0&&s(x)),n===e&&(u.charCodeAt(t)===93?(n="]",t++):(n=e,a===0&&s(ye)),n===e&&(u.charCodeAt(t)===123?(n="{",t++):(n=e,a===0&&s(se)),n===e&&(u.charCodeAt(t)===125?(n="}",t++):(n=e,a===0&&s(He)))))))))),n!==e?(M=r,r=n):(t=r,r=e)):(t=r,r=e),a--,r===e&&a===0&&s(Ue),r}function or(){var r,n,i;return a++,r=t,n=t,a++,(i=xt())===e&&(i=sr())===e&&(i=pt()),a--,i===e?n=void 0:(t=n,n=e),n!==e?(u.length>t?(i=u.charAt(t),t++):(i=e,a===0&&s(Se)),i!==e?(M=r,r=n=Ft()):(t=r,r=e)):(t=r,r=e),a--,r===e&&(n=e,a===0&&s(Ge)),r}function sr(){var r;return u.charCodeAt(t)===61?(r="=",t++):(r=e,a===0&&s(Ke)),r===e&&(u.charCodeAt(t)===126?(r="~",t++):(r=e,a===0&&s(Be)),r===e&&(u.charCodeAt(t)===35?(r=Me,t++):(r=e,a===0&&s(Pe)),r===e&&(u.charCodeAt(t)===123?(r="{",t++):(r=e,a===0&&s(se)),r===e&&(u.charCodeAt(t)===125?(r="}",t++):(r=e,a===0&&s(He)),r===e&&(u.charCodeAt(t)===92?(r="\\",t++):(r=e,a===0&&s(te)),r===e&&(u.charCodeAt(t)===58?(r=ae,t++):(r=e,a===0&&s(D)))))))),r}function Ct(){var r,n,i,l;if(a++,r=t,(n=lr())===e&&(n=null),n!==e)if(S()!==e){if(i=[],(l=St())!==e)for(;l!==e;)i.push(l),l=St();else i=e;i!==e?(M=r,r=n=At(n,i)):(t=r,r=e)}else t=r,r=e;else t=r,r=e;return a--,r===e&&(n=e,a===0&&s(wt)),r}function bt(){var r,n,i,l;if(r=t,n=[],ve.test(u.charAt(t))?(i=u.charAt(t),t++):(i=e,a===0&&s(he)),i!==e)for(;i!==e;)n.push(i),ve.test(u.charAt(t))?(i=u.charAt(t),t++):(i=e,a===0&&s(he));else n=e;return n!==e?(i=function(){var m,h,p,g,o;if(m=t,u.charCodeAt(t)===46?(h=Bt,t++):(h=e,a===0&&s(Kt)),h!==e)if(p=t,a++,u.charCodeAt(t)===46?(g=Bt,t++):(g=e,a===0&&s(Kt)),a--,g===e?p=void 0:(t=p,p=e),p!==e){for(g=[],ve.test(u.charAt(t))?(o=u.charAt(t),t++):(o=e,a===0&&s(he));o!==e;)g.push(o),ve.test(u.charAt(t))?(o=u.charAt(t),t++):(o=e,a===0&&s(he));g!==e?(M=m,m=h="."+g.join("")):(t=m,m=e)}else t=m,m=e;else t=m,m=e;return m}(),i===e&&(i=null),i!==e?(M=r,l=i,r=n=parseFloat(n.join("")+l)):(t=r,r=e)):(t=r,r=e),r}function lt(){var r,n,i;return r=t,u.substr(t,4)===Lt?(n=Lt,t+=4):(n=e,a===0&&s(hr)),n!==e&&S()!==e&&(i=Ct())!==e&&S()!==e?(M=r,r=n=i):(t=r,r=e),r}function S(){var r,n,i,l,m;for(a++,r=[],(n=st())===e&&(n=t,(i=Ie())!==e?(l=t,a++,m=Tt(),a--,m===e?l=void 0:(t=l,l=e),l!==e?n=i=[i,l]:(t=n,n=e)):(t=n,n=e));n!==e;)r.push(n),(n=st())===e&&(n=t,(i=Ie())!==e?(l=t,a++,m=Tt(),a--,m===e?l=void 0:(t=l,l=e),l!==e?n=i=[i,l]:(t=n,n=e)):(t=n,n=e));return a--,r===e&&(n=e,a===0&&s(gr)),r}function Et(){var r,n;for(a++,r=[],(n=ot())===e&&(n=Ie())===e&&(n=st());n!==e;)r.push(n),(n=ot())===e&&(n=Ie())===e&&(n=st());return a--,r===e&&(n=e,a===0&&s(yr)),r}function Ot(){var r,n,i,l;for(r=t,n=t,a++,i=[],u.charCodeAt(t)===32?(l=" ",t++):(l=e,a===0&&s(Vt));l!==e;)i.push(l),u.charCodeAt(t)===32?(l=" ",t++):(l=e,a===0&&s(Vt));return a--,i!==e?(t=n,n=void 0):n=e,n!==e&&(M=r,jt=null,n=void(tt=null)),r=n}function ot(){var r,n,i,l,m,h;if(a++,r=t,u.substr(t,2)===Zt?(n=Zt,t+=2):(n=e,a===0&&s(Ut)),n!==e){for(i=[],Mt.test(u.charAt(t))?(l=u.charAt(t),t++):(l=e,a===0&&s(Pt));l!==e;)i.push(l),Mt.test(u.charAt(t))?(l=u.charAt(t),t++):(l=e,a===0&&s(Pt));i!==e?(M=r,m=i.join(""),(h=m.match(/\[id:([^\x00-\x1F\x7F]+?)]/))&&(jt=h[1].trim().replace("\\]","]")),m.matchAll(/\[tag:([^\x00-\x1F\x7F]+?)]/g),Array.from(m.matchAll(/\[tag:([^\x00-\x1F\x7F]+?)]/g),function(p){return p[1]}).forEach(function(p){tt||(tt=[]),tt.push(p)}),r=n=null):(t=r,r=e)}else t=r,r=e;return a--,r===e&&(n=e,a===0&&s(Qt)),r}function st(){var r;return a++,u.charCodeAt(t)===32?(r=" ",t++):(r=e,a===0&&s(Vt)),r===e&&(u.charCodeAt(t)===9?(r="	",t++):(r=e,a===0&&s(xr))),a--,r===e&&a===0&&s(pr),r}function Ie(){var r;return a++,u.substr(t,2)===`\r
`?(r=`\r
`,t+=2):(r=e,a===0&&s(br)),r===e&&(u.charCodeAt(t)===10?(r=`
`,t++):(r=e,a===0&&s(jr)),r===e&&(u.charCodeAt(t)===13?(r="\r",t++):(r=e,a===0&&s(Fr)))),a--,r===e&&a===0&&s(Cr),r}function ur(){var r,n,i;return r=t,n=t,a++,u.length>t?(i=u.charAt(t),t++):(i=e,a===0&&s(Se)),a--,i===e?n=void 0:(t=n,n=e),n!==e&&(M=r,n="EOF"),r=n}var jt=null,tt=null,cr="moodle",Nt=cr;function dr(r){return I!==void 0&&"noTrim"in I||r.trim(),(r=r.replace(/[\n\r]/g," ")).replace(/\s\s+/g," ")}function zt(){return Nt}function fr(){Nt=cr}if((E=k())!==e&&t===u.length)return E;throw E!==e&&t<u.length&&s({type:"end"}),Ar(It,Ve<u.length?u.charAt(Ve):null,Ve<u.length?Wt(Ve,Ve+1):Wt(Ve,Ve))}Oe(d,Error),d.buildMessage=function(u,I){var E={literal:function(b){return'"'+w(b.text)+'"'},class:function(b){var P,ie="";for(P=0;P<b.parts.length;P++)ie+=b.parts[P]instanceof Array?k(b.parts[P][0])+"-"+k(b.parts[P][1]):k(b.parts[P]);return"["+(b.inverted?"^":"")+ie+"]"},any:function(b){return"any character"},end:function(b){return"end of input"},other:function(b){return b.description}};function e(b){return b.charCodeAt(0).toString(16).toUpperCase()}function w(b){return b.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(P){return"\\x0"+e(P)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(P){return"\\x"+e(P)})}function k(b){return b.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(P){return"\\x0"+e(P)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(P){return"\\x"+e(P)})}return"Expected "+function(b){var P,ie,_,Q=new Array(b.length);for(P=0;P<b.length;P++)Q[P]=(_=b[P],E[_.type](_));if(Q.sort(),Q.length>0){for(P=1,ie=1;P<Q.length;P++)Q[P-1]!==Q[P]&&(Q[ie]=Q[P],ie++);Q.length=ie}switch(Q.length){case 1:return Q[0];case 2:return Q[0]+" or "+Q[1];default:return Q.slice(0,-1).join(", ")+", or "+Q[Q.length-1]}}(u)+" but "+function(b){return b?'"'+w(b)+'"':"end of input"}(I)+" found."},De.exports={SyntaxError:d,parse:xe}},63740:function(De,Oe,d){"use strict";d.r(Oe),d.d(Oe,{default:function(){return Te}});var xe=d(78715),u=d(74453),I=d(74330),E=d(67294),e=d(80854),w=d(15009),k=d.n(w),b=d(97857),P=d.n(b),ie=d(99289),_=d.n(ie),Q=d(5574),se=d.n(Q),He=d(58638),fe=d(952),ut=d(24739),We=d(31199),ct=d(78957),Ke=d(96074),$e=d(14726),nt=d(38751),ke=d(3598),Ee=d(7014),Je=d(37476),Ye=d(89974),c=d(85893),ne=function(D){var j=D.quiz_id,J=D.visible,K=D.onVisibleChange,ee=fe.ZP.useForm(),q=se()(ee,1),H=q[0],le=(0,E.useCallback)(function(){var ge=_()(k()().mark(function W(ue){var oe,ce,F;return k()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return oe=ue.category_ids,y.prev=1,y.next=4,(0,ke.qp)({quiz_id:j,category_ids:oe});case 4:ce=y.sent,ce instanceof Blob&&(F=document.createElement("a"),F.href=window.URL.createObjectURL(ce),F.download="quiz_".concat(j,"_questions_by_category_id.xlsx"),document.body.appendChild(F),F.click(),document.body.removeChild(F)),y.next=11;break;case 8:y.prev=8,y.t0=y.catch(1),console.error(y.t0);case 11:return y.prev=11,K(!1),y.finish(11);case 14:case"end":return y.stop()}},W,null,[[1,8,11,14]])}));return function(W){return ge.apply(this,arguments)}}(),[j]);return(0,c.jsx)(Je.Y,{title:(0,c.jsx)(e.FormattedMessage,{id:"exportQuestions"}),form:H,visible:J,onVisibleChange:K,onFinish:le,children:(0,c.jsx)(fe.ZP.Item,{name:"category_ids",label:(0,c.jsx)(e.FormattedMessage,{id:"categories"}),required:!0,rules:[{required:!0,message:(0,c.jsx)(e.FormattedMessage,{id:"field_required"})}],children:(0,c.jsx)(Ye.b,{multiple:!0,type:"question"})})})},dt=function(){var D=(0,Ee.O)(),j=D.competencyChallenge.data,J=(0,E.useState)(!1),K=se()(J,2),ee=K[0],q=K[1],H=(0,E.useState)(!1),le=se()(H,2),ge=le[0],W=le[1],ue=(0,E.useState)(),oe=se()(ue,2),ce=oe[0],F=oe[1],B=(0,e.useIntl)(),y=(0,E.useCallback)(function(){return q(!0)},[]),x=(0,E.useCallback)(function(){(j==null?void 0:j.quiz_id)!==void 0&&(W(!0),(0,ke.E8)(j==null?void 0:j.quiz_id).then(function(Z){Z.success&&F(Z.data)}).finally(function(){return W(!1)}))},[j==null?void 0:j.quiz_id]),A=(0,E.useCallback)(function(){var Z=_()(k()().mark(function T(N){return k()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if((j==null?void 0:j.quiz_id)!==void 0){Y.next=2;break}return Y.abrupt("return");case 2:W(!0),(0,ke.Lz)(j==null?void 0:j.quiz_id,P()(P()({},N),{},{value:"diagnostic-test"})).then(function(V){V.success&&F(V.data)}).finally(function(){return W(!1)});case 4:case"end":return Y.stop()}},T)}));return function(T){return Z.apply(this,arguments)}}(),[]);return(0,E.useEffect)(function(){x()},[x]),ce?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ne,{visible:ee,onVisibleChange:q,quiz_id:ce.id}),(0,c.jsxs)("div",{style:{position:"relative",paddingBottom:"64px"},children:[(0,c.jsx)(fe.ZP,{submitter:{render:function(T,N){var G=se()(N,2),Y=G[0],V=G[1];return(0,c.jsxs)(ct.Z,{style:{position:"absolute",bottom:0,left:0},children:[Y,V]})}},initialValues:ce,onFinish:A,children:(0,c.jsxs)(ut.UW,{children:[(0,c.jsx)(We.Z,{name:"max_attempts",label:(0,c.jsx)(e.FormattedMessage,{id:"max_attempts"}),tooltip:(0,c.jsx)(e.FormattedMessage,{id:"max_attempts"}),placeholder:B.formatMessage({id:"max_attempts",defaultMessage:"max_attempts"})}),(0,c.jsx)(We.Z,{name:"max_execution_time",label:(0,c.jsx)(e.FormattedMessage,{id:"max_execution_time"}),tooltip:(0,c.jsx)(e.FormattedMessage,{id:"max_execution_time"}),placeholder:B.formatMessage({id:"max_execution_time",defaultMessage:"max_execution_time"})})]})}),(0,c.jsx)(Ke.Z,{}),(0,c.jsx)(nt.i,{questions:ce.questions,quizId:ce.id,onAdded:x,onEdited:x,onRemoved:x,tableHeader:(0,c.jsx)(e.FormattedMessage,{id:"questions"}),tableLoading:ge,questionsCategory:{type:"question"},customToolbarElements:[(0,c.jsxs)($e.ZP,{type:"primary",icon:(0,c.jsx)(He.Z,{}),onClick:y,children:[" ",(0,c.jsx)(e.FormattedMessage,{id:"exportQuestionsByCategory"})]},"export_by_category")]})]})]}):(0,c.jsx)(I.Z,{})},ft=d(13769),Xe=d.n(ft),at=d(5966),qe=d(64317),Le=d(52688),mt=d(90672),f=d(2453),pe=d(86273),be=d(23535),Ne=d(44167),we=d(19411),me=d(21711),ve=d(31472),he=["authors","category"],Ze=Object.values(ve.Fh).map(function(ae){return{value:ae,label:(0,c.jsx)(e.FormattedMessage,{id:"CompetencyChallenges.types.".concat(ae)})}}),_e=function(){var D=(0,Ee.O)(),j=D.competencyChallenge,J=D.categoryDepths,K=D.refreshData,ee=(0,e.useParams)(),q=Number(ee.id),H=(0,e.useIntl)(),le=fe.ZP.useForm(),ge=se()(le,1),W=ge[0],ue=fe.ZP.useWatch("type",W),oe=Number.isNaN(q),ce=(0,E.useMemo)(function(){if(!(j!=null&&j.data))return{};var y=j==null?void 0:j.data,x=y.authors,A=y.category,Z=Xe()(y,he);return P()(P()({},Z),{},{authors:x.map(function(T){var N=T.id;return N}),category_id:A==null?void 0:A.id})},[j==null?void 0:j.data]),F=(0,E.useCallback)(function(){var y=_()(k()().mark(function x(A){var Z,T,N,G,Y,V,Ce,ye;return k()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return Z=A.name,T=A.type,N=A.is_active,G=N===void 0?!1:N,Y=A.is_highlighted,V=Y===void 0?!1:Y,Ce=A.category_id,te.prev=1,te.next=4,(0,me.v8)({name:Z,is_active:G,is_highlighted:V,type:T,category_id:Ce});case 4:if(ye=te.sent,ye.success){te.next=8;break}return f.ZP.error(ye.message),te.abrupt("return");case 8:return f.ZP.success(H.formatMessage({id:ye.message})),e.history.push("/competency-challenges/".concat(ye.data.id,"/main")),te.next=12,K();case 12:te.next=17;break;case 14:te.prev=14,te.t0=te.catch(1),f.ZP.error(H.formatMessage({id:"error"}));case 17:case"end":return te.stop()}},x,null,[[1,14]])}));return function(x){return y.apply(this,arguments)}}(),[]),B=(0,E.useCallback)(function(){var y=_()(k()().mark(function x(A){var Z,T,N,G;return k()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.prev=0,Z=W.getFieldsValue(["image_url","image_path"]),T=Z.image_url,N=Z.image_path,V.next=4,(0,me.dA)(q,P()(P()({},A),{},{image_url:T,image_path:N}));case 4:if(G=V.sent,G.success){V.next=8;break}return f.ZP.error(G.message),V.abrupt("return");case 8:return f.ZP.success(H.formatMessage({id:G.message})),V.next=11,K();case 11:V.next=16;break;case 13:V.prev=13,V.t0=V.catch(0),f.ZP.error(H.formatMessage({id:"error"}));case 16:case"end":return V.stop()}},x,null,[[0,13]])}));return function(x){return y.apply(this,arguments)}}(),[q]);return(0,c.jsxs)(fe.ZP,{form:W,initialValues:ce,onFinish:oe?F:B,onValuesChange:function(x){(x==null?void 0:x.type)==="complex"&&W.setFieldValue("category",null)},children:[(0,c.jsxs)(fe.ZP.Group,{title:(0,c.jsx)(e.FormattedMessage,{id:"CompetencyChallenges.base"}),children:[(0,c.jsx)(at.Z,{width:"md",name:"name",label:(0,c.jsx)(e.FormattedMessage,{id:"name"}),placeholder:H.formatMessage({id:"name"}),required:!0,rules:[{required:!0,message:H.formatMessage({id:"field_required"})}]}),(0,c.jsx)(qe.Z,{width:"md",name:"type",label:(0,c.jsx)(e.FormattedMessage,{id:"type"}),options:Ze,required:!0,rules:[{required:!0,message:H.formatMessage({id:"field_required"})}]}),ue==="simple"&&(0,c.jsx)(fe.ZP.Item,{name:"category_id",required:!0,label:(0,c.jsx)(e.FormattedMessage,{id:"category"}),rules:[{required:!0,message:H.formatMessage({id:"field_required"})}],children:(0,c.jsx)(pe.Z,{enabledDepth:J.role})}),(0,c.jsx)(Le.Z,{name:"is_active",label:(0,c.jsx)(e.FormattedMessage,{id:"is_active"})}),(0,c.jsx)(Le.Z,{name:"is_highlighted",label:(0,c.jsx)(e.FormattedMessage,{id:"is_highlighted"}),tooltip:(0,c.jsx)(e.FormattedMessage,{id:"CompetencyChallenges.highlighted"})})]}),!oe&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(fe.ZP.Group,{title:(0,c.jsx)(e.FormattedMessage,{id:"CompetencyChallenges.additional"}),children:[(0,c.jsx)(fe.ZP.Item,{name:"description",label:(0,c.jsx)(e.FormattedMessage,{id:"description"}),valuePropName:"value",style:{width:440},children:(0,c.jsx)(we.ZP,{directory:"competency-challenges/".concat(q)})}),(0,c.jsx)(mt.Z,{width:"lg",name:"summary",label:(0,c.jsx)(e.FormattedMessage,{id:"summary"})}),(0,c.jsx)(fe.ZP.Item,{name:"authors",label:(0,c.jsx)(e.FormattedMessage,{id:"author"}),style:{width:"100%",maxWidth:440},children:(0,c.jsx)(Ne.Z,{multiple:!0})})]}),(0,c.jsx)(be.Z,{wrapInForm:!1,folder:"/competency-challenges/".concat(q),title:"image",action:"/api/admin/competency-challenges/".concat(q,"?_method=PATCH"),src_name:"image_url",form_name:"image",getUploadedSrcField:function(x){return x.file.response.data.image_url},setPath:function(x){return W.setFieldsValue(x)}})]})]})},et=d(47389),Me=d(82061),Pe=d(88280),je=d(83062),Re=d(86738),ze=["scale_min","category_id"],re=[{title:(0,c.jsx)(e.FormattedMessage,{id:"ID"}),dataIndex:"id",editable:!1,render:function(D,j){if(typeof j.id!="string")return"-";var J=j.id.split("-"),K=se()(J,2),ee=K[0],q=K[1];return ee==="new"?"-":q}},{title:(0,c.jsx)(e.FormattedMessage,{id:"min_points"}),dataIndex:"scale_min",valueType:"digit",formItemProps:{rules:[{required:!0,message:(0,c.jsx)(e.FormattedMessage,{id:"field_required"})},{type:"number",min:0,max:100,message:(0,c.jsx)(e.FormattedMessage,{id:"number_between",values:{min:0}})}]},fieldProps:{min:0}},{title:(0,c.jsx)(e.FormattedMessage,{id:"category"}),dataIndex:"category_id",render:function(D,j){return j.category_name},formItemProps:{rules:[{required:!0,message:(0,c.jsx)(e.FormattedMessage,{id:"field_required"})}]},renderFormItem:function(D,j,J){var K,ee=((K=J.getFieldValue("table"))!==null&&K!==void 0?K:[]).map(function(q){return q.category_id});return(0,c.jsx)(Ye.b,{disabledNodes:ee})}}],vt=function(D){return D.map(function(j){var J=j.id,K=j.scale_min,ee=j.category;return{id:"old-".concat(J),scale_min:K,category_id:ee.id,category_name:ee.name_with_breadcrumbs}})},it=function(){var D,j,J=(0,Ee.O)(),K=J.competencyChallenge,ee=J.refreshData,q=(0,e.useParams)(),H=Number(q.id),le=(D=K==null||(j=K.data)===null||j===void 0?void 0:j.scales)!==null&&D!==void 0?D:[],ge=(0,E.useState)([]),W=se()(ge,2),ue=W[0],oe=W[1],ce=(0,e.useIntl)(),F=(0,E.useRef)(),B=(0,E.useRef)(),y=(0,E.useRef)(),x=(0,E.useMemo)(function(){return vt(le)},[le]),A=(0,E.useMemo)(function(){return[].concat(re,[{valueType:"option",title:(0,c.jsx)(e.FormattedMessage,{id:"options"}),render:function(T,N,G,Y){return[(0,c.jsx)(je.Z,{title:(0,c.jsx)(e.FormattedMessage,{id:"edit",defaultMessage:"edit"}),children:(0,c.jsx)($e.ZP,{type:"primary",icon:(0,c.jsx)(et.Z,{}),onClick:function(){return Y==null?void 0:Y.startEditable(N.id)}})},"edit"),(0,c.jsx)(Re.Z,{title:(0,c.jsx)(e.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:_()(k()().mark(function V(){var Ce,ye,Qe,te,Ue,Be,Ge,Se;return k()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(typeof N.id=="string"){L.next=2;break}return L.abrupt("return");case 2:if(Ce=N.id.split("-"),ye=se()(Ce,2),Qe=ye[0],te=ye[1],Qe!=="new"){L.next=7;break}return Ge=(Ue=F.current)===null||Ue===void 0?void 0:Ue.getFieldValue("table"),(Be=F.current)===null||Be===void 0||Be.setFieldValue("table",Ge.filter(function(At){var wt=At.id;return wt!==N.id})),L.abrupt("return");case 7:return L.next=9,(0,me.sm)(+te);case 9:if(Se=L.sent,!Se.success){L.next=13;break}return L.next=13,ee();case 13:case"end":return L.stop()}},V)})),okText:(0,c.jsx)(e.FormattedMessage,{id:"ok"}),cancelText:(0,c.jsx)(e.FormattedMessage,{id:"cancel"}),children:(0,c.jsx)(je.Z,{title:(0,c.jsx)(e.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,c.jsx)($e.ZP,{type:"primary",icon:(0,c.jsx)(Me.Z,{}),danger:!0})})},"delete")]}}])},[]);return(0,c.jsx)(fe.ZP,{formRef:F,initialValues:{table:x},submitter:!1,children:(0,c.jsx)(Pe.Z,{rowKey:function(T){return T.id},editableFormRef:B,controlled:!0,actionRef:y,name:"table",columns:A,recordCreatorProps:{creatorButtonText:(0,c.jsx)(e.FormattedMessage,{id:"CompetencyChallenges.addNewRow"}),disabled:ue.length>0,record:function(T){return{id:"new-".concat(T)}}},editable:{onlyOneLineEditorAlertMessage:ce.formatMessage({id:"CompetencyChallenges.onlyOneRowIsEditable"}),onSave:function(){var Z=_()(k()().mark(function N(G,Y){var V,Ce,ye,Qe,te,Ue,Be,Ge,Se;return k()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(V=Y.scale_min,Ce=Y.category_id,ye=Xe()(Y,ze),typeof ye.id=="string"){L.next=3;break}return L.abrupt("return");case 3:if(Qe=ye.id.split("-"),te=se()(Qe,2),Ue=te[0],Be=te[1],Ue!=="new"){L.next=12;break}return L.next=7,(0,me.Qd)({scale_min:V,category_id:Ce,competency_challenge_id:H});case 7:if(Ge=L.sent,!Ge.success){L.next=11;break}return L.next=11,ee();case 11:return L.abrupt("return");case 12:return L.next=14,(0,me.U_)(+Be,{scale_min:V,category_id:Ce,competency_challenge_id:H});case 14:if(Se=L.sent,!Se.success){L.next=18;break}return L.next=18,ee();case 18:return L.abrupt("return");case 19:case"end":return L.stop()}},N)}));function T(N,G){return Z.apply(this,arguments)}return T}(),deletePopconfirmMessage:(0,c.jsx)(e.FormattedMessage,{id:"deleteQuestion"}),actionRender:function(T,N,G){if(typeof T.id!="string")return[];var Y=T.id.split("-"),V=se()(Y,1),Ce=V[0];return Ce==="new"?[G.save,G.delete]:[G.save,G.cancel]},type:"single",editableKeys:ue,onChange:oe}})})},U=function(){var D,j=(0,Ee.O)(),J=j.competencyChallenge,K=(0,e.useIntl)(),ee=(0,e.useParams)(),q=ee.id,H=ee.tab,le=H===void 0?"main":H,ge=q==="new",W=(0,E.useMemo)(function(){var ue;return ge?K.formatMessage({id:"CompetencyChallenges.new_challenge"}):(ue=J.data)!==null&&ue!==void 0&&ue.name?J.data.name:K.formatMessage({id:"menu.Competency challenges"})},[K,(D=J.data)===null||D===void 0?void 0:D.name]);return(0,c.jsx)(u._z,{title:W,header:{breadcrumb:{items:[{path:"competency-challenges",breadcrumbName:K.formatMessage({id:"menu.Competency challenges"})},{path:String(q),breadcrumbName:W},{path:le,breadcrumbName:K.formatMessage({id:"CompetencyChallenges.".concat(le)})}]}},children:(0,c.jsxs)(xe.ZP,{bodyStyle:{padding:"24px"},tabs:{type:"card",cardProps:{loading:J.loading&&(0,c.jsx)(I.Z,{})},activeKey:le,onChange:function(oe){e.history.push("/competency-challenges/".concat(q,"/").concat(oe))}},children:[(0,c.jsx)(xe.ZP.TabPane,{tab:(0,c.jsx)(e.FormattedMessage,{id:"CompetencyChallenges.main"}),children:(0,c.jsx)(_e,{})},"main"),(0,c.jsx)(xe.ZP.TabPane,{tab:(0,c.jsx)(e.FormattedMessage,{id:"CompetencyChallenges.scales"}),disabled:ge,children:(0,c.jsx)(it,{})},"scales"),(0,c.jsx)(xe.ZP.TabPane,{tab:(0,c.jsx)(e.FormattedMessage,{id:"CompetencyChallenges.diagnostic-test"}),disabled:ge,children:(0,c.jsx)(dt,{})},"diagnostic-test")]})})},ht=function(){return(0,c.jsx)(Ee.F,{children:(0,c.jsx)(U,{})})},Te=ht},64599:function(De,Oe,d){var xe=d(96263);function u(I,E){var e=typeof Symbol!="undefined"&&I[Symbol.iterator]||I["@@iterator"];if(!e){if(Array.isArray(I)||(e=xe(I))||E&&I&&typeof I.length=="number"){e&&(I=e);var w=0,k=function(){};return{s:k,n:function(){return w>=I.length?{done:!0}:{done:!1,value:I[w++]}},e:function(Q){throw Q},f:k}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var b=!0,P=!1,ie;return{s:function(){e=e.call(I)},n:function(){var Q=e.next();return b=Q.done,Q},e:function(Q){P=!0,ie=Q},f:function(){try{!b&&e.return!=null&&e.return()}finally{if(P)throw ie}}}}De.exports=u,De.exports.__esModule=!0,De.exports.default=De.exports}}]);
