(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{"9A0E":function(A,h,e){"use strict";e.r(h),e.d(h,"channelType",function(){return f});var s=e("q1tI"),a=e("Ty5D"),v=e("9kvl"),b=e("tMyG"),c=e("nhC9"),ee=e("P2fV"),D=e("NJEC"),he=e("5Dmo"),P=e("3S7+"),te=e("+L6B"),L=e("2/Rp"),ue=e("miYZ"),I=e("tsqr"),ae=e("9og8"),K=e("tJVT"),S=e("WmNS"),B=e.n(S),ne=e("xvlK"),E=e("G3dp"),R=e("/MfK"),U=e("55Ip"),re=e("sWYD"),W=e("Qiat"),d=e("rWUb"),r=e("mGZj"),t=e("nKUr"),m=function(Y){var F=Y.templateType,Q=Y.channel,H=Object(s.useRef)(),pe=Object(v.i)(),ge=Object(s.useState)(!1),ye=Object(K.a)(ge,2),xe=ye[0],$=ye[1],Ce=[{title:Object(t.jsx)(v.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0},{title:Object(t.jsx)(v.a,{id:"created_at",defaultMessage:"created_at"}),dataIndex:"created_at",hideInSearch:!0,render:function(N,C){return C.created_at&&Object(re.a)(new Date(C.created_at),r.a)}},{title:Object(t.jsx)(v.a,{id:"name",defaultMessage:"name"}),dataIndex:"name",hideInSearch:!0},{title:Object(t.jsx)(v.a,{id:"event",defaultMessage:"event"}),dataIndex:"event",hideInSearch:!0},{title:Object(t.jsx)(v.a,{id:"templates.is_default"}),dataIndex:"default",hideInSearch:!0,render:function(N,C){return C.default&&Object(t.jsx)(v.a,{id:"yes"})}}],Te=Object(s.useCallback)(function(){var x=Object(ae.a)(B.a.mark(function N(C){var n,o;return B.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return $(!0),n=I.default.loading(Object(t.jsx)(v.a,{id:"loading",defaultMessage:"loading"})),l.prev=2,l.next=5,Object(d.b)(C).then(function(g){$(!1),g.success&&I.default.success(g.message)});case 5:return n(),$(!1),(o=H.current)===null||o===void 0||o.reload(),l.abrupt("return",!0);case 11:return l.prev=11,l.t0=l.catch(2),n(),I.default.error(Object(t.jsx)(v.a,{id:"error",defaultMessage:"error"})),$(!1),l.abrupt("return",!1);case 17:case"end":return l.stop()}},N,null,[[2,11]])}));return function(N){return x.apply(this,arguments)}}(),[H]);return Object(t.jsx)(W.a,{headerTitle:pe.formatMessage({id:"templates",defaultMessage:"templates"}),loading:xe,actionRef:H,rowKey:"id",search:!1,toolBarRender:function(){return[Object(t.jsx)(U.a,{to:"/templates/".concat(F,"/new"),children:Object(t.jsxs)(L.a,{type:"primary",children:[Object(t.jsx)(ne.a,{})," ",Object(t.jsx)(v.a,{id:"new",defaultMessage:"new"})]},"primary")})]},request:function(N){var C=N.pageSize,n=N.current;return $(!0),Object(d.e)({pageSize:C,current:n,channel:Q}).then(function(o){return o.success?($(!1),{data:o.data,total:o.meta.total,success:!0}):[]})},columns:[].concat(Ce,[{hideInSearch:!0,title:Object(t.jsx)(v.a,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",render:function(N,C){return[Object(t.jsx)(U.a,{to:"/templates/".concat(F,"/").concat(C.id),children:Object(t.jsx)(P.a,{title:Object(t.jsx)(v.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(L.a,{type:"primary",icon:Object(t.jsx)(E.a,{})})})},"edit"),Object(t.jsx)(D.a,{title:Object(t.jsx)(v.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:function(){return Te(C.id)},okText:Object(t.jsx)(v.a,{id:"yes"}),cancelText:Object(t.jsx)(v.a,{id:"no"}),children:Object(t.jsx)(P.a,{title:Object(t.jsx)(v.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(L.a,{type:"primary",icon:Object(t.jsx)(R.a,{}),danger:!0})})},"delete")]}}])})},i=m,f;(function(J){J.email="EscolaLms\\TemplatesEmail\\Core\\EmailChannel",J.pdf="EscolaLms\\TemplatesPdf\\Core\\PdfChannel",J.sms="EscolaLms\\TemplatesSms\\Core\\SmsChannel"})(f||(f={}));var Oe=function(){var Y=Object(a.l)(),F=Y.template;return Object(t.jsx)(b.a,{children:Object(t.jsxs)(c.a,{tabs:{type:"card",activeKey:F,onChange:function(H){return v.d.push("/templates/".concat(H))}},children:[Object(t.jsx)(c.a.TabPane,{tab:Object(t.jsx)(v.a,{id:"email"}),children:Object(t.jsx)(i,{templateType:"email",channel:f.email})},"email"),Object(t.jsx)(c.a.TabPane,{tab:Object(t.jsx)(v.a,{id:"PDF"}),children:Object(t.jsx)(i,{templateType:"pdf",channel:f.pdf})},"pdf"),Object(t.jsx)(c.a.TabPane,{disabled:!0,tab:Object(t.jsx)("span",{children:Object(t.jsx)(v.a,{id:"Push"})}),children:"Push"},"Push"),Object(t.jsx)(c.a.TabPane,{tab:Object(t.jsx)("span",{children:Object(t.jsx)(v.a,{id:"SMS"})}),children:Object(t.jsx)(i,{templateType:"sms",channel:f.sms})},"sms")]})})},He=h.default=Oe},S76h:function(A,h,e){},TLLU:function(A,h,e){"use strict";var s=e("5OYt");function a(){return Object(s.a)()}h.a={useBreakpoint:a}},VzZb:function(A,h,e){},"aK+R":function(A,h,e){},df8c:function(A,h,e){},nhC9:function(A,h,e){"use strict";var s=e("VTBJ"),a=e("nKUr"),v=e("Znn+"),b=e("ZTPi"),c=e("rePB"),ee=e("U8pU"),D=e("ODXe"),he=e("GNNt"),P=e("wEI+"),te=e("Ff2n"),L=e("1GLa"),ue=e("TLLU"),I=e("UESt"),ae=e("YSkC"),K=e("TSYQ"),S=e.n(K),B=e("BGR+"),ne=e("6cGi"),E=e("q1tI"),R=e.n(E),U=e("S76h"),re=function(o){var u=o.actions,l=o.prefixCls;return Array.isArray(u)&&(u==null?void 0:u.length)?Object(a.jsx)("ul",{className:"".concat(l,"-actions"),children:u.map(function(g,V){return Object(a.jsx)("li",{style:{width:"".concat(100/u.length,"%")},children:Object(a.jsx)("span",{children:g})},"action-".concat(V))})}):u?Object(a.jsx)("ul",{className:"".concat(l,"-actions"),children:u}):null},W=re,d=e("jCWc"),r=e("kPKH"),t=e("14J3"),m=e("BMrR"),i=e("aK+R"),f=function(o){var u=o.style,l=o.prefix;return Object(a.jsxs)("div",{className:"".concat(l,"-loading-content"),style:u,children:[Object(a.jsx)(m.a,{gutter:8,children:Object(a.jsx)(r.a,{span:22,children:Object(a.jsx)("div",{className:"".concat(l,"-loading-block")})})}),Object(a.jsxs)(m.a,{gutter:8,children:[Object(a.jsx)(r.a,{span:8,children:Object(a.jsx)("div",{className:"".concat(l,"-loading-block")})}),Object(a.jsx)(r.a,{span:15,children:Object(a.jsx)("div",{className:"".concat(l,"-loading-block")})})]}),Object(a.jsxs)(m.a,{gutter:8,children:[Object(a.jsx)(r.a,{span:6,children:Object(a.jsx)("div",{className:"".concat(l,"-loading-block")})}),Object(a.jsx)(r.a,{span:18,children:Object(a.jsx)("div",{className:"".concat(l,"-loading-block")})})]}),Object(a.jsxs)(m.a,{gutter:8,children:[Object(a.jsx)(r.a,{span:13,children:Object(a.jsx)("div",{className:"".concat(l,"-loading-block")})}),Object(a.jsx)(r.a,{span:9,children:Object(a.jsx)("div",{className:"".concat(l,"-loading-block")})})]}),Object(a.jsxs)(m.a,{gutter:8,children:[Object(a.jsx)(r.a,{span:4,children:Object(a.jsx)("div",{className:"".concat(l,"-loading-block")})}),Object(a.jsx)(r.a,{span:3,children:Object(a.jsx)("div",{className:"".concat(l,"-loading-block")})}),Object(a.jsx)(r.a,{span:16,children:Object(a.jsx)("div",{className:"".concat(l,"-loading-block")})})]})]})},Oe=f,He=e("df8c"),J=["className","style","bodyStyle","headStyle","title","subTitle","extra","tip","wrap","layout","loading","gutter","tooltip","split","headerBordered","bordered","children","size","actions","ghost","hoverable","direction","collapsed","collapsible","collapsibleIconRender","defaultCollapsed","onCollapse","checked","onChecked","tabs","type"],Y=ue.a.useBreakpoint,F=R.a.forwardRef(function(n,o){var u,l,g,V=n.className,X=n.style,w=n.bodyStyle,G=w===void 0?{}:w,k=n.headStyle,Pe=k===void 0?{}:k,je=n.title,Se=n.subTitle,ce=n.extra,Ee=n.tip,ve=n.wrap,Xe=ve===void 0?!1:ve,we=n.layout,le=n.loading,Le=n.gutter,ke=Le===void 0?0:Le,qe=n.tooltip,se=n.split,Be=n.headerBordered,_e=Be===void 0?!1:Be,Re=n.bordered,et=Re===void 0?!1:Re,$e=n.children,Ge=n.size,tt=n.actions,ze=n.ghost,at=ze===void 0?!1:ze,Ke=n.hoverable,nt=Ke===void 0?!1:Ke,rt=n.direction,Ue=n.collapsed,We=n.collapsible,ct=We===void 0?!1:We,Je=n.collapsibleIconRender,Ve=n.defaultCollapsed,lt=Ve===void 0?!1:Ve,st=n.onCollapse,it=n.checked,Ne=n.onChecked,Me=n.tabs,Ie=n.type,ie=Object(te.a)(n,J),ot=Object(E.useContext)(P.default.ConfigContext),dt=ot.getPrefixCls,Ze=Y(),ut=Object(ne.a)(lt,{value:Ue,onChange:st}),Ye=Object(D.a)(ut,2),be=Ye[0],jt=Ye[1],me=["xxl","xl","lg","md","sm","xs"],vt=function(p){var O=[0,0],T=Array.isArray(p)?p:[p,0];return T.forEach(function(M,Z){if(Object(ee.a)(M)==="object")for(var z=0;z<me.length;z+=1){var de=me[z];if(Ze[de]&&M[de]!==void 0){O[Z]=M[de];break}}else O[Z]=M||0}),O},oe=function(p,O){return p?O:{}},bt=function(p){var O=p;if(Object(ee.a)(p)==="object")for(var T=0;T<me.length;T+=1){var M=me[T];if(Ze[M]&&p[M]!==void 0){O=p[M];break}}var Z=oe(typeof O=="string"&&/\d%|\dpx/i.test(O),{width:O,flexShrink:0});return{span:O,colSpanStyle:Z}},j=dt("pro-card"),mt=vt(ke),Fe=Object(D.a)(mt,2),q=Fe[0],_=Fe[1],Ae=!1,De=R.a.Children.toArray($e),ft=De.map(function(y,p){var O;if(y==null||(O=y.type)===null||O===void 0?void 0:O.isProCard){var T;Ae=!0;var M=y.props.colSpan,Z=bt(M),z=Z.span,de=Z.colSpanStyle,gt=S()(["".concat(j,"-col")],(T={},Object(c.a)(T,"".concat(j,"-split-vertical"),se==="vertical"&&p!==De.length-1),Object(c.a)(T,"".concat(j,"-split-horizontal"),se==="horizontal"&&p!==De.length-1),Object(c.a)(T,"".concat(j,"-col-").concat(z),typeof z=="number"&&z>=0&&z<=24),T));return Object(a.jsx)("div",{style:Object(s.a)(Object(s.a)(Object(s.a)({},de),oe(q>0,{paddingRight:q/2,paddingLeft:q/2})),oe(_>0,{paddingTop:_/2,paddingBottom:_/2})),className:gt,children:R.a.cloneElement(y)},"pro-card-col-".concat((y==null?void 0:y.key)||p))}return y}),ht=S()("".concat(j),V,(u={},Object(c.a)(u,"".concat(j,"-border"),et),Object(c.a)(u,"".concat(j,"-contain-card"),Ae),Object(c.a)(u,"".concat(j,"-loading"),le),Object(c.a)(u,"".concat(j,"-split"),se==="vertical"||se==="horizontal"),Object(c.a)(u,"".concat(j,"-ghost"),at),Object(c.a)(u,"".concat(j,"-hoverable"),nt),Object(c.a)(u,"".concat(j,"-size-").concat(Ge),Ge),Object(c.a)(u,"".concat(j,"-type-").concat(Ie),Ie),Object(c.a)(u,"".concat(j,"-collapse"),be),Object(c.a)(u,"".concat(j,"-checked"),it),u)),Ot=S()("".concat(j,"-body"),(l={},Object(c.a)(l,"".concat(j,"-body-center"),we==="center"),Object(c.a)(l,"".concat(j,"-body-direction-column"),se==="horizontal"||rt==="column"),Object(c.a)(l,"".concat(j,"-body-wrap"),Xe&&Ae),l)),pt=Object(s.a)(Object(s.a)(Object(s.a)({},oe(q>0,{marginRight:-q/2,marginLeft:-q/2})),oe(_>0,{marginTop:-_/2,marginBottom:-_/2})),G),Qe=R.a.isValidElement(le)?le:Object(a.jsx)(Oe,{prefix:j,style:G.padding===0||G.padding==="0px"?{padding:24}:void 0}),fe=ct&&Ue===void 0&&(Je?Je({collapsed:be}):Object(a.jsx)(I.a,{rotate:be?void 0:90,className:"".concat(j,"-collapsible-icon")}));return Object(a.jsxs)("div",Object(s.a)(Object(s.a)({className:ht,style:X,ref:o,onClick:function(p){var O;Ne==null||Ne(p),ie==null||(O=ie.onClick)===null||O===void 0||O.call(ie,p)}},Object(B.a)(ie,["prefixCls","colSpan"])),{},{children:[(je||ce||fe)&&Object(a.jsxs)("div",{className:S()("".concat(j,"-header"),(g={},Object(c.a)(g,"".concat(j,"-header-border"),_e||Ie==="inner"),Object(c.a)(g,"".concat(j,"-header-collapsible"),fe),g)),style:Pe,onClick:function(){fe&&jt(!be)},children:[Object(a.jsxs)("div",{className:"".concat(j,"-title"),children:[fe,Object(a.jsx)(ae.a,{label:je,tooltip:qe||Ee,subTitle:Se})]}),ce&&Object(a.jsx)("div",{className:"".concat(j,"-extra"),children:ce})]}),Me?Object(a.jsx)("div",{className:"".concat(j,"-tabs"),children:Object(a.jsx)(b.a,Object(s.a)(Object(s.a)({onChange:Me.onChange},Me),{},{children:le?Qe:$e}))}):Object(a.jsx)("div",{className:Ot,style:pt,children:le?Qe:ft}),Object(a.jsx)(W,{actions:tt,prefixCls:j})]}))}),Q=F,H=e("u1OI"),pe=function(o){var u=Object(E.useContext)(P.default.ConfigContext),l=u.getPrefixCls,g=l("pro-card-divider"),V=o.className,X=o.style,w=X===void 0?{}:X,G=o.type,k=S()(g,V,Object(c.a)({},"".concat(g,"-").concat(G),G));return Object(a.jsx)("div",{className:k,style:w})},ge=pe,ye=e("VzZb"),xe=["key","tab","tabKey","disabled","destroyInactiveTabPane","children","className","style","cardProps"],$=function(o){var u=o.key,l=o.tab,g=o.tabKey,V=o.disabled,X=o.destroyInactiveTabPane,w=o.children,G=o.className,k=o.style,Pe=o.cardProps,je=Object(te.a)(o,xe),Se=Object(E.useContext)(P.default.ConfigContext),ce=Se.getPrefixCls,Ee=ce("pro-card-tabpane"),ve=S()(Ee,G);return Object(a.jsx)(b.a.TabPane,Object(s.a)(Object(s.a)({tabKey:g,tab:l,className:ve,style:k,disabled:V,destroyInactiveTabPane:X},je),{},{children:Object(a.jsx)(Q,Object(s.a)(Object(s.a)({},Pe),{},{children:w}))}),u)},Ce=$,Te=function(o){return Object(a.jsx)(Q,Object(s.a)({bodyStyle:{padding:0}},o))},x=Q;x.isProCard=!0,x.Divider=ge,x.TabPane=Ce,x.Group=Te;var N=x,C=h.a=N},rWUb:function(A,h,e){"use strict";e.d(h,"e",function(){return ee}),e.d(h,"d",function(){return he}),e.d(h,"a",function(){return te}),e.d(h,"h",function(){return ue}),e.d(h,"b",function(){return ae}),e.d(h,"i",function(){return S}),e.d(h,"c",function(){return ne}),e.d(h,"f",function(){return R}),e.d(h,"g",function(){return re});var s=e("k1fw"),a=e("9og8"),v=e("WmNS"),b=e.n(v),c=e("9kvl");function ee(d,r){return D.apply(this,arguments)}function D(){return D=Object(a.a)(b.a.mark(function d(r,t){return b.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(c.f)("/api/admin/templates",Object(s.a)({method:"GET",useCache:!1,params:Object(s.a)(Object(s.a)({},r),{},{per_page:r&&r.pageSize,page:r&&r.current})},t||{})));case 1:case"end":return i.stop()}},d)})),D.apply(this,arguments)}function he(d,r){return P.apply(this,arguments)}function P(){return P=Object(a.a)(b.a.mark(function d(r,t){return b.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(c.f)("/api/admin/templates/".concat(r),Object(s.a)({method:"GET"},t||{})));case 1:case"end":return i.stop()}},d)})),P.apply(this,arguments)}function te(d,r){return L.apply(this,arguments)}function L(){return L=Object(a.a)(b.a.mark(function d(r,t){return b.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(c.f)("/api/admin/templates",Object(s.a)({method:"POST",headers:{"Content-Type":"application/json"},data:r},t||{})));case 1:case"end":return i.stop()}},d)})),L.apply(this,arguments)}function ue(d,r,t){return I.apply(this,arguments)}function I(){return I=Object(a.a)(b.a.mark(function d(r,t,m){return b.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",Object(c.f)("/api/admin/templates/".concat(r),Object(s.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:t},m||{})));case 1:case"end":return f.stop()}},d)})),I.apply(this,arguments)}function ae(d,r){return K.apply(this,arguments)}function K(){return K=Object(a.a)(b.a.mark(function d(r,t){return b.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(c.f)("/api/admin/templates/".concat(r),Object(s.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},t||{})));case 1:case"end":return i.stop()}},d)})),K.apply(this,arguments)}function S(d){return B.apply(this,arguments)}function B(){return B=Object(a.a)(b.a.mark(function d(r){return b.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",Object(c.f)("/api/admin/templates/variables",Object(s.a)({method:"GET"},r||{})));case 1:case"end":return m.stop()}},d)})),B.apply(this,arguments)}function ne(d,r){return E.apply(this,arguments)}function E(){return E=Object(a.a)(b.a.mark(function d(r,t){return b.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(c.f)("/api/admin/templates/".concat(r,"/preview"),Object(s.a)({method:"GET"},t||{})));case 1:case"end":return i.stop()}},d)})),E.apply(this,arguments)}function R(d,r,t){return U.apply(this,arguments)}function U(){return U=Object(a.a)(b.a.mark(function d(r,t,m){return b.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",Object(c.f)("/api/admin/events/trigger-manually/".concat(r),Object(s.a)({method:"POST",headers:{"Content-Type":"application/json"},data:{users:t}},m||{})));case 1:case"end":return f.stop()}},d)})),U.apply(this,arguments)}function re(d,r,t){return W.apply(this,arguments)}function W(){return W=Object(a.a)(b.a.mark(function d(r,t,m){return b.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",Object(c.f)("/api/admin/products/".concat(t,"/trigger-event-manually/").concat(r),Object(s.a)({method:"POST",headers:{"Content-Type":"application/json"}},m||{})));case 1:case"end":return f.stop()}},d)})),W.apply(this,arguments)}},u1OI:function(A,h,e){}}]);
