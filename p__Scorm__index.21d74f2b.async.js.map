{"version":3,"file":"p__Scorm__index.21d74f2b.async.js","mappings":"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","sources":["webpack://ant-design-pro/./node_modules/@ant-design/pro-table/es/index.js","webpack://ant-design-pro/./src/components/SecureUpload/index.tsx","webpack://ant-design-pro/./src/components/Scorm/upload.tsx","webpack://ant-design-pro/./node_modules/@ant-design/icons-svg/es/asn/SendOutlined.js","webpack://ant-design-pro/./node_modules/@ant-design/icons/es/icons/SendOutlined.js","webpack://ant-design-pro/./src/pages/Scorm/index.tsx","webpack://ant-design-pro/./src/services/escola-lms/scorm.ts"],"sourcesContent":["import { FieldIndexColumn, FieldStatus } from '@ant-design/pro-field';\nimport { ConfigConsumer, arEGIntl, caESIntl, createIntl, enUSIntl, esESIntl, frFRIntl, itITIntl, jaJPIntl, msMYIntl, ptBRIntl, ruRUIntl, thTHIntl, viVNIntl, zhCNIntl, zhTWIntl } from '@ant-design/pro-provider';\nimport ProTable from \"./Table\";\nimport DragSortTable from \"./components/DragSortTable\";\nimport TableDropdown from \"./components/Dropdown\";\nimport EditableProTable from \"./components/EditableTable\";\nimport { CellEditorTable } from \"./components/EditableTable/CellEditorTable\";\nimport { RowEditorTable } from \"./components/EditableTable/RowEditorTable\";\nimport Search from \"./components/Form\";\nimport ListToolBar from \"./components/ListToolBar\";\nexport { CellEditorTable, ConfigConsumer, DragSortTable, EditableProTable, FieldIndexColumn as IndexColumn, ConfigConsumer as IntlConsumer, ListToolBar, ProTable, RowEditorTable, Search, TableDropdown, FieldStatus as TableStatus, arEGIntl, caESIntl, createIntl, enUSIntl, esESIntl, frFRIntl, itITIntl, jaJPIntl, msMYIntl, ptBRIntl, ruRUIntl, thTHIntl, viVNIntl, zhCNIntl, zhTWIntl };\nexport default ProTable;","import { ProFormUploadButton } from '@ant-design/pro-form';\nimport type { FormProps } from 'antd';\nimport { Form } from 'antd';\nimport type { UploadChangeParam } from 'antd/lib/upload';\nimport type { UploadFile } from 'antd/lib/upload/interface';\nimport ConditionalWrap from 'conditional-wrap';\nimport type { PropsWithChildren } from 'react';\nimport { useState } from 'react';\nimport { FormattedMessage, useIntl } from 'umi';\ndeclare const REACT_APP_API_URL: string;\n\nexport type SecureUploadType<T = API.File> = {\n  url: string;\n  name: string;\n  extra?: string;\n  onChange?: (info: UploadChangeParam<UploadFile<API.DefaultResponse<T>>>) => void;\n  onUpload?: (response: API.DefaultResponse<T>) => void;\n  on?: (info: UploadChangeParam<UploadFile<API.DefaultResponse<T>>>) => void;\n  accept?: string;\n  data?: Record<string, any>;\n  wrapInForm?: boolean;\n  title?: string;\n  formProps?: FormProps;\n  maxFiles?: number;\n  clearListAfterUpload?: boolean;\n  hideLabel?: boolean;\n  disabled?: boolean;\n  showUploadList?: boolean;\n};\n\nfunction SecureUpload<Type = API.File>({\n  onChange,\n  onUpload,\n  url,\n  name,\n  extra,\n  accept,\n  data,\n  wrapInForm = true,\n  title,\n  formProps,\n  maxFiles,\n  clearListAfterUpload,\n  hideLabel,\n  disabled,\n  showUploadList,\n}: PropsWithChildren<SecureUploadType<Type>>) {\n  const [infoState, setInfoState] = useState<UploadChangeParam<UploadFile<any>>>();\n  const intl = useIntl();\n\n  if (data && data[name]) {\n    // eslint-disable-next-line no-param-reassign\n    delete data[name];\n  }\n\n  return (\n    <ConditionalWrap\n      condition={wrapInForm}\n      wrap={(children: JSX.Element) => <Form {...formProps}>{children}</Form>}\n    >\n      <ProFormUploadButton\n        title={\n          title\n            ? title\n            : ` ${intl.formatMessage({\n                id: 'upload_click_here',\n              })}`\n        }\n        placeholder={intl.formatMessage({\n          id: 'upload_click_here',\n        })}\n        label={!hideLabel && <FormattedMessage id=\"upload\" />}\n        max={maxFiles ?? 2}\n        fieldProps={{\n          data,\n          accept,\n          name,\n          showUploadList,\n          headers: { Authorization: `Bearer ${localStorage.getItem('TOKEN')}` },\n          onChange: (info) => {\n            setInfoState(info);\n            if (onChange) {\n              onChange(info);\n            }\n            if (info.file.status === 'done') {\n              if (onUpload) {\n                onUpload(info.file.response);\n              }\n              if (clearListAfterUpload) {\n                setInfoState(undefined);\n              }\n            }\n          },\n        }}\n        action={`${window.REACT_APP_API_URL || REACT_APP_API_URL}${url}`}\n        extra={extra}\n        fileList={infoState?.fileList}\n        disabled={disabled}\n      />\n    </ConditionalWrap>\n  );\n}\n\nexport default SecureUpload;\n","import SecureUpload from '@/components/SecureUpload';\nimport React from 'react';\n\nexport const UploadScorm: React.FC<{\n  onSuccess: (scorm: API.SCORM) => void;\n  onError: (error: API.DefaultResponseError) => void;\n  hideLabel?: boolean;\n}> = ({ onSuccess, onError, hideLabel }) => {\n  return (\n    <SecureUpload<API.SCORMUPloaded>\n      url=\"/api/admin/scorm/upload\"\n      name=\"zip\"\n      accept=\"application/zip\"\n      hideLabel={hideLabel}\n      onChange={(info) => {\n        if (!info.file.response || info.file.status !== 'done') return;\n        const response = info.file.response;\n\n        if (!response.success) {\n          onError(response);\n          return;\n        }\n\n        onSuccess(response.data.model);\n      }}\n    />\n  );\n};\n\nexport default UploadScorm;\n","// This icon file is generated automatically.\nvar SendOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"defs\", \"attrs\": {}, \"children\": [{ \"tag\": \"style\", \"attrs\": {} }] }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z\" } }] }, \"name\": \"send\", \"theme\": \"outlined\" };\nexport default SendOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport SendOutlinedSvg from \"@ant-design/icons-svg/es/asn/SendOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar SendOutlined = function SendOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: SendOutlinedSvg\n  }));\n};\nvar RefIcon = /*#__PURE__*/React.forwardRef(SendOutlined);\nif (process.env.NODE_ENV !== 'production') {\n  RefIcon.displayName = 'SendOutlined';\n}\nexport default RefIcon;","import { PageContainer } from '@ant-design/pro-layout';\nimport type { ActionType, ProColumns } from '@ant-design/pro-table';\nimport ProTable from '@ant-design/pro-table';\nimport { Button, Popconfirm, Tooltip, message } from 'antd';\nimport React, { useRef } from 'react';\nimport { FormattedMessage, Link, useIntl } from 'umi';\n\nimport UploadScorm from '@/components/Scorm/upload';\nimport { deleteScorm, scorms } from '@/services/escola-lms/scorm';\nimport { DeleteOutlined, SendOutlined } from '@ant-design/icons';\n\nconst handleRemove = async (id: number) => {\n  await deleteScorm(id);\n  return true;\n};\n\nconst TableList: React.FC = () => {\n  const actionRef = useRef<ActionType>();\n  const intl = useIntl();\n\n  const columns: ProColumns<API.SCORM>[] = [\n    {\n      title: <FormattedMessage id=\"ID\" defaultMessage=\"ID\" />,\n      dataIndex: 'id',\n      hideInSearch: true,\n      sorter: true,\n      width: '80px',\n    },\n    {\n      title: <FormattedMessage id=\"version\" defaultMessage=\"version\" />,\n      dataIndex: 'version',\n      hideInSearch: true,\n      sorter: true,\n    },\n\n    {\n      title: <FormattedMessage id=\"newScorm\" defaultMessage=\"New Scorm\" />,\n      dataIndex: 'upload',\n      hideInSearch: false,\n      hideInTable: true,\n\n      renderFormItem: () => [\n        <UploadScorm\n          key=\"upload\"\n          hideLabel\n          onSuccess={() => {\n            if (actionRef.current) {\n              actionRef.current.reload();\n            }\n            message.success(\n              intl.formatMessage({ id: 'scorm_uploaded', defaultMessage: 'Scorm uploaded' }),\n            );\n          }}\n          onError={(error) => message.error(error.message || error.toString())}\n        />,\n      ],\n    },\n\n    {\n      title: <FormattedMessage id=\"SCOS\" defaultMessage=\"Sharable Content Objects\" />,\n      dataIndex: 'SCOS',\n      hideInSearch: true,\n      render: (_, record) => [\n        record.scos.map((sco) => (\n          <Link key={sco.uuid} to={`/courses/scorms/preview/${sco.uuid}`}>\n            <Tooltip title={<FormattedMessage id=\"preview\" defaultMessage=\"preview\" />}>\n              <Button size=\"small\" icon={<SendOutlined />} type=\"primary\">\n                {sco.title}\n              </Button>{' '}\n            </Tooltip>\n          </Link>\n        )),\n      ],\n    },\n\n    {\n      hideInSearch: true,\n      title: <FormattedMessage id=\"pages.searchTable.titleOption\" defaultMessage=\"操作\" />,\n      dataIndex: 'option',\n      valueType: 'option',\n      render: (_, record) => [\n        <Popconfirm\n          key=\"delete\"\n          title={\n            <FormattedMessage\n              id=\"deleteQuestion\"\n              defaultMessage=\"Are you sure to delete this record?\"\n            />\n          }\n          onConfirm={async () => {\n            const success = await handleRemove(record.id);\n            if (success) {\n              if (actionRef.current) {\n                actionRef.current.reload();\n              }\n            }\n          }}\n          okText={<FormattedMessage id=\"yes\" defaultMessage=\"Yes\" />}\n          cancelText={<FormattedMessage id=\"no\" defaultMessage=\"No\" />}\n        >\n          <Tooltip title={<FormattedMessage id=\"delete\" defaultMessage=\"delete\" />}>\n            <Button type=\"primary\" icon={<DeleteOutlined />} danger />\n          </Tooltip>\n        </Popconfirm>,\n      ],\n    },\n  ];\n\n  return (\n    <PageContainer>\n      <ProTable<API.SCORM, API.PageParams & { search: string; role: string }>\n        headerTitle={intl.formatMessage({\n          id: 'menu.Courses.SCORMs',\n          defaultMessage: 'scorms',\n        })}\n        actionRef={actionRef}\n        rowKey=\"id\"\n        search={{\n          layout: 'vertical',\n        }}\n        request={({ pageSize, current }, sort) => {\n          const sortArr = sort && Object.entries(sort)[0];\n          return scorms({\n            per_page: pageSize,\n            page: current,\n            order_by: sortArr && sortArr[0], // i like nested ternary\n            /* eslint-disable */ order: sortArr\n              ? sortArr[1] === 'ascend'\n                ? 'ASC'\n                : 'DESC'\n              : undefined,\n          }).then((response) => {\n            if (response.success) {\n              return {\n                data: response.data.data,\n                total: response.data.total,\n                success: true,\n              };\n            }\n            return [];\n          });\n        }}\n        columns={columns}\n      />\n    </PageContainer>\n  );\n};\n\nexport default TableList;\n","import type { AxiosRequestConfig } from '@umijs/max';\nimport { request } from 'umi';\n\n/**  GET /api/admin/users */\nexport async function scorms(\n  params: API.PageParams &\n    API.PaginationParams & {\n      search?: string;\n    },\n  options?: AxiosRequestConfig,\n) {\n  return request<API.ScormList>('/api/admin/scorm', {\n    params,\n    method: 'GET',\n    /* useCache: true */ useCache: false,\n    ...(options || {}),\n  });\n}\n\n/**  GET /api/scorm/scos */\nexport async function scormssco(\n  params: {\n    // query\n    current?: number;\n    pageSize?: number;\n    search?: string;\n  },\n  options?: AxiosRequestConfig,\n) {\n  return request<API.ScormScosList>('/api/admin/scorm/scos', {\n    params: {\n      ...params,\n      per_page: params.pageSize,\n      page: params.current,\n    },\n    method: 'GET',\n    /* useCache: true */ useCache: false,\n    ...(options || {}),\n  });\n}\n\nexport async function deleteScorm(id: number, options?: AxiosRequestConfig) {\n  return request<API.SCORM>(`/api/admin/scorm/${id}`, {\n    method: 'DELETE',\n    ...(options || {}),\n  });\n}\n"],"names":["SecureUpload","_ref","onChange","onUpload","url","name","extra","accept","data","_ref$wrapInForm","wrapInForm","title","formProps","maxFiles","clearListAfterUpload","hideLabel","disabled","showUploadList","_useState","useState","_useState2","_slicedToArray","infoState","setInfoState","intl","useIntl","_jsx","ConditionalWrap","condition","wrap","children","Form","_objectSpread","ProFormUploadButton","concat","formatMessage","id","placeholder","label","FormattedMessage","max","fieldProps","headers","Authorization","localStorage","getItem","info","file","status","response","undefined","action","window","REACT_APP_API_URL","fileList","UploadScorm","onSuccess","onError","success","model","SendOutlined","props","ref","AntdIcon","RefIcon","handleRemove","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_context","prev","next","deleteScorm","abrupt","stop","_x","apply","arguments","TableList","actionRef","useRef","columns","defaultMessage","dataIndex","hideInSearch","sorter","width","hideInTable","renderFormItem","current","reload","message","error","toString","render","_","record","scos","map","sco","Link","to","uuid","_jsxs","Tooltip","Button","size","icon","type","valueType","Popconfirm","onConfirm","_callee2","_context2","sent","okText","cancelText","DeleteOutlined","danger","PageContainer","ProTable","headerTitle","rowKey","search","layout","request","_ref3","sort","pageSize","sortArr","Object","entries","scorms","per_page","page","order_by","order","then","total","_x2","_scorms","params","options","method","useCache","scormssco","_x3","_x4","_scormssco","_x5","_x6","_deleteScorm","_callee3","_context3"],"sourceRoot":""}