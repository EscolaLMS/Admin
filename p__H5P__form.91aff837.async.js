(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"3CzR":function(Y,j,t){"use strict";var i=t("nhC9"),u=t("9kvl"),M=t("jCWc"),v=t("kPKH"),D=t("14J3"),A=t("BMrR"),U=t("T2oS"),m=t("W9HT"),x=t("fOrg"),y=t("+KLJ"),C=t("miYZ"),l=t("tsqr"),p=t("tJVT"),d=t("q1tI"),_=t.n(d),h=t("pDTe");function s(P){var c=Object(d.useRef)(P);Object(d.useEffect)(function(){var o=function(){var E=localStorage.getItem("TOKEN");c.current(E)};return window.addEventListener("token_change",o),function(){window.removeEventListener("token_change",o)}},[])}var n=t("nzng"),e=t("nKUr"),r="h5p-editor",a;(function(P){P.TokenChanged="TOKEN_CHANGED"})(a||(a={}));var I=function(c){var o,g=document.getElementById(r);if(!g){console.error("There is no iframe with id '".concat(r,"'"));return}(o=g.contentWindow)===null||o===void 0||o.postMessage({type:a.TokenChanged,token:c},"*")},O=function(c){var o=c.id,g=c.onSubmitted,E=c.onLoaded,K=Object(d.useState)(),L=Object(p.a)(K,2),H=L[0],w=L[1],J=Object(d.useState)(!1),N=Object(p.a)(J,2),F=N[0],R=N[1],G=Object(d.useState)(),X=Object(p.a)(G,2),W=X[0],B=X[1],$=Object(u.l)(),S=$.locale.split("-")[0];s(I),Object(d.useEffect)(function(){o&&(R(!0),Object(n.c)(o==="new"?void 0:o,S).then(function(f){f.success?(E&&E(f.data),w(f.data)):B(f.message)}).catch(function(f){return f&&B(f.toString())}).finally(function(){return R(!1)}))},[o]);var z=Object(d.useCallback)(function(f){R(!0),Object(n.f)(f,o==="new"?void 0:o).then(function(b){b.success?(g(b.data.id),l.b.success(Object(e.jsx)(u.a,{id:"h5p_edited",defaultMessage:"H5P Element edited and saved successfully"}))):B(b.message)}).catch(function(b){return b&&B(b.toString())}).finally(function(){return R(!1)})},[]);return H?Object(e.jsxs)(_.a.Fragment,{children:[W&&Object(e.jsx)(y.a,{message:W,type:"error"}),H&&Object(e.jsx)(h.ContextlessEditor,{onError:function(b){return console.error(b)},state:H,allowSameOrigin:!0,onSubmit:z,loading:F,lang:S,iframeId:r})]}):Object(e.jsx)(v.a,{children:Object(e.jsxs)(A.a,{justify:"center",align:"middle",children:[W&&Object(e.jsx)(y.a,{message:W,type:"error"}),Object(e.jsx)(m.a,{})]})})},k=O,Z=t("sN0a"),Q=function(c){var o=c.defaultCard,g=o===void 0?"edit":o,E=c.id,K=c.onSubmit,L=c.onLoaded;return Object(e.jsxs)(i.a,{tabs:{type:"card",defaultActiveKey:g},children:[Object(e.jsx)(i.a.TabPane,{disabled:!E,tab:Object(e.jsx)(u.a,{id:"edit"}),children:Object(e.jsx)(k,{id:E,onSubmitted:K,onLoaded:L},E)},"edit"),E!=="new"&&Object(e.jsx)(i.a.TabPane,{disabled:!E,tab:Object(e.jsx)(u.a,{id:"preview"}),children:Object(e.jsx)(Z.a,{id:E,onLoaded:L})},"preview")]})},q=j.a=Q},nzng:function(Y,j,t){"use strict";t.d(j,"d",function(){return D}),t.d(j,"c",function(){return x}),t.d(j,"b",function(){return y}),t.d(j,"f",function(){return C}),t.d(j,"e",function(){return p}),t.d(j,"a",function(){return _});var i=t("qLMh"),u=t("k1fw"),M=t("9og8"),v=t("9kvl");function D(s,n){return A.apply(this,arguments)}function A(){return A=Object(M.a)(Object(i.a)().mark(function s(n,e){return Object(i.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(v.i)("/api/admin/hh5p/content",Object(u.a)({method:"GET",params:n},e||{})));case 1:case"end":return a.stop()}},s)})),A.apply(this,arguments)}function U(s,n){return m.apply(this,arguments)}function m(){return m=Object(M.a)(Object(i.a)().mark(function s(n,e){return Object(i.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(v.i)("/api/admin/hh5p/content/".concat(n),Object(u.a)({method:"GET"},e||{})));case 1:case"end":return a.stop()}},s)})),m.apply(this,arguments)}var x=function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en",r=arguments.length>2?arguments[2]:void 0,a=n?"/api/admin/hh5p/editor/".concat(n):"/api/admin/hh5p/editor";return a=e?"".concat(a,"?lang=").concat(e):a,Object(v.i)(a,Object(u.a)({method:"GET"},r||{}))},y=function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en",r=arguments.length>2?arguments[2]:void 0,a="/api/admin/hh5p/content/".concat(n);return a=e?"".concat(a,"?lang=").concat(e):a,Object(v.i)(a,Object(u.a)({method:"GET"},r||{}))};function C(s,n,e){return l.apply(this,arguments)}function l(){return l=Object(M.a)(Object(i.a)().mark(function s(n,e,r){return Object(i.a)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",Object(v.i)(e?"/api/admin/hh5p/content/".concat(e):"/api/admin/hh5p/content",Object(u.a)({method:"POST",headers:{"Content-Type":"application/json"},data:n},r||{})));case 1:case"end":return I.stop()}},s)})),l.apply(this,arguments)}function p(s){return d.apply(this,arguments)}function d(){return d=Object(M.a)(Object(i.a)().mark(function s(n){return Object(i.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(v.i)("/api/admin/hh5p/content/".concat(n),{method:"DELETE"}));case 1:case"end":return r.stop()}},s)})),d.apply(this,arguments)}function _(s){return h.apply(this,arguments)}function h(){return h=Object(M.a)(Object(i.a)().mark(function s(n){return Object(i.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(v.i)("/api/admin/hh5p/content?per_page=0",Object(u.a)({method:"GET"},n||{})));case 1:case"end":return r.stop()}},s)})),h.apply(this,arguments)}},pj0m:function(Y,j,t){"use strict";t.r(j);var i=t("tJVT"),u=t("q1tI"),M=t.n(u),v=t("Ty5D"),D=t("9kvl"),A=t("3CzR"),U=t("tMyG"),m=t("nKUr"),x=t.n(m);j.default=function(){var y=Object(v.l)(),C=Object(D.l)(),l=y.h5p,p=Object(u.useState)(""),d=Object(i.a)(p,2),_=d[0],h=d[1];return Object(m.jsx)(U.a,{title:Object(m.jsxs)(m.Fragment,{children:[_?Object(m.jsx)(D.a,{id:"H5P_edit_content_title"}):Object(m.jsx)(D.a,{id:"H5P_new_content_title"})," ".concat(_)]}),header:{breadcrumb:{routes:[{path:"h5ps",breadcrumbName:C.formatMessage({id:"H5P"})},{path:_,breadcrumbName:C.formatMessage({id:"form"})}]}},children:Object(m.jsx)(A.a,{onLoaded:function(n){var e=n.contents&&n.contents["cid-".concat(l)];e&&e.title&&h(e.title)},onSubmit:function(n){return l==="new"&&D.f.push("/courses/h5ps/".concat(n))},id:l==="new"||!l?"new":Number(l)})})}},sN0a:function(Y,j,t){"use strict";var i=t("/zsF"),u=t("PArb"),M=t("oBTY"),v=t("jCWc"),D=t("kPKH"),A=t("14J3"),U=t("BMrR"),m=t("T2oS"),x=t("W9HT"),y=t("fOrg"),C=t("+KLJ"),l=t("tJVT"),p=t("tU7J"),d=t("wFql"),_=t("q1tI"),h=t.n(_),s=t("nzng"),n=t("pDTe"),e=t.n(n),r=t("9kvl"),a=t("ovOe"),I=t.n(a),O=t("nKUr"),k=t.n(O),Z=d.a.Title,Q=function(P){var c=P.id,o=P.onXAPI,g=P.onLoaded,E=Object(_.useState)(),K=Object(l.a)(E,2),L=K[0],H=K[1],w=Object(_.useState)(!1),J=Object(l.a)(w,2),N=J[0],F=J[1],R=Object(_.useState)([]),G=Object(l.a)(R,2),X=G[0],W=G[1],B=Object(_.useState)(),$=Object(l.a)(B,2),S=$[0],z=$[1],f=Object(r.l)(),b=f.locale.split("-")[0];return Object(_.useEffect)(function(){c&&(F(!0),Object(s.b)(c,b).then(function(T){T.success?(g&&g(T.data),H(T.data)):z(T.message)}).catch(function(T){return T&&z(T.toString())}).finally(function(){return F(!1)}))},[c]),L?Object(O.jsxs)(h.a.Fragment,{children:[S&&Object(O.jsx)(C.a,{message:S,type:"error"}),Object(O.jsx)(n.ContextlessPlayer,{contentId:c,onError:function(V){return console.error(V)},state:L,allowSameOrigin:!0,loading:N,onXAPI:function(V){o?o(V):W(function(tt){return[].concat(Object(M.a)(tt),[V])})}}),!o&&Object(O.jsxs)(h.a.Fragment,{children:[Object(O.jsx)(u.a,{}),Object(O.jsxs)("div",{style:{overflow:"auto",maxHeight:"400px"},children:[Object(O.jsx)(Z,{level:5,children:"XAPI Events"}),Object(O.jsx)(I.a,{src:X})]})]})]}):Object(O.jsx)(D.a,{children:Object(O.jsxs)(U.a,{justify:"center",align:"middle",children:[S&&Object(O.jsx)(C.a,{message:S,type:"error"}),Object(O.jsx)(x.a,{})]})})};j.a=Q}}]);

//# sourceMappingURL=p__H5P__form.91aff837.async.js.map