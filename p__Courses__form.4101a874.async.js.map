{"version":3,"file":"p__Courses__form.4101a874.async.js","mappings":"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","sources":["webpack://ant-design-pro/./src/components/CourseStatistics/ExportStatsButton.tsx","webpack://ant-design-pro/./src/components/CourseStatistics/userProgress.tsx","webpack://ant-design-pro/./src/components/FilesBrowser/index.tsx","webpack://ant-design-pro/./src/hooks/useTokenChangeListener.ts","webpack://ant-design-pro/./src/components/H5P/editor.tsx","webpack://ant-design-pro/./src/components/H5P/card.tsx","webpack://ant-design-pro/./src/components/H5P/player.tsx","webpack://ant-design-pro/./src/components/H5P/upload.tsx","webpack://ant-design-pro/./src/components/Pdf/ziplist.tsx","webpack://ant-design-pro/./src/services/escola-lms/pdfs.ts","webpack://ant-design-pro/./src/components/Pdf/list.tsx","webpack://ant-design-pro/./src/components/ProgramForm/Context/index.tsx","webpack://ant-design-pro/./src/components/Scorm/preview.tsx","webpack://ant-design-pro/./src/components/SecureUpload/browser.tsx","webpack://ant-design-pro/./src/components/SecureUpload/index.tsx","webpack://ant-design-pro/./src/components/AssignQuestionnary/index.tsx","webpack://ant-design-pro/./src/components/CourseTopicsStatistics/ExportTopicStatsButton.tsx","webpack://ant-design-pro/./src/components/CourseTopicsStatistics/GiftQuizStatistics.tsx","webpack://ant-design-pro/./src/components/CourseTopicsStatistics/index.tsx","webpack://ant-design-pro/./src/components/CourseStatistics/chart.tsx","webpack://ant-design-pro/./src/components/CourseStatistics/index.tsx","webpack://ant-design-pro/./src/components/ProFormVideoUpload/index.tsx","webpack://ant-design-pro/./src/services/api.js","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/ParentLesson/index.tsx","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/LessonForm/form.tsx","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/LessonForm/index.tsx","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/TopicForm/descriptionModal.tsx","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/TopicForm/form.tsx","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/TopicForm/media/index.ts","webpack://ant-design-pro/./src/components/H5PContentSelect/index.tsx","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/TopicForm/media/h5p.tsx","webpack://ant-design-pro/./src/components/OEmbed/index.tsx","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/TopicForm/media/oembed.tsx","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/TopicForm/media/text.tsx","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/TopicForm/media/upload.tsx","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/TopicForm/resources.tsx","webpack://ant-design-pro/./src/components/Scorm/select.tsx","webpack://ant-design-pro/./src/components/Scorm/index.tsx","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/TopicForm/media/giftquiz.tsx","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/TopicForm/media/project.tsx","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/TopicForm/index.tsx","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/List/NewLessonListItem.tsx","webpack://ant-design-pro/./src/icons/recommender.tsx","webpack://ant-design-pro/./src/icons/index.tsx","webpack://ant-design-pro/./src/services/escola-lms/recommender.ts","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/List/Recommender/utils.ts","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/List/Recommender/ExerciseRecommender.tsx","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/List/Recommender/InfoRecommender.tsx","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/List/Recommender/RecommenderPopoverContent.tsx","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/List/Recommender/RecommenderPopoverInfo.tsx","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/List/Recommender/index.tsx","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/List/Recommender/CourseRecommender.tsx","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/List/Recommender/RecommenderTopicSelector.tsx","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/List/TopicTypesSelector.tsx","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/List/LessonList/utils.ts","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/List/LessonList/index.tsx","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/List/index.tsx","webpack://ant-design-pro/./src/components/ProgramForm/ThreeColProgram/index.tsx","webpack://ant-design-pro/./src/components/ProgramForm/index.tsx","webpack://ant-design-pro/./src/services/escola-lms/projects.ts","webpack://ant-design-pro/./src/components/ProjectsList/index.tsx","webpack://ant-design-pro/./src/pages/Courses/components/CourseSuccessModal.tsx","webpack://ant-design-pro/./src/pages/Courses/components/CourseAccess.tsx","webpack://ant-design-pro/./src/services/escola-lms/certificate.ts","webpack://ant-design-pro/./src/components/Certificate/index.tsx","webpack://ant-design-pro/./src/pages/Courses/components/CourseCertificateForm.tsx","webpack://ant-design-pro/./src/pages/Courses/form.tsx","webpack://ant-design-pro/./src/pages/Settings/components/ModalForm.tsx","webpack://ant-design-pro/./src/pages/Settings/global.tsx","webpack://ant-design-pro/./src/services/escola-lms/files.ts","webpack://ant-design-pro/./src/services/escola-lms/h5p.ts","webpack://ant-design-pro/./src/services/escola-lms/reports.ts","webpack://ant-design-pro/./src/services/escola-lms/scorm.ts"],"sourcesContent":["import { ExportOutlined } from '@ant-design/icons';\nimport { Button } from 'antd';\nimport React, { useCallback, useState } from 'react';\nimport { FormattedMessage } from 'umi';\n\nimport { exportStatForCourse } from '@/services/escola-lms/reports';\n\ninterface Props {\n  course_id: number;\n  stat?: API.ExportStatForCourseStat;\n}\n\nexport const ExportStatsButton: React.FC<Props> = ({\n  course_id,\n  stat = 'EscolaLms\\\\Reports\\\\Stats\\\\Course\\\\FinishedTopics',\n}) => {\n  const [loading, setLoading] = useState(false);\n\n  const onClickFactory = useCallback(\n    (courseId: number) => async () => {\n      setLoading(true);\n      try {\n        const response = await exportStatForCourse(courseId, {\n          stat,\n        });\n\n        if (response instanceof Blob) {\n          const downloadLink = document.createElement('a');\n          downloadLink.href = window.URL.createObjectURL(response);\n          downloadLink.download = `finished_topics_${course_id}.xlsx`;\n          document.body.appendChild(downloadLink);\n          downloadLink.click();\n          document.body.removeChild(downloadLink);\n        }\n      } catch (error) {\n        console.error(error);\n      } finally {\n        setLoading(false);\n      }\n    },\n    [stat],\n  );\n\n  return (\n    <Button type=\"primary\" loading={loading} onClick={onClickFactory(course_id)}>\n      <ExportOutlined /> <FormattedMessage id=\"export\" />\n    </Button>\n  );\n};\n","import { DATETIME_FORMAT } from '@/consts/dates';\nimport { timeDisplay } from '@/utils/utils';\nimport { Column } from '@ant-design/plots';\nimport ProCard from '@ant-design/pro-card';\nimport { Row, Select, Space, Switch, Table, Tag } from 'antd';\nimport type { ColumnsType } from 'antd/es/table';\nimport { format } from 'date-fns';\nimport React, { useMemo, useState } from 'react';\nimport ScrollContainer from 'react-indiana-drag-scroll';\nimport { FormattedMessage, useIntl } from 'umi';\nimport TypeButtonDrawer from '../TypeButtonDrawer';\nimport { ExportStatsButton } from './ExportStatsButton';\n\ntype UserStatColumn = Record<string, number | string | API.FinishedTopicsUserStat> & {\n  email: string;\n  id: number;\n};\n\nconst findH5PType = (topic: API.TopicH5P) => {\n  if (topic.topicable.content.contents) {\n    return Object.values(topic.topicable.content.contents)[0].library;\n  }\n  return 'H5P';\n};\n\nexport const UserProgress: React.FC<{\n  course_id: number;\n  topics: API.Topic[];\n  stats: API.FinishedTopicsUserStats[];\n}> = ({ course_id, topics, stats }) => {\n  const [showSeconds, setShowSeconds] = useState(false);\n\n  const columns: ColumnsType<UserStatColumn> = useMemo(() => {\n    return [\n      {\n        title: <FormattedMessage id=\"user\" />,\n        dataIndex: 'id',\n        render: (id: number) => <TypeButtonDrawer type=\"App\\Models\\User\" type_id={id} />,\n      },\n      {\n        title: <FormattedMessage id=\"email\" />,\n        dataIndex: 'email',\n      },\n      ...topics.map((topic) => {\n        let type: string | undefined = topic.topicable_type?.split('\\\\').pop();\n\n        if (type === 'H5P') {\n          type = findH5PType(topic as API.TopicH5P);\n        }\n\n        return {\n          render: (row: API.FinishedTopicsUserStat | undefined) => {\n            let result = 0;\n\n            if (row) {\n              if (row.started_at && row.finished_at) {\n                result = 1;\n              } else if (row.started_at) {\n                result = 2;\n              }\n            }\n\n            switch (result) {\n              case 1:\n                return (\n                  <Space>\n                    <Tag color=\"success\">F</Tag>\n                    {showSeconds && row?.seconds && <small>{timeDisplay(row.seconds)}</small>}\n                  </Space>\n                );\n              case 2:\n                return (\n                  <Space>\n                    <Tag color=\"blue\">S</Tag>\n                    {showSeconds && row?.seconds && <small>{timeDisplay(row.seconds)}</small>}\n                  </Space>\n                );\n              case 0:\n              default:\n                return (\n                  <React.Fragment>\n                    <Tag color=\"error\">N</Tag>\n                  </React.Fragment>\n                );\n            }\n          },\n\n          title: (\n            <small>\n              <Tag>{type}</Tag> {topic.title}\n            </small>\n          ),\n          dataIndex: topic.id,\n        };\n      }),\n    ];\n  }, [topics, showSeconds]);\n\n  const dataSource: UserStatColumn[] = useMemo(() => {\n    return stats.map((userStat) =>\n      topics.reduce(\n        (acc, topic) => {\n          const result = userStat.topics.find((userStatTopic) => userStatTopic.id === topic.id);\n          return { ...acc, [Number(topic.id)]: result ?? 0 };\n        },\n        { email: userStat.email, id: userStat.id } as UserStatColumn,\n      ),\n    );\n  }, [stats, topics]);\n\n  return (\n    <Table\n      title={() => (\n        <Row justify=\"space-between\" align=\"middle\">\n          <Space>\n            <FormattedMessage id=\"Finished\" defaultMessage=\"Finished:\" />{' '}\n            <Tag color=\"success\">F</Tag>\n            <FormattedMessage id=\"Started\" defaultMessage=\"Started:\" /> <Tag color=\"blue\">S</Tag>\n            <FormattedMessage id=\"NotStarted\" defaultMessage=\"Not Started:\" />{' '}\n            <Tag color=\"error\">N</Tag>\n            <FormattedMessage id=\"ShowMinutes\" defaultMessage=\"Show minutes spent on topic:\" />{' '}\n            <Switch checked={showSeconds} onChange={(v) => setShowSeconds(v)} />\n          </Space>\n          <ExportStatsButton course_id={course_id} />\n        </Row>\n      )}\n      columns={columns}\n      dataSource={dataSource}\n      size=\"small\"\n      scroll={{ x: 1500 }}\n      components={{\n        table: (props: React.HTMLAttributes<HTMLTableElement>) => (\n          <ScrollContainer horizontal={true} style={{ maxWidth: 'auto' }} hideScrollbars={false}>\n            <table {...props} />\n          </ScrollContainer>\n        ),\n      }}\n    />\n  );\n};\n\nexport const UserCourseFinish: React.FC<{\n  stats: API.FinishedCourseUserStats[];\n  attempts: API.CourseAttempts[];\n}> = ({ stats, attempts }) => {\n  const columns: ColumnsType<{ email: string; finished_at: Date | string }> = useMemo(() => {\n    return [\n      {\n        title: <FormattedMessage id=\"user\" />,\n        dataIndex: 'id',\n        render: (id: number) => <TypeButtonDrawer type=\"App\\Models\\User\" type_id={id} />,\n      },\n      {\n        title: <FormattedMessage id=\"email\" />,\n        dataIndex: 'email',\n      },\n      {\n        title: <FormattedMessage id=\"attempt\" defaultMessage=\"Attempt\" />,\n        dataIndex: 'attempt',\n      },\n      {\n        title: <FormattedMessage id=\"finished_at\" defaultMessage=\"Finished at\" />,\n        dataIndex: 'finished_at',\n        render: (text) => (text ? format(new Date(text), DATETIME_FORMAT) : ''),\n      },\n    ];\n  }, []);\n\n  const dataSource: { email: string; finished_at: Date | string }[] = useMemo(() => {\n    return stats.map(({ id, email, finished_at }) => {\n      const courseAttempts = attempts?.find((attempt) => attempt.id === id);\n      const attemptCount = Array.isArray(courseAttempts?.attempts)\n        ? courseAttempts?.attempts.length\n        : 0;\n\n      return {\n        id,\n        email,\n        finished_at,\n        attempt: attemptCount,\n      };\n    });\n  }, [stats]);\n\n  return (\n    <Table\n      title={() => (\n        <Space>\n          <FormattedMessage id=\"course.finished\" defaultMessage=\"Finished\" />\n        </Space>\n      )}\n      columns={columns}\n      dataSource={dataSource}\n      size=\"small\"\n      scroll={{ x: 500 }}\n    />\n  );\n};\n\nexport const UserCourseAttempts: React.FC<{ stats: API.CourseAttempts[] }> = ({ stats }) => {\n  const [choosenUserEmail, setChoosenUserEmail] = useState<string | null>(null);\n  const [choosenAttempt, setChoosenAttempt] = useState<number | null>(null);\n  const intl = useIntl();\n\n  const dataSource = useMemo(() => {\n    return stats.flatMap((userStats) =>\n      Object.values(userStats.attempts).flatMap(({ dates, attempt }) => {\n        const datesValue = Object.values(dates).flatMap(({ date, seconds_total }) => {\n          return {\n            date,\n            attempt,\n            seconds_total,\n            email: userStats.email,\n          };\n        });\n\n        return datesValue;\n      }),\n    );\n  }, [stats]);\n\n  const config: any = {\n    xField: 'date',\n    yField: 'seconds_total',\n    seriesField: 'attempt',\n    isStack: true,\n    xAxis: {\n      label: {\n        autoHide: true,\n        autoRotate: false,\n      },\n    },\n    slider: {\n      start: 0,\n      end: 1,\n    },\n    label: {\n      position: 'middle',\n      layout: [\n        {\n          type: 'interval-adjust-position',\n        },\n        {\n          type: 'interval-hide-overlap',\n        },\n        {\n          type: 'adjust-color',\n        },\n      ],\n    },\n  };\n\n  return (\n    <ProCard\n      title={\n        <Space>\n          <FormattedMessage id=\"course.interactions_time_in_days\" />\n          <Select\n            showSearch\n            value={choosenUserEmail}\n            onChange={(newValue) => {\n              setChoosenUserEmail(newValue);\n              setChoosenAttempt(null);\n            }}\n            placeholder={<FormattedMessage id=\"select_person\" defaultMessage=\"Select a person\" />}\n          >\n            {stats.map(({ id, email }) => (\n              <Select.Option key={id} value={email}>\n                {email}\n              </Select.Option>\n            ))}\n          </Select>\n          <Select\n            value={choosenAttempt}\n            onChange={(newValue) => setChoosenAttempt(newValue)}\n            disabled={choosenUserEmail === null}\n            placeholder={<FormattedMessage id=\"select_attempt\" defaultMessage=\"Select attempt\" />}\n          >\n            {[\n              ...new Set(\n                dataSource\n                  .filter(({ email }) => email === choosenUserEmail)\n                  .map(({ attempt }) => attempt),\n              ),\n            ].map((attempt) => (\n              <Select.Option value={attempt} key={attempt}>\n                <FormattedMessage id=\"attempt\" defaultMessage=\"Attempt\" /> {attempt}\n              </Select.Option>\n            ))}\n          </Select>\n        </Space>\n      }\n      colSpan={12}\n      layout=\"center\"\n    >\n      <div style={{ overflow: 'auto', minHeight: '400px', width: '100%' }}>\n        <Column\n          {...config}\n          tooltip={{\n            title: `${intl.formatMessage({ id: 'attempt' })}`,\n            formatter: (datum: { seconds_total: number; attempt: string }) => {\n              const minutes = Math.floor(+datum.seconds_total / 60);\n              const seconds = +datum.seconds_total > 60 ? +datum.seconds_total - minutes * 60 : 0;\n\n              return {\n                name: datum.attempt,\n                value: `${minutes}m ${seconds}s`,\n              };\n            },\n          }}\n          data={dataSource\n            .filter(({ email }) => email === choosenUserEmail)\n            .filter(({ attempt }) =>\n              Number.isInteger(choosenAttempt) ? attempt === choosenAttempt : true,\n            )}\n        />\n      </div>\n    </ProCard>\n  );\n};\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\n\nimport { files, findFile, remove } from '@/services/escola-lms/files';\nimport { Button, Input, List, Pagination, Space, Typography } from 'antd';\n\nimport { DeleteOutlined, DownloadOutlined, FolderOutlined } from '@ant-design/icons';\nimport { FormattedMessage, useIntl } from 'umi';\n\nimport SecureUpload from '@/components/SecureUpload';\n\nimport './index.css';\n\ninterface FormWysiwygProps {\n  hideDeleteBtn?: boolean;\n  forceLoading?: boolean;\n  defaultDirectory?: string;\n  hideAddBtn?: boolean;\n  onFile?: (file: API.File, directory?: string) => void;\n}\n\ntype FileBrowserState = {\n  loading: boolean;\n  name: string;\n  directory: string;\n  current_page: number;\n  data?: API.File[];\n  per_page: number;\n  last_page: number;\n  total: number;\n};\n\nconst FilesBrowserActions: React.FC<{\n  directory: string;\n  onUploaded: (dir: string, file: API.File) => void;\n}> = ({ directory, onUploaded }) => {\n  return (\n    <Space align=\"start\">\n      <Typography.Text>\n        <FormattedMessage id=\"pages.files.filesBrowser\" />\n        <Typography.Text code>{directory}</Typography.Text>\n      </Typography.Text>\n      <SecureUpload\n        url=\"/api/admin/file/upload\"\n        name=\"file[]\"\n        data={{\n          target: directory,\n        }}\n        onUpload={(response) => {\n          if (response.success) {\n            onUploaded(directory, response.data);\n          }\n        }}\n      />\n    </Space>\n  );\n};\n\nexport const FilesBrowser: React.FC<FormWysiwygProps> = ({\n  defaultDirectory = '/',\n  onFile,\n  hideDeleteBtn = false,\n  forceLoading = false,\n  hideAddBtn = false,\n}) => {\n  const intl = useIntl();\n  const [state, setState] = useState<FileBrowserState>({\n    loading: false,\n    name: '',\n    directory: defaultDirectory,\n    current_page: 1,\n    data: undefined,\n    per_page: 1,\n    last_page: 1,\n    total: 0,\n  });\n\n  const controllerRef = useRef<AbortController | null>();\n\n  const setLoading = useCallback((loading: boolean) => {\n    setState((prevState) => ({\n      ...prevState,\n      loading,\n    }));\n  }, []);\n\n  const handleSuccessResponse = useCallback(\n    (response: API.FileList, dir: string) => {\n      if (response.success) {\n        setState((prevState) => ({\n          ...prevState,\n          ...response.data,\n          data: [\n            {\n              url: dir.split('/').slice(0, -1).join('/'),\n              name: '..',\n              created_at: '',\n              mime: 'directory',\n            } as API.File,\n            ...response.data.data.map((file: API.File) => ({\n              ...file,\n              url: file.mime === 'directory' ? `${dir}/${file.name}` : file.url,\n            })),\n          ].filter((file: API.File) => {\n            if (dir === '/' || dir === defaultDirectory) {\n              return file.name !== '..';\n            }\n            return true;\n          }),\n          directory: dir,\n          loading: false,\n        }));\n      }\n    },\n    [setLoading],\n  );\n\n  const fetchFiles = useCallback(\n    (dir: string, page = 1) => {\n      const abort = () => controllerRef.current && controllerRef.current.abort();\n      abort();\n\n      controllerRef.current = new AbortController();\n\n      setLoading(true);\n\n      files({ directory: dir, page }, { signal: controllerRef.current?.signal })\n        .then((response) => {\n          if (response.success) {\n            handleSuccessResponse(response, dir);\n          }\n        })\n        .catch(() => setLoading(false));\n      return () => {\n        abort();\n      };\n    },\n    [setLoading],\n  );\n\n  useEffect(() => {\n    return fetchFiles(defaultDirectory);\n  }, [defaultDirectory, fetchFiles]);\n\n  const onRemove = useCallback(\n    (url: string) => {\n      setLoading(true);\n\n      remove(url)\n        .then(() => {\n          fetchFiles(state.directory);\n        })\n        .catch(() => {\n          setLoading(false);\n        });\n    },\n    [fetchFiles, setLoading, state.directory],\n  );\n\n  const findByInputValue = useCallback(\n    (dir: string, input: string, page = 1) => {\n      const abort = () => controllerRef.current && controllerRef.current.abort();\n      abort();\n\n      controllerRef.current = new AbortController();\n\n      setLoading(true);\n\n      findFile({ directory: dir, name: input, page }, { signal: controllerRef.current?.signal })\n        .then((response) => {\n          if (response.success) {\n            handleSuccessResponse(response, dir);\n          }\n        })\n        .catch(() => setLoading(false));\n      return () => {\n        abort();\n      };\n    },\n    [setLoading],\n  );\n\n  return (\n    <div className=\"file-browser\">\n      <div className=\"file-browser__header\">\n        <Input\n          placeholder={intl.formatMessage({\n            id: 'search_file',\n          })}\n          className=\"file-browser__input\"\n          onChange={(e) =>\n            setState((prev) => {\n              return { ...prev, name: e.target.value };\n            })\n          }\n          value={state.name}\n        />\n        <div>\n          <Button className=\"file-browser__button\" onClick={() => fetchFiles(state.directory)}>\n            <FormattedMessage id=\"reset\" />\n          </Button>\n          <Button\n            className=\"file-browser__button\"\n            type=\"primary\"\n            onClick={() => findByInputValue(state.directory, state.name)}\n          >\n            <FormattedMessage id=\"query\" />\n          </Button>\n        </div>\n      </div>\n      <List\n        loading={state.loading || forceLoading}\n        size=\"small\"\n        itemLayout=\"horizontal\"\n        dataSource={state.data}\n        header={\n          hideAddBtn ? null : (\n            <FilesBrowserActions\n              directory={state.directory}\n              onUploaded={(dir, file) => {\n                if (file) {\n                  fetchFiles(dir);\n                  if (onFile) {\n                    onFile(file, dir);\n                  }\n                }\n              }}\n            />\n          )\n        }\n        footer={\n          hideAddBtn ? null : (\n            <FilesBrowserActions\n              directory={state.directory}\n              onUploaded={(dir, file) => {\n                fetchFiles(dir);\n                if (file && onFile) {\n                  onFile(file, dir);\n                }\n              }}\n            />\n          )\n        }\n        renderItem={(item) => (\n          <List.Item\n            actions={\n              item.mime !== 'directory' && !hideDeleteBtn\n                ? [\n                    <Button\n                      key=\"dir\"\n                      type=\"default\"\n                      danger\n                      icon={<DeleteOutlined />}\n                      size=\"small\"\n                      onClick={() => onRemove(item.url)}\n                    />,\n                  ]\n                : []\n            }\n          >\n            <List.Item.Meta\n              avatar={\n                item.mime === 'directory' ? (\n                  <Button\n                    type=\"primary\"\n                    icon={<FolderOutlined />}\n                    size=\"small\"\n                    onClick={() => fetchFiles(item.url)}\n                  />\n                ) : (\n                  <a href={item.url} target={'_blank'} rel=\"noreferrer\">\n                    <Button type=\"default\" icon={<DownloadOutlined />} size=\"small\" />\n                  </a>\n                )\n              }\n              description={\n                <React.Fragment>\n                  <Button\n                    type=\"text\"\n                    size=\"small\"\n                    onClick={() =>\n                      item.mime === 'directory'\n                        ? fetchFiles(item.url)\n                        : onFile && onFile(item, state.directory)\n                    }\n                  >\n                    {item.name}\n                  </Button>\n                </React.Fragment>\n              }\n            />\n          </List.Item>\n        )}\n      />\n      <Pagination\n        pageSizeOptions={[]}\n        current={state.current_page}\n        total={state.total}\n        pageSize={state.per_page}\n        onChange={(page) => fetchFiles(state.directory, page)}\n      />\n    </div>\n  );\n};\n\nexport default FilesBrowser;\n","import { useEffect, useRef } from 'react';\n\nexport function useTokenChangeListener(onTokenChange: (newToken: string | null) => void) {\n  const onTokenChangeRef = useRef(onTokenChange);\n\n  useEffect(() => {\n    const eventHandler = () => {\n      const token = localStorage.getItem('TOKEN');\n      onTokenChangeRef.current(token);\n    };\n\n    window.addEventListener('token_change', eventHandler);\n\n    return () => {\n      window.removeEventListener('token_change', eventHandler);\n    };\n  }, []);\n}\n","import {\n  ContextlessEditor,\n  type EditorSettings,\n  type H5PEditorContent,\n} from '@escolalms/h5p-react';\nimport { Alert, Col, Row, Spin, message } from 'antd';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { FormattedMessage, useIntl } from 'umi';\n\nimport { useTokenChangeListener } from '@/hooks/useTokenChangeListener';\nimport { editorSettings, updateContent } from '@/services/escola-lms/h5p';\n\nconst H5P_EDITOR_IFRAME_ID = 'h5p-editor';\nenum EditorMessage {\n  TokenChanged = 'TOKEN_CHANGED',\n}\n\nconst sendNewTokenToIFrame = (newToken: string | null) => {\n  const iframe = document.getElementById(H5P_EDITOR_IFRAME_ID) as HTMLIFrameElement | null;\n\n  if (!iframe) {\n    console.error(`There is no iframe with id '${H5P_EDITOR_IFRAME_ID}'`);\n    return;\n  }\n\n  iframe.contentWindow?.postMessage({ type: EditorMessage.TokenChanged, token: newToken }, '*');\n};\n\nexport const Editor: React.FC<{\n  id: 'new' | number;\n  onSubmitted: (id: number) => void;\n  onLoaded?: (settings: API.H5PObject) => void;\n}> = ({ id, onSubmitted, onLoaded }) => {\n  const [settings, setEditorSettings] = useState<EditorSettings>();\n  const [loading, setLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string>();\n\n  const intl = useIntl();\n  const lang = intl.locale.split('-')[0];\n\n  useTokenChangeListener(sendNewTokenToIFrame);\n\n  useEffect(() => {\n    if (id) {\n      setLoading(true);\n      editorSettings(id === 'new' ? undefined : id, lang)\n        .then((data) => {\n          if (data.success) {\n            if (onLoaded) {\n              onLoaded(data.data);\n            }\n            setEditorSettings(data.data);\n          } else {\n            setError(data.message);\n          }\n        })\n        .catch((err: any) => err && setError(err.toString()))\n        .finally(() => setLoading(false));\n    }\n  }, [id]);\n\n  const onSubmit = useCallback((data: H5PEditorContent) => {\n    setLoading(true);\n    updateContent(data, id === 'new' ? undefined : id)\n      .then((responseData) => {\n        if (responseData.success) {\n          onSubmitted(responseData.data.id);\n          message.success(\n            <FormattedMessage\n              id=\"h5p_edited\"\n              defaultMessage=\"H5P Element edited and saved successfully\"\n            />,\n          );\n        } else {\n          setError(responseData.message);\n        }\n      })\n      .catch((err: any) => err && setError(err.toString()))\n      .finally(() => setLoading(false));\n  }, []);\n\n  if (!settings) {\n    return (\n      <Col>\n        <Row justify=\"center\" align=\"middle\">\n          {error && <Alert message={error} type=\"error\" />}\n          <Spin />\n        </Row>\n      </Col>\n    );\n  }\n\n  return (\n    <React.Fragment>\n      {error && <Alert message={error} type=\"error\" />}\n\n      {settings && (\n        <ContextlessEditor\n          onError={(err: unknown) => console.error(err)}\n          state={settings}\n          allowSameOrigin\n          onSubmit={onSubmit}\n          loading={loading}\n          lang={lang}\n          iframeId={H5P_EDITOR_IFRAME_ID}\n        />\n      )}\n    </React.Fragment>\n  );\n};\n\nexport default Editor;\n","import ProCard from '@ant-design/pro-card';\nimport { FormattedMessage } from 'umi';\n\nimport Editor from './editor';\nimport Player from './player';\n\nconst Card: React.FC<{\n  defaultCard?: 'edit' | 'preview';\n  id: 'new' | number;\n  onSubmit: (id: number) => void;\n  onLoaded?: (settings: API.H5PObject) => void;\n}> = ({ defaultCard = 'edit', id, onSubmit, onLoaded }) => {\n  return (\n    <ProCard\n      tabs={{\n        type: 'card',\n        defaultActiveKey: defaultCard,\n      }}\n    >\n      <ProCard.TabPane key=\"edit\" disabled={!id} tab={<FormattedMessage id=\"edit\" />}>\n        <Editor key={id} id={id} onSubmitted={onSubmit} onLoaded={onLoaded} />\n      </ProCard.TabPane>\n      {id !== 'new' && (\n        <ProCard.TabPane key=\"preview\" disabled={!id} tab={<FormattedMessage id=\"preview\" />}>\n          <Player id={id} onLoaded={onLoaded} />\n        </ProCard.TabPane>\n      )}\n    </ProCard>\n  );\n};\n\nexport default Card;\n","import { contentSettings } from '@/services/escola-lms/h5p';\nimport type { EditorSettings, XAPIEvent } from '@escolalms/h5p-react';\nimport { ContextlessPlayer } from '@escolalms/h5p-react';\nimport { Alert, Col, Divider, Row, Spin, Typography } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport ReactJson from 'react-json-view';\nimport { useIntl } from 'umi';\nconst { Title } = Typography;\n\nexport const Player: React.FC<{\n  id: 'new' | number;\n  onXAPI?: (event: XAPIEvent) => void;\n  onLoaded?: (settings: API.H5PObject) => void;\n}> = ({ id, onXAPI, onLoaded }) => {\n  const [settings, setEditorSettings] = useState<EditorSettings>();\n  const [loading, setLoading] = useState<boolean>(false);\n  const [XAPIEvents, setXAPIEvents] = useState<XAPIEvent[]>([]);\n  const [error, setError] = useState<string>();\n\n  const intl = useIntl();\n  const lang = intl.locale.split('-')[0];\n\n  useEffect(() => {\n    if (id) {\n      setLoading(true);\n      contentSettings(id, lang)\n        .then((data) => {\n          if (data.success) {\n            if (onLoaded) {\n              onLoaded(data.data);\n            }\n            setEditorSettings(data.data);\n          } else {\n            setError(data.message);\n          }\n        })\n        .catch((err: any) => err && setError(err.toString()))\n        .finally(() => setLoading(false));\n    }\n  }, [id]);\n\n  if (!settings) {\n    return (\n      <Col>\n        <Row justify=\"center\" align=\"middle\">\n          {error && <Alert message={error} type=\"error\" />}\n          <Spin />\n        </Row>\n      </Col>\n    );\n  }\n\n  return (\n    <React.Fragment>\n      {error && <Alert message={error} type=\"error\" />}\n      <ContextlessPlayer\n        contentId={id}\n        onError={(err: unknown) => console.error(err)}\n        state={settings}\n        allowSameOrigin\n        loading={loading}\n        onXAPI={(event: XAPIEvent) => {\n          if (onXAPI) {\n            onXAPI(event);\n          } else {\n            setXAPIEvents((prevState) => [...prevState, event]);\n          }\n        }}\n      />\n\n      {!onXAPI && (\n        <React.Fragment>\n          <Divider />\n          <div style={{ overflow: 'auto', maxHeight: '400px' }}>\n            <Title level={5}>XAPI Events</Title>\n            <ReactJson src={XAPIEvents} />\n          </div>\n        </React.Fragment>\n      )}\n    </React.Fragment>\n  );\n};\n\nexport default Player;\n","import SecureUpload from '@/components/SecureUpload';\nimport React from 'react';\n\nexport const UploadH5P: React.FC<{\n  onSuccess: (response: any) => void;\n  onError: () => void;\n  hideLabel?: boolean;\n}> = ({ onSuccess, onError, hideLabel }) => {\n  return (\n    <SecureUpload\n      url=\"/api/admin/hh5p/content/upload\"\n      name=\"h5p_file\"\n      accept=\".h5p\"\n      hideLabel={hideLabel}\n      onChange={(info) => {\n        if (info.file.status === 'done') {\n          if (info.file.response) {\n            onSuccess(info.file.response);\n          }\n        }\n        if (info.file.status === 'error') {\n          onError();\n        }\n      }}\n    />\n  );\n};\n\nexport default UploadH5P;\n","import React, { useEffect, useState } from 'react';\n\nimport { saveAs } from 'file-saver';\nimport { useCallback } from 'react';\n\nimport JSZip from 'jszip';\n\ndeclare const REACT_APP_API_URL: string;\n\nexport const PdfZipList: React.FC<{\n  pdfIds: number[];\n  onProgress?: (proc: number) => void;\n  onFinished?: () => void;\n  filename?: string;\n}> = ({ pdfIds, onProgress, onFinished, filename = 'package.zip' }) => {\n  const [blobs, setBlobs] = useState<Blob[]>([]);\n\n  const onFinishedLocal = useCallback(\n    (allBlobs: Blob[]) => {\n      const zip = new JSZip();\n\n      allBlobs.forEach((blob, i) => zip.file(`${pdfIds[i]}.pdf`, blob));\n\n      zip.generateAsync({ type: 'blob' }).then(function (content) {\n        saveAs(content, filename);\n        if (onFinished) {\n          onFinished();\n        }\n      });\n    },\n    [blobs, filename],\n  );\n\n  useEffect(() => {\n    pdfIds.forEach((pdfId) => {\n      const result = fetch(\n        `${window.REACT_APP_API_URL || REACT_APP_API_URL}/api/pdfs/generate/${pdfId}`,\n        {\n          headers: { Authorization: `Bearer ${localStorage.getItem('TOKEN')}` },\n        },\n      );\n\n      result\n        .then((response) => response.blob())\n        .then((pdfBlob) => {\n          if (pdfBlob && pdfBlob instanceof Blob) {\n            setBlobs((prevBlobs) => {\n              const progress = (prevBlobs.length + 1) / pdfIds.length;\n              if (onProgress) {\n                onProgress(progress);\n              }\n              if (progress >= 1) {\n                onFinishedLocal([...prevBlobs, pdfBlob]);\n              }\n              return [...prevBlobs, pdfBlob];\n            });\n          }\n        });\n    });\n\n    /*\n\n      const fetch = async () => {\n        const responses = await Promise.all(pdfIds.map((pdfId) => generatedPdf(pdfId)));\n        setState({\n          state: 'start',\n          finishedPdfs: responses\n            .filter((response) => response.success)\n            .map((response) => response.success && response.data),\n        });\n      };\n      fetch();      \n\n      */\n  }, [pdfIds]);\n\n  /*\n\n  useEffect(() => {\n    if (state.state === 'processing') {\n      if (state.finishedPdfs.length === 0) {\n        setState({\n          state: 'finished',\n        });\n      } else {\n        setState({\n          state: 'start',\n          finishedPdfs: state.finishedPdfs,\n        });\n      }\n      if (onProgress) {\n        onProgress(1 - state.finishedPdfs.length / pdfIds.length);\n      }\n    }\n\n    if (state.state === 'finished') {\n      onFinishedLocal();\n    }\n  }, [state, pdfIds]);\n\n  */\n\n  return (\n    <p>\n      Progress {blobs.length} / {pdfIds.length}\n    </p>\n  );\n};\n\nexport default PdfZipList;\n","import type { AxiosRequestConfig } from '@umijs/max';\nimport { request } from 'umi';\n\n/**  GET /api/admin/pdfs */\nexport async function pdfs(\n  params: EscolaLms.TemplatesPdf.Http.Requests.PdfListingAdminRequest,\n  options?: AxiosRequestConfig,\n) {\n  return request<API.DefaultMetaResponse<EscolaLms.TemplatesPdf.Models.FabricPDF>>(\n    '/api/admin/pdfs',\n    {\n      params: {\n        ...params,\n      },\n      method: 'GET',\n      ...(options || {}),\n    },\n  );\n}\n\n/**  GET /api/pdf/{id} */\n\nexport async function pdf(id: number, options?: AxiosRequestConfig) {\n  return request<API.DefaultResponse<any>>(`/api/pdfs/${id}`, {\n    method: 'GET',\n    ...(options || {}),\n  });\n}\n\n/**  GET /api/pdf/generate/{id} */\n\nexport async function generatedPdf(id: number, options?: AxiosRequestConfig) {\n  return request<Response>(`/api/pdfs/generate/${id}`, {\n    method: 'GET',\n    ...(options || {}),\n  });\n}\n","import { Alert, Button, Divider, List, Spin, Typography } from 'antd';\nimport React, { Fragment, useEffect, useState } from 'react';\n\nimport { useCallback } from 'react';\nimport { FormattedMessage } from 'umi';\n\nimport PdfZipList from '@/components/Pdf/ziplist';\nimport { pdf, pdfs } from '@/services/escola-lms/pdfs';\n\nimport TypeButtonDrawer from '@/components/TypeButtonDrawer';\nimport { DownloadOutlined } from '@ant-design/icons';\nimport AuthenticatedLinkButton from '../AuthenticatedLinkButton';\n\ntype Request = EscolaLms.TemplatesPdf.Http.Requests.PdfListingAdminRequest & {\n  template_id?: number;\n  title?: string;\n};\ntype Model = EscolaLms.TemplatesPdf.Models.FabricPDF;\n\ntype ModelState =\n  | {\n      state: 'initial';\n    }\n  | {\n      state: 'loading';\n    }\n  | {\n      state: 'loaded';\n      list: Model[];\n    }\n  | {\n      state: 'error';\n      error: string;\n    };\n\ntype PreviewState =\n  | {\n      state: 'initial';\n    }\n  | {\n      state: 'loading';\n    }\n  | {\n      state: 'loaded';\n      data: any;\n    };\n\nexport const PdfList: React.FC<Request> = ({ user_id, template_id, title }) => {\n  const [state, setState] = useState<ModelState>({ state: 'initial' });\n\n  const [previewState, setPreviewState] = useState<PreviewState>({ state: 'initial' });\n  const [generateAll, setGenerateAll] = useState<boolean>(false);\n\n  useEffect(() => {\n    setState({ state: 'loading' });\n    const abortController = new AbortController();\n    pdfs({ user_id, template_id }, { signal: abortController.signal })\n      .then((response) => {\n        if (response && response.success) {\n          setState({ state: 'loaded', list: response.data });\n        } else if (response && !response.success) {\n          setState({ state: 'error', error: response.message });\n        }\n      })\n      .catch((err) => setState({ state: 'error', error: err.toString() }));\n\n    return () => {\n      abortController.abort();\n    };\n  }, []);\n\n  const getPdf = useCallback((id: number) => {\n    setPreviewState({ state: 'loading' });\n    pdf(id).then((response) => {\n      if (response.success) {\n        setPreviewState({ state: 'loaded', data: response.data.content });\n      } else {\n        setPreviewState({ state: 'initial' });\n      }\n    });\n  }, []);\n\n  if (state.state === 'error') {\n    return <Alert message=\"Error Text\" type=\"error\" />;\n  }\n\n  if (state.state === 'loading' || state.state === 'initial') {\n    return <Spin />;\n  }\n\n  return (\n    <Fragment>\n      <Divider />\n      {generateAll && (\n        <PdfZipList\n          pdfIds={state.list.map((item) => item.id)}\n          onFinished={() => setGenerateAll(false)}\n        />\n      )}\n      <List\n        size=\"small\"\n        itemLayout=\"horizontal\"\n        dataSource={state.list}\n        header={\n          <div>\n            <FormattedMessage id=\"template\" />{' '}\n            {title && <Typography.Text strong>{title}</Typography.Text>}\n            {'. '}\n            <FormattedMessage id=\"generated_pdfs\" defaultMessage=\"Generated PDFs\" />{' '}\n            <Button\n              loading={generateAll}\n              type=\"primary\"\n              onClick={() => setGenerateAll(true)}\n              icon={<DownloadOutlined />}\n              size=\"small\"\n            >\n              <FormattedMessage id=\"download_all\" defaultMessage=\"Download all PDFs\" />\n            </Button>\n          </div>\n        }\n        renderItem={(item) => (\n          <List.Item\n            actions={[\n              <AuthenticatedLinkButton\n                url={`/api/pdfs/generate/${item.id}`}\n                filename={`generated-${item.id}.pdf`}\n                key=\"download\"\n                size=\"small\"\n                icon={<DownloadOutlined />}\n                type=\"primary\"\n                onClick={() => getPdf(item.id)}\n                loading={previewState.state === 'loading'}\n              >\n                <FormattedMessage id=\"download_pdf\" defaultMessage=\"Download PDFs\" />\n              </AuthenticatedLinkButton>,\n            ]}\n          >\n            {item.title} <TypeButtonDrawer type=\"App\\Models\\User\" type_id={item.user_id} />\n          </List.Item>\n        )}\n      />\n    </Fragment>\n  );\n};\n\nexport default PdfList;\n","import { message } from 'antd';\nimport type { Location } from 'history';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { history, useIntl, useLocation } from 'umi';\n\nimport {\n  cloneLesson as apiCloneLesson,\n  cloneTopic as apiCloneTopic,\n  createLesson as apiCreateLesson,\n  createTopic as apiCreateTopic,\n  removeLesson as apiRemoveLesson,\n  removeTopic as apiRemoveTopic,\n  updateLesson as apiUpdateLesson,\n  updateTopic as apiUpdateTopic,\n  program,\n} from '@/services/escola-lms/course';\n\nimport { TopicType } from '@/services/escola-lms/enums';\nimport { fields } from '@/services/escola-lms/fields';\nimport type { UploadChangeParam } from 'antd/lib/upload';\n\ntype CurrentEditMode =\n  | { mode: 'lesson'; id: number; value?: API.Lesson | null }\n  | { mode: 'topic'; id: number; value?: API.Topic | null }\n  | { mode: 'init' };\n\ntype ProgramContext = {\n  currentEditMode?: CurrentEditMode;\n  state?: API.CourseProgram;\n  h5ps?: any[];\n  // token: credentials.token,\n  id?: number;\n  addNewLesson?: (parentId?: number) => API.Lesson;\n  updateLesson?: (lesson_id: number, data: FormData) => Promise<void | boolean>;\n  updateTopic?: (topic_id: number, data: FormData) => Promise<void>;\n  // addResource,\n  // removeResource,\n  deleteLesson?: (lesson_id: number) => void;\n  // updateH5P,\n  addNewTopic?: (lesson_id: number, type: API.TopicType) => API.Topic;\n  deleteTopic?: (topic_id: number) => void;\n  onTopicUploaded?: (prevTopicId: number, info: UploadChangeParam) => void;\n  cloneTopic?: (topic_id: number) => void;\n  cloneLesson?: (lesson_id: number) => void;\n  getLessons?: () => void;\n  isAssistant?: boolean;\n};\n\nexport const Context = React.createContext<ProgramContext>({});\n\nconst getRandomId = () => Math.round(Math.random() * 99999);\n\nconst getFlatLessons = (lessons: API.Lesson[]): API.Lesson[] => {\n  return lessons.reduce((acc, curr) => {\n    return [...acc, ...(curr.lessons ? getFlatLessons(curr.lessons) : []), curr];\n  }, [] as API.Lesson[]) as API.Lesson[];\n};\n\nexport const getFlatTopics = (lessons: API.Lesson[]): API.Topic[] => {\n  return lessons.reduce((acc, curr) => {\n    return [...acc, ...(curr.lessons ? getFlatTopics(curr.lessons) : []), ...(curr.topics ?? [])];\n  }, [] as API.Topic[]) as API.Topic[];\n};\n\nconst recursiveAddTopicToLessons = (\n  lessons: API.Lesson[],\n  lessonId: number,\n  topic: API.Topic,\n): API.Lesson[] => {\n  return lessons.map((lesson) => ({\n    ...lesson,\n    lessons: lesson.lessons ? recursiveAddTopicToLessons(lesson.lessons, lessonId, topic) : [],\n    topics: lesson.id === lessonId ? [...(lesson.topics ?? []), topic] : lesson.topics ?? [],\n  }));\n};\n\n// Probably should be removed\n// const recursiveEditTopic = (\n//   lessons: API.Lesson[],\n//   topicId: number,\n//   updatedTopic: API.Topic,\n// ): API.Lesson[] => {\n//   return lessons.map((lesson) => ({\n//     ...lesson,\n//     lessons: recursiveEditTopic(lesson.lessons ?? [], topicId, updatedTopic),\n//     topics: lesson.topics?.map((topic) => (topic.id === topicId ? updatedTopic : topic)) ?? [],\n//   }));\n// };\n\nconst recursiveAddLessonToLessons = (\n  lessons: API.Lesson[],\n  newLesson: API.Lesson,\n  lessonId?: number | null,\n): API.Lesson[] => {\n  if (!lessonId) {\n    return [...lessons, newLesson];\n  }\n  return lessons.map((lesson) => ({\n    ...lesson,\n    lessons: [\n      ...(lesson.lessons ? recursiveAddLessonToLessons(lesson.lessons, newLesson, lessonId) : []),\n      ...(lesson.id === lessonId ? [newLesson] : []),\n    ],\n  }));\n};\n\nconst recursiveEditLesson = (\n  lessons: API.Lesson[],\n  lessonId: number,\n  updatedLesson: API.Lesson,\n): API.Lesson[] => {\n  return lessons.map((lesson) => ({\n    ...(lesson.id === lessonId ? updatedLesson : lesson),\n    lessons: lesson.lessons ? recursiveEditLesson(lesson.lessons, lessonId, updatedLesson) : [],\n  }));\n};\n\nconst appendParentIdToLessons = (lessons: API.Lesson[], lessonParentId?: number): API.Lesson[] => {\n  return lessons.map((lesson) => ({\n    ...lesson,\n    parent_id: lessonParentId,\n    lessons: lesson.lessons ? appendParentIdToLessons(lesson.lessons, lesson.id) : [],\n  }));\n};\n\nconst recursiveDeleteLesson = (lessons: API.Lesson[], lessonId: number): API.Lesson[] => {\n  return lessons\n    .filter((lesson) => lesson.id !== lessonId)\n    .map((lesson) => ({\n      ...lesson,\n      lessons: lesson.lessons ? recursiveDeleteLesson(lesson.lessons, lessonId) : [],\n    }));\n};\n\nconst recursiveDeleteTopic = (lessons: API.Lesson[], topicId: number): API.Lesson[] => {\n  return lessons.map((lesson) => ({\n    ...lesson,\n    lessons: lesson.lessons ? recursiveDeleteTopic(lesson.lessons, topicId) : [],\n    topics: lesson.topics ? lesson.topics.filter((topic) => topic.id !== topicId) : [],\n  }));\n};\n\nconst recursiveTopicUploaded = (\n  prevTopicId: number,\n  info: UploadChangeParam,\n  lesson_id: number | null | undefined,\n  lessons: API.Lesson[],\n): API.Lesson[] => {\n  return lessons?.map((lesson) => {\n    if (lesson.id === lesson_id) {\n      return {\n        ...lesson,\n        topics: lesson.topics?.map((topic) => {\n          if (topic.id === prevTopicId) {\n            return info.file.response.data;\n          }\n          return topic;\n        }),\n      };\n    } else if (lesson.lessons) {\n      return {\n        ...lesson,\n        lessons: recursiveTopicUploaded(prevTopicId, info, lesson_id, lesson.lessons || []),\n      };\n    }\n    return lesson;\n  });\n};\n\nexport const AppContext: React.FC<{ children: React.ReactNode; id: number }> = ({\n  children,\n  id,\n}) => {\n  const [state, setState] = useState<API.CourseProgram>();\n  const intl = useIntl();\n\n  const flatTopics: API.Topic[] = useMemo(() => {\n    return state && state.lessons ? getFlatTopics(state.lessons) : [];\n  }, [state]);\n\n  const flatLessons: API.Lesson[] = useMemo(() => {\n    return state && state.lessons ? getFlatLessons(state.lessons) : [];\n  }, [state]);\n\n  const [h5ps, setH5ps] = useState([]);\n  const [isAssistant, setIsAssistant] = useState<boolean>(false);\n\n  const l = useLocation() as Location & { query: { lesson?: string; topic?: string } };\n\n  const params = useMemo(() => {\n    const urlParams = new URLSearchParams(l.search);\n\n    return {\n      lesson: urlParams.get('lesson'),\n      topic: urlParams.get('topic'),\n    };\n  }, [l]);\n\n  const getAssistantId = useCallback(async () => {\n    const res = await fields({\n      class_type: 'EscolaLms\\\\Courses\\\\Models\\\\Lesson',\n    });\n    if (res.success) {\n      const foundAssistantId = res.data.find(({ name }) => name === 'assistant_id');\n      setIsAssistant(!!foundAssistantId?.id);\n    }\n  }, []);\n\n  useEffect(() => {\n    getAssistantId();\n    setH5ps([]);\n  }, []);\n\n  /*\n  useEffect(() => {\n    API(`h5p`, token)\n      .then((response) => response.json())\n      .then((data) => {\n        setH5ps(data);\n      });\n    //.then(() => addNewLesson());\n  }, []);\n  */\n\n  const getLessons = useCallback(() => {\n    program(id).then((data) => {\n      return (\n        data.success &&\n        setState({\n          ...data.data,\n          lessons: appendParentIdToLessons(data.data.lessons),\n        })\n      );\n    });\n  }, [id]);\n\n  useEffect(() => {\n    getLessons();\n  }, [getLessons]);\n\n  const getLessonIdByTopicId = useCallback(\n    (topic_id: number) => {\n      const lesson = flatLessons.find((lesson_item) =>\n        lesson_item?.topics?.find((topic) => topic.id === topic_id),\n      );\n      return lesson ? lesson.id : null;\n    },\n    [flatLessons],\n  );\n\n  const currentEditMode = useMemo<CurrentEditMode>(() => {\n    if (params.lesson) {\n      return {\n        mode: 'lesson',\n        id: Number(params.lesson),\n        value: flatLessons.find((lesson) => lesson.id === Number(params.lesson)),\n      };\n    }\n    if (params.topic) {\n      return {\n        mode: 'topic',\n        id: Number(params.topic),\n        value: flatTopics.find((t) => t.id === Number(params.topic)),\n      };\n    }\n    return { mode: 'init' };\n  }, [params, state, flatLessons, flatTopics]);\n\n  const addNewLesson = useCallback(\n    (parentId?: number) => {\n      const newLesson: API.Lesson = {\n        course_id: id,\n        topics: [],\n        isNew: true,\n        id: state ? state.lessons.length + 1 : getRandomId(), // New Lesson\n        order: 0,\n        title: intl.formatMessage({ id: 'add_title_here' }),\n        active: true,\n        parent_id: parentId,\n      };\n\n      setState((prevState) => ({\n        ...prevState,\n        lessons: recursiveAddLessonToLessons(prevState?.lessons ?? [], newLesson, parentId),\n        //lessons: [...(prevState ? prevState.lessons : []), newLesson] as API.Lesson[],\n      }));\n\n      return newLesson;\n    },\n    [id, state],\n  );\n\n  const updateLesson = useCallback(\n    (lesson_id: number, formData: FormData) => {\n      const newLesson = flatLessons.find((lesson) => lesson.id === lesson_id);\n      const isNew = newLesson && newLesson.isNew;\n      return (isNew ? apiCreateLesson(formData) : apiUpdateLesson(lesson_id, formData)).then(\n        (data) => {\n          message.success(data.message);\n          getLessons();\n          return (\n            data.success &&\n            setState((prevState) => ({\n              ...prevState,\n              lessons: recursiveEditLesson(prevState?.lessons ?? [], lesson_id, {\n                ...data.data,\n                isNew: false,\n              }),\n              /*\n              lessons: prevState?.lessons\n                ? prevState.lessons.map((lesson) => {\n                    if (lesson.id === lesson_id) {\n                      return {\n                        ...lesson,\n                        ...data.data,\n                        isNew: false,\n                      };\n                    }\n                    return lesson;\n                  })\n                : [data.data],\n                */\n            }))\n          );\n        },\n      );\n    },\n    [state],\n  );\n\n  const deleteLesson = useCallback(\n    (lesson_id: number) => {\n      const lesson = flatLessons.find((lesson_item) => lesson_item.id === lesson_id);\n      if (!lesson) {\n        return;\n      }\n      const { isNew } = lesson;\n\n      if (isNew) {\n        setState((prevState) => ({\n          ...prevState,\n          lessons: recursiveDeleteLesson(prevState?.lessons ?? [], lesson_id),\n        }));\n      } else {\n        apiRemoveLesson(lesson_id).then((data) => {\n          if (data.success) {\n            message.success(data.message);\n            setState((prevState) => ({\n              ...prevState,\n              lessons: recursiveDeleteLesson(prevState?.lessons ?? [], lesson_id),\n            }));\n          }\n        });\n      }\n    },\n    [state],\n  );\n\n  const updateTopic = useCallback(\n    (topic_id: number, formData: FormData) => {\n      const lesson_id = getLessonIdByTopicId(topic_id);\n\n      const lesson = flatLessons.find((lesson_item) => lesson_item.id === lesson_id);\n\n      const topic = lesson && lesson.topics?.find((topic_item) => topic_item.id === topic_id);\n\n      const isNew = topic?.isNew;\n\n      return (isNew ? apiCreateTopic(formData) : apiUpdateTopic(topic_id, formData)).then(\n        (data) => {\n          if (data.success) {\n            message.success(data.message);\n            getLessons();\n\n            history.push(`/courses/list/${id}/program/?topic=${data.data.id}`);\n\n            if (topic?.topicable_type === TopicType.Video) {\n              setTimeout(() => {\n                getLessons();\n              }, 5000);\n            }\n          }\n        },\n      );\n    },\n    [getLessonIdByTopicId, state, getLessons],\n  );\n\n  const deleteTopic = useCallback(\n    (topic_id: number) => {\n      const lesson_id = getLessonIdByTopicId(topic_id);\n\n      const lesson = flatLessons.find((lesson_item) => lesson_item.id === lesson_id);\n      if (!lesson) {\n        return;\n      }\n\n      const topic = flatTopics?.find((topic_item) => topic_item.id === topic_id);\n\n      const isNew = topic?.isNew;\n      if (isNew && !topic.topicable) {\n        setState((prevState) => ({\n          ...prevState,\n          lessons: recursiveDeleteTopic(prevState?.lessons ?? [], topic_id),\n        }));\n      } else {\n        apiRemoveTopic(topic_id).then((data) => {\n          if (data.success) {\n            message.success(data.message);\n            setState((prevState) => ({\n              ...prevState,\n              lessons: recursiveDeleteTopic(prevState?.lessons ?? [], topic_id),\n            }));\n          }\n        });\n\n        // TODO #1018 call API to delete\n        /**\n         return API(`topic/delete/${id}`, token, 'POST')\n        .then((response) => response.json())\n        .then(() =>\n          setState((prevState) => ({\n            ...prevState,\n            lessons: prevState.lessons.map((lesson) => {\n              if (lesson.id == id) {\n                return {\n                  ...lesson,\n                  topics: lesson.topics.filter((topic) => topic.id !== id),\n                };\n              }\n              return lesson;\n            }),\n          })),\n        );\n         */\n      }\n    },\n    [state, getLessonIdByTopicId],\n  );\n\n  /*\n  const addResource = useCallback(\n    (id, formData) => {\n      const isNew = false;\n\n      const id = getLessonByTopicId(id);\n\n      return API(`topic/resource/save/${id}`, token, 'POST', formData)\n        .then((response) => response.json())\n        .then((data) =>\n          setState((prevState) => ({\n            ...prevState,\n            lessons: prevState.lessons.map((lesson) => {\n              if (lesson.id == id) {\n                return {\n                  ...lesson,\n                  topics: lesson.topics.map((topic) => {\n                    if (topic.id == id) {\n                      return {\n                        ...topic,\n                        resources: [...topic.resources, data],\n                      };\n                    }\n                    return topic;\n                  }),\n                };\n              }\n              return lesson;\n            }),\n          })),\n        );\n    },\n    [state],\n  );\n  */\n\n  /*\n  const removeResource = useCallback(\n    (resource_id) => {\n      // resource/delete/{courseFiles}\n\n      const id = getQuizIdByResourseId(resource_id);\n      const id = getLessonByTopicId(id);\n\n      return API(`topic/resource/delete/${resource_id}`, token, 'DELETE', null)\n        .then((response) => response.json())\n        .then(() =>\n          setState((prevState) => ({\n            ...prevState,\n            lessons: prevState.lessons.map((lesson) => {\n              if (lesson.id == id) {\n                return {\n                  ...lesson,\n                  topics: lesson.topics.map((topic) => {\n                    if (topic.id == id) {\n                      return {\n                        ...topic,\n                        resources: topic.resources.filter(\n                          (resource) => resource.id !== resource_id,\n                        ),\n                      };\n                    }\n                    return topic;\n                  }),\n                };\n              }\n              return lesson;\n            }),\n          })),\n        );\n    },\n    [state],\n  );\n  */\n\n  /*\n  const updateH5P = useCallback(\n    (id, h5p_id) => {\n      const id = getLessonByTopicId(id);\n      return API(`topic/h5p/save/${id}`, token, 'POST', getFormData({ media: h5p_id }))\n        .then((response) => response.json())\n        .then((data) =>\n          setState((prevState) => ({\n            ...prevState,\n            lessons: prevState.lessons.map((lesson) => {\n              if (lesson.id == id) {\n                return {\n                  ...lesson,\n                  topics: lesson.topics.map((topic) => {\n                    if (topic.id == id) {\n                      return {\n                        ...topic,\n                        media: data,\n                      };\n                    }\n                    return topic;\n                  }),\n                };\n              }\n              return lesson;\n            }),\n          })),\n        );\n    },\n    [state],\n  );\n  */\n\n  const addNewTopic = useCallback((lesson_id: number, type: API.TopicType) => {\n    const newTopic: API.Topic = {\n      lesson_id,\n      isNew: true,\n      id: getRandomId(),\n      title: intl.formatMessage({ id: 'add_title_here' }),\n      active: true,\n      topicable_type: type,\n    };\n\n    setState((prevState) => ({\n      ...prevState,\n      lessons: recursiveAddTopicToLessons(prevState?.lessons ?? [], lesson_id, newTopic),\n    }));\n    return newTopic;\n  }, []);\n\n  const onTopicUploaded = (prevTopicId: number, info: UploadChangeParam) => {\n    const lesson_id = getLessonIdByTopicId(prevTopicId);\n    setState((prevState) => ({\n      ...prevState,\n      lessons: prevState\n        ? recursiveTopicUploaded(prevTopicId, info, lesson_id, prevState.lessons || [])\n        : [],\n      // Probably should be removed\n      // lessons: recursiveEditTopic(prevState?.lessons ?? [], prevTopicId, info.file.response.data),\n    }));\n    // Update topic id in params after receiving from server\n    history.push(`/courses/list/${id}/program/?topic=${info.file.response.data.id}`);\n  };\n\n  const cloneTopic = useCallback(\n    (topic_id: number) => {\n      return apiCloneTopic(topic_id).then((response) => {\n        if (response.success) {\n          message.success(response.message);\n          const lesson_id = getLessonIdByTopicId(topic_id);\n\n          setState((prevState) => ({\n            ...prevState,\n            lessons: prevState\n              ? prevState.lessons?.map((lesson) => {\n                  if (lesson.id === lesson_id) {\n                    const topics = lesson.topics || [];\n                    return {\n                      ...lesson,\n                      topics: [...topics, response.data] as API.Topic[],\n                    };\n                  }\n                  return lesson;\n                })\n              : [],\n          }));\n        }\n      });\n    },\n    [state, getLessonIdByTopicId],\n  );\n\n  const cloneLesson = useCallback((lesson_id: number) => {\n    return apiCloneLesson(lesson_id).then((response) => {\n      if (response.success) {\n        message.success(response.message);\n\n        setState((prevState) => ({\n          ...prevState,\n          lessons: prevState ? [...prevState.lessons, response.data] : [],\n        }));\n      }\n    });\n  }, []);\n\n  const value = {\n    state,\n    h5ps,\n    // token: credentials.token,\n    id,\n    addNewLesson,\n    updateLesson,\n    updateTopic,\n    // addResource,\n    // removeResource,\n    deleteLesson,\n    // updateH5P,\n    addNewTopic,\n    deleteTopic,\n    onTopicUploaded,\n    cloneTopic,\n    cloneLesson,\n    currentEditMode,\n    getLessons,\n    isAssistant,\n  };\n\n  return <Context.Provider value={value}>{children}</Context.Provider>;\n};\n","import { ScormPreview as ScormPlayer } from '@escolalms/scorm-player';\nimport React from 'react';\ndeclare const REACT_APP_API_URL: string;\n\ninterface ScormPreviewProps {\n  uuid: string;\n}\n\nconst ScormPreview: React.FC<ScormPreviewProps> = ({ uuid }) => {\n  const API_URL = REACT_APP_API_URL || window.REACT_APP_API_URL;\n\n  // Register the Service Worker\n\n  return (\n    <div style={{ height: '100vh' }}>\n      <ScormPlayer uuid={uuid} apiUrl={API_URL || ''} serviceWorkerUrl=\"/service-worker-scorm.js\" />\n    </div>\n  );\n};\n\nexport default ScormPreview;\n","import FilesBrowser from '@/components/FilesBrowser';\nimport SecureUpload from '@/components/SecureUpload';\nimport { FolderOpenOutlined } from '@ant-design/icons';\nimport type { AxiosRequestConfig } from '@umijs/max';\nimport { Button, Modal, message } from 'antd';\nimport type { UploadChangeParam } from 'antd/lib/upload';\nimport type { PropsWithChildren } from 'react';\nimport { useCallback, useState } from 'react';\nimport { FormattedMessage, request } from 'umi';\nimport type { SecureUploadType } from './index';\n\ntype PostResponse = API.DefaultResponse<EscolaLms.ModelFields.Models.Metadata>;\n\nconst post = async (url: string, body: Record<string, string>, options?: AxiosRequestConfig) => {\n  return request<API.DefaultResponse<EscolaLms.ModelFields.Models.Metadata>>(url, {\n    method: 'POST',\n    data: body,\n    ...(options || {}),\n  });\n};\n\nconst fixDirName = (inputDir: string) => {\n  let dir = inputDir.split('//').join('/');\n  dir = dir[dir.length - 1] === '/' ? dir : `${dir}/`;\n  dir = dir[0] === '/' ? dir.slice(1) : dir;\n  return dir;\n};\n\nconst fixFileName = (file: API.File[] | API.File) => {\n  if (Array.isArray(file) && file[0]) {\n    return file[0].name;\n  }\n  return (file as API.File).name;\n};\n\nconst getPath = (dir: string, file: API.File[] | API.File) => {\n  const fixedDir = fixDirName(dir);\n  const fixedName = fixFileName(file);\n  if (fixedName.includes(fixedDir)) {\n    return fixedName;\n  }\n  return `${fixedDir}${fixedName}`;\n};\n\nconst getUploadChangeSuccessParam = (data: any): UploadChangeParam => ({\n  file: {\n    status: 'done',\n    uid: 'fileFromBrowser',\n    name: 'fileFromBrowser',\n    response: data,\n  },\n  fileList: [],\n});\n\nfunction SecureUploadBrowser<Type = API.File>({\n  folder,\n  onResponse,\n  onUpload,\n  ...props\n}: PropsWithChildren<\n  SecureUploadType<Type> & { folder: string; onResponse?: (response: PostResponse) => void }\n>) {\n  const [showBrowser, setShowBrowser] = useState<boolean>(false);\n  const [loading, setLoading] = useState<boolean>(false);\n  const { url, name, onChange, data } = props;\n\n  const closeModal = useCallback(() => {\n    setShowBrowser(false);\n  }, []);\n\n  const handleFile = useCallback(async (file: API.File, dir: string | undefined) => {\n    if (!dir) return;\n\n    setLoading(true);\n\n    try {\n      const response: PostResponse = await post(url, {\n        ...data,\n        [name]: getPath(dir, file),\n      });\n\n      if (onResponse) {\n        onResponse(response);\n      }\n\n      if (response.success) {\n        closeModal();\n        if (onChange) {\n          onChange(getUploadChangeSuccessParam(response));\n        }\n      } else {\n        message.error(response.message);\n      }\n    } catch (err: any) {\n      setLoading(false);\n      message.error('data' in err ? err.data.message : 'Unknown Error');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  return (\n    <>\n      <Button onClick={() => setShowBrowser(true)} icon={<FolderOpenOutlined />}>\n        {' '}\n        <FormattedMessage id=\"browse\" />\n      </Button>\n\n      {showBrowser && (\n        <Modal\n          open={showBrowser}\n          onCancel={closeModal}\n          onOk={closeModal}\n          width=\"60vw\"\n          closeIcon={false}\n        >\n          <FilesBrowser\n            forceLoading={loading}\n            hideDeleteBtn={true}\n            defaultDirectory={folder}\n            onFile={(file, dir) => handleFile(file, dir)}\n          />\n        </Modal>\n      )}\n      <div style={{ marginTop: '10px' }}>\n        <SecureUpload onUpload={onUpload} {...props} />\n      </div>\n    </>\n  );\n}\n\nexport default SecureUploadBrowser;\n","import { ProFormUploadButton } from '@ant-design/pro-form';\nimport type { FormProps } from 'antd';\nimport { Form } from 'antd';\nimport type { UploadChangeParam } from 'antd/lib/upload';\nimport type { UploadFile } from 'antd/lib/upload/interface';\nimport ConditionalWrap from 'conditional-wrap';\nimport type { PropsWithChildren } from 'react';\nimport { useState } from 'react';\nimport { FormattedMessage, useIntl } from 'umi';\ndeclare const REACT_APP_API_URL: string;\n\nexport type SecureUploadType<T = API.File> = {\n  url: string;\n  name: string;\n  extra?: string;\n  onChange?: (info: UploadChangeParam<UploadFile<API.DefaultResponse<T>>>) => void;\n  onUpload?: (response: API.DefaultResponse<T>) => void;\n  on?: (info: UploadChangeParam<UploadFile<API.DefaultResponse<T>>>) => void;\n  accept?: string;\n  data?: Record<string, any>;\n  wrapInForm?: boolean;\n  title?: string;\n  formProps?: FormProps;\n  maxFiles?: number;\n  clearListAfterUpload?: boolean;\n  hideLabel?: boolean;\n  disabled?: boolean;\n  showUploadList?: boolean;\n};\n\nfunction SecureUpload<Type = API.File>({\n  onChange,\n  onUpload,\n  url,\n  name,\n  extra,\n  accept,\n  data,\n  wrapInForm = true,\n  title,\n  formProps,\n  maxFiles,\n  clearListAfterUpload,\n  hideLabel,\n  disabled,\n  showUploadList,\n}: PropsWithChildren<SecureUploadType<Type>>) {\n  const [infoState, setInfoState] = useState<UploadChangeParam<UploadFile<any>>>();\n  const intl = useIntl();\n\n  if (data && data[name]) {\n    // eslint-disable-next-line no-param-reassign\n    delete data[name];\n  }\n\n  return (\n    <ConditionalWrap\n      condition={wrapInForm}\n      wrap={(children: JSX.Element) => <Form {...formProps}>{children}</Form>}\n    >\n      <ProFormUploadButton\n        title={\n          title\n            ? title\n            : ` ${intl.formatMessage({\n                id: 'upload_click_here',\n              })}`\n        }\n        placeholder={intl.formatMessage({\n          id: 'upload_click_here',\n        })}\n        label={!hideLabel && <FormattedMessage id=\"upload\" />}\n        max={maxFiles ?? 2}\n        fieldProps={{\n          data,\n          accept,\n          name,\n          showUploadList,\n          headers: { Authorization: `Bearer ${localStorage.getItem('TOKEN')}` },\n          onChange: (info) => {\n            setInfoState(info);\n            if (onChange) {\n              onChange(info);\n            }\n            if (info.file.status === 'done') {\n              if (onUpload) {\n                onUpload(info.file.response);\n              }\n              if (clearListAfterUpload) {\n                setInfoState(undefined);\n              }\n            }\n          },\n        }}\n        action={`${window.REACT_APP_API_URL || REACT_APP_API_URL}${url}`}\n        extra={extra}\n        fileList={infoState?.fileList}\n        disabled={disabled}\n      />\n    </ConditionalWrap>\n  );\n}\n\nexport default SecureUpload;\n","import {\n  assignQuestionnaire,\n  questionnaire,\n  unassignQuestionnaire,\n} from '@/services/escola-lms/questionnaire';\nimport type { ActionType, ProColumns } from '@ant-design/pro-table';\nimport ProTable from '@ant-design/pro-table';\nimport { Switch, message } from 'antd';\nimport React, { useCallback, useRef } from 'react';\nimport { FormattedMessage, useIntl } from 'umi';\nimport TypeButtonDrawer from '../TypeButtonDrawer';\n\nconst ModelNames = {\n  1: 'course',\n};\n\nexport enum ModelTypes {\n  COURSE = 1,\n}\n\nconst TableColumns: ProColumns<API.Questionnaire>[] = [\n  {\n    title: <FormattedMessage id=\"ID\" defaultMessage=\"ID\" />,\n    dataIndex: 'id',\n    hideInSearch: true,\n    sorter: true,\n    width: '80px',\n  },\n  {\n    title: <FormattedMessage id=\"title\" defaultMessage=\"title\" />,\n    dataIndex: 'title',\n    hideInSearch: true,\n    sorter: true,\n    width: '80%',\n    render: (_, record) => (\n      <TypeButtonDrawer type={'Questionnaire'} type_id={Number(record.id)} text={record.title} />\n    ),\n  },\n];\n\nconst AssignQuestionnary: React.FC<{ modelType: ModelTypes; id: number }> = ({ modelType, id }) => {\n  const actionRef = useRef<ActionType>();\n\n  const intl = useIntl();\n\n  const handleChange = useCallback(\n    async (qId: number, value: boolean) => {\n      const hide = message.loading(\n        intl.formatMessage({\n          id: 'loading',\n        }),\n      );\n\n      try {\n        const request = value\n          ? await assignQuestionnaire(ModelNames[modelType], id, qId)\n          : await unassignQuestionnaire(ModelNames[modelType], id, qId);\n        if (request.success) {\n          hide();\n          message.success(request.message);\n          actionRef.current?.reload();\n        }\n        return;\n      } catch (error) {\n        hide();\n        message.error(<FormattedMessage id=\"error\" defaultMessage=\"error\" />);\n\n        return false;\n      }\n    },\n    [modelType, id],\n  );\n\n  return (\n    <ProTable<API.Questionnaire>\n      headerTitle={intl.formatMessage({\n        id: 'questionnaires',\n        defaultMessage: 'questionnaires',\n      })}\n      actionRef={actionRef}\n      rowKey=\"id\"\n      search={false}\n      request={({}, sort) => {\n        const sortArr = sort && Object.entries(sort)[0];\n        return questionnaire({\n          order_by: sortArr && sortArr[0],\n          order: sortArr ? (sortArr[1] === 'ascend' ? 'ASC' : 'DESC') : undefined,\n        }).then((response) => {\n          if (response.success) {\n            return {\n              data: response.data,\n              success: true,\n            };\n          }\n          return [];\n        });\n      }}\n      columns={[\n        ...TableColumns,\n        {\n          title: <FormattedMessage id=\"assign\" defaultMessage=\"assign\" />,\n          dataIndex: 'option',\n          valueType: 'option',\n\n          render: (_, record) => [\n            <Switch\n              key=\"assign\"\n              defaultChecked={\n                record.models && record.models?.filter((m) => m.model_id === id).length > 0\n              }\n              onChange={(value) => handleChange(Number(record.id), value)}\n            />,\n          ],\n        },\n      ]}\n    />\n  );\n};\n\nexport default AssignQuestionnary;\n","import { ExportOutlined } from '@ant-design/icons';\nimport { Button } from 'antd';\nimport React, { useCallback, useState } from 'react';\nimport { FormattedMessage } from 'umi';\n\nimport { exportStatForTopic } from '@/services/escola-lms/reports';\n\ninterface Props {\n  topic_id: number | undefined;\n  stat: API.TopicStatsKey;\n}\n\nexport const ExportTopicStatsButton: React.FC<Props> = ({ topic_id, stat }) => {\n  const [loading, setLoading] = useState(false);\n\n  const onClickFactory = useCallback(\n    (topicId?: number) => async () => {\n      if (!topicId) return;\n\n      setLoading(true);\n      try {\n        const response = await exportStatForTopic(topicId, stat);\n\n        if (response instanceof Blob) {\n          const downloadLink = document.createElement('a');\n          downloadLink.href = window.URL.createObjectURL(response);\n          downloadLink.download = `${stat}_${topicId}.xlsx`;\n          document.body.appendChild(downloadLink);\n          downloadLink.click();\n          document.body.removeChild(downloadLink);\n        }\n      } catch (error) {\n        console.error(error);\n      } finally {\n        setLoading(false);\n      }\n    },\n    [stat],\n  );\n\n  return (\n    <Button\n      type=\"primary\"\n      loading={loading}\n      disabled={topic_id === undefined}\n      onClick={onClickFactory(topic_id)}\n    >\n      <ExportOutlined /> <FormattedMessage id=\"export\" />\n    </Button>\n  );\n};\n","import ProTable, { type ProColumns } from '@ant-design/pro-table';\nimport { format } from 'date-fns';\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { FormattedMessage } from 'umi';\n\nimport TypeButtonDrawer from '@/components/TypeButtonDrawer';\nimport { DATETIME_FORMAT } from '@/consts/dates';\nimport { getTopicStats } from '@/services/escola-lms/course';\nimport { TopicStatsKey } from '@/services/escola-lms/enums';\nimport { ExportTopicStatsButton } from './ExportTopicStatsButton';\n\ninterface TableParams {\n  topic_id?: number;\n}\n\ntype TableColumn = ProColumns<API.GiftQuizTopicStat>;\n\nconst staticColumns: TableColumn[] = [\n  {\n    dataIndex: 'attempt',\n    title: <FormattedMessage id=\"TopicStatistics.giftQuiz.attempt\" />,\n    hideInSearch: true,\n    fixed: 'left',\n    width: 100,\n  },\n  {\n    dataIndex: 'email',\n    title: <FormattedMessage id=\"email\" />,\n    hideInSearch: true,\n    fixed: 'left',\n  },\n  {\n    dataIndex: 'user_id',\n    title: <FormattedMessage id=\"user\" />,\n    hideInSearch: true,\n    render: (_n, record) => <TypeButtonDrawer type=\"App\\Models\\User\" type_id={record.user_id} />,\n  },\n  {\n    dataIndex: 'attempt_date',\n    title: <FormattedMessage id=\"TopicStatistics.giftQuiz.attemptDate\" />,\n    hideInSearch: true,\n    render: (_n, record) =>\n      record.attempt_date ? format(new Date(record.attempt_date), DATETIME_FORMAT) : '-',\n  },\n  {\n    dataIndex: 'attempt_time',\n    title: <FormattedMessage id=\"TopicStatistics.giftQuiz.attemptDuration\" />,\n    hideInSearch: true,\n    render: (_n, record) => (record.attempt_time ? `${record.attempt_time}s` : '-'),\n  },\n  {\n    dataIndex: 'summary',\n    title: <FormattedMessage id=\"TopicStatistics.giftQuiz.result\" />,\n    hideInSearch: true,\n    render: (_n, record) =>\n      typeof record.summary === 'number' ? `${(record.summary * 100).toFixed(2)}%` : '-',\n  },\n];\n\nconst getQuestionColumns = (giftQuizTopicStat: undefined | API.GiftQuizTopicStat): TableColumn[] =>\n  giftQuizTopicStat !== undefined\n    ? Object.keys(giftQuizTopicStat)\n        .filter((k) => k.includes('question'))\n        .map<TableColumn>((key, i) => ({\n          title: <FormattedMessage id=\"TopicStatistics.giftQuiz.question\" values={{ i: i + 1 }} />,\n          dataIndex: key,\n          hideInSearch: true,\n        }))\n    : [];\n\ninterface Props {\n  quizTopics: API.TopicQuiz[];\n}\n\nexport const GiftQuizStatistics: React.FC<Props> = ({ quizTopics }) => {\n  const [selectedTopicId, setSelectedTopicId] = useState(quizTopics?.[0]?.id);\n  const [dynamicColumns, setDynamicColumns] = useState<TableColumn[]>([]);\n\n  const topicOptions = useMemo(\n    () =>\n      quizTopics.reduce<{ value: number; label: string }[]>(\n        (acc, { id, title }) =>\n          title !== undefined && id !== undefined ? [...acc, { value: id, label: title }] : acc,\n        [],\n      ),\n    [quizTopics],\n  );\n\n  const columns: TableColumn[] = useMemo(\n    () => [\n      {\n        dataIndex: 'topic_id',\n        title: <FormattedMessage id=\"TopicStatistics.giftQuiz.topic\" />,\n        hideInTable: true,\n        valueType: 'select',\n        fieldProps: {\n          options: topicOptions,\n          defaultValue: topicOptions?.[0]?.value,\n          allowClear: false,\n        },\n      },\n      ...staticColumns,\n      ...dynamicColumns,\n    ],\n    [topicOptions, dynamicColumns],\n  );\n\n  const handleRequest = useCallback(async ({ topic_id = selectedTopicId }: TableParams) => {\n    if (!topic_id) return { success: false, data: [], total: 0 };\n    const response = await getTopicStats(topic_id, TopicStatsKey.QuizSummary);\n\n    if (\n      !response.success ||\n      !response.data?.[TopicStatsKey.QuizSummary as keyof typeof response.data]\n    ) {\n      return { success: false, data: [], total: 0 };\n    }\n\n    const [responseColumns, ...data] = response.data[\n      TopicStatsKey.QuizSummary as keyof typeof response.data\n    ] as API.GiftQuizTopicStat[];\n    setDynamicColumns(getQuestionColumns(responseColumns));\n\n    return {\n      success: true,\n      data,\n      total: data.length,\n    };\n  }, []);\n\n  return (\n    <ProTable<API.GiftQuizTopicStat, TableParams>\n      headerTitle={<FormattedMessage id=\"TopicStatistics.giftQuiz.title\" />}\n      onSubmit={({ topic_id }) => setSelectedTopicId(topic_id)}\n      onReset={() => setSelectedTopicId(quizTopics?.[0]?.id)}\n      toolBarRender={() => [\n        <ExportTopicStatsButton\n          key=\"export\"\n          stat={TopicStatsKey.QuizSummary}\n          topic_id={selectedTopicId}\n        />,\n      ]}\n      className=\"table-standalone\"\n      request={handleRequest}\n      columns={columns}\n      search={{ layout: 'vertical' }}\n      scroll={{ x: 1500 }}\n    />\n  );\n};\n","import React, { useMemo } from 'react';\n\nimport { TopicType } from '@/services/escola-lms/enums';\nimport { GiftQuizStatistics } from './GiftQuizStatistics';\n\ninterface TopicsGroupedByType {\n  [TopicType.RichText]: API.TopicRichText[];\n  [TopicType.OEmbed]: API.TopicOEmbed[];\n  [TopicType.Audio]: API.TopicAudio[];\n  [TopicType.Video]: API.TopicVideo[];\n  [TopicType.H5P]: API.TopicH5P[];\n  [TopicType.Image]: API.TopicImage[];\n  [TopicType.PDF]: API.TopicPDF[];\n  [TopicType.SCORM]: API.TopicScorm[];\n  [TopicType.Project]: API.TopicProject[];\n  [TopicType.GiftQuiz]: API.TopicQuiz[];\n  [TopicType.Unselected]: API.TopicUnselected[];\n}\n\ninterface Props {\n  flatTopics: API.Topic[];\n}\n\nexport const CourseTopicsStatistics: React.FC<Props> = ({ flatTopics }) => {\n  const topicsGroupedByType = useMemo(\n    () =>\n      flatTopics.reduce<TopicsGroupedByType>(\n        (acc, t) => ({ ...acc, [t.topicable_type]: [...acc[t.topicable_type as TopicType], t] }),\n        {\n          [TopicType.RichText]: [],\n          [TopicType.OEmbed]: [],\n          [TopicType.Audio]: [],\n          [TopicType.Video]: [],\n          [TopicType.H5P]: [],\n          [TopicType.Image]: [],\n          [TopicType.PDF]: [],\n          [TopicType.SCORM]: [],\n          [TopicType.Project]: [],\n          [TopicType.GiftQuiz]: [],\n          [TopicType.Unselected]: [],\n        },\n      ),\n    [flatTopics],\n  );\n\n  return (\n    <>\n      {topicsGroupedByType[TopicType.GiftQuiz].length > 0 && (\n        <GiftQuizStatistics quizTopics={topicsGroupedByType[TopicType.GiftQuiz]} />\n      )}\n      {/* TODO #1008 add other topics statistics when they are implemented on backend */}\n    </>\n  );\n};\n","import { Column } from '@ant-design/plots';\nimport ProCard from '@ant-design/pro-card';\nimport React, { useCallback } from 'react';\n\nconst Chart: React.FC<{\n  config: any;\n  value: any[];\n  title: JSX.Element | string;\n  children?: JSX.Element;\n  valueLabel?: string;\n}> = ({ config, value, title, children, valueLabel }) => {\n  const onTitle = useCallback(\n    (_title: string, datum: any) => {\n      const topic = value.find((v) => v.type === datum.type)?.topic;\n      if (topic as API.Topic) {\n        return `${topic.topicable_type.split('\\\\').pop()}:${topic.title}`;\n      }\n      return _title;\n    },\n    [value],\n  );\n\n  const onTooltip = useCallback(\n    (datum: any) => {\n      return {\n        name: valueLabel || datum.type,\n        value: datum.value,\n      };\n    },\n    [valueLabel],\n  );\n\n  return (\n    <ProCard title={title} headerBordered>\n      <div style={{ overflow: 'auto', minHeight: '400px' }}>\n        <Column\n          {...config}\n          tooltip={{\n            formatter: onTooltip,\n            title: onTitle,\n          }}\n          data={value}\n        />\n        {children && children}\n      </div>\n    </ProCard>\n  );\n};\n\nexport default Chart;\n","import { CourseTopicsStatistics } from '@/components/CourseTopicsStatistics';\nimport { getFlatTopics } from '@/components/ProgramForm/Context';\nimport { program as fetchProgram, getCourseStats } from '@/services/escola-lms/course';\nimport ProCard from '@ant-design/pro-card';\nimport { Alert, Spin, Typography } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { FormattedMessage, useIntl } from 'umi';\nimport Chart from './chart';\nimport { UserCourseAttempts, UserCourseFinish, UserProgress } from './userProgress';\n\ntype State =\n  | {\n      mode: 'init';\n    }\n  | {\n      mode: 'loading';\n    }\n  | {\n      mode: 'error';\n      error: string;\n    }\n  | {\n      mode: 'loaded';\n      // TODO #1009 add type\n      value: any;\n    };\n\nconst config = {\n  xField: 'type',\n  yField: 'value',\n  seriesField: 'type',\n  isRange: false,\n  title: null,\n  xAxis: {\n    label: {\n      autoHide: true,\n      autoRotate: false,\n    },\n  },\n  interactions: [\n    {\n      type: 'active-region',\n      enable: false,\n    },\n  ],\n\n  columnBackground: { style: { fill: 'rgba(0,0,0,0.1)' } },\n};\n\ninterface courseStats {\n  type: string;\n  value:\n    | API.CourseAttempts[]\n    | Record<string, API.CourseStatsAverageTimePerTopic>\n    | number\n    | API.FinishedCourseUserStats[]\n    | API.FinishedTopicsUserStats[];\n}\n\nconst CourseStatistics: React.FC<{ courseId: string }> = ({ courseId }) => {\n  const [state, setState] = useState<State>({ mode: 'init' });\n  const [topics, setTopics] = useState<API.Topic[]>([]);\n  const { Text } = Typography;\n  const intl = useIntl();\n\n  useEffect(() => {\n    setState({ mode: 'loading' });\n\n    Promise.all([fetchProgram(Number(courseId)), getCourseStats(Number(courseId))]).then(\n      ([programResponse, statsResponse]) => {\n        if (programResponse.success && statsResponse.success) {\n          setTopics(getFlatTopics(programResponse.data.lessons));\n          setState({\n            mode: 'loaded',\n            value: Object.entries(statsResponse.data).map(([key, value]) => {\n              const type = intl.formatMessage({\n                id: key.split('\\\\').pop(),\n              });\n              return {\n                type,\n                value,\n              };\n            }),\n          });\n        }\n      },\n    );\n  }, []);\n\n  return (\n    <ProCard split=\"vertical\">\n      {state.mode === 'loading' && <Spin />}\n      {state.mode === 'loaded' && (\n        <>\n          <UserProgress\n            course_id={Number(courseId)}\n            topics={topics}\n            stats={\n              state.value.find((element: courseStats) => element.type.includes('FinishedTopics'))\n                ?.value as API.FinishedTopicsUserStats[]\n            }\n          />\n\n          <UserCourseFinish\n            stats={\n              state.value.find((element: courseStats) => element.type.includes('FinishedCourse'))\n                ?.value as API.FinishedCourseUserStats[]\n            }\n            attempts={\n              state.value.find((element: courseStats) => element.type.includes('AttendanceList'))\n                ?.value as API.CourseAttempts[]\n            }\n          />\n\n          <UserCourseAttempts\n            stats={\n              state.value.find((element: courseStats) => element.type.includes('AttendanceList'))\n                ?.value as API.CourseAttempts[]\n            }\n          />\n\n          <Text>\n            <FormattedMessage id=\"MoneyEarned\" />\n            {`: ${\n              state.value.find(\n                (element: courseStats) =>\n                  element.type.split('\\\\').pop() === intl.formatMessage({ id: 'MoneyEarned' }),\n              ).value\n            }`}\n          </Text>\n\n          <ProCard colSpan={12} layout=\"center\">\n            <Chart\n              config={config}\n              title={<FormattedMessage id=\"People\" />}\n              value={state.value.filter((element: courseStats) => {\n                const type = element.type.split('\\\\').pop();\n                return (\n                  type === intl.formatMessage({ id: 'PeopleBought' }) ||\n                  type === intl.formatMessage({ id: 'PeopleFinished' }) ||\n                  type === intl.formatMessage({ id: 'PeopleStarted' })\n                );\n              })}\n            />\n          </ProCard>\n          <ProCard colSpan={12} layout=\"center\">\n            <Chart\n              config={config}\n              title={<FormattedMessage id=\"AverageTimePerTopic\" />}\n              valueLabel={intl.formatMessage({ id: 'seconds', defaultMessage: 'seconds' })}\n              value={Object.entries(\n                state.value.find(\n                  (element: courseStats) =>\n                    element.type.split('\\\\').pop() ===\n                    intl.formatMessage({ id: 'AverageTimePerTopic' }),\n                ).value,\n              ).map((element) => ({\n                type: element[0],\n                value: (element[1] as API.CourseStatsAverageTimePerTopic)?.average_time,\n                topic: topics.find((topic) => topic.id === Number(element[0])),\n              }))}\n            >\n              <Text>\n                <FormattedMessage id=\"AverageTime\" />\n                {`:\n                    ${\n                      state.value.find(\n                        (element: courseStats) =>\n                          element.type.split('\\\\').pop() ===\n                          intl.formatMessage({ id: 'AverageTime' }),\n                      ).value\n                    }\n                  `}\n              </Text>\n            </Chart>\n          </ProCard>\n          <ProCard>\n            <CourseTopicsStatistics flatTopics={topics} />\n          </ProCard>\n        </>\n      )}\n      {state.mode === 'error' && <Alert message={state.error} type=\"error\" />}\n    </ProCard>\n  );\n};\n\nexport default CourseStatistics;\n","import ProForm from '@ant-design/pro-form';\nimport { Button } from 'antd';\nimport type { UploadChangeParam } from 'antd/lib/upload';\nimport React from 'react';\nimport ReactPlayer from 'react-player';\nimport { FormattedMessage } from 'umi';\nimport SecureUploadBrowser from '../SecureUpload/browser';\n\nexport const ProFormVideoUpload: React.FC<{\n  folder: string;\n  action: string;\n  form_name: string;\n  src_name: string;\n  getUploadedSrcField: (info: UploadChangeParam) => string;\n  setPath: (state: object) => void;\n  hideLabel?: boolean;\n}> = ({ action, form_name, src_name, getUploadedSrcField, setPath, folder, hideLabel }) => {\n  return (\n    <ProForm.Group title={<FormattedMessage id=\"video\" />}>\n      <ProForm.Item shouldUpdate>\n        {(form) => {\n          return (\n            <React.Fragment>\n              <SecureUploadBrowser\n                folder={folder}\n                accept=\"video/*\"\n                name={form_name}\n                url={action}\n                onChange={(info) => {\n                  if (info.file.status === 'done') {\n                    form.setFieldsValue({ [src_name]: getUploadedSrcField(info) });\n                    if (info.file.response?.success) {\n                      const data = info.file.response.data;\n                      setPath({\n                        [`${form_name}_url`]: data[`${form_name}_url` as keyof typeof data],\n                        [`${form_name}_path`]: data[`${form_name}_path` as keyof typeof data],\n                      });\n                    }\n                  }\n                }}\n                hideLabel={hideLabel}\n              />\n              <Button\n                danger\n                onClick={() => [\n                  setPath({\n                    [`${form_name}_url`]: '',\n                    [`${form_name}_path`]: '',\n                  }),\n                  form.setFieldsValue({ [src_name]: '' }),\n                ]}\n              >\n                <FormattedMessage id=\"delete\" />\n              </Button>\n            </React.Fragment>\n          );\n        }}\n      </ProForm.Item>\n      <ProForm.Item shouldUpdate>\n        {(form) => {\n          const formSrcName = form.getFieldValue(src_name);\n          if (!!formSrcName) {\n            return <ReactPlayer width={'auto'} height={200} url={formSrcName} controls />;\n          }\n          return <></>;\n        }}\n      </ProForm.Item>\n    </ProForm.Group>\n  );\n};\n\nexport default ProFormVideoUpload;\n","export const getFormData = (data) => {\n  const formData = new FormData();\n\n  for (let key in data) {\n    if (data[key] != undefined || data[key] != null) {\n      if (Array.isArray(data[key])) {\n        if (!data[key].length) {\n          formData.append(`${key}[]`, '[]');\n        }\n        for (let value of data[key]) {\n          formData.append(`${key}[]`, value);\n        }\n        continue;\n      }\n\n      formData.set(key, data[key]);\n    }\n  }\n  return formData;\n};\n","import { Context } from '@/components/ProgramForm/Context';\nimport { ProFormTreeSelect } from '@ant-design/pro-form';\nimport type { DefaultOptionType } from 'antd/es/select';\nimport React, { useContext, useMemo } from 'react';\nimport { FormattedMessage, useIntl } from 'umi';\n\ntype TreeData = Omit<DefaultOptionType, 'label'>;\n\nconst traverse = (\n  lessons: API.Lesson[],\n  disabledLessonId?: number,\n  disableNested?: boolean,\n): TreeData[] =>\n  lessons.reduce<TreeData[]>((acc, lesson) => {\n    const disabled = disabledLessonId === lesson.id;\n\n    return [\n      ...acc,\n      {\n        value: lesson.id,\n        title: lesson.title,\n        label: lesson.title,\n        disabled: disableNested || disabled,\n        children: traverse(lesson?.lessons ?? [], disabledLessonId, disabled || disableNested),\n      },\n    ];\n  }, []);\n\ninterface Props {\n  name: string;\n  currentLessonId?: number;\n}\n\nexport const ParentLesson: React.FC<Props> = ({ name, currentLessonId }) => {\n  const intl = useIntl();\n  const { state } = useContext(Context);\n\n  const treeData: TreeData[] = useMemo(\n    () => [\n      {\n        // This have to be empty string\n        value: '',\n        title: intl.formatMessage({\n          id: 'root',\n          defaultMessage: 'Root',\n        }),\n        label: intl.formatMessage({\n          id: 'root',\n          defaultMessage: 'Root',\n        }),\n        children: traverse(state?.lessons ?? [], currentLessonId),\n      },\n    ],\n    [state, currentLessonId],\n  );\n\n  return (\n    <div className=\"tree-select\">\n      <ProFormTreeSelect\n        name={name}\n        label={<FormattedMessage id=\"parent_lesson\" />}\n        fieldProps={{ treeData, treeDefaultExpandAll: true, treeLine: true }}\n      />\n    </div>\n  );\n};\n","import ProCard from '@ant-design/pro-card';\nimport ProForm, { ProFormDatePicker, ProFormSwitch, ProFormText } from '@ant-design/pro-form';\nimport { Affix, Button, Col, Divider, Popconfirm, Row, Space } from 'antd';\nimport { isAfter, isBefore } from 'date-fns';\nimport React, { useContext } from 'react';\nimport { FormattedMessage, useIntl } from 'umi';\n\nimport { Context } from '@/components/ProgramForm/Context';\nimport WysiwygMarkdown from '@/components/WysiwygMarkdown';\nimport { ParentLesson } from '../ParentLesson';\nimport type { StateLesson } from './types';\n\nexport const LessonForm: React.FC<{\n  lesson: StateLesson;\n  onFinish: (values: Record<string, string>) => Promise<void>;\n  onValuesChange: (changedValues: any, values: Record<string, string>) => void;\n  onDelete: () => Promise<void>;\n  onClone: () => void;\n  initialValues: any;\n  loading: boolean;\n}> = ({ onFinish, onValuesChange, onDelete, onClone, initialValues, lesson, loading = false }) => {\n  const { isAssistant } = useContext(Context);\n  const [form] = ProForm.useForm();\n  const activeFrom = ProForm.useWatch('active_from', form);\n  const activeTo = ProForm.useWatch('active_to', form);\n\n  const intl = useIntl();\n  return (\n    <ProForm\n      form={form}\n      submitter={{\n        // Fully customize the entire area\n        render: (props) => {\n          return (\n            <Row gutter={16}>\n              <Col span={24 - 8}>\n                <Row justify=\"center\" className={'program__cta-footer'}>\n                  <Affix offsetBottom={4}>\n                    <Space size=\"large\">\n                      <Button\n                        loading={loading}\n                        type=\"primary\"\n                        key=\"submit\"\n                        onClick={() => props.form?.submit()}\n                        {...props.submitButtonProps}\n                      >\n                        {lesson.isNew ? (\n                          <FormattedMessage id=\"create\" />\n                        ) : (\n                          <FormattedMessage id=\"save\" />\n                        )}\n                      </Button>\n                      {!lesson.isNew && (\n                        <Button onClick={onClone} loading={loading}>\n                          <FormattedMessage id=\"clone\" />\n                        </Button>\n                      )}\n                      <Popconfirm\n                        key=\"delete\"\n                        onConfirm={onDelete}\n                        title={<FormattedMessage id=\"deleteQuestion\" />}\n                        okText={<FormattedMessage id=\"yes\" />}\n                        cancelText={<FormattedMessage id=\"no\" />}\n                      >\n                        <Button\n                          type=\"primary\"\n                          danger\n                          {...props.submitButtonProps}\n                          loading={loading}\n                        >\n                          <FormattedMessage id=\"delete\" />\n                        </Button>\n                      </Popconfirm>\n                    </Space>\n                  </Affix>\n                </Row>\n              </Col>\n            </Row>\n          );\n        },\n      }}\n      layout=\"vertical\"\n      onFinish={onFinish}\n      onValuesChange={onValuesChange}\n      initialValues={{ ...initialValues, summary: initialValues.summary || '' }}\n      style={{ height: '100%' }}\n    >\n      <Row\n        gutter={16}\n        style={{\n          height: '100%',\n        }}\n      >\n        <Col span={24 - 8}>\n          <Divider>\n            <FormattedMessage id=\"lesson\" />\n          </Divider>\n          <ProCard>\n            <ProFormText\n              name=\"title\"\n              label={<FormattedMessage id=\"title\" />}\n              tooltip={<FormattedMessage id=\"title\" />}\n              placeholder={intl.formatMessage({\n                id: 'title',\n              })}\n              required\n              labelCol={{\n                span: 5,\n              }}\n            />\n            <ProForm.Item\n              name=\"summary\"\n              label={<FormattedMessage id=\"summary\" />}\n              tooltip={<FormattedMessage id=\"summary_tooltip\" />}\n              valuePropName=\"value\"\n              labelCol={{\n                span: 5,\n              }}\n            >\n              <WysiwygMarkdown\n                directory={`course/${lesson.course_id}/lesson/${lesson.id}/wysiwyg`}\n              />\n            </ProForm.Item>\n          </ProCard>\n        </Col>\n        <Col span={8}>\n          <aside className={'program-sidebar program-sidebar--right'}>\n            <ProFormText\n              name=\"duration\"\n              label={<FormattedMessage id=\"duration\" />}\n              tooltip={<FormattedMessage id=\"duration\" />}\n              placeholder={intl.formatMessage({\n                id: 'duration',\n              })}\n            />\n            <ProFormSwitch name=\"active\" label={<FormattedMessage id=\"is_active\" />} />\n            <ProFormDatePicker\n              allowClear={false}\n              width=\"lg\"\n              name=\"active_from\"\n              label={<FormattedMessage id=\"active_from\" />}\n              placeholder={intl.formatMessage({\n                id: 'active_from',\n                defaultMessage: 'active_from',\n              })}\n              rules={[\n                {\n                  validator: (_, value) => {\n                    if (value && activeTo && isAfter(new Date(value), new Date(activeTo))) {\n                      return Promise.reject(new Error(intl.formatMessage({ id: 'invalidDate' })));\n                    }\n\n                    return Promise.resolve();\n                  },\n                },\n              ]}\n            />\n            <ProFormDatePicker\n              allowClear={false}\n              width=\"lg\"\n              name=\"active_to\"\n              label={<FormattedMessage id=\"active_to\" />}\n              placeholder={intl.formatMessage({\n                id: 'active_to',\n                defaultMessage: 'active_to',\n              })}\n              disabled={!activeFrom && !activeTo}\n              rules={[\n                {\n                  validator(_, value) {\n                    if (value && activeFrom && isBefore(new Date(value), new Date(activeFrom))) {\n                      return Promise.reject(new Error(intl.formatMessage({ id: 'invalidDate' })));\n                    }\n\n                    return Promise.resolve();\n                  },\n                },\n              ]}\n            />\n            <ParentLesson name=\"parent_id\" currentLessonId={lesson?.id} />\n            {isAssistant && (\n              <ProFormText\n                name=\"assistant_id\"\n                label={<FormattedMessage id=\"assistant_id\" defaultMessage=\"Assistant ID\" />}\n                tooltip={<FormattedMessage id=\"assistant_id_tooltip\" />}\n                placeholder={intl.formatMessage({\n                  id: 'Assistant ID',\n                })}\n              />\n            )}\n          </aside>\n        </Col>\n      </Row>\n    </ProForm>\n  );\n};\n\nexport default LessonForm;\n","import React, { useCallback, useContext, useEffect, useState } from 'react';\nimport { useParams } from 'umi';\n\nimport { Context } from '@/components/ProgramForm/Context';\nimport { getFormData } from '@/services/api';\nimport LessonForm from './form';\nimport type { StateLesson } from './types';\n\nconst getStateLesson = (lesson: API.Lesson): StateLesson => ({\n  ...lesson,\n  parent_id: lesson.parent_id ?? '',\n});\n\nexport const Lesson: React.FC = () => {\n  const { updateLesson, deleteLesson, cloneLesson, currentEditMode } = useContext(Context);\n\n  const lesson =\n    currentEditMode && currentEditMode.mode === 'lesson' && currentEditMode.value\n      ? currentEditMode.value\n      : {};\n  const [state, setState] = useState<StateLesson>(getStateLesson(lesson));\n  const [, setTopicList] = useState<API.Topic[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  const params = useParams<{ course?: string; tab?: string }>();\n\n  useEffect(() => {\n    setState(getStateLesson(lesson));\n    return lesson?.topics && setTopicList(lesson.topics);\n  }, [lesson]);\n\n  const handleSave = useCallback(() => {\n    setLoading(true);\n\n    const formData = getFormData({\n      course_id: lesson?.course_id || params.course,\n      ...state,\n      active: state.active ? 1 : 0,\n      parent_lesson_id: state.parent_id,\n    });\n\n    if (updateLesson && state.id) {\n      return updateLesson(state.id, formData)\n        .then(() => setLoading(false))\n        .catch((err) => {\n          console.error(err);\n          setLoading(false);\n        });\n    }\n    return Promise.resolve();\n  }, [state, lesson?.course_id, updateLesson]);\n\n  const handleDelete = useCallback(() => {\n    if (state.id && deleteLesson) {\n      deleteLesson(state.id);\n    }\n    return Promise.resolve();\n  }, [deleteLesson, state.id]);\n\n  const handleClone = useCallback(() => {\n    return state.id && cloneLesson?.(state.id);\n  }, [cloneLesson, state.id]);\n\n  return (\n    <LessonForm\n      loading={loading}\n      lesson={state}\n      initialValues={state}\n      onDelete={handleDelete}\n      onFinish={handleSave}\n      onClone={handleClone}\n      onValuesChange={(changedValues) => {\n        setState((prevState) => ({\n          ...prevState,\n          ...changedValues,\n        }));\n      }}\n    />\n  );\n};\n\nexport default Lesson;\n","import WysiwygMarkdown from '@/components/WysiwygMarkdown';\nimport { FormattedMessage } from '@@/plugin-locale/localeExports';\nimport ProForm from '@ant-design/pro-form';\nimport { Button, Modal } from 'antd';\nimport React from 'react';\n\ninterface DescriptionModalProps {\n  handleOk: () => void;\n  isModalVisible: boolean;\n  initialValues: API.Topic;\n  courseId: number;\n}\n\nexport const DescriptionModal: React.FC<DescriptionModalProps> = (props) => {\n  const { handleOk, isModalVisible, initialValues, courseId } = props;\n\n  return (\n    <Modal\n      title={<FormattedMessage id=\"description\" />}\n      visible={isModalVisible}\n      onOk={handleOk}\n      onCancel={handleOk}\n      width={1000}\n      footer={[\n        <Button key=\"back\" type={'primary'} onClick={handleOk}>\n          Ok\n        </Button>,\n      ]}\n    >\n      <ProForm.Item\n        name=\"introduction\"\n        label={<FormattedMessage id=\"introduction\" />}\n        labelCol={{ span: 5 }}\n        wrapperCol={{ span: 19 }}\n        tooltip={<FormattedMessage id=\"introduction_tooltip\" />}\n        valuePropName=\"value\"\n      >\n        <WysiwygMarkdown\n          directory={`course/${courseId}/lesson/${initialValues.lesson_id}/topic/${initialValues.id}/wysiwyg`}\n        />\n      </ProForm.Item>\n      <ProForm.Item\n        name=\"description\"\n        label={<FormattedMessage id=\"description\" />}\n        labelCol={{ span: 5 }}\n        wrapperCol={{ span: 19 }}\n        tooltip={<FormattedMessage id=\"description_tooltip\" />}\n        valuePropName=\"value\"\n      >\n        <WysiwygMarkdown\n          directory={`course/${courseId}/lesson/${initialValues.lesson_id}/topic/${initialValues.id}/wysiwyg`}\n        />\n      </ProForm.Item>\n      <ProForm.Item\n        name=\"summary\"\n        label={<FormattedMessage id=\"summary\" />}\n        labelCol={{ span: 5 }}\n        wrapperCol={{ span: 19 }}\n        tooltip={<FormattedMessage id=\"summary_tooltip\" />}\n        valuePropName=\"value\"\n      >\n        <WysiwygMarkdown\n          directory={`course/${courseId}/lesson/${initialValues.lesson_id}/topic/${initialValues.id}/wysiwyg`}\n        />\n      </ProForm.Item>\n    </Modal>\n  );\n};\n","import JsonEditor from '@/components/JsonEditor';\nimport { DescriptionModal } from '@/components/ProgramForm/ThreeColProgram/TopicForm/descriptionModal';\nimport ProForm, { ProFormSwitch, ProFormText } from '@ant-design/pro-form';\nimport { Button } from 'antd';\nimport React from 'react';\nimport { FormattedMessage, useIntl } from 'umi';\nimport { ParentLesson } from '../ParentLesson';\n\nexport const TopicForm: React.FC<{\n  onValuesChange: (changedValues: API.Topic, values: API.Topic) => void;\n  initialValues: API.Topic;\n  courseId: number;\n  courseLessons: API.Lesson[];\n}> = ({ onValuesChange, initialValues, courseId }) => {\n  const intl = useIntl();\n\n  const [visibleModal, setVisibleModal] = React.useState<boolean>(false);\n\n  return (\n    <ProForm<API.Topic>\n      submitter={false}\n      onValuesChange={onValuesChange}\n      initialValues={{ ...initialValues }}\n      layout={'horizontal'}\n    >\n      <ProFormText\n        name=\"title\"\n        label={<FormattedMessage id=\"title\" />}\n        tooltip={<FormattedMessage id=\"title\" />}\n        placeholder={intl.formatMessage({\n          id: 'title',\n          defaultMessage: 'title',\n        })}\n        required\n      />\n      <ProFormText\n        name=\"duration\"\n        label={<FormattedMessage id=\"duration\" />}\n        tooltip={<FormattedMessage id=\"duration\" />}\n        placeholder={intl.formatMessage({\n          id: 'duration',\n        })}\n      />\n      <ParentLesson name=\"lesson_id\" />\n      <ProForm.Item label={<FormattedMessage id=\"description\" />}>\n        <Button type={'primary'} onClick={() => setVisibleModal(true)}>\n          <FormattedMessage id=\"open_editor\" />\n        </Button>\n      </ProForm.Item>\n      <ProFormSwitch name=\"active\" label={<FormattedMessage id=\"is_active\" />} />\n      <ProFormSwitch name=\"preview\" label={<FormattedMessage id=\"able_to_preview\" />} />\n      <ProFormSwitch name=\"can_skip\" label={<FormattedMessage id=\"can_skip\" />} />\n      <ProForm.Item\n        name=\"json\"\n        label={<FormattedMessage id=\"json\" />}\n        tooltip={<FormattedMessage id=\"json_tooltip\" />}\n        valuePropName=\"value\"\n      >\n        <JsonEditor />\n      </ProForm.Item>\n      <DescriptionModal\n        isModalVisible={visibleModal}\n        handleOk={() => setVisibleModal(false)}\n        initialValues={initialValues}\n        courseId={courseId}\n      />\n    </ProForm>\n  );\n};\n\nexport default TopicForm;\n","export const getTypeName = (topic: API.Topic): string => {\n  if (typeof topic?.topicable_type !== 'string' || !topic.topicable_type) return 'Unknown';\n  const types: string[] = (topic?.topicable_type || '').split('\\\\');\n\n  return types.pop() || 'Unknown';\n};\n","import { allContent } from '@/services/escola-lms/h5p';\nimport { searchSubstring } from '@/utils/utils';\nimport { Select } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { FormattedMessage } from 'umi';\n\nexport const H5PContentSelect: React.FC<{\n  state?: {\n    type: number;\n  };\n  multiple?: boolean;\n  value?: string;\n  onChange?: (value: string) => void;\n}> = ({ value, onChange, multiple = false }) => {\n  const [contents, setContents] = useState<API.H5PContentListItem[]>([]);\n\n  useEffect(() => {\n    allContent().then((response) => response.success && setContents(response.data));\n  }, []);\n\n  useEffect(() => {\n    if (contents.length) {\n      if (!contents.find((content) => Number(content.id) === Number(value))) {\n        allContent().then((response) => response.success && setContents(response.data));\n      }\n    }\n  }, [value]);\n\n  return (\n    <Select\n      loading={contents.length === 0}\n      style={{ width: '100%' }}\n      value={value}\n      onChange={onChange}\n      mode={multiple ? 'multiple' : undefined}\n      showSearch\n      placeholder={<FormattedMessage id=\"H5P_select_content\" />}\n      optionFilterProp=\"children\"\n      filterOption={(input, option) => {\n        const h5pTitle = option?.children?.slice(1, option?.children.length).join('');\n        return searchSubstring(h5pTitle, input);\n      }}\n    >\n      {contents.map((content) => (\n        <Select.Option key={content.id.toString()} value={content.id.toString()}>\n          <small>{content.id}</small> {content.title} ({content.library.title})\n        </Select.Option>\n      ))}\n    </Select>\n  );\n};\n\nexport default H5PContentSelect;\n","import H5PContentSelect from '@/components/H5PContentSelect';\nimport { Button, Col, Divider, Row, Typography } from 'antd';\nimport React, { useState } from 'react';\n\nimport UploadH5P from '@/components/H5P/upload';\nimport { FormattedMessage, useIntl } from 'umi';\n\nimport H5PCard from '@/components/H5P/card';\n\nexport const H5PForm: React.FC<{\n  id: string;\n  onChange: (value: string) => void;\n}> = ({ id, onChange }) => {\n  const intl = useIntl();\n  const [editId, setEditId] = useState<number | 'new'>(\n    id === 'new' || id === undefined ? 'new' : Number(id),\n  );\n\n  return (\n    <React.Fragment>\n      <Row gutter={16} align=\"middle\" className=\"create-new\">\n        <Col>\n          <Button type=\"primary\" onClick={() => setEditId('new')}>\n            {' '}\n            <FormattedMessage id=\"create_new\" />\n          </Button>\n        </Col>\n\n        <Col span={4}>\n          <Typography>\n            <small>\n              <FormattedMessage id=\"or\" />\n            </small>{' '}\n            <FormattedMessage id=\"reuse_existing\" />\n          </Typography>\n        </Col>\n\n        <Col span={12}>\n          <H5PContentSelect\n            value={id}\n            onChange={(value) => {\n              onChange(value);\n\n              setEditId(id === 'new' ? 'new' : Number(id));\n            }}\n          />\n        </Col>\n      </Row>\n\n      <Row\n        style={{\n          marginTop: '30px',\n        }}\n      >\n        <Col span={24}>\n          <H5PCard key={editId} id={editId} onSubmit={(h5pId) => onChange(String(h5pId))} />\n        </Col>\n      </Row>\n\n      <Divider />\n\n      <Row gutter={16}>\n        <Col span={24}>\n          <Row>\n            <UploadH5P\n              onSuccess={(data) => {\n                if (data.data.id) {\n                  onChange(String(data.data.id));\n                }\n              }}\n              onError={() =>\n                console.log(\n                  intl.formatMessage({\n                    id: 'error',\n                  }),\n                )\n              }\n            />\n          </Row>\n        </Col>\n      </Row>\n    </React.Fragment>\n  );\n};\n\nexport default H5PForm;\n","import React from 'react';\nimport Embed, { type EmbedProps } from 'react-tiny-oembed';\n\nconst PROVIDERS = [\n  {\n    provider_name: 'YouTube',\n    provider_url: 'https://www.youtube.com/',\n    endpoints: [\n      {\n        schemes: [\n          'https://*.youtube.com/watch*',\n          'https://*.youtube.com/v/*',\n          'https://youtu.be/*',\n          'https://*.youtube.com/shorts/*',\n          'https://youtube.com/shorts/*',\n        ],\n        url: 'https://www.youtube.com/oembed',\n        discovery: true,\n      },\n    ],\n  },\n  {\n    provider_name: 'Reddit',\n    provider_url: 'https://reddit.com/',\n    endpoints: [\n      {\n        schemes: ['https://reddit.com/r/*/comments/*/*', 'https://www.reddit.com/r/*/comments/*/*'],\n        url: 'https://www.reddit.com/oembed',\n      },\n    ],\n  },\n  {\n    provider_name: 'Flickr',\n    provider_url: 'https://www.flickr.com/',\n    endpoints: [\n      {\n        schemes: [\n          'http://*.flickr.com/photos/*',\n          'http://flic.kr/p/*',\n          'https://*.flickr.com/photos/*',\n          'https://flic.kr/p/*',\n        ],\n        url: 'https://www.flickr.com/services/oembed/',\n        discovery: true,\n      },\n    ],\n  },\n  {\n    provider_name: 'Vimeo',\n    provider_url: 'https://vimeo.com/',\n    endpoints: [\n      {\n        schemes: [\n          'https://vimeo.com/*',\n          'https://vimeo.com/album/*/video/*',\n          'https://vimeo.com/channels/*/*',\n          'https://vimeo.com/groups/*/videos/*',\n          'https://vimeo.com/ondemand/*/*',\n          'https://player.vimeo.com/video/*',\n        ],\n        url: 'https://vimeo.com/api/oembed.{format}',\n        discovery: true,\n      },\n    ],\n  },\n  {\n    provider_name: 'SoundCloud',\n    provider_url: 'http://soundcloud.com/',\n    endpoints: [\n      {\n        schemes: [\n          'http://soundcloud.com/*',\n          'https://soundcloud.com/*',\n          'https://soundcloud.app.goog.gl/*',\n        ],\n        url: 'https://soundcloud.com/oembed',\n      },\n    ],\n  },\n  {\n    provider_name: 'Twitter',\n    provider_url: 'http://www.twitter.com/',\n    endpoints: [\n      {\n        schemes: [\n          'https://twitter.com/*/status/*',\n          'https://*.twitter.com/*/status/*',\n          'https://twitter.com/*/moments/*',\n          'https://*.twitter.com/*/moments/*',\n        ],\n        url: 'https://publish.twitter.com/oembed',\n      },\n    ],\n  },\n  {\n    provider_name: 'GIPHY',\n    provider_url: 'https://giphy.com',\n    endpoints: [\n      {\n        schemes: [\n          'https://giphy.com/gifs/*',\n          'http://gph.is/*',\n          'https://media.giphy.com/media/*/giphy.gif',\n        ],\n        url: 'https://giphy.com/services/oembed',\n        discovery: true,\n      },\n    ],\n  },\n];\n\ntype Props = Omit<EmbedProps, 'providers'>;\n\nexport const OEmbed: React.FC<Props> = (props) => <Embed {...props} providers={PROVIDERS} />;\n","import { Button, Input, Row } from 'antd';\nimport React, { useState } from 'react';\nimport { FormattedMessage } from 'umi';\n\nimport { OEmbed } from '@/components/OEmbed';\n\nexport const Oembed: React.FC<{ text: string; onChange: (value: string) => void }> = ({\n  text,\n  onChange,\n}) => {\n  const [currentValue, setCurrentValue] = useState<string>(text);\n  const [previewValue, setPreviewValue] = useState<string>(text);\n\n  return (\n    <React.Fragment>\n      <Row>\n        <Input\n          value={text}\n          onChange={(e) => {\n            setCurrentValue(e.target.value);\n            onChange(e.target.value);\n          }}\n        />\n        <Button onClick={() => setPreviewValue(currentValue)}>\n          <FormattedMessage id=\"preview\" />\n        </Button>\n      </Row>\n      <Row>{previewValue && <OEmbed key={previewValue} url={previewValue} />}</Row>\n    </React.Fragment>\n  );\n};\n\nexport default Oembed;\n","import React from 'react';\n\nimport FormWysiwygProps from '@/components/WysiwygMarkdown';\n\nexport const MediaText: React.FC<{\n  text: string;\n  onChange: (value: string) => void;\n  directory: string;\n}> = ({ text, onChange, directory = 'topics/new' }) => {\n  return (\n    <div>\n      <FormWysiwygProps\n        directory={directory}\n        value={text}\n        onChange={(value) => {\n          onChange(value);\n        }}\n      />\n    </div>\n  );\n};\n\nexport default MediaText;\n","import SecureUploadBrowser from '@/components/SecureUpload/browser';\nimport { TopicType } from '@/services/escola-lms/enums';\nimport { UploadOutlined } from '@ant-design/icons';\nimport { Button, Pagination, Progress, Row, Spin, Typography } from 'antd';\nimport type { UploadChangeParam, UploadFile } from 'antd/lib/upload';\nimport React, { useCallback, useContext, useEffect, useState } from 'react';\nimport { Document, Page, pdfjs } from 'react-pdf';\nimport { FormattedMessage } from 'umi';\nimport './index.css';\n\nimport { Context } from '@/components/ProgramForm/Context';\n\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`;\nconst CONFIG = {\n  acceptedTypes: {\n    audio: '.mp3,audio/*',\n    video: '.mp3,video/*',\n    document: '.doc,.docx,.pdf,.zip',\n    [TopicType.Audio]: '.mp3,audio/*',\n    [TopicType.Video]: '.mp3,video/*',\n    [TopicType.PDF]: '.pdf,application/pdf',\n  },\n};\n\nconst prepareObject = (data: Record<string, string | number | boolean | object | undefined>) => {\n  const result: Record<string, string | number> = {};\n  let key: string;\n  for (key in data) {\n    switch (typeof data[key]) {\n      case 'boolean':\n        result[key] = data[key] ? 1 : 0;\n        break;\n      case 'object':\n        result[key] = JSON.stringify(data[key]);\n        break;\n      case 'string':\n      case 'number':\n        result[key] = data[key] as string | number;\n        break;\n      default:\n        break;\n    }\n  }\n  return result;\n};\n\nconst PDFPreview: React.FC<{ file: string }> = ({ file }) => {\n  const [nPages, setNumPages] = useState(0);\n  const [pageNumber, setPageNumber] = useState(1);\n\n  return (\n    <div>\n      {nPages === 0 ? (\n        <Spin />\n      ) : (\n        <div style={{ margin: '0.5em 0' }}>\n          <Typography>\n            <FormattedMessage id=\"page\" />:\n          </Typography>\n          <Pagination\n            defaultPageSize={1}\n            size=\"small\"\n            total={nPages}\n            onChange={(page) => setPageNumber(page)}\n            simple\n          />\n        </div>\n      )}\n      <Document file={file} onLoadSuccess={({ numPages }) => setNumPages(numPages)}>\n        <Page pageNumber={pageNumber} className=\"pdf-preview\" />\n      </Document>\n    </div>\n  );\n};\n\nconst VideoProgress: React.FC<{ topic: API.TopicVideo }> = ({ topic }) => {\n  const { getLessons } = useContext(Context);\n\n  useEffect(() => {\n    if (topic.json?.ffmpeg.state === 'coding') {\n      const t = setTimeout(() => {\n        if (getLessons) {\n          getLessons();\n        }\n      }, 1000);\n      return () => clearTimeout(t);\n    }\n    return;\n  }, []);\n\n  if (topic.json?.ffmpeg.state === 'coding') {\n    return (\n      <Typography>\n        <FormattedMessage id=\"encoding_progress\" defaultMessage=\"Encoding progress:\" />\n        <Progress percent={topic.json?.ffmpeg?.percentage} />\n      </Typography>\n    );\n  }\n  return <React.Fragment />;\n};\n\nexport const MediaUploadPreview: React.FC<{ topic: API.Topic; type: TopicType }> = ({\n  type,\n  topic,\n}) => {\n  if (topic && topic.topicable && 'url' in topic.topicable) {\n    switch (type) {\n      case TopicType.Audio:\n        return topic.topicable_type === TopicType.Audio && topic.topicable?.url ? (\n          <audio preload=\"none\" controls src={topic.topicable.url} />\n        ) : (\n          <React.Fragment />\n        );\n      case TopicType.Video:\n        return topic.topicable_type === TopicType.Video && topic.topicable?.url ? (\n          <video controls src={topic.topicable.url} width=\"100%\" />\n        ) : (\n          <React.Fragment />\n        );\n      case TopicType.Image:\n        return topic.topicable_type === TopicType.Image && topic.topicable?.url ? (\n          <img title=\"Topic image\" src={topic.topicable.url} width=\"100%\" />\n        ) : (\n          <React.Fragment />\n        );\n      case TopicType.PDF:\n        return topic.topicable_type === TopicType.PDF && topic.topicable?.url ? (\n          <PDFPreview file={topic.topicable.url} />\n        ) : (\n          <React.Fragment />\n        );\n      default:\n        return <React.Fragment />;\n    }\n  }\n  return <React.Fragment />;\n};\n\nexport const MediaUploadForm: React.FC<{\n  topic: API.Topic;\n  currentState: API.Topic;\n  type: TopicType.Audio | TopicType.Video | TopicType.Image | TopicType.PDF;\n  onUpdate: (info: UploadChangeParam) => void;\n  onChange: (info: UploadChangeParam) => void;\n  disabled: boolean;\n  folder: string;\n  maxFiles?: number;\n  clearListAfterUpload?: boolean;\n}> = ({\n  topic,\n  type,\n  onUpdate,\n  disabled = false,\n  currentState,\n  onChange,\n  folder,\n  maxFiles,\n  clearListAfterUpload,\n}) => {\n  const onInfoChange = useCallback(\n    (info: UploadChangeParam<UploadFile<API.DefaultResponse<API.File>>>) => {\n      if (info.file.status === 'done') {\n        return onUpdate && onUpdate(info);\n      }\n\n      return onChange && onChange(info);\n    },\n    [onUpdate, onChange],\n  );\n\n  const data = {\n    ...currentState,\n    topicable_type: type,\n    active: currentState.active ? 1 : 0,\n    preview: currentState.preview ? 1 : 0,\n    can_skip: currentState.can_skip ? 1 : 0,\n  };\n\n  // I delete these fields if they are null because validation does not allow them on the backend so if they are null the user has not edited them\n\n  if (!data.introduction) {\n    delete data?.introduction;\n  }\n  if (!data.description) {\n    delete data?.description;\n  }\n  if (!data.summary) {\n    delete data?.summary;\n  }\n  if (!data.json) {\n    delete data?.json;\n  }\n\n  return (\n    <React.Fragment>\n      <Row>\n        <SecureUploadBrowser\n          folder={folder}\n          onChange={onInfoChange}\n          name=\"value\"\n          url={topic.isNew ? `/api/admin/topics` : `/api/admin/topics/${topic.id}?_method=PUT`}\n          accept={CONFIG.acceptedTypes[type as keyof typeof CONFIG.acceptedTypes]}\n          data={prepareObject(data)}\n          maxFiles={maxFiles}\n          clearListAfterUpload={clearListAfterUpload}\n        >\n          <Button disabled={disabled} icon={<UploadOutlined />}>\n            Click to upload {type}\n          </Button>\n        </SecureUploadBrowser>\n      </Row>\n      <Row>\n        <div style={{ padding: '0 12px' }}>\n          {topic.topicable_type === TopicType.Video && (\n            <VideoProgress topic={topic as API.TopicVideo} />\n          )}\n          <MediaUploadPreview type={type} topic={currentState} />\n        </div>\n      </Row>\n    </React.Fragment>\n  );\n};\n\nexport default MediaUploadForm;\n","import SecureUploadBrowser from '@/components/SecureUpload/browser';\nimport { deleteResource, resources as fetchResources } from '@/services/escola-lms/course';\nimport { DeleteOutlined, DownloadOutlined } from '@ant-design/icons';\nimport { Button, List } from 'antd';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\n\nexport const Resources: React.FC<{ topicId: number; folder: string }> = ({ topicId, folder }) => {\n  const [resources, setResources] = useState<API.Resource[]>();\n  const controller = useRef<AbortController>();\n\n  const fetch = useCallback(() => {\n    if (controller.current) {\n      controller.current.abort();\n    }\n    controller.current = new AbortController();\n\n    fetchResources(topicId, { signal: controller.current.signal }).then((response) => {\n      if (response && response.success) {\n        setResources(response.data);\n      }\n    });\n  }, [topicId]);\n\n  const onUploaded = useCallback((response: API.ResourceRow) => {\n    if (response && response.success) {\n      fetchResources(topicId).then((fetchResponse) => {\n        if (fetchResponse && fetchResponse.success) {\n          setResources(fetchResponse.data);\n        }\n      });\n    }\n  }, []);\n\n  const onRemove = useCallback(\n    (resId: number) => {\n      deleteResource(topicId, resId).then((response) => {\n        if (response.success) {\n          fetch();\n        }\n      });\n    },\n    [topicId],\n  );\n\n  useEffect(() => {\n    fetch();\n  }, [topicId]);\n\n  return (\n    <List\n      size=\"small\"\n      itemLayout=\"horizontal\"\n      dataSource={resources}\n      header={\n        <SecureUploadBrowser<API.Resource>\n          folder={folder}\n          url={`/api/admin/topics/${topicId}/resources`}\n          name=\"resource\"\n          onChange={(response) => {\n            if (response.file.status === 'done') {\n              if (response.file.response?.success) {\n                onUploaded(response.file.response);\n              }\n            }\n          }}\n        />\n      }\n      renderItem={(item) => (\n        <List.Item\n          actions={[\n            <Button\n              key=\"delete\"\n              type=\"default\"\n              danger\n              icon={<DeleteOutlined />}\n              size=\"small\"\n              onClick={() => onRemove(item.id)}\n            />,\n          ]}\n        >\n          <List.Item.Meta\n            avatar={\n              <a href={item.url} target=\"_blank\" rel=\"noreferrer\">\n                <Button type=\"default\" icon={<DownloadOutlined />} size=\"small\" />\n              </a>\n            }\n            description={\n              <React.Fragment>\n                <Button type=\"text\" size=\"small\">\n                  {item.name}\n                </Button>\n              </React.Fragment>\n            }\n          />\n        </List.Item>\n      )}\n    />\n  );\n};\n\nexport default Resources;\n\n/*\n\nimport React, { useCallback, useEffect, useState, useContext, useRef } from 'react';\nimport { Context } from '@/context/curriculum';\nimport { getFormData } from '@/services/api';\nimport Divider from 'antd/lib/divider';\nimport List from 'antd/lib/list';\nimport Skeleton from 'antd/lib/skeleton';\nimport Button from 'antd/lib/button';\nimport Popconfirm from 'antd/lib/popconfirm';\nimport Upload from 'antd/lib/upload';\nimport Tag from 'antd/lib/tag';\nimport { APIpath } from '@/services/api';\nimport { UploadOutlined } from '@ant-design/icons';\n\nexport const ResourceUploadForm = ({ topic_id, onUpload }) => {\n  const { token, id, updateLesson } = useContext(Context);\n\n  const onChange = useCallback((info) => {\n    if (info.file.status === 'done') {\n      onUpload && onUpload(info);\n      //message.success(`${info.file.name} file uploaded successfully`);\n    } else if (info.file.status === 'error') {\n      //message.error(`${info.file.name} file upload failed.`);\n    }\n  });\n\n  return (\n    <Upload\n      onChange={onChange}\n      name=\"topicres\"\n      action={`${APIpath('topic/resource/save')}/${id}`}\n      headers={{\n        Accept: 'application/json',\n        Authorization: `Bearer ${token}`,\n      }}\n    >\n      <Button icon={<UploadOutlined />}>Click to upload new resource</Button>\n    </Upload>\n  );\n};\n\nexport const ResourceIcon = ({ resource }) => {\n  return <Tag>{resource.file_type}</Tag>;\n  switch (resource.file_type) {\n    case 'pdf':\n      return <i size=\"2em\">{resource.file_type}</i>;\n    default:\n      return <i size=\"2em\">{resource.file_type}</i>;\n  }\n};\n\nexport const Resources = ({ resources, quizId }) => {\n  const [state, setState] = useState(resources);\n  const [loading, setLoading] = useState(false);\n\n  const fileRef = useRef();\n\n  const { addResource, removeResource } = useContext(Context);\n\n  const uploadFile = useCallback(() => {\n    const formData = getFormData({});\n    formData.append('topicres', fileRef.current.files[0]);\n    setLoading(true);\n    addResource(quizId, formData).then(() => setLoading(false));\n  }, [fileRef]);\n\n  const onUpload = useCallback((info) => console.log(info), []);\n\n  const onDelete = useCallback((resource_id) => {\n    setLoading(true);\n    removeResource(resource_id).then(() => setLoading(false));\n  }, []);\n\n  useEffect(() => {\n    setState(resources);\n  }, [resources]);\n\n  return (\n    <React.Fragment>\n      <List\n        loading={loading}\n        header={<div>Resources</div>}\n        bordered\n        dataSource={state}\n        renderItem={(item) => (\n          <List.Item\n            actions={[\n              <Popconfirm\n                title=\"Are you sure to delete this resource?\"\n                onConfirm={() => onDelete(item.id)}\n                okText=\"Yes\"\n                cancelText=\"No\"\n              >\n                <Button danger size=\"small\">\n                  delete\n                </Button>\n              </Popconfirm>,\n            ]}\n          >\n            <Skeleton avatar title={false} loading={item.loading} active>\n              <List.Item.Meta\n                avatar={<ResourceIcon resource={item} />}\n                title={\n                  <a href={item.url} target=\"_blank\">\n                    {item.file_name}\n                  </a>\n                }\n              />\n            </Skeleton>\n          </List.Item>\n        )}\n      />\n      <Divider />\n\n      <ResourceUploadForm id={quizId} onUpload={onUpload} />\n    </React.Fragment>\n  );\n};\n\nexport default Resources;\n */\n","import ScormPreview from '@/components/Scorm/preview';\nimport { scorms as fetchScorms } from '@/services/escola-lms/scorm';\nimport { Button, Modal, Select, Space, Spin } from 'antd';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { FormattedMessage } from 'umi';\n\nexport const ScormSelect: React.FC<{\n  state?: {\n    type: number;\n  };\n  value?: number;\n  onChange?: (value: string) => void;\n}> = ({ value, onChange }) => {\n  const [scorms, setScorms] = useState<API.SCORM[]>([]);\n  const [fetching, setFetching] = useState(false);\n  const [currSco, setCurrSco] = useState<API.SCORM_SCO | undefined>();\n  const [previewUuid, setPreviewUuid] = useState<string>();\n  const abortController = useRef<AbortController>();\n\n  const fetch = useCallback((search?: string) => {\n    setFetching(true);\n    if (abortController.current) {\n      abortController.current.abort();\n    }\n\n    abortController.current = new AbortController();\n    fetchScorms({ search, pageSize: 0 }, { signal: abortController.current.signal })\n      .then((response) => {\n        if (response.success) {\n          return Array.isArray(response.data.data) && setScorms(response.data.data);\n        }\n        setFetching(false);\n      })\n      .catch(() => setFetching(false));\n  }, []);\n\n  const onSearch = useCallback(\n    (search: string) => {\n      fetch(search);\n    },\n    [fetch],\n  );\n\n  useEffect(() => {\n    fetch();\n  }, [value]);\n\n  useEffect(() => {\n    setCurrSco(scorms.map((scorm) => scorm.scos.filter((sco) => sco.id === value)).flat()[0]);\n  }, [scorms]);\n\n  return (\n    <React.Fragment>\n      {previewUuid && (\n        <Modal\n          width={'80vw'}\n          bodyStyle={{ height: '70vh' }}\n          visible={true}\n          onOk={() => setPreviewUuid(undefined)}\n          onCancel={() => setPreviewUuid(undefined)}\n        >\n          <ScormPreview uuid={previewUuid} />\n        </Modal>\n      )}\n\n      <Space>\n        <Select\n          allowClear\n          style={{ width: '100%', minWidth: '300px' }}\n          value={currSco ? `${currSco?.id}: ${currSco?.title}` : undefined}\n          onChange={(changeValue: string) =>\n            onChange && onChange(changeValue ? changeValue.split(':')[0] : changeValue)\n          }\n          showSearch\n          onSearch={onSearch}\n          placeholder={<FormattedMessage id=\"select_scorm_package\" />}\n          optionFilterProp=\"children\"\n          filterOption={(input, option) => {\n            if (option && option.children) {\n              return option?.children?.toString().toLowerCase().indexOf(input.toLowerCase()) >= 0;\n            }\n            return true;\n          }}\n          notFoundContent={fetching ? <Spin size=\"small\" /> : null}\n        >\n          {scorms.map((scorm) => (\n            <Select.OptGroup key={scorm.id} label={`${scorm.id}: ${scorm.version}`}>\n              <React.Fragment>\n                {scorm.scos.map((sco) => (\n                  <Select.Option key={sco.id} value={`${sco.id}: ${sco.title}`}>\n                    {sco.title}\n                  </Select.Option>\n                ))}\n              </React.Fragment>\n            </Select.OptGroup>\n          ))}\n        </Select>\n        {currSco && (\n          <Button\n            key={value}\n            onClick={() => {\n              setPreviewUuid(currSco?.uuid);\n            }}\n          >\n            <FormattedMessage id=\"preview\" />\n          </Button>\n        )}\n      </Space>\n    </React.Fragment>\n  );\n};\n\nexport default ScormSelect;\n","import { Button, Space } from 'antd';\nimport React from 'react';\nimport { FormattedMessage } from 'umi';\nimport SelectScorm from './select';\n\nexport const ScormSelector: React.FC<{\n  value?: number | undefined;\n  onChange?: (value: number | undefined) => void;\n}> = ({ value, onChange }) => {\n  // const intl = useIntl();\n  return (\n    <Space size=\"large\" align=\"start\">\n      <SelectScorm value={value} onChange={(id) => onChange && onChange(Number(id))} />\n      {/*\n      // TODO #1021 this isn't working \n      <UploadScorm\n        onSuccess={(scorm) => onChange && onChange(scorm.id)}\n        onError={() =>\n          message.error(\n            intl.formatMessage({\n              id: 'error',\n            }),\n          )\n        }\n      />\n      */}\n      <Button onClick={() => onChange && onChange(undefined)}>\n        <FormattedMessage id=\"clear_selection\" />\n      </Button>\n    </Space>\n  );\n};\n\nexport default ScormSelector;\n","import { Table } from '@/components/GiftQuizQuestions/table';\nimport ProForm, { ProFormDigit, ProFormGroup } from '@ant-design/pro-form';\nimport { Divider } from 'antd';\nimport Typography from 'antd/lib/typography/Typography';\nimport React, { Fragment } from 'react';\nimport { FormattedMessage, useIntl } from 'umi';\n\nexport const GiftQuiz: React.FC<{\n  topicable: API.TopicQuiz['topicable'];\n  onChange: (key: 'max_attempts' | 'max_execution_time', value: number | null) => void;\n  onAdded?: () => void;\n  onRemoved?: () => void;\n  onEdited?: () => void;\n}> = ({ topicable, onAdded, onRemoved, onEdited, onChange }) => {\n  const intl = useIntl();\n\n  return (\n    <Fragment>\n      <ProForm\n        initialValues={{\n          max_attempts: topicable ? topicable.max_attempts : undefined,\n          max_execution_time: topicable ? topicable.max_execution_time : undefined,\n          min_pass_score: topicable ? topicable.min_pass_score : undefined,\n        }}\n        onValuesChange={(values) => {\n          const key = Object.keys(values)[0] as 'max_attempts' | 'max_execution_time';\n          if (key) {\n            onChange(key, values[key]);\n          }\n        }}\n        submitter={false}\n      >\n        <ProFormGroup>\n          <ProFormDigit\n            name=\"max_attempts\"\n            label={<FormattedMessage id=\"max_attempts\" />}\n            tooltip={<FormattedMessage id=\"max_attempts\" />}\n            placeholder={intl.formatMessage({\n              id: 'max_attempts',\n              defaultMessage: 'max_attempts',\n            })}\n          />\n          <ProFormDigit\n            name=\"max_execution_time\"\n            label={<FormattedMessage id=\"max_execution_time\" />}\n            tooltip={<FormattedMessage id=\"max_execution_time_tooltip\" />}\n            placeholder={intl.formatMessage({\n              id: 'max_execution_time',\n              defaultMessage: 'max_execution_time',\n            })}\n          />\n          <ProFormDigit\n            name=\"min_pass_score\"\n            max={100}\n            label={<FormattedMessage id=\"min_pass_score\" />}\n            tooltip={<FormattedMessage id=\"min_pass_score_tooltip\" />}\n            placeholder={intl.formatMessage({\n              id: 'min_pass_score',\n              defaultMessage: 'min_pass_score',\n            })}\n          />\n        </ProFormGroup>\n      </ProForm>\n\n      <Divider />\n\n      {topicable ? (\n        <Table\n          questions={topicable.questions}\n          quizId={topicable.id}\n          onAdded={onAdded}\n          onEdited={onEdited}\n          onRemoved={onRemoved}\n        />\n      ) : (\n        <Typography>\n          <FormattedMessage\n            id=\"pressSaveToCreateQuestions\"\n            defaultMessage=\"Create this Topic before adding questions\"\n          />\n        </Typography>\n      )}\n    </Fragment>\n  );\n};\n\nexport default GiftQuiz;\n","import UserSelect from '@/components/UserSelect';\nimport ProForm from '@ant-design/pro-form';\nimport React, { useCallback } from 'react';\nimport { FormattedMessage } from 'umi';\n\ntype SelectValue = string | number | string[] | number[];\n\ninterface FormValues {\n  notify_users: SelectValue;\n}\n\ninterface Props {\n  onChange: (value: SelectValue) => void;\n  topicable: API.TopicProject['topicable'];\n}\n\nexport const Project: React.FC<Props> = ({ onChange, topicable }) => {\n  const onValuesChange = useCallback((values: FormValues) => {\n    const key = Object.keys(values)[0];\n    if (key) {\n      onChange(values[key as keyof typeof values]);\n    }\n  }, []);\n\n  return (\n    <React.Fragment>\n      <ProForm\n        initialValues={{ notify_users: topicable?.notify_users ?? [] }}\n        onValuesChange={onValuesChange}\n        submitter={false}\n      >\n        <ProForm.Item\n          name=\"notify_users\"\n          label={<FormattedMessage id=\"notify_users\" defaultMessage=\"Users to notify\" />}\n          tooltip={\n            <FormattedMessage\n              id=\"notify_users_tooltip\"\n              defaultMessage=\"Indicate which users should be notified about project upload\"\n            />\n          }\n        >\n          <UserSelect multiple />\n        </ProForm.Item>\n      </ProForm>\n    </React.Fragment>\n  );\n};\n\nexport default Project;\n","import { Context } from '@/components/ProgramForm/Context';\nimport { getFormData } from '@/services/api';\nimport { getTopic } from '@/services/escola-lms/course';\nimport { TopicType } from '@/services/escola-lms/enums';\nimport { Affix, Alert, Col, Row, Space } from 'antd';\nimport Button from 'antd/lib/button';\nimport Divider from 'antd/lib/divider';\nimport React, { useCallback, useContext, useEffect, useState } from 'react';\nimport { FormattedMessage } from 'umi';\nimport TopicForm from './form';\nimport { getTypeName } from './media';\nimport H5PForm from './media/h5p';\nimport Oembed from './media/oembed';\nimport RichTextEditor from './media/text';\nimport MediaUpload from './media/upload';\nimport Resources from './resources';\n\nimport ScormSelector from '@/components/Scorm';\nimport {\n  AudioOutlined,\n  CarryOutOutlined,\n  ExclamationCircleOutlined,\n  FileImageOutlined,\n  FilePdfOutlined,\n  FileTextOutlined,\n  FundOutlined,\n  InteractionOutlined,\n  PercentageOutlined,\n  VideoCameraAddOutlined,\n  YoutubeOutlined,\n} from '@ant-design/icons';\nimport GiftQuiz from './media/giftquiz';\nimport Project from './media/project';\n\nexport const getTypeIcon = (type: string | undefined) => {\n  if (type) {\n    switch (type) {\n      case 'ScormSco':\n        return <FundOutlined />;\n      case 'PDF':\n        return <FilePdfOutlined />;\n      case 'Audio':\n        return <AudioOutlined />;\n      case 'Image':\n        return <FileImageOutlined />;\n      case 'OEmbed':\n        return <YoutubeOutlined />;\n      case 'H5P':\n        return <InteractionOutlined />;\n      case 'Video':\n        return <VideoCameraAddOutlined />;\n      case 'RichText':\n        return <FileTextOutlined />;\n      case 'Project':\n        return <CarryOutOutlined />;\n      case 'GiftQuiz':\n        return <PercentageOutlined />;\n    }\n  }\n  return <ExclamationCircleOutlined />;\n};\n\nconst topicCanHaveEmptyValue = (type: TopicType) => {\n  return [TopicType.GiftQuiz, TopicType.Project, TopicType.GiftQuiz].includes(type);\n};\n\nexport const Topic: React.FC = () => {\n  const {\n    state,\n    currentEditMode,\n    updateTopic,\n    deleteTopic,\n    onTopicUploaded,\n    cloneTopic,\n    getLessons,\n  } = useContext(Context);\n\n  const topic =\n    currentEditMode && currentEditMode.mode === 'topic' && currentEditMode.value\n      ? currentEditMode.value\n      : {};\n  const [saveIsDisabled, setSaveIsDisabled] = useState(false);\n  const [topics, setTopics] = useState<API.Topic>({\n    ...topic,\n    value: topic?.topicable?.value,\n    can_skip: topic.isNew ? true : topic.can_skip,\n  });\n\n  const type = topics.topicable_type;\n\n  const [sortOrder /* , setSortOrder */] = useState(topics.order);\n  const [loading, setLoading] = useState(false);\n  const [currentTopic, setCurrentTopic] = useState<API.Topic>(topic);\n\n  useEffect(() => {\n    setCurrentTopic(topic);\n  }, [topic]);\n\n  useEffect(() => {\n    setTopics((prevState) => {\n      return {\n        ...prevState,\n        ...topic,\n        value: type === topic?.topicable_type ? topic?.topicable?.value : '',\n      };\n    });\n    if (topic?.isNew) {\n      setSaveIsDisabled(!topicCanHaveEmptyValue(topic.topicable_type));\n    }\n  }, [type, topic]);\n\n  // Encoding progressbar state refresh\n  useEffect(() => {\n    if (\n      currentTopic?.topicable_type !== TopicType.Video ||\n      !currentTopic.json?.ffmpeg.state ||\n      currentTopic.json?.ffmpeg.state === 'finished'\n    )\n      return;\n\n    const fetchData = async () => {\n      if (topic.id) {\n        const response = await getTopic(topic.id);\n        if (response.success) {\n          setCurrentTopic(response.data);\n        }\n      }\n    };\n\n    const interval = window.setInterval(fetchData, 5000);\n\n    return () => {\n      window.clearInterval(interval);\n    };\n  }, [currentTopic?.topicable_type, currentTopic.json?.ffmpeg?.state]);\n\n  const updateValue = useCallback(\n    (key: keyof API.Topic, value: any) => {\n      setTopics((prevState) => ({\n        ...prevState,\n        [key]: value,\n      }));\n      setSaveIsDisabled(false);\n    },\n    [topic],\n  );\n\n  const updateValues = useCallback(\n    (values: API.Topic) => {\n      setTopics((prevState) => ({\n        ...prevState,\n        ...values,\n      }));\n    },\n    [topic],\n  );\n\n  const handleSave = useCallback(\n    (formData: FormData) => {\n      if (updateTopic && topics.id) {\n        setLoading(true);\n\n        updateTopic(topics.id, formData)\n          .then(() => setLoading(false))\n          .catch(() => {\n            setLoading(false);\n          });\n      }\n    },\n    [topics, updateTopic, topic],\n  );\n\n  const onFormSubmit = useCallback(() => {\n    const values = {\n      ...topics,\n      active: topics.active ? 1 : 0,\n      preview: topics.preview ? 1 : 0,\n      can_skip: topics.can_skip ? 1 : 0,\n      order: sortOrder,\n      json: topics.json ? JSON.stringify(topics.json) : null,\n    };\n\n    if (topicCanHaveEmptyValue(topic.topicable_type) && !values.value) {\n      values.value = 'theProject';\n    }\n\n    const formData = getFormData(values);\n\n    handleSave(formData);\n  }, [topics, handleSave, sortOrder]);\n\n  const onDelete = useCallback(() => {\n    if (topic?.isNew) {\n      return deleteTopic && topics.id && deleteTopic(topics.id);\n    }\n    setLoading(true);\n    return deleteTopic && topics.id && deleteTopic(topics.id);\n  }, [topics, deleteTopic, topic]);\n\n  const onClone = useCallback(() => {\n    return topic.id && cloneTopic && cloneTopic(topic.id);\n  }, [topic, cloneTopic]);\n\n  return (\n    <React.Fragment>\n      <Row\n        gutter={16}\n        style={{\n          height: '100%',\n        }}\n      >\n        <Col\n          span={24 - 8}\n          style={{\n            marginBottom: '46px',\n          }}\n        >\n          <Divider>\n            {topic && getTypeIcon(getTypeName(topic))}{' '}\n            {topic?.topicable_type && topic?.topicable_type.split('\\\\').pop()}{' '}\n            <FormattedMessage id=\"type\" />\n          </Divider>\n          {!type && <Alert message={<FormattedMessage id=\"select_type_topic\" />} type=\"info\" />}\n          {type && type === TopicType?.RichText && (\n            <RichTextEditor\n              directory={`course/${state?.id}/lesson/${topic?.lesson_id}/topic/${topic?.id}/wysiwyg`}\n              text={\n                topic?.topicable_type === TopicType?.RichText ? topic?.topicable?.value || '' : ''\n              }\n              onChange={(value) => updateValue('value', value)}\n            />\n          )}\n          {topic &&\n            type &&\n            (type === TopicType.Video ||\n              type === TopicType.Audio ||\n              type === TopicType.Image ||\n              type === TopicType.PDF) && (\n              <MediaUpload\n                folder={`course/${state?.id}`}\n                type={type}\n                topic={currentTopic}\n                currentState={topics}\n                onChange={(info) => {\n                  setLoading(true);\n                  if (info.file.status === 'removed') {\n                    setLoading(false);\n                  }\n                }}\n                onUpdate={(info) => {\n                  if (topic.id && onTopicUploaded) onTopicUploaded(topic.id, info);\n\n                  // refetch lessons to get if video is being transcoded\n                  if (topic.topicable_type === TopicType.Video) {\n                    setTimeout(() => {\n                      if (getLessons) {\n                        getLessons();\n                      }\n                    }, 5000);\n                  }\n\n                  setTopics({\n                    ...topics,\n                    id: info?.file?.response?.data?.id,\n                    order: info.file.response.data?.order,\n                    value: info?.file?.response.data?.topicable?.value,\n                    topicable: info?.file?.response.data?.topicable,\n                  });\n                  setSaveIsDisabled(false);\n                  setLoading(false);\n                }}\n                disabled={false}\n                maxFiles={1}\n                clearListAfterUpload={true}\n              />\n            )}\n          {type && type === TopicType.OEmbed && (\n            <Oembed text={topics.value} onChange={(value) => updateValue('value', value)} />\n          )}\n          {type && type === TopicType.Project && (\n            <Project\n              onChange={(value) => updateValue('notify_users' as keyof API.Topic, value)}\n              topicable={topic.topicable as API.TopicProject['topicable']}\n            />\n          )}\n          {type && type === TopicType.GiftQuiz && (\n            <GiftQuiz\n              onChange={(key, value) => {\n                updateValue(key as keyof API.Topic, value);\n              }}\n              topicable={topics.topicable as API.TopicQuiz['topicable']}\n              onAdded={getLessons}\n              onRemoved={getLessons}\n              onEdited={getLessons}\n            />\n          )}\n          {type && type === TopicType.H5P && (\n            <H5PForm id={topics.value} onChange={(value) => updateValue('value', value)} />\n          )}\n          {type && type === TopicType.SCORM && (\n            <ScormSelector\n              value={Number(topics.value)}\n              onChange={(value) => updateValue('value', value)}\n            />\n          )}\n\n          <Row justify=\"center\" className={'program__cta-footer'}>\n            <Affix offsetBottom={4}>\n              <Space size=\"large\">\n                <Button loading={loading}>\n                  <FormattedMessage id=\"cancel\" />\n                </Button>\n                {!topic.isNew && (\n                  <Button onClick={onClone} loading={loading}>\n                    <FormattedMessage id=\"clone\" />\n                  </Button>\n                )}\n                <Button\n                  type=\"primary\"\n                  onClick={onFormSubmit}\n                  disabled={saveIsDisabled}\n                  loading={loading}\n                >\n                  <FormattedMessage id=\"save\" />\n                </Button>\n                <Button danger onClick={onDelete} loading={loading}>\n                  <FormattedMessage id=\"delete\" />\n                </Button>\n              </Space>\n            </Affix>\n          </Row>\n        </Col>\n        <Col span={8}>\n          <aside className={'program-sidebar program-sidebar--right'}>\n            {state?.lessons && (\n              <TopicForm\n                courseId={Number(state?.id)}\n                courseLessons={state?.lessons}\n                initialValues={topics}\n                onValuesChange={(values) => updateValues(values)}\n              />\n            )}\n            {!topics.isNew && (\n              <React.Fragment>\n                <Divider>\n                  <FormattedMessage id=\"file_resources\" />\n                </Divider>\n                <Resources topicId={Number(topic?.id)} folder={`course/${state?.id}`} />\n              </React.Fragment>\n            )}\n          </aside>\n        </Col>\n      </Row>\n    </React.Fragment>\n  );\n};\n\nexport default Topic;\n","import { ExportOutlined, FolderOutlined } from '@ant-design/icons';\nimport type { TreeDraggableProvided } from '@atlaskit/tree/dist/types/components/TreeItem/TreeItem-types';\nimport { Button, Input, Tooltip } from 'antd';\nimport React, { useState } from 'react';\nimport { FormattedMessage } from 'umi';\n\nexport const NewLessonListItem = React.forwardRef<\n  HTMLDivElement,\n  {\n    initialValue: API.Lesson;\n    onCreate: (title: string) => void;\n  } & TreeDraggableProvided['draggableProps'] &\n    TreeDraggableProvided['dragHandleProps']\n>(({ initialValue, onCreate, ...draggableProps }, ref) => {\n  const [value, setValue] = useState('');\n\n  return (\n    <div\n      className=\"program-sidebar__list-item program-sidebar__list-item--lesson-new\"\n      ref={ref}\n      {...draggableProps}\n    >\n      <FolderOutlined />\n      <Input\n        value={value}\n        onChange={(e) => setValue(e.target.value)}\n        placeholder={initialValue.title}\n      />\n      <div>\n        <Tooltip placement=\"right\" title={<FormattedMessage id=\"create\" />}>\n          <Button\n            disabled={!value}\n            size=\"small\"\n            className=\"btn-create-lesson\"\n            type=\"primary\"\n            icon={<ExportOutlined />}\n            onClick={() => onCreate(value)}\n          />\n        </Tooltip>\n      </div>\n    </div>\n  );\n});\n","export const RecommenderSvg = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"23.01\" height=\"18.077\" viewBox=\"0 0 23.01 18.077\">\n    <g id=\"Group_5\" data-name=\"Group 5\" transform=\"translate(-97.496 -306.965)\">\n      <path\n        id=\"Path_2\"\n        data-name=\"Path 2\"\n        d=\"M138.934,401.557s8.685.579,12.972-6.836-11.893-6.747-7.254-1.854,16.02-8.07,16.02-8.07\"\n        transform=\"translate(-40.906 -77.037)\"\n        fill=\"none\"\n        stroke=\"#58c35d\"\n        strokeLinecap=\"round\"\n        strokeWidth=\"1\"\n      />\n      <path\n        id=\"Path_3\"\n        data-name=\"Path 3\"\n        d=\"M115.761,306.465h5.332V311.8\"\n        transform=\"translate(-1.087 1)\"\n        fill=\"none\"\n        stroke=\"#58c35d\"\n        strokeLinecap=\"round\"\n        strokeWidth=\"1\"\n      />\n    </g>\n  </svg>\n);\n","import Icon from '@ant-design/icons';\nimport type { CustomIconComponentProps } from '@ant-design/icons/lib/components/Icon';\nimport { RecommenderSvg } from './recommender';\n\nexport const RecommenderIcon = (props: Partial<CustomIconComponentProps>) => (\n  <Icon component={RecommenderSvg} {...props} />\n);\n","import type { AxiosRequestConfig } from '@umijs/max';\nimport { request } from 'umi';\n\n/**  GET /api/admin/recommender/course/:courseId */\nexport async function getCourseRecommender(courseId?: number, options?: AxiosRequestConfig) {\n  return request<API.DefaultResponse<API.Recommender>>(\n    `/api/admin/recommender/course/${courseId} `,\n    {\n      method: 'GET',\n      /* useCache: true */ useCache: false,\n      ...(options || {}),\n    },\n  );\n}\n\n/**  GET /api/admin/recommender/lesson/:lessonId/topic */\nexport async function getExerciseRecommender(lessonId: number, options?: AxiosRequestConfig) {\n  return request<API.DefaultResponse<API.RecommenderExercise>>(\n    `/api/admin/recommender/lesson/${lessonId}/topic `,\n    {\n      method: 'GET',\n      /* useCache: true */ useCache: false,\n      ...(options || {}),\n    },\n  );\n}\n","import { getCourseRecommender, getExerciseRecommender } from '@/services/escola-lms/recommender';\nimport { useEffect, useState } from 'react';\n\nexport type RecommenderSimpleTopicType = 'OEmbed' | 'PDF' | 'Video' | 'RichText' | 'Image' | 'H5P';\n\nexport const useCourseRecommender = (courseId: number) => {\n  const [course, setCourse] = useState<API.Recommender>();\n\n  useEffect(() => {\n    getCourseRecommender(courseId).then((res) => res.success && setCourse(res.data));\n  }, [courseId]);\n\n  return course;\n};\n\nexport const useExerciseRecommender = (lessonId: number) => {\n  const [exercise, setExercise] = useState<API.RecommenderExercise>();\n\n  useEffect(() => {\n    getExerciseRecommender(lessonId).then((res) => res.success && setExercise(res.data));\n  }, [lessonId]);\n\n  return exercise;\n};\n\nexport const getTopicType = (topic: API.RecommenderTopicType): RecommenderSimpleTopicType =>\n  topic.includes('H5P') ? 'H5P' : topic;\n\nexport const createText = (topic: API.RecommenderTopicType) =>\n  topic?.includes('.') && topic?.split('.').join(' ');\n\nexport const formatRecommenderProbability = (probability: number): number =>\n  Math.min(Math.ceil(Math.abs(probability) * 100), 100);\n","import { Button } from 'antd';\nimport Paragraph from 'antd/lib/typography/Paragraph';\nimport { FormattedMessage } from 'umi';\nimport { createText, formatRecommenderProbability } from './utils';\n\ninterface ExerciseRecommenderProps {\n  recommendedData: API.RecommenderExercise;\n  createTopic: () => void;\n}\n\nexport const ExerciseRecommender: React.FC<ExerciseRecommenderProps> = ({\n  recommendedData,\n  createTopic,\n}) => (\n  <>\n    <Paragraph className=\"recommender__paragraph\">\n      <FormattedMessage id=\"recommender.add_exercise\" />\n      <span className=\"recommender__paragraph--span\">{`${createText(\n        recommendedData?.topic_type,\n      )},`}</span>\n      <br />\n      <FormattedMessage id=\"recommender.increase\" />\n      <span className=\"recommender__paragraph--span\">\n        {`${formatRecommenderProbability(recommendedData.probability)}%.`}\n      </span>\n    </Paragraph>\n    <Button className=\"recommender__button\" type=\"default\" onClick={createTopic}>\n      <FormattedMessage id=\"recommender.add_button\" />\n    </Button>\n  </>\n);\n","import Paragraph from 'antd/lib/typography/Paragraph';\nimport { FormattedMessage } from 'umi';\n\nexport const InfoRecommender: React.FC = () => (\n  <Paragraph className=\"recommender__paragraph\">\n    <FormattedMessage id=\"recommender.save_exercise\" />\n  </Paragraph>\n);\n","import { FormattedMessage } from 'umi';\n\nexport const RecommenderPopoverContent: React.FC = () => (\n  <div className=\"recommender__popover-wrapper\">\n    <h3 className=\"recommender__popover-title\">\n      <FormattedMessage id=\"recommender_info.title\" />\n    </h3>\n    <strong className=\"recommender__popover-text\">\n      <FormattedMessage id=\"recommender_info.first_title\" />\n    </strong>\n    <p className=\"recommender__popover-text\">\n      <FormattedMessage id=\"recommender_info.first_text\" />\n    </p>\n    <strong className=\"recommender__popover-text\">\n      <FormattedMessage id=\"recommender_info.second_title\" />\n    </strong>\n    <p className=\"recommender__popover-text\">\n      <FormattedMessage id=\"recommender_info.second_text\" />\n    </p>\n  </div>\n);\n","import { InfoCircleOutlined } from '@ant-design/icons';\nimport { Popover } from 'antd';\nimport { RecommenderPopoverContent } from './RecommenderPopoverContent';\n\nexport const RecommenderPopoverInfo: React.FC = () => (\n  <Popover\n    placement=\"bottomLeft\"\n    content={<RecommenderPopoverContent />}\n    trigger=\"click\"\n    showArrow={false}\n    className=\"recommender__popover\"\n  >\n    <InfoCircleOutlined style={{ color: '#2DAC34' }} />\n  </Popover>\n);\n","import { RecommenderIcon } from '@/icons';\nimport { RecommenderType, TopicType } from '@/services/escola-lms/enums';\nimport { Spin } from 'antd';\nimport React, { useCallback, useContext } from 'react';\nimport { FormattedMessage, history } from 'umi';\nimport { Context } from '../../../Context';\nimport { ExerciseRecommender } from './ExerciseRecommender';\nimport { InfoRecommender } from './InfoRecommender';\nimport { RecommenderPopoverInfo } from './RecommenderPopoverInfo';\nimport { getTopicType, useExerciseRecommender } from './utils';\n\nexport const Recommender: React.FC<{\n  courseId: number;\n  lessonId: number;\n  recommenderType?: RecommenderType;\n}> = ({ courseId, lessonId, recommenderType = RecommenderType.Exercise }) => {\n  const { addNewTopic } = useContext(Context);\n  const exercise = useExerciseRecommender(lessonId);\n\n  const onTopicCreate = useCallback(\n    (lesson_id: number, topic_type: TopicType) => {\n      if (addNewTopic) {\n        const newTopic = addNewTopic(lesson_id, topic_type);\n        history.push(`/courses/list/${courseId}/program/?topic=${newTopic.id}`);\n      }\n    },\n    [addNewTopic],\n  );\n\n  const getRecommender = (type: RecommenderType) => {\n    switch (type) {\n      case RecommenderType.Info:\n        return <InfoRecommender />;\n      case RecommenderType.Exercise:\n        return (\n          exercise && (\n            <ExerciseRecommender\n              createTopic={() =>\n                onTopicCreate(lessonId, TopicType[getTopicType(exercise?.topic_type)])\n              }\n              recommendedData={exercise}\n            />\n          )\n        );\n      default:\n        return <FormattedMessage id=\"recommender.no_recommendation\" />;\n    }\n  };\n\n  const isLoading = recommenderType === RecommenderType.Exercise && !exercise;\n\n  return (\n    <div className=\"recommender\">\n      <RecommenderIcon style={{ marginTop: '4px' }} />\n      <div>\n        <h3 className=\"recommender__title\">\n          <FormattedMessage id=\"recommender.title\" />\n        </h3>\n        {isLoading && <Spin />}\n        {getRecommender(recommenderType)}\n      </div>\n      <RecommenderPopoverInfo />\n    </div>\n  );\n};\n","import { RecommenderIcon } from '@/icons';\nimport Paragraph from 'antd/lib/typography/Paragraph';\nimport { FormattedMessage } from 'umi';\nimport { RecommenderPopoverInfo } from './RecommenderPopoverInfo';\nimport { formatRecommenderProbability, useCourseRecommender } from './utils';\n\ninterface CourseRecommenderProps {\n  courseId: number;\n}\n\nexport const CourseRecommender: React.FC<CourseRecommenderProps> = ({ courseId }) => {\n  const recommendedData = useCourseRecommender(courseId);\n  if (recommendedData && recommendedData.probability && recommendedData.probability > -0.016) {\n    return null;\n  }\n  return recommendedData ? (\n    <div className=\"recommender\">\n      <RecommenderIcon style={{ marginTop: '4px' }} />\n      <div>\n        <h3 className=\"recommender__title\">\n          <FormattedMessage id=\"recommender.title\" />\n        </h3>\n\n        <Paragraph className=\"recommender__paragraph\">\n          <FormattedMessage id=\"recommender.finish\" />\n          <strong>{`${formatRecommenderProbability(recommendedData.probability)}%. `}</strong>\n          <br />\n          <FormattedMessage id=\"recommender.too_long\" />\n        </Paragraph>\n      </div>\n      <RecommenderPopoverInfo />\n    </div>\n  ) : (\n    <></>\n  );\n};\n","import PACKAGES from '@/consts/packages';\nimport {\n  AudioOutlined,\n  CarryOutOutlined,\n  FileImageOutlined,\n  FilePdfOutlined,\n  FileTextOutlined,\n  FundOutlined,\n  InteractionOutlined,\n  MinusOutlined,\n  PercentageOutlined,\n  PlusOutlined,\n  VideoCameraAddOutlined,\n  YoutubeOutlined,\n} from '@ant-design/icons';\nimport { Button, Tooltip } from 'antd';\nimport { useCallback, useState } from 'react';\n\nimport { topicTypeToSettingName } from '@/pages/Settings/global';\nimport { TopicType } from '@/services/escola-lms/enums';\nimport { createHavePackageInstalled } from '@/utils/access';\nimport { FormattedMessage, useModel } from 'umi';\nimport '../types.css';\n\nconst topicTypes = [\n  {\n    type: TopicType.RichText,\n    icon: <FileTextOutlined />,\n    title: <FormattedMessage id=\"RichText\" />,\n  },\n  {\n    type: TopicType.OEmbed,\n    icon: <YoutubeOutlined />,\n    title: <FormattedMessage id=\"OEmbed\" />,\n  },\n  {\n    type: TopicType.Audio,\n    icon: <AudioOutlined />,\n    title: <FormattedMessage id=\"Audio\" />,\n  },\n  {\n    type: TopicType.Video,\n    icon: <VideoCameraAddOutlined />,\n    title: <FormattedMessage id=\"Video\" />,\n  },\n  {\n    type: TopicType.H5P,\n    icon: <InteractionOutlined />,\n    title: <FormattedMessage id=\"H5P\" />,\n  },\n  {\n    type: TopicType.Image,\n    icon: <FileImageOutlined />,\n    title: <FormattedMessage id=\"Image\" />,\n  },\n  {\n    type: TopicType.PDF,\n    icon: <FilePdfOutlined />,\n    title: <FormattedMessage id=\"PDF\" />,\n  },\n  {\n    type: TopicType.SCORM,\n    icon: <FundOutlined />,\n    title: <FormattedMessage id=\"SCORM\" />,\n  },\n  {\n    type: TopicType.Project,\n    icon: <CarryOutOutlined />,\n    title: <FormattedMessage id=\"Project\" />,\n  },\n  {\n    type: TopicType.GiftQuiz,\n    icon: <PercentageOutlined />,\n    title: <FormattedMessage id=\"Quiz\" />,\n  },\n];\n\nexport const RecommenderTopicSelector: React.FC<{\n  onSelected: (type: TopicType) => void;\n  positionsToHide?: (TopicType | 'lesson')[];\n}> = ({ onSelected, positionsToHide }) => {\n  const [open, setOpen] = useState(false);\n\n  const { initialState } = useModel('@@initialState');\n\n  const setSelected = useCallback((type: TopicType) => {\n    setOpen(false);\n    onSelected(type);\n  }, []);\n\n  const havePackageInstalled = useCallback(createHavePackageInstalled(initialState?.packages), [\n    initialState?.packages,\n  ]);\n\n  const topicTypeIsDisabled = useCallback(\n    (type: TopicType) => {\n      const key = Object.keys(TopicType)\n        // TODO: #1020 fix types\n        // @ts-ignore\n        .filter((x) => TopicType[x] == type)\n        .pop();\n\n      const value =\n        key &&\n        initialState?.config?.filter((item) => item.key === topicTypeToSettingName(key))[0]?.data;\n\n      if (!!value) {\n        return true;\n      }\n\n      switch (type) {\n        case TopicType.GiftQuiz:\n          return !havePackageInstalled(PACKAGES.TopicTypeGift);\n        case TopicType.SCORM:\n          return !havePackageInstalled(PACKAGES.Scorm);\n        case TopicType.Project:\n          return !havePackageInstalled(PACKAGES.TopicTypeProject);\n        default:\n          return !havePackageInstalled(PACKAGES.TopicTypes);\n      }\n    },\n    [initialState],\n  );\n\n  return (\n    <div\n      className={`topic-types-selector topic-types-selector__recommender-wrapper\n       ${open ? 'topic-types-selector--visible' : ''}`}\n    >\n      <Button\n        type=\"text\"\n        size=\"small\"\n        onClick={() => setOpen((prev) => !prev)}\n        className=\"topic-types-selector__recommender--add-btn\"\n        icon={open ? <MinusOutlined /> : <PlusOutlined />}\n      >\n        <FormattedMessage id=\"recommender.add_new_exercise\" />\n      </Button>\n\n      <div\n        className={`${'topic-types-selector__recommender'}\n          ${open ? 'topic-types-selector__recommender--active' : ''}`}\n      >\n        {topicTypes.map(\n          (topic) =>\n            !positionsToHide?.includes(topic.type) &&\n            !topicTypeIsDisabled(topic.type) && (\n              <Tooltip title={topic.title} key={topic.type}>\n                <Button block onClick={() => setSelected(topic.type)} icon={topic.icon} />\n              </Tooltip>\n            ),\n        )}\n      </div>\n    </div>\n  );\n};\n","import PACKAGES from '@/consts/packages';\nimport {\n  AudioOutlined,\n  CarryOutOutlined,\n  FileImageOutlined,\n  FilePdfOutlined,\n  FileTextOutlined,\n  FundOutlined,\n  InteractionOutlined,\n  //CaretUpOutlined,\n  //CaretDownOutlined,\n  PercentageOutlined,\n  PicCenterOutlined,\n  PlusOutlined,\n  VideoCameraAddOutlined,\n  YoutubeOutlined,\n} from '@ant-design/icons';\nimport { Button, Divider, Space, Tooltip } from 'antd';\nimport { useCallback, useState } from 'react';\n\nimport { TopicType } from '@/services/escola-lms/enums';\nimport { FormattedMessage, useIntl, useModel } from 'umi';\nimport './types.css';\n\nimport { topicTypeToSettingName } from '@/pages/Settings/global';\n\nexport const TopicTypesSelector: React.FC<{\n  onSelected: (type: TopicType) => void;\n  onNewLesson: () => void;\n  positionsToHide?: (TopicType | 'lesson')[];\n  depth?: number;\n}> = ({ onSelected, onNewLesson, positionsToHide, depth = 0 }) => {\n  const [open, setOpen] = useState<boolean>(false);\n\n  const { initialState } = useModel('@@initialState');\n  const intl = useIntl();\n\n  const setSelected = useCallback((type: TopicType) => {\n    setOpen(false);\n    onSelected(type);\n  }, []);\n\n  const topicTypeIsDisabled = useCallback(\n    (type: TopicType) => {\n      const key = Object.keys(TopicType)\n        .filter((x) => TopicType[x as keyof typeof TopicType] == type)\n        .pop();\n\n      const value =\n        key &&\n        initialState?.config?.filter((item) => item.key === topicTypeToSettingName(key))[0]?.data;\n\n      if (!!value) {\n        return true;\n      }\n\n      switch (type) {\n        case TopicType.GiftQuiz:\n          return !(initialState?.packages && initialState?.packages?.[PACKAGES.TopicTypeGift]);\n        case TopicType.SCORM:\n          return !(initialState?.packages && initialState?.packages?.[PACKAGES.Scorm]);\n        case TopicType.Project:\n          return !(initialState?.packages && initialState?.packages?.[PACKAGES.TopicTypeProject]);\n        default:\n          return !(initialState?.packages && initialState?.packages?.[PACKAGES.TopicTypes]);\n      }\n    },\n    [initialState],\n  );\n\n  return (\n    <div className={`topic-types-selector ${open ? 'topic-types-selector--visible' : ''}`}>\n      <Space>\n        <Tooltip placement=\"top\" title={<FormattedMessage id=\"add_new_topic\" />}>\n          <Button\n            type=\"primary\"\n            size=\"small\"\n            onClick={() => setOpen((prev) => !prev)}\n            icon={<PlusOutlined />}\n          />\n        </Tooltip>\n      </Space>\n\n      <div\n        className={`topic-types-selector__list ${\n          open ? 'topic-types-selector__list--visible' : ''\n        }`}\n      >\n        {!positionsToHide?.includes('lesson') && (\n          <>\n            <Tooltip\n              placement=\"right\"\n              title={\n                intl.messages[`Lesson_level-${depth}`] ? (\n                  <FormattedMessage id={`Lesson_level-${depth}`} />\n                ) : (\n                  <FormattedMessage id=\"Lesson\" defaultMessage=\"Lesson\" />\n                )\n              }\n            >\n              <Button\n                block\n                onClick={() => {\n                  setOpen(false);\n                  onNewLesson();\n                }}\n                icon={<PicCenterOutlined />}\n              />\n            </Tooltip>\n            <Divider />\n          </>\n        )}\n        {!positionsToHide?.includes(TopicType.RichText) &&\n          !topicTypeIsDisabled(TopicType.RichText) && (\n            <Tooltip placement=\"right\" title={<FormattedMessage id=\"RichText\" />}>\n              <Button\n                block\n                onClick={() => setSelected(TopicType.RichText)}\n                icon={<FileTextOutlined />}\n              />\n            </Tooltip>\n          )}\n        {!positionsToHide?.includes(TopicType.OEmbed) && !topicTypeIsDisabled(TopicType.OEmbed) && (\n          <Tooltip placement=\"right\" title={<FormattedMessage id=\"OEmbed\" />}>\n            <Button\n              block\n              onClick={() => setSelected(TopicType.OEmbed)}\n              icon={<YoutubeOutlined />}\n            />\n          </Tooltip>\n        )}\n        {!positionsToHide?.includes(TopicType.Audio) && !topicTypeIsDisabled(TopicType.Audio) && (\n          <Tooltip placement=\"right\" title={<FormattedMessage id=\"Audio\" />}>\n            <Button block onClick={() => setSelected(TopicType.Audio)} icon={<AudioOutlined />} />\n          </Tooltip>\n        )}\n        {!positionsToHide?.includes(TopicType.Video) && !topicTypeIsDisabled(TopicType.Video) && (\n          <Tooltip placement=\"right\" title={<FormattedMessage id=\"Video\" />}>\n            <Button\n              block\n              onClick={() => setSelected(TopicType.Video)}\n              icon={<VideoCameraAddOutlined />}\n            />\n          </Tooltip>\n        )}\n        {!positionsToHide?.includes(TopicType.H5P) && !topicTypeIsDisabled(TopicType.H5P) && (\n          <Tooltip placement=\"right\" title={<FormattedMessage id=\"H5P\" />}>\n            <Button\n              block\n              onClick={() => setSelected(TopicType.H5P)}\n              icon={<InteractionOutlined />}\n            />\n          </Tooltip>\n        )}\n        {!positionsToHide?.includes(TopicType.Image) && !topicTypeIsDisabled(TopicType.Image) && (\n          <Tooltip placement=\"right\" title={<FormattedMessage id=\"Image\" />}>\n            <Button\n              block\n              onClick={() => setSelected(TopicType.Image)}\n              icon={<FileImageOutlined />}\n            />\n          </Tooltip>\n        )}\n        {!positionsToHide?.includes(TopicType.PDF) && !topicTypeIsDisabled(TopicType.PDF) && (\n          <Tooltip placement=\"right\" title={<FormattedMessage id=\"PDF\" />}>\n            <Button block onClick={() => setSelected(TopicType.PDF)} icon={<FilePdfOutlined />} />\n          </Tooltip>\n        )}\n        {!positionsToHide?.includes(TopicType.SCORM) && !topicTypeIsDisabled(TopicType.SCORM) && (\n          <Tooltip placement=\"right\" title={<FormattedMessage id=\"SCORM\" />}>\n            <Button block onClick={() => setSelected(TopicType.SCORM)} icon={<FundOutlined />} />\n          </Tooltip>\n        )}\n        {!positionsToHide?.includes(TopicType.Project) &&\n          !topicTypeIsDisabled(TopicType.Project) && (\n            <Tooltip placement=\"right\" title={<FormattedMessage id=\"Project\" />}>\n              <Button\n                block\n                onClick={() => setSelected(TopicType.Project)}\n                icon={<CarryOutOutlined />}\n              />\n            </Tooltip>\n          )}\n        {!positionsToHide?.includes(TopicType.GiftQuiz) &&\n          !topicTypeIsDisabled(TopicType.GiftQuiz) && (\n            <Tooltip placement=\"right\" title={<FormattedMessage id=\"Quiz\" />}>\n              <Button\n                block\n                onClick={() => setSelected(TopicType.GiftQuiz)}\n                icon={<PercentageOutlined />}\n              />\n            </Tooltip>\n          )}\n      </div>\n    </div>\n  );\n};\n","import type {\n  ItemId,\n  TreeData,\n  TreeDestinationPosition,\n  TreeItem,\n  TreeSourcePosition,\n} from '@atlaskit/tree';\nimport { moveItemOnTree } from '@atlaskit/tree';\nimport type { Dispatch, SetStateAction } from 'react';\n\n// UTIL TYPES\nexport enum MovedType {\n  New = 'new',\n  Lesson = 'lesson',\n  Topic = 'topic',\n}\nexport type StringifyId<Obj extends { id?: number }> = Omit<Obj, 'id'> & { id: string };\nexport type LessonDeeplyStringifyId = Omit<StringifyId<API.Lesson>, 'lessons' | 'topics'> & {\n  lessons?: StringifyId<API.Lesson>[];\n  topics?: StringifyId<API.Topic>[];\n};\n\nconst mutateTopicsId = (topics: API.Topic[], depth: number): StringifyId<API.Topic>[] =>\n  topics.map((t) => ({ ...t, id: `topic-${t.id}-${depth}` }));\nconst mutateLessonsId = (lessons: API.Lesson[], depth: number): StringifyId<API.Lesson>[] =>\n  lessons.map((l) => ({ ...l, id: l.isNew ? `new-${l.id}-${depth}` : `lesson-${l.id}-${depth}` }));\n\nconst getLessonDeeplyStringifyId = (l: API.Lesson, depth: number): LessonDeeplyStringifyId => ({\n  ...l,\n  id: l.isNew ? `new-${l.id}-${depth}` : `lesson-${l.id}-${depth}`,\n  lessons: mutateLessonsId(l?.lessons ?? [], depth + 1),\n  topics: mutateTopicsId(l?.topics ?? [], depth + 1),\n});\n\nexport const getFlatLessonDeeplyStringifyId = (\n  lessons: API.Lesson[],\n  depth = 0,\n): LessonDeeplyStringifyId[] =>\n  lessons.reduce<LessonDeeplyStringifyId[]>(\n    (acc, l) => [\n      ...acc,\n      ...getFlatLessonDeeplyStringifyId(l?.lessons ?? [], depth + 1),\n      getLessonDeeplyStringifyId(l, depth),\n    ],\n    [],\n  );\n\nexport const getFlatTopicsStringifyId = (\n  lessons: API.Lesson[],\n  depth = 1, // Because topic has to be nested in lesson\n): StringifyId<API.Topic>[] =>\n  lessons.reduce<StringifyId<API.Topic>[]>(\n    (acc, l) => [\n      ...acc,\n      ...getFlatTopicsStringifyId(l?.lessons ?? [], depth + 1),\n      ...mutateTopicsId(l?.topics ?? [], depth),\n    ],\n    [],\n  );\n\nexport const getRootLessons = (lessons: API.Lesson[]): TreeItem[] =>\n  lessons.map((l) => {\n    const lesson = getLessonDeeplyStringifyId(l, 0);\n    const children = [...(lesson.lessons ?? []), ...(lesson.topics ?? [])].map(({ id }) => id!);\n\n    return {\n      id: lesson.id,\n      children,\n      hasChildren: children.length > 0,\n      isExpanded: true,\n      data: lesson,\n    };\n  });\n\nexport const getTreeDataItemsFromFlatLessonsAndTopics = (\n  items: (LessonDeeplyStringifyId | StringifyId<API.Topic>)[],\n  prevState?: Record<string | number, TreeItem>,\n): Record<string | number, TreeItem> =>\n  items.reduce<Record<string | number, TreeItem>>((acc, item) => {\n    let children: string[] = [];\n\n    if ('lessons' in item || 'topics' in item) {\n      children = [...(item.lessons ?? []), ...(item.topics ?? [])].map(({ id }) => id);\n    }\n\n    const isExpanded = prevState?.[`${item.id}`]?.isExpanded ?? true;\n\n    return {\n      ...acc,\n      [`${item.id}`]: {\n        id: item.id,\n        children,\n        hasChildren: children.length > 0,\n        isExpanded,\n        data: item,\n      },\n    };\n  }, {});\n\nexport const reorderIdArr = (\n  idArr: ItemId[],\n  sourceIndex: number,\n  destinationIndex: number,\n): ItemId[] => {\n  const arrCopy = [...idArr];\n  const arrCopyContextSourceIndex = sourceIndex % arrCopy.length;\n  const arrCopyContextDestinationIndex = destinationIndex % arrCopy.length;\n\n  const [removed] = arrCopy.splice(arrCopyContextSourceIndex, 1);\n  arrCopy.splice(arrCopyContextDestinationIndex, 0, removed);\n\n  return arrCopy;\n};\n\nexport const insertToIndexIdArr = (\n  idArr: ItemId[],\n  destinationIndex: number,\n  item: ItemId,\n): ItemId[] => {\n  const arrCopy = [...idArr];\n  const arrCopyContextDestinationIndex =\n    arrCopy.length === 1 || destinationIndex === arrCopy.length\n      ? destinationIndex\n      : destinationIndex % arrCopy.length;\n\n  arrCopy.splice(arrCopyContextDestinationIndex, 0, item);\n\n  return arrCopy;\n};\n\nexport const getOrdersFromReorderedArr = (idArr: ItemId[]): [number, number][] =>\n  idArr.map((id, index) => {\n    const [, strId] = id.toString().split('-');\n\n    return [+strId, index];\n  });\n\nexport const optimisticMoveThroughTree = async (\n  setState: Dispatch<SetStateAction<TreeData>>,\n  moveItemOnTreeParams: [TreeSourcePosition, TreeDestinationPosition],\n  promise: () => Promise<unknown> | Promise<API.DefaultResponse<unknown>>,\n) => {\n  let prevState: TreeData | undefined = undefined;\n  setState((prev) => {\n    prevState = prev;\n    return moveItemOnTree(prev, ...moveItemOnTreeParams);\n  });\n\n  try {\n    const res = await promise();\n    if (\n      typeof res === 'object' &&\n      res !== null &&\n      'success' in res &&\n      typeof res.success === 'boolean' &&\n      !res.success &&\n      prevState\n    ) {\n      setState(prevState);\n    }\n  } catch {\n    if (prevState) {\n      setState(prevState);\n    }\n  }\n};\n\nexport const findParentByChildrenId = (\n  treeData: TreeData,\n  childrenId: ItemId,\n): TreeItem | undefined =>\n  Object.values(treeData.items).find(({ children }) => children.includes(childrenId));\n\nexport const findChildrenIndexPosition = (\n  treeData: TreeData,\n  parentId: ItemId,\n  childrenId: ItemId,\n): number => treeData.items?.[parentId]?.children?.indexOf(childrenId) ?? -1;\n","import { FolderOpenOutlined, FolderOutlined, PlusOutlined } from '@ant-design/icons';\nimport type {\n  RenderItemParams,\n  TreeData,\n  TreeDestinationPosition,\n  TreeItem,\n  TreeSourcePosition,\n} from '@atlaskit/tree';\nimport Tree, { mutateTree } from '@atlaskit/tree';\nimport { Button, Tooltip, message } from 'antd';\nimport React, { useCallback, useContext, useEffect, useMemo, useState } from 'react';\nimport { FormattedMessage, NavLink, history, useIntl, useModel } from 'umi';\n\nimport { Context } from '@/components/ProgramForm/Context';\nimport { getTypeIcon } from '@/components/ProgramForm/ThreeColProgram/TopicForm';\nimport { getTypeName } from '@/components/ProgramForm/ThreeColProgram/TopicForm/media';\nimport PACKAGES from '@/consts/packages';\nimport { getFormData } from '@/services/api';\nimport {\n  updateLesson as apiUpdateLesson,\n  updateTopic as apiUpdateTopic,\n  sort,\n} from '@/services/escola-lms/course';\nimport { RecommenderType, TopicType } from '@/services/escola-lms/enums';\nimport { createHavePackageInstalled } from '@/utils/access';\nimport { NewLessonListItem } from '../NewLessonListItem';\nimport { Recommender } from '../Recommender';\nimport { CourseRecommender } from '../Recommender/CourseRecommender';\nimport { RecommenderTopicSelector } from '../Recommender/RecommenderTopicSelector';\nimport { TopicTypesSelector } from '../TopicTypesSelector';\nimport type { LessonDeeplyStringifyId } from './utils';\nimport {\n  MovedType,\n  findChildrenIndexPosition,\n  findParentByChildrenId,\n  getFlatLessonDeeplyStringifyId,\n  getFlatTopicsStringifyId,\n  getOrdersFromReorderedArr,\n  getRootLessons,\n  getTreeDataItemsFromFlatLessonsAndTopics,\n  insertToIndexIdArr,\n  optimisticMoveThroughTree,\n  reorderIdArr,\n} from './utils';\n\ninterface NestingSettings {\n  topic?: number;\n  lesson?: number;\n}\n\ninterface LessonListProps {\n  onNewLesson?: () => void;\n}\n\nexport const LessonList: React.FC<LessonListProps> = ({ onNewLesson }) => {\n  const { state, currentEditMode, updateLesson, addNewTopic, addNewLesson, getLessons } =\n    useContext(Context);\n  const courseId = state?.id;\n  const rootLessons = useMemo(() => getRootLessons(state?.lessons ?? []), [state?.lessons]);\n  const flatLessonsAndTopics = useMemo(\n    () => [\n      ...getFlatLessonDeeplyStringifyId(state?.lessons ?? []),\n      ...getFlatTopicsStringifyId(state?.lessons ?? []),\n    ],\n    [state?.lessons],\n  );\n  const [treeData, setTreeData] = useState<TreeData>({ rootId: 0, items: {} });\n  const { initialState } = useModel('@@initialState');\n  const intl = useIntl();\n  // const config = initialState;\n\n  const havePackageInstalled = useCallback(() => {\n    const isRecomendarePackageEnabled =\n      initialState?.packagesConfigs?.escolalms_recommender?.enabled?.value;\n\n    const checkPackage = createHavePackageInstalled(initialState?.packages);\n    return isRecomendarePackageEnabled && checkPackage(PACKAGES.Recommender);\n  }, [initialState?.packages]);\n\n  useEffect(() => {\n    setTreeData((prevState) => {\n      const root: TreeItem = {\n        children: rootLessons.map(({ id }) => id),\n        id: 'root',\n        data: rootLessons,\n        isExpanded: true,\n        hasChildren: rootLessons.length > 0,\n      };\n\n      const items = getTreeDataItemsFromFlatLessonsAndTopics(flatLessonsAndTopics, prevState.items);\n      return { rootId: root.id, items: { ...items, [root.id]: root } };\n    });\n  }, [flatLessonsAndTopics]);\n\n  const onTopicCreate = useCallback(\n    (lesson_id: number, topic_type: TopicType) => {\n      if (addNewTopic) {\n        const newTopic = addNewTopic(lesson_id, topic_type);\n        history.push(`/courses/list/${courseId}/program/?topic=${newTopic.id}`);\n      }\n    },\n    [addNewTopic],\n  );\n\n  const nestingSettings = useMemo(\n    () =>\n      (initialState?.config ?? []).reduce<NestingSettings>((acc, setting) => {\n        if (setting.key === 'maxLessonsNestingInProgram') {\n          return { ...acc, lesson: setting.data };\n        }\n        if (setting.key === 'minTopicNestingInProgram') {\n          return { ...acc, topic: setting.data };\n        }\n        return acc;\n      }, {}),\n    [initialState?.config],\n  );\n\n  const getHiddenNewTopicOptions = useCallback(\n    (level: number) => {\n      const hiddenOptions: (TopicType | 'lesson')[] = [];\n\n      const maxLessonsNestingInProgram = nestingSettings?.lesson ?? 0.5;\n      const minTopicNestingInProgram = nestingSettings?.topic ?? 0.5;\n\n      if (Number.isInteger(maxLessonsNestingInProgram) && level > maxLessonsNestingInProgram) {\n        hiddenOptions.push('lesson');\n      }\n      if (Number.isInteger(minTopicNestingInProgram) && level < minTopicNestingInProgram) {\n        Object.values(TopicType).forEach((topicType) => hiddenOptions.push(topicType));\n      }\n      return hiddenOptions;\n    },\n    [nestingSettings],\n  );\n  const renderItem = useCallback(\n    ({ item, depth, provided, onExpand, onCollapse }: RenderItemParams) => {\n      const [type, strId] = item.id.toString().split('-');\n      const id = Number(strId);\n\n      const checkLastTopic = (lessonId: number, currentTopicId: string) => {\n        const lessonTopics = flatLessonsAndTopics.find((lesson) =>\n          lesson.id.includes(String(lessonId)),\n        ) as LessonDeeplyStringifyId;\n        const lastTopic = lessonTopics?.topics?.[lessonTopics.topics.length - 1];\n        return lastTopic?.id === currentTopicId;\n      };\n\n      if (type === 'new' && item.data.isNew) {\n        return (\n          <NewLessonListItem\n            {...provided.draggableProps}\n            {...provided.dragHandleProps}\n            ref={provided.innerRef}\n            initialValue={item.data}\n            onCreate={(title: string) => {\n              const formData = getFormData({\n                ...item.data,\n                parent_lesson_id: item.data.parent_id,\n                title,\n                active: item.data.active ? 1 : 0,\n              });\n              if (updateLesson) {\n                updateLesson(id, formData);\n              }\n            }}\n          />\n        );\n      }\n\n      if (type === 'lesson') {\n        return (\n          <div\n            {...provided.draggableProps}\n            {...provided.dragHandleProps}\n            ref={provided.innerRef}\n            className={`program-sidebar__list-item program-sidebar__list-item--lesson ${\n              currentEditMode?.mode === 'lesson' && currentEditMode.id === id\n                ? 'program-sidebar__list-item--active'\n                : ''\n            }`}\n          >\n            <div className=\"program-sidebar__text-wrap\">\n              <button\n                className=\"program-sidebar__collapse\"\n                onClick={() => (item.isExpanded ? onCollapse(item.id) : onExpand(item.id))}\n              >\n                {item.isExpanded ? <FolderOpenOutlined /> : <FolderOutlined />}\n              </button>\n              <Tooltip placement=\"top\" title={item.data.title}>\n                <NavLink\n                  to={`/courses/list/${courseId}/program/?${type}=${id}`}\n                  className=\"program-sidebar__link\"\n                >\n                  <span className=\"program-sidebar__title\">{item.data.title}</span>\n                </NavLink>\n              </Tooltip>\n            </div>\n            <TopicTypesSelector\n              onNewLesson={() => {\n                if (addNewLesson) {\n                  addNewLesson(id);\n                }\n              }}\n              onSelected={(topic_type) => onTopicCreate(id, topic_type)}\n              // depth is 0 index based and settings are 1 index based\n              positionsToHide={getHiddenNewTopicOptions(depth + 1)}\n              depth={depth}\n            />\n          </div>\n        );\n      }\n      return (\n        <>\n          <NavLink\n            className={`program-sidebar__link program-sidebar__list-item program-sidebar__list-item--topic ${\n              currentEditMode?.mode === 'topic' && currentEditMode.id === id\n                ? 'program-sidebar__list-item--active'\n                : ''\n            }`}\n            to={`/courses/list/${courseId}/program/?${type}=${id}`}\n            {...provided.draggableProps}\n            {...provided.dragHandleProps}\n            ref={provided.innerRef}\n          >\n            <Tooltip placement=\"right\" title={<FormattedMessage id={getTypeName(item.data)} />}>\n              {getTypeIcon(getTypeName(item.data))}\n            </Tooltip>\n            <span className=\"title\">{item.data.title}</span>\n          </NavLink>\n\n          {havePackageInstalled() &&\n            courseId &&\n            currentEditMode?.mode === 'topic' &&\n            currentEditMode?.value?.lesson_id &&\n            currentEditMode?.value?.lesson_id === item.data.lesson_id &&\n            checkLastTopic(currentEditMode.value.lesson_id, item.data.id) && (\n              <>\n                {flatLessonsAndTopics.length > 5 && <CourseRecommender courseId={courseId} />}\n                <Recommender\n                  courseId={courseId}\n                  lessonId={currentEditMode.value.lesson_id}\n                  recommenderType={\n                    currentEditMode.value.isNew ? RecommenderType.Info : RecommenderType.Exercise\n                  }\n                />\n                <RecommenderTopicSelector\n                  onSelected={(topic_type) => onTopicCreate(item.data.lesson_id, topic_type)}\n                  positionsToHide={getHiddenNewTopicOptions(depth + 1)}\n                />\n              </>\n            )}\n        </>\n      );\n    },\n    [courseId, currentEditMode],\n  );\n\n  const onExpand = useCallback(\n    (itemId: string | number) =>\n      setTreeData((prev) => mutateTree(prev, itemId, { isExpanded: true })),\n    [],\n  );\n\n  const onCollapse = useCallback(\n    (itemId: string | number) =>\n      setTreeData((prev) => mutateTree(prev, itemId, { isExpanded: false })),\n    [],\n  );\n\n  const onDragEnd = useCallback(\n    async (source: TreeSourcePosition, destination?: TreeDestinationPosition) => {\n      if (!destination || !courseId) return;\n      const sourceChildren = treeData.items[source.parentId].children;\n      const movedFullId = sourceChildren[source.index].toString();\n      const [movedType, movedId] = movedFullId.split('-');\n      const destinationChildren = treeData.items[destination.parentId].children;\n\n      const maxLessonsNestingInProgram = nestingSettings?.lesson;\n      const minTopicNestingInProgram = nestingSettings?.topic;\n\n      // Moving new lesson\n      if (movedType === MovedType.New) {\n        message.warning(intl.formatMessage({ id: 'new_lessons_cant_be_moved' }));\n        return;\n      }\n\n      // Nest lesson/topic into topic case\n      if (destination.parentId.toString().includes('topic')) {\n        const topicsIds = sourceChildren.filter((id) => id.toString().includes('topic'));\n        const destinationLesson = findParentByChildrenId(treeData, destination.parentId);\n        const destinationDepth =\n          Number((destinationLesson?.id ?? '').toString().split('-')?.[2] ?? -2) + 1;\n\n        if (\n          movedType === MovedType.Lesson &&\n          maxLessonsNestingInProgram !== undefined &&\n          destinationDepth > maxLessonsNestingInProgram\n        ) {\n          message.warning(\n            intl.formatMessage({ id: 'max_lesson_nesting' }, { max: maxLessonsNestingInProgram }),\n          );\n          return;\n        }\n\n        if (\n          movedType === MovedType.Topic &&\n          minTopicNestingInProgram !== undefined &&\n          destinationDepth < minTopicNestingInProgram\n        ) {\n          message.warning(\n            intl.formatMessage({ id: 'min_topic_nesting' }, { min: minTopicNestingInProgram }),\n          );\n          return;\n        }\n\n        // Change order in one lesson\n        if (destinationLesson?.id !== undefined && source.parentId === destinationLesson.id) {\n          if (movedType === MovedType.Lesson) {\n            message.warning(intl.formatMessage({ id: 'lessons_and_topics_cant_be_mixed' }));\n            return;\n          }\n\n          if (movedType === MovedType.Topic) {\n            const destinationTopicPos = findChildrenIndexPosition(\n              treeData,\n              destinationLesson.id,\n              destination.parentId,\n            );\n\n            if (destinationTopicPos < 0) {\n              return;\n            }\n\n            const reorderedArr = reorderIdArr(topicsIds, source.index, destinationTopicPos);\n            const orders = getOrdersFromReorderedArr(reorderedArr);\n\n            await optimisticMoveThroughTree(\n              setTreeData,\n              [source, { parentId: destinationLesson.id, index: destinationTopicPos }],\n              () => sort({ class: 'Topic', orders, course_id: courseId }),\n            );\n            getLessons?.();\n            return;\n          }\n        }\n\n        // traverse lesson/topic through the tree\n        if (destinationLesson?.id !== undefined && source.parentId !== destinationLesson.id) {\n          const destinationLessonsIds = destinationLesson.children.filter((id) =>\n            id.toString().includes('lesson'),\n          );\n          const destinationTopicsIds = destinationLesson.children.filter((id) =>\n            id.toString().includes('topic'),\n          );\n\n          if (movedType === MovedType.Lesson) {\n            const maxLessonPos = destinationLessonsIds.length;\n\n            const [, destinationStrId] = destinationLesson.id.toString().split('-');\n            const prevLessonState: API.Lesson = treeData.items[movedFullId].data;\n            const updatingValues = {\n              parent_lesson_id: destinationLesson.id === 'root' ? '' : +destinationStrId,\n              course_id: courseId,\n              title: prevLessonState.title,\n              order: maxLessonPos,\n            };\n\n            const formData = getFormData(updatingValues);\n\n            const reorderedArr = insertToIndexIdArr(\n              destinationLessonsIds,\n              maxLessonPos,\n              movedFullId,\n            );\n            const destinationOrders = getOrdersFromReorderedArr(reorderedArr);\n\n            await optimisticMoveThroughTree(\n              setTreeData,\n              [source, { ...destination, index: maxLessonPos }],\n              () =>\n                apiUpdateLesson(+movedId, formData).then(() =>\n                  sort({ class: 'Lesson', orders: destinationOrders, course_id: courseId }),\n                ),\n            );\n            getLessons?.();\n            return;\n          }\n\n          if (movedType === MovedType.Topic) {\n            const destinationTopicPos =\n              findChildrenIndexPosition(treeData, destinationLesson.id, destination.parentId) + 1;\n\n            if (destinationTopicPos < 1) {\n              return;\n            }\n\n            const [, destinationStrId] = destinationLesson.id.toString().split('-');\n            const updatingValues: Partial<API.Topic> = {\n              lesson_id: +destinationStrId,\n              order: destinationTopicPos,\n            };\n\n            const reorderedArr = insertToIndexIdArr(\n              destinationTopicsIds,\n              destinationTopicPos - destinationLessonsIds.length,\n              movedFullId,\n            );\n            const destinationOrders = getOrdersFromReorderedArr(reorderedArr);\n\n            const formData = getFormData(updatingValues);\n\n            await optimisticMoveThroughTree(\n              setTreeData,\n              [source, { parentId: destinationLesson.id, index: destinationTopicPos }],\n              () =>\n                apiUpdateTopic(+movedId, formData).then(() =>\n                  sort({ class: 'Topic', orders: destinationOrders, course_id: courseId }),\n                ),\n            );\n            getLessons?.();\n          }\n        }\n        return;\n      }\n\n      // Topics to root case\n      if (destination.parentId === 'root' && movedType === MovedType.Topic) {\n        message.warning(intl.formatMessage({ id: 'topic_cant_be_in_root' }));\n        return;\n      }\n\n      // Change order in one lesson\n      if (source.parentId === destination.parentId && destination.index !== undefined) {\n        const lessonsIds = sourceChildren.filter((id) => id.toString().includes('lesson'));\n        const topicsIds = sourceChildren.filter((id) => id.toString().includes('topic'));\n\n        // move lessons only around 0 and x index\n        if (movedType === MovedType.Lesson) {\n          const minLessonPos = 0;\n          const maxLessonPos = lessonsIds.length - 1;\n\n          if (destination.index < minLessonPos || destination.index > maxLessonPos) {\n            message.warning(intl.formatMessage({ id: 'lessons_and_topics_cant_be_mixed' }));\n            return;\n          }\n\n          const reorderedArr = reorderIdArr(lessonsIds, source.index, destination.index);\n          const orders = getOrdersFromReorderedArr(reorderedArr);\n\n          await optimisticMoveThroughTree(setTreeData, [source, destination], () =>\n            sort({ class: 'Lesson', orders, course_id: courseId }),\n          );\n          getLessons?.();\n          return;\n        }\n\n        // move topics only around lessons length index and last children index\n        if (movedType === MovedType.Topic) {\n          const minTopicPos = lessonsIds.length;\n          const maxTopicPos = sourceChildren.length - 1;\n\n          if (destination.index < minTopicPos || destination.index > maxTopicPos) {\n            message.warning(intl.formatMessage({ id: 'lessons_and_topics_cant_be_mixed' }));\n            return;\n          }\n\n          const reorderedArr = reorderIdArr(topicsIds, source.index, destination.index);\n          const orders = getOrdersFromReorderedArr(reorderedArr);\n\n          await optimisticMoveThroughTree(setTreeData, [source, destination], () =>\n            sort({ class: 'Topic', orders, course_id: courseId }),\n          );\n          getLessons?.();\n          return;\n        }\n      }\n\n      // traverse lesson/topic through the tree\n      if (source.parentId !== destination.parentId) {\n        const destinationLessonsIds = destinationChildren.filter((id) =>\n          id.toString().includes('lesson'),\n        );\n        const destinationTopicsIds = destinationChildren.filter((id) =>\n          id.toString().includes('topic'),\n        );\n        const destinationDepth = Number(destination.parentId.toString().split('-')?.[2] ?? -2) + 1;\n\n        if (\n          movedType === MovedType.Lesson &&\n          maxLessonsNestingInProgram !== undefined &&\n          destinationDepth > maxLessonsNestingInProgram\n        ) {\n          message.warning(\n            intl.formatMessage({ id: 'max_lesson_nesting' }, { max: maxLessonsNestingInProgram }),\n          );\n          return;\n        }\n\n        if (\n          movedType === MovedType.Topic &&\n          minTopicNestingInProgram !== undefined &&\n          destinationDepth < minTopicNestingInProgram\n        ) {\n          message.warning(\n            intl.formatMessage({ id: 'min_topic_nesting' }, { min: minTopicNestingInProgram }),\n          );\n          return;\n        }\n\n        if (movedType === MovedType.Lesson) {\n          const minLessonPos = 0;\n          const maxLessonPos = destinationLessonsIds.length;\n          const destIndex = destination.index ?? maxLessonPos;\n\n          if (\n            (maxLessonPos !== 0 && destIndex < minLessonPos) ||\n            (maxLessonPos !== 0 && destIndex > maxLessonPos)\n          ) {\n            message.warning(intl.formatMessage({ id: 'lessons_and_topics_cant_be_mixed' }));\n            return;\n          }\n\n          const [, destinationStrId] = destination.parentId.toString().split('-');\n          const prevLessonState: API.Lesson = treeData.items[movedFullId].data;\n          const updatingValues = {\n            parent_lesson_id: destination.parentId === 'root' ? '' : +destinationStrId,\n            course_id: courseId,\n            title: prevLessonState.title,\n            order: destIndex,\n          };\n\n          const formData = getFormData(updatingValues);\n\n          const reorderedArr = insertToIndexIdArr(destinationLessonsIds, destIndex, movedFullId);\n          const destinationOrders = getOrdersFromReorderedArr(reorderedArr);\n\n          await optimisticMoveThroughTree(\n            setTreeData,\n            [source, { ...destination, index: destIndex }],\n            () =>\n              apiUpdateLesson(+movedId, formData).then(() =>\n                sort({ class: 'Lesson', orders: destinationOrders, course_id: courseId }),\n              ),\n          );\n          getLessons?.();\n          return;\n        }\n\n        if (movedType === MovedType.Topic) {\n          const minTopicPos = destinationLessonsIds.length;\n          const maxTopicPos = destinationChildren.length;\n          const destIndex = destination.index ?? maxTopicPos;\n\n          if (\n            (minTopicPos !== 0 && maxTopicPos !== 0 && destIndex < minTopicPos) ||\n            (minTopicPos !== 0 && maxTopicPos !== 0 && destIndex > maxTopicPos)\n          ) {\n            message.warning(intl.formatMessage({ id: 'lessons_and_topics_cant_be_mixed' }));\n            return;\n          }\n\n          const [, destinationStrId] = destination.parentId.toString().split('-');\n          const updatingValues: Partial<API.Topic> = {\n            lesson_id: +destinationStrId,\n            order: destIndex,\n          };\n\n          const reorderedArr = insertToIndexIdArr(\n            destinationTopicsIds,\n            destIndex - destinationLessonsIds.length,\n            movedFullId,\n          );\n          const destinationOrders = getOrdersFromReorderedArr(reorderedArr);\n\n          const formData = getFormData(updatingValues);\n\n          await optimisticMoveThroughTree(\n            setTreeData,\n            [source, { ...destination, index: destIndex }],\n            () =>\n              apiUpdateTopic(+movedId, formData).then(() =>\n                sort({ class: 'Topic', orders: destinationOrders, course_id: courseId }),\n              ),\n          );\n          getLessons?.();\n        }\n      }\n    },\n    [intl, treeData, courseId, nestingSettings],\n  );\n\n  return (\n    <div style={{ height: '100%' }}>\n      <Tree\n        offsetPerLevel={9}\n        tree={treeData}\n        onExpand={onExpand}\n        onCollapse={onCollapse}\n        onDragEnd={onDragEnd}\n        renderItem={renderItem}\n        isDragEnabled\n        isNestingEnabled\n      />\n      <Button\n        onClick={onNewLesson}\n        type=\"primary\"\n        className=\"program-sidebar__add-btn\"\n        icon={<PlusOutlined />}\n      >\n        <span>\n          <FormattedMessage id=\"add_lesson\" />\n        </span>\n      </Button>\n    </div>\n  );\n};\n","import { Spin } from 'antd';\nimport { useCallback, useContext } from 'react';\nimport { history } from 'umi';\n\nimport { Context } from '@/components/ProgramForm/Context';\nimport { LessonList } from './LessonList';\nimport './index.css';\n\nexport const CurriculumList = () => {\n  const { state, addNewLesson } = useContext(Context);\n\n  // TODO, #1019 there should be clone lesson button\n\n  const onNew = useCallback(() => {\n    if (addNewLesson && state) {\n      const newLesson = addNewLesson();\n      history.push(`/courses/list/${state.id}/program/?lesson=${newLesson.id}`);\n    }\n  }, [addNewLesson, state]);\n\n  if (state && state.lessons) {\n    return (\n      <aside\n        className={`program-sidebar program-sidebar--left ${\n          state.lessons.length > 0 ? '' : 'program-sidebar--empty'\n        }`}\n      >\n        <LessonList onNewLesson={onNew} />\n      </aside>\n    );\n  }\n\n  return (\n    <div>\n      <Spin />\n    </div>\n  );\n};\n\nexport default CurriculumList;\n","import { Col, Row, Spin, Typography } from 'antd';\nimport { useContext } from 'react';\n\nimport { Context } from '@/components/ProgramForm/Context';\n\nimport { FormattedMessage } from 'react-intl';\nimport LessonForm from './LessonForm/index';\nimport List from './List/index';\nimport TopicForm from './TopicForm/index';\n\nexport const Curriculum = () => {\n  const { state /*, sortLesson */, currentEditMode } = useContext(Context);\n\n  const { Title } = Typography;\n\n  /*\n  const onSort = useCallback(\n    (lesson: API.Lesson, up: boolean) => {\n      return lesson.id && sortLesson && sortLesson(lesson.id, up);\n    },\n    [sortLesson],\n  );\n  */\n\n  if (state && state.lessons) {\n    return (\n      <div className=\"course-block\">\n        <Row gutter={16}>\n          <Col span={4}>\n            <List />\n          </Col>\n          <Col span={24 - 4}>\n            {currentEditMode && currentEditMode.mode === 'lesson' && currentEditMode.value && (\n              <LessonForm key={currentEditMode.id} />\n            )}\n            {currentEditMode && currentEditMode.mode === 'topic' && currentEditMode.value && (\n              <TopicForm key={currentEditMode.id} />\n            )}\n            {currentEditMode && currentEditMode.mode === 'init' && (\n              <Row\n                style={{\n                  height: '100%',\n                }}\n              >\n                <Col span={16}>\n                  <div className={'program__empty-message'}>\n                    {state.lessons.length > 0 ? (\n                      <Title level={4}>\n                        <FormattedMessage id=\"program_form_not_selected_list_message\" />\n                      </Title>\n                    ) : (\n                      <Title level={4}>\n                        <FormattedMessage id=\"program_form_empty_list_message\" />\n                      </Title>\n                    )}\n                  </div>\n                </Col>\n                <Col span={8}>\n                  <aside className=\"program-sidebar program-sidebar--right\" />\n                </Col>\n              </Row>\n            )}\n          </Col>\n        </Row>\n        <div className=\"curriculum-lessons-wrapper\" />\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <Spin />\n    </div>\n  );\n};\n\nexport default Curriculum;\n","import React from 'react';\n\nimport { AppContext } from '@/components/ProgramForm/Context';\nimport ThreeColProgram from '@/components/ProgramForm/ThreeColProgram';\n\nexport const ProgramForm: React.FC<{\n  id: number | string;\n}> = ({ id }) => {\n  return (\n    <AppContext id={Number(id)}>\n      <ThreeColProgram />\n    </AppContext>\n  );\n};\n\nexport default ProgramForm;\n","import type { AxiosRequestConfig } from '@umijs/max';\n\nimport { request } from 'umi';\n\nexport async function projectSolutions(\n  params: API.ProjectSolutionListParams,\n  options?: AxiosRequestConfig,\n) {\n  return request<API.ProjectSolutionList>('/api/admin/topic-project-solutions', {\n    params: {\n      ...params,\n      per_page: params.pageSize,\n      page: params.current,\n    },\n    method: 'GET',\n    /* useCache: true */ useCache: false,\n    ...(options || {}),\n  });\n}\n\nexport async function deleteProjectSolution(id: number, options?: AxiosRequestConfig) {\n  return request<API.DefaultResponse<API.ProjectSolution>>(\n    `/api/admin/topic-project-solutions/${id}`,\n    {\n      method: 'DELETE',\n      ...(options || {}),\n    },\n  );\n}\n","import { DeleteOutlined } from '@ant-design/icons';\nimport ProTable, { type ProColumns } from '@ant-design/pro-table';\nimport { Button, Popconfirm, Tooltip, message } from 'antd';\nimport { format } from 'date-fns';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { FormattedMessage, Link, useIntl } from 'umi';\n\nimport TypeButtonDrawer from '@/components/TypeButtonDrawer';\nimport UserSelect from '@/components/UserSelect';\nimport { DATETIME_FORMAT } from '@/consts/dates';\nimport { program } from '@/services/escola-lms/course';\nimport { TopicType } from '@/services/escola-lms/enums';\nimport { deleteProjectSolution, projectSolutions } from '@/services/escola-lms/projects';\n\nconst handleRemove = async (id: number) => {\n  const res = await deleteProjectSolution(id);\n  if (res.success) {\n    message.success(res.message);\n  }\n  return true;\n};\n\nconst getFlatTopics = (lessons: API.Lesson[]): API.Topic[] =>\n  lessons.reduce<API.Topic[]>(\n    (acc, l) => [...acc, ...(l.lessons ? getFlatTopics(l.lessons) : []), ...(l.topics ?? [])],\n    [],\n  );\n\ninterface Props {\n  courseId?: number;\n}\n\nexport const ProjectsList: React.FC<Props> = ({ courseId }) => {\n  const intl = useIntl();\n\n  const [projectTopics, setProjectTopics] = useState<API.TopicProject[]>([]);\n\n  const enumsProjectTopics = useMemo(\n    () =>\n      projectTopics.reduce<Record<string, { text: string; status: string }>>(\n        (acc, curr) => ({\n          ...acc,\n          [curr.id ?? -1]: {\n            text: curr.title ?? '',\n            status: curr.id ?? -1,\n          },\n        }),\n        {},\n      ),\n    [projectTopics],\n  );\n\n  const columns: ProColumns[] = useMemo(\n    () => [\n      {\n        title: <FormattedMessage id=\"ID\" defaultMessage=\"ID\" />,\n        dataIndex: 'id',\n        hideInSearch: true,\n        sorter: true,\n        width: '80px',\n      },\n      {\n        title: <FormattedMessage id=\"topic\" defaultMessage=\"topic\" />,\n        dataIndex: 'topic_id',\n        hideInSearch: false,\n        sorter: true,\n        valueEnum: enumsProjectTopics,\n        render: (_, record) => (\n          <Link to={`/courses/list/${courseId}/program/?topic=${record.topic_id}`}>\n            {enumsProjectTopics?.[record.topic_id]?.text ?? record.topic_id}\n          </Link>\n        ),\n      },\n      {\n        sorter: true,\n        title: <FormattedMessage id=\"user\" defaultMessage=\"user\" />,\n        dataIndex: 'user_id',\n        renderFormItem: (item, { type, defaultRender, ...rest }, form) => {\n          if (type === 'form') return null;\n\n          const stateType = form.getFieldValue('state');\n          return (\n            <UserSelect\n              {...rest}\n              state={{\n                type: stateType,\n              }}\n            />\n          );\n        },\n        render: (_, record) =>\n          record.user_id && (\n            <TypeButtonDrawer\n              key={'user'}\n              type=\"EscolaLms\\Core\\Models\\User\"\n              type_id={record.user_id}\n            />\n          ),\n      },\n      {\n        sorter: true,\n        title: <FormattedMessage id=\"created_at\" defaultMessage=\"Created at\" />,\n        dataIndex: 'created_at',\n        hideInSearch: true,\n        render: (_, record) =>\n          record.created_at && format(new Date(record.created_at), DATETIME_FORMAT),\n      },\n      {\n        title: <FormattedMessage id=\"download\" defaultMessage=\"Download\" />,\n        dataIndex: 'file_url',\n        hideInSearch: true,\n        render: (_, record) => (\n          <Button type=\"primary\" target=\"_blank\" size=\"small\" href={record.file_url}>\n            <FormattedMessage id=\"download\" defaultMessage=\"Download\" />\n          </Button>\n        ),\n      },\n      {\n        hideInSearch: true,\n        title: <FormattedMessage id=\"pages.searchTable.titleOption\" defaultMessage=\"option\" />,\n        dataIndex: 'option',\n        valueType: 'option',\n        render: (_d, record, _i, action) => [\n          <Popconfirm\n            key=\"delete\"\n            title={\n              <FormattedMessage\n                id=\"deleteQuestion\"\n                defaultMessage=\"Are you sure to delete this record?\"\n              />\n            }\n            onConfirm={async () => {\n              const success = await handleRemove(record.id);\n              if (!success) return;\n\n              action?.reload();\n            }}\n            okText={<FormattedMessage id=\"yes\" />}\n            cancelText={<FormattedMessage id=\"no\" />}\n          >\n            <Tooltip title={<FormattedMessage id=\"delete\" defaultMessage=\"delete\" />}>\n              <Button type=\"primary\" icon={<DeleteOutlined />} danger />\n            </Tooltip>\n          </Popconfirm>,\n        ],\n      },\n    ],\n    [enumsProjectTopics],\n  );\n\n  useEffect(() => {\n    if (!courseId) return;\n\n    program(courseId).then((res) => {\n      if (!res.success) return;\n\n      const flatProjectTopics = getFlatTopics(res.data.lessons).filter(\n        (t): t is API.TopicProject => t.topicable_type === TopicType.Project,\n      );\n      setProjectTopics(flatProjectTopics);\n    });\n  }, [courseId]);\n\n  return (\n    <ProTable\n      headerTitle={intl.formatMessage({\n        id: 'project_solutions',\n        defaultMessage: 'Project Uploaded Solutions',\n      })}\n      search={{\n        layout: 'vertical',\n      }}\n      rowKey=\"id\"\n      request={async ({ pageSize, current, user_id, topic_id }, sort) => {\n        const sortArr = sort && Object.entries(sort)[0];\n        const order_by = sortArr && (sortArr[0] as API.ProjectSolutionListParams['order_by']);\n        const res = await projectSolutions({\n          pageSize,\n          current,\n          course_id: courseId,\n          user_id,\n          topic_id,\n          order_by,\n          order: sortArr ? (sortArr[1] === 'ascend' ? 'ASC' : 'DESC') : undefined,\n        });\n        if (!res.success) return { data: [], total: 0, success: false };\n\n        return {\n          data: res.data,\n          total: res.meta.total,\n          success: true,\n        };\n      }}\n      columns={columns}\n    />\n  );\n};\n\nexport default ProjectsList;\n","import { FormattedMessage } from '@@/plugin-locale/localeExports';\nimport { Button, Modal } from 'antd';\nimport React from 'react';\n\ninterface CourseSuccessModalProps {\n  visible: boolean;\n  handleOk: () => void;\n  handleCancel: () => void;\n}\n\nexport const CourseSuccessModal: React.FC<CourseSuccessModalProps> = (props) => {\n  const { visible = false, handleOk, handleCancel } = props;\n\n  return (\n    <Modal\n      title={\n        <FormattedMessage\n          id=\"course_success_modal_title\"\n          defaultMessage=\"course_success_modal_title\"\n        />\n      }\n      visible={visible}\n      onOk={handleOk}\n      onCancel={handleCancel}\n      footer={[\n        <Button key=\"link\" onClick={handleCancel}>\n          <FormattedMessage\n            id=\"course_success_modal_button_cancel\"\n            defaultMessage=\"course_success_modal_button_cancel\"\n          />\n        </Button>,\n        <Button key=\"link\" type=\"primary\" onClick={handleOk}>\n          <FormattedMessage\n            id=\"course_success_modal_button_ok\"\n            defaultMessage=\"course_success_modal_button_ok\"\n          />\n        </Button>,\n      ]}\n    >\n      <p>\n        <FormattedMessage\n          id=\"course_success_modal_content\"\n          defaultMessage=\"course_success_modal_content\"\n        />\n      </p>\n    </Modal>\n  );\n};\n","import React from 'react';\n\nimport UserGroupSelect from '@/components/UserGroupSelect';\nimport UserSelect from '@/components/UserSelect';\nimport { access as fetchAccess, setAccess as postSetAccess } from '@/services/escola-lms/course';\nimport ProForm from '@ant-design/pro-form';\nimport { message } from 'antd';\nimport { FormattedMessage } from 'umi';\n\nexport const CourseAccessForm: React.FC<{\n  id: number | string;\n}> = ({ id }) => {\n  return (\n    <ProForm\n      onFinish={async (values: API.CourseAccess) => {\n        postSetAccess(Number(id), values).then((response) => {\n          if (response.success) {\n            message.success(response.message);\n          }\n        });\n      }}\n      request={() => {\n        return fetchAccess(Number(id)).then((response) => {\n          if (response.success) {\n            return {\n              users: response.data.users.map((user) => (typeof user === 'object' ? user.id : user)),\n              groups: response.data.groups.map((group) =>\n                typeof group === 'object' ? group.id : group,\n              ),\n            };\n          }\n          return {\n            users: [],\n            groups: [],\n          };\n        });\n      }}\n    >\n      <ProForm.Item\n        valuePropName=\"value\"\n        name=\"users\"\n        label={<FormattedMessage id=\"users\" defaultMessage=\"Users\" />}\n      >\n        <UserSelect multiple />\n      </ProForm.Item>\n      <ProForm.Item\n        valuePropName=\"value\"\n        name=\"groups\"\n        label={<FormattedMessage id=\"groups\" defaultMessage=\"Groups\" />}\n      >\n        <UserGroupSelect multiple />\n      </ProForm.Item>\n    </ProForm>\n  );\n};\n\nexport default CourseAccessForm;\n","import type { AxiosRequestConfig } from '@umijs/max';\nimport { request } from 'umi';\n\n/**  GET /api/admin/templates/assignable */\nexport async function assignable(\n  params?: EscolaLms.Templates.Http.Requests.TemplateListAssignableRequest,\n  options?: AxiosRequestConfig,\n) {\n  return request<API.DefaultMetaResponse<API.Certificate>>('/api/admin/templates/assignable', {\n    method: 'GET',\n    /* useCache: true */ useCache: false,\n    params,\n    ...(options || {}),\n  });\n}\n\nexport async function assign(\n  id: number,\n  body: { assignable_id: number },\n  options?: AxiosRequestConfig,\n) {\n  return request<API.CourseAccessList>(`/api/admin/templates/${id}/assign`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    data: body,\n    ...(options || {}),\n  });\n}\n\nexport async function unassign(\n  id: number,\n  body: { assignable_id: number },\n  options?: AxiosRequestConfig,\n) {\n  return request<API.CourseAccessList>(`/api/admin/templates/${id}/unassign`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    data: body,\n    ...(options || {}),\n  });\n}\n\n/**  GET /api/admin/templates/assigned */\nexport async function assigned(params: API.TemplateItem, options?: AxiosRequestConfig) {\n  return request<API.DefaultResponse<API.Certificate[]>>(`/api/admin/templates/assigned`, {\n    params,\n    method: 'GET',\n    /* useCache: true */ useCache: false,\n    ...(options || {}),\n  });\n}\n","import { Select, Spin } from 'antd';\nimport React, { useEffect, useRef, useState } from 'react';\n\nimport {\n  assignable as fetchGetAssignables,\n  assigned as fetchGetAssigned,\n  assign as postAssign,\n  unassign as postUnassign,\n} from '@/services/escola-lms/certificate';\nimport { message } from 'antd';\nimport { useCallback } from 'react';\nimport { FormattedMessage } from 'umi';\n\nexport const AssignTemplateSelect: React.FC<{\n  state?: {\n    type: number;\n  };\n  assignable_class: string;\n  assignable_id: string | number;\n  multiple?: boolean;\n  onAssign?: (assignIds: number[]) => void;\n  onUnassign?: (assignIds: number[]) => void;\n  onChange?: (value: number[]) => void;\n  onTemplates?: (templates: API.Certificate[]) => void;\n}> = ({\n  onChange,\n  multiple = false,\n  assignable_class,\n  assignable_id,\n  onAssign,\n  onUnassign,\n  onTemplates,\n}) => {\n  const [templates, setTemplates] = useState<API.Certificate[]>([]);\n  const [currentTemplates, setCurrentTemplates] = useState<number[]>([]);\n\n  const [fetching, setFetching] = useState(false);\n\n  const abortController = useRef<AbortController>();\n\n  const setTemplatesFromResponse = useCallback(\n    (responseTemplates: API.Certificate[]) => {\n      setTemplates(responseTemplates);\n      if (onTemplates) {\n        onTemplates(responseTemplates);\n      }\n    },\n    [onTemplates],\n  );\n\n  const fetchAssiged = useCallback(() => {\n    fetchGetAssigned({\n      assignable_class,\n      assignable_id: Number(assignable_id),\n    }).then((response) => {\n      if (response.success) {\n        setCurrentTemplates(response.data.map((item) => item.id));\n      }\n    });\n  }, [assignable_class, assignable_id]);\n\n  const fetchAssignales = useCallback(() => {\n    setFetching(true);\n    if (abortController.current) {\n      abortController.current.abort();\n    }\n\n    abortController.current = new AbortController();\n    fetchGetAssignables(\n      {\n        assignable_class,\n      },\n      { signal: abortController.current.signal },\n    )\n      .then((response) => {\n        if (response && response.success) {\n          setTemplatesFromResponse(response.data);\n        }\n        setFetching(false);\n      })\n      .catch(() => setFetching(false));\n\n    return () => {\n      if (abortController.current) {\n        abortController.current.abort();\n      }\n    };\n  }, [assignable_class, assignable_id]);\n\n  const removeIdFromCurrentTemplates = useCallback((id: number) => {\n    setCurrentTemplates((prevTemplates) => prevTemplates.filter((item) => item != id));\n  }, []);\n\n  const addIdFromCurrentTemplates = useCallback((id: number) => {\n    setCurrentTemplates((prevTemplates) =>\n      prevTemplates.includes(id) ? prevTemplates : [...prevTemplates, id],\n    );\n  }, []);\n\n  const handleChange = useCallback(\n    (value: number | number[]) => {\n      const values = Array.isArray(value) ? value : [value];\n      const valuesToAssign = values.filter((item) => !currentTemplates.includes(item));\n      const valuesToUnassign = currentTemplates.filter((item) => !values.includes(item));\n\n      valuesToAssign.forEach((item) => {\n        postAssign(item, {\n          assignable_id: Number(assignable_id),\n        })\n          .then((response) => {\n            if (response.success) {\n              message.success(response.message);\n              // TODO: #1007 there can be only one chanel:event assign to model, so if event for this channel is in currentTemplates it replace it so should be removed from list\n            }\n            if (!response.success) {\n              message.error(response.message);\n              removeIdFromCurrentTemplates(item);\n            }\n          })\n          .catch((err) => {\n            message.error(err.toString());\n            removeIdFromCurrentTemplates(item);\n          });\n      });\n\n      valuesToUnassign.forEach((item) => {\n        postUnassign(item, {\n          assignable_id: Number(assignable_id),\n        })\n          .then((response) => {\n            if (response.success) {\n              message.success(response.message);\n            }\n            if (!response.success) {\n              message.error(response.message);\n              addIdFromCurrentTemplates(item);\n            }\n          })\n          .catch((err) => {\n            message.error(err.toString());\n            addIdFromCurrentTemplates(item);\n          });\n      });\n\n      if (valuesToAssign.length != 0 && onAssign) {\n        onAssign(valuesToAssign);\n      }\n      if (valuesToUnassign.length != 0 && onUnassign) {\n        onUnassign(valuesToUnassign);\n      }\n\n      setCurrentTemplates(values);\n    },\n    [currentTemplates, assignable_id, onAssign, onUnassign],\n  );\n\n  useEffect(() => {\n    fetchAssignales();\n    fetchAssiged();\n  }, [assignable_class, assignable_id]);\n\n  useEffect(() => {\n    if (onChange) {\n      onChange(currentTemplates);\n    }\n  }, [currentTemplates, onChange]);\n\n  return (\n    <Select\n      style={{ width: '100%' }}\n      value={currentTemplates}\n      onChange={handleChange}\n      mode={multiple ? 'multiple' : undefined}\n      showSearch\n      placeholder={<FormattedMessage id=\"select_templates\" defaultMessage=\"Select a templates\" />}\n      optionFilterProp=\"children\"\n      filterOption={(input, option) => {\n        if (option && option.children) {\n          return option?.children?.toString().toLowerCase().indexOf(input.toLowerCase()) >= 0;\n        }\n        return true;\n      }}\n      notFoundContent={fetching ? <Spin size=\"small\" /> : null}\n    >\n      {templates.map((template) => (\n        <Select.Option key={template.id} value={template.id}>\n          {template.name}{' '}\n          <small>\n            <FormattedMessage id={template.channel.split('\\\\').pop()} />:\n            <FormattedMessage id={template.event.split('\\\\').pop()} />\n          </small>{' '}\n        </Select.Option>\n      ))}\n    </Select>\n  );\n};\n\nexport default AssignTemplateSelect;\n","import React, { useMemo, useState } from 'react';\n\nimport CertificateSelector from '@/components/Certificate';\nimport { Col, Row, Typography } from 'antd';\nimport { FormattedMessage } from 'umi';\n\nimport PdfList from '@/components/Pdf/list';\n\nexport const CourseCertificateForm: React.FC<{\n  id: number | string;\n}> = ({ id }) => {\n  const { Text } = Typography;\n  const [templates, setTemplates] = useState<API.Certificate[]>([]);\n  const [currTemplates, setCurrTemplates] = useState<number[]>([]);\n\n  const pdfTemplates = useMemo(() => {\n    return currTemplates\n      .map((tplId) => templates.find((tpl) => tpl.id === tplId))\n      .filter((tpl) => tpl !== undefined)\n      .filter((tpl) => tpl && tpl.channel === 'EscolaLms\\\\TemplatesPdf\\\\Core\\\\PdfChannel');\n  }, [templates, currTemplates]);\n\n  return (\n    <div>\n      <Row align=\"middle\">\n        <Col span={3}>\n          <Text>\n            <FormattedMessage id=\"CertificateTemplates\" defaultMessage=\"Users\" />\n          </Text>\n        </Col>\n        <Col span={12}>\n          <CertificateSelector\n            onTemplates={(responseTemplates) => setTemplates(responseTemplates)}\n            assignable_class=\"EscolaLms\\Courses\\Models\\Course\"\n            assignable_id={Number(id)}\n            multiple\n            onChange={(values) => setCurrTemplates(values)}\n          />\n        </Col>\n      </Row>\n\n      {pdfTemplates.map(\n        (tpl) => tpl && <PdfList key={tpl.id} template_id={tpl.id} title={tpl.name} />,\n      )}\n    </div>\n  );\n};\n\nexport default CourseCertificateForm;\n","import AssignQuestionnary, { ModelTypes } from '@/components/AssignQuestionnary';\nimport CategoryCheckboxTree from '@/components/CategoryCheckboxTree';\nimport ConfirmModal from '@/components/ConfirmModal';\nimport CourseStatistics from '@/components/CourseStatistics';\nimport EditValidateModal from '@/components/EditValidateModal';\nimport JsonEditor from '@/components/JsonEditor';\nimport ProFormImageUpload from '@/components/ProFormImageUpload';\nimport ProFormVideoUpload from '@/components/ProFormVideoUpload';\nimport ProductWidget from '@/components/ProductWidget';\nimport ProgramForm from '@/components/ProgramForm/';\nimport { ProjectsList } from '@/components/ProjectsList';\nimport ScormSelector from '@/components/Scorm';\nimport TagsInput from '@/components/TagsInput';\nimport UserSelect from '@/components/UserSelect';\nimport UserSubmissions from '@/components/UsersSubmissions';\nimport WysiwygMarkdown from '@/components/WysiwygMarkdown';\nimport { useShowNotification } from '@/hooks/useMessage';\nimport useValidateFormEdit from '@/hooks/useValidateFormEdit';\nimport { CourseSuccessModal } from '@/pages/Courses/components/CourseSuccessModal';\nimport { createCourse, getCourse, updateCourse } from '@/services/escola-lms/course';\nimport { categoriesArrToIds, splitImagePath, tagsArrToIds } from '@/utils/utils';\nimport ProCard from '@ant-design/pro-card';\nimport ProForm, {\n  ProFormDatePicker,\n  ProFormDigit,\n  ProFormSelect,\n  ProFormSwitch,\n  ProFormText,\n} from '@ant-design/pro-form';\nimport { PageContainer } from '@ant-design/pro-layout';\nimport { Alert, Button, Col, Row, Spin } from 'antd';\nimport { isAfter, isBefore } from 'date-fns';\nimport { useEffect, useMemo, useState } from 'react';\nimport {\n  FormattedMessage,\n  getAllLocales,\n  getLocale,\n  history,\n  useAccess,\n  useIntl,\n  useModel,\n  useParams,\n} from 'umi';\nimport CourseAccess from './components/CourseAccess';\nimport CourseCertificateForm from './components/CourseCertificateForm';\n\nenum TabNames {\n  ATTRIBUTES = 'attributes',\n  PRODUCT = 'product',\n  MEDIA = 'media',\n  USER_SUBMISSION = 'user_submission',\n  CATEGORIES = 'categories',\n  PROGRAM = 'program',\n  SCORM = 'scorm',\n  ACCESS = 'access',\n  CERTIFICATES = 'certificates',\n  QUESTIONNAIRES = 'questionnaires',\n  STATISTICS = 'statistics',\n  USER_PROJECTS = 'user_projects',\n}\n\nexport default () => {\n  const params = useParams<{ course?: string; tab?: string }>();\n  const intl = useIntl();\n  const { course, tab = TabNames.ATTRIBUTES } = params;\n  const isNew = course === 'new';\n  const access = useAccess();\n  const [data, setData] = useState<Partial<API.Course>>();\n  const { manageCourseEdit, setManageCourseEdit, validateCourseEdit } = useValidateFormEdit();\n  const [fromDateValidation, setFromDateValidation] = useState<Date | undefined | null>(null);\n  const [toDateValidation, setToDateValidation] = useState<Date | undefined | null>(null);\n  const [manageSuccessModal, setManageSuccessModal] = useState({\n    showModal: false,\n    courseId: 0,\n  });\n  const [isFirstTimeEdit, setIsFirstTimeEdit] = useState(true);\n  const { showNotification } = useShowNotification();\n  const locales: string[] = getAllLocales() || [];\n\n  const { setInitialState, initialState } = useModel('@@initialState');\n  const [form] = ProForm.useForm();\n\n  const showPublicSwitch =\n    initialState?.config?.find((item) => item.key === 'showInCourseAdditionalSettings-public')\n      ?.data ?? false;\n\n  const tabsToHide: Record<string, boolean> =\n    initialState?.config\n      ?.filter((item) => item.key.includes('hideInCourseTabs'))\n      ?.reduce((acc: Record<string, boolean>, { key, data: settingValue }) => {\n        acc[key.split('-')[1]] = settingValue;\n        return acc;\n      }, {}) ?? {};\n\n  useEffect(() => {\n    if (tab === TabNames.ATTRIBUTES && data && isFirstTimeEdit) {\n      validateCourseEdit(data);\n      setIsFirstTimeEdit(false);\n    }\n  }, [data, tab, isFirstTimeEdit]);\n\n  useEffect(() => {\n    if (course === 'new') {\n      setData({\n        title: 'new',\n      });\n      return;\n    }\n\n    const fetch = async () => {\n      const response = await getCourse(Number(course));\n\n      if (response.success) {\n        setData({\n          ...response.data,\n          categories: response.data.categories?.map(categoriesArrToIds),\n          tags: response.data.tags?.map(tagsArrToIds),\n          summary: response.data.summary || '',\n        });\n\n        setFromDateValidation(response.data.active_from);\n        setToDateValidation(response.data.active_to);\n      }\n    };\n    fetch();\n  }, [course]);\n\n  const formProps = useMemo(\n    () => ({\n      onValuesChange: (values: API.Course) => {\n        setManageCourseEdit({\n          ...manageCourseEdit,\n          valuesChanged: true,\n        });\n\n        if (values.active_from) {\n          setFromDateValidation(values.active_from);\n        }\n\n        if (values.active_to) {\n          setToDateValidation(values.active_to);\n        }\n        return values.title && setData({ title: values.title });\n      },\n      onFinish: async (values: API.Course) => {\n        if (manageCourseEdit.disableEdit) {\n          setManageCourseEdit({\n            showModal: true,\n            disableEdit: true,\n            clicked: false,\n          });\n          return;\n        }\n\n        const postData = {\n          ...values,\n          active_from: values.active_from || data?.active_from || null,\n          active_to: values.active_to || data?.active_to || null,\n          authors:\n            values.authors &&\n            values.authors.map((author) => (typeof author === 'object' ? author.id : author)),\n          scorm_sco_id: values.scorm_sco_id ? values.scorm_sco_id : null,\n          image_url: data && data.image_url,\n          image_path: data && data.image_url && splitImagePath(data.image_url),\n          video_url: data && data.video_url,\n          video_path: data && data.video_url && splitImagePath(data.video_url),\n          poster_url: data && data.poster_url,\n          poster_path: data && data.poster_url && splitImagePath(data.poster_url),\n          hours_to_complete: values.hours_to_complete || null,\n        };\n\n        let response: API.DefaultResponse<API.Course>;\n        if (course === 'new') {\n          response = await createCourse(postData);\n          if (response.success && response.data.id) {\n            setManageSuccessModal({\n              showModal: true,\n              courseId: response.data.id,\n            });\n          }\n        } else {\n          response = await updateCourse(Number(course), postData);\n        }\n\n        showNotification(response);\n\n        setManageCourseEdit({\n          ...manageCourseEdit,\n          showConfirmModal: false,\n          loading: false,\n          valuesChanged: false,\n        });\n      },\n      initialValues: data,\n      validate: true,\n      form,\n    }),\n    [course, data, manageCourseEdit, form],\n  );\n\n  const currentLocales = useMemo(() => {\n    const l = locales\n      .map((locale) => locale.split('-')[0])\n      .reduce((a, v) => ({ ...a, [v]: v }), {});\n\n    const additionalLocales = JSON.parse(\n      initialState?.config?.find((e) => e.key === 'locales')?.value || '{}',\n    );\n\n    if (additionalLocales) {\n      return { ...l, ...additionalLocales };\n    }\n    return l;\n  }, [locales]);\n\n  if (!data) {\n    return <Spin />;\n  }\n\n  return (\n    <PageContainer\n      title={\n        <>\n          <FormattedMessage id={data.title ? 'course' : 'new_course'} />\n          {', '}\n          <FormattedMessage id={tab} />\n        </>\n      }\n      header={{\n        breadcrumb: {\n          routes: [\n            {\n              path: 'courses/list',\n              breadcrumbName: intl.formatMessage({\n                id: 'menu.Courses',\n              }),\n            },\n            {\n              path: String(course),\n              breadcrumbName: intl.formatMessage({\n                id: 'form',\n              }),\n            },\n            {\n              path: '/',\n              breadcrumbName: String(data.title),\n            },\n            {\n              path: String(tab),\n              breadcrumbName: intl.formatMessage({ id: tab, defaultMessage: String(tab) }),\n            },\n          ],\n        },\n      }}\n    >\n      <ProCard\n        bodyStyle={{ padding: '24px' }}\n        tabs={{\n          type: 'card',\n          activeKey: tab,\n          onChange: (key) => {\n            setInitialState({\n              ...initialState,\n              collapsed: key === 'program',\n            });\n            if (key !== TabNames.ATTRIBUTES && manageCourseEdit.valuesChanged) {\n              setManageCourseEdit({\n                ...manageCourseEdit,\n                showConfirmModal: true,\n              });\n            } else {\n              history.push(`/courses/list/${course}/${key}`);\n            }\n          },\n        }}\n      >\n        <ProCard.TabPane key={TabNames.ATTRIBUTES} tab={<FormattedMessage id=\"attributes\" />}>\n          {manageCourseEdit.disableEdit && (\n            <Alert\n              closable\n              style={{ marginBottom: '20px' }}\n              type=\"warning\"\n              message={\n                <FormattedMessage\n                  id=\"course_edit_warning_message\"\n                  defaultMessage=\"course_edit_warning_message\"\n                />\n              }\n              action={\n                <Button\n                  onClick={() =>\n                    setManageCourseEdit({\n                      showModal: true,\n                      disableEdit: true,\n                      clicked: true,\n                    })\n                  }\n                  type=\"primary\"\n                >\n                  <FormattedMessage\n                    id=\"questionnaire.submit\"\n                    defaultMessage=\"questionnaire.submit\"\n                  />\n                </Button>\n              }\n            />\n          )}\n          <EditValidateModal visible={manageCourseEdit.showModal} setManage={setManageCourseEdit} />\n          <CourseSuccessModal\n            visible={manageSuccessModal.showModal}\n            handleOk={() => {\n              history.push(`/courses/list/${manageSuccessModal.courseId}/program`);\n            }}\n            handleCancel={() =>\n              history.push(`/courses/list/${manageSuccessModal.courseId}/attributes`)\n            }\n          />\n          <ProForm {...formProps}>\n            <ProForm.Group label={<FormattedMessage id=\"description\" />}>\n              <ProFormText\n                width=\"xl\"\n                name=\"title\"\n                label={<FormattedMessage id=\"title\" />}\n                tooltip={<FormattedMessage id=\"courses.tooltips.title\" />}\n                placeholder={intl.formatMessage({\n                  id: 'title',\n                  defaultMessage: 'title',\n                })}\n                required\n                disabled={manageCourseEdit.disableEdit}\n              />\n              <ProFormText\n                width=\"xl\"\n                name=\"subtitle\"\n                label={<FormattedMessage id=\"subtitle\" />}\n                tooltip={<FormattedMessage id=\"courses.tooltips.subtitle\" />}\n                placeholder={intl.formatMessage({\n                  id: 'subtitle',\n                  defaultMessage: 'subtitle',\n                })}\n                disabled={manageCourseEdit.disableEdit}\n              />\n              <ProForm.Item\n                name=\"summary\"\n                label={<FormattedMessage id=\"summary\" />}\n                tooltip={<FormattedMessage id=\"courses.tooltips.summary\" />}\n                valuePropName=\"value\"\n                style={{\n                  width: 697,\n                }}\n              >\n                <WysiwygMarkdown directory={`course/${course}/wysiwyg`} />\n              </ProForm.Item>\n              <ProForm.Item\n                name=\"description\"\n                label={<FormattedMessage id=\"description\" />}\n                tooltip={<FormattedMessage id=\"courses.tooltips.description\" />}\n                valuePropName=\"value\"\n                style={{\n                  width: 697,\n                }}\n              >\n                <WysiwygMarkdown directory={`course/${course}/wysiwyg`} />\n              </ProForm.Item>\n            </ProForm.Group>\n            <ProForm.Group label={<FormattedMessage id=\"duration\" />}>\n              <ProFormDatePicker\n                width=\"md\"\n                name=\"active_from\"\n                label={<FormattedMessage id=\"active_from\" />}\n                tooltip={<FormattedMessage id=\"courses.tooltips.active_from\" />}\n                placeholder={intl.formatMessage({\n                  id: 'active_from',\n                  defaultMessage: 'active_from',\n                })}\n                rules={[\n                  {\n                    validator: (_, value) => {\n                      if (\n                        value &&\n                        toDateValidation &&\n                        isAfter(new Date(value), new Date(toDateValidation))\n                      ) {\n                        return Promise.reject(new Error(intl.formatMessage({ id: 'invalidDate' })));\n                      }\n\n                      return Promise.resolve();\n                    },\n                  },\n                ]}\n                disabled={manageCourseEdit.disableEdit}\n              />\n              <ProFormDatePicker\n                width=\"md\"\n                name=\"active_to\"\n                label={<FormattedMessage id=\"active_to\" />}\n                tooltip={<FormattedMessage id=\"courses.tooltips.active_to\" />}\n                placeholder={intl.formatMessage({\n                  id: 'active_to',\n                  defaultMessage: 'active_to',\n                })}\n                disabled={manageCourseEdit.disableEdit || !fromDateValidation}\n                rules={[\n                  {\n                    validator(_, value) {\n                      if (\n                        value &&\n                        fromDateValidation &&\n                        isBefore(new Date(value), new Date(fromDateValidation))\n                      ) {\n                        return Promise.reject(new Error(intl.formatMessage({ id: 'invalidDate' })));\n                      }\n\n                      return Promise.resolve();\n                    },\n                  },\n                ]}\n              />\n              <ProFormText\n                width=\"md\"\n                name=\"duration\"\n                label={<FormattedMessage id=\"duration\" />}\n                tooltip={<FormattedMessage id=\"courses.tooltips.duration\" />}\n                placeholder={intl.formatMessage({\n                  id: 'duration',\n                  defaultMessage: 'duration',\n                })}\n                disabled={manageCourseEdit.disableEdit}\n              />\n\n              <ProFormDigit\n                width=\"md\"\n                name=\"hours_to_complete\"\n                label={<FormattedMessage id=\"hours_to_complete\" />}\n                tooltip={<FormattedMessage id=\"hours_to_complete\" />}\n                placeholder={intl.formatMessage({\n                  id: 'hours_to_complete',\n                  defaultMessage: 'hours_to_complete',\n                })}\n                disabled={manageCourseEdit.disableEdit}\n              />\n            </ProForm.Group>\n            <ProForm.Group label={<FormattedMessage id=\"additional\" />}>\n              {showPublicSwitch && (\n                <ProFormSwitch\n                  width=\"xs\"\n                  name=\"public\"\n                  label={<FormattedMessage id=\"public_label\" />}\n                  tooltip={<FormattedMessage id=\"public_tooltip\" />}\n                  placeholder={intl.formatMessage({\n                    id: 'public',\n                    defaultMessage: 'public',\n                  })}\n                />\n              )}\n              <ProFormText\n                width=\"xs\"\n                name=\"level\"\n                label={<FormattedMessage id=\"level\" />}\n                tooltip={<FormattedMessage id=\"courses.tooltips.level\" />}\n                placeholder={intl.formatMessage({\n                  id: 'level',\n                  defaultMessage: 'level',\n                })}\n              />\n\n              <ProFormSelect\n                name=\"language\"\n                width=\"xs\"\n                label={<FormattedMessage id=\"language\" />}\n                placeholder={intl.formatMessage({\n                  id: 'language',\n                  defaultMessage: 'language',\n                })}\n                valueEnum={currentLocales}\n                initialValue={getLocale().split('-')[0]}\n                disabled={manageCourseEdit.disableEdit}\n              />\n\n              <ProFormSelect\n                name=\"status\"\n                width=\"md\"\n                label={<FormattedMessage id=\"status\" />}\n                valueEnum={{\n                  draft: intl.formatMessage({\n                    id: 'draft',\n                    defaultMessage: 'draft',\n                  }),\n                  published: intl.formatMessage({\n                    id: 'published',\n                    defaultMessage: 'published',\n                  }),\n                  archived: intl.formatMessage({\n                    id: 'archived',\n                    defaultMessage: 'archived',\n                  }),\n                  published_unactivated: intl.formatMessage({\n                    id: 'published_unactivated',\n                    defaultMessage: 'published_unactivated',\n                  }),\n                }}\n                placeholder={intl.formatMessage({\n                  id: 'status',\n                })}\n                disabled={manageCourseEdit.disableEdit}\n                rules={[\n                  {\n                    required: true,\n                    message: <FormattedMessage id=\"select\" />,\n                    validator: (_, value) => {\n                      if (!value) {\n                        return Promise.reject(new Error(intl.formatMessage({ id: 'select' })));\n                      }\n                      return Promise.resolve();\n                    },\n                  },\n                ]}\n              />\n              <ProFormText\n                width=\"sm\"\n                name=\"target_group\"\n                label={<FormattedMessage id=\"target_group\" />}\n                tooltip={<FormattedMessage id=\"courses.tooltips.target_group\" />}\n                placeholder={intl.formatMessage({\n                  id: 'target_group',\n                  defaultMessage: 'target_group',\n                })}\n                disabled={manageCourseEdit.disableEdit}\n              />\n              <ProForm.Item\n                name=\"authors\"\n                label={<FormattedMessage id=\"author_tutor\" />}\n                valuePropName=\"value\"\n              >\n                <UserSelect multiple />\n              </ProForm.Item>\n              {/* TODO: #1032 remove it if you are sure it is not needed on the backend */}\n              {/* <ProFormCheckbox\n                width=\"sm\"\n                name=\"purchasable\"\n                label={<FormattedMessage id=\"purchasable\" />}\n                tooltip={<FormattedMessage id=\"purchasable\" />}\n                placeholder={intl.formatMessage({\n                  id: 'purchasable',\n                  defaultMessage: 'purchasable',\n                })}\n                disabled={manageCourseEdit.disableEdit}\n              /> */}\n              {/* TODO: #1033 remove it if you are sure it is not needed on the backend */}\n              {/* <ProFormCheckbox\n                width=\"sm\"\n                name=\"findable\"\n                label={<FormattedMessage id=\"findable\" />}\n                tooltip={<FormattedMessage id=\"findable\" />}\n                placeholder={intl.formatMessage({\n                  id: 'findable',\n                  defaultMessage: 'findable',\n                })}\n                disabled={manageCourseEdit.disableEdit}\n              /> */}\n            </ProForm.Group>\n            <ProForm.Item\n              name=\"fields\"\n              label={<FormattedMessage id=\"course_fields\" />}\n              valuePropName=\"value\"\n            >\n              <JsonEditor />\n            </ProForm.Item>\n          </ProForm>\n        </ProCard.TabPane>\n        {!isNew && access.salesPermission && (\n          <ProCard.TabPane\n            key={TabNames.PRODUCT}\n            tab={<FormattedMessage id=\"product\" />}\n            disabled={manageCourseEdit.disableEdit}\n          >\n            {course && (\n              <ProductWidget\n                productable={{\n                  class_type: 'App\\\\Models\\\\Course',\n                  class_id: course,\n                  name: String(data.title),\n                  quantity: 1,\n                }}\n              />\n            )}\n          </ProCard.TabPane>\n        )}\n        {!isNew && (\n          <ProCard.TabPane\n            key={TabNames.MEDIA}\n            tab={<FormattedMessage id=\"media\" />}\n            disabled={manageCourseEdit.disableEdit}\n          >\n            <ProForm {...formProps} layout=\"horizontal\">\n              <Row>\n                <Col span={24}>\n                  <ProFormImageUpload\n                    folder={`course/${course}`}\n                    title=\"image\"\n                    action={`/api/admin/courses/${course}`}\n                    src_name=\"image_url\"\n                    form_name=\"image\"\n                    getUploadedSrcField={(info) => info.file.response.data.image_url}\n                    setPath={(removedPath) =>\n                      setData((prevState) => ({\n                        ...prevState,\n                        ...removedPath,\n                      }))\n                    }\n                    hideLabel\n                  />\n                </Col>\n                <Col span={24}>\n                  <ProFormVideoUpload\n                    folder={`course/${course}`}\n                    action={`/api/admin/courses/${course}`}\n                    src_name=\"video_url\"\n                    form_name=\"video\"\n                    getUploadedSrcField={(info) => info.file.response.data.video_url}\n                    setPath={(removedPath) =>\n                      setData((prevState) => ({\n                        ...prevState,\n                        ...removedPath,\n                      }))\n                    }\n                    hideLabel\n                  />\n                </Col>\n                <Col span={24}>\n                  <ProFormImageUpload\n                    folder={`course/${course}`}\n                    title=\"poster\"\n                    action={`/api/admin/courses/${course}`}\n                    src_name=\"poster_url\"\n                    form_name=\"poster\"\n                    getUploadedSrcField={(info) => info.file.response.data.poster_url}\n                    setPath={(removedPath) =>\n                      setData((prevState) => ({\n                        ...prevState,\n                        ...removedPath,\n                      }))\n                    }\n                    hideLabel\n                  />\n                </Col>\n              </Row>\n            </ProForm>\n          </ProCard.TabPane>\n        )}\n        {!isNew && (\n          <ProCard.TabPane\n            key={TabNames.CATEGORIES}\n            tab={<FormattedMessage id=\"categories_tags\" />}\n            disabled={manageCourseEdit.disableEdit}\n          >\n            <ProForm {...formProps}>\n              <Row>\n                <Col span={12}>\n                  <ProForm.Item\n                    label={<FormattedMessage id=\"categories\" />}\n                    name=\"categories\"\n                    valuePropName=\"value\"\n                  >\n                    <CategoryCheckboxTree />\n                  </ProForm.Item>\n                </Col>\n                <Col span={12}>\n                  <ProForm.Item\n                    label={<FormattedMessage id=\"tags\" />}\n                    name=\"tags\"\n                    valuePropName=\"value\"\n                  >\n                    <TagsInput />\n                  </ProForm.Item>\n                </Col>\n              </Row>\n            </ProForm>\n          </ProCard.TabPane>\n        )}\n        {!isNew && (\n          <ProCard.TabPane\n            className=\"program\"\n            key={TabNames.PROGRAM}\n            tab={<FormattedMessage id=\"program\" />}\n            disabled={manageCourseEdit.disableEdit}\n            cardProps={{\n              bodyStyle: {\n                padding: 0,\n              },\n            }}\n          >\n            {course && <ProgramForm id={course} />}\n          </ProCard.TabPane>\n        )}\n        {!isNew && access.scormListPermission && (\n          <ProCard.TabPane\n            key={TabNames.SCORM}\n            tab={<FormattedMessage id=\"scorm\" />}\n            disabled={manageCourseEdit.disableEdit}\n          >\n            <ProForm {...formProps}>\n              <ProForm.Item label=\"Scorm\" name=\"scorm_sco_id\" valuePropName=\"value\">\n                <ScormSelector />\n              </ProForm.Item>\n            </ProForm>\n          </ProCard.TabPane>\n        )}\n        {!isNew && (\n          <ProCard.TabPane\n            key={TabNames.ACCESS}\n            tab={<FormattedMessage id=\"access\" />}\n            disabled={manageCourseEdit.disableEdit}\n          >\n            {course && <CourseAccess id={course} />}\n          </ProCard.TabPane>\n        )}\n        {!isNew && access.certificatesPermission && (\n          <ProCard.TabPane\n            key={TabNames.CERTIFICATES}\n            tab={<FormattedMessage id=\"certificates\" />}\n            disabled={manageCourseEdit.disableEdit}\n          >\n            {course && <CourseCertificateForm id={course} />}\n          </ProCard.TabPane>\n        )}\n\n        {!isNew && access.questionnaireListPermission && (\n          <ProCard.TabPane\n            key={TabNames.QUESTIONNAIRES}\n            tab={<FormattedMessage id=\"questionnaires\" />}\n            disabled={manageCourseEdit.disableEdit}\n          >\n            {course && <AssignQuestionnary modelType={ModelTypes.COURSE} id={Number(course)} />}\n          </ProCard.TabPane>\n        )}\n\n        {!isNew && !tabsToHide.statistics && (\n          <ProCard.TabPane\n            key={TabNames.STATISTICS}\n            tab={<FormattedMessage id=\"statistics\" />}\n            disabled={manageCourseEdit.disableEdit}\n          >\n            {course && <CourseStatistics courseId={course} />}\n          </ProCard.TabPane>\n        )}\n        {!isNew && !tabsToHide.user_submission && (\n          <ProCard.TabPane\n            key={TabNames.USER_SUBMISSION}\n            tab={<FormattedMessage id=\"user_submission\" />}\n            disabled={manageCourseEdit.disableEdit}\n          >\n            {course && <UserSubmissions id={Number(course)} type=\"App\\Models\\Course\" />}\n          </ProCard.TabPane>\n        )}\n\n        {!isNew && !tabsToHide.user_projects && (\n          <ProCard.TabPane\n            key={TabNames.USER_PROJECTS}\n            tab={<FormattedMessage id=\"user_projects\" />}\n          >\n            <ProjectsList courseId={Number(course)} />\n          </ProCard.TabPane>\n        )}\n      </ProCard>\n      {/* CONFIRM MODAL COMPONENT */}\n      <ConfirmModal\n        open={!!manageCourseEdit.showConfirmModal}\n        onOk={() => {\n          setManageCourseEdit({\n            ...manageCourseEdit,\n            loading: true,\n          });\n          form.submit();\n        }}\n        onCancel={() => {\n          setManageCourseEdit({\n            ...manageCourseEdit,\n            showConfirmModal: false,\n          });\n        }}\n        loading={!!manageCourseEdit.loading}\n      />\n    </PageContainer>\n  );\n};\n","import ProForm, {\n  ModalForm,\n  ProFormCheckbox,\n  ProFormDigit,\n  ProFormRadio,\n  ProFormSwitch,\n  ProFormText,\n  ProFormTextArea,\n} from '@ant-design/pro-form';\nimport { AutoComplete, Button, Form, Input } from 'antd';\nimport React, { useCallback, useEffect, useState } from 'react';\n\nimport { setting } from '@/services/escola-lms/settings';\nimport { FormattedMessage, useIntl } from 'umi';\n\nimport FilesBrowser from '@/components/FilesBrowser';\nimport WysiwygMarkdown from '@/components/WysiwygMarkdown';\nimport { CheckOutlined, CloseOutlined } from '@ant-design/icons';\nimport ReactJson from 'react-json-view';\n\nexport const FilesSelector: React.FC<{\n  value?: string;\n  onChange?: (value: string) => void;\n  type?: 'file' | 'image';\n}> = ({ value, onChange, type = 'file' }) => {\n  const [showBrowser, setShowBrowser] = useState<boolean>(false);\n\n  return (\n    <React.Fragment>\n      <ProForm.Group>\n        <Input value={value} readOnly />\n        <Button size=\"small\" type=\"primary\" onClick={() => setShowBrowser(!showBrowser)}>\n          toggle {type} browser\n        </Button>\n      </ProForm.Group>\n      {showBrowser && (\n        <FilesBrowser onFile={(file, dir) => onChange && onChange(`${dir}/${file.name}`)} />\n      )}\n    </React.Fragment>\n  );\n};\n\nexport const SettingsModalForm: React.FC<{\n  id?: number | Partial<API.Setting> | false;\n  visible: number | boolean | Partial<API.Setting>;\n  onVisibleChange: (visible: boolean) => void;\n  onFinish: (formData: API.Setting) => Promise<boolean | void>;\n  groups: string[];\n  initialData?: Partial<API.Setting>;\n}> = (props) => {\n  const intl = useIntl();\n\n  const { visible, onVisibleChange, onFinish, id, initialData, groups } = props;\n\n  const [form] = Form.useForm();\n\n  const isNew = !id || id === -1;\n\n  const [type, setType] = useState<API.SettingType>('text');\n\n  const isGlobalGroup = useCallback(() => {\n    return !!(form.getFieldValue('group') === 'global' || initialData);\n  }, [form, initialData]);\n\n  const [selectedGroup, setSelectedGroup] = useState<string>('');\n\n  useEffect(() => {\n    // if id id && id !== -1\n\n    if (typeof id === 'object') {\n      form.setFieldsValue(id);\n      setType(id.type ?? 'text');\n    } else if (id && id !== -1) {\n      setting(Number(id)).then((response) => {\n        if (response.success) {\n          form.setFieldsValue(response.data);\n          setType(response.data.type);\n          setSelectedGroup(response.data.group);\n        }\n      });\n    } else {\n      form.resetFields();\n      setType('text');\n    }\n  }, [id, form, initialData]);\n\n  const onValuesChange = useCallback(\n    (values: API.Setting) => {\n      if (values.type && values.type !== type) {\n        setType(values.type);\n      }\n    },\n    [type],\n  );\n\n  return (\n    <ModalForm\n      form={form}\n      title={intl.formatMessage({\n        id: id ? 'editSetting' : 'newSetting',\n        defaultMessage: id ? 'editSetting' : 'newSetting',\n      })}\n      width=\"60vw\"\n      visible={!!visible}\n      onVisibleChange={onVisibleChange}\n      onFinish={onFinish}\n      onValuesChange={onValuesChange}\n    >\n      <ProForm.Group>\n        {initialData ? (\n          <ProFormText\n            label={<FormattedMessage id=\"group\" defaultMessage=\"group\" />}\n            rules={[\n              {\n                required: true,\n              },\n            ]}\n            width=\"md\"\n            name=\"group\"\n            disabled={isGlobalGroup()}\n          />\n        ) : (\n          <ProForm.Item label={<FormattedMessage id=\"group\" defaultMessage=\"group\" />} name=\"group\">\n            <AutoComplete\n              style={{\n                width: '300px',\n              }}\n              autoFocus={true}\n              value={selectedGroup}\n              onChange={(value) => setSelectedGroup(value)}\n              filterOption={(inputValue, option) =>\n                option?.children?.toString().toLowerCase().indexOf(inputValue.toLowerCase()) !== -1\n              }\n            >\n              {groups.map((group) => (\n                <AutoComplete.Option key={group} value={group}>\n                  {group}\n                </AutoComplete.Option>\n              ))}\n            </AutoComplete>\n          </ProForm.Item>\n        )}\n        <ProFormText\n          label={<FormattedMessage id=\"key\" defaultMessage=\"key\" />}\n          rules={[\n            {\n              required: true,\n            },\n          ]}\n          width=\"md\"\n          name=\"key\"\n          disabled={isGlobalGroup()}\n        />\n      </ProForm.Group>\n      <ProForm.Group>\n        <ProFormSwitch\n          name=\"enumerable\"\n          disabled={isGlobalGroup()}\n          label={<FormattedMessage id=\"enumerable\" defaultMessage=\"enumerable\" />}\n        />\n        <ProFormSwitch\n          name=\"public\"\n          disabled={isGlobalGroup()}\n          label={<FormattedMessage id=\"public\" defaultMessage=\"public\" />}\n        />\n      </ProForm.Group>\n      <ProForm.Group>\n        <ProFormRadio.Group\n          disabled={!!(!isNew || initialData)}\n          name=\"type\"\n          label={<FormattedMessage id=\"type\" />}\n          options={[\n            {\n              label: 'text',\n              value: 'text',\n            },\n            {\n              label: 'markdown',\n              value: 'markdown',\n            },\n            {\n              label: 'json',\n              value: 'json',\n            },\n            {\n              label: 'file',\n              value: 'file',\n            },\n            {\n              label: 'image',\n              value: 'image',\n            },\n            {\n              label: 'boolean',\n              value: 'boolean',\n            },\n            {\n              label: 'number',\n              value: 'number',\n            },\n            {\n              label: 'array',\n              value: 'array',\n            },\n          ]}\n        />\n      </ProForm.Group>\n      <div>\n        {type === 'text' && (\n          <ProFormText width=\"lg\" name=\"value\" label={<FormattedMessage id=\"value\" />} />\n        )}\n        {type === 'json' && (\n          <>\n            <ProFormTextArea\n              width=\"lg\"\n              name=\"value\"\n              label={<FormattedMessage id=\"value\" />}\n              tooltip={`${intl.formatMessage({\n                id: 'example_json',\n              })}: {\"name\":\"John\", \"age\":30, \"city\":[\"New York\",\"Warsaw\"]}`}\n            />\n            <ProForm.Item noStyle shouldUpdate>\n              {() => {\n                try {\n                  return <ReactJson src={JSON.parse(form.getFieldValue('value'))} />;\n                } catch {\n                  return <ReactJson src={JSON.parse(`{ \"error\": \"cannot parse this json\" }`)} />;\n                }\n              }}\n            </ProForm.Item>\n          </>\n        )}\n\n        {(type === 'file' || type === 'image') && (\n          <ProForm.Item\n            name=\"value\"\n            label=\"value\"\n            tooltip=\"select file from current repository or upload new one\"\n            valuePropName=\"value\"\n          >\n            <FilesSelector type={type} />\n          </ProForm.Item>\n        )}\n\n        {type === 'markdown' && (\n          <ProForm.Item\n            name=\"value\"\n            label=\"value\"\n            tooltip=\"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.\"\n            valuePropName=\"value\"\n          >\n            <WysiwygMarkdown directory={`settings/wysiwyg`} />\n          </ProForm.Item>\n        )}\n\n        {type === 'boolean' ? (\n          <ProFormSwitch\n            name=\"value\"\n            label={<FormattedMessage id=\"value\" />}\n            checkedChildren={<CheckOutlined />}\n            unCheckedChildren={<CloseOutlined />}\n          />\n        ) : (\n          <ProForm.Item noStyle hidden>\n            <ProFormCheckbox name=\"data\" valuePropName=\"data\" />\n          </ProForm.Item>\n        )}\n\n        {type === 'number' && <ProFormDigit name=\"data\" label={<FormattedMessage id=\"value\" />} />}\n\n        {type === 'array' && (\n          <>\n            <ProFormTextArea\n              width=\"lg\"\n              name=\"value\"\n              label={<FormattedMessage id=\"value\" />}\n              tooltip={`${intl.formatMessage({\n                id: 'example_json',\n              })}: ['tutor', 'student']`}\n            />\n            <ProForm.Item noStyle shouldUpdate>\n              {() => {\n                try {\n                  return <ReactJson src={JSON.parse(form.getFieldValue('value'))} />;\n                } catch {\n                  return <ReactJson src={JSON.parse(`{ \"error\": \"cannot parse this json\" }`)} />;\n                }\n              }}\n            </ProForm.Item>\n          </>\n        )}\n      </div>\n    </ModalForm>\n  );\n};\n\nexport default SettingsModalForm;\n","import { TopicType } from '@/services/escola-lms/enums';\nimport { PlusOutlined } from '@ant-design/icons';\nimport type { ActionType, ProColumns } from '@ant-design/pro-table';\nimport ProTable from '@ant-design/pro-table';\nimport { Button, Popconfirm, Tooltip, message } from 'antd';\nimport React, { Fragment, useEffect, useRef, useState } from 'react';\nimport type { IntlShape } from 'react-intl';\nimport { FormattedMessage, useIntl, useModel } from 'umi';\n\nimport {\n  createSettings,\n  deleteSettings,\n  settings,\n  updateSettings,\n} from '@/services/escola-lms/settings';\n\nimport { DeleteOutlined, EditOutlined, InfoCircleOutlined } from '@ant-design/icons';\nimport SettingsModalForm from './components/ModalForm';\n\nimport { getRoutes } from '@@/core/route';\n\nconst handleUpdate = async (intl: IntlShape, fields: API.Setting, id?: number) => {\n  const hide = message.loading(\n    intl.formatMessage({\n      id: 'loading',\n    }),\n  );\n  try {\n    const updatedSettings = await (id && id !== -1\n      ? updateSettings(id, { ...fields })\n      : createSettings({ ...fields }));\n\n    hide();\n    message.success(\n      intl.formatMessage({\n        id: 'success',\n      }),\n    );\n\n    return {\n      success: true,\n      updatedSettings,\n    };\n  } catch (error) {\n    hide();\n    message.error(\n      intl.formatMessage({\n        id: 'error',\n      }),\n    );\n    return { success: false, updateSettings: null };\n  }\n};\n\nconst handleRemove = async (intl: IntlShape, id: number) => {\n  const hide = message.loading(\n    intl.formatMessage({\n      id: 'loading',\n    }),\n  );\n  try {\n    await deleteSettings(id);\n    hide();\n    message.success(\n      intl.formatMessage({\n        id: 'success',\n      }),\n    );\n    return true;\n  } catch (error) {\n    hide();\n    message.error(\n      intl.formatMessage({\n        id: 'error',\n      }),\n    );\n    return false;\n  }\n};\n\ntype InitialDataRecords = Record<\n  'logo' | 'frontURL' | 'maxLessonsNestingInProgram' | 'minTopicNestingInProgram' | string,\n  API.Setting\n>;\n\ntype Route = {\n  path: string;\n  layout: boolean;\n  hideInMenu: boolean;\n  routes: Route[];\n} & any;\n\nconst snakeToCamel = (str: string) =>\n  str.toLowerCase().replace(/(_\\w)/g, (m) => m.toUpperCase().substr(1));\n\n// const flatRoutes = (routes: Route[]): Route[] => {\n//   return (\n//     routes.reduce((acc, curr) => {\n//       return [...acc, ...(curr.routes ? flatRoutes(curr.routes) : []), curr];\n//     }, [] as Route[]) as Route[]\n//   ).filter((route) => route.layout !== false && route.hideInMenu !== true);\n// };\n\nconst courseEditTabsKeys = ['statistics', 'user_submission', 'user_projects'];\nconst courseEditAdditionalSettingsKeys = ['public'];\nconst templateTabsKeys = ['email', 'sms'];\n\nexport const pathToSettingName = (path: string) =>\n  `hideInMenu-${snakeToCamel(path.split('/').join('_'))}`;\n\nexport const topicTypeToSettingName = (type: string) => `disableTopicType-${type}`;\n\nconst booleanSettings = (\n  [\n    ...Object.keys(TopicType).map((type) => ({\n      key: topicTypeToSettingName(type),\n      group: 'global',\n      value: 'false',\n      public: true,\n      enumerable: true,\n      sort: 1,\n      type: 'boolean',\n      data: false,\n    })),\n    /*\n  ...flatRoutes(getRoutes())\n    .filter((route) => route.path && route.path !== '/')\n    .map((route) => ({\n      path: route.path,\n      key: pathToSettingName(route.path),\n      group: 'global',\n      value: 'false',\n      public: true,\n      enumerable: true,\n      sort: 1,\n      type: 'boolean',\n      data: false,\n    })),\n    */\n    ...['ECommerce', 'Certificates'].map((feature) => ({\n      key: `disable-${feature}`,\n      group: 'global',\n      value: 'false',\n      public: true,\n      enumerable: true,\n      sort: 1,\n      type: 'boolean',\n      data: false,\n    })),\n    ...courseEditAdditionalSettingsKeys.map((key) => ({\n      key: `showInCourseAdditionalSettings-${key}`,\n      group: 'global',\n      value: 'false',\n      public: true,\n      enumerable: true,\n      sort: 1,\n      type: 'boolean',\n      data: false,\n    })),\n    ...courseEditTabsKeys.map((key) => ({\n      key: `hideInCourseTabs-${key}`,\n      group: 'global',\n      value: 'false',\n      public: true,\n      enumerable: true,\n      sort: 1,\n      type: 'boolean',\n      data: false,\n    })),\n    ...templateTabsKeys.map((key) => ({\n      key: `hideTemplateTab-${key}`,\n      group: 'global',\n      value: 'false',\n      public: true,\n      enumerable: true,\n      sort: 1,\n      type: 'boolean',\n      data: false,\n    })),\n  ] as API.Setting[]\n).reduce((acc, curr, index) => {\n  acc[curr.key as string] = { ...curr, id: -100 * index };\n  return acc;\n}, {} as InitialDataRecords);\n\nconst preInitialData: InitialDataRecords = {\n  logo: {\n    id: -1,\n    key: 'logo',\n    group: 'global',\n    value: '',\n    public: true,\n    enumerable: true,\n    sort: 0,\n    type: 'image',\n    data: 'EscolaLMS',\n  },\n  frontURL: {\n    id: -2,\n    key: 'frontURL',\n    group: 'global',\n    value: '',\n    public: true,\n    enumerable: true,\n    sort: 0,\n    type: 'text',\n    data: 'EscolaLMS',\n  },\n\n  maxLessonsNestingInProgram: {\n    id: -4,\n    key: 'maxLessonsNestingInProgram',\n    group: 'global',\n    value: '0',\n    public: true,\n    enumerable: true,\n    sort: 1,\n    type: 'number',\n    data: 0,\n  },\n\n  minTopicNestingInProgram: {\n    id: -5,\n    key: 'minTopicNestingInProgram',\n    group: 'global',\n    value: '0',\n    public: true,\n    enumerable: true,\n    sort: 1,\n    type: 'number',\n    data: 0,\n  },\n\n  companyName: {\n    id: -6,\n    key: 'companyName',\n    group: 'global',\n    value: 'Wellms',\n    public: true,\n    enumerable: true,\n    sort: 0,\n    type: 'text',\n    data: 'Wellms',\n  },\n  companyURL: {\n    id: -7,\n    key: 'companyURL',\n    group: 'global',\n    value: 'https://www.wellms.io/',\n    public: true,\n    enumerable: true,\n    sort: 0,\n    type: 'text',\n    data: 'https://www.wellms.io/',\n  },\n\n  logoLogin: {\n    id: -8,\n    key: 'logoLogin',\n    group: 'global',\n    value: '',\n    public: true,\n    enumerable: true,\n    sort: 0,\n    type: 'image',\n    data: 'EscolaLMS',\n  },\n  logoFooter: {\n    id: -9,\n    key: 'logoFooter',\n    group: 'global',\n    value: '',\n    public: true,\n    enumerable: true,\n    sort: 0,\n    type: 'image',\n    data: 'EscolaLMS',\n  },\n  footerFontColor: {\n    id: -10,\n    key: 'footerFontColor',\n    group: 'global',\n    value: '#00000072',\n    public: true,\n    enumerable: true,\n    sort: 0,\n    type: 'text',\n    data: 'EscolaLMS',\n  },\n  showLoginBackgroundImage: {\n    id: -11,\n    key: 'showLoginBackgroundImage',\n    group: 'global',\n    value: 'true',\n    public: true,\n    enumerable: true,\n    sort: 0,\n    type: 'boolean',\n    data: 'EscolaLMS',\n  },\n  loginHeaderBackgroundColor: {\n    id: -12,\n    key: 'loginHeaderBackgroundColor',\n    group: 'global',\n    value: '#f0f2f5',\n    public: true,\n    enumerable: true,\n    sort: 0,\n    type: 'text',\n    data: 'EscolaLMS',\n  },\n  loginHeaderFontColor: {\n    id: -13,\n    key: 'loginHeaderFontColor',\n    group: 'global',\n    value: '#000000D8',\n    public: true,\n    enumerable: true,\n    sort: 0,\n    type: 'text',\n    data: 'EscolaLMS',\n  },\n  loginFormBackgroundColor: {\n    id: -14,\n    key: 'loginFormBackgroundColor',\n    group: 'global',\n    value: '#f0f2f5',\n    public: true,\n    enumerable: true,\n    sort: 0,\n    type: 'text',\n    data: 'EscolaLMS',\n  },\n  contentBackgroundColor: {\n    id: -15,\n    key: 'contentBackgroundColor',\n    group: 'global',\n    value: '#f0f2f5',\n    public: true,\n    enumerable: true,\n    sort: 0,\n    type: 'text',\n    data: 'EscolaLMS',\n  },\n  technicalMaintenance: {\n    id: -16,\n    key: 'technicalMaintenance',\n    group: 'global',\n    value: 'false',\n    public: true,\n    enumerable: true,\n    sort: 0,\n    type: 'boolean',\n    data: 'EscolaLMS',\n  },\n  technicalMaintenanceText: {\n    id: -17,\n    key: 'technicalMaintenanceText',\n    group: 'global',\n    value: '',\n    public: true,\n    enumerable: true,\n    sort: 0,\n    type: 'text',\n    data: 'EscolaLMS',\n  },\n  ...booleanSettings,\n};\n\nconst isRoute = (route: any): route is Route => typeof route.path === 'string';\n\nconst TableList: React.FC = () => {\n  const [modalVisible, setModalVisible] = useState<number | Partial<API.Setting> | false>(false);\n  const actionRef = useRef<ActionType>();\n  const intl = useIntl();\n\n  const [initialData, setInitialData] = useState<InitialDataRecords>(preInitialData);\n\n  const { setInitialState, initialState } = useModel('@@initialState');\n\n  useEffect(() => {\n    getRoutes().then((routes) => {\n      //@ts-ignore\n      const hideInDataRecords: InitialDataRecords = Object.values(routes.routes)\n        .filter(isRoute)\n        .filter((route) => route.path && route.path !== '/' && route.layout !== false)\n        .map((route) => ({\n          path: route.path,\n          //@ts-ignore\n          key: pathToSettingName(route.path),\n          group: 'global',\n          value: 'false',\n          public: true,\n          enumerable: true,\n          sort: 1,\n          type: 'boolean',\n          data: false,\n        }));\n      setInitialData((prevInitialData) => ({\n        ...prevInitialData,\n        ...hideInDataRecords,\n      }));\n    });\n  }, []);\n\n  useEffect(() => {\n    if (actionRef.current) {\n      actionRef.current.reload();\n    }\n  }, [initialData]);\n\n  const columns: ProColumns<API.Setting>[] = [\n    {\n      title: <FormattedMessage id=\"key\" defaultMessage=\"key\" />,\n      dataIndex: 'key',\n      hideInSearch: true,\n      render: (_, record) => (\n        <Fragment>\n          <Tooltip title={<FormattedMessage id={`Settings.tooltip.${record.key}`} />}>\n            {record.key} <InfoCircleOutlined />\n          </Tooltip>\n        </Fragment>\n      ),\n    },\n    {\n      title: <FormattedMessage id=\"type\" defaultMessage=\"type\" />,\n      dataIndex: 'type',\n      hideInSearch: true,\n    },\n\n    {\n      title: <FormattedMessage id=\"value\" defaultMessage=\"value\" />,\n      dataIndex: 'value',\n      hideInForm: true,\n      hideInSearch: true,\n      render: (_, record) => record.value,\n    },\n    {\n      hideInSearch: true,\n      title: <FormattedMessage id=\"pages.searchTable.titleOption\" defaultMessage=\"操作\" />,\n      dataIndex: 'option',\n      valueType: 'option',\n      render: (_, record) => [\n        record.id > 0 ? (\n          <Tooltip key=\"edit\" title={<FormattedMessage id=\"edit\" defaultMessage=\"edit\" />}>\n            <Button\n              type=\"primary\"\n              icon={<EditOutlined />}\n              onClick={() => setModalVisible(record.id)}\n            />\n          </Tooltip>\n        ) : (\n          <Tooltip key=\"create\" title={<FormattedMessage id=\"create\" defaultMessage=\"create\" />}>\n            <Button\n              type=\"primary\"\n              icon={<PlusOutlined />}\n              onClick={() => {\n                setModalVisible(initialData[record.key] || -1);\n              }}\n            />\n          </Tooltip>\n        ),\n\n        <Popconfirm\n          key=\"delete\"\n          title={\n            <FormattedMessage\n              id=\"deleteQuestion\"\n              defaultMessage=\"Are you sure to delete this record?\"\n            />\n          }\n          onConfirm={async () => {\n            const success = await handleRemove(intl, record.id);\n            if (success) {\n              setModalVisible(false);\n              if (actionRef.current) {\n                actionRef.current.reload();\n              }\n            }\n          }}\n          okText={<FormattedMessage id=\"yes\" defaultMessage=\"Yes\" />}\n          cancelText={<FormattedMessage id=\"no\" defaultMessage=\"No\" />}\n        >\n          {record.id > 0 ? (\n            <Tooltip title={<FormattedMessage id=\"delete\" defaultMessage=\"delete\" />}>\n              <Button type=\"primary\" icon={<DeleteOutlined />} danger />\n            </Tooltip>\n          ) : null}\n        </Popconfirm>,\n      ],\n    },\n  ];\n\n  const updateConfigDynamically = (value: API.Setting) => {\n    if (!value) return;\n    if (!initialState?.config?.length && value) {\n      setInitialState({ ...initialState, config: [value] });\n    }\n    if (!initialState?.config) return;\n    const config = initialState?.config.map((setting) => {\n      if (setting.key === value.key) {\n        return {\n          ...setting,\n          ...value,\n        };\n      }\n      return setting;\n    });\n    setInitialState({ ...initialState, config });\n  };\n\n  return (\n    <React.Fragment>\n      <ProTable<API.Setting, API.PageParams & { group: string }>\n        headerTitle={intl.formatMessage({\n          id: 'menu.settings',\n        })}\n        search={false}\n        toolBarRender={false}\n        actionRef={actionRef}\n        rowKey=\"id\"\n        request={({ pageSize, current }) => {\n          return settings({\n            per_page: pageSize,\n            current,\n            group: 'global',\n          }).then((response) => {\n            if (response.success) {\n              const rows: API.Setting[] = [\n                ...Object.keys(initialData).map(\n                  (key) => response.data.find((item) => item.key === key) || initialData[key],\n                ),\n                ...response.data.filter((item) => !Object.keys(initialData).includes(item.key)),\n              ];\n\n              return {\n                data: rows,\n                total: rows.length,\n                success: true,\n              };\n            }\n            return [];\n          });\n        }}\n        columns={columns}\n      />\n\n      <SettingsModalForm\n        groups={[]}\n        id={modalVisible}\n        visible={modalVisible}\n        initialData={initialData}\n        onVisibleChange={(value) => {\n          return !value && setModalVisible(false);\n        }}\n        onFinish={async (value) => {\n          let fields = value as API.Setting;\n\n          if (fields.type === 'number') {\n            fields = { ...fields, value: String(fields.data) };\n          }\n\n          if (fields.type === 'boolean') {\n            fields = { ...fields, value: fields.data };\n          }\n\n          if (fields.type === 'array') {\n            fields = { ...fields, value: JSON.parse(fields.value) };\n          }\n\n          const { success, updatedSettings } = await handleUpdate(\n            intl,\n            fields,\n            Number(modalVisible),\n          );\n          if (success) {\n            if (updatedSettings?.success) updateConfigDynamically(updatedSettings.data);\n            setModalVisible(false);\n            if (actionRef.current) {\n              actionRef.current.reload();\n            }\n          }\n        }}\n      />\n    </React.Fragment>\n  );\n};\n\nexport default TableList;\n","import type { AxiosRequestConfig } from '@umijs/max';\nimport { request } from 'umi';\n\ndeclare const REACT_APP_API_URL: string;\n\n/**  GET /api/currentUser */\nexport async function files(\n  params: API.CourseParams & {\n    // query\n    directory: string;\n    page?: number;\n  },\n  options?: AxiosRequestConfig,\n) {\n  return request<API.FileList>('/api/admin/file/list', {\n    method: 'GET',\n    params,\n    ...(options || {}),\n  });\n}\n\nexport async function findFile(\n  params: API.CourseParams & {\n    directory: string;\n    name: string;\n    page?: number;\n  },\n  options?: AxiosRequestConfig,\n) {\n  return request<API.FileList>(`/api/admin/file/find`, {\n    method: 'GET',\n    params,\n    ...(options || {}),\n  });\n}\n\n/**  GET /api/currentUser */\nexport async function upload(file: File, directory: string, options?: AxiosRequestConfig) {\n  const formData = new FormData();\n  formData.append('file[]', file);\n  formData.append('target', directory);\n\n  return request<API.FileUpload>('/api/admin/file/upload', {\n    method: 'POST',\n    data: formData,\n    ...(options || {}),\n  });\n}\n\nexport const resizedImage = (path: string, width = 1000) =>\n  `${window.REACT_APP_API_URL || REACT_APP_API_URL}/api/images/img?path=${path}&w=${width}`;\n\n/**  GET /api/currentUser */\nexport async function remove(url: string, options?: AxiosRequestConfig) {\n  return request<API.FileList>('/api/admin/file/delete', {\n    method: 'DELETE',\n    data: {\n      url,\n    },\n    ...(options || {}),\n  });\n}\n","import type { AxiosRequestConfig } from '@umijs/max';\nimport { request } from 'umi';\n\nexport async function h5p(params: API.H5PListParams, options?: AxiosRequestConfig) {\n  return request<API.DefaultMetaResponse<API.H5PContentListItem>>(`/api/admin/hh5p/content`, {\n    method: 'GET',\n    params,\n    ...(options || {}),\n  });\n}\n\nexport async function getH5p(id: number, options?: AxiosRequestConfig) {\n  return request<API.DefaultResponse<API.H5PObject>>(`/api/admin/hh5p/content/${id}`, {\n    method: 'GET',\n    ...(options || {}),\n  });\n}\n\nexport const editorSettings = (\n  id?: string | number,\n  lang: string = 'en',\n  options?: AxiosRequestConfig,\n) => {\n  let url: string = id ? `/api/admin/hh5p/editor/${id}` : `/api/admin/hh5p/editor`;\n  url = lang ? `${url}?lang=${lang}` : url;\n  return request<API.DefaultResponse<API.H5PObject>>(url, {\n    method: 'GET',\n    ...(options || {}),\n  });\n};\n\nexport const contentSettings = (\n  id?: string | number,\n  lang: string = 'en',\n  options?: AxiosRequestConfig,\n) => {\n  let url: string = `/api/admin/hh5p/content/${id}`;\n  url = lang ? `${url}?lang=${lang}` : url;\n  return request<API.DefaultResponse<API.H5PObject>>(url, {\n    method: 'GET',\n    ...(options || {}),\n  });\n};\n\nexport async function updateContent(\n  body: any,\n  id?: number | string | undefined,\n  options?: AxiosRequestConfig,\n) {\n  return request<API.DefaultResponse<{ id: number }>>(\n    id ? `/api/admin/hh5p/content/${id}` : `/api/admin/hh5p/content`,\n    {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      data: body,\n      ...(options || {}),\n    },\n  );\n}\n\nexport async function removeH5P(id: number) {\n  return request<API.DefaultResponse<unknown>>(`/api/admin/hh5p/content/${id}`, {\n    method: 'DELETE',\n  });\n}\n\nexport async function allContent(options?: AxiosRequestConfig) {\n  return request<API.DefaultMetaResponse<API.H5PContentListItem>>(\n    '/api/admin/hh5p/content?per_page=0',\n    {\n      method: 'GET',\n      ...(options || {}),\n    },\n  );\n}\n","import type { AxiosRequestConfig } from '@umijs/max';\nimport { request } from 'umi';\n\nexport async function reports(\n  params: {\n    // query\n    metric: API.ReportType;\n    date?: string;\n    limit?: number;\n  },\n  options?: AxiosRequestConfig,\n) {\n  return request<API.ReportList>('/api/admin/reports/report', {\n    params,\n    method: 'GET',\n    /* useCache: true */ useCache: false,\n    ...(options || {}),\n  });\n}\n\n/* GET /api/admin/stats/course/:course_id/export */\nexport async function exportStatForCourse(\n  course_id: number,\n  params: API.ExportStatForCourseParams,\n  options?: AxiosRequestConfig,\n) {\n  return request<Blob | API.DefaultResponseError>(`/api/admin/stats/course/${course_id}/export`, {\n    params,\n    method: 'GET',\n    /* useCache: true */ useCache: false,\n    responseType: 'blob',\n    headers: {\n      accept: 'application/vnd.ms-excel',\n    },\n    ...(options || {}),\n  });\n}\n\n/* GET /api/admin/stats/topic/:topic_id/export */\nexport async function exportStatForTopic(\n  topic_id: number,\n  stat: API.TopicStatsKey,\n  options?: AxiosRequestConfig,\n) {\n  return request<Blob | API.DefaultResponseError>(`/api/admin/stats/topic/${topic_id}/export`, {\n    method: 'GET',\n    /* useCache: true */ useCache: false,\n    params: { stat },\n    responseType: 'blob',\n    headers: {\n      accept: 'application/vnd.ms-excel',\n    },\n    ...(options || {}),\n  });\n}\n","import type { AxiosRequestConfig } from '@umijs/max';\nimport { request } from 'umi';\n\n/**  GET /api/admin/users */\nexport async function scorms(\n  params: API.PageParams &\n    API.PaginationParams & {\n      search?: string;\n    },\n  options?: AxiosRequestConfig,\n) {\n  return request<API.ScormList>('/api/admin/scorm', {\n    params,\n    method: 'GET',\n    /* useCache: true */ useCache: false,\n    ...(options || {}),\n  });\n}\n\n/**  GET /api/scorm/scos */\nexport async function scormssco(\n  params: {\n    // query\n    current?: number;\n    pageSize?: number;\n    search?: string;\n  },\n  options?: AxiosRequestConfig,\n) {\n  return request<API.ScormScosList>('/api/admin/scorm/scos', {\n    params: {\n      ...params,\n      per_page: params.pageSize,\n      page: params.current,\n    },\n    method: 'GET',\n    /* useCache: true */ useCache: false,\n    ...(options || {}),\n  });\n}\n\nexport async function deleteScorm(id: number, options?: AxiosRequestConfig) {\n  return request<API.SCORM>(`/api/admin/scorm/${id}`, {\n    method: 'DELETE',\n    ...(options || {}),\n  });\n}\n"],"names":["ExportStatsButton","_ref","course_id","_ref$stat","stat","_useState","useState","_useState2","_slicedToArray","loading","setLoading","onClickFactory","useCallback","courseId","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","downloadLink","wrap","_context","prev","next","exportStatForCourse","sent","Blob","document","createElement","href","window","URL","createObjectURL","download","concat","body","appendChild","click","removeChild","t0","console","error","finish","stop","_jsxs","Button","type","onClick","children","_jsx","ExportOutlined","FormattedMessage","id","findH5PType","topic","topicable","content","contents","Object","values","library","UserProgress","topics","stats","showSeconds","setShowSeconds","columns","useMemo","title","dataIndex","render","TypeButtonDrawer","type_id","_toConsumableArray","map","_topic$topicable_type","topicable_type","split","pop","row","result","started_at","finished_at","Space","Tag","color","seconds","timeDisplay","React","dataSource","userStat","reduce","acc","find","userStatTopic","_objectSpread","_defineProperty","Number","email","Table","Row","justify","align","defaultMessage","Switch","checked","onChange","v","size","scroll","x","components","table","props","ScrollContainer","horizontal","style","maxWidth","hideScrollbars","UserCourseFinish","_ref2","attempts","text","format","Date","DATETIME_FORMAT","_ref3","courseAttempts","attempt","attemptCount","Array","isArray","length","UserCourseAttempts","_ref4","_useState3","_useState4","choosenUserEmail","setChoosenUserEmail","_useState5","_useState6","choosenAttempt","setChoosenAttempt","intl","useIntl","flatMap","userStats","_ref5","dates","datesValue","_ref6","date","seconds_total","config","xField","yField","seriesField","isStack","xAxis","label","autoHide","autoRotate","slider","start","end","position","layout","ProCard","Select","showSearch","value","newValue","placeholder","_ref7","Option","disabled","Set","filter","_ref8","_ref9","colSpan","overflow","minHeight","width","Column","tooltip","formatMessage","formatter","datum","minutes","Math","floor","name","data","_ref10","_ref11","isInteger","FilesBrowserActions","directory","onUploaded","Typography","Text","code","SecureUpload","url","target","onUpload","success","FilesBrowser","_ref2$defaultDirector","defaultDirectory","onFile","_ref2$hideDeleteBtn","hideDeleteBtn","_ref2$forceLoading","forceLoading","_ref2$hideAddBtn","hideAddBtn","current_page","undefined","per_page","last_page","total","state","setState","controllerRef","useRef","prevState","handleSuccessResponse","dir","slice","join","created_at","mime","file","fetchFiles","_controllerRef$curren","page","arguments","abort","current","AbortController","files","signal","then","useEffect","onRemove","remove","findByInputValue","input","_controllerRef$curren2","findFile","className","Input","e","List","itemLayout","header","footer","renderItem","item","Item","actions","danger","icon","DeleteOutlined","Meta","avatar","FolderOutlined","rel","DownloadOutlined","description","Pagination","pageSizeOptions","pageSize","useTokenChangeListener","onTokenChange","onTokenChangeRef","eventHandler","token","localStorage","getItem","addEventListener","removeEventListener","H5P_EDITOR_IFRAME_ID","EditorMessage","sendNewTokenToIFrame","newToken","_iframe$contentWindow","iframe","getElementById","contentWindow","postMessage","TokenChanged","Editor","onSubmitted","onLoaded","settings","setEditorSettings","setError","lang","locale","editorSettings","message","err","toString","onSubmit","updateContent","responseData","Alert","ContextlessEditor","onError","allowSameOrigin","iframeId","Col","Spin","Card","_ref$defaultCard","defaultCard","tabs","defaultActiveKey","TabPane","tab","Player","Title","onXAPI","XAPIEvents","setXAPIEvents","_useState7","_useState8","contentSettings","ContextlessPlayer","contentId","event","Divider","maxHeight","level","ReactJson","src","UploadH5P","onSuccess","hideLabel","accept","info","status","PdfZipList","pdfIds","onProgress","onFinished","_ref$filename","filename","blobs","setBlobs","onFinishedLocal","allBlobs","zip","JSZip","forEach","blob","i","generateAsync","saveAs","pdfId","fetch","REACT_APP_API_URL","headers","Authorization","pdfBlob","prevBlobs","progress","pdfs","_x","_x2","_pdfs","apply","params","options","abrupt","request","method","pdf","_x3","_x4","_pdf","_callee2","_context2","generatedPdf","_x5","_x6","_generatedPdf","_callee3","_context3","PdfList","user_id","template_id","previewState","setPreviewState","generateAll","setGenerateAll","abortController","list","getPdf","Fragment","strong","AuthenticatedLinkButton","Context","getRandomId","round","random","getFlatLessons","lessons","curr","getFlatTopics","_curr$topics","recursiveAddTopicToLessons","lessonId","lesson","_lesson$topics","_lesson$topics2","recursiveAddLessonToLessons","newLesson","recursiveEditLesson","updatedLesson","appendParentIdToLessons","lessonParentId","parent_id","recursiveDeleteLesson","recursiveDeleteTopic","topicId","recursiveTopicUploaded","prevTopicId","lesson_id","_lesson$topics3","AppContext","flatTopics","flatLessons","h5ps","setH5ps","isAssistant","setIsAssistant","l","useLocation","urlParams","URLSearchParams","search","get","getAssistantId","res","foundAssistantId","fields","class_type","getLessons","program","getLessonIdByTopicId","topic_id","lesson_item","_lesson_item$topics","currentEditMode","mode","t","addNewLesson","parentId","isNew","order","active","_prevState$lessons","updateLesson","formData","apiCreateLesson","apiUpdateLesson","_prevState$lessons2","deleteLesson","_prevState$lessons3","apiRemoveLesson","_prevState$lessons4","updateTopic","_lesson$topics4","topic_item","apiCreateTopic","apiUpdateTopic","history","push","TopicType","Video","setTimeout","deleteTopic","_prevState$lessons5","apiRemoveTopic","_prevState$lessons6","addNewTopic","newTopic","_prevState$lessons7","onTopicUploaded","cloneTopic","apiCloneTopic","_prevState$lessons8","cloneLesson","apiCloneLesson","Provider","ScormPreview","uuid","API_URL","height","ScormPlayer","apiUrl","serviceWorkerUrl","post","fixDirName","inputDir","fixFileName","getPath","fixedDir","fixedName","includes","getUploadChangeSuccessParam","uid","fileList","SecureUploadBrowser","folder","onResponse","_objectWithoutProperties","_excluded","showBrowser","setShowBrowser","closeModal","handleFile","_response","_Fragment","FolderOpenOutlined","Modal","open","onCancel","onOk","closeIcon","marginTop","extra","_ref$wrapInForm","wrapInForm","formProps","maxFiles","clearListAfterUpload","showUploadList","infoState","setInfoState","ConditionalWrap","condition","Form","ProFormUploadButton","max","fieldProps","action","ModelNames","ModelTypes","TableColumns","hideInSearch","sorter","_","record","AssignQuestionnary","modelType","actionRef","handleChange","qId","hide","_actionRef$current","assignQuestionnaire","unassignQuestionnaire","reload","t1","ProTable","headerTitle","rowKey","sort","_objectDestructuringEmpty","sortArr","entries","questionnaire","order_by","valueType","_record$models","defaultChecked","models","m","model_id","ExportTopicStatsButton","exportStatForTopic","staticColumns","fixed","_n","attempt_date","attempt_time","summary","toFixed","getQuestionColumns","giftQuizTopicStat","keys","k","key","GiftQuizStatistics","_quizTopics$","quizTopics","selectedTopicId","setSelectedTopicId","dynamicColumns","setDynamicColumns","topicOptions","_topicOptions$","hideInTable","defaultValue","allowClear","handleRequest","_response$data","_ref3$topic_id","responseColumns","getTopicStats","TopicStatsKey","QuizSummary","_toArray","onReset","_quizTopics$2","toolBarRender","CourseTopicsStatistics","topicsGroupedByType","_flatTopics$reduce","RichText","OEmbed","Audio","H5P","Image","PDF","SCORM","Project","GiftQuiz","Unselected","Chart","valueLabel","onTitle","_title","_value$find","onTooltip","headerBordered","isRange","interactions","enable","columnBackground","fill","CourseStatistics","_state$value$find","_state$value$find2","_state$value$find3","_state$value$find4","setTopics","Promise","all","fetchProgram","getCourseStats","programResponse","statsResponse","element","_element$","average_time","ProFormVideoUpload","form_name","src_name","getUploadedSrcField","setPath","ProForm","shouldUpdate","form","_info$file$response","setFieldsValue","formSrcName","getFieldValue","ReactPlayer","controls","getFormData","FormData","append","_iterator","_createForOfIteratorHelper","_step","s","n","done","f","set","traverse","disabledLessonId","disableNested","_lesson$lessons","ParentLesson","currentLessonId","_useContext","useContext","treeData","_state$lessons","ProFormTreeSelect","treeDefaultExpandAll","treeLine","LessonForm","onFinish","onValuesChange","onDelete","onClone","initialValues","_ref$loading","_ProForm$useForm","useForm","_ProForm$useForm2","activeFrom","useWatch","activeTo","submitter","gutter","span","Affix","offsetBottom","_props$form","submit","submitButtonProps","Popconfirm","onConfirm","okText","cancelText","ProFormText","required","labelCol","valuePropName","WysiwygMarkdown","ProFormSwitch","ProFormDatePicker","rules","validator","isAfter","reject","Error","resolve","isBefore","getStateLesson","_lesson$parent_id","Lesson","setTopicList","useParams","handleSave","course","parent_lesson_id","handleDelete","handleClone","changedValues","DescriptionModal","handleOk","isModalVisible","visible","wrapperCol","TopicForm","_React$useState","_React$useState2","visibleModal","setVisibleModal","JsonEditor","getTypeName","types","H5PContentSelect","_ref$multiple","multiple","setContents","allContent","optionFilterProp","filterOption","option","_option$children","h5pTitle","searchSubstring","H5PForm","editId","setEditId","H5PCard","h5pId","String","log","PROVIDERS","provider_name","provider_url","endpoints","schemes","discovery","Embed","providers","Oembed","currentValue","setCurrentValue","previewValue","setPreviewValue","MediaText","_ref$directory","FormWysiwygProps","pdfjs","GlobalWorkerOptions","workerSrc","version","CONFIG","acceptedTypes","audio","video","prepareObject","_typeof","JSON","stringify","PDFPreview","nPages","setNumPages","pageNumber","setPageNumber","margin","defaultPageSize","simple","Document","onLoadSuccess","numPages","Page","VideoProgress","_topic$json2","_topic$json","json","ffmpeg","clearTimeout","_topic$json3","Progress","percent","percentage","MediaUploadPreview","_topic$topicable","_topic$topicable2","_topic$topicable3","_topic$topicable4","preload","MediaUploadForm","onUpdate","_ref5$disabled","currentState","onInfoChange","preview","can_skip","introduction","UploadOutlined","padding","Resources","resources","setResources","controller","fetchResources","fetchResponse","resId","deleteResource","_response$file$respon","ScormSelect","scorms","setScorms","fetching","setFetching","currSco","setCurrSco","previewUuid","setPreviewUuid","fetchScorms","onSearch","scorm","scos","sco","flat","bodyStyle","minWidth","changeValue","toLowerCase","indexOf","notFoundContent","OptGroup","ScormSelector","SelectScorm","onAdded","onRemoved","onEdited","max_attempts","max_execution_time","min_pass_score","ProFormGroup","ProFormDigit","questions","quizId","_topicable$notify_use","notify_users","UserSelect","getTypeIcon","FundOutlined","FilePdfOutlined","AudioOutlined","FileImageOutlined","YoutubeOutlined","InteractionOutlined","VideoCameraAddOutlined","FileTextOutlined","CarryOutOutlined","PercentageOutlined","ExclamationCircleOutlined","topicCanHaveEmptyValue","Topic","_currentTopic$json3","saveIsDisabled","setSaveIsDisabled","sortOrder","_useState9","_useState10","currentTopic","setCurrentTopic","_currentTopic$json","_currentTopic$json2","fetchData","getTopic","interval","setInterval","clearInterval","updateValue","updateValues","onFormSubmit","marginBottom","RichTextEditor","MediaUpload","_info$file","_info$file$response$d","_info$file2","_info$file3","courseLessons","NewLessonListItem","ref","initialValue","onCreate","draggableProps","setValue","Tooltip","placement","RecommenderSvg","xmlns","viewBox","transform","d","stroke","strokeLinecap","strokeWidth","RecommenderIcon","Icon","component","getCourseRecommender","_getCourseRecommender","useCache","getExerciseRecommender","_getExerciseRecommender","useCourseRecommender","setCourse","useExerciseRecommender","exercise","setExercise","getTopicType","createText","formatRecommenderProbability","probability","min","ceil","abs","ExerciseRecommender","recommendedData","createTopic","Paragraph","topic_type","InfoRecommender","RecommenderPopoverContent","RecommenderPopoverInfo","Popover","trigger","showArrow","InfoCircleOutlined","Recommender","_ref$recommenderType","recommenderType","RecommenderType","Exercise","onTopicCreate","getRecommender","Info","isLoading","CourseRecommender","topicTypes","RecommenderTopicSelector","onSelected","positionsToHide","setOpen","_useModel","useModel","initialState","setSelected","havePackageInstalled","createHavePackageInstalled","packages","topicTypeIsDisabled","_initialState$config","topicTypeToSettingName","PACKAGES","TopicTypeGift","Scorm","TopicTypeProject","TopicTypes","MinusOutlined","PlusOutlined","block","TopicTypesSelector","onNewLesson","_ref$depth","depth","_initialState$package","_initialState$package2","_initialState$package3","_initialState$package4","messages","PicCenterOutlined","MovedType","mutateTopicsId","mutateLessonsId","getLessonDeeplyStringifyId","_l$lessons","_l$topics","getFlatLessonDeeplyStringifyId","_l$lessons2","getFlatTopicsStringifyId","_l$lessons3","_l$topics2","getRootLessons","hasChildren","isExpanded","getTreeDataItemsFromFlatLessonsAndTopics","items","_prevState$isExpanded","_prevState","_item$lessons","_item$topics","reorderIdArr","idArr","sourceIndex","destinationIndex","arrCopy","arrCopyContextSourceIndex","arrCopyContextDestinationIndex","_arrCopy$splice","splice","_arrCopy$splice2","removed","insertToIndexIdArr","getOrdersFromReorderedArr","index","_id$toString$split","_id$toString$split2","strId","optimisticMoveThroughTree","moveItemOnTreeParams","promise","moveItemOnTree","findParentByChildrenId","childrenId","findChildrenIndexPosition","_treeData$items$paren","_treeData$items","LessonList","rootLessons","flatLessonsAndTopics","_state$lessons2","_state$lessons3","rootId","setTreeData","isRecomendarePackageEnabled","packagesConfigs","escolalms_recommender","enabled","checkPackage","root","nestingSettings","setting","getHiddenNewTopicOptions","_nestingSettings$less","_nestingSettings$topi","hiddenOptions","maxLessonsNestingInProgram","minTopicNestingInProgram","topicType","_currentEditMode$valu","_currentEditMode$valu2","provided","onExpand","onCollapse","_item$id$toString$spl","_item$id$toString$spl2","checkLastTopic","currentTopicId","_lessonTopics$topics","lessonTopics","lastTopic","dragHandleProps","innerRef","NavLink","to","itemId","mutateTree","onDragEnd","source","destination","sourceChildren","movedFullId","_movedFullId$split","_movedFullId$split2","movedType","movedId","destinationChildren","_toString$split$","_toString$split","_destinationLesson$id","topicsIds","destinationLesson","destinationDepth","destinationTopicPos","reorderedArr","orders","destinationLessonsIds","destinationTopicsIds","maxLessonPos","_destinationLesson$id2","_destinationLesson$id3","destinationStrId","prevLessonState","updatingValues","_reorderedArr","destinationOrders","_destinationTopicPos","_destinationLesson$id4","_destinationLesson$id5","_destinationStrId","_updatingValues","_reorderedArr2","_destinationOrders","_formData","lessonsIds","_topicsIds","minLessonPos","_maxLessonPos","_reorderedArr3","_orders","minTopicPos","maxTopicPos","_reorderedArr4","_orders2","_destination$parentId","_destination$parentId2","_destinationLessonsIds","_destinationTopicsIds","_destinationDepth","_destination$index","_minLessonPos","_maxLessonPos2","destIndex","_destination$parentId3","_destination$parentId4","_destinationStrId2","_prevLessonState","_updatingValues2","_formData2","_reorderedArr5","_destinationOrders2","_destination$index2","_minTopicPos","_maxTopicPos","_destIndex","_destination$parentId5","_destination$parentId6","_destinationStrId3","_updatingValues3","_reorderedArr6","_destinationOrders3","_formData3","New","warning","Tree","offsetPerLevel","tree","isDragEnabled","isNestingEnabled","CurriculumList","onNew","Curriculum","ProgramForm","ThreeColProgram","projectSolutions","_projectSolutions","deleteProjectSolution","_deleteProjectSolution","handleRemove","ProjectsList","projectTopics","setProjectTopics","enumsProjectTopics","_curr$id","_curr$title","_curr$id2","valueEnum","_enumsProjectTopics$r","_enumsProjectTopics$r2","Link","renderFormItem","defaultRender","rest","stateType","file_url","_d","_i","flatProjectTopics","meta","CourseSuccessModal","_props$visible","handleCancel","CourseAccessForm","postSetAccess","fetchAccess","users","user","groups","group","UserGroupSelect","assignable","_assignable","assign","_assign","unassign","_x7","_x8","_unassign","assigned","_x9","_x10","_assigned","_callee4","_context4","AssignTemplateSelect","assignable_class","assignable_id","onAssign","onUnassign","onTemplates","templates","setTemplates","currentTemplates","setCurrentTemplates","setTemplatesFromResponse","responseTemplates","fetchAssiged","fetchGetAssigned","fetchAssignales","fetchGetAssignables","removeIdFromCurrentTemplates","prevTemplates","addIdFromCurrentTemplates","valuesToAssign","valuesToUnassign","postAssign","postUnassign","template","channel","CourseCertificateForm","currTemplates","setCurrTemplates","pdfTemplates","tplId","tpl","CertificateSelector","TabNames","_initialState$config$","_initialState$config$2","_initialState$config2","_params$tab","ATTRIBUTES","access","useAccess","setData","_useValidateFormEdit","useValidateFormEdit","manageCourseEdit","setManageCourseEdit","validateCourseEdit","fromDateValidation","setFromDateValidation","toDateValidation","setToDateValidation","showModal","manageSuccessModal","setManageSuccessModal","isFirstTimeEdit","setIsFirstTimeEdit","_useShowNotification","useShowNotification","showNotification","locales","getAllLocales","setInitialState","showPublicSwitch","tabsToHide","settingValue","_response$data$catego","_response$data$tags","getCourse","categories","categoriesArrToIds","tags","tagsArrToIds","active_from","active_to","valuesChanged","_onFinish","postData","disableEdit","clicked","authors","author","scorm_sco_id","image_url","image_path","splitImagePath","video_url","video_path","poster_url","poster_path","hours_to_complete","createCourse","updateCourse","showConfirmModal","validate","currentLocales","_initialState$config3","a","additionalLocales","parse","PageContainer","breadcrumb","routes","path","breadcrumbName","activeKey","collapsed","closable","EditValidateModal","setManage","ProFormSelect","getLocale","draft","published","archived","published_unactivated","salesPermission","ProductWidget","productable","class_id","quantity","PRODUCT","ProFormImageUpload","removedPath","MEDIA","CategoryCheckboxTree","TagsInput","CATEGORIES","cardProps","PROGRAM","scormListPermission","CourseAccess","ACCESS","certificatesPermission","CERTIFICATES","questionnaireListPermission","COURSE","QUESTIONNAIRES","statistics","STATISTICS","user_submission","UserSubmissions","USER_SUBMISSION","user_projects","USER_PROJECTS","ConfirmModal","FilesSelector","_ref$type","readOnly","SettingsModalForm","onVisibleChange","initialData","_Form$useForm","_Form$useForm2","setType","isGlobalGroup","selectedGroup","setSelectedGroup","_id$type","resetFields","ModalForm","AutoComplete","autoFocus","inputValue","ProFormRadio","Group","ProFormTextArea","noStyle","_unused","checkedChildren","CheckOutlined","unCheckedChildren","CloseOutlined","hidden","ProFormCheckbox","_unused2","handleUpdate","updatedSettings","updateSettings","createSettings","deleteSettings","snakeToCamel","str","replace","toUpperCase","substr","courseEditTabsKeys","courseEditAdditionalSettingsKeys","templateTabsKeys","pathToSettingName","booleanSettings","enumerable","feature","preInitialData","logo","frontURL","companyName","companyURL","logoLogin","logoFooter","footerFontColor","showLoginBackgroundImage","loginHeaderBackgroundColor","loginHeaderFontColor","loginFormBackgroundColor","contentBackgroundColor","technicalMaintenance","technicalMaintenanceText","isRoute","route","TableList","modalVisible","setModalVisible","setInitialData","getRoutes","hideInDataRecords","prevInitialData","hideInForm","EditOutlined","updateConfigDynamically","rows","_yield$handleUpdate","_files","_findFile","upload","_upload","resizedImage","_remove","h5p","_h5p","getH5p","_getH5p","_updateContent","removeH5P","_removeH5P","_allContent","_callee5","_context5","reports","_reports","_exportStatForCourse","responseType","_exportStatForTopic","_scorms","scormssco","_scormssco","deleteScorm","_deleteScorm"],"sourceRoot":""}