(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"4f6N":function($,c,e){"use strict";var u=e("2qtc"),d=e("kLXV"),D=e("9kvl"),o=e("nKUr"),h=e.n(o),F=function(A){var p=A.visible,W=A.setManage;return Object(o.jsx)(d.a,{width:"600px",title:Object(o.jsx)(D.a,{id:"course.validate_edit.header",defaultMessage:"course.validate_edit.header"}),visible:p,onOk:function(){return W({showModal:!1,disableEdit:!1,clicked:!0})},onCancel:function(){return W({showModal:!1,disableEdit:!0,clicked:!1})},okText:"OK",cancelText:"Cancel",children:Object(o.jsx)("p",{children:Object(o.jsx)(D.a,{id:"course.validate_edit.content",defaultMessage:"course.validate_edit.content"})})})};c.a=F},GZq3:function($,c,e){},Gb5Y:function($,c,e){"use strict";e.d(c,"a",function(){return F}),e.d(c,"b",function(){return A}),e.d(c,"d",function(){return W}),e.d(c,"f",function(){return v}),e.d(c,"c",function(){return z}),e.d(c,"e",function(){return w});var u=e("k1fw"),d=e("9og8"),D=e("WmNS"),o=e.n(D),h=e("9kvl");function F(s,a){return T.apply(this,arguments)}function T(){return T=Object(d.a)(o.a.mark(function s(a,g){return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(h.f)("/api/admin/consultations",Object(u.a)({method:"GET",useCache:!1,params:Object(u.a)(Object(u.a)({},a),{},{per_page:a&&a.pageSize,page:a&&a.current})},g||{})));case 1:case"end":return i.stop()}},s)})),T.apply(this,arguments)}function A(s,a){return p.apply(this,arguments)}function p(){return p=Object(d.a)(o.a.mark(function s(a,g){return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(h.f)("/api/admin/consultations",Object(u.a)({method:"POST",headers:{"Content-Type":"application/json"},data:a},g||{})));case 1:case"end":return i.stop()}},s)})),p.apply(this,arguments)}function W(s,a){return B.apply(this,arguments)}function B(){return B=Object(d.a)(o.a.mark(function s(a,g){return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(h.f)("/api/admin/consultations/".concat(a),Object(u.a)({method:"GET",useCache:!1},g||{})));case 1:case"end":return i.stop()}},s)})),B.apply(this,arguments)}function v(s,a,g){return l.apply(this,arguments)}function l(){return l=Object(d.a)(o.a.mark(function s(a,g,J){return o.a.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",Object(h.f)("/api/admin/consultations/".concat(a),Object(u.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:g},J||{})));case 1:case"end":return M.stop()}},s)})),l.apply(this,arguments)}function z(s,a){return U.apply(this,arguments)}function U(){return U=Object(d.a)(o.a.mark(function s(a,g){return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(h.f)("/api/admin/consultations/".concat(a),Object(u.a)({method:"DELETE",useCache:!1},g||{})));case 1:case"end":return i.stop()}},s)})),U.apply(this,arguments)}function w(s,a){return V.apply(this,arguments)}function V(){return V=Object(d.a)(o.a.mark(function s(a,g){return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(h.f)("/api/admin/consultations/".concat(a,"/schedule"),Object(u.a)({method:"GET",useCache:!1},g||{})));case 1:case"end":return i.stop()}},s)})),V.apply(this,arguments)}},"J+hL":function($,c,e){},VlvL:function($,c,e){"use strict";var u=e("9kvl"),d=e("Ty5D"),D=e("nKUr"),o=e.n(D),h=function(T){var A=T.show,p=Object(u.i)();return Object(D.jsx)(d.a,{when:A,message:p.formatMessage({id:"unsaved_changes"})})};c.a=h},eFHa:function($,c,e){"use strict";e.d(c,"a",function(){return h});var u=e("tJVT"),d=e("q1tI"),D=e.n(d),o=e("HZtn");function h(){var F=Object(d.useState)({showModal:!1,disableEdit:!1,clicked:!1}),T=Object(u.a)(F,2),A=T[0],p=T[1],W=function(v){(v==null?void 0:v.status)==="published"&&v!==null&&v!==void 0&&v.active_from&&Object(o.a)(new Date(v==null?void 0:v.active_from))&&!A.clicked?p({showModal:!1,disableEdit:!0,clicked:!1}):p({showModal:!1,disableEdit:!1,clicked:!1})};return{manageCourseEdit:A,setManageCourseEdit:p,validateCourseEdit:W}}},q34N:function($,c,e){"use strict";var u=e("tJVT"),d=e("0eZe"),D=e("q1tI"),o=e.n(D),h=e("nKUr"),F=e.n(h),T=function(p){var W=p.productable,B=p.type,v=B===void 0?"card":B,l=Object(D.useState)("attributes"),z=Object(u.a)(l,2),U=z[0],w=z[1];return Object(h.jsx)(d.a,{productable:W,tab:U,onTabChange:function(s){return w(s)},type:v})};c.a=T},rh3J:function($,c,e){"use strict";e.r(c);var u=e("14J3"),d=e("BMrR"),D=e("jCWc"),o=e("kPKH"),h=e("fOrg"),F=e("+KLJ"),T=e("+L6B"),A=e("2/Rp"),p=e("T2oS"),W=e("W9HT"),B=e("miYZ"),v=e("tsqr"),l=e("k1fw"),z=e("9og8"),U=e("tJVT"),w=e("WmNS"),V=e.n(w),s=e("q1tI"),a=e("VMEa"),g=e("Qurx"),J=e("yj/a"),i=e("lR9U"),M=e("nhC9"),ue=e("hd5d"),je=e("tMyG"),n=e("9kvl"),me=e("Ty5D"),be=e("0WSk"),ve=e("TWax"),q=e("Gb5Y"),Be=e("OaEy"),Oe=e("2fM7"),Ie=e("iQDF"),fe=e("+eQT"),Ke=e("+BJd"),he=e("mr32"),pe=e("oBTY"),ge=e("wd/R"),re=e.n(ge),Le=e("GZq3"),t=e("nKUr"),ie=function(m){return m.local().valueOf()},Ee=function(m){var H=m.value,r=H===void 0?[]:H,I=m.onChange,S=m.format,P=S===void 0?"DD-MM-YYYY HH:mm":S,Q=m.selectProps,Y=Q===void 0?{}:Q,K=Object(s.useState)(!1),y=Object(U.a)(K,2),ne=y[0],_=y[1],b=Object(s.useCallback)(function(f){var x=ie(f),E=r.indexOf(x),C=Object(pe.a)(r);E>-1?C.splice(E,1):C.push(x),I(C)},[r]),X=Object(s.useCallback)(function(f){var x=r.indexOf(ie(f))>-1;return Object(t.jsx)("div",{className:"ant-picker-cell-inner",style:x?{position:"relative",zIndex:2,display:"inlineBlock",width:"24px",height:"22px",lineHeight:"22px",backgroundColor:"#1890ff",color:"#fff",margin:"auto",borderRadius:"2px",transition:"background 0.3s, border 0.3s"}:{},children:f.date()})},[r]),k=Object(s.useCallback)(function(f){var x=f.value,E=f.onClose,C=function(){E(),I(r.filter(function(se){return se!==x}))};return Object(t.jsx)(he.a,{onClose:C,closable:!0,children:re()(x).format(P)})},[r]),O=function(){return{disabledMinutes:function(){return Array.from({length:59},function(E,C){return C+1})}}};return Object(t.jsx)(Oe.a,Object(l.a)(Object(l.a)({},Y),{},{allowClear:!0,mode:"multiple",value:r,onClear:function(){return I&&I([])},tagRender:k,open:ne,onFocus:function(){return _(!0)},onBlur:function(){return _(!1)},dropdownMatchSelectWidth:!1,dropdownClassName:"multipleDropdownClassName",dropdownStyle:{height:"310px",width:"390px",minWidth:"0"},dropdownRender:function(){return Object(t.jsx)(fe.a,{disabledDate:function(E){var C=new Date;return E&&E.valueOf()<=C.setDate(C.getDate()-1)},showTime:{format:"HH:mm"},disabledTime:O,onChange:function(E){return E&&b(E)},open:!0,dateRender:X,style:{visibility:"hidden"},getPopupContainer:function(E){var C=E.parentNode;return C}})}}))},xe=Ee,te=e("c+yx"),oe=e("Gn8c"),Ce=e("VlvL"),le=e("viv7"),Me=e("eFHa"),Pe=e("4f6N"),Ne=e("qbNl"),ye=e("JBPa"),Fe=e("Awhp"),De=e("KrTs"),Te={reported:"warning",reject:"error",approved:"success"},Ae=function(m){var H=m.consultation,r=Object(s.useState)([]),I=Object(U.a)(r,2),S=I[0],P=I[1];Object(s.useEffect)(function(){var Y=function(){Object(q.e)(H).then(function(y){y.success&&P(y.data)}).catch(function(){v.default.error(Object(t.jsx)(n.a,{id:"error",defaultMessage:"error"}))})};Y()},[H]);var Q=Object(s.useCallback)(function(Y){return Object(t.jsx)("ul",{className:"events",children:S.map(function(K){if(Y.format("yyyy-MM-DD")===re()(K.date).format("yyyy-MM-DD")){var y;return Object(t.jsx)("li",{children:Object(t.jsx)(De.a,{status:Te[K.status],text:"".concat(K==null||(y=K.user)===null||y===void 0?void 0:y.email," ")})})}return null})})},[S]);return Object(t.jsx)(ye.a,{dateCellRender:Q})},Se=Ae,Ve=e("J+hL"),Ue=e("q34N"),Re=e("5RzD"),We=function(){var m=Object(n.i)(),H=Object(me.h)(),r=H.consultation,I=H.tab,S=I===void 0?"attributes":I,P=r==="new",Q=Object(s.useState)(!1),Y=Object(U.a)(Q,2),K=Y[0],y=Y[1],ne=Object(s.useState)(),_=Object(U.a)(ne,2),b=_[0],X=_[1],k=Object(Me.a)(),O=k.manageCourseEdit,f=k.setManageCourseEdit,x=k.validateCourseEdit,E=a.a.useForm(),C=Object(U.a)(E,1),de=C[0],se=Object(s.useCallback)(Object(z.a)(V.a.mark(function L(){var j,N;return V.a.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,Object(q.d)(Number(r));case 2:j=G.sent,j.success&&(S==="attributes"&&x(j.data),X(Object(l.a)(Object(l.a)({},j.data),{},{author_id:j.data.author&&j.data.author.id,categories:(N=j.data.categories)===null||N===void 0?void 0:N.map(te.a)})));case 4:case"end":return G.stop()}},L)})),[r]);Object(s.useEffect)(function(){if(P){X({name:"new"});return}se()},[r]);var ee=Object(s.useMemo)(function(){return{onFinish:function(){var L=Object(z.a)(V.a.mark(function N(ce){var G,Z;return V.a.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(!O.disableEdit){R.next=3;break}return f({showModal:!0,disableEdit:!0,clicked:!1}),R.abrupt("return");case 3:if(G=Object(l.a)(Object(l.a)({},ce),{},{image_url:b&&b.image_url,image_path:b&&b.image_url&&Object(te.e)(b.image_url),logotype_url:b&&b.logotype_url,logotype_path:b&&b.logotype_path&&Object(te.e)(b.logotype_path)}),!P){R.next=11;break}return R.next=7,Object(q.b)(G);case 7:Z=R.sent,Z.success&&(y(!1),n.d.push("/consultations/".concat(Z.data.id))),R.next=15;break;case 11:return R.next=13,Object(q.f)(Number(r),G);case 13:Z=R.sent,Z.success&&(y(!1),x(Z.data),n.d.push("/consultations/".concat(Z.data.id,"/").concat(S)));case 15:v.default.success(Z.message);case 16:case"end":return R.stop()}},N)}));function j(N){return L.apply(this,arguments)}return j}(),initialValues:b}},[b,r,S,O]);return b?Object(t.jsx)(je.a,{title:P?Object(t.jsx)(n.a,{id:"consultation"}):Object(t.jsx)(n.a,{id:"consultations.edit"}),header:{breadcrumb:{routes:[{path:"consultations",breadcrumbName:m.formatMessage({id:"menu.Consultations"})},{path:String(r),breadcrumbName:m.formatMessage({id:"form"})},{path:"/",breadcrumbName:m.formatMessage({id:String(b.name)})},{path:String(S),breadcrumbName:m.formatMessage({id:String(S)})}]}},children:Object(t.jsxs)(M.a,{tabs:{type:"card",activeKey:S,onChange:function(j){return n.d.push("/consultations/".concat(r,"/").concat(j))}},children:[Object(t.jsxs)(M.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"attributes"}),children:[O.disableEdit&&Object(t.jsx)(F.a,{closable:!0,style:{marginBottom:"20px"},type:"warning",message:Object(t.jsx)(n.a,{id:"course_edit_warning_message",defaultMessage:"course_edit_warning_message"}),action:Object(t.jsx)(A.a,{onClick:function(){return f({showModal:!0,disableEdit:!0,clicked:!0})},type:"primary",children:Object(t.jsx)(n.a,{id:"questionnaire.submit",defaultMessage:"questionnaire.submit"})})}),Object(t.jsx)(Ce.a,{show:K})," ",Object(t.jsx)(Pe.a,{visible:O.showModal,setManage:f}),Object(t.jsxs)(a.a,Object(l.a)(Object(l.a)({},ee),{},{form:de,onValuesChange:function(){y(!0)},children:[Object(t.jsxs)(a.a.Group,{children:[Object(t.jsx)(g.a,{width:"md",name:"name",label:Object(t.jsx)(n.a,{id:"name"}),tooltip:Object(t.jsx)(n.a,{id:"name"}),placeholder:m.formatMessage({id:"name",defaultMessage:"name"}),required:!0,disabled:O.disableEdit}),Object(t.jsx)(g.a,{width:"sm",name:"duration",label:Object(t.jsx)(n.a,{id:"duration"}),tooltip:Object(t.jsx)(n.a,{id:"duration"}),placeholder:m.formatMessage({id:"duration",defaultMessage:"duration"}),disabled:O.disableEdit}),Object(t.jsx)(J.a,{name:"status",width:"xs",label:Object(t.jsx)(n.a,{id:"status"}),tooltip:Object(t.jsx)(n.a,{id:"status_consultation_tooltip"}),valueEnum:le.a,initialValue:le.a.draft,placeholder:m.formatMessage({id:"status"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"select"})}],disabled:O.disableEdit})]}),Object(t.jsxs)(a.a.Group,{children:[Object(t.jsx)(i.a,{width:"sm",name:"active_from",label:Object(t.jsx)(n.a,{id:"active_from"}),tooltip:Object(t.jsx)(n.a,{id:"active_from"}),placeholder:m.formatMessage({id:"active_from",defaultMessage:"active_from"}),disabled:O.disableEdit}),Object(t.jsx)(i.a,{width:"sm",name:"active_to",label:Object(t.jsx)(n.a,{id:"active_to"}),tooltip:Object(t.jsx)(n.a,{id:"active_to"}),placeholder:m.formatMessage({id:"active_to",defaultMessage:"active_to"}),disabled:O.disableEdit}),Object(t.jsx)(a.a.Item,{name:"author_id",label:Object(t.jsx)(n.a,{id:"tutor"}),tooltip:Object(t.jsx)(n.a,{id:"tutor_consultation_tooltip"}),valuePropName:"value",required:!0,children:Object(t.jsx)(be.a,{})})]}),Object(t.jsx)(a.a.Group,{children:Object(t.jsx)(a.a.Item,{name:"description",label:Object(t.jsx)(n.a,{id:"description"}),tooltip:Object(t.jsx)(n.a,{id:"description_tooltip"}),valuePropName:"value",required:!0,children:Object(t.jsx)(ue.a,{directory:"consultation/".concat(r,"/wysiwyg")})})}),Object(t.jsx)(a.a.Group,{children:Object(t.jsx)(a.a.Item,{valuePropName:"value",name:"proposed_terms",tooltip:Object(t.jsx)(n.a,{id:"proposed_terms_tooltip"}),label:Object(t.jsx)(n.a,{id:"consultations.proposed_terms"}),children:Object(t.jsx)(xe,{})})})]}))]},"attributes"),!P&&Object(t.jsx)(M.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"product"}),disabled:O.disableEdit,children:r&&Object(t.jsx)(Ue.a,{type:"line",productable:{class_type:"App\\Models\\Consultation",class_id:r,name:String(b.name)}})},"product"),!P&&Object(t.jsx)(M.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"media"}),disabled:O.disableEdit,children:Object(t.jsx)(a.a,Object(l.a)(Object(l.a)({},ee),{},{children:Object(t.jsx)(oe.a,{folder:"consultations/".concat(r),title:"image",action:"/api/admin/consultations/".concat(r),src_name:"image_url",form_name:"image",getUploadedSrcField:function(j){return j.file.response.data.image_url},setPath:function(j){return X(function(N){return Object(l.a)(Object(l.a)({},N),j)})}})}))},"media"),!P&&Object(t.jsx)(M.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"categories"}),disabled:O.disableEdit,children:Object(t.jsx)(d.a,{children:Object(t.jsx)(o.a,{span:12,children:Object(t.jsx)(a.a,Object(l.a)(Object(l.a)({},ee),{},{children:Object(t.jsx)(a.a.Item,{label:Object(t.jsx)(n.a,{id:"categories"}),name:"categories",valuePropName:"value",children:Object(t.jsx)(ve.a,{})})}))})})},"categories")," ",!P&&Object(t.jsx)(M.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"branding"}),disabled:O.disableEdit,children:Object(t.jsx)(a.a,Object(l.a)(Object(l.a)({},ee),{},{children:Object(t.jsx)(oe.a,{folder:"consultation/".concat(r),title:"logotype",action:"/api/admin/consultations/".concat(r),src_name:"logotype_url",form_name:"logotype",getUploadedSrcField:function(j){return j.file.response.data.logotype_url},setPath:function(j){return X(function(N){return Object(l.a)(Object(l.a)({},N),j)})}})}))},"branding")," ",!P&&Object(t.jsx)(M.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"user_submission"}),disabled:O.disableEdit,children:Object(t.jsx)(d.a,{children:Object(t.jsx)(o.a,{span:12,children:r&&Object(t.jsx)(Re.a,{id:Number(r),type:"App\\Models\\Consultation"})})})},"user_submission"),!P&&Object(t.jsx)(M.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"consultations.calendar"}),children:Object(t.jsx)(Se,{consultation:Number(r)})},"calendar")]})}):Object(t.jsx)(W.a,{})},Ge=c.default=We},viv7:function($,c,e){"use strict";e.d(c,"a",function(){return u});var u;(function(d){d.draft="draft",d.published="published",d.archived="archived",d.published_unactivated="published_unactivated"})(u||(u={}))}}]);
