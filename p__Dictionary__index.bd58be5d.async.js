"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5797,3507],{29477:function(ae,j,e){var Z=e(97857),g=e.n(Z),R=e(5574),o=e.n(R),E=e(55523),l=e(75842),s=e(21974),d=e(67294),x=e(80854),i=e(85893);function C(n){var y=n.onChange,m=n.onUpload,q=n.url,z=n.name,u=n.extra,J=n.accept,U=n.data,w=n.wrapInForm,r=w===void 0?!0:w,G=n.title,Q=n.formProps,N=n.maxFiles,f=n.clearListAfterUpload,a=n.hideLabel,t=n.disabled,D=n.showUploadList,P=(0,d.useState)(),W=o()(P,2),O=W[0],L=W[1],$=(0,x.useIntl)();return U&&U[z]&&delete U[z],(0,i.jsx)(s.Z,{condition:r,wrap:function(p){return(0,i.jsx)(l.Z,g()(g()({},Q),{},{children:p}))},children:(0,i.jsx)(E.Z,{title:G||" ".concat($.formatMessage({id:"upload_click_here"})),placeholder:$.formatMessage({id:"upload_click_here"}),label:!a&&(0,i.jsx)(x.FormattedMessage,{id:"upload"}),max:N!=null?N:2,fieldProps:{data:U,accept:J,name:z,showUploadList:D,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))},onChange:function(p){L(p),y&&y(p),p.file.status==="done"&&(m&&m(p.file.response),f&&L(void 0))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(q),extra:u,fileList:O==null?void 0:O.fileList,disabled:t})})}j.Z=C},68505:function(ae,j,e){e.d(j,{E:function(){return E}});var Z=[{regex:/^(Consultation|Course|Webinar|Questionnaire|Dictionary|Voucher) updated successfully$/,translationKey:"notifications.updateSuccessfully",extractModel:function(s){return s.split(" ")[0]}},{regex:/^(Consultation|Course|Webinar|Questionnaire|Dictionary|Voucher) saved successfully$/,translationKey:"notifications.createSuccessfully",extractModel:function(s){return s.split(" ")[0]}},{regex:/^(Consultation|Course|Webinar|Questionnaire|Dictionary|Voucher) created successfully$/,translationKey:"notifications.createSuccessfully",extractModel:function(s){return s.split(" ")[0]}},{regex:/^(Product|Group) updated$/,translationKey:"notifications.updated",extractModel:function(s){return s.split(" ")[0]}}],g=function(s){for(var d=0,x=Z;d<x.length;d++){var i=x[d];if(i.regex.test(s))return{translationKey:i.translationKey,model:i.extractModel?i.extractModel(s):void 0}}return{translationKey:null,model:null}},R=e(2453),o=e(80854),E=function(){var s=(0,o.useIntl)(),d=function(i){var C=g(i.message),n=C.translationKey,y=C.model,m=i.success&&!("error"in i);n?R.ZP[m?"success":"error"](s.formatMessage({id:n},{id:y?s.formatMessage({id:y.toLocaleLowerCase()}):void 0})):R.ZP[m?"success":"error"](m?i.message?i.message:s.formatMessage({id:"updated_at"}):s.formatMessage({id:"notifications.unexpectedError"}))};return{showNotification:d}}},54464:function(ae,j,e){e.d(j,{T:function(){return R}});var Z=e(67294),g=e(80854),R=function(){var E,l=(0,g.useModel)("@@initialState"),s=l.initialState,d=(s==null||(E=s.currentUser)===null||E===void 0?void 0:E.permissions)||[],x=(0,Z.useCallback)(function(i){return Array.isArray(d)?!!(d!=null&&d.find(function(C){return C.includes(i)})):!1},[d]);return{checkPermission:x}}},73197:function(ae,j,e){e.r(j),e.d(j,{DictionaryTabNames:function(){return ne},default:function(){return ce}});var Z=e(97857),g=e.n(Z),R=e(15009),o=e.n(R),E=e(99289),l=e.n(E),s=e(5574),d=e.n(s),x=e(68505),i=e(29477),C=e(91115),n=e(54464),y=e(61441),m=e(42782),q=e(66419),z=e(47389),u=e(82061),J=e(51042),U=e(16894),w=e(2453),r=e(66309),G=e(83062),Q=e(14726),N=e(86738),f=e(67294),a=e(80854),t=e(85893),D=function(){var I=l()(o()().mark(function F(_){return o()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",(0,m.FX)(_).then(function(V){return V.success&&w.ZP.success(V.message),!0}));case 1:case"end":return h.stop()}},F)}));return function(_){return I.apply(this,arguments)}}(),P=function(){var F=(0,f.useRef)(),_=(0,a.useIntl)(),ee=(0,a.useParams)(),h=ee.dictionaryId,V=ee.tab,ie=(0,n.T)(),oe=ie.checkPermission,re=[{title:(0,t.jsx)(a.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:(0,t.jsx)(a.FormattedMessage,{id:"word",defaultMessage:"word"}),dataIndex:"word",sorter:!0},{title:(0,t.jsx)(a.FormattedMessage,{id:"categories",defaultMessage:"categories"}),dataIndex:"categories",sorter:!1,hideInSearch:!0,render:function(S,c){var M;return(0,t.jsx)(f.Fragment,{children:(M=c.categories)===null||M===void 0?void 0:M.map(function(B){return(0,t.jsx)(r.Z,{children:B.name},B.name)})})}},{hideInSearch:!0,title:(0,t.jsx)(a.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",width:100,render:function(S,c){return[(0,t.jsx)(a.Link,{to:"/other/dictionary/".concat(h,"/").concat(V,"/").concat(c.id,"/").concat(y.DictionaryWordsTabNames.FORM),children:(0,t.jsx)(G.Z,{title:(0,t.jsx)(a.FormattedMessage,{id:"edit",defaultMessage:"edit"}),children:(0,t.jsx)(Q.ZP,{type:"primary",icon:(0,t.jsx)(z.Z,{})})})},"edit"),(0,t.jsx)(N.Z,{title:(0,t.jsx)(a.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:l()(o()().mark(function M(){var B;return o()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,D(c.id);case 2:B=T.sent,B&&F.current&&F.current.reload();case 4:case"end":return T.stop()}},M)})),okText:(0,t.jsx)(a.FormattedMessage,{id:"yes"}),cancelText:(0,t.jsx)(a.FormattedMessage,{id:"no"}),children:(0,t.jsx)(G.Z,{title:(0,t.jsx)(a.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,t.jsx)(Q.ZP,{type:"primary",icon:(0,t.jsx)(u.Z,{}),danger:!0})})},"delete")]}}];return(0,t.jsx)(U.ZP,{headerTitle:_.formatMessage({id:"words",defaultMessage:"Words"}),actionRef:F,rowKey:"id",search:{layout:"vertical"},toolBarRender:function(){return[(0,t.jsx)(a.Link,{to:"/other/dictionary/".concat(h,"/").concat(V,"/new/").concat(y.DictionaryWordsTabNames.FORM),children:(0,t.jsxs)(Q.ZP,{type:"primary",children:[(0,t.jsx)(J.Z,{})," ",(0,t.jsx)(a.FormattedMessage,{id:"new",defaultMessage:"new"})]},"primary")},"new"),oe(C.Z.DictionaryImport)?(0,t.jsx)("div",{className:"import-dictionary",children:(0,t.jsx)(i.Z,{title:_.formatMessage({id:"import_dictionary",defaultMessage:"Import dictionary"}),url:"/api/admin/dictionary-words/import",name:"file",accept:".csv, .xlsx",data:{dictionary_id:Number(h)},onChange:function(c){if(c.file.status==="done"&&c.file.response&&c.file.response.success){var M;w.ZP.success(c.file.response.message),(M=F.current)===null||M===void 0||M.reload()}c.file.response&&c.file.status==="error"&&(w.ZP.error(c.file.response.message),console.error(c.file.response))},hideLabel:!0,wrapInForm:!1,maxFiles:1,clearListAfterUpload:!0})}):void 0]},request:function(S,c){var M=S.pageSize,B=S.current,te=S.word;return(0,m.uz)(g()({per_page:M,page:B,word:te,dictionary_id:Number(h)},(0,q.di)(c,"created_at"))).then(function(T){return T.success?{data:T.data,total:T.meta.total,success:!0}:[]})},columns:re})},W=P,O=e(78715),L=e(952),$=e(5966),A=e(31199),p=e(74453),de=e(74330),ue=e(71230),se=e(15746),ne=function(I){return I.FORM="form",I.WORDS="words",I}({}),ce=function(){var I=(0,a.useIntl)(),F=(0,a.useParams)(),_=F.dictionaryId,ee=F.tab,h=_==="new",V=(0,x.E)(),ie=V.showNotification,oe=(0,f.useState)(),re=d()(oe,2),X=re[0],S=re[1],c=(0,f.useState)(!1),M=d()(c,2),B=M[0],te=M[1],T=L.ZP.useForm(),me=d()(T,1),fe=me[0],le=(0,f.useCallback)(l()(o()().mark(function Y(){var b;return o()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return te(!0),K.next=3,(0,m.RC)(Number(_));case 3:b=K.sent,b.success&&S(b.data),te(!1);case 6:case"end":return K.stop()}},Y)})),[_]);(0,f.useEffect)(function(){if(_==="new"){S({});return}le()},[_,le]);var ve=(0,f.useMemo)(function(){return{onFinish:function(){var Y=l()(o()().mark(function k(K){var H;return o()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(_!=="new"){v.next=7;break}return v.next=3,(0,m.Xk)(K);case 3:H=v.sent,H.success&&a.history.push("/other/dictionary/".concat(H.data.id,"/form")),v.next=10;break;case 7:return v.next=9,(0,m.ax)(Number(_),K);case 9:H=v.sent;case 10:ie(H);case 11:case"end":return v.stop()}},k)}));function b(k){return Y.apply(this,arguments)}return b}(),initialValues:X}},[X,_]);return X?(0,t.jsx)(p._z,{title:h?(0,t.jsx)(a.FormattedMessage,{id:"new_dictionary"}):(0,t.jsx)(a.FormattedMessage,{id:"edit_dictionary"}),children:(0,t.jsxs)(O.ZP,{tabs:{type:"card",activeKey:ee,onChange:function(b){a.history.push("/other/dictionary/".concat(_,"/").concat(b))}},children:[(0,t.jsx)(O.ZP.TabPane,{tab:(0,t.jsx)(a.FormattedMessage,{id:"attributes"}),children:(0,t.jsxs)(L.ZP,g()(g()({},ve),{},{form:fe,children:[(0,t.jsxs)(ue.Z,{gutter:[16,16],children:[(0,t.jsx)(se.Z,{xs:{span:24},md:{span:12},children:(0,t.jsx)($.Z,{name:"name",label:(0,t.jsx)(a.FormattedMessage,{id:"name"}),tooltip:(0,t.jsx)(a.FormattedMessage,{id:"name"}),placeholder:I.formatMessage({id:"Name"}),required:!0,rules:[{validator:function(){var Y=l()(o()().mark(function k(K,H){return o()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(H){v.next=2;break}return v.abrupt("return",Promise.reject(new Error(I.formatMessage({id:"field_required",defaultMessage:"field_required"}))));case 2:return v.abrupt("return",Promise.resolve());case 3:case"end":return v.stop()}},k)}));function b(k,K){return Y.apply(this,arguments)}return b}()}]})}),!h&&(0,t.jsx)(se.Z,{xs:{span:24},md:{span:12},children:(0,t.jsx)($.Z,{name:"slug",label:(0,t.jsx)(a.FormattedMessage,{id:"slug"}),placeholder:I.formatMessage({id:"slug"}),disabled:!0,required:!0})}),(0,t.jsx)(se.Z,{xs:{span:24},md:{span:12},children:(0,t.jsx)(A.Z,{name:"free_views_count",label:(0,t.jsx)(a.FormattedMessage,{id:"free_views_count"}),tooltip:(0,t.jsx)(a.FormattedMessage,{id:"free_views_count_tooltip"}),placeholder:I.formatMessage({id:"Free views count"}),min:0})})]}),B&&(0,t.jsx)(de.Z,{})]}))},ne.FORM),(0,t.jsx)(O.ZP.TabPane,{tab:(0,t.jsx)(a.FormattedMessage,{id:"words"}),disabled:h,children:(0,t.jsx)(W,{})},ne.WORDS)]})}):(0,t.jsx)(de.Z,{})}},17948:function(ae,j,e){e.r(j);var Z=e(97857),g=e.n(Z),R=e(15009),o=e.n(R),E=e(99289),l=e.n(E),s=e(47389),d=e(82061),x=e(51042),i=e(74453),C=e(16894),n=e(2453),y=e(83062),m=e(14726),q=e(86738),z=e(67294),u=e(80854),J=e(73197),U=e(42782),w=e(66419),r=e(85893),G=function(){var N=l()(o()().mark(function f(a){return o()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,U.c)(a).then(function(P){return P.success&&n.ZP.success(P.message),!0}));case 1:case"end":return D.stop()}},f)}));return function(a){return N.apply(this,arguments)}}(),Q=function(){var f=(0,z.useRef)(),a=(0,u.useIntl)(),t=[{title:(0,r.jsx)(u.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:(0,r.jsx)(u.FormattedMessage,{id:"name",defaultMessage:"name"}),dataIndex:"name",sorter:!0},{title:(0,r.jsx)(u.FormattedMessage,{id:"slug",defaultMessage:"slug"}),dataIndex:"slug",sorter:!0},{title:(0,r.jsx)(u.FormattedMessage,{id:"free_views_count",defaultMessage:"free_views_count"}),dataIndex:"free_views_count",sorter:!0},{hideInSearch:!0,title:(0,r.jsx)(u.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",render:function(P,W){return[(0,r.jsx)(u.Link,{to:"/other/dictionary/".concat(W.id,"/").concat(J.DictionaryTabNames.FORM),children:(0,r.jsx)(y.Z,{title:(0,r.jsx)(u.FormattedMessage,{id:"edit",defaultMessage:"edit"}),children:(0,r.jsx)(m.ZP,{type:"primary",icon:(0,r.jsx)(s.Z,{})})})},"edit"),(0,r.jsx)(q.Z,{title:(0,r.jsx)(u.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:l()(o()().mark(function O(){var L;return o()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,G(W.id);case 2:L=A.sent,L&&f.current&&f.current.reload();case 4:case"end":return A.stop()}},O)})),okText:(0,r.jsx)(u.FormattedMessage,{id:"yes"}),cancelText:(0,r.jsx)(u.FormattedMessage,{id:"no"}),children:(0,r.jsx)(y.Z,{title:(0,r.jsx)(u.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,r.jsx)(m.ZP,{type:"primary",icon:(0,r.jsx)(d.Z,{}),danger:!0})})},"delete")]}}];return(0,r.jsx)(i._z,{children:(0,r.jsx)(C.ZP,{headerTitle:a.formatMessage({id:"menu.Other activities.Dictionary",defaultMessage:"Dictionary"}),actionRef:f,rowKey:"id",search:{layout:"vertical"},toolBarRender:function(){return[(0,r.jsx)(u.Link,{to:"/other/dictionary/new/".concat(J.DictionaryTabNames.FORM),children:(0,r.jsxs)(m.ZP,{type:"primary",children:[(0,r.jsx)(x.Z,{})," ",(0,r.jsx)(u.FormattedMessage,{id:"new",defaultMessage:"new"})]},"primary")},"new")]},request:function(P,W){var O=P.pageSize,L=P.current,$=P.name,A=P.slug;return(0,U.yX)(g()({per_page:O,page:L,name:$,slug:A},(0,w.di)(W,"created_at"))).then(function(p){return p.success?{data:p.data,total:p.meta.total,success:!0}:[]})},columns:t})})};j.default=Q}}]);

//# sourceMappingURL=p__Dictionary__index.bd58be5d.async.js.map