(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"+up7":function(z,h,e){"use strict";e.d(h,"f",function(){return A}),e.d(h,"d",function(){return D}),e.d(h,"b",function(){return U}),e.d(h,"h",function(){return g}),e.d(h,"c",function(){return R}),e.d(h,"e",function(){return i}),e.d(h,"a",function(){return c}),e.d(h,"g",function(){return O});var d=e("k1fw"),v=e("9og8"),r=e("WmNS"),n=e.n(r),p=e("9kvl");function A(s,f){return m.apply(this,arguments)}function m(){return m=Object(v.a)(n.a.mark(function s(f,E){return n.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(p.f)("/api/admin/settings",Object(d.a)({method:"GET",useCache:!1,params:Object(d.a)(Object(d.a)({},f),{},{per_page:f.pageSize,page:f.current})},E||{})));case 1:case"end":return o.stop()}},s)})),m.apply(this,arguments)}function D(s,f){return j.apply(this,arguments)}function j(){return j=Object(v.a)(n.a.mark(function s(f,E){return n.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(p.f)("/api/admin/settings/".concat(f),Object(d.a)({method:"GET",useCache:!1},E||{})));case 1:case"end":return o.stop()}},s)})),j.apply(this,arguments)}function U(s,f){return P.apply(this,arguments)}function P(){return P=Object(v.a)(n.a.mark(function s(f,E){return n.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(p.f)("/api/admin/settings",Object(d.a)({method:"POST",headers:{"Content-Type":"application/json"},data:f},E||{})));case 1:case"end":return o.stop()}},s)})),P.apply(this,arguments)}function g(s,f,E){return x.apply(this,arguments)}function x(){return x=Object(v.a)(n.a.mark(function s(f,E,u){return n.a.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",Object(p.f)("/api/admin/settings/".concat(f),Object(d.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:E},u||{})));case 1:case"end":return B.stop()}},s)})),x.apply(this,arguments)}function R(s,f){return M.apply(this,arguments)}function M(){return M=Object(v.a)(n.a.mark(function s(f,E){return n.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(p.f)("/api/admin/settings/".concat(f),Object(d.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},E||{})));case 1:case"end":return o.stop()}},s)})),M.apply(this,arguments)}function i(s){return l.apply(this,arguments)}function l(){return l=Object(v.a)(n.a.mark(function s(f){return n.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",Object(p.f)("/api/admin/settings/groups",Object(d.a)({method:"GET",useCache:!1},f||{})));case 1:case"end":return u.stop()}},s)})),l.apply(this,arguments)}function c(s){return t.apply(this,arguments)}function t(){return t=Object(v.a)(n.a.mark(function s(f){return n.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",Object(p.f)("/api/admin/config",Object(d.a)({method:"GET",useCache:!1},f||{})));case 1:case"end":return u.stop()}},s)})),t.apply(this,arguments)}function O(s,f){return b.apply(this,arguments)}function b(){return b=Object(v.a)(n.a.mark(function s(f,E){var u,o;return n.a.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return u=f.key,o=f.value,_.abrupt("return",Object(p.f)("/api/admin/config",Object(d.a)({method:"POST",data:{config:[{key:u,value:o}]}},E||{})));case 2:case"end":return _.stop()}},s)})),b.apply(this,arguments)}},"5ddx":function(z,h,e){"use strict";var d=e("9og8"),v=e("+L6B"),r=e("2/Rp"),n=e("tJVT"),p=e("WmNS"),A=e.n(p),m=e("q1tI"),D=e.n(m),j=e("9kvl"),U=e("Qiat"),P=e("VK58"),g=e("xvlK"),x=e("Xcxh"),R=e("y8nQ"),M=e("Vl3Y"),i=e("rmhi"),l=e("VMEa"),c=e("Qurx"),t=e("nKUr"),O=function(u){var o=Object(j.i)(),B=u.visible,_=u.onVisibleChange,J=u.onFinish,Z=M.a.useForm(),k=Object(n.a)(Z,1),w=k[0];return Object(m.useEffect)(function(){return function(){w.resetFields()}},[]),Object(t.jsx)(i.a,{form:w,title:o.formatMessage({id:"newSetting",defaultMessage:"newSetting"}),width:"30vw",visible:B,onVisibleChange:_,onFinish:J,children:Object(t.jsxs)(l.b.Group,{children:[Object(t.jsx)(c.a,{label:Object(t.jsx)(j.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"}),Object(t.jsx)(c.a,{label:Object(t.jsx)(j.a,{id:"value",defaultMessage:"value"}),rules:[{required:!0}],width:"md",name:"value"})]})})},b=O,s=function(u){var o=u.user,B=u.isProfile,_=B===void 0?!1:B,J=Object(m.useRef)(),Z=Object(j.i)(),k=Object(m.useState)(!1),w=Object(n.a)(k,2),a=w[0],H=w[1],q=Object(m.useState)("PATCH"),ee=Object(n.a)(q,2),X=ee[0],V=ee[1],L=[{title:Object(t.jsx)(j.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(j.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInSearch:!0}],K=Object(m.useCallback)(function(I){var C=I&&Object.entries(I).map(function(Q){return{key:Q[0],value:Q[1]}});return C},[o]);return Object(t.jsxs)(D.a.Fragment,{children:[Object(t.jsx)(U.a,{headerTitle:Z.formatMessage({id:"menu.settings"}),actionRef:J,rowKey:"id",search:!1,toolBarRender:_?function(){return[Object(t.jsxs)(r.a,{type:"primary",onClick:function(){H(-1),V("PATCH")},children:[Object(t.jsx)(g.a,{})," ",Object(t.jsx)(j.a,{id:"pages.searchTable.new"})]},"primary"),Object(t.jsxs)(r.a,{color:"yellow",type:"primary",onClick:function(){H(-1),V("PUT")},children:[Object(t.jsx)(x.a,{})," ",Object(t.jsx)(j.a,{id:"user.settings.overwrite"})]},"primary")]}:!1,request:function(){return Object(P.c)(Number(o)).then(function(C){return C.success?{data:K(C.data)}:[]})},columns:L}),Object(t.jsx)(b,{id:a,visible:Number.isInteger(a),onVisibleChange:function(C){return C===!1&&H(!1)},onFinish:function(){var I=Object(d.a)(A.a.mark(function C(Q){var Y;return A.a.wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,Object(P.f)(Number(o),X,Q);case 2:Y=$.sent,Y.success&&(H(!1),J.current&&J.current.reload());case 4:case"end":return $.stop()}},C)}));return function(C){return I.apply(this,arguments)}}()})]})},f=h.a=s},"DBJ/":function(z,h,e){"use strict";var d=e("y8nQ"),v=e("Vl3Y"),r=e("etVw"),n=e("q1tI"),p=e.n(n),A=e("9kvl"),m=e("qFDU"),D=e("nKUr"),j=e.n(D),U=function(g){var x=g.onChange,R=g.url,M=g.name,i=g.extra,l=g.accept,c=g.data,t=g.wrapInForm,O=t===void 0?!0:t,b=g.title,s=Object(A.i)();return c&&c[M]&&delete c[M],Object(D.jsx)(m.a,{condition:O,wrap:function(E){return Object(D.jsx)(v.a,{children:E})},children:Object(D.jsx)(r.a,{title:b||Object(D.jsx)(A.a,{id:"upload_click_here"}),placeholder:s.formatMessage({id:"upload_click_here"}),onChange:x,label:Object(D.jsx)(A.a,{id:"upload"}),max:2,fieldProps:{data:c,accept:l,name:M,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(R),extra:i})})};h.a=U},"F/zT":function(z,h,e){"use strict";var d=e("wx14"),v=e("VTBJ"),r=e("Ff2n"),n=e("q1tI"),p=e.n(n),A=e("adzw"),m=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],D=p.a.forwardRef(function(j,U){var P=j.fieldProps,g=j.unCheckedChildren,x=j.checkedChildren,R=j.proFieldProps,M=Object(r.a)(j,m);return p.a.createElement(A.a,Object(d.a)({valueType:"switch",mode:"edit",fieldProps:Object(v.a)({unCheckedChildren:g,checkedChildren:x},P),ref:U,valuePropName:"checked",proFieldProps:R,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},M))});h.a=D},"G/Ub":function(z,h,e){"use strict";e.d(h,"d",function(){return A}),e.d(h,"a",function(){return D}),e.d(h,"b",function(){return U}),e.d(h,"c",function(){return g}),e.d(h,"e",function(){return R});var d=e("k1fw"),v=e("9og8"),r=e("WmNS"),n=e.n(r),p=e("9kvl");function A(i){return m.apply(this,arguments)}function m(){return m=Object(v.a)(n.a.mark(function i(l){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(p.f)("/api/admin/roles",Object(d.a)({method:"GET",useCache:!1},l||{})));case 1:case"end":return t.stop()}},i)})),m.apply(this,arguments)}function D(i,l){return j.apply(this,arguments)}function j(){return j=Object(v.a)(n.a.mark(function i(l,c){return n.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Object(p.f)("/api/admin/roles",Object(d.a)({method:"POST",headers:{"Content-Type":"application/json"},data:l},c||{})));case 1:case"end":return O.stop()}},i)})),j.apply(this,arguments)}function U(i,l){return P.apply(this,arguments)}function P(){return P=Object(v.a)(n.a.mark(function i(l,c){return n.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Object(p.f)("/api/admin/roles/".concat(l),Object(d.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},c||{})));case 1:case"end":return O.stop()}},i)})),P.apply(this,arguments)}function g(i,l){return x.apply(this,arguments)}function x(){return x=Object(v.a)(n.a.mark(function i(l,c){return n.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Object(p.f)("/api/admin/roles/".concat(l),Object(d.a)({method:"GET",useCache:!1},c||{})));case 1:case"end":return O.stop()}},i)})),x.apply(this,arguments)}function R(i,l,c){return M.apply(this,arguments)}function M(){return M=Object(v.a)(n.a.mark(function i(l,c,t){return n.a.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",Object(p.f)("/api/admin/roles/".concat(l),Object(d.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:c},t||{})));case 1:case"end":return b.stop()}},i)})),M.apply(this,arguments)}},Jfn2:function(z,h,e){"use strict";var d=e("k1fw"),v=e("XCrF"),r=e("1GRj"),n=e("PpiC"),p=e("q1tI"),A=e.n(p),m=e("nKUr"),D=e.n(m),j=function(P){var g=P.path,x=P.size,R=P.srcSizes,M=P.alt,i=M===void 0?"LMS Image":M,l=Object(n.a)(P,["path","size","srcSizes","alt"]),c="".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(g,"&w=").concat(R?R[0]:x),t=R&&R.map(function(O){return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(g,"&w=").concat(O," ").concat(O,"w")});return Object(m.jsx)("div",{className:"escolalms-image",children:Object(m.jsx)(r.a,Object(d.a)({src:c,srcSet:t&&t.join(","),alt:i},l))})};h.a=j},tneF:function(z,h,e){"use strict";var d=e("sRBo"),v=e("kaz8"),r=e("wx14"),n=e("VTBJ"),p=e("Ff2n"),A=e("q1tI"),m=e.n(A),D=e("adzw"),j=e("uX+g"),U=e("WFLz"),P=["options","fieldProps","proFieldProps","valueEnum"],g=m.a.forwardRef(function(i,l){var c=i.options,t=i.fieldProps,O=i.proFieldProps,b=i.valueEnum,s=Object(p.a)(i,P);return m.a.createElement(D.a,Object(r.a)({ref:l,valueType:"checkbox",mode:"edit",valueEnum:Object(j.a)(b,void 0),fieldProps:Object(n.a)({options:c},t),proFieldProps:O},s))}),x=m.a.forwardRef(function(i,l){var c=i.fieldProps,t=i.children;return m.a.createElement(v.a,Object(r.a)({ref:l},c),t)}),R=Object(U.a)(x,{valuePropName:"checked"}),M=R;M.Group=g,h.a=M},weGn:function(z,h,e){"use strict";e.r(h);var d=e("nhC9"),v=e("Ty5D"),r=e("9kvl"),n=e("tMyG"),p=e("tU7J"),A=e("wFql"),m=e("DYRE"),D=e("zeV3"),j=e("y8nQ"),U=e("Vl3Y"),P=e("+L6B"),g=e("2/Rp"),x=e("T2oS"),R=e("W9HT"),M=e("miYZ"),i=e("tsqr"),l=e("k1fw"),c=e("9og8"),t=e("tJVT"),O=e("WmNS"),b=e.n(O),s=e("q1tI"),f=e.n(s),E=e("VMEa"),u=e("Qurx"),o=e("F/zT"),B=e("tneF"),_=e("VK58"),J=e("DBJ/"),Z=e("Jfn2"),k=e("G/Ub"),w=e("+up7"),a=e("nKUr"),H=function(X){var V,L=X.isNew,K=Object(r.i)(),I=Object(v.g)(),C=I.user,Q=Object(s.useState)(),Y=Object(t.a)(Q,2),N=Y[0],$=Y[1],oe=Object(s.useState)(),te=Object(t.a)(oe,2),ne=te[0],ue=te[1],ce=Object(s.useState)([]),re=Object(t.a)(ce,2),de=re[0],me=re[1],je=Object(s.useState)([]),se=Object(t.a)(je,2),ie=se[0],Oe=se[1],le=Object(s.useCallback)(Object(c.a)(b.a.mark(function T(){var y;return b.a.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,Object(_.j)(Number(C));case 2:y=S.sent,y.success&&$(Object(l.a)(Object(l.a)({},y.data),{},{bio:y.data.bio||""}));case 4:case"end":return S.stop()}},T)})),[C]),fe=Object(s.useCallback)(Object(c.a)(b.a.mark(function T(){var y,F;return b.a.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,Object(k.d)();case 2:return y=W.sent,W.next=5,y;case 5:F=W.sent,F.success&&ue(F.data);case 7:case"end":return W.stop()}},T)})),[C]),he=Object(s.useCallback)(Object(c.a)(b.a.mark(function T(){var y;return b.a.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,Object(w.a)();case 2:y=S.sent,y.success&&(me(y.data.escola_auth.additional_fields_required.value),Oe(y.data.escola_auth.additional_fields.value));case 4:case"end":return S.stop()}},T)})),[]);Object(s.useEffect)(function(){if(fe(),he(),L){$({});return}le()},[C,le]);var ve=Object(s.useMemo)(function(){return{onFinish:function(){var T=Object(c.a)(b.a.mark(function F(S){var W,ae;return b.a.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(ae=Object(l.a)(Object(l.a)({},S),{},{bio:S.bio?S.bio:void 0}),!L){G.next=8;break}return G.next=4,Object(_.a)(ae);case 4:W=G.sent,W.success&&r.d.push("/users/".concat(W.data.id,"/user_info")),G.next=11;break;case 8:return G.next=10,Object(_.i)(Number(C),ae);case 10:W=G.sent;case 11:i.default.success(W.message);case 12:case"end":return G.stop()}},F)}));function y(F){return T.apply(this,arguments)}return y}(),initialValues:N}},[N,C]);return N?Object(a.jsxs)(E.b,Object(l.a)(Object(l.a)({},ve),{},{children:[Object(a.jsxs)(E.b.Group,{children:[Object(a.jsx)(u.a,{width:"md",name:"first_name",label:Object(a.jsx)(r.a,{id:"first_name"}),tooltip:Object(a.jsx)(r.a,{id:"first_name"}),placeholder:K.formatMessage({id:"first_name"}),required:!0}),Object(a.jsx)(u.a,{width:"md",name:"last_name",label:Object(a.jsx)(r.a,{id:"last_name"}),tooltip:Object(a.jsx)(r.a,{id:"last_name"}),placeholder:K.formatMessage({id:"last_name"}),required:!0}),Object(a.jsx)(u.a,{width:"md",name:"email",label:Object(a.jsx)(r.a,{id:"email"}),tooltip:Object(a.jsx)(r.a,{id:"email"}),placeholder:K.formatMessage({id:"email"}),required:!0}),Object(a.jsx)(u.a.Password,{width:"md",name:"password",label:Object(a.jsx)(r.a,{id:"password"}),tooltip:Object(a.jsx)(r.a,{id:"password"}),placeholder:K.formatMessage({id:"password"}),required:L}),!L&&Object(a.jsxs)(D.b,{direction:"vertical",children:[!((V=N.roles)!==null&&V!==void 0&&V.includes("admin"))&&Object(a.jsx)(o.a,{initialValue:N.is_active,name:"email_verified",label:Object(a.jsx)(r.a,{id:"is_email_verified"})}),Object(a.jsx)(U.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(y){return y.getFieldValue("email_verified")?Object(a.jsx)(f.a.Fragment,{}):Object(a.jsx)(g.a,{size:"small",onClick:function(){Object(_.e)(y.getFieldValue("email")).then(function(){i.default.success(K.formatMessage({id:"email_resend"}))})},children:Object(a.jsx)(r.a,{id:"resend"})})}})]}),Object(a.jsx)(o.a,{name:"is_active",label:Object(a.jsx)(r.a,{id:"is_active"})}),ne&&Object(a.jsx)(B.a.Group,{name:"roles",layout:"horizontal",label:Object(a.jsx)(r.a,{id:"roles"}),options:ne.filter(function(T){return T.guard_name!=="web"}).map(function(T){return T.name})})]}),Object(a.jsx)(E.b.Group,{children:ie&&ie.map(function(T){return Object(a.jsx)(u.a,{required:de.includes(T),width:"md",name:T,label:Object(a.jsx)(r.a,{id:T}),tooltip:Object(a.jsx)(r.a,{id:T}),placeholder:K.formatMessage({id:T})})})}),!L&&Object(a.jsxs)(E.b.Group,{children:[Object(a.jsx)(E.b.Item,{name:"avatar",label:Object(a.jsx)(r.a,{id:"avatar"}),children:N.path_avatar?Object(a.jsx)(Z.a,{path:N.path_avatar,size:600,width:200}):Object(a.jsx)(A.a,{children:Object(a.jsx)(r.a,{id:"avatar_placeholder"})})}),Object(a.jsx)(U.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){return Object(a.jsx)(J.a,{wrapInForm:!1,url:"/api/admin/users/".concat(C,"/avatar"),name:"avatar",accept:"image/*",onChange:function(F){F.file.status==="done"&&F.file.response.success&&$(F.file.response.data)}})}})]})]})):Object(a.jsx)(R.a,{})},q=e("5ddx"),ee=h.default=function(){var X=Object(v.g)(),V=Object(r.i)(),L=X.tab,K=L===void 0?"user_info":L,I=X.user,C=typeof I=="undefined";return Object(a.jsx)(n.a,{title:Object(a.jsx)(r.a,{id:"settings"}),header:{breadcrumb:{routes:[{path:"/users/".concat(I,"/user_info"),breadcrumbName:V.formatMessage({id:"menu.Settings"})},{path:String(K),breadcrumbName:String(K)}]}},children:Object(a.jsxs)(d.a,{tabs:{type:"card",activeKey:K,onChange:function(Y){return r.d.push("/users/".concat(I,"/").concat(Y))}},children:[Object(a.jsx)(d.a.TabPane,{tab:C?Object(a.jsx)(r.a,{id:"new_user"}):Object(a.jsx)(r.a,{id:"edit_user"}),children:Object(a.jsx)(H,{isNew:C})},"user_info"),!C&&Object(a.jsx)(d.a.TabPane,{tab:Object(a.jsx)("span",{children:Object(a.jsx)(r.a,{id:"user.settings"})}),children:I&&Object(a.jsx)(q.a,{user:I,isProfile:!1})},"settings")]})})}}}]);
