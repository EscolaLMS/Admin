(window.webpackJsonp=window.webpackJsonp||[]).push([[10,11],{"0fbx":function(K,u,e){},BBow:function(K,u,e){"use strict";e.d(u,"a",function(){return m});var m=function(y){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"-",s=y.toString().toLowerCase().trim(),h=[{to:"a",from:"[\xC0\xC1\xC2\xC3\xC5\xC6\u0100\u0102\u0104\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6]"},{to:"ae",from:"[\xC4]"},{to:"c",from:"[\xC7\u0106\u0108\u010C]"},{to:"d",from:"[\xD0\u010E\u0110\xDE]"},{to:"e",from:"[\xC8\xC9\xCA\xCB\u0112\u0114\u0116\u0118\u011A\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6]"},{to:"g",from:"[\u011C\u011E\u0122\u01F4]"},{to:"h",from:"[\u0124\u1E26]"},{to:"i",from:"[\xCC\xCD\xCE\xCF\u0128\u012A\u012E\u0130\u1EC8\u1ECA]"},{to:"j",from:"[\u0134]"},{to:"ij",from:"[\u0132]"},{to:"k",from:"[\u0136]"},{to:"l",from:"[\u0139\u013B\u013D\u0141]"},{to:"m",from:"[\u1E3E]"},{to:"n",from:"[\xD1\u0143\u0145\u0147]"},{to:"o",from:"[\xD2\xD3\xD4\xD5\xD8\u014C\u014E\u0150\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u01EA\u01EC\u01A0]"},{to:"oe",from:"[\u0152\xD6]"},{to:"p",from:"[\u1E55]"},{to:"r",from:"[\u0154\u0156\u0158]"},{to:"s",from:"[\u015A\u015C\u015E\u0160]"},{to:"ss",from:"[\xDF]"},{to:"t",from:"[\u0162\u0164]"},{to:"u",from:"[\xD9\xDA\xDB\u0168\u016A\u016C\u016E\u0170\u0172\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u01AF]"},{to:"ue",from:"[\xDC]"},{to:"w",from:"[\u1E82\u0174\u1E80\u1E84]"},{to:"x",from:"[\u1E8D]"},{to:"y",from:"[\xDD\u0176\u0178\u1EF2\u1EF4\u1EF6\u1EF8]"},{to:"z",from:"[\u0179\u017B\u017D]"},{to:"-",from:"[\xB7/_,:;']"}];return h.forEach(function(C){s=s.replace(new RegExp(C.from,"gi"),C.to)}),s=s.toString().toLowerCase().replace(/\s+/g,"-").replace(/&/g,"-and-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),typeof r!="undefined"&&r!=="-"&&(s=s.replace(/-/g,r)),s}},CEpB:function(K,u,e){"use strict";var m=e("nRaC"),O=e("5RzL"),y=e("tJVT"),r=e("q1tI"),s=e.n(r),h=e("JifO"),C=e("9kvl"),E=e("nKUr"),v=e.n(E),F=function p(n){return n.subcategories&&n.subcategories.length?{title:n.name,value:n.id,children:n.subcategories.map(function(M){return p(M)})}:{title:n.name,value:n.id}},D=function(n){var M=n.value,i=n.onChange,R=n.multiple,T=R===void 0?!1:R,l=Object(r.useState)([]),a=Object(y.a)(l,2),f=a[0],d=a[1];Object(r.useEffect)(function(){Object(h.c)().then(function(P){return d(P.data)})},[]);var c=Object(r.useMemo)(function(){return f.map(function(P){return F(P)})},[f]);return Object(E.jsx)(O.a,{loading:f.length===0,multiple:T,showSearch:!0,style:{width:"100%"},value:M,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:Object(E.jsx)(C.a,{id:"select",defaultMessage:"Please select"}),allowClear:!0,treeDefaultExpandAll:!0,onChange:i,treeData:c,disabled:f.length===0})};u.a=D},"F/zT":function(K,u,e){"use strict";var m=e("wx14"),O=e("VTBJ"),y=e("Ff2n"),r=e("q1tI"),s=e.n(r),h=e("adzw"),C=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],E=s.a.forwardRef(function(v,F){var D=v.fieldProps,p=v.unCheckedChildren,n=v.checkedChildren,M=v.proFieldProps,i=Object(y.a)(v,C);return s.a.createElement(h.a,Object(m.a)({valueType:"switch",mode:"edit",fieldProps:Object(O.a)({unCheckedChildren:p,checkedChildren:n},D),ref:F,valuePropName:"checked",proFieldProps:M,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},i))});u.a=E},JifO:function(K,u,e){"use strict";e.d(u,"c",function(){return h}),e.d(u,"a",function(){return E}),e.d(u,"b",function(){return F}),e.d(u,"d",function(){return p}),e.d(u,"f",function(){return M}),e.d(u,"e",function(){return R});var m=e("k1fw"),O=e("9og8"),y=e("WmNS"),r=e.n(y),s=e("9kvl");function h(l){return C.apply(this,arguments)}function C(){return C=Object(O.a)(r.a.mark(function l(a){return r.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(s.f)("/api/categories/tree",Object(m.a)({method:"GET",useCache:!1},a||{})));case 1:case"end":return d.stop()}},l)})),C.apply(this,arguments)}function E(l){return v.apply(this,arguments)}function v(){return v=Object(O.a)(r.a.mark(function l(a){return r.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(s.f)("/api/categories",Object(m.a)({method:"GET",useCache:!1},a||{})));case 1:case"end":return d.stop()}},l)})),v.apply(this,arguments)}function F(l,a){return D.apply(this,arguments)}function D(){return D=Object(O.a)(r.a.mark(function l(a,f){return r.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(s.f)("/api/categories/".concat(a),Object(m.a)({method:"GET",useCache:!1},f||{})));case 1:case"end":return c.stop()}},l)})),D.apply(this,arguments)}function p(l,a){return n.apply(this,arguments)}function n(){return n=Object(O.a)(r.a.mark(function l(a,f){return r.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(s.f)("/api/categories",Object(m.a)({method:"POST",headers:{"Content-Type":"application/json"},data:a},f||{})));case 1:case"end":return c.stop()}},l)})),n.apply(this,arguments)}function M(l,a,f){return i.apply(this,arguments)}function i(){return i=Object(O.a)(r.a.mark(function l(a,f,d){return r.a.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",Object(s.f)("/api/categories/".concat(a),Object(m.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:f},d||{})));case 1:case"end":return P.stop()}},l)})),i.apply(this,arguments)}function R(l,a,f){return T.apply(this,arguments)}function T(){return T=Object(O.a)(r.a.mark(function l(a,f,d){return r.a.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",Object(s.f)("/api/categories/".concat(a),Object(m.a)({method:"DELETE",headers:{"Content-Type":"application/json"},data:f},d||{})));case 1:case"end":return P.stop()}},l)})),T.apply(this,arguments)}},N0Of:function(K,u,e){"use strict";e.r(u);var m=e("P2fV"),O=e("NJEC"),y=e("5Dmo"),r=e("3S7+"),s=e("+L6B"),h=e("2/Rp"),C=e("+BJd"),E=e("mr32"),v=e("tJVT"),F=e("k1fw"),D=e("miYZ"),p=e("tsqr"),n=e("9og8"),M=e("WmNS"),i=e.n(M),R=e("xvlK"),T=e("q1tI"),l=e.n(T),a=e("9kvl"),f=e("tMyG"),d=e("Qiat"),c=e("JifO"),P=e("y8nQ"),Y=e("Vl3Y"),H=e("rmhi"),w=e("Qurx"),Z=e("F/zT"),X=e("VMEa"),k=e("BBow"),q=e("CEpB"),t=e("nKUr"),ee=function(x){var b=Object(a.i)(),_=x.visible,j=x.onVisibleChange,L=x.onFinish,o=x.id,g=Y.a.useForm(),G=Object(v.a)(g,1),A=G[0];return Object(T.useEffect)(function(){typeof o=="number"&&o>0?Object(c.b)(o).then(function(S){A.setFieldsValue(S.data)}):A.resetFields()},[o,A]),Object(t.jsxs)(H.a,{form:A,title:b.formatMessage({id:typeof o=="number"&&o>0?"editCategory":"newCategory",defaultMessage:typeof o=="number"&&o>0?"editCategory":"newCategory"}),width:"400px",visible:_,onVisibleChange:j,onFinish:L,onValuesChange:function(z){z.name&&A.setFieldsValue({slug:Object(k.a)(z.name)})},children:[Object(t.jsx)(w.a,{label:Object(t.jsx)(a.a,{id:"name",defaultMessage:"name"}),rules:[{required:!0}],width:"md",name:"name"}),Object(t.jsx)(w.a,{width:"md",name:"slug",label:Object(t.jsx)(a.a,{id:"slug"}),placeholder:b.formatMessage({id:"slug"}),disabled:!0,required:!0}),Object(t.jsx)(Z.a,{name:"is_active",label:Object(t.jsx)(a.a,{id:"is_active",defaultMessage:"is_active"})}),Object(t.jsx)(X.b.Item,{name:"parent_id",label:Object(t.jsx)(a.a,{id:"parent_category",defaultMessage:"parent_category"}),valuePropName:"value",children:Object(t.jsx)(q.a,{})})]})},te=ee,ae=e("G3dp"),Q=e("/MfK"),re=function(){var N=Object(n.a)(i.a.mark(function x(b,_,j){var L;return i.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return L=p.default.loading(b.formatMessage({id:"loading"})),g.prev=1,g.next=4,j&&j!==-1?Object(c.f)(j,Object(F.a)({},_)):Object(c.d)(Object(F.a)({},_));case 4:return L(),p.default.success(b.formatMessage({id:"success"})),g.abrupt("return",!0);case 9:return g.prev=9,g.t0=g.catch(1),L(),p.default.error(p.default.success(b.formatMessage({id:"error"}))),g.abrupt("return",!1);case 14:case"end":return g.stop()}},x,null,[[1,9]])}));return function(b,_,j){return N.apply(this,arguments)}}(),ne=function(){var N=Object(n.a)(i.a.mark(function x(b,_){var j;return i.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return j=p.default.loading(b.formatMessage({id:"loading"})),o.prev=1,o.next=4,Object(c.e)(_);case 4:return j(),p.default.success(b.formatMessage({id:"success"})),o.abrupt("return",!0);case 9:return o.prev=9,o.t0=o.catch(1),j(),p.default.error(b.formatMessage({id:"error"})),o.abrupt("return",!1);case 14:case"end":return o.stop()}},x,null,[[1,9]])}));return function(b,_){return N.apply(this,arguments)}}(),se=function(){var x=Object(T.useState)(!1),b=Object(v.a)(x,2),_=b[0],j=b[1],L=Object(T.useState)([]),o=Object(v.a)(L,2),g=o[0],G=o[1],A=Object(T.useRef)(),S=Object(a.i)(),z=Object(T.useCallback)(function(W){return!!g.some(function(I){return I.parent_id===W})},[g]),oe=[{title:Object(t.jsx)(a.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"name",defaultMessage:"name"}),dataIndex:"name",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"full_name",defaultMessage:"full_name"}),dataIndex:"name_with_breadcrumbs",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"slug",defaultMessage:"slug"}),dataIndex:"slug",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleStatus",defaultMessage:"\u72B6\u6001"}),dataIndex:"is_active",hideInForm:!0,hideInSearch:!0,valueEnum:{true:{text:Object(t.jsx)(E.a,{color:"error",children:Object(t.jsx)(a.a,{id:"Inactive",defaultMessage:"Inactive"})}),status:"Inactive"},false:{text:Object(t.jsx)(E.a,{color:"success",children:Object(t.jsx)(a.a,{id:"Active",defaultMessage:"Active"})}),status:"Active"}}},{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"parent_id",defaultMessage:"parent_id"}),dataIndex:"parent_id",tip:"name key",render:function(I,U){var B=g.find(function(V){return V.id===U.parent_id});return B?Object(t.jsx)(h.a,{size:"small",onClick:function(){return j(B.id)},children:B.name}):Object(t.jsx)(l.a.Fragment,{children:Object(t.jsx)(a.a,{id:"none"})})}},{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(I,U){return[Object(t.jsx)(r.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(h.a,{type:"primary",icon:Object(t.jsx)(ae.a,{}),onClick:function(){return j(U.id)}})},"edit"),z(U.id)?Object(t.jsx)(r.a,{title:Object(t.jsx)(a.a,{id:"cantDelete",defaultMessage:"You can't delete this category because it's parent to others"}),children:Object(t.jsx)(h.a,{disabled:!0,type:"primary",icon:Object(t.jsx)(Q.a,{}),danger:!0})},"delete"):Object(t.jsx)(O.a,{title:Object(t.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(n.a)(i.a.mark(function B(){var V;return i.a.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,ne(S,U.id);case 2:V=J.sent,V&&(j(!1),A.current&&A.current.reload());case 4:case"end":return J.stop()}},B)})),okText:Object(t.jsx)(a.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(a.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(r.a,{title:Object(t.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(h.a,{type:"primary",icon:Object(t.jsx)(Q.a,{}),danger:!0})})},"delete")]}}];return Object(t.jsxs)(f.a,{children:[Object(t.jsx)(d.a,{headerTitle:S.formatMessage({id:"categories",defaultMessage:"categories"}),actionRef:A,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[Object(t.jsxs)(h.a,{type:"primary",onClick:function(){j(-1)},children:[Object(t.jsx)(R.a,{})," ",Object(t.jsx)(a.a,{id:"pages.searchTable.new",defaultMessage:"\u65B0\u5EFA"})]},"primary")]},request:function(){return Object(c.a)().then(function(I){return G(I.data),I})},columns:oe,pagination:{pageSize:100}}),Object(t.jsx)(te,{id:_,visible:Number.isInteger(_),onVisibleChange:function(I){return I===!1&&j(!1)},onFinish:function(){var W=Object(n.a)(i.a.mark(function I(U){var B;return i.a.wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,re(S,U,Number(_));case 2:B=$.sent,B&&(j(!1),A.current&&A.current.reload());case 4:case"end":return $.stop()}},I)}));return function(I){return W.apply(this,arguments)}}()})]})},le=u.default=se},Qurx:function(K,u,e){"use strict";var m=e("wx14"),O=e("Ff2n"),y=e("q1tI"),r=e.n(y),s=e("adzw"),h=["fieldProps","proFieldProps"],C=["fieldProps","proFieldProps"],E="text",v=function(n){var M=n.fieldProps,i=n.proFieldProps,R=Object(O.a)(n,h);return r.a.createElement(s.a,Object(m.a)({mode:"edit",valueType:E,fieldProps:M,filedConfig:{valueType:E},proFieldProps:i},R))},F=function(n){var M=n.fieldProps,i=n.proFieldProps,R=Object(O.a)(n,C);return r.a.createElement(s.a,Object(m.a)({mode:"edit",valueType:"password",fieldProps:M,proFieldProps:i,filedConfig:{valueType:E}},R))},D=v;D.Password=F,D.displayName="ProFormComponent",u.a=D},nRaC:function(K,u,e){"use strict";var m=e("EFp3"),O=e.n(m),y=e("0fbx"),r=e.n(y),s=e("OaEy"),h=e("R9oj")}}]);
