(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{"2ult":function(J,m,e){"use strict";var _=e("OaEy"),i=e("2fM7"),j=e("T2oS"),h=e("W9HT"),L=e("oBTY"),C=e("tJVT"),E=e("q1tI"),A=e.n(E),K=e("ri8c"),p=e("9kvl"),v=e("nKUr"),W=e.n(v),l=function(M){var d=M.value,g=M.onChange,y=M.multiple,x=y===void 0?!1:y,F=Object(E.useState)([]),a=Object(C.a)(F,2),r=a[0],s=a[1],D=Object(E.useState)(!1),t=Object(C.a)(D,2),O=t[0],N=t[1],V=Object(E.useRef)(),G=Object(E.useRef)(),n=Object(E.useCallback)(function(f){s(function(o){return[].concat(Object(L.a)(o),Object(L.a)(f)).filter(function(T,P,S){return S.findIndex(function(R){return R.id===T.id})===P})})},[]);Object(E.useEffect)(function(){V.current=r},[r]);var w=Object(E.useCallback)(function(f){N(!0),G.current&&G.current.abort(),G.current=new AbortController,Object(K.g)({search:f},{signal:G.current.signal}).then(function(o){o.success&&n(o.data),N(!1)}).catch(function(){return N(!1)})},[n]),H=Object(E.useCallback)(function(f){w(f)},[w]);return Object(E.useEffect)(function(){var f=new AbortController;if(d){var o=Array.isArray(d)?d:[d];o.filter(function(T){var P;return!((P=V.current)!==null&&P!==void 0&&P.find(function(S){return S.id===T}))}).forEach(function(T){Object(K.f)(Number(T),{signal:f.signal}).then(function(P){P&&P.success&&n([P.data])})})}return function(){f.abort()}},[d,n]),Object(v.jsx)(i.a,{onFocus:function(){return w()},allowClear:!0,style:{width:"100%"},value:d,onChange:g,mode:x?"multiple":void 0,showSearch:!0,onSearch:H,placeholder:Object(v.jsx)(p.a,{id:"select_user_group",defaultMessage:"Select user group"}),optionFilterProp:"children",filterOption:function(o,T){if(T&&T.children){var P;return(T==null||(P=T.children)===null||P===void 0?void 0:P.toString().toLowerCase().indexOf(o.toLowerCase()))>=0}return!0},notFoundContent:O?Object(v.jsx)(h.a,{size:"small"}):null,children:r.map(function(f){return Object(v.jsx)(i.a.Option,{value:f.id,children:f.name_with_breadcrumbs},f.id)})})};m.a=l},"F/zT":function(J,m,e){"use strict";var _=e("VTBJ"),i=e("Ff2n"),j=e("nKUr"),h=e.n(j),L=e("q1tI"),C=e.n(L),E=e("adzw"),A=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],K=C.a.forwardRef(function(p,v){var W=p.fieldProps,l=p.unCheckedChildren,c=p.checkedChildren,M=p.proFieldProps,d=Object(i.a)(p,A);return Object(j.jsx)(E.a,Object(_.a)({valueType:"switch",fieldProps:Object(_.a)({unCheckedChildren:l,checkedChildren:c},W),ref:v,valuePropName:"checked",proFieldProps:M,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},d))});m.a=K},Qurx:function(J,m,e){"use strict";var _=e("VTBJ"),i=e("Ff2n"),j=e("nKUr"),h=e.n(j),L=e("adzw"),C=["fieldProps","proFieldProps"],E=["fieldProps","proFieldProps"],A="text",K=function(l){var c=l.fieldProps,M=l.proFieldProps,d=Object(i.a)(l,C);return Object(j.jsx)(L.a,Object(_.a)({valueType:A,fieldProps:c,filedConfig:{valueType:A},proFieldProps:M},d))},p=function(l){var c=l.fieldProps,M=l.proFieldProps,d=Object(i.a)(l,E);return Object(j.jsx)(L.a,Object(_.a)({valueType:"password",fieldProps:c,proFieldProps:M,filedConfig:{valueType:A}},d))},v=K;v.Password=p,v.displayName="ProFormComponent",m.a=v},UNho:function(J,m,e){"use strict";e.r(m);var _=e("Mwp2"),i=e("VXEj"),j=e("+L6B"),h=e("2/Rp"),L=e("/zsF"),C=e("PArb"),E=e("tU7J"),A=e("wFql"),K=e("T2oS"),p=e("W9HT"),v=e("miYZ"),W=e("tsqr"),l=e("qLMh"),c=e("k1fw"),M=e("9og8"),d=e("tJVT"),g=e("q1tI"),y=e.n(g),x=e("VMEa"),F=e("Qurx"),a=e("F/zT"),r=e("nhC9"),s=e("ri8c"),D=e("tMyG"),t=e("9kvl"),O=e("Ty5D"),N=e("/MfK"),V=e("0WSk"),G=e("2ult"),n=e("nKUr"),w=e.n(n);m.default=function(){var H=Object(t.l)(),f=Object(O.l)(),o=f.group,T=o==="new",P=Object(g.useState)(),S=Object(d.a)(P,2),R=S[0],$=S[1],Y=Object(g.useCallback)(Object(M.a)(Object(l.a)().mark(function U(){var u;return Object(l.a)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,Object(s.f)(Number(o));case 2:u=I.sent,u.success&&$(Object(c.a)({},u.data));case 4:case"end":return I.stop()}},U)})),[o]),X=Object(g.useCallback)(function(U){$(function(u){var b;return Object(c.a)(Object(c.a)({},u),{},{users:u?u==null||(b=u.users)===null||b===void 0?void 0:b.filter(function(I){return I.id!==U}):[]})}),Object(s.d)(Number(o),U).then(function(u){u.success&&$(function(b){return Object(c.a)(Object(c.a)({},b),{},{users:u.data})})})},[o]),Z=Object(g.useCallback)(function(U){var u;!U||R!=null&&(u=R.users)!==null&&u!==void 0&&u.find(function(b){return b.id===U})||Object(s.a)(Number(o),U).then(function(b){b.success&&$(function(I){return Object(c.a)(Object(c.a)({},I),{},{users:b.data})})})},[R,o]);Object(g.useEffect)(function(){if(o==="new"){$({});return}Y()},[o,Y]);var k=Object(g.useMemo)(function(){return{onFinish:function(){var U=Object(M.a)(Object(l.a)().mark(function b(I){var z,Q;return Object(l.a)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(Q=Object(c.a)({},I),o!=="new"){B.next=8;break}return B.next=4,Object(s.b)(Q);case 4:z=B.sent,z.success&&t.f.push("/users/groups/".concat(z.data.id)),B.next=11;break;case 8:return B.next=10,Object(s.e)(Number(o),Q);case 10:z=B.sent;case 11:W.b.success(z.message);case 12:case"end":return B.stop()}},b)}));function u(b){return U.apply(this,arguments)}return u}(),initialValues:R}},[R,o]);return R?Object(n.jsx)(D.a,{title:T?Object(n.jsx)(t.a,{id:"new_user_group"}):Object(n.jsx)(t.a,{id:"edit_user_group"}),children:Object(n.jsx)(r.a,{children:Object(n.jsxs)(x.a,Object(c.a)(Object(c.a)({},k),{},{children:[Object(n.jsxs)(x.a.Group,{children:[Object(n.jsx)(F.a,{width:"md",name:"name",label:Object(n.jsx)(t.a,{id:"name"}),tooltip:Object(n.jsx)(t.a,{id:"name"}),placeholder:H.formatMessage({id:"name"}),required:!0}),Object(n.jsx)(x.a.Item,{style:{minWidth:"300px"},name:"parent_id",label:Object(n.jsx)(t.a,{id:"parent_id_group",defaultMessage:"parent_id_group"}),valuePropName:"value",children:Object(n.jsx)(G.a,{})}),Object(n.jsx)(a.a,{name:"registerable",label:Object(n.jsx)(t.a,{id:"registerable"})})]}),o!=="new"&&Object(n.jsxs)(y.a.Fragment,{children:[Object(n.jsxs)(x.a.Group,{children:[Object(n.jsx)(A.a,{children:Object(n.jsx)(t.a,{id:"add_person_to_group",defaultMessage:"Add User to group"})}),Object(n.jsx)(V.a,{onChange:function(u){return Z(Number(u))}})]}),Object(n.jsx)(C.a,{}),Object(n.jsx)(i.b,{size:"small",itemLayout:"horizontal",dataSource:R.users,renderItem:function(u){return Object(n.jsxs)(i.b.Item,{actions:[Object(n.jsxs)(h.a,{onClick:function(){return X(u.id)},type:"primary",icon:Object(n.jsx)(N.a,{}),size:"small",danger:!0,children:[" ",Object(n.jsx)(t.a,{id:"delete"})]},"delete")],children:[u.first_name," ",u.last_name," ",Object(n.jsx)("small",{children:u.email})]})}})]}),Object(n.jsx)(C.a,{})]}))})}):Object(n.jsx)(p.a,{})}},ri8c:function(J,m,e){"use strict";e.d(m,"g",function(){return L}),e.d(m,"f",function(){return E}),e.d(m,"e",function(){return K}),e.d(m,"b",function(){return v}),e.d(m,"c",function(){return l}),e.d(m,"a",function(){return M}),e.d(m,"d",function(){return g}),e.d(m,"h",function(){return x});var _=e("qLMh"),i=e("k1fw"),j=e("9og8"),h=e("9kvl");function L(a,r){return C.apply(this,arguments)}function C(){return C=Object(j.a)(Object(_.a)().mark(function a(r,s){return Object(_.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(h.i)("/api/admin/user-groups",Object(i.a)({params:Object(i.a)(Object(i.a)({},r),{},{per_page:r.pageSize,page:r.current,search:r.search?r.search:void 0,parent_id:r.parent_id}),method:"GET",useCache:!1},s||{})));case 1:case"end":return t.stop()}},a)})),C.apply(this,arguments)}function E(a,r){return A.apply(this,arguments)}function A(){return A=Object(j.a)(Object(_.a)().mark(function a(r,s){return Object(_.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(h.i)("/api/admin/user-groups/".concat(r),Object(i.a)({method:"GET",useCache:!1},s||{})));case 1:case"end":return t.stop()}},a)})),A.apply(this,arguments)}function K(a,r,s){return p.apply(this,arguments)}function p(){return p=Object(j.a)(Object(_.a)().mark(function a(r,s,D){return Object(_.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Object(h.i)("/api/admin/user-groups/".concat(r),Object(i.a)({data:s,method:"PUT"},D||{})));case 1:case"end":return O.stop()}},a)})),p.apply(this,arguments)}function v(a,r){return W.apply(this,arguments)}function W(){return W=Object(j.a)(Object(_.a)().mark(function a(r,s){return Object(_.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(h.i)("/api/admin/user-groups",Object(i.a)({data:r,method:"POST"},s||{})));case 1:case"end":return t.stop()}},a)})),W.apply(this,arguments)}function l(a,r){return c.apply(this,arguments)}function c(){return c=Object(j.a)(Object(_.a)().mark(function a(r,s){return Object(_.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(h.i)("/api/admin/user-groups/".concat(r),Object(i.a)({method:"DELETE"},s||{})));case 1:case"end":return t.stop()}},a)})),c.apply(this,arguments)}function M(a,r,s){return d.apply(this,arguments)}function d(){return d=Object(j.a)(Object(_.a)().mark(function a(r,s,D){return Object(_.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Object(h.i)("/api/admin/user-groups/".concat(r,"/members"),Object(i.a)({data:{user_id:s},method:"POST"},D||{})));case 1:case"end":return O.stop()}},a)})),d.apply(this,arguments)}function g(a,r,s){return y.apply(this,arguments)}function y(){return y=Object(j.a)(Object(_.a)().mark(function a(r,s,D){return Object(_.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Object(h.i)("/api/admin/user-groups/".concat(r,"/members/").concat(s),Object(i.a)({method:"DELETE"},D||{})));case 1:case"end":return O.stop()}},a)})),y.apply(this,arguments)}function x(a,r){return F.apply(this,arguments)}function F(){return F=Object(j.a)(Object(_.a)().mark(function a(r,s){return Object(_.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(h.i)("/api/admin/user-groups/tree",Object(i.a)({params:r,method:"GET"},s||{})));case 1:case"end":return t.stop()}},a)})),F.apply(this,arguments)}}}]);
