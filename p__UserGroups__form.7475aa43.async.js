(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"2ult":function(z,f,e){"use strict";var s=e("OaEy"),t=e("2fM7"),Q=e("T2oS"),m=e("W9HT"),n=e("oBTY"),U=e("tJVT"),E=e("q1tI"),$=e.n(E),p=e("ri8c"),K=e("9kvl"),M=e("nKUr"),Y=e.n(M),O=function(y){var P=y.value,S=y.onChange,I=y.multiple,N=I===void 0?!1:I,l=Object(E.useState)([]),i=Object(U.a)(l,2),h=i[0],A=i[1],d=Object(E.useState)(!1),u=Object(U.a)(d,2),W=u[0],V=u[1],de=Object(E.useRef)(),X=Object(E.useRef)(),w=Object(E.useCallback)(function(g){A(function(F){return[].concat(Object(n.a)(F),Object(n.a)(g)).filter(function(_,T,ee){return ee.findIndex(function(re){return re.id===_.id})===T})})},[]);Object(E.useEffect)(function(){de.current=h},[h]);var c=Object(E.useCallback)(function(g){V(!0),X.current&&X.current.abort(),X.current=new AbortController,Object(p.g)({search:g},{signal:X.current.signal}).then(function(F){F.success&&w(F.data),V(!1)}).catch(function(){return V(!1)})},[w]),be=Object(E.useCallback)(function(g){c(g)},[c]);return Object(E.useEffect)(function(){var g=new AbortController;if(P){var F=Array.isArray(P)?P:[P];F.filter(function(_){var T;return!((T=de.current)!==null&&T!==void 0&&T.find(function(ee){return ee.id===_}))}).forEach(function(_){Object(p.f)(Number(_),{signal:g.signal}).then(function(T){T&&T.success&&w([T.data])})})}return function(){g.abort()}},[P,w]),Object(M.jsx)(t.a,{onFocus:function(){return c()},allowClear:!0,style:{width:"100%"},value:P,onChange:S,mode:N?"multiple":void 0,showSearch:!0,onSearch:be,placeholder:Object(M.jsx)(K.a,{id:"select_user_group",defaultMessage:"Select user group"}),optionFilterProp:"children",filterOption:function(F,_){if(_&&_.children){var T;return(_==null||(T=_.children)===null||T===void 0?void 0:T.toString().toLowerCase().indexOf(F.toLowerCase()))>=0}return!0},notFoundContent:W?Object(M.jsx)(m.a,{size:"small"}):null,children:h.map(function(g){return Object(M.jsx)(t.a.Option,{value:g.id,children:g.name_with_breadcrumbs},g.id)})})};f.a=O},"F/zT":function(z,f,e){"use strict";var s=e("wx14"),t=e("VTBJ"),Q=e("Ff2n"),m=e("q1tI"),n=e.n(m),U=e("adzw"),E=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],$=n.a.forwardRef(function(p,K){var M=p.fieldProps,Y=p.unCheckedChildren,O=p.checkedChildren,R=p.proFieldProps,y=Object(Q.a)(p,E);return n.a.createElement(U.a,Object(s.a)({valueType:"switch",mode:"edit",fieldProps:Object(t.a)({unCheckedChildren:Y,checkedChildren:O},M),ref:K,valuePropName:"checked",proFieldProps:R,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},y))});f.a=$},Qurx:function(z,f,e){"use strict";var s=e("wx14"),t=e("Ff2n"),Q=e("q1tI"),m=e.n(Q),n=e("adzw"),U=["fieldProps","proFieldProps"],E=["fieldProps","proFieldProps"],$="text",p=function(O){var R=O.fieldProps,y=O.proFieldProps,P=Object(t.a)(O,U);return m.a.createElement(n.a,Object(s.a)({mode:"edit",valueType:$,fieldProps:R,filedConfig:{valueType:$},proFieldProps:y},P))},K=function(O){var R=O.fieldProps,y=O.proFieldProps,P=Object(t.a)(O,E);return m.a.createElement(n.a,Object(s.a)({mode:"edit",valueType:"password",fieldProps:R,proFieldProps:y,filedConfig:{valueType:$}},P))},M=p;M.Password=K,M.displayName="ProFormComponent",f.a=M},S76h:function(z,f,e){},TLLU:function(z,f,e){"use strict";var s=e("5OYt");function t(){return Object(s.a)()}f.a={useBreakpoint:t}},UNho:function(z,f,e){"use strict";e.r(f);var s=e("Mwp2"),t=e("VXEj"),Q=e("+L6B"),m=e("2/Rp"),n=e("/zsF"),U=e("PArb"),E=e("tU7J"),$=e("wFql"),p=e("T2oS"),K=e("W9HT"),M=e("miYZ"),Y=e("tsqr"),O=e("k1fw"),R=e("9og8"),y=e("tJVT"),P=e("WmNS"),S=e.n(P),I=e("q1tI"),N=e.n(I),l=e("VMEa"),i=e("Qurx"),h=e("F/zT"),A=e("nhC9"),d=e("ri8c"),u=e("tMyG"),W=e("9kvl"),V=e("Ty5D"),de=e("/MfK"),X=e("0WSk"),w=e("2ult"),c=e("nKUr"),be=e.n(c);f.default=function(){var g=Object(W.i)(),F=Object(V.l)(),_=F.group,T=_==="new",ee=Object(I.useState)(),re=Object(y.a)(ee,2),H=re[0],te=re[1],fe=Object(I.useCallback)(Object(R.a)(S.a.mark(function B(){var b;return S.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(d.f)(Number(_));case 2:b=r.sent,b.success&&te(Object(O.a)({},b.data));case 4:case"end":return r.stop()}},B)})),[_]),ge=Object(I.useCallback)(function(B){te(function(b){var a;return Object(O.a)(Object(O.a)({},b),{},{users:b?b==null||(a=b.users)===null||a===void 0?void 0:a.filter(function(r){return r.id!==B}):[]})}),Object(d.d)(Number(_),B).then(function(b){b.success&&te(function(a){return Object(O.a)(Object(O.a)({},a),{},{users:b.data})})})},[_]),Me=Object(I.useCallback)(function(B){var b;!B||H!=null&&(b=H.users)!==null&&b!==void 0&&b.find(function(a){return a.id===B})||Object(d.a)(Number(_),B).then(function(a){a.success&&te(function(r){return Object(O.a)(Object(O.a)({},r),{},{users:a.data})})})},[H,_]);Object(I.useEffect)(function(){if(_==="new"){te({});return}fe()},[_,fe]);var ae=Object(I.useMemo)(function(){return{onFinish:function(){var B=Object(R.a)(S.a.mark(function a(r){var o,j;return S.a.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(j=Object(O.a)({},r),_!=="new"){D.next=8;break}return D.next=4,Object(d.b)(j);case 4:o=D.sent,o.success&&W.d.push("/user_groups/".concat(o.data.id)),D.next=11;break;case 8:return D.next=10,Object(d.e)(Number(_),j);case 10:o=D.sent;case 11:Y.default.success(o.message);case 12:case"end":return D.stop()}},a)}));function b(a){return B.apply(this,arguments)}return b}(),initialValues:H}},[H,_]);return H?Object(c.jsx)(u.a,{title:T?Object(c.jsx)(W.a,{id:"new_user_group"}):Object(c.jsx)(W.a,{id:"edit_user_group"}),children:Object(c.jsx)(A.a,{children:Object(c.jsxs)(l.a,Object(O.a)(Object(O.a)({},ae),{},{children:[Object(c.jsxs)(l.a.Group,{children:[Object(c.jsx)(i.a,{width:"md",name:"name",label:Object(c.jsx)(W.a,{id:"name"}),tooltip:Object(c.jsx)(W.a,{id:"name"}),placeholder:g.formatMessage({id:"name"}),required:!0}),Object(c.jsx)(l.a.Item,{style:{minWidth:"300px"},name:"parent_id",label:Object(c.jsx)(W.a,{id:"parent_id_group",defaultMessage:"parent_id_group"}),valuePropName:"value",children:Object(c.jsx)(w.a,{})}),Object(c.jsx)(h.a,{name:"registerable",label:Object(c.jsx)(W.a,{id:"registerable"})})]}),_!=="new"&&Object(c.jsxs)(N.a.Fragment,{children:[Object(c.jsxs)(l.a.Group,{children:[Object(c.jsx)($.a,{children:Object(c.jsx)(W.a,{id:"add_person_to_group",defaultMessage:"Add User to group"})}),Object(c.jsx)(X.a,{onChange:function(b){return Me(Number(b))}})]}),Object(c.jsx)(U.a,{}),Object(c.jsx)(t.b,{size:"small",itemLayout:"horizontal",dataSource:H.users,renderItem:function(b){return Object(c.jsxs)(t.b.Item,{actions:[Object(c.jsxs)(m.a,{onClick:function(){return ge(b.id)},type:"primary",icon:Object(c.jsx)(de.a,{}),size:"small",danger:!0,children:[" ",Object(c.jsx)(W.a,{id:"delete"})]})],children:[b.first_name," ",b.last_name," ",Object(c.jsx)("small",{children:b.email})]})}})]}),Object(c.jsx)(U.a,{})]}))})}):Object(c.jsx)(K.a,{})}},VzZb:function(z,f,e){},"aK+R":function(z,f,e){},df8c:function(z,f,e){},nhC9:function(z,f,e){"use strict";var s=e("VTBJ"),t=e("nKUr"),Q=e("Znn+"),m=e("ZTPi"),n=e("rePB"),U=e("U8pU"),E=e("ODXe"),$=e("GNNt"),p=e("wEI+"),K=e("Ff2n"),M=e("1GLa"),Y=e("TLLU"),O=e("UESt"),R=e("YSkC"),y=e("TSYQ"),P=e.n(y),S=e("BGR+"),I=e("6cGi"),N=e("q1tI"),l=e.n(N),i=e("S76h"),h=function(r){var o=r.actions,j=r.prefixCls;return Array.isArray(o)&&(o==null?void 0:o.length)?Object(t.jsx)("ul",{className:"".concat(j,"-actions"),children:o.map(function(G,D){return Object(t.jsx)("li",{style:{width:"".concat(100/o.length,"%")},children:Object(t.jsx)("span",{children:G})},"action-".concat(D))})}):o?Object(t.jsx)("ul",{className:"".concat(j,"-actions"),children:o}):null},A=h,d=e("jCWc"),u=e("kPKH"),W=e("14J3"),V=e("BMrR"),de=e("aK+R"),X=function(r){var o=r.style,j=r.prefix;return Object(t.jsxs)("div",{className:"".concat(j,"-loading-content"),style:o,children:[Object(t.jsx)(V.a,{gutter:8,children:Object(t.jsx)(u.a,{span:22,children:Object(t.jsx)("div",{className:"".concat(j,"-loading-block")})})}),Object(t.jsxs)(V.a,{gutter:8,children:[Object(t.jsx)(u.a,{span:8,children:Object(t.jsx)("div",{className:"".concat(j,"-loading-block")})}),Object(t.jsx)(u.a,{span:15,children:Object(t.jsx)("div",{className:"".concat(j,"-loading-block")})})]}),Object(t.jsxs)(V.a,{gutter:8,children:[Object(t.jsx)(u.a,{span:6,children:Object(t.jsx)("div",{className:"".concat(j,"-loading-block")})}),Object(t.jsx)(u.a,{span:18,children:Object(t.jsx)("div",{className:"".concat(j,"-loading-block")})})]}),Object(t.jsxs)(V.a,{gutter:8,children:[Object(t.jsx)(u.a,{span:13,children:Object(t.jsx)("div",{className:"".concat(j,"-loading-block")})}),Object(t.jsx)(u.a,{span:9,children:Object(t.jsx)("div",{className:"".concat(j,"-loading-block")})})]}),Object(t.jsxs)(V.a,{gutter:8,children:[Object(t.jsx)(u.a,{span:4,children:Object(t.jsx)("div",{className:"".concat(j,"-loading-block")})}),Object(t.jsx)(u.a,{span:3,children:Object(t.jsx)("div",{className:"".concat(j,"-loading-block")})}),Object(t.jsx)(u.a,{span:16,children:Object(t.jsx)("div",{className:"".concat(j,"-loading-block")})})]})]})},w=X,c=e("df8c"),be=["className","style","bodyStyle","headStyle","title","subTitle","extra","tip","wrap","layout","loading","gutter","tooltip","split","headerBordered","bordered","children","size","actions","ghost","hoverable","direction","collapsed","collapsible","collapsibleIconRender","defaultCollapsed","onCollapse","checked","onChecked","tabs","type"],g=Y.a.useBreakpoint,F=l.a.forwardRef(function(a,r){var o,j,G,D=a.className,se=a.style,ce=a.bodyStyle,k=ce===void 0?{}:ce,oe=a.headStyle,ye=oe===void 0?{}:oe,he=a.title,De=a.subTitle,ue=a.extra,xe=a.tip,Ee=a.wrap,Qe=Ee===void 0?!1:Ee,Xe=a.layout,_e=a.loading,Le=a.gutter,we=Le===void 0?0:Le,ke=a.tooltip,Oe=a.split,Re=a.headerBordered,qe=Re===void 0?!1:Re,We=a.bordered,et=We===void 0?!1:We,Ke=a.children,Se=a.size,tt=a.actions,Ne=a.ghost,at=Ne===void 0?!1:Ne,Fe=a.hoverable,nt=Fe===void 0?!1:Fe,rt=a.direction,Ge=a.collapsed,ze=a.collapsible,st=ze===void 0?!1:ze,$e=a.collapsibleIconRender,Ve=a.defaultCollapsed,ct=Ve===void 0?!1:Ve,ot=a.onCollapse,lt=a.checked,Te=a.onChecked,Ae=a.tabs,Ue=a.type,je=Object(K.a)(a,be),it=Object(N.useContext)(p.default.ConfigContext),dt=it.getPrefixCls,Je=g(),ut=Object(I.a)(ct,{value:Ge,onChange:ot}),Ye=Object(E.a)(ut,2),Pe=Ye[0],_t=Ye[1],pe=["xxl","xl","lg","md","sm","xs"],Ot=function(x){var C=[0,0],J=Array.isArray(x)?x:[x,0];return J.forEach(function(Z,ne){if(Object(U.a)(Z)==="object")for(var q=0;q<pe.length;q+=1){var me=pe[q];if(Je[me]&&Z[me]!==void 0){C[ne]=Z[me];break}}else C[ne]=Z||0}),C},ve=function(x,C){return x?C:{}},jt=function(x){var C=x;if(Object(U.a)(x)==="object")for(var J=0;J<pe.length;J+=1){var Z=pe[J];if(Je[Z]&&x[Z]!==void 0){C=x[Z];break}}var ne=ve(typeof C=="string"&&/\d%|\dpx/i.test(C),{width:C,flexShrink:0});return{span:C,colSpanStyle:ne}},v=dt("pro-card"),vt=Ot(we),Ze=Object(E.a)(vt,2),le=Ze[0],ie=Ze[1],Ie=!1,Be=l.a.Children.toArray(Ke),mt=Be.map(function(L,x){var C;if(L==null||(C=L.type)===null||C===void 0?void 0:C.isProCard){var J;Ie=!0;var Z=L.props.colSpan,ne=jt(Z),q=ne.span,me=ne.colSpanStyle,Et=P()(["".concat(v,"-col")],(J={},Object(n.a)(J,"".concat(v,"-split-vertical"),Oe==="vertical"&&x!==Be.length-1),Object(n.a)(J,"".concat(v,"-split-horizontal"),Oe==="horizontal"&&x!==Be.length-1),Object(n.a)(J,"".concat(v,"-col-").concat(q),typeof q=="number"&&q>=0&&q<=24),J));return Object(t.jsx)("div",{style:Object(s.a)(Object(s.a)(Object(s.a)({},me),ve(le>0,{paddingRight:le/2,paddingLeft:le/2})),ve(ie>0,{paddingTop:ie/2,paddingBottom:ie/2})),className:Et,children:l.a.cloneElement(L)},"pro-card-col-".concat((L==null?void 0:L.key)||x))}return L}),bt=P()("".concat(v),D,(o={},Object(n.a)(o,"".concat(v,"-border"),et),Object(n.a)(o,"".concat(v,"-contain-card"),Ie),Object(n.a)(o,"".concat(v,"-loading"),_e),Object(n.a)(o,"".concat(v,"-split"),Oe==="vertical"||Oe==="horizontal"),Object(n.a)(o,"".concat(v,"-ghost"),at),Object(n.a)(o,"".concat(v,"-hoverable"),nt),Object(n.a)(o,"".concat(v,"-size-").concat(Se),Se),Object(n.a)(o,"".concat(v,"-type-").concat(Ue),Ue),Object(n.a)(o,"".concat(v,"-collapse"),Pe),Object(n.a)(o,"".concat(v,"-checked"),lt),o)),ft=P()("".concat(v,"-body"),(j={},Object(n.a)(j,"".concat(v,"-body-center"),Xe==="center"),Object(n.a)(j,"".concat(v,"-body-direction-column"),Oe==="horizontal"||rt==="column"),Object(n.a)(j,"".concat(v,"-body-wrap"),Qe&&Ie),j)),ht=Object(s.a)(Object(s.a)(Object(s.a)({},ve(le>0,{marginRight:-le/2,marginLeft:-le/2})),ve(ie>0,{marginTop:-ie/2,marginBottom:-ie/2})),k),He=l.a.isValidElement(_e)?_e:Object(t.jsx)(w,{prefix:v,style:k.padding===0||k.padding==="0px"?{padding:24}:void 0}),Ce=st&&Ge===void 0&&($e?$e({collapsed:Pe}):Object(t.jsx)(O.a,{rotate:Pe?void 0:90,className:"".concat(v,"-collapsible-icon")}));return Object(t.jsxs)("div",Object(s.a)(Object(s.a)({className:bt,style:se,ref:r,onClick:function(x){var C;Te==null||Te(x),je==null||(C=je.onClick)===null||C===void 0||C.call(je,x)}},Object(S.a)(je,["prefixCls","colSpan"])),{},{children:[(he||ue||Ce)&&Object(t.jsxs)("div",{className:P()("".concat(v,"-header"),(G={},Object(n.a)(G,"".concat(v,"-header-border"),qe||Ue==="inner"),Object(n.a)(G,"".concat(v,"-header-collapsible"),Ce),G)),style:ye,onClick:function(){Ce&&_t(!Pe)},children:[Object(t.jsxs)("div",{className:"".concat(v,"-title"),children:[Ce,Object(t.jsx)(R.a,{label:he,tooltip:ke||xe,subTitle:De})]}),ue&&Object(t.jsx)("div",{className:"".concat(v,"-extra"),children:ue})]}),Ae?Object(t.jsx)("div",{className:"".concat(v,"-tabs"),children:Object(t.jsx)(m.a,Object(s.a)(Object(s.a)({onChange:Ae.onChange},Ae),{},{children:_e?He:Ke}))}):Object(t.jsx)("div",{className:ft,style:ht,children:_e?He:mt}),Object(t.jsx)(A,{actions:tt,prefixCls:v})]}))}),_=F,T=e("u1OI"),ee=function(r){var o=Object(N.useContext)(p.default.ConfigContext),j=o.getPrefixCls,G=j("pro-card-divider"),D=r.className,se=r.style,ce=se===void 0?{}:se,k=r.type,oe=P()(G,D,Object(n.a)({},"".concat(G,"-").concat(k),k));return Object(t.jsx)("div",{className:oe,style:ce})},re=ee,H=e("VzZb"),te=["key","tab","tabKey","disabled","destroyInactiveTabPane","children","className","style","cardProps"],fe=function(r){var o=r.key,j=r.tab,G=r.tabKey,D=r.disabled,se=r.destroyInactiveTabPane,ce=r.children,k=r.className,oe=r.style,ye=r.cardProps,he=Object(K.a)(r,te),De=Object(N.useContext)(p.default.ConfigContext),ue=De.getPrefixCls,xe=ue("pro-card-tabpane"),Ee=P()(xe,k);return Object(t.jsx)(m.a.TabPane,Object(s.a)(Object(s.a)({tabKey:G,tab:j,className:Ee,style:oe,disabled:D,destroyInactiveTabPane:se},he),{},{children:Object(t.jsx)(_,Object(s.a)(Object(s.a)({},ye),{},{children:ce}))}),o)},ge=fe,Me=function(r){return Object(t.jsx)(_,Object(s.a)({bodyStyle:{padding:0}},r))},ae=_;ae.isProCard=!0,ae.Divider=re,ae.TabPane=ge,ae.Group=Me;var B=ae,b=f.a=B},ri8c:function(z,f,e){"use strict";e.d(f,"g",function(){return U}),e.d(f,"f",function(){return $}),e.d(f,"e",function(){return K}),e.d(f,"b",function(){return Y}),e.d(f,"c",function(){return R}),e.d(f,"a",function(){return P}),e.d(f,"d",function(){return I});var s=e("k1fw"),t=e("9og8"),Q=e("WmNS"),m=e.n(Q),n=e("9kvl");function U(l,i){return E.apply(this,arguments)}function E(){return E=Object(t.a)(m.a.mark(function l(i,h){return m.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(n.f)("/api/admin/user-groups",Object(s.a)({params:Object(s.a)(Object(s.a)({},i),{},{per_page:i.pageSize,page:i.current,search:i.search?i.search:void 0,parent_id:i.parent_id}),method:"GET",useCache:!1},h||{})));case 1:case"end":return d.stop()}},l)})),E.apply(this,arguments)}function $(l,i){return p.apply(this,arguments)}function p(){return p=Object(t.a)(m.a.mark(function l(i,h){return m.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(n.f)("/api/admin/user-groups/".concat(i),Object(s.a)({method:"GET",useCache:!1},h||{})));case 1:case"end":return d.stop()}},l)})),p.apply(this,arguments)}function K(l,i,h){return M.apply(this,arguments)}function M(){return M=Object(t.a)(m.a.mark(function l(i,h,A){return m.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",Object(n.f)("/api/admin/user-groups/".concat(i),Object(s.a)({data:h,method:"PUT"},A||{})));case 1:case"end":return u.stop()}},l)})),M.apply(this,arguments)}function Y(l,i){return O.apply(this,arguments)}function O(){return O=Object(t.a)(m.a.mark(function l(i,h){return m.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(n.f)("/api/admin/user-groups",Object(s.a)({data:i,method:"POST"},h||{})));case 1:case"end":return d.stop()}},l)})),O.apply(this,arguments)}function R(l,i){return y.apply(this,arguments)}function y(){return y=Object(t.a)(m.a.mark(function l(i,h){return m.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(n.f)("/api/admin/user-groups/".concat(i),Object(s.a)({method:"DELETE"},h||{})));case 1:case"end":return d.stop()}},l)})),y.apply(this,arguments)}function P(l,i,h){return S.apply(this,arguments)}function S(){return S=Object(t.a)(m.a.mark(function l(i,h,A){return m.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",Object(n.f)("/api/admin/user-groups/".concat(i,"/members"),Object(s.a)({data:{user_id:h},method:"POST"},A||{})));case 1:case"end":return u.stop()}},l)})),S.apply(this,arguments)}function I(l,i,h){return N.apply(this,arguments)}function N(){return N=Object(t.a)(m.a.mark(function l(i,h,A){return m.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",Object(n.f)("/api/admin/user-groups/".concat(i,"/members/").concat(h),Object(s.a)({method:"DELETE"},A||{})));case 1:case"end":return u.stop()}},l)})),N.apply(this,arguments)}},u1OI:function(z,f,e){}}]);
