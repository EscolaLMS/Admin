(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"3fxf":function(z,u,e){"use strict";var P=e("DjyN"),v=e("NUBc"),K=e("Mwp2"),c=e("VXEj"),O=e("+L6B"),E=e("2/Rp"),m=e("5NDa"),y=e("5rEg"),h=e("oBTY"),n=e("k1fw"),b=e("tJVT"),x=e("DYRE"),W=e("zeV3"),p=e("tU7J"),l=e("wFql"),r=e("q1tI"),i=e.n(r),f=e("BAh9"),o=e("/MfK"),F=e("mAF4"),g=e("dF/Y"),I=e("9kvl"),N=e("DBJ/"),C=e("lLVY"),ne=e.n(C),a=e("nKUr"),ae=e.n(a),J=function(U){var T=U.directory,L=U.onUploaded;return Object(a.jsxs)(W.b,{align:"start",children:[Object(a.jsxs)(l.a.Text,{children:[Object(a.jsx)(I.a,{id:"pages.files.filesBrowser"}),Object(a.jsx)(l.a.Text,{code:!0,children:T})]}),Object(a.jsx)(N.a,{url:"/api/admin/file/upload",name:"file[]",data:{target:T},onUpload:function(S){S.success&&L(T,S.data)}})]})},X=function(U){var T=U.defaultDirectory,L=T===void 0?"/":T,B=U.onFile,S=U.hideDeleteBtn,Z=S===void 0?!1:S,Y=U.forceLoading,w=Y===void 0?!1:Y,k=Object(I.i)(),q=Object(r.useState)({loading:!1,name:"",directory:L,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),G=Object(b.a)(q,2),d=G[0],$=G[1],A=Object(r.useRef)(),D=Object(r.useCallback)(function(_){$(function(t){return Object(n.a)(Object(n.a)({},t),{},{loading:_})})},[]),Q=Object(r.useCallback)(function(_,t){$(function(s){return Object(n.a)(Object(n.a)(Object(n.a)({},s),_.data),{},{data:[{url:t.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(h.a)(_.data.data.map(function(j){return Object(n.a)(Object(n.a)({},j),{},{url:j.mime==="directory"?"".concat(t,"/").concat(j.name):j.url})}))).filter(function(j){return t==="/"||t===L?j.name!=="..":!0}),directory:t,loading:!1})})},[D]),M=Object(r.useCallback)(function(_){var t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,j=function(){return A.current&&A.current.abort()};return j(),A.current=new AbortController,D(!0),Object(f.a)({directory:_,page:s},{signal:(t=A.current)===null||t===void 0?void 0:t.signal}).then(function(R){R.success&&Q(R,_)}).catch(function(){return D(!1)}),function(){j()}},[D]);Object(r.useEffect)(function(){return M(L)},[L,M]);var ee=Object(r.useCallback)(function(_){D(!0),Object(f.c)(_).then(function(){M(d.directory)}).catch(function(){D(!1)})},[M,D,d.directory]),te=Object(r.useCallback)(function(_,t){var s,j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,R=function(){return A.current&&A.current.abort()};return R(),A.current=new AbortController,D(!0),Object(f.b)({directory:_,name:t,page:j},{signal:(s=A.current)===null||s===void 0?void 0:s.signal}).then(function(V){V.success&&Q(V,_)}).catch(function(){return D(!1)}),function(){R()}},[D]);return Object(a.jsxs)("div",{className:"file-browser",children:[Object(a.jsxs)("div",{className:"file-browser__header",children:[Object(a.jsx)(y.a,{placeholder:k.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(t){return $(function(s){return Object(n.a)(Object(n.a)({},s),{},{name:t.target.value})})},value:d.name}),Object(a.jsxs)("div",{children:[Object(a.jsx)(E.a,{className:"file-browser__button",onClick:function(){return M(d.directory)},children:Object(a.jsx)(I.a,{id:"reset"})}),Object(a.jsx)(E.a,{className:"file-browser__button",type:"primary",onClick:function(){return te(d.directory,d.name)},children:Object(a.jsx)(I.a,{id:"query"})})]})]}),Object(a.jsx)(c.b,{loading:d.loading||w,size:"small",itemLayout:"horizontal",dataSource:d.data,header:Object(a.jsx)(J,{directory:d.directory,onUploaded:function(t,s){s&&(M(t),B&&B(s,t))}}),footer:Object(a.jsx)(J,{directory:d.directory,onUploaded:function(t,s){M(t),s&&B&&B(s,t)}}),renderItem:function(t){return Object(a.jsx)(c.b.Item,{actions:t.mime!=="directory"&&!Z?[Object(a.jsx)(E.a,{type:"default",danger:!0,icon:Object(a.jsx)(o.a,{}),size:"small",onClick:function(){return ee(t.url)}},"dir")]:[],children:Object(a.jsx)(c.b.Item.Meta,{avatar:t.mime==="directory"?Object(a.jsx)(E.a,{type:"primary",icon:Object(a.jsx)(F.a,{}),size:"small",onClick:function(){return M(t.url)}}):Object(a.jsx)("a",{href:t.url,target:"_blank",rel:"noreferrer",children:Object(a.jsx)(E.a,{type:"default",icon:Object(a.jsx)(g.a,{}),size:"small"})}),description:Object(a.jsx)(i.a.Fragment,{children:Object(a.jsx)(E.a,{type:"text",size:"small",onClick:function(){return t.mime==="directory"?M(t.url):B&&B(t,d.directory)},children:t.name})})})})}}),Object(a.jsx)(v.a,{pageSizeOptions:[],current:d.current_page,total:d.total,pageSize:d.per_page,onChange:function(t){return M(d.directory,t)}})]})};u.a=X},BAh9:function(z,u,e){"use strict";e.d(u,"a",function(){return E}),e.d(u,"b",function(){return y}),e.d(u,"e",function(){return n}),e.d(u,"d",function(){return x}),e.d(u,"c",function(){return W});var P=e("k1fw"),v=e("9og8"),K=e("WmNS"),c=e.n(K),O=e("9kvl");function E(l,r){return m.apply(this,arguments)}function m(){return m=Object(v.a)(c.a.mark(function l(r,i){return c.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(O.f)("/api/admin/file/list",Object(P.a)({method:"GET",params:r},i||{})));case 1:case"end":return o.stop()}},l)})),m.apply(this,arguments)}function y(l,r){return h.apply(this,arguments)}function h(){return h=Object(v.a)(c.a.mark(function l(r,i){return c.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(O.f)("/api/admin/file/find",Object(P.a)({method:"GET",params:r},i||{})));case 1:case"end":return o.stop()}},l)})),h.apply(this,arguments)}function n(l,r,i){return b.apply(this,arguments)}function b(){return b=Object(v.a)(c.a.mark(function l(r,i,f){var o;return c.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return o=new FormData,o.append("file[]",r),o.append("target",i),g.abrupt("return",Object(O.f)("/api/admin/file/upload",Object(P.a)({method:"POST",data:o},f||{})));case 4:case"end":return g.stop()}},l)})),b.apply(this,arguments)}var x=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(r,"&w=").concat(i)};function W(l,r){return p.apply(this,arguments)}function p(){return p=Object(v.a)(c.a.mark(function l(r,i){return c.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(O.f)("/api/admin/file/delete",Object(P.a)({method:"DELETE",data:{url:r}},i||{})));case 1:case"end":return o.stop()}},l)})),p.apply(this,arguments)}},"DBJ/":function(z,u,e){"use strict";var P=e("k1fw"),v=e("y8nQ"),K=e("Vl3Y"),c=e("etVw"),O=e("9kvl"),E=e("qFDU"),m=e("nKUr"),y=e.n(m);function h(n){var b=n.onChange,x=n.onUpload,W=n.url,p=n.name,l=n.extra,r=n.accept,i=n.data,f=n.wrapInForm,o=f===void 0?!0:f,F=n.title,g=n.formProps,I=Object(O.i)();return i&&i[p]&&delete i[p],Object(m.jsx)(E.a,{condition:o,wrap:function(C){return Object(m.jsx)(K.a,Object(P.a)(Object(P.a)({},g),{},{children:C}))},children:Object(m.jsx)(c.a,{title:F||Object(m.jsx)(O.a,{id:"upload_click_here"}),placeholder:I.formatMessage({id:"upload_click_here"}),onChange:function(C){b&&b(C),C.file.status==="done"&&x&&x(C.file.response)},label:Object(m.jsx)(O.a,{id:"upload"}),max:2,fieldProps:{data:i,accept:r,name:p,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(W),extra:l})})}u.a=h},lLVY:function(z,u,e){},u4ym:function(z,u,e){"use strict";e.r(u);var P=e("IzEo"),v=e("bx4M"),K=e("tU7J"),c=e("wFql"),O=e("q1tI"),E=e.n(O),m=e("tMyG"),y=e("9kvl"),h=e("3fxf"),n=e("nKUr"),b=e.n(n);u.default=function(){return Object(n.jsx)(m.a,{children:Object(n.jsxs)(v.a,{children:[Object(n.jsx)(c.a.Text,{strong:!0,children:Object(n.jsx)(y.a,{id:"pages.files.content"})}),Object(n.jsx)(h.a,{})]})})}}}]);
