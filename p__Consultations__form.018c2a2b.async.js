(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"4f6N":function($,M,t){"use strict";var B=t("2qtc"),P=t("kLXV"),b=t("9kvl"),v=t("nKUr"),W=t.n(v),N=function(m){var U=m.visible,C=m.setManage;return Object(v.jsx)(P.a,{width:"600px",title:Object(v.jsx)(b.a,{id:"course.validate_edit.header",defaultMessage:"course.validate_edit.header"}),visible:U,onOk:function(){return C({showModal:!1,disableEdit:!1,clicked:!0})},onCancel:function(){return C({showModal:!1,disableEdit:!0,clicked:!1})},okText:"OK",cancelText:"Cancel",children:Object(v.jsx)("p",{children:Object(v.jsx)(b.a,{id:"course.validate_edit.content",defaultMessage:"course.validate_edit.content"})})})};M.a=N},"5qq5":function($,M,t){"use strict";var B=t("7Kak"),P=t("9yH6"),b=t("VTBJ"),v=t("Ff2n"),W=t("nKUr"),N=t.n(W),G=t("uX+g"),m=t("q1tI"),U=t.n(m),C=t("WFLz"),g=t("adzw"),D=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],T=U.a.forwardRef(function(o,z){var y=o.fieldProps,q=o.options,nt=o.radioType,et=o.layout,J=o.proFieldProps,st=o.valueEnum,ot=Object(v.a)(o,D);return Object(W.jsx)(g.a,Object(b.a)(Object(b.a)({valueType:nt==="button"?"radioButton":"radio",ref:z,valueEnum:Object(G.a)(st,void 0)},ot),{},{fieldProps:Object(b.a)({options:q,layout:et},y),proFieldProps:J,filedConfig:{customLightMode:!0}}))}),a=U.a.forwardRef(function(o,z){var y=o.fieldProps,q=o.children;return Object(W.jsx)(P.a,Object(b.a)(Object(b.a)({},y),{},{ref:z,children:q}))}),V=Object(C.a)(a,{valuePropName:"checked",ignoreWidth:!0}),R=V;R.Group=T,R.Button=P.a.Button,R.displayName="ProFormComponent",M.a=R},CiB2:function($,M,t){"use strict";t.d(M,"a",function(){return B});function B(P){if(P==null)throw new TypeError("Cannot destructure undefined")}},CiXh:function($,M,t){"use strict";var B=t("2qtc"),P=t("kLXV"),b=t("9kvl"),v=t("nKUr"),W=t.n(v),N=function(m){var U=m.open,C=m.onOk,g=m.onCancel,D=m.title,T=m.content,a=m.okText,V=m.loading;return Object(v.jsx)(P.a,{width:"600px",title:D!=null?D:Object(v.jsx)(b.a,{id:"confirmModal.title"}),open:U,onOk:C,onCancel:g,okText:a!=null?a:Object(v.jsx)(b.a,{id:"save"}),cancelText:Object(v.jsx)(b.a,{id:"cancel"}),confirmLoading:V,children:T!=null?T:Object(v.jsx)("p",{children:Object(v.jsx)(b.a,{id:"confirmModal.content"})})})};M.a=N},FJDo:function($,M,t){"use strict";var B=t("VTBJ"),P=t("Ff2n"),b=t("nKUr"),v=t.n(b),W=t("q1tI"),N=t.n(W),G=t("adzw"),m=["fieldProps","min","proFieldProps","max"],U=function(g,D){var T=g.fieldProps,a=g.min,V=g.proFieldProps,R=g.max,o=Object(P.a)(g,m);return Object(b.jsx)(G.a,Object(B.a)({valueType:"digit",fieldProps:Object(B.a)({min:a,max:R},T),ref:D,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:V},o))};M.a=N.a.forwardRef(U)},GZq3:function($,M,t){},"J+hL":function($,M,t){},eFHa:function($,M,t){"use strict";t.d(M,"a",function(){return G});var B=t("k1fw"),P=t("tJVT"),b=t("q1tI"),v=t("/Tr7"),W=t("jIYg");function N(m){return Object(W.a)(1,arguments),Object(v.a)(m).getTime()<Date.now()}function G(){var m=Object(b.useState)({showModal:!1,disableEdit:!1,clicked:!1}),U=Object(P.a)(m,2),C=U[0],g=U[1],D=function(a){(a==null?void 0:a.status)==="published"&&a!==null&&a!==void 0&&a.active_from&&N(new Date(a==null?void 0:a.active_from))&&!C.clicked?g(Object(B.a)(Object(B.a)({},C),{},{showModal:!1,disableEdit:!0,clicked:!1})):g(Object(B.a)(Object(B.a)({},C),{},{showModal:!1,disableEdit:!1,clicked:!1}))};return{manageCourseEdit:C,setManageCourseEdit:g,validateCourseEdit:D}}},q34N:function($,M,t){"use strict";var B=t("tJVT"),P=t("0eZe"),b=t("q1tI"),v=t.n(b),W=t("nKUr"),N=t.n(W),G=function(U){var C=U.productable,g=U.type,D=g===void 0?"card":g,T=Object(b.useState)("attributes"),a=Object(B.a)(T,2),V=a[0],R=a[1];return Object(W.jsx)(P.a,{productable:C,tab:V,onTabChange:function(z){return R(z)},type:D})};M.a=G},rh3J:function($,M,t){"use strict";t.r(M);var B=t("14J3"),P=t("BMrR"),b=t("jCWc"),v=t("kPKH"),W=t("fOrg"),N=t("+KLJ"),G=t("+L6B"),m=t("2/Rp"),U=t("T2oS"),C=t("W9HT"),g=t("miYZ"),D=t("tsqr"),T=t("qLMh"),a=t("k1fw"),V=t("9og8"),R=t("tJVT"),o=t("q1tI"),z=t.n(o),y=t("VMEa"),q=t("Qurx"),nt=t("yj/a"),et=t("lR9U"),J=t("nhC9"),st=t("hd5d"),ot=t("tMyG"),n=t("9kvl"),Ot=t("Ty5D"),bt=t("0WSk"),vt=t("TWax"),tt=t("Gb5Y"),Ft=t("OaEy"),ft=t("2fM7"),Lt=t("iQDF"),it=t("+eQT"),Kt=t("+BJd"),mt=t("mr32"),ht=t("oBTY"),gt=t("wd/R"),k=t.n(gt),Nt=t("GZq3"),e=t("nKUr"),lt=function(l){return l.local().valueOf()},pt=function(l){var h=l.value,s=h===void 0?[]:h,S=l.onChange,E=l.format,A=E===void 0?"DD-MM-YYYY HH:mm":E,X=l.selectProps,Q=X===void 0?{}:X,u=Object(o.useState)(!1),F=Object(R.a)(u,2),Z=F[0],r=F[1],I=Object(o.useCallback)(function(O){var f=lt(O),i=s.indexOf(f),d=Object(ht.a)(s);i>-1?d.splice(i,1):d.push(f),S(d)},[s]),j=Object(o.useCallback)(function(O){var f=s.indexOf(lt(O))>-1;return Object(e.jsx)("div",{className:"ant-picker-cell-inner",style:f?{position:"relative",zIndex:2,display:"inlineBlock",width:"24px",height:"22px",lineHeight:"22px",backgroundColor:"#1890ff",color:"#fff",margin:"auto",borderRadius:"2px",transition:"background 0.3s, border 0.3s"}:{},children:O.date()})},[s]),x=Object(o.useCallback)(function(O){var f=O.value,i=O.onClose,d=function(){i(),S(s.filter(function(K){return K!==f}))};return Object(e.jsx)(mt.a,{onClose:d,closable:!0,children:k()(f).format(A)})},[s]),L=function(){return{disabledMinutes:function(){return Array.from({length:59},function(i,d){return d+1})}}};return Object(e.jsx)(ft.a,Object(a.a)(Object(a.a)({},Q),{},{allowClear:!0,mode:"multiple",value:s,onClear:function(){return S&&S([])},tagRender:x,open:Z,onFocus:function(){return r(!0)},onBlur:function(){return r(!1)},dropdownMatchSelectWidth:!1,dropdownClassName:"multipleDropdownClassName",dropdownStyle:{height:"310px",width:"335px",minWidth:"0"},dropdownRender:function(){return Object(e.jsx)(it.a,{disabledDate:function(i){var d=new Date;return i&&i.valueOf()<=d.setDate(d.getDate()-1)},showTime:{format:"HH"},disabledTime:L,onChange:function(i){return i&&I(i)},open:!0,dateRender:j,style:{visibility:"hidden"},getPopupContainer:function(i){var d=i.parentNode;return d},defaultValue:k()("00:00","HH")})}}))},Et=pt,at=t("c+yx"),dt=t("Gn8c"),rt;(function(p){p.draft="draft",p.published="published",p.archived="archived"})(rt||(rt={}));var xt=t("eFHa"),Mt=t("4f6N"),Ct=t("CiB2"),Vt=t("qbNl"),Pt=t("JBPa"),Ht=t("5Dmo"),Dt=t("3S7+"),Gt=t("Awhp"),ct=t("KrTs"),Tt=t("Qiat"),yt=function(l){var h=l.data,s=l.onChange,S=Object(o.useState)(!1),E=Object(R.a)(S,2),A=E[0],X=E[1],Q=Object(o.useState)(k()(h.date)),u=Object(R.a)(Q,2),F=u[0],Z=u[1],r=Object(o.useCallback)(function(I){Z(k()(I)),X(!0),Object(tt.a)(h.consultation_term_id,I).then(function(j){j.success?(D.b.success(j.message),s(F)):D.b.error(j.message)}).catch(function(j){return D.b.error(j.toString())}).finally(function(){return X(!1)})},[F]);return Object(e.jsx)(z.a.Fragment,{children:Object(e.jsx)(it.a,{disabledDate:function(j){var x=new Date;return j&&j.valueOf()<=x.setDate(x.getDate()-1)},disabled:A,value:F,showTime:{format:"HH"},onChange:function(j){j&&r(j.toISOString())}})})},ut={reported:"warning",reject:"error",approved:"success"},It=[{title:Object(e.jsx)(n.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"consultation_term_id",hideInSearch:!0,sorter:!0},{title:Object(e.jsx)(n.a,{id:"user",defaultMessage:"user"}),dataIndex:"user",render:function(l,h){var s,S,E;return"".concat((s=h.user)===null||s===void 0?void 0:s.first_name," ").concat((S=h.user)===null||S===void 0?void 0:S.last_name," ").concat((E=h.user)===null||E===void 0?void 0:E.email)},sorter:!0},{title:Object(e.jsx)(n.a,{id:"date",defaultMessage:"date"}),dataIndex:"date",sorter:!0,render:function(l,h){return k()(h.date).format("yyyy-MM-DD HH:mm")}},{title:Object(e.jsx)(n.a,{id:"status",defaultMessage:"status"}),dataIndex:"status",sorter:!0,render:function(l,h){return Object(e.jsx)(ct.a,{status:ut[h.status],text:Object(e.jsx)(n.a,{id:h.status})})}}],Rt=function(l){var h=l.consultation,s=Object(o.useState)(!1),S=Object(R.a)(s,2),E=S[0],A=S[1],X=Object(o.useState)([]),Q=Object(R.a)(X,2),u=Q[0],F=Q[1],Z=Object(n.l)(),r=Object(o.useCallback)(function(){A(!0),Object(tt.f)(h).then(function(j){j.success&&F(j.data)}).catch(function(){D.b.error(Object(e.jsx)(n.a,{id:"error",defaultMessage:"error"}))}).finally(function(){return A(!1)})},[h]);Object(o.useEffect)(function(){r()},[h]);var I=Object(o.useCallback)(function(j){return Object(e.jsx)("ul",{className:"events",children:u.map(function(x){if(j.format("yyyy-MM-DD")===k()(x.date).format("yyyy-MM-DD")){var L,O,f,i;return Object(e.jsx)("li",{children:Object(e.jsx)(ct.a,{status:ut[x.status],text:Object(e.jsx)(z.a.Fragment,{children:Object(e.jsxs)(Dt.a,{title:"".concat((L=x.user)===null||L===void 0?void 0:L.first_name," ").concat((O=x.user)===null||O===void 0?void 0:O.last_name," ").concat((f=x.user)===null||f===void 0?void 0:f.email),children:[Object(e.jsx)("small",{children:k()(x.date).format("HH:mm")})," ",(i=x.user)===null||i===void 0?void 0:i.email]})})})},x.consultation_term_id)}return null})})},[u]);return Object(e.jsxs)(z.a.Fragment,{children:[E&&Object(e.jsx)(C.a,{}),Object(e.jsx)(Pt.a,{dateCellRender:I}),E?Object(e.jsx)(C.a,{}):Object(e.jsx)(Tt.a,{headerTitle:Z.formatMessage({id:"Consultations",defaultMessage:"Consultations"}),loading:E,rowKey:"consultation_term_id",search:!1,request:function(){var j=Object(V.a)(Object(T.a)().mark(function x(L,O){var f,i;return Object(T.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return Object(Ct.a)(L),f=O&&Object.entries(O)[0],i=u,f&&(i=Object(at.h)(i,f[0],f[1]!=="ascend")),c.abrupt("return",{data:i,total:i.length,success:!0});case 5:case"end":return c.stop()}},x)}));return function(x,L){return j.apply(this,arguments)}}(),columns:[].concat(It,[{title:Object(e.jsx)(n.a,{id:"options",defaultMessage:"options"}),dataIndex:"option",valueType:"option",width:"20%",render:function(x,L){return[Object(e.jsx)(yt,{data:L,onChange:function(){return r()}},"change_date")]}}])})]})},St=Rt,At=t("q34N"),Bt=t("5RzD"),Ut=t("CiXh"),Jt=t("J+hL"),Y;(function(p){p.ATTRIBUTES="attributes",p.PRODUCT="product",p.MEDIA="media",p.CATEGORIES="categories",p.BRANDING="branding",p.USER_SUBMISSION="user_submission",p.CALENDAR="calendar"})(Y||(Y={}));var Wt=function(){var l=Object(n.l)(),h=Object(Ot.l)(),s=h.consultation,S=h.tab,E=S===void 0?"attributes":S,A=s==="new",X=Object(o.useState)(),Q=Object(R.a)(X,2),u=Q[0],F=Q[1],Z=Object(xt.a)(),r=Z.manageCourseEdit,I=Z.setManageCourseEdit,j=Z.validateCourseEdit,x=y.a.useForm(),L=Object(R.a)(x,1),O=L[0],f=Object(o.useCallback)(Object(V.a)(Object(T.a)().mark(function d(){var c,K;return Object(T.a)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,Object(tt.e)(Number(s));case 2:c=w.sent,c.success&&(E==="attributes"&&j(c.data),F(Object(a.a)(Object(a.a)({},c.data),{},{author_id:c.data.author&&c.data.author.id,categories:(K=c.data.categories)===null||K===void 0?void 0:K.map(at.a)})));case 4:case"end":return w.stop()}},d)})),[s]);Object(o.useEffect)(function(){if(A){F({name:"new"});return}f()},[s]);var i=Object(o.useMemo)(function(){return{onValuesChange:function(){I(Object(a.a)(Object(a.a)({},r),{},{valuesChanged:!0}))},onFinish:function(){var d=Object(V.a)(Object(T.a)().mark(function K(jt){var w,_;return Object(T.a)().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!r.disableEdit){H.next=3;break}return I({showModal:!0,disableEdit:!0,clicked:!1}),H.abrupt("return");case 3:if(w=Object(a.a)(Object(a.a)({},jt),{},{image_url:u&&u.image_url,image_path:u&&u.image_url&&Object(at.j)(u.image_url),logotype_url:u&&u.logotype_url,logotype_path:u&&u.logotype_path&&Object(at.j)(u.logotype_path)}),!A){H.next=11;break}return H.next=7,Object(tt.c)(w);case 7:_=H.sent,_.success&&n.f.push("/other/consultations/".concat(_.data.id)),H.next=15;break;case 11:return H.next=13,Object(tt.g)(Number(s),w);case 13:_=H.sent,_.success&&(j(_.data),n.f.push("/other/consultations/".concat(_.data.id,"/").concat(E)));case 15:D.b.success(_.message),I(Object(a.a)(Object(a.a)({},r),{},{showConfirmModal:!1,loading:!1,valuesChanged:!1}));case 17:case"end":return H.stop()}},K)}));function c(K){return d.apply(this,arguments)}return c}(),initialValues:u}},[u,s,E,r]);return u?Object(e.jsxs)(ot.a,{title:A?Object(e.jsx)(n.a,{id:"consultation"}):Object(e.jsx)(n.a,{id:"consultations.edit"}),header:{breadcrumb:{routes:[{path:"other/consultations",breadcrumbName:l.formatMessage({id:"menu.Other activities.Consultations"})},{path:String(s),breadcrumbName:l.formatMessage({id:"form"})},{path:"/",breadcrumbName:String(u.name)},{path:String(E),breadcrumbName:String(u.name)}]}},children:[Object(e.jsxs)(J.a,{tabs:{type:"card",activeKey:E,onChange:function(c){c!==Y.ATTRIBUTES&&r.valuesChanged?I(Object(a.a)(Object(a.a)({},r),{},{showConfirmModal:!0})):n.f.push("/other/consultations/".concat(s,"/").concat(c))}},children:[Object(e.jsxs)(J.a.TabPane,{tab:Object(e.jsx)(n.a,{id:"attributes"}),children:[r.disableEdit&&Object(e.jsx)(N.a,{closable:!0,style:{marginBottom:"20px"},type:"warning",message:Object(e.jsx)(n.a,{id:"course_edit_warning_message",defaultMessage:"course_edit_warning_message"}),action:Object(e.jsx)(m.a,{onClick:function(){return I({showModal:!0,disableEdit:!0,clicked:!0})},type:"primary",children:Object(e.jsx)(n.a,{id:"questionnaire.submit",defaultMessage:"questionnaire.submit"})})}),Object(e.jsx)(Mt.a,{visible:r.showModal,setManage:I}),Object(e.jsxs)(y.a,Object(a.a)(Object(a.a)({},i),{},{form:O,children:[Object(e.jsxs)(y.a.Group,{children:[Object(e.jsx)(q.a,{width:"md",name:"name",label:Object(e.jsx)(n.a,{id:"name"}),tooltip:Object(e.jsx)(n.a,{id:"name"}),placeholder:l.formatMessage({id:"name",defaultMessage:"name"}),required:!0,disabled:r.disableEdit}),Object(e.jsx)(q.a,{width:"sm",name:"duration",label:Object(e.jsx)(n.a,{id:"duration"}),tooltip:Object(e.jsx)(n.a,{id:"consultations.duration_tooltip"}),placeholder:l.formatMessage({id:"duration",defaultMessage:"duration"}),disabled:r.disableEdit}),Object(e.jsx)(nt.a,{name:"status",width:"sm",label:Object(e.jsx)(n.a,{id:"status"}),tooltip:Object(e.jsx)(n.a,{id:"status_consultation_tooltip"}),valueEnum:{draft:l.formatMessage({id:"draft",defaultMessage:"draft"}),published:l.formatMessage({id:"published",defaultMessage:"published"}),archived:l.formatMessage({id:"archived",defaultMessage:"archived"})},initialValue:rt.draft,placeholder:l.formatMessage({id:"status"}),rules:[{required:!0,message:Object(e.jsx)(n.a,{id:"select"})}],disabled:r.disableEdit})]}),Object(e.jsxs)(y.a.Group,{children:[Object(e.jsx)(et.a,{width:"sm",name:"active_from",label:Object(e.jsx)(n.a,{id:"active_from"}),tooltip:Object(e.jsx)(n.a,{id:"active_from"}),placeholder:l.formatMessage({id:"active_from",defaultMessage:"active_from"}),disabled:r.disableEdit}),Object(e.jsx)(et.a,{width:"sm",name:"active_to",label:Object(e.jsx)(n.a,{id:"active_to"}),tooltip:Object(e.jsx)(n.a,{id:"active_to"}),placeholder:l.formatMessage({id:"active_to",defaultMessage:"active_to"}),disabled:r.disableEdit}),Object(e.jsx)(y.a.Item,{name:"author_id",label:Object(e.jsx)(n.a,{id:"tutor"}),tooltip:Object(e.jsx)(n.a,{id:"tutor_consultation_tooltip"}),valuePropName:"value",required:!0,children:Object(e.jsx)(bt.a,{})})]}),Object(e.jsx)(y.a.Group,{children:Object(e.jsx)(y.a.Item,{name:"description",label:Object(e.jsx)(n.a,{id:"description"}),tooltip:Object(e.jsx)(n.a,{id:"description_tooltip"}),valuePropName:"value",required:!0,children:Object(e.jsx)(st.a,{directory:"consultation/".concat(s,"/wysiwyg")})})}),Object(e.jsx)(y.a.Group,{children:Object(e.jsx)(y.a.Item,{valuePropName:"value",name:"proposed_terms",tooltip:Object(e.jsx)(n.a,{id:"proposed_terms_tooltip"}),label:Object(e.jsx)(n.a,{id:"consultations.proposed_terms"}),children:Object(e.jsx)(Et,{})})})]}))]},Y.ATTRIBUTES),!A&&Object(e.jsx)(J.a.TabPane,{tab:Object(e.jsx)(n.a,{id:"product"}),disabled:r.disableEdit,children:s&&Object(e.jsx)(At.a,{type:"line",productable:{class_type:"App\\Models\\Consultation",class_id:s,name:String(u.name),quantity:1}})},Y.PRODUCT),!A&&Object(e.jsx)(J.a.TabPane,{tab:Object(e.jsx)(n.a,{id:"media"}),disabled:r.disableEdit,children:Object(e.jsx)(y.a,Object(a.a)(Object(a.a)({},i),{},{children:Object(e.jsx)(dt.a,{folder:"consultation/".concat(s),title:"image",action:"/api/admin/consultations/".concat(s),src_name:"image_url",form_name:"image",getUploadedSrcField:function(c){return c.file.response.data.image_url},setPath:function(c){return F(function(K){return Object(a.a)(Object(a.a)({},K),c)})}})}))},Y.MEDIA),!A&&Object(e.jsx)(J.a.TabPane,{tab:Object(e.jsx)(n.a,{id:"categories"}),disabled:r.disableEdit,children:Object(e.jsx)(P.a,{children:Object(e.jsx)(v.a,{span:12,children:Object(e.jsx)(y.a,Object(a.a)(Object(a.a)({},i),{},{children:Object(e.jsx)(y.a.Item,{label:Object(e.jsx)(n.a,{id:"categories"}),name:"categories",valuePropName:"value",children:Object(e.jsx)(vt.a,{})})}))})})},Y.CATEGORIES)," ",!A&&Object(e.jsx)(J.a.TabPane,{tab:Object(e.jsx)(n.a,{id:"branding"}),disabled:r.disableEdit,children:Object(e.jsx)(y.a,Object(a.a)(Object(a.a)({},i),{},{children:Object(e.jsx)(dt.a,{folder:"consultation/".concat(s),title:l.formatMessage({id:"logotype"}),action:"/api/admin/consultations/".concat(s),src_name:"logotype_url",form_name:"logotype",getUploadedSrcField:function(c){return c.file.response.data.logotype_url},setPath:function(c){return F(function(K){return Object(a.a)(Object(a.a)({},K),c)})}})}))},Y.BRANDING)," ",!A&&Object(e.jsx)(J.a.TabPane,{tab:Object(e.jsx)(n.a,{id:"user_submission"}),disabled:r.disableEdit,children:Object(e.jsx)(P.a,{children:Object(e.jsx)(v.a,{span:12,children:s&&Object(e.jsx)(Bt.a,{id:Number(s),type:"App\\Models\\Consultation"})})})},Y.USER_SUBMISSION),!A&&Object(e.jsx)(J.a.TabPane,{tab:Object(e.jsx)(n.a,{id:"consultations.calendar"}),children:Object(e.jsx)(St,{consultation:Number(s)})},Y.CALENDAR)]}),Object(e.jsx)(Ut.a,{open:!!r.showConfirmModal,onOk:function(){I(Object(a.a)(Object(a.a)({},r),{},{loading:!0})),O.submit()},onCancel:function(){I(Object(a.a)(Object(a.a)({},r),{},{showConfirmModal:!1}))},loading:!!r.loading})]}):Object(e.jsx)(C.a,{})},Yt=M.default=Wt}}]);
