"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[6616],{47389:function(H,C,e){var x=e(1413),i=e(67294),D=e(27363),a=e(84089),d=function(_,m){return i.createElement(a.Z,(0,x.Z)((0,x.Z)({},_),{},{ref:m,icon:D.Z}))},o=i.forwardRef(d);C.Z=o},90672:function(H,C,e){var x=e(1413),i=e(45987),D=e(67294),a=e(41550),d=e(85893),o=["fieldProps","proFieldProps"],l=function(m,p){var n=m.fieldProps,v=m.proFieldProps,M=(0,i.Z)(m,o);return(0,d.jsx)(a.Z,(0,x.Z)({ref:p,valueType:"textarea",fieldProps:n,proFieldProps:v},M))};C.Z=D.forwardRef(l)},86273:function(H,C,e){var x=e(5574),i=e.n(x),D=e(64631),a=e(67294),d=e(80854),o=e(94116),l=e(85893),_=function p(n,v){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return n.subcategories&&n.subcategories.length?{title:n.name,value:n.id,disabled:typeof v=="number"&&M!==v,children:n.subcategories.map(function(f){return p(f,v,M+1)})}:{title:n.name,value:n.id,disabled:typeof v=="number"&&M!==v}},m=function(n){var v=n.value,M=n.onChange,f=n.multiple,K=f===void 0?!1:f,b=n.enabledDepth,j=(0,a.useState)([]),U=i()(j,2),S=U[0],s=U[1];(0,a.useEffect)(function(){(0,o.CL)().then(function(u){u.success&&s(u.data)})},[]);var r=(0,a.useMemo)(function(){return S.map(function(u){return _(u,b)})},[S]);return(0,l.jsx)(D.Z,{loading:S.length===0,multiple:K,showSearch:!0,value:v,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:(0,l.jsx)(d.FormattedMessage,{id:"select",defaultMessage:"Please select"}),allowClear:!0,treeDefaultExpandAll:!0,onChange:M,treeData:r,disabled:S.length===0})};C.Z=m},23535:function(H,C,e){var x=e(97857),i=e.n(x),D=e(9783),a=e.n(D),d=e(14726),o=e(95830),l=e(67294),_=e(82238),m=e(34994),p=e(80854),n=e(85893),v=function(f){var K=f.title,b=f.action,j=f.form_name,U=f.src_name,S=f.getUploadedSrcField,s=f.setPath,r=f.wrapInForm,u=r===void 0?!0:r,O=f.folder,g=f.proFormGroupProps,y=f.hideLabel,re=y===void 0?!1:y;return(0,n.jsxs)(m.A.Group,i()(i()({title:(0,n.jsx)(p.FormattedMessage,{id:K})},g),{},{children:[(0,n.jsx)(m.A.Item,{shouldUpdate:!0,children:function(Q){return(0,n.jsxs)(l.Fragment,{children:[(0,n.jsx)(_.Z,{folder:O,wrapInForm:u,accept:"image/*",name:j,url:b,onChange:function(V){if(V.file.status==="done"){var k;Q.setFieldsValue(a()({},U,S(V))),(k=V.file.response)!==null&&k!==void 0&&k.success&&s(a()(a()({},"".concat(j,"_url"),V.file.response.data["".concat(j,"_url")]),"".concat(j,"_path"),V.file.response.data["".concat(j,"_path")]))}},hideLabel:re}),(0,n.jsx)(d.ZP,{danger:!0,onClick:function(){return[s(a()(a()({},"".concat(j,"_url"),""),"".concat(j,"_path"),"")),Q.setFieldsValue(a()({},U,""))]},children:(0,n.jsx)(p.FormattedMessage,{id:"delete"})})]})}}),(0,n.jsx)(m.A.Item,{shouldUpdate:!0,children:function(Q){return(0,n.jsx)(o.Z,{width:200,src:Q.getFieldValue(U)})}})]}))};C.Z=v},65924:function(H,C,e){e.d(C,{m:function(){return a}});var x=e(68962),i=e(85893),D=function d(o,l,_,m){return o.map(function(p){var n,v;return{title:(n=p[l])!==null&&n!==void 0?n:"",key:(v=p[m])!==null&&v!==void 0?v:Math.random().toString(),children:p[_]&&Array.isArray(p[_])?d(p[_],l,_,m):[]}})},a=function(o){var l=o.branch,_=o.titlePropName,m=o.childrenPropName,p=o.keyPropName;return(0,i.jsx)(x.Z,{defaultExpandAll:!0,showIcon:!0,showLine:!0,treeData:D(l,_,m,p)})}},25539:function(H,C,e){e.r(C),e.d(C,{default:function(){return pe},staticColumns:function(){return oe}});var x=e(97857),i=e.n(x),D=e(5574),a=e.n(D),d=e(15009),o=e.n(d),l=e(99289),_=e.n(l),m=e(65924),p=e(51042),n=e(74453),v=e(16894),M=e(2453),f=e(66309),K=e(75081),b=e(14726),j=e(83062),U=e(86738),S=e(28248),s=e(67294),r=e(80854),u=e(94116),O=e(66419),g=e(47389),y=e(82061),re=e(86273),ae=e(23535),Q=e(81587),ne=e(37476),V=e(5966),k=e(90672),ie=e(52688),ue=e(31199),le=e(952),de=e(75842),t=e(85893),me=function(A){var E=(0,r.useIntl)(),F=(0,s.useState)(!1),c=a()(F,2),W=c[0],h=c[1],P=A.visible,q=A.onVisibleChange,R=A.onFinish,I=A.id,se=de.Z.useForm(),ee=a()(se,1),$=ee[0],X=typeof I=="number"&&I>0;return(0,s.useEffect)(function(){h(!1),typeof I=="number"&&I>0?(0,u.W3)(I).then(function(G){G.success&&$.setFieldsValue(G.data)}):$.resetFields()},[I,$]),(0,t.jsxs)(ne.Y,{form:$,title:E.formatMessage({id:X?"editCategory":"newCategory",defaultMessage:X?"editCategory":"newCategory"}),width:"400px",visible:P,onVisibleChange:q,onFinish:function(L){return R(W?i()(i()({},L),{},{icon_path:null}):i()({},L))},onValuesChange:function(L){L.name&&$.setFieldsValue({slug:(0,Q.l)(L.name)})},children:[(0,t.jsx)(V.Z,{label:(0,t.jsx)(r.FormattedMessage,{id:"name",defaultMessage:"name"}),rules:[{required:!0}],name:"name"}),(0,t.jsx)(V.Z,{name:"slug",label:(0,t.jsx)(r.FormattedMessage,{id:"slug"}),placeholder:E.formatMessage({id:"slug"}),disabled:!0,required:!0}),(0,t.jsx)(k.Z,{name:"description",label:(0,t.jsx)(r.FormattedMessage,{id:"description"}),placeholder:E.formatMessage({id:"description"})}),(0,t.jsx)(ie.Z,{name:"is_active",label:(0,t.jsx)(r.FormattedMessage,{id:"is_active",defaultMessage:"is_active"}),initialValue:!1}),(0,t.jsx)(ue.Z,{name:"order",label:(0,t.jsx)(r.FormattedMessage,{id:"stacking_order"})}),(0,t.jsx)(le.ZP.Item,{name:"parent_id",label:(0,t.jsx)(r.FormattedMessage,{id:"parent_category",defaultMessage:"parent_category"}),valuePropName:"value",children:(0,t.jsx)(re.Z,{})}),I!==-1&&(0,t.jsx)(ae.Z,{folder:"categories/".concat(I),wrapInForm:!1,title:"icon",action:"/api/admin/categories/".concat(I),src_name:"icon",form_name:"icon",getUploadedSrcField:function(L){return L.file.response.data.icon},setPath:function(L){L.icon_path===""&&h(!0)},proFormGroupProps:{style:{flexDirection:"column"},titleStyle:{flex:"0 0 10px"}}})]})},ce=me,_e=function(){var J=_()(o()().mark(function A(E,F,c){var W;return o()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return W=M.ZP.loading(E.formatMessage({id:"loading"})),P.prev=1,P.next=4,c&&c!==-1?(0,u.yr)(c,F):(0,u.k4)(F);case 4:return W(),M.ZP.success(E.formatMessage({id:"success"})),P.abrupt("return",!0);case 9:return P.prev=9,P.t0=P.catch(1),W(),M.ZP.error(E.formatMessage({id:"error"}).toString()),P.abrupt("return",!1);case 14:case"end":return P.stop()}},A,null,[[1,9]])}));return function(E,F,c){return J.apply(this,arguments)}}(),fe=function(){var J=_()(o()().mark(function A(E,F){var c;return o()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return c=M.ZP.loading(E.formatMessage({id:"loading"})),h.prev=1,h.next=4,(0,u.uu)(F);case 4:return c(),M.ZP.success(E.formatMessage({id:"success"})),h.abrupt("return",!0);case 9:return h.prev=9,h.t0=h.catch(1),c(),M.ZP.error(E.formatMessage({id:"error"})),h.abrupt("return",!1);case 14:case"end":return h.stop()}},A,null,[[1,9]])}));return function(E,F){return J.apply(this,arguments)}}(),oe=[{title:(0,t.jsx)(r.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:(0,t.jsx)(r.FormattedMessage,{id:"name",defaultMessage:"name"}),dataIndex:"name",sorter:!0},{title:(0,t.jsx)(r.FormattedMessage,{id:"full_name",defaultMessage:"full_name"}),dataIndex:"name_with_breadcrumbs",hideInSearch:!0},{title:(0,t.jsx)(r.FormattedMessage,{id:"slug",defaultMessage:"slug"}),dataIndex:"slug",hideInSearch:!0,sorter:!0},{title:(0,t.jsx)(r.FormattedMessage,{id:"pages.searchTable.titleStatus",defaultMessage:"Status"}),dataIndex:"is_active",sorter:!0,valueEnum:{true:{text:(0,t.jsx)(f.Z,{color:"success",children:(0,t.jsx)(r.FormattedMessage,{id:"Active",defaultMessage:"Active"})}),status:"true"},false:{text:(0,t.jsx)(f.Z,{color:"error",children:(0,t.jsx)(r.FormattedMessage,{id:"Inactive",defaultMessage:"Inactive"})}),status:"false"}}}],ge=function(){var A=(0,s.useState)(!1),E=a()(A,2),F=E[0],c=E[1],W=(0,s.useState)([]),h=a()(W,2),P=h[0],q=h[1];return(0,s.useEffect)(function(){c(!0),(0,u.CL)().then(function(R){R.success&&q(R.data)}).finally(function(){return c(!1)})},[]),F?(0,t.jsx)(K.Z,{}):(0,t.jsx)(m.m,{branch:P,titlePropName:"name",childrenPropName:"subcategories",keyPropName:"id"})},he=function(){var A=(0,s.useState)(!1),E=a()(A,2),F=E[0],c=E[1],W=(0,s.useState)([]),h=a()(W,2),P=h[0],q=h[1],R=(0,s.useRef)(),I=(0,r.useIntl)(),se=(0,s.useState)(!1),ee=a()(se,2),$=ee[0],X=ee[1],G=(0,s.useCallback)(function(B){return!!P.some(function(T){return T.parent_id===B})},[P]),L=[].concat(oe,[{hideInSearch:!0,title:(0,t.jsx)(r.FormattedMessage,{id:"parent_id",defaultMessage:"parent_id"}),dataIndex:"parent_id",tooltip:(0,t.jsx)(r.FormattedMessage,{id:"parent_id_tooltip",defaultMessage:"Parent category"}),render:function(T,w){var Z=P.find(function(N){return N.id===w.parent_id});return Z?(0,t.jsx)(b.ZP,{size:"small",onClick:function(){return c(Z.id)},children:Z.name}):(0,t.jsx)(s.Fragment,{children:(0,t.jsx)(r.FormattedMessage,{id:"none"})})}},{hideInSearch:!0,title:(0,t.jsx)(r.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(T,w){return[(0,t.jsx)(j.Z,{title:(0,t.jsx)(r.FormattedMessage,{id:"edit",defaultMessage:"edit"}),children:(0,t.jsx)(b.ZP,{type:"primary",icon:(0,t.jsx)(g.Z,{}),onClick:function(){return c(w.id)}})},"edit"),G(w.id)?(0,t.jsx)(j.Z,{title:(0,t.jsx)(r.FormattedMessage,{id:"cantDelete",defaultMessage:"You can't delete this category because it's parent to others"}),children:(0,t.jsx)(b.ZP,{disabled:!0,type:"primary",icon:(0,t.jsx)(y.Z,{}),danger:!0})},"delete"):(0,t.jsx)(U.Z,{title:(0,t.jsx)(r.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:_()(o()().mark(function Z(){var N;return o()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,fe(I,w.id);case 2:N=Y.sent,N&&(c(!1),R.current&&R.current.reload());case 4:case"end":return Y.stop()}},Z)})),okText:(0,t.jsx)(r.FormattedMessage,{id:"yes",defaultMessage:"Yes"}),cancelText:(0,t.jsx)(r.FormattedMessage,{id:"no",defaultMessage:"No"}),children:(0,t.jsx)(j.Z,{title:(0,t.jsx)(r.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,t.jsx)(b.ZP,{type:"primary",icon:(0,t.jsx)(y.Z,{}),danger:!0})})},"delete")]}}]);return(0,t.jsxs)(n._z,{children:[(0,t.jsx)(S.Z,{open:$,onCancel:function(){return X(!1)},onOk:function(){return X(!1)},children:$&&(0,t.jsx)(ge,{})}),(0,t.jsx)(v.ZP,{headerTitle:I.formatMessage({id:"menu.Courses.Categories",defaultMessage:"categories"}),actionRef:R,rowKey:"id",search:{layout:"vertical"},toolBarRender:function(){return[(0,t.jsx)(b.ZP,{onClick:function(){return X(!0)},children:(0,t.jsx)(r.FormattedMessage,{id:"show_tree",defaultMessage:"Show Tree"})},"show_tree"),(0,t.jsxs)(b.ZP,{type:"primary",onClick:function(){c(-1)},children:[(0,t.jsx)(p.Z,{})," ",(0,t.jsx)(r.FormattedMessage,{id:"pages.searchTable.new",defaultMessage:"\u65B0\u5EFA"})]},"primary")]},request:function(T,w){var Z=T.pageSize,N=T.current,z=T.name,Y=T.is_active;return(0,u.bd)(i()({per_page:Z,page:N,name:z||void 0,is_active:Y?Y==="true"?1:0:void 0},(0,O.di)(w,"created_at"))).then(function(te){return te.success?(q(te.data),{data:te.data,total:te.meta.total,success:!0}):[]})},columns:L}),(0,t.jsx)(ce,{id:F,visible:Number.isInteger(F),onVisibleChange:function(T){return!T&&c(!1)},onFinish:function(){var B=_()(o()().mark(function T(w){var Z;return o()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,_e(I,w,Number(F));case 2:Z=z.sent,Z&&(c(!1),R.current&&R.current.reload());case 4:case"end":return z.stop()}},T)}));return function(T){return B.apply(this,arguments)}}()})]})},pe=he},94116:function(H,C,e){e.d(C,{CL:function(){return _},W3:function(){return v},bd:function(){return p},k4:function(){return f},uu:function(){return U},yr:function(){return b}});var x=e(15009),i=e.n(x),D=e(97857),a=e.n(D),d=e(99289),o=e.n(d),l=e(80854);function _(s){return m.apply(this,arguments)}function m(){return m=o()(i()().mark(function s(r){return i()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",(0,l.request)("/api/admin/categories/tree",a()({method:"GET",useCache:!1},r||{})));case 1:case"end":return O.stop()}},s)})),m.apply(this,arguments)}function p(s,r){return n.apply(this,arguments)}function n(){return n=o()(i()().mark(function s(r,u){return i()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,l.request)("/api/admin/categories",a()({method:"GET",useCache:!1,params:r},u||{})));case 1:case"end":return g.stop()}},s)})),n.apply(this,arguments)}function v(s,r){return M.apply(this,arguments)}function M(){return M=o()(i()().mark(function s(r,u){return i()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,l.request)("/api/admin/categories/".concat(r),a()({method:"GET",useCache:!1},u||{})));case 1:case"end":return g.stop()}},s)})),M.apply(this,arguments)}function f(s,r){return K.apply(this,arguments)}function K(){return K=o()(i()().mark(function s(r,u){return i()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,l.request)("/api/admin/categories",a()({method:"POST",headers:{"Content-Type":"application/json"},data:r},u||{})));case 1:case"end":return g.stop()}},s)})),K.apply(this,arguments)}function b(s,r,u){return j.apply(this,arguments)}function j(){return j=o()(i()().mark(function s(r,u,O){return i()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,l.request)("/api/admin/categories/".concat(r),a()({method:"POST",headers:{"Content-Type":"application/json"},data:u},O||{})));case 1:case"end":return y.stop()}},s)})),j.apply(this,arguments)}function U(s,r,u){return S.apply(this,arguments)}function S(){return S=o()(i()().mark(function s(r,u,O){return i()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,l.request)("/api/admin/categories/".concat(r),a()({method:"DELETE",headers:{"Content-Type":"application/json"},data:u},O||{})));case 1:case"end":return y.stop()}},s)})),S.apply(this,arguments)}},81587:function(H,C,e){e.d(C,{l:function(){return x}});var x=function(D){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"-",d=D.toString().toLowerCase().trim(),o=[{to:"a",from:"[\xC0\xC1\xC2\xC3\xC5\xC6\u0100\u0102\u0104\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6]"},{to:"ae",from:"[\xC4]"},{to:"c",from:"[\xC7\u0106\u0108\u010C]"},{to:"d",from:"[\xD0\u010E\u0110\xDE]"},{to:"e",from:"[\xC8\xC9\xCA\xCB\u0112\u0114\u0116\u0118\u011A\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6]"},{to:"g",from:"[\u011C\u011E\u0122\u01F4]"},{to:"h",from:"[\u0124\u1E26]"},{to:"i",from:"[\xCC\xCD\xCE\xCF\u0128\u012A\u012E\u0130\u1EC8\u1ECA]"},{to:"j",from:"[\u0134]"},{to:"ij",from:"[\u0132]"},{to:"k",from:"[\u0136]"},{to:"l",from:"[\u0139\u013B\u013D\u0141]"},{to:"m",from:"[\u1E3E]"},{to:"n",from:"[\xD1\u0143\u0145\u0147]"},{to:"o",from:"[\xD2\xD3\xD4\xD5\xD8\u014C\u014E\u0150\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u01EA\u01EC\u01A0]"},{to:"oe",from:"[\u0152\xD6]"},{to:"p",from:"[\u1E55]"},{to:"r",from:"[\u0154\u0156\u0158]"},{to:"s",from:"[\u015A\u015C\u015E\u0160]"},{to:"ss",from:"[\xDF]"},{to:"t",from:"[\u0162\u0164]"},{to:"u",from:"[\xD9\xDA\xDB\u0168\u016A\u016C\u016E\u0170\u0172\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u01AF]"},{to:"ue",from:"[\xDC]"},{to:"w",from:"[\u1E82\u0174\u1E80\u1E84]"},{to:"x",from:"[\u1E8D]"},{to:"y",from:"[\xDD\u0176\u0178\u1EF2\u1EF4\u1EF6\u1EF8]"},{to:"z",from:"[\u0179\u017B\u017D]"},{to:"-",from:"[\xB7/_,:;']"}];return o.forEach(function(l){d=d.replace(new RegExp(l.from,"gi"),l.to)}),d=d.toString().toLowerCase().replace(/\s+/g,"-").replace(/&/g,"-and-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),typeof a!="undefined"&&a!=="-"&&(d=d.replace(/-/g,a)),d}}}]);
