(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"60mZ":function(We,Q,e){},EKp7:function(We,Q,e){"use strict";e.r(Q);var y=e("T2oS"),B=e("W9HT"),h=e("q1tI"),l=e("9kvl"),z=e("Ty5D"),xe=e("tMyG"),te=e("nhC9"),oe=e("tKSU"),_=e("qLMh"),se=e("miYZ"),W=e("tsqr"),J=e("9og8"),P=e("k1fw"),f=e("PpiC"),g=e("tJVT"),n=e("VMEa"),F=e("Qurx"),$=e("yj/a"),Y=e("F/zT"),K=e("BiO0"),p=e("CEpB"),v=e("0WSk"),C=e("Gn8c"),I=e("hd5d"),m=e("YRX9"),A=e("/y+f"),r=e("nKUr"),ae=["authors","category"],Oe=Object.values(A.b).map(function(pe){return{value:pe,label:Object(r.jsx)(l.a,{id:"CompetencyChallenges.types.".concat(pe)})}}),Me=function(){var H=Object(oe.b)(),j=H.competencyChallenge,X=H.categoryDepths,D=H.refreshData,Z=Object(z.l)(),w=Number(Z.id),re=Object(l.l)(),ye=n.a.useForm(),fe=Object(g.a)(ye,1),ue=fe[0],ge=n.a.useWatch("type",ue),he=Number.isNaN(w),qe=Object(h.useMemo)(function(){if(!(j!=null&&j.data))return{};var ne=j==null?void 0:j.data,N=ne.authors,R=ne.category,V=Object(f.a)(ne,ae);return Object(P.a)(Object(P.a)({},V),{},{authors:N.map(function(k){var ee=k.id;return ee}),category_id:R==null?void 0:R.id})},[j==null?void 0:j.data]),Ce=Object(h.useCallback)(function(){var ne=Object(J.a)(Object(_.a)().mark(function N(R){var V,k,ee,ce,de,T,Ee,be;return Object(_.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return V=R.name,k=R.type,ee=R.is_active,ce=ee===void 0?!1:ee,de=R.is_highlighted,T=de===void 0?!1:de,Ee=R.category_id,a.prev=1,a.next=4,Object(m.a)({name:V,is_active:ce,is_highlighted:T,type:k,category_id:Ee});case 4:if(be=a.sent,be.success){a.next=8;break}return W.b.error(be.message),a.abrupt("return");case 8:return W.b.success(re.formatMessage({id:be.message})),l.f.push("/competency-challenges/".concat(be.data.id,"/main")),a.next=12,D();case 12:a.next=17;break;case 14:a.prev=14,a.t0=a.catch(1),W.b.error(re.formatMessage({id:"error"}));case 17:case"end":return a.stop()}},N,null,[[1,14]])}));return function(N){return ne.apply(this,arguments)}}(),[]),Ue=Object(h.useCallback)(function(){var ne=Object(J.a)(Object(_.a)().mark(function N(R){var V,k,ee,ce;return Object(_.a)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.prev=0,V=ue.getFieldsValue(["image_url","image_path"]),k=V.image_url,ee=V.image_path,T.next=4,Object(m.g)(w,Object(P.a)(Object(P.a)({},R),{},{image_url:k,image_path:ee}));case 4:if(ce=T.sent,ce.success){T.next=8;break}return W.b.error(ce.message),T.abrupt("return");case 8:return W.b.success(re.formatMessage({id:ce.message})),T.next=11,D();case 11:T.next=16;break;case 13:T.prev=13,T.t0=T.catch(0),W.b.error(re.formatMessage({id:"error"}));case 16:case"end":return T.stop()}},N,null,[[0,13]])}));return function(N){return ne.apply(this,arguments)}}(),[w]);return Object(r.jsxs)(n.a,{form:ue,initialValues:qe,onFinish:he?Ce:Ue,onValuesChange:function(N){(N==null?void 0:N.type)==="complex"&&ue.setFieldValue("category",null)},children:[Object(r.jsxs)(n.a.Group,{title:Object(r.jsx)(l.a,{id:"CompetencyChallenges.base"}),children:[Object(r.jsx)(F.a,{width:"md",name:"name",label:Object(r.jsx)(l.a,{id:"name"}),placeholder:re.formatMessage({id:"name"}),required:!0,rules:[{required:!0,message:re.formatMessage({id:"field_required"})}]}),Object(r.jsx)($.a,{width:"md",name:"type",label:Object(r.jsx)(l.a,{id:"type"}),options:Oe,required:!0,rules:[{required:!0,message:re.formatMessage({id:"field_required"})}]}),ge==="simple"&&Object(r.jsx)(n.a.Item,{name:"category_id",required:!0,label:Object(r.jsx)(l.a,{id:"category"}),rules:[{required:!0,message:re.formatMessage({id:"field_required"})}],children:Object(r.jsx)(p.a,{enabledDepth:X.role})}),Object(r.jsx)(Y.a,{name:"is_active",label:Object(r.jsx)(l.a,{id:"is_active"})}),Object(r.jsx)(Y.a,{name:"is_highlighted",label:Object(r.jsx)(l.a,{id:"is_highlighted"}),tooltip:Object(r.jsx)(l.a,{id:"CompetencyChallenges.highlighted"})})]}),!he&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(n.a.Group,{title:Object(r.jsx)(l.a,{id:"CompetencyChallenges.additional"}),children:[Object(r.jsx)(n.a.Item,{name:"description",label:Object(r.jsx)(l.a,{id:"description"}),valuePropName:"value",style:{width:440},children:Object(r.jsx)(I.a,{directory:"competency-challenges/".concat(w)})}),Object(r.jsx)(K.a,{width:"lg",name:"summary",label:Object(r.jsx)(l.a,{id:"summary"})}),Object(r.jsx)(n.a.Item,{name:"authors",label:Object(r.jsx)(l.a,{id:"author"}),style:{width:"100%",maxWidth:440},children:Object(r.jsx)(v.a,{multiple:!0})})]}),Object(r.jsx)(C.a,{wrapInForm:!1,folder:"/competency-challenges/".concat(w),title:"image",action:"/api/admin/competency-challenges/".concat(w,"?_method=PATCH"),src_name:"image_url",form_name:"image",getUploadedSrcField:function(N){return N.file.response.data.image_url},setPath:function(N){return ue.setFieldsValue(N)}})]})]})},Pe=e("P2fV"),E=e("NJEC"),G=e("5Dmo"),Ie=e("3S7+"),x=e("+L6B"),U=e("2/Rp"),ve=e("G3dp"),Fe=e("/MfK"),Ne=e("Hn4i"),Ke=e("enqX"),t=["scale_min","category_id"],Ae=[{title:Object(r.jsx)(l.a,{id:"ID"}),dataIndex:"id",editable:!1,render:function(H,j){if(typeof j.id!="string")return"-";var X=j.id.split("-"),D=Object(g.a)(X,2),Z=D[0],w=D[1];return Z==="new"?"-":w}},{title:Object(r.jsx)(l.a,{id:"min_points"}),dataIndex:"scale_min",valueType:"digit",formItemProps:{rules:[{required:!0,message:Object(r.jsx)(l.a,{id:"field_required"})},{type:"number",min:0,max:100,message:Object(r.jsx)(l.a,{id:"number_between",values:{min:0}})}]},fieldProps:{min:0}},{title:Object(r.jsx)(l.a,{id:"category"}),dataIndex:"category_id",render:function(H,j){return j.category_name},formItemProps:{rules:[{required:!0,message:Object(r.jsx)(l.a,{id:"field_required"})}]},renderFormItem:function(H,j,X){var D,Z=((D=X.getFieldValue("table"))!==null&&D!==void 0?D:[]).map(function(w){return w.category_id});return Object(r.jsx)(Ke.a,{disabledNodes:Z})}}],Be=function(H){return H.map(function(j){var X=j.id,D=j.scale_min,Z=j.category;return{id:"old-".concat(X),scale_min:D,category_id:Z.id,category_name:Z.name_with_breadcrumbs}})},ze=function(){var H,j,X=Object(oe.b)(),D=X.competencyChallenge,Z=X.refreshData,w=Object(z.l)(),re=Number(w.id),ye=(H=D==null||(j=D.data)===null||j===void 0?void 0:j.scales)!==null&&H!==void 0?H:[],fe=Object(h.useState)([]),ue=Object(g.a)(fe,2),ge=ue[0],he=ue[1],qe=Object(l.l)(),Ce=Object(h.useRef)(),Ue=Object(h.useRef)(),ne=Object(h.useRef)(),N=Object(h.useMemo)(function(){return Be(ye)},[ye]),R=Object(h.useMemo)(function(){return[].concat(Ae,[{valueType:"option",title:Object(r.jsx)(l.a,{id:"options"}),render:function(k,ee,ce,de){return[Object(r.jsx)(Ie.a,{title:Object(r.jsx)(l.a,{id:"edit",defaultMessage:"edit"}),children:Object(r.jsx)(U.a,{type:"primary",icon:Object(r.jsx)(ve.a,{}),onClick:function(){return de==null?void 0:de.startEditable(ee.id)}})},"edit"),Object(r.jsx)(E.a,{title:Object(r.jsx)(l.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(J.a)(Object(_.a)().mark(function T(){var Ee,be,d,a,s,i,c,u;return Object(_.a)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(typeof ee.id=="string"){o.next=2;break}return o.abrupt("return");case 2:if(Ee=ee.id.split("-"),be=Object(g.a)(Ee,2),d=be[0],a=be[1],d!=="new"){o.next=7;break}return c=(s=Ce.current)===null||s===void 0?void 0:s.getFieldValue("table"),(i=Ce.current)===null||i===void 0||i.setFieldValue("table",c.filter(function(S){var M=S.id;return M!==ee.id})),o.abrupt("return");case 7:return o.next=9,Object(m.d)(+a);case 9:if(u=o.sent,!u.success){o.next=13;break}return o.next=13,Z();case 13:case"end":return o.stop()}},T)})),okText:Object(r.jsx)(l.a,{id:"ok"}),cancelText:Object(r.jsx)(l.a,{id:"cancel"}),children:Object(r.jsx)(Ie.a,{title:Object(r.jsx)(l.a,{id:"delete",defaultMessage:"delete"}),children:Object(r.jsx)(U.a,{type:"primary",icon:Object(r.jsx)(Fe.a,{}),danger:!0})})},"delete")]}}])},[]);return Object(r.jsx)(n.a,{formRef:Ce,initialValues:{table:N},submitter:!1,children:Object(r.jsx)(Ne.a,{rowKey:function(k){return k.id},editableFormRef:Ue,controlled:!0,actionRef:ne,name:"table",columns:R,recordCreatorProps:{creatorButtonText:Object(r.jsx)(l.a,{id:"CompetencyChallenges.addNewRow"}),disabled:ge.length>0,record:function(k){return{id:"new-".concat(k)}}},editable:{onlyOneLineEditorAlertMessage:qe.formatMessage({id:"CompetencyChallenges.onlyOneRowIsEditable"}),onSave:function(){var V=Object(J.a)(Object(_.a)().mark(function ee(ce,de){var T,Ee,be,d,a,s,i,c,u;return Object(_.a)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(T=de.scale_min,Ee=de.category_id,be=Object(f.a)(de,t),typeof be.id=="string"){o.next=3;break}return o.abrupt("return");case 3:if(d=be.id.split("-"),a=Object(g.a)(d,2),s=a[0],i=a[1],s!=="new"){o.next=12;break}return o.next=7,Object(m.b)({scale_min:T,category_id:Ee,competency_challenge_id:re});case 7:if(c=o.sent,!c.success){o.next=11;break}return o.next=11,Z();case 11:return o.abrupt("return");case 12:return o.next=14,Object(m.h)(+i,{scale_min:T,category_id:Ee,competency_challenge_id:re});case 14:if(u=o.sent,!u.success){o.next=18;break}return o.next=18,Z();case 18:return o.abrupt("return");case 19:case"end":return o.stop()}},ee)}));function k(ee,ce){return V.apply(this,arguments)}return k}(),deletePopconfirmMessage:Object(r.jsx)(l.a,{id:"deleteQuestion"}),actionRender:function(k,ee,ce){if(typeof k.id!="string")return[];var de=k.id.split("-"),T=Object(g.a)(de,1),Ee=T[0];return Ee==="new"?[ce.save,ce.delete]:[ce.save,ce.cancel]},type:"single",editableKeys:ge,onChange:he}})})},Ye=e("/zsF"),Ge=e("PArb"),Xe=e("DYRE"),$e=e("zeV3"),He=e("uD7z"),Qe=e("FJDo"),Ve=e("yioT"),tt=e("qRSf"),ie=function(){var H=Object(oe.b)(),j=H.competencyChallenge.data,X=Object(h.useState)(!1),D=Object(g.a)(X,2),Z=D[0],w=D[1],re=Object(h.useState)(),ye=Object(g.a)(re,2),fe=ye[0],ue=ye[1],ge=Object(l.l)(),he=Object(h.useCallback)(function(){(j==null?void 0:j.quiz_id)!==void 0&&(w(!0),Object(tt.c)(j==null?void 0:j.quiz_id).then(function(Ce){Ce.success&&ue(Ce.data)}).finally(function(){return w(!1)}))},[j==null?void 0:j.quiz_id]),qe=Object(h.useCallback)(function(){var Ce=Object(J.a)(Object(_.a)().mark(function Ue(ne){return Object(_.a)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if((j==null?void 0:j.quiz_id)!==void 0){R.next=2;break}return R.abrupt("return");case 2:w(!0),Object(tt.f)(j==null?void 0:j.quiz_id,Object(P.a)(Object(P.a)({},ne),{},{value:"diagnostic-test"})).then(function(V){V.success&&ue(V.data)}).finally(function(){return w(!1)});case 4:case"end":return R.stop()}},Ue)}));return function(Ue){return Ce.apply(this,arguments)}}(),[]);return Object(h.useEffect)(function(){he()},[he]),fe?Object(r.jsxs)("div",{style:{position:"relative",paddingBottom:"64px"},children:[Object(r.jsx)(n.a,{submitter:{render:function(Ue,ne){var N=Object(g.a)(ne,2),R=N[0],V=N[1];return Object(r.jsxs)($e.b,{style:{position:"absolute",bottom:0,left:0},children:[R,V]})}},initialValues:fe,onFinish:qe,children:Object(r.jsxs)(He.a,{children:[Object(r.jsx)(Qe.a,{name:"max_attempts",label:Object(r.jsx)(l.a,{id:"max_attempts"}),tooltip:Object(r.jsx)(l.a,{id:"max_attempts"}),placeholder:ge.formatMessage({id:"max_attempts",defaultMessage:"max_attempts"})}),Object(r.jsx)(Qe.a,{name:"max_execution_time",label:Object(r.jsx)(l.a,{id:"max_execution_time"}),tooltip:Object(r.jsx)(l.a,{id:"max_execution_time"}),placeholder:ge.formatMessage({id:"max_execution_time",defaultMessage:"max_execution_time"})})]})}),Object(r.jsx)(Ge.a,{}),Object(r.jsx)(Ve.a,{questions:fe.questions,quizId:fe.id,onAdded:he,onEdited:he,onRemoved:he,tableHeader:Object(r.jsx)(l.a,{id:"questions"}),tableLoading:Z,questionsCategory:{type:"question"}})]}):Object(r.jsx)(B.a,{})},Ze=function(){var H,j=Object(oe.b)(),X=j.competencyChallenge,D=Object(l.l)(),Z=Object(z.l)(),w=Z.id,re=Z.tab,ye=re===void 0?"main":re,fe=w==="new",ue=Object(h.useMemo)(function(){var ge;return fe?D.formatMessage({id:"CompetencyChallenges.new_challenge"}):(ge=X.data)!==null&&ge!==void 0&&ge.name?X.data.name:D.formatMessage({id:"menu.Competency challenges"})},[D,(H=X.data)===null||H===void 0?void 0:H.name]);return Object(r.jsx)(xe.a,{title:ue,header:{breadcrumb:{routes:[{path:"competency-challenges",breadcrumbName:D.formatMessage({id:"menu.Competency challenges"})},{path:String(w),breadcrumbName:ue},{path:ye,breadcrumbName:D.formatMessage({id:"CompetencyChallenges.".concat(ye)})}]}},children:Object(r.jsxs)(te.a,{bodyStyle:{padding:"24px"},tabs:{type:"card",cardProps:{loading:X.loading&&Object(r.jsx)(B.a,{})},activeKey:ye,onChange:function(he){l.f.push("/competency-challenges/".concat(w,"/").concat(he))}},children:[Object(r.jsx)(te.a.TabPane,{tab:Object(r.jsx)(l.a,{id:"CompetencyChallenges.main"}),children:Object(r.jsx)(Me,{})},"main"),Object(r.jsx)(te.a.TabPane,{tab:Object(r.jsx)(l.a,{id:"CompetencyChallenges.scales"}),disabled:fe,children:Object(r.jsx)(ze,{})},"scales"),Object(r.jsx)(te.a.TabPane,{tab:Object(r.jsx)(l.a,{id:"CompetencyChallenges.diagnostic-test"}),disabled:fe,children:Object(r.jsx)(ie,{})},"diagnostic-test")]})})},it=function(){return Object(r.jsx)(oe.a,{children:Object(r.jsx)(Ze,{})})},ct=Q.default=it},YRX9:function(We,Q,e){"use strict";e.d(Q,"f",function(){return z}),e.d(Q,"e",function(){return te}),e.d(Q,"a",function(){return _}),e.d(Q,"g",function(){return W}),e.d(Q,"c",function(){return P}),e.d(Q,"b",function(){return g}),e.d(Q,"h",function(){return F}),e.d(Q,"d",function(){return Y});var y=e("qLMh"),B=e("k1fw"),h=e("9og8"),l=e("9kvl");function z(p,v){return xe.apply(this,arguments)}function xe(){return xe=Object(h.a)(Object(y.a)().mark(function p(v,C){return Object(y.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",Object(l.i)("/api/admin/competency-challenges",Object(B.a)({method:"GET",useCache:!1,params:v},C||{})));case 1:case"end":return m.stop()}},p)})),xe.apply(this,arguments)}function te(p,v){return oe.apply(this,arguments)}function oe(){return oe=Object(h.a)(Object(y.a)().mark(function p(v,C){return Object(y.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",Object(l.i)("/api/admin/competency-challenges/".concat(v),Object(B.a)({method:"GET",useCache:!1},C||{})));case 1:case"end":return m.stop()}},p)})),oe.apply(this,arguments)}function _(p,v){return se.apply(this,arguments)}function se(){return se=Object(h.a)(Object(y.a)().mark(function p(v,C){return Object(y.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",Object(l.i)("/api/admin/competency-challenges",Object(B.a)({method:"POST",headers:{"Content-Type":"application/json"},data:v},C||{})));case 1:case"end":return m.stop()}},p)})),se.apply(this,arguments)}function W(p,v,C){return J.apply(this,arguments)}function J(){return J=Object(h.a)(Object(y.a)().mark(function p(v,C,I){return Object(y.a)().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",Object(l.i)("/api/admin/competency-challenges/".concat(v),Object(B.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:C},I||{})));case 1:case"end":return A.stop()}},p)})),J.apply(this,arguments)}function P(p,v){return f.apply(this,arguments)}function f(){return f=Object(h.a)(Object(y.a)().mark(function p(v,C){return Object(y.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",Object(l.i)("/api/admin/competency-challenges/".concat(v),Object(B.a)({method:"DELETE"},C||{})));case 1:case"end":return m.stop()}},p)})),f.apply(this,arguments)}function g(p,v){return n.apply(this,arguments)}function n(){return n=Object(h.a)(Object(y.a)().mark(function p(v,C){return Object(y.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",Object(l.i)("/api/admin/competency-challenges/scales",Object(B.a)({method:"POST",headers:{"Content-Type":"application/json"},data:v},C||{})));case 1:case"end":return m.stop()}},p)})),n.apply(this,arguments)}function F(p,v,C){return $.apply(this,arguments)}function $(){return $=Object(h.a)(Object(y.a)().mark(function p(v,C,I){return Object(y.a)().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.abrupt("return",Object(l.i)("/api/admin/competency-challenges/scales/".concat(v),Object(B.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:C},I||{})));case 1:case"end":return A.stop()}},p)})),$.apply(this,arguments)}function Y(p,v){return K.apply(this,arguments)}function K(){return K=Object(h.a)(Object(y.a)().mark(function p(v,C){return Object(y.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",Object(l.i)("/api/admin/competency-challenges/scales/".concat(v),Object(B.a)({method:"DELETE"},C||{})));case 1:case"end":return m.stop()}},p)})),K.apply(this,arguments)}},enqX:function(We,Q,e){"use strict";e.d(Q,"a",function(){return J});var y=e("nRaC"),B=e("5RzL"),h=e("tJVT"),l=e("q1tI"),z=e.n(l),xe=e("9kvl"),te=e("JifO"),oe=e("tKSU"),_=e("nKUr"),se=e.n(_),W=function P(f,g,n){var F,$=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return(F=f.subcategories)!==null&&F!==void 0&&F.length?{title:f.name,value:f.id,disabled:$!==n||g.includes(f.id),children:f.subcategories.map(function(Y){return P(Y,g,n,$+1)})}:{title:f.name,value:f.id,disabled:$!==n||g.includes(f.id)}},J=function(f){var g,n,F,$=f.value,Y=f.onChange,K=f.type,p=K===void 0?"scale":K,v=f.disabledNodes,C=v===void 0?[]:v,I=Object(l.useState)([]),m=Object(h.a)(I,2),A=m[0],r=m[1],ae=Object(oe.b)(),Oe=ae.categoryDepths,Me=ae.competencyChallenge,Pe=Object(l.useMemo)(function(){var G;return((G=Me.data)===null||G===void 0?void 0:G.type)==="simple"?A.filter(function(Ie){var x,U;return Ie.id===((x=Me.data)===null||x===void 0||(U=x.category)===null||U===void 0?void 0:U.id)}):A},[A,(g=Me.data)===null||g===void 0?void 0:g.type,(n=Me.data)===null||n===void 0||(F=n.category)===null||F===void 0?void 0:F.id]),E=Object(l.useMemo)(function(){return Pe.map(function(G){return W(G,C,Oe[p])})},[Pe,C,p]);return Object(l.useEffect)(function(){Object(te.c)().then(function(G){G.success&&r(G.data)})},[]),Object(_.jsx)(B.a,{loading:A.length===0,showSearch:!0,value:$,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:Object(_.jsx)(xe.a,{id:"select",defaultMessage:"Please select"}),allowClear:!0,treeDefaultExpandAll:!0,onChange:Y,treeData:E,disabled:A.length===0})}},hd5d:function(We,Q,e){"use strict";var y=e("qLMh"),B=e("9og8"),h=e("q1tI"),l=e.n(h),z=e("acco"),xe=e.n(z),te=e("BAh9"),oe=e("vtG9"),_=e.n(oe),se=e("9kvl"),W=e("nKUr"),J=e.n(W),P=function(n){var F=n.attrs,$=F.href,Y=$.split("/").pop();return Object(W.jsx)("p",{children:Object(W.jsx)("a",{rel:"noreferrer",href:$,target:"_blank",children:Y})})},f=function(n){var F=n.value,$=n.onChange,Y=n.directory,K=Y===void 0?"/wysiwyg":Y,p=Object(se.l)();return Object(W.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(W.jsx)(xe.a,{excludeBlockMenuItems:["Sketch"],embeds:[{matcher:function(C){return!0},component:P}],uploadImage:function(){var v=Object(B.a)(Object(y.a)().mark(function C(I){var m,A;return Object(y.a)().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,Object(te.e)(I,K);case 2:if(m=ae.sent,!m.success){ae.next=8;break}if(!I.type.includes("image/")){ae.next=7;break}return A=m.data[0].name.includes("/")?m.data[0].name:"".concat(K).concat(m.data[0].name),ae.abrupt("return",Object(te.d)(A,1e3));case 7:return ae.abrupt("return",m.data[0].url);case 8:throw new Error("Error while uploading");case 9:case"end":return ae.stop()}},C)}));return function(C){return v.apply(this,arguments)}}(),defaultValue:F||"",onChange:function(C){return $&&$(C())},placeholder:p.formatMessage({id:"wysiwyg_placeholder"})})})};Q.a=f},tKSU:function(We,Q,e){"use strict";e.d(Q,"b",function(){return f}),e.d(Q,"a",function(){return g});var y=e("k1fw"),B=e("tJVT"),h=e("qLMh"),l=e("9og8"),z=e("q1tI"),xe=e.n(z),te=e("Ty5D"),oe=e("YRX9"),_=e("+up7"),se=e("nKUr"),W=e.n(se),J={categoryDepths:{scale:2,question:1,role:0},competencyChallenge:{data:null,loading:!1},refreshData:function(){var n=Object(l.a)(Object(h.a)().mark(function $(){return Object(h.a)().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.abrupt("return",console.warn("CONTEXT INIT"));case 1:case"end":return K.stop()}},$)}));function F(){return n.apply(this,arguments)}return F}()},P=xe.a.createContext(J),f=function(){return Object(z.useContext)(P)},g=function(F){var $=F.children,Y=Object(z.useState)(J.competencyChallenge),K=Object(B.a)(Y,2),p=K[0],v=K[1],C=Object(z.useState)(J.categoryDepths),I=Object(B.a)(C,2),m=I[0],A=I[1],r=Object(te.l)(),ae=r.id,Oe=Number(ae),Me=Object(z.useCallback)(Object(l.a)(Object(h.a)().mark(function E(){var G;return Object(h.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!Number.isNaN(Oe)){x.next=2;break}return x.abrupt("return");case 2:return x.prev=2,v(function(U){return Object(y.a)(Object(y.a)({},U),{},{loading:!0})}),x.next=6,Object(oe.e)(Oe);case 6:if(G=x.sent,G.success){x.next=10;break}return v(function(U){return Object(y.a)(Object(y.a)({},U),{},{error:G.errors})}),x.abrupt("return");case 10:v(function(U){return Object(y.a)(Object(y.a)({},U),{},{data:G.data})}),x.next=16;break;case 13:x.prev=13,x.t0=x.catch(2),v(function(U){return Object(y.a)(Object(y.a)({},U),{},{error:x.t0})});case 16:return x.prev=16,v(function(U){return Object(y.a)(Object(y.a)({},U),{},{loading:!1})}),x.finish(16);case 19:case"end":return x.stop()}},E,null,[[2,13,16,19]])})),[Oe]),Pe=Object(z.useCallback)(Object(l.a)(Object(h.a)().mark(function E(){var G,Ie,x,U,ve,Fe,Ne,Ke,t,Ae,Be,ze,Ye,Ge,Xe,$e,He,Qe,Ve;return Object(h.a)().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.prev=0,ie.next=3,Object(_.a)();case 3:if($e=ie.sent,$e.success){ie.next=6;break}return ie.abrupt("return");case 6:He=Number((G=$e.data)===null||G===void 0||(Ie=G.escolalms_competency_challenge)===null||Ie===void 0||(x=Ie.category)===null||x===void 0||(U=x.scale)===null||U===void 0||(ve=U.depth)===null||ve===void 0?void 0:ve.value),Qe=Number((Fe=$e.data)===null||Fe===void 0||(Ne=Fe.escolalms_competency_challenge)===null||Ne===void 0||(Ke=Ne.category)===null||Ke===void 0||(t=Ke.question)===null||t===void 0||(Ae=t.depth)===null||Ae===void 0?void 0:Ae.value),Ve=Number((Be=$e.data)===null||Be===void 0||(ze=Be.escolalms_competency_challenge)===null||ze===void 0||(Ye=ze.category)===null||Ye===void 0||(Ge=Ye.role)===null||Ge===void 0||(Xe=Ge.depth)===null||Xe===void 0?void 0:Xe.value),A({scale:Number.isNaN(He)?2:He,question:Number.isNaN(Qe)?1:Qe,role:Number.isNaN(Ve)?0:Ve}),ie.next=15;break;case 12:ie.prev=12,ie.t0=ie.catch(0),console.error(ie.t0);case 15:case"end":return ie.stop()}},E,null,[[0,12]])})),[]);return Object(z.useEffect)(function(){Me(),Pe()},[Me,Pe]),Object(se.jsx)(P.Provider,{value:{categoryDepths:m,competencyChallenge:p,refreshData:Me},children:$})}},vtG9:function(We,Q,e){},yioT:function(We,Q,e){"use strict";e.d(Q,"a",function(){return be});var y=e("tU7J"),B=e("wFql"),h=e("BoS7"),l=e("Sdc0"),z=e("oBTY"),xe=e("+L6B"),te=e("2/Rp"),oe=e("bbsP"),_=e("/wGt"),se=e("qLMh"),W=e("9og8"),J=e("PpiC"),P=e("tJVT"),f=e("k1fw"),g=e("q1tI"),n=e("9kvl"),F=e("YJCA"),$=e("wYyv"),Y=e("smpX"),K=e("eyie"),p=e("w5pM"),v=e("mWMg"),C=e("Vpfc"),I=e("qRSf"),m=e("DYRE"),A=e("zeV3"),r=e("/zsF"),ae=e("PArb"),Oe=e("VMEa"),Me=e("yj/a"),Pe=e("FJDo"),E=e("/y+f"),G=e("enqX"),Ie=e("5Dmo"),x=e("3S7+"),U=e("jrin"),ve=e("Qurx"),Fe=e("x1Ii"),Ne=e("tneF"),Ke=e("/MfK"),t=e("nKUr"),Ae,Be=(Ae={},Object(U.a)(Ae,E.e.MULTIPLE_CHOICE,[{isCorrect:!1,value:""},{isCorrect:!1,value:""}]),Object(U.a)(Ae,E.e.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS,[{value:"",weight:""},{value:"",weight:""}]),Ae),ze=function(a){var s,i=a.type,c=Object(n.l)();return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(ve.a,{name:"question",label:Object(t.jsx)(n.a,{id:"question"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0}),Object(t.jsx)(Fe.b,{name:"answers",creatorButtonProps:{creatorButtonText:c.formatMessage({id:"Questions.addAnswer"})},actionRender:function(){return[]},initialValue:(s=Be[i])!==null&&s!==void 0?s:[],children:function(b,o,S,M){return Object(t.jsxs)(Oe.a.Group,{title:Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(n.a,{id:"Questions.answer",values:{ordinalNumber:o+1}}),M>2&&Object(t.jsx)(x.a,{title:c.formatMessage({id:"Questions.deleteAnswer"}),children:Object(t.jsx)(te.a,{type:"text",icon:Object(t.jsx)(Ke.a,{}),onClick:function(){return S.remove(b.name)}})})]}),titleStyle:{width:"100%",display:"flex",justifyContent:"space-between"},children:[i===E.e.MULTIPLE_CHOICE&&Object(t.jsx)(Ne.a,{name:"isCorrect",label:Object(t.jsx)(n.a,{id:"Questions.correctAnswer",defaultMessage:"Is Correct Answer?"}),rules:[function(L){var le=L.getFieldValue;return{validator:function(){var me,_e=(me=le("answers"))!==null&&me!==void 0?me:[];return _e.filter(function(Te){return Te==null?void 0:Te.isCorrect}).length>1?Promise.reject("Only one answer can be correct"):Promise.resolve()},message:Object(t.jsx)(n.a,{id:"Questions.onlyOneAnswerIsCorrect"})}}]}),Object(t.jsx)(ve.a,{name:"value",rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],label:Object(t.jsx)(n.a,{id:"content",defaultMessage:"Content"})}),i===E.e.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS&&Object(t.jsx)(Pe.a,{name:"weight",rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],fieldProps:{min:-Number.MAX_SAFE_INTEGER,addonAfter:"%"},label:Object(t.jsx)(n.a,{id:"weight",defaultMessage:"Weight"})})]})}})]})},Ye=function(){return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(ve.a,{name:"question",label:Object(t.jsx)(n.a,{id:"question"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0}),Object(t.jsx)(Ne.a,{name:"isCorrect",label:Object(t.jsx)(n.a,{id:"Questions.correctAnswer"})})]})},Ge=[{value:""}],Xe=function(){var a=Object(n.l)();return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(ve.a,{name:"question",label:Object(t.jsx)(n.a,{id:"question"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0}),Object(t.jsx)(Fe.b,{name:"answers",creatorButtonProps:{creatorButtonText:a.formatMessage({id:"Questions.addAnswer"})},deleteIconProps:{tooltipText:a.formatMessage({id:"Questions.deleteAnswer"})},actionRender:function(i,c,u){var b=Object(P.a)(u,2),o=b[1];return[o]},min:1,initialValue:Ge,children:function(i,c){return Object(t.jsx)(ve.a,{name:"value",rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],label:Object(t.jsx)(n.a,{id:"Questions.answer",values:{ordinalNumber:c+1},defaultMessage:"Answer ".concat(c+1)})})}})]})},$e=[{firstOfPair:"",secondOfPair:""}],He=function(){var a=Object(n.l)();return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(ve.a,{name:"question",label:Object(t.jsx)(n.a,{id:"question"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0}),Object(t.jsx)(Fe.b,{name:"answers",creatorButtonProps:{creatorButtonText:a.formatMessage({id:"Questions.addMatchingPair",defaultMessage:"Add Matching Pair"})},deleteIconProps:{tooltipText:a.formatMessage({id:"Questions.deletePair"})},actionRender:function(i,c,u){var b=Object(P.a)(u,2),o=b[1];return[o]},min:1,initialValue:$e,children:function(i,c){return Object(t.jsxs)(Oe.a.Group,{direction:"horizontal",align:"baseline",size:"small",spaceProps:{style:{flexWrap:"nowrap"}},title:Object(t.jsx)(n.a,{id:"Questions.pair",values:{ordinalNumber:c+1},defaultMessage:"Pair ".concat(c+1)}),children:[Object(t.jsx)(ve.a,{name:"firstOfPair",rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}]}),Object(t.jsx)(ve.a,{name:"secondOfPair",rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}]})]})}})]})},Qe=function(){return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(ve.a,{name:"question",label:Object(t.jsx)(n.a,{id:"question"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0}),Object(t.jsx)(Pe.a,{name:"answer",label:Object(t.jsx)(n.a,{id:"answer"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0}),Object(t.jsx)(Pe.a,{name:"errorMargin",fieldProps:{addonAfter:"+/-"},label:Object(t.jsx)(n.a,{id:"Questions.errorMargin"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0})]})},Ve=e("BiO0"),tt=function(){return Object(t.jsx)(Ve.a,{name:"question",label:Object(t.jsx)(n.a,{id:"question"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0})},ie=function(a){var s=a.type;if(!s)return null;switch(s){case E.e.MULTIPLE_CHOICE:case E.e.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS:return Object(t.jsx)(ze,{type:s});case E.e.TRUE_FALSE:return Object(t.jsx)(Ye,{});case E.e.SHORT_ANSWERS:return Object(t.jsx)(Xe,{});case E.e.MATCHING:return Object(t.jsx)(He,{});case E.e.NUMERICAL_QUESTION:return Object(t.jsx)(Qe,{});case E.e.ESSAY:case E.e.DESCRIPTION:return Object(t.jsx)(tt,{})}return Object(t.jsxs)("pre",{children:["Unsupported type ",s]})},Ze=e("rAM+"),it=["question"],ct=function(a){for(var s=["~","=","#","{","}",":"],i="",c=0;c<a.length;c++){var u=a[c];s.includes(u)?i+="\\".concat(u):i+=u}return i},pe=function(a){var s=a.question,i=a.answers;if(i.length===0)return"".concat(s,"{}");var c="".concat(s,"{"),u=Object(Ze.a)(i),b;try{for(u.s();!(b=u.n()).done;){var o=b.value,S=o.isCorrect,M=o.value,L=S?"=":"~";c+="".concat(L).concat(M)}}catch(le){u.e(le)}finally{u.f()}return c+="}",c.trim()},H=function(a){var s=a.question,i=a.answers;if(i.length==0)return"".concat(s,"{}");var c="".concat(s,"{"),u=Object(Ze.a)(i),b;try{for(u.s();!(b=u.n()).done;){var o=b.value,S=o.value,M=o.weight;c+="~%".concat(M,"%").concat(S)}}catch(L){u.e(L)}finally{u.f()}return c+="}",c.trim()},j=function(a){var s=a.question,i=a.isCorrect;return"".concat(s,"{").concat(i?"T":"F","}")},X=function(a){var s=a.question,i=a.answers;if(i.length===0)return"".concat(s,"{}");var c="".concat(s,"{"),u=Object(Ze.a)(i),b;try{for(u.s();!(b=u.n()).done;){var o=b.value,S=o.value;c+="=".concat(S)}}catch(M){u.e(M)}finally{u.f()}return c+="}",c.trim()},D=function(a){var s=a.question,i=a.answers;if(i.length===0)return"".concat(s,"{}");var c="".concat(s,"{"),u=Object(Ze.a)(i),b;try{for(u.s();!(b=u.n()).done;){var o=b.value,S=o.firstOfPair,M=o.secondOfPair;c+="=".concat(S,"->").concat(M)}}catch(L){u.e(L)}finally{u.f()}return c+="}",c.trim()},Z=function(a){var s=a.question,i=a.answer,c=a.errorMargin;return"".concat(s,"{#").concat(i,":").concat(c,"}")},w=function(a){var s=a.question;return"".concat(s,"{}")},re=function(a){var s=a.question;return s},ye=function(a){var s=a.question,i=Object(J.a)(a,it),c=Object(f.a)({question:ct(s)},i);switch(c.type){case E.e.MULTIPLE_CHOICE:return pe(c);case E.e.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS:return H(c);case E.e.TRUE_FALSE:return j(c);case E.e.SHORT_ANSWERS:return X(c);case E.e.MATCHING:return D(c);case E.e.NUMERICAL_QUESTION:return Z(c);case E.e.ESSAY:return w(c);case E.e.DESCRIPTION:return re(c);default:throw new Error("Unsupported type: ".concat(c.type))}},fe=function(a,s){var i=s.type,c=s.score,u=s.category_id,b=a==null?void 0:a.stem.text,o=a.choices.every(function(L){var le=L.weight;return le===null});if(o){var S=a.choices.map(function(L){var le=L.isCorrect,we=L.text;return{isCorrect:le,value:we.text}});return{type:i,score:c,category_id:u,question:b,answers:S}}var M=a.choices.reduce(function(L,le){var we=le.weight,me=le.text;return we!==null?[].concat(Object(z.a)(L),[{weight:we,value:me.text}]):L},[]);return{type:i,score:c,category_id:u,question:b,answers:M}},ue=function(a,s){var i=s.type,c=s.score,u=s.category_id,b=a==null?void 0:a.stem.text,o=a.isTrue;return{type:i,score:c,category_id:u,question:b,isCorrect:o}},ge=function(a,s){var i=s.type,c=s.score,u=s.category_id,b=a==null?void 0:a.stem.text,o=a.choices.map(function(S){var M=S.text;return{value:M.text}});return{type:i,score:c,category_id:u,question:b,answers:o}},he=function(a,s){var i=s.type,c=s.score,u=s.category_id,b=a==null?void 0:a.stem.text,o=a.matchPairs.map(function(S){var M=S.subquestion,L=S.subanswer;return{firstOfPair:M.text,secondOfPair:L}});return{type:i,score:c,category_id:u,question:b,answers:o}},qe=function(a,s){var i=s.type,c=s.score,u=s.category_id,b=a==null?void 0:a.stem.text;if(Array.isArray(a==null?void 0:a.choices))throw new Error("Unsupported choices type: array");var o=a==null?void 0:a.choices.number,S=a==null?void 0:a.choices.range;if(o===void 0||S===void 0)throw new Error("Value undefined - answer: ".concat(o," errorMargin: ").concat(S));return{type:i,score:c,category_id:u,question:b,answer:o,errorMargin:S}},Ce=function(a,s){var i=s.type,c=s.score,u=s.category_id,b=a==null?void 0:a.stem.text;return{type:i,score:c,category_id:u,question:b}};function Ue(d){if(!!d){var a=Object(Y.parse)(d.value),s=Object(P.a)(a,1),i=s[0];switch(i.type){case"MC":return fe(i,d);case"TF":return ue(i,d);case"Short":return ge(i,d);case"Matching":return he(i,d);case"Numerical":return qe(i,d);case"Description":case"Essay":return Ce(i,d);default:throw new Error("Unsupported type: ".concat(i==null?void 0:i.type))}}}var ne=["type","score","category"],N=Object.values(E.e).reduce(function(d,a){return a?[].concat(Object(z.a)(d),[{value:a,label:Object(t.jsx)(n.a,{id:"gift_type.".concat(a)})}]):d},[]),R=function(a){var s=a.onSubmit,i=a.values,c=a.competencyChallengeCategoryTreeProps,u=c===void 0?!1:c,b=Object(n.l)(),o=Oe.a.useForm(),S=Object(P.a)(o,1),M=S[0],L=Oe.a.useWatch("type",M),le=Object(g.useMemo)(function(){return Ue(i)},[i]),we=Object(g.useCallback)(function(){var me=Object(W.a)(Object(se.a)().mark(function _e(Te){var at,ke,nt,rt;return Object(se.a)().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return at=ye(Te),ke=Te.score,nt=Te.category_id,De.next=4,s({value:at,score:ke,category_id:nt});case 4:if(rt=De.sent,rt){De.next=7;break}return De.abrupt("return");case 7:M.resetFields();case 8:case"end":return De.stop()}},_e)}));return function(_e){return me.apply(this,arguments)}}(),[]);return Object(g.useEffect)(function(){M.resetFields()},[le]),Object(g.useEffect)(function(){if(L){var me=M.getFieldsValue(),_e=Object.keys(me).filter(function(Te){return!ne.includes(Te)});M.resetFields(_e)}},[L]),Object(t.jsxs)(A.b,{direction:"vertical",style:{display:"flex"},children:[Object(t.jsx)(ae.a,{children:Object(t.jsx)(n.a,{id:le?"Questions.edit":"addNewQuestion"})}),Object(t.jsxs)(Oe.a,{layout:"horizontal",form:M,onFinish:we,initialValues:le,children:[Object(t.jsx)(Me.a,{name:"type",placeholder:b.formatMessage({id:"selectNewQuestionType",defaultMessage:"Select new question type"}),label:Object(t.jsx)(n.a,{id:"type",defaultMessage:"Type:"}),options:N,rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0}),Object(t.jsx)(ie,{type:L}),Object(t.jsx)(Pe.a,{name:"score",label:Object(t.jsx)(n.a,{id:"Questions.score",defaultMessage:"Score"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}]}),u&&Object(t.jsx)(Oe.a.Item,{name:"category_id",label:Object(t.jsx)(n.a,{id:"category",defaultMessage:"Category"}),rules:[{required:!0,message:Object(t.jsx)(n.a,{id:"field_required"})}],required:!0,children:Object(t.jsx)(G.a,Object(f.a)({},typeof u=="object"?u:{}))})]})]})},V=e("60mZ"),k=["className","style"],ee=Object(F.c)(function(){return Object(t.jsx)(K.a,{style:{cursor:"grab",color:"#999"}})}),ce=Object(F.b)(function(d){return Object(t.jsx)("tr",Object(f.a)({},d))}),de=Object(F.a)(function(d){return Object(t.jsx)("tbody",Object(f.a)({},d))}),T=[{title:Object(t.jsx)(n.a,{id:"sort",defaultMessage:"sort"}),dataIndex:"id",width:60,className:"drag-visible",render:function(){return Object(t.jsx)(ee,{})}},{title:Object(t.jsx)(n.a,{id:"type",defaultMessage:"Type"}),dataIndex:"type",hideInForm:!0,hideInSearch:!0,hideInSetting:!0,render:function(a,s){return Object(t.jsx)(n.a,{id:"gift_type.".concat(s.type)})}},{title:Object(t.jsx)(n.a,{id:"question",defaultMessage:"Question"}),dataIndex:"question",hideInForm:!0,hideInSearch:!0,hideInSetting:!0,render:function(a,s){var i=Object(Y.parse)(s.value);return i!=null&&i[0]&&"stem"in i[0]?i[0].stem.text:"question"}}],Ee={title:Object(t.jsx)(n.a,{id:"category",defaultMessage:"Category"}),dataIndex:"category_id",hideInForm:!0,hideInSearch:!0,hideInSetting:!0,render:function(a,s){return typeof s.category_id=="number"?Object(t.jsx)(C.a,{type:"Category",type_id:s.category_id}):"-"}},be=function(a){var s=a.questions,i=a.onAdded,c=a.onRemoved,u=a.onEdited,b=a.quizId,o=a.tableLoading,S=a.tableHeader,M=a.questionsCategory,L=Object(g.useState)(!1),le=Object(P.a)(L,2),we=le[0],me=le[1],_e=Object(g.useState)(!1),Te=Object(P.a)(_e,2),at=Te[0],ke=Te[1],nt=Object(g.useState)(),rt=Object(P.a)(nt,2),Re=rt[0],De=rt[1],dt=Object(g.useState)(!1),lt=Object(P.a)(dt,2),mt=lt[0],jt=lt[1],vt=Object(g.useState)(s),ot=Object(P.a)(vt,2),st=ot[0],ut=ot[1],bt=Object(g.useRef)();Object(g.useEffect)(function(){var je;(je=bt.current)===null||je===void 0||je.reload(),ut(s)},[s]);var Ot=function(q){var Le=q.oldIndex,Se=q.newIndex;if(Le!==Se){var Je=Object($.a)(st.slice(),Le,Se).filter(Boolean).map(function(O,et){return Object(f.a)(Object(f.a)({},O),{},{order:et})});Je.forEach(function(O,et){O.id!==st[et].id&&Object(I.g)(O.id,Object(f.a)(Object(f.a)({},O),{},{order:et+1,topic_gift_quiz_id:b}))}),ut(Je)}},ft=function(q){return Object(t.jsx)(de,Object(f.a)({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:Ot},q))},gt=function(q){var Le=q.className,Se=q.style,Je=Object(J.a)(q,k),O=st.findIndex(function(et){return et.id===Je["data-row-key"]});return Object(t.jsx)(ce,Object(f.a)({index:O},Je))},ht=Object(g.useCallback)(function(){var je=Object(W.a)(Object(se.a)().mark(function q(Le){var Se;return Object(se.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.prev=0,me(!0),O.next=4,Object(I.a)(Object(f.a)({topic_gift_quiz_id:b},Le));case 4:return Se=O.sent,ke(!1),i==null||i(),O.abrupt("return",Se.success);case 10:return O.prev=10,O.t0=O.catch(0),console.log(O.t0),O.abrupt("return",!1);case 14:return O.prev=14,me(!1),O.finish(14);case 17:case"end":return O.stop()}},q,null,[[0,10,14,17]])}));return function(q){return je.apply(this,arguments)}}(),[at,b]),pt=Object(g.useCallback)(function(){var je=Object(W.a)(Object(se.a)().mark(function q(Le){var Se;return Object(se.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if((Re==null?void 0:Re.id)!==void 0){O.next=2;break}return O.abrupt("return",!1);case 2:return O.prev=2,me(!0),O.next=6,Object(I.g)(Re.id,Object(f.a)({topic_gift_quiz_id:b},Le));case 6:return Se=O.sent,De(void 0),u==null||u(),O.abrupt("return",Se.success);case 12:return O.prev=12,O.t0=O.catch(2),console.log(O.t0),O.abrupt("return",!1);case 16:return O.prev=16,me(!1),O.finish(16);case 19:case"end":return O.stop()}},q,null,[[2,12,16,19]])}));return function(q){return je.apply(this,arguments)}}(),[Re==null?void 0:Re.id,b]);return Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(_.a,{open:at,onClose:function(){return ke(!1)},children:Object(t.jsx)(R,{onSubmit:ht,competencyChallengeCategoryTreeProps:M})}),Object(t.jsx)(_.a,{open:!!Re,onClose:function(){return De(void 0)},children:Object(t.jsx)(R,{onSubmit:pt,competencyChallengeCategoryTreeProps:M,values:Re})}),Object(t.jsx)(v.a,{search:!1,cardProps:{bodyStyle:{padding:0}},loading:o,headerTitle:S,toolbar:{settings:[]},toolBarRender:function(){return[Object(t.jsxs)(te.a,{icon:Object(t.jsx)(p.a,{}),type:"primary",onClick:function(){return ke(!0)},children:[" ",Object(t.jsx)(n.a,{id:"addNewQuestion",defaultMessage:"Add new question"})]},"add")]},columns:[].concat(T,Object(z.a)(M?[Ee]:[]),[{title:Object(t.jsx)(n.a,{id:"actions",defaultMessage:"Actions"}),dataIndex:"address",valueType:"option",render:function(q,Le){return[Object(t.jsx)(te.a,{size:"small",type:"primary",onClick:function(){De(Le)},children:Object(t.jsx)(n.a,{id:"Questions.edit",defaultMessage:"Edit Question"})},"edit"),Object(t.jsx)(te.a,{loading:we,size:"small",danger:!0,onClick:function(){me(!0),Object(I.b)(Le.id).then(function(){c&&c()}).finally(function(){me(!1)})},children:Object(t.jsx)(n.a,{id:"Questions.delete",defaultMessage:"Delete Question"})},"delete")]}}]),rowKey:function(q){return q.id},pagination:!1,dataSource:st,components:{body:{wrapper:ft,row:gt}}}),Object(t.jsxs)(B.a,{style:{marginTop:"3em"},children:["Debug GIFT: ",Object(t.jsx)(l.a,{checked:mt,onChange:function(q){return jt(q)}})]})]})}}}]);

//# sourceMappingURL=p__CompetencyChallenges__form.0222eda6.async.js.map