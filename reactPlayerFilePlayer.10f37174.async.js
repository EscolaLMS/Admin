(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{"bq/u":function(R,te,p){var S=p("cxFA").default,D=p("xbqb").default,M=p("Lw8S").default,a=p("x49D").default,U=p("2MUX").default,w=p("CS2o").default,V=p("bfL6").default,H=Object.create,y=Object.defineProperty,N=Object.getOwnPropertyDescriptor,C=Object.getOwnPropertyNames,T=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty,j=function(i,r,t){return r in i?y(i,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[r]=t},B=function(i,r){for(var t in r)y(i,t,{get:r[t],enumerable:!0})},I=function(i,r,t,e){if(r&&typeof r=="object"||typeof r=="function"){var n=V(C(r)),s;try{var l=function(){var d=s.value;!F.call(i,d)&&d!==t&&y(i,d,{get:function(){return r[d]},enumerable:!(e=N(r,d))||e.enumerable})};for(n.s();!(s=n.n()).done;)l()}catch(f){n.e(f)}finally{n.f()}}return i},x=function(i,r,t){return t=i!=null?H(T(i)):{},I(r||!i||!i.__esModule?y(t,"default",{value:i,enumerable:!0}):t,i)},$=function(i){return I(y({},"__esModule",{value:!0}),i)},o=function(i,r,t){return j(i,typeof r!="symbol"?r+"":r,t),t},_={};B(_,{default:function(){return k}}),R.exports=$(_);var m=x(p("q1tI")),c=p("tbWI"),P=p("mzdp"),L=typeof navigator!="undefined",K=L&&navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,O=L&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||K)&&!window.MSStream,W=L&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&!window.MSStream,X="https://cdn.jsdelivr.net/npm/hls.js@VERSION/dist/hls.min.js",G="Hls",z="https://cdnjs.cloudflare.com/ajax/libs/dashjs/VERSION/dash.all.min.js",J="dashjs",Q="https://cdn.jsdelivr.net/npm/flv.js@VERSION/dist/flv.min.js",Y="flvjs",Z=/www\.dropbox\.com\/.+/,b=/https:\/\/watch\.cloudflarestream\.com\/([a-z0-9]+)/,q="https://videodelivery.net/{id}/manifest/video.m3u8",k=function(h){"use strict";U(r,h);var i=w(r);function r(){var t;return D(this,r),t=i.apply(this,arguments),o(a(t),"onReady",function(){var e;return(e=t.props).onReady.apply(e,arguments)}),o(a(t),"onPlay",function(){var e;return(e=t.props).onPlay.apply(e,arguments)}),o(a(t),"onBuffer",function(){var e;return(e=t.props).onBuffer.apply(e,arguments)}),o(a(t),"onBufferEnd",function(){var e;return(e=t.props).onBufferEnd.apply(e,arguments)}),o(a(t),"onPause",function(){var e;return(e=t.props).onPause.apply(e,arguments)}),o(a(t),"onEnded",function(){var e;return(e=t.props).onEnded.apply(e,arguments)}),o(a(t),"onError",function(){var e;return(e=t.props).onError.apply(e,arguments)}),o(a(t),"onPlayBackRateChange",function(e){return t.props.onPlaybackRateChange(e.target.playbackRate)}),o(a(t),"onEnablePIP",function(){var e;return(e=t.props).onEnablePIP.apply(e,arguments)}),o(a(t),"onDisablePIP",function(e){var n=t.props,s=n.onDisablePIP,l=n.playing;s(e),l&&t.play()}),o(a(t),"onPresentationModeChange",function(e){if(t.player&&(0,c.supportsWebKitPresentationMode)(t.player)){var n=t.player.webkitPresentationMode;n==="picture-in-picture"?t.onEnablePIP(e):n==="inline"&&t.onDisablePIP(e)}}),o(a(t),"onSeek",function(e){t.props.onSeek(e.target.currentTime)}),o(a(t),"mute",function(){t.player.muted=!0}),o(a(t),"unmute",function(){t.player.muted=!1}),o(a(t),"renderSourceElement",function(e,n){return typeof e=="string"?m.default.createElement("source",{key:n,src:e}):m.default.createElement("source",S({key:n},e))}),o(a(t),"renderTrack",function(e,n){return m.default.createElement("track",S({key:n},e))}),o(a(t),"ref",function(e){t.player&&(t.prevPlayer=t.player),t.player=e}),t}return M(r,[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this),this.addListeners(this.player);var e=this.getSource(this.props.url);e&&(this.player.src=e),(O||this.props.config.forceDisableHls)&&this.player.load()}},{key:"componentDidUpdate",value:function(e){this.shouldUseAudio(this.props)!==this.shouldUseAudio(e)&&(this.removeListeners(this.prevPlayer,e.url),this.addListeners(this.player)),this.props.url!==e.url&&!(0,c.isMediaStream)(this.props.url)&&!(this.props.url instanceof Array)&&(this.player.srcObject=null)}},{key:"componentWillUnmount",value:function(){this.player.removeAttribute("src"),this.removeListeners(this.player),this.hls&&this.hls.destroy()}},{key:"addListeners",value:function(e){var n=this.props,s=n.url,l=n.playsinline;e.addEventListener("play",this.onPlay),e.addEventListener("waiting",this.onBuffer),e.addEventListener("playing",this.onBufferEnd),e.addEventListener("pause",this.onPause),e.addEventListener("seeked",this.onSeek),e.addEventListener("ended",this.onEnded),e.addEventListener("error",this.onError),e.addEventListener("ratechange",this.onPlayBackRateChange),e.addEventListener("enterpictureinpicture",this.onEnablePIP),e.addEventListener("leavepictureinpicture",this.onDisablePIP),e.addEventListener("webkitpresentationmodechanged",this.onPresentationModeChange),this.shouldUseHLS(s)||e.addEventListener("canplay",this.onReady),l&&(e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline",""),e.setAttribute("x5-playsinline",""))}},{key:"removeListeners",value:function(e,n){e.removeEventListener("canplay",this.onReady),e.removeEventListener("play",this.onPlay),e.removeEventListener("waiting",this.onBuffer),e.removeEventListener("playing",this.onBufferEnd),e.removeEventListener("pause",this.onPause),e.removeEventListener("seeked",this.onSeek),e.removeEventListener("ended",this.onEnded),e.removeEventListener("error",this.onError),e.removeEventListener("ratechange",this.onPlayBackRateChange),e.removeEventListener("enterpictureinpicture",this.onEnablePIP),e.removeEventListener("leavepictureinpicture",this.onDisablePIP),e.removeEventListener("webkitpresentationmodechanged",this.onPresentationModeChange),this.shouldUseHLS(n)||e.removeEventListener("canplay",this.onReady)}},{key:"shouldUseAudio",value:function(e){return e.config.forceVideo||e.config.attributes.poster?!1:P.AUDIO_EXTENSIONS.test(e.url)||e.config.forceAudio}},{key:"shouldUseHLS",value:function(e){return W&&this.props.config.forceSafariHLS||this.props.config.forceHLS?!0:O||this.props.config.forceDisableHls?!1:P.HLS_EXTENSIONS.test(e)||b.test(e)}},{key:"shouldUseDASH",value:function(e){return P.DASH_EXTENSIONS.test(e)||this.props.config.forceDASH}},{key:"shouldUseFLV",value:function(e){return P.FLV_EXTENSIONS.test(e)||this.props.config.forceFLV}},{key:"load",value:function(e){var n=this,s=this.props.config,l=s.hlsVersion,f=s.hlsOptions,d=s.dashVersion,g=s.flvVersion;if(this.hls&&this.hls.destroy(),this.dash&&this.dash.reset(),this.shouldUseHLS(e)&&(0,c.getSDK)(X.replace("VERSION",l),G).then(function(u){if(n.hls=new u(f),n.hls.on(u.Events.MANIFEST_PARSED,function(){n.props.onReady()}),n.hls.on(u.Events.ERROR,function(E,A){n.props.onError(E,A,n.hls,u)}),b.test(e)){var v=e.match(b)[1];n.hls.loadSource(q.replace("{id}",v))}else n.hls.loadSource(e);n.hls.attachMedia(n.player),n.props.onLoaded()}),this.shouldUseDASH(e)&&(0,c.getSDK)(z.replace("VERSION",d),J).then(function(u){n.dash=u.MediaPlayer().create(),n.dash.initialize(n.player,e,n.props.playing),n.dash.on("error",n.props.onError),parseInt(d)<3?n.dash.getDebug().setLogToBrowserConsole(!1):n.dash.updateSettings({debug:{logLevel:u.Debug.LOG_LEVEL_NONE}}),n.props.onLoaded()}),this.shouldUseFLV(e)&&(0,c.getSDK)(Q.replace("VERSION",g),Y).then(function(u){n.flv=u.createPlayer({type:"flv",url:e}),n.flv.attachMediaElement(n.player),n.flv.on(u.Events.ERROR,function(v,E){n.props.onError(v,E,n.flv,u)}),n.flv.load(),n.props.onLoaded()}),e instanceof Array)this.player.load();else if((0,c.isMediaStream)(e))try{this.player.srcObject=e}catch(u){this.player.src=window.URL.createObjectURL(e)}}},{key:"play",value:function(){var e=this.player.play();e&&e.catch(this.props.onError)}},{key:"pause",value:function(){this.player.pause()}},{key:"stop",value:function(){this.player.removeAttribute("src"),this.dash&&this.dash.reset()}},{key:"seekTo",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;this.player.currentTime=e,n||this.pause()}},{key:"setVolume",value:function(e){this.player.volume=e}},{key:"enablePIP",value:function(){this.player.requestPictureInPicture&&document.pictureInPictureElement!==this.player?this.player.requestPictureInPicture():(0,c.supportsWebKitPresentationMode)(this.player)&&this.player.webkitPresentationMode!=="picture-in-picture"&&this.player.webkitSetPresentationMode("picture-in-picture")}},{key:"disablePIP",value:function(){document.exitPictureInPicture&&document.pictureInPictureElement===this.player?document.exitPictureInPicture():(0,c.supportsWebKitPresentationMode)(this.player)&&this.player.webkitPresentationMode!=="inline"&&this.player.webkitSetPresentationMode("inline")}},{key:"setPlaybackRate",value:function(e){try{this.player.playbackRate=e}catch(n){this.props.onError(n)}}},{key:"getDuration",value:function(){if(!this.player)return null;var e=this.player,n=e.duration,s=e.seekable;return n===Infinity&&s.length>0?s.end(s.length-1):n}},{key:"getCurrentTime",value:function(){return this.player?this.player.currentTime:null}},{key:"getSecondsLoaded",value:function(){if(!this.player)return null;var e=this.player.buffered;if(e.length===0)return 0;var n=e.end(e.length-1),s=this.getDuration();return n>s?s:n}},{key:"getSource",value:function(e){var n=this.shouldUseHLS(e),s=this.shouldUseDASH(e),l=this.shouldUseFLV(e);if(!(e instanceof Array||(0,c.isMediaStream)(e)||n||s||l))return Z.test(e)?e.replace("www.dropbox.com","dl.dropboxusercontent.com"):e}},{key:"render",value:function(){var e=this.props,n=e.url,s=e.playing,l=e.loop,f=e.controls,d=e.muted,g=e.config,u=e.width,v=e.height,E=this.shouldUseAudio(this.props),A=E?"audio":"video",ee={width:u==="auto"?u:"100%",height:v==="auto"?v:"100%"};return m.default.createElement(A,S({ref:this.ref,src:this.getSource(n),style:ee,preload:"auto",autoPlay:s||void 0,controls:f,muted:d,loop:l},g.attributes),n instanceof Array&&n.map(this.renderSourceElement),g.tracks.map(this.renderTrack))}}]),r}(m.Component);o(k,"displayName","FilePlayer"),o(k,"canPlay",P.canPlay.file)}}]);

//# sourceMappingURL=reactPlayerFilePlayer.10f37174.async.js.map