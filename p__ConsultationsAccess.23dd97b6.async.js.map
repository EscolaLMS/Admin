{"version":3,"sources":["webpack:///./src/services/escola-lms/consultations_access.ts","webpack:///./src/pages/ConsultationsAccess/approveForm.tsx","webpack:///./src/pages/ConsultationsAccess/disapproveForm.tsx","webpack:///./src/pages/ConsultationsAccess/index.tsx","webpack:///./node_modules/uuid/lib/rng-browser.js","webpack:///./src/components/CollectionSelect/index.tsx","webpack:///./node_modules/uuid/index.js","webpack:///./node_modules/uuid/lib/bytesToUuid.js","webpack:///./node_modules/uuid/v1.js","webpack:///./node_modules/uuid/v4.js","webpack:///./node_modules/@ant-design/pro-form/es/components/Select/index.js"],"names":["params","options","request","method","per_page","pageSize","page","current","id","body","data","MeetingType","conditionallyReturnArr","value","bool","generateJitsiMeeting","uuidv4","getMeetingLink","meeting_link","meeting_type","meetingTypeMap","Custom","Jitsi","PencilSpaces","ApproveForm","term","onClose","onSuccess","intl","useIntl","useModel","initialState","useForm","form","meetingType","useWatch","pencilSpacesPackageInstalled","useMemo","Boolean","packages","PACKAGES","meetingTypeOptions","label","formatMessage","handleFinish","useCallback","formData","approveConsultationAccessTerm","res","success","visible","destroyOnClose","format","Date","proposed_at","DATETIME_FORMAT","required","DisapproveForm","values","disapproveConsultationAccess","then","TableList","actionRef","useRef","useState","disapproveId","setDisapproveId","approveTerm","setApproveTerm","columns","title","dataIndex","hideInSearch","sorter","width","renderFormItem","_i","type","defaultRender","rest","stateType","getFieldValue","render","_","record","user","email","consultation","name","consultation_term","date","proposed_terms","map","URL","host","created_at","valueType","valueEnum","pending","text","status","approved","undefined","reload","defaultMessage","layout","sort","consultation_id","user_id","is_coming","proposed_at_from","proposed_at_to","sortArr","Object","entries","consultationAccess","order_by","order","response","total","meta","getRandomValues","crypto","bind","msCrypto","window","rnds8","Uint8Array","module","exports","rnds","Array","i","r","Math","random","prepareObj","arr","item","Number","CollectionSelect","onChange","multiple","defaultValue","modelType","modelCollection","setModelCollection","fetching","setFetching","abortController","modelCollectionMethod","getCourses","signal","getWebinars","getConsultations","modelSingleMethod","getCourse","getWebinar","getConsultation","fetch","search","abort","AbortController","catch","onSearch","useEffect","prevCourses","input","option","children","toString","toLowerCase","indexOf","modelItem","v1","require","v4","uuid","byteToHex","substr","buf","offset","bth","join","bytesToUuid","rng","_nodeId","_clockseq","_lastMSecs","_lastNSecs","b","node","clockseq","seedBytes","msecs","getTime","nsecs","dt","Error","tl","tmh","n","ii","_excluded","_excluded2","ProFormSelectComponents","React","forwardRef","_ref","ref","fieldProps","proFieldProps","mode","showSearch","_objectWithoutProperties","context","useContext","FieldContext","_jsx","ProFormField","_objectSpread","runFunction","filedConfig","customLightMode","getPopupContainer","SearchSelect","_ref2","props","labelInValue","showArrow","autoClearSearchValue","optionLabelProp","ProFormSelect","ProFormSearchSelect","WrappedProFormSelect","displayName"],"mappings":"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","file":"p__ConsultationsAccess.23dd97b6.async.js","sourcesContent":["import { request } from 'umi';\n\nimport type { RequestOptionsInit } from 'umi-request';\n\n/**  GET /api/admin/consultation-access-enquiries */\nexport async function consultationAccess(\n  params: API.ConsultationAccessEnquiryListParams,\n  options?: RequestOptionsInit,\n) {\n  return request<API.ConsultationAccessEnquiryList>(`/api/admin/consultation-access-enquiries`, {\n    method: 'GET',\n    params: {\n      ...params,\n      per_page: params.pageSize,\n      page: params.current,\n    },\n    ...(options || {}),\n  });\n}\n\n/**  POST /api/admin/consultation-access-enquiries/approve/:id */\nexport async function approveConsultationAccessTerm(\n  id: number,\n  body: { meeting_link: string | null },\n  options?: RequestOptionsInit,\n) {\n  return request<API.DefaultResponse<API.ConsultationAccessEnquiry>>(\n    `/api/admin/consultation-access-enquiries/approve/${id}`,\n    {\n      data: body,\n      method: 'POST',\n      ...(options || {}),\n    },\n  );\n}\n\n/**  POST /api/admin/consultation-access-enquiries/disapprove/:id */\nexport async function disapproveConsultationAccess(\n  id: number,\n  body: EscolaLms.ConsultationAccess.Http.Requests.Admin.AdminDisapproveConsultationAccessEnquiryRequest,\n  options?: RequestOptionsInit,\n) {\n  return request<API.DefaultResponse<API.ConsultationAccessEnquiry>>(\n    `/api/admin/consultation-access-enquiries/disapprove/${id}`,\n    {\n      data: body,\n      method: 'POST',\n      ...(options || {}),\n    },\n  );\n}\n","import React, { useCallback, useMemo } from 'react';\nimport { format } from 'date-fns';\nimport { v4 as uuidv4 } from 'uuid';\nimport { FormattedMessage, useIntl, useModel } from 'umi';\nimport { Form, Descriptions } from 'antd';\nimport { DrawerForm, ProFormSelect, ProFormText } from '@ant-design/pro-form';\n\nimport PACKAGES from '@/consts/packages';\nimport { DATETIME_FORMAT } from '@/consts/dates';\nimport { approveConsultationAccessTerm } from '@/services/escola-lms/consultations_access';\n\nenum MeetingType {\n  Custom = 'custom',\n  Jitsi = 'jitsi',\n  PencilSpaces = 'pencil-spaces',\n}\n\nconst conditionallyReturnArr = <TObj extends Record<string, any>>(\n  value: TObj,\n  bool: boolean,\n): TObj[] => (bool ? [value] : []);\n\nconst generateJitsiMeeting = () => `https://meet.jit.si/${uuidv4()}`;\n\nconst getMeetingLink = ({ meeting_link, meeting_type }: FormData): string | null => {\n  const meetingTypeMap: Record<MeetingType, string | null> = {\n    [MeetingType.Custom]: meeting_link,\n    [MeetingType.Jitsi]: generateJitsiMeeting(),\n    [MeetingType.PencilSpaces]: null,\n  };\n\n  return meetingTypeMap?.[meeting_type] ?? meeting_link;\n};\n\ninterface FormData {\n  meeting_type: MeetingType;\n  meeting_link: string;\n}\n\ninterface Props {\n  term?: EscolaLms.ConsultationAccess.Models.ConsultationAccessEnquiryProposedTerm;\n  onClose: () => void;\n  onSuccess: () => void;\n}\n\nexport const ApproveForm: React.FC<Props> = ({ term, onClose, onSuccess }) => {\n  const intl = useIntl();\n  const { initialState } = useModel('@@initialState');\n\n  const [form] = Form.useForm<FormData>();\n  const meetingType = Form.useWatch('meeting_type', form);\n\n  const pencilSpacesPackageInstalled = useMemo(\n    () => Boolean(initialState?.packages?.[PACKAGES.PencilSpaces]),\n    [initialState?.packages],\n  );\n\n  const meetingTypeOptions = useMemo(\n    () => [\n      {\n        value: MeetingType.Custom,\n        label: intl.formatMessage({ id: `ConsultationsAccess.meetingType.custom` }),\n      },\n      {\n        value: MeetingType.Jitsi,\n        label: intl.formatMessage({ id: `ConsultationsAccess.meetingType.jitsi` }),\n      },\n      ...conditionallyReturnArr(\n        {\n          value: MeetingType.PencilSpaces,\n          label: intl.formatMessage({ id: `ConsultationsAccess.meetingType.pencil-spaces` }),\n        },\n        pencilSpacesPackageInstalled,\n      ),\n    ],\n    [intl, pencilSpacesPackageInstalled],\n  );\n\n  const handleFinish = useCallback(\n    async (formData: FormData) => {\n      if (!term) return;\n      const meeting_link = getMeetingLink(formData);\n\n      const res = await approveConsultationAccessTerm(term?.id, { meeting_link });\n      if (!res.success) return;\n\n      onClose();\n      onSuccess();\n    },\n    [term],\n  );\n\n  return (\n    <DrawerForm<FormData>\n      title={<FormattedMessage id=\"approve_form\" defaultMessage=\"Approve Form\" />}\n      onVisibleChange={(visible) => !visible && onClose()}\n      form={form}\n      visible={!!term}\n      autoFocusFirstInput\n      drawerProps={{\n        destroyOnClose: true,\n      }}\n      submitTimeout={2000}\n      initialValues={{ meeting_type: MeetingType.Custom }}\n      onFinish={handleFinish}\n    >\n      {term && (\n        <Descriptions column={2}>\n          <Descriptions.Item\n            label={<FormattedMessage id=\"approve_date\" defaultMessage=\"Approved Date\" />}\n          >\n            {format(new Date(term.proposed_at), DATETIME_FORMAT)}\n          </Descriptions.Item>\n        </Descriptions>\n      )}\n      <ProFormSelect\n        name=\"meeting_type\"\n        options={meetingTypeOptions}\n        label={<FormattedMessage id=\"ConsultationsAccess.meetingType\" />}\n      />\n      {meetingType === MeetingType.Custom && (\n        <ProFormText\n          rules={[\n            {\n              required: true,\n            },\n          ]}\n          name=\"meeting_link\"\n          label={<FormattedMessage id=\"ConsultationsAccess.meetingLink\" />}\n        />\n      )}\n    </DrawerForm>\n  );\n};\n","import { DrawerForm, ProFormTextArea } from '@ant-design/pro-form';\n\nimport { Form } from 'antd';\nimport { FormattedMessage } from 'umi';\n\nimport { disapproveConsultationAccess } from '@/services/escola-lms/consultations_access';\n\nexport const DisapproveForm: React.FC<{\n  id?: number;\n  onClose: () => void;\n  onSuccess: () => void;\n}> = ({ id, onClose, onSuccess }) => {\n  const [form] = Form.useForm<{ name: string; company: string }>();\n\n  return (\n    <DrawerForm<{\n      message: string;\n    }>\n      title={<FormattedMessage id=\"disapprove_form\" defaultMessage=\"Disapprove Form\" />}\n      onVisibleChange={(visible) => !visible && onClose()}\n      form={form}\n      visible={!!id}\n      autoFocusFirstInput\n      drawerProps={{\n        destroyOnClose: true,\n      }}\n      submitTimeout={2000}\n      onFinish={async (values) => {\n        if (id) {\n          await disapproveConsultationAccess(id, values).then((data) => {\n            if (data.success) {\n              onClose();\n              onSuccess();\n            }\n          });\n        }\n\n        return true;\n      }}\n    >\n      <ProFormTextArea\n        name=\"message\"\n        label={<FormattedMessage id=\"reason\" defaultMessage=\"Reason\" />}\n        tooltip={<FormattedMessage id=\"reason_tooltip\" defaultMessage=\"Reason\" />}\n      />\n    </DrawerForm>\n  );\n};\n","import React, { useMemo, useRef, useState } from 'react';\nimport { format } from 'date-fns';\nimport { useIntl, FormattedMessage } from 'umi';\nimport { Button, Tag, Space } from 'antd';\nimport { PageContainer } from '@ant-design/pro-layout';\nimport ProTable, { type ProColumns, type ActionType } from '@ant-design/pro-table';\n\nimport UserSelect from '@/components/UserSelect';\nimport TypeButtonDrawer from '@/components/TypeButtonDrawer';\nimport { CollectionSelect } from '@/components/CollectionSelect';\nimport { DATETIME_FORMAT } from '@/consts/dates';\nimport { consultationAccess } from '@/services/escola-lms/consultations_access';\nimport { ApproveForm } from './approveForm';\nimport { DisapproveForm } from './disapproveForm';\n\nconst TableList: React.FC = () => {\n  const actionRef = useRef<ActionType>();\n  const intl = useIntl();\n\n  const [disapproveId, setDisapproveId] = useState<number>();\n  const [approveTerm, setApproveTerm] =\n    useState<EscolaLms.ConsultationAccess.Models.ConsultationAccessEnquiryProposedTerm>();\n\n  const columns: ProColumns<API.ConsultationAccessEnquiryListItem>[] = useMemo(\n    () => [\n      {\n        title: <FormattedMessage id=\"ID\" defaultMessage=\"ID\" />,\n        dataIndex: 'id',\n        hideInSearch: true,\n        sorter: true,\n        width: '80px',\n      },\n      {\n        title: <FormattedMessage id=\"description\" defaultMessage=\"Description\" />,\n        dataIndex: 'description',\n        hideInSearch: true,\n        sorter: true,\n      },\n      {\n        title: <FormattedMessage id=\"user\" defaultMessage=\"User\" />,\n        dataIndex: 'user_id',\n        renderFormItem: (_i, { type, defaultRender, ...rest }, form) => {\n          if (type === 'form') {\n            return null;\n          }\n          const stateType = form.getFieldValue('state');\n          return (\n            <UserSelect\n              {...rest}\n              state={{\n                type: stateType,\n              }}\n            />\n          );\n        },\n        render: (_, record) =>\n          record.user?.id && (\n            <TypeButtonDrawer\n              key={'user'}\n              type=\"EscolaLms\\Core\\Models\\User\"\n              type_id={record.user?.id}\n            >\n              <Tag>{record.user.email}</Tag>\n            </TypeButtonDrawer>\n          ),\n      },\n\n      {\n        title: <FormattedMessage id=\"consultation_id\" defaultMessage=\"Consultation\" />,\n        dataIndex: 'consultation_id',\n\n        renderFormItem: (_i, { type, defaultRender, ...rest }, form) => {\n          if (type === 'form') {\n            return null;\n          }\n          const stateType = form.getFieldValue('state');\n          return (\n            <CollectionSelect\n              modelType=\"CONSULTATIONS\"\n              {...rest}\n              state={{\n                type: stateType,\n              }}\n            />\n          );\n        },\n\n        render: (_, record) =>\n          record.consultation?.id && (\n            <TypeButtonDrawer\n              key={'consultation_id'}\n              type=\"EscolaLms\\Consultations\\Models\\Consultation\"\n              type_id={record.consultation?.id}\n            >\n              <Tag>{record.consultation.name}</Tag>\n            </TypeButtonDrawer>\n          ),\n      },\n      {\n        title: <FormattedMessage id=\"consultation_term_date\" defaultMessage=\"Term Date\" />,\n        dataIndex: 'consultation_term',\n        hideInSearch: true,\n        sorter: true,\n        render: (_, record) => {\n          return record.consultation_term ? (\n            <>\n              <FormattedMessage id=\"approved_date\" defaultMessage=\"Approved Date\" />:\n              {format(new Date(record.consultation_term.date), DATETIME_FORMAT)}\n            </>\n          ) : (\n            <Space direction=\"vertical\">\n              {record.proposed_terms.map((term) => (\n                <Button\n                  key={term.id}\n                  size=\"small\"\n                  type=\"primary\"\n                  onClick={() => {\n                    setApproveTerm(term);\n                  }}\n                >\n                  <FormattedMessage id=\"approve\" defaultMessage=\"Approve Term\" />\n                  {':'}\n                  {format(new Date(term.proposed_at), DATETIME_FORMAT)}\n                </Button>\n              ))}\n            </Space>\n          );\n        },\n      },\n\n      {\n        title: <FormattedMessage id=\"meeting_link\" defaultMessage=\"Meeting Link\" />,\n        dataIndex: 'meeting_link',\n        hideInSearch: true,\n        render: (_, record) =>\n          record.meeting_link ? (\n            <Button target=\"_blank\" type=\"primary\" href={record.meeting_link}>\n              {new URL(record.meeting_link).host}\n            </Button>\n          ) : (\n            <React.Fragment />\n          ),\n      },\n      {\n        title: <FormattedMessage id=\"created_at\" defaultMessage=\"Created at\" />,\n        dataIndex: 'created_at',\n        hideInSearch: true,\n        sorter: true,\n        render: (_, record) =>\n          record.created_at && format(new Date(record.created_at), DATETIME_FORMAT),\n      },\n      {\n        title: <FormattedMessage id=\"status\" defaultMessage=\"Status\" />,\n        dataIndex: 'status',\n        sorter: true,\n        valueType: 'select',\n        valueEnum: {\n          pending: {\n            text: 'pending',\n            status: 'pending',\n          },\n          approved: {\n            text: 'approved',\n            status: 'approved',\n          },\n        },\n        render: (_, record) =>\n          record.status === 'pending' ? (\n            <Button\n              danger\n              size=\"small\"\n              type=\"primary\"\n              onClick={() => {\n                setDisapproveId(record.id);\n              }}\n            >\n              <FormattedMessage id=\"disapprove\" defaultMessage=\"Disapprove\" />\n            </Button>\n          ) : (\n            record.status\n          ),\n      },\n    ],\n    [],\n  );\n\n  return (\n    <PageContainer>\n      <ApproveForm\n        term={approveTerm}\n        onClose={() => setApproveTerm(undefined)}\n        onSuccess={() => actionRef.current?.reload()}\n      />\n      <DisapproveForm\n        id={disapproveId}\n        onClose={() => setDisapproveId(undefined)}\n        onSuccess={() => actionRef.current?.reload()}\n      />\n\n      <ProTable<API.ConsultationAccessEnquiryListItem, API.ConsultationAccessEnquiryListParams>\n        headerTitle={intl.formatMessage({\n          id: 'consultationAccessEnquiries',\n          defaultMessage: 'consultation Access Enquiries',\n        })}\n        search={{\n          layout: 'vertical',\n        }}\n        actionRef={actionRef}\n        rowKey=\"id\"\n        request={async (\n          {\n            pageSize,\n            current,\n            consultation_id,\n            status,\n            user_id,\n            is_coming,\n            proposed_at_from,\n            proposed_at_to,\n          },\n          sort,\n        ) => {\n          const sortArr = sort && Object.entries(sort)[0];\n\n          const response = await consultationAccess({\n            pageSize,\n            current,\n            consultation_id,\n            status,\n            user_id,\n            is_coming,\n            proposed_at_from,\n            proposed_at_to,\n            order_by: sortArr && sortArr[0],\n            order: sortArr ? (sortArr[1] === 'ascend' ? 'ASC' : 'DESC') : undefined,\n          });\n\n          if (!response.success) {\n            return { data: [], total: 0, success: false };\n          }\n\n          return {\n            data: response.data,\n            total: response.meta.total,\n            success: true,\n          };\n        }}\n        columns={columns}\n      />\n    </PageContainer>\n  );\n};\n\nexport default TableList;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Select, Spin } from 'antd';\n\nimport { course as getCourses, getCourse } from '@/services/escola-lms/course';\nimport { webinars as getWebinars, getWebinar } from '@/services/escola-lms/webinars';\nimport {\n  consultations as getConsultations,\n  getConsultation,\n} from '@/services/escola-lms/consultations';\nimport { FormattedMessage } from 'umi';\nimport type { DefaultOptionType, LabeledValue } from 'antd/lib/select';\n\ntype CollectionModelItem = {\n  id: number;\n  name: string;\n};\n\n// this creates a simple state object with typegurad\nconst prepareObj = (arr: (API.Course | API.Webinar | API.Consultation)[]) =>\n  arr.map((item: API.Course | API.Webinar | API.Consultation) => {\n    if ('name' in item) {\n      return {\n        id: Number(item.id),\n        name: item.name,\n      };\n    }\n\n    return {\n      id: Number(item.id),\n      name: item.title ? item.title : '',\n    };\n  });\n\nexport const CollectionSelect: React.FC<{\n  state?: {\n    type: number;\n  };\n  multiple?: boolean;\n  value?: string;\n  onChange?: (\n    value: string | string[] | number | number[] | LabeledValue | LabeledValue[],\n    option: DefaultOptionType | DefaultOptionType[],\n  ) => void;\n  defaultValue?: string | string[] | number | number[] | LabeledValue | LabeledValue[];\n  modelType?: string;\n}> = ({ value, onChange, multiple = false, defaultValue, modelType = 'COURSE' }) => {\n  const [modelCollection, setModelCollection] = useState<CollectionModelItem[]>([]);\n  const [fetching, setFetching] = useState(false);\n\n  const abortController = useRef<AbortController>();\n\n  const modelCollectionMethod = useCallback(\n    (params: Parameters<typeof getCourses>[0]) => {\n      switch (modelType) {\n        case 'COURSE':\n          return getCourses(params, { signal: abortController?.current?.signal });\n        case 'WEBINAR':\n          return getWebinars(params, { signal: abortController?.current?.signal });\n        case 'CONSULTATIONS':\n          return getConsultations(params, { signal: abortController?.current?.signal });\n        default:\n          return getCourses(params, { signal: abortController?.current?.signal });\n      }\n    },\n    [modelType, abortController],\n  );\n  const modelSingleMethod = useCallback(\n    (id: string | number) => {\n      switch (modelType) {\n        case 'COURSE':\n          return getCourse(Number(id), { signal: abortController.current?.signal });\n        case 'WEBINAR':\n          return getWebinar(Number(id), { signal: abortController.current?.signal });\n        case 'CONSULTATIONS':\n          return getConsultation(Number(id), { signal: abortController.current?.signal });\n        default:\n          return getCourse(Number(id), { signal: abortController.current?.signal });\n      }\n    },\n    [modelType, abortController],\n  );\n\n  const fetch = useCallback(\n    (search?: string) => {\n      setFetching(true);\n      if (abortController.current) {\n        abortController.current.abort();\n      }\n\n      abortController.current = new AbortController();\n\n      modelCollectionMethod(search ? { title: search } : {})\n        .then((response) => {\n          if (response.success) {\n            setModelCollection(prepareObj(response.data));\n          }\n          setFetching(false);\n        })\n        .catch(() => setFetching(false));\n    },\n    [modelType],\n  );\n\n  const onSearch = useCallback(\n    (search: string) => {\n      fetch(search);\n    },\n    [fetch],\n  );\n\n  useEffect(() => {\n    abortController.current = new AbortController();\n\n    if (value) {\n      modelSingleMethod(Number(value)).then((response) => {\n        if (response) {\n          if (response.success) {\n            setModelCollection((prevCourses) => [...prevCourses, ...prepareObj([response.data])]);\n          }\n        }\n      });\n    }\n    return () => {\n      if (abortController.current) {\n        abortController.current.abort();\n      }\n    };\n  }, [value, modelType]);\n\n  return (\n    <Select<string | string[] | number | number[] | LabeledValue | LabeledValue[]>\n      defaultValue={defaultValue}\n      onFocus={() => fetch()}\n      allowClear\n      style={{ width: '100%' }}\n      value={value}\n      onChange={onChange}\n      mode={multiple ? 'multiple' : undefined}\n      showSearch\n      onSearch={onSearch}\n      placeholder={<FormattedMessage id=\"select_content\" defaultMessage=\"select_content\" />}\n      optionFilterProp=\"children\"\n      filterOption={(input, option) => {\n        if (option && option.children) {\n          return option?.children?.toString().toLowerCase().indexOf(input.toLowerCase()) >= 0;\n        }\n        return true;\n      }}\n      notFoundContent={fetching ? <Spin size=\"small\" /> : null}\n      optionLabelProp=\"label\"\n    >\n      {modelCollection.map((modelItem: CollectionModelItem) => (\n        <Select.Option key={modelItem.id} value={modelItem.id} label={modelItem.name}>\n          {modelItem.name}\n        </Select.Option>\n      ))}\n    </Select>\n  );\n};\n","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/uuidjs/uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"fieldProps\", \"children\", \"params\", \"proFieldProps\", \"mode\", \"valueEnum\", \"request\", \"showSearch\", \"options\"],\n    _excluded2 = [\"fieldProps\", \"children\", \"params\", \"proFieldProps\", \"mode\", \"valueEnum\", \"request\", \"options\"];\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { runFunction } from '@ant-design/pro-utils';\nimport React, { useContext } from 'react';\nimport FieldContext from '../../FieldContext';\nimport ProFormField from '../Field';\n/**\n * 选择框\n *\n * @param\n */\n\nvar ProFormSelectComponents = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var fieldProps = _ref.fieldProps,\n      children = _ref.children,\n      params = _ref.params,\n      proFieldProps = _ref.proFieldProps,\n      mode = _ref.mode,\n      valueEnum = _ref.valueEnum,\n      request = _ref.request,\n      showSearch = _ref.showSearch,\n      options = _ref.options,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  var context = useContext(FieldContext);\n  return _jsx(ProFormField, _objectSpread(_objectSpread({\n    valueEnum: runFunction(valueEnum),\n    request: request,\n    params: params,\n    valueType: \"select\",\n    filedConfig: {\n      customLightMode: true\n    },\n    fieldProps: _objectSpread({\n      options: options,\n      mode: mode,\n      showSearch: showSearch,\n      getPopupContainer: context.getPopupContainer\n    }, fieldProps),\n    ref: ref,\n    proFieldProps: proFieldProps\n  }, rest), {}, {\n    children: children\n  }));\n});\nvar SearchSelect = /*#__PURE__*/React.forwardRef(function (_ref2, ref) {\n  var fieldProps = _ref2.fieldProps,\n      children = _ref2.children,\n      params = _ref2.params,\n      proFieldProps = _ref2.proFieldProps,\n      mode = _ref2.mode,\n      valueEnum = _ref2.valueEnum,\n      request = _ref2.request,\n      options = _ref2.options,\n      rest = _objectWithoutProperties(_ref2, _excluded2);\n\n  var props = _objectSpread({\n    options: options,\n    mode: mode || 'multiple',\n    labelInValue: true,\n    showSearch: true,\n    showArrow: false,\n    autoClearSearchValue: true,\n    optionLabelProp: 'label'\n  }, fieldProps);\n\n  var context = useContext(FieldContext);\n  return _jsx(ProFormField, _objectSpread(_objectSpread({\n    valueEnum: runFunction(valueEnum),\n    request: request,\n    params: params,\n    valueType: \"select\",\n    filedConfig: {\n      customLightMode: true\n    },\n    fieldProps: _objectSpread({\n      getPopupContainer: context.getPopupContainer\n    }, props),\n    ref: ref,\n    proFieldProps: proFieldProps\n  }, rest), {}, {\n    children: children\n  }));\n});\nvar ProFormSelect = ProFormSelectComponents;\nvar ProFormSearchSelect = SearchSelect;\nvar WrappedProFormSelect = ProFormSelect;\nWrappedProFormSelect.SearchSelect = ProFormSearchSelect; // @ts-ignore\n// eslint-disable-next-line no-param-reassign\n\nWrappedProFormSelect.displayName = 'ProFormComponent';\nexport default WrappedProFormSelect;"],"sourceRoot":""}