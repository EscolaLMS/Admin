(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{"2ult":function(V,E,e){"use strict";var _=e("OaEy"),l=e("2fM7"),f=e("T2oS"),v=e("W9HT"),W=e("oBTY"),A=e("tJVT"),p=e("q1tI"),g=e.n(p),K=e("ri8c"),P=e("9kvl"),M=e("nKUr"),R=e.n(M),O=function(c){var m=c.value,I=c.onChange,x=c.onSelect,y=c.onDeselect,F=c.onClear,a=c.loading,r=c.disabled,s=c.multiple,D=s===void 0?!1:s,t=Object(p.useState)([]),d=Object(A.a)(t,2),G=d[0],Q=d[1],Y=Object(p.useState)(!1),n=Object(A.a)(Y,2),k=n[0],N=n[1],w=Object(p.useRef)(),j=Object(p.useRef)(),S=Object(p.useCallback)(function(o){Q(function(C){return[].concat(Object(W.a)(C),Object(W.a)(o)).filter(function(T,b,z){return z.findIndex(function(X){return X.id===T.id})===b})})},[]);Object(p.useEffect)(function(){w.current=G},[G]);var $=Object(p.useCallback)(function(o){N(!0),j.current&&j.current.abort(),j.current=new AbortController,Object(K.g)({search:o},{signal:j.current.signal}).then(function(C){C.success&&S(C.data),N(!1)}).catch(function(){return N(!1)})},[S]),H=Object(p.useCallback)(function(o){$(o)},[$]);return Object(p.useEffect)(function(){var o=new AbortController;if(m){var C=Array.isArray(m)?m:[m];C.filter(function(T){var b;return!((b=w.current)!==null&&b!==void 0&&b.find(function(z){return z.id===T}))}).forEach(function(T){Object(K.f)(Number(T),{signal:o.signal}).then(function(b){b&&b.success&&S([b.data])})})}return function(){o.abort()}},[m,S]),Object(M.jsx)(l.a,{onSelect:x,onDeselect:y,onClear:F,loading:a,disabled:r,onFocus:function(){return $()},allowClear:!0,style:{width:"100%"},value:m,onChange:I,mode:D?"multiple":void 0,showSearch:!0,onSearch:H,placeholder:Object(M.jsx)(P.a,{id:"select_user_group",defaultMessage:"Select user group"}),optionFilterProp:"children",filterOption:function(C,T){if(T&&T.children){var b;return(T==null||(b=T.children)===null||b===void 0?void 0:b.toString().toLowerCase().indexOf(C.toLowerCase()))>=0}return!0},notFoundContent:k?Object(M.jsx)(v.a,{size:"small"}):null,children:G.map(function(o){return Object(M.jsx)(l.a.Option,{value:o.id,children:o.name_with_breadcrumbs},o.id)})})};E.a=O},"F/zT":function(V,E,e){"use strict";var _=e("VTBJ"),l=e("Ff2n"),f=e("nKUr"),v=e.n(f),W=e("q1tI"),A=e.n(W),p=e("adzw"),g=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],K=A.a.forwardRef(function(P,M){var R=P.fieldProps,O=P.unCheckedChildren,i=P.checkedChildren,c=P.proFieldProps,m=Object(l.a)(P,g);return Object(f.jsx)(p.a,Object(_.a)({valueType:"switch",fieldProps:Object(_.a)({unCheckedChildren:O,checkedChildren:i},R),ref:M,valuePropName:"checked",proFieldProps:c,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},m))});E.a=K},Qurx:function(V,E,e){"use strict";var _=e("VTBJ"),l=e("Ff2n"),f=e("nKUr"),v=e.n(f),W=e("adzw"),A=["fieldProps","proFieldProps"],p=["fieldProps","proFieldProps"],g="text",K=function(O){var i=O.fieldProps,c=O.proFieldProps,m=Object(l.a)(O,A);return Object(f.jsx)(W.a,Object(_.a)({valueType:g,fieldProps:i,filedConfig:{valueType:g},proFieldProps:c},m))},P=function(O){var i=O.fieldProps,c=O.proFieldProps,m=Object(l.a)(O,p);return Object(f.jsx)(W.a,Object(_.a)({valueType:"password",fieldProps:i,proFieldProps:c,filedConfig:{valueType:g}},m))},M=K;M.Password=P,M.displayName="ProFormComponent",E.a=M},UNho:function(V,E,e){"use strict";e.r(E);var _=e("Mwp2"),l=e("VXEj"),f=e("+L6B"),v=e("2/Rp"),W=e("/zsF"),A=e("PArb"),p=e("tU7J"),g=e("wFql"),K=e("T2oS"),P=e("W9HT"),M=e("miYZ"),R=e("tsqr"),O=e("qLMh"),i=e("k1fw"),c=e("9og8"),m=e("tJVT"),I=e("q1tI"),x=e.n(I),y=e("VMEa"),F=e("Qurx"),a=e("F/zT"),r=e("nhC9"),s=e("ri8c"),D=e("tMyG"),t=e("9kvl"),d=e("Ty5D"),G=e("/MfK"),Q=e("0WSk"),Y=e("2ult"),n=e("nKUr"),k=e.n(n);E.default=function(){var N=Object(t.l)(),w=Object(d.l)(),j=w.group,S=j==="new",$=Object(I.useState)(),H=Object(m.a)($,2),o=H[0],C=H[1],T=Object(I.useCallback)(Object(c.a)(Object(O.a)().mark(function U(){var u;return Object(O.a)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,Object(s.f)(Number(j));case 2:u=L.sent,u.success&&C(Object(i.a)({},u.data));case 4:case"end":return L.stop()}},U)})),[j]),b=Object(I.useCallback)(function(U){C(function(u){var h;return Object(i.a)(Object(i.a)({},u),{},{users:u?u==null||(h=u.users)===null||h===void 0?void 0:h.filter(function(L){return L.id!==U}):[]})}),Object(s.d)(Number(j),U).then(function(u){u.success&&C(function(h){return Object(i.a)(Object(i.a)({},h),{},{users:u.data})})})},[j]),z=Object(I.useCallback)(function(U){var u;!U||o!=null&&(u=o.users)!==null&&u!==void 0&&u.find(function(h){return h.id===U})||Object(s.a)(Number(j),U).then(function(h){h.success&&C(function(L){return Object(i.a)(Object(i.a)({},L),{},{users:h.data})})})},[o,j]);Object(I.useEffect)(function(){if(j==="new"){C({});return}T()},[j,T]);var X=Object(I.useMemo)(function(){return{onFinish:function(){var U=Object(c.a)(Object(O.a)().mark(function h(L){var J,Z;return Object(O.a)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(Z=Object(i.a)({},L),j!=="new"){B.next=8;break}return B.next=4,Object(s.b)(Z);case 4:J=B.sent,J.success&&t.f.push("/users/groups/".concat(J.data.id)),B.next=11;break;case 8:return B.next=10,Object(s.e)(Number(j),Z);case 10:J=B.sent;case 11:R.b.success(J.message);case 12:case"end":return B.stop()}},h)}));function u(h){return U.apply(this,arguments)}return u}(),initialValues:o}},[o,j]);return o?Object(n.jsx)(D.a,{title:S?Object(n.jsx)(t.a,{id:"new_user_group"}):Object(n.jsx)(t.a,{id:"edit_user_group"}),children:Object(n.jsx)(r.a,{children:Object(n.jsxs)(y.a,Object(i.a)(Object(i.a)({},X),{},{children:[Object(n.jsxs)(y.a.Group,{children:[Object(n.jsx)(F.a,{width:"md",name:"name",label:Object(n.jsx)(t.a,{id:"name"}),tooltip:Object(n.jsx)(t.a,{id:"name"}),placeholder:N.formatMessage({id:"name"}),required:!0}),Object(n.jsx)(y.a.Item,{style:{minWidth:"300px"},name:"parent_id",label:Object(n.jsx)(t.a,{id:"parent_id_group",defaultMessage:"parent_id_group"}),valuePropName:"value",children:Object(n.jsx)(Y.a,{})}),Object(n.jsx)(a.a,{name:"registerable",label:Object(n.jsx)(t.a,{id:"registerable"})})]}),j!=="new"&&Object(n.jsxs)(x.a.Fragment,{children:[Object(n.jsxs)(y.a.Group,{children:[Object(n.jsx)(g.a,{children:Object(n.jsx)(t.a,{id:"add_person_to_group",defaultMessage:"Add User to group"})}),Object(n.jsx)(Q.a,{onChange:function(u){return z(Number(u))}})]}),Object(n.jsx)(A.a,{}),Object(n.jsx)(l.b,{size:"small",itemLayout:"horizontal",dataSource:o.users,renderItem:function(u){return Object(n.jsxs)(l.b.Item,{actions:[Object(n.jsxs)(v.a,{onClick:function(){return b(u.id)},type:"primary",icon:Object(n.jsx)(G.a,{}),size:"small",danger:!0,children:[" ",Object(n.jsx)(t.a,{id:"delete"})]},"delete")],children:[u.first_name," ",u.last_name," ",Object(n.jsx)("small",{children:u.email})]})}})]}),Object(n.jsx)(A.a,{})]}))})}):Object(n.jsx)(P.a,{})}},ri8c:function(V,E,e){"use strict";e.d(E,"g",function(){return W}),e.d(E,"f",function(){return p}),e.d(E,"e",function(){return K}),e.d(E,"b",function(){return M}),e.d(E,"c",function(){return O}),e.d(E,"a",function(){return c}),e.d(E,"d",function(){return I}),e.d(E,"h",function(){return y});var _=e("qLMh"),l=e("k1fw"),f=e("9og8"),v=e("9kvl");function W(a,r){return A.apply(this,arguments)}function A(){return A=Object(f.a)(Object(_.a)().mark(function a(r,s){return Object(_.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(v.i)("/api/admin/user-groups",Object(l.a)({params:Object(l.a)(Object(l.a)({},r),{},{per_page:r.pageSize,page:r.current,search:r.search?r.search:void 0,parent_id:r.parent_id}),method:"GET",useCache:!1},s||{})));case 1:case"end":return t.stop()}},a)})),A.apply(this,arguments)}function p(a,r){return g.apply(this,arguments)}function g(){return g=Object(f.a)(Object(_.a)().mark(function a(r,s){return Object(_.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(v.i)("/api/admin/user-groups/".concat(r),Object(l.a)({method:"GET",useCache:!1},s||{})));case 1:case"end":return t.stop()}},a)})),g.apply(this,arguments)}function K(a,r,s){return P.apply(this,arguments)}function P(){return P=Object(f.a)(Object(_.a)().mark(function a(r,s,D){return Object(_.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(v.i)("/api/admin/user-groups/".concat(r),Object(l.a)({data:s,method:"PUT"},D||{})));case 1:case"end":return d.stop()}},a)})),P.apply(this,arguments)}function M(a,r){return R.apply(this,arguments)}function R(){return R=Object(f.a)(Object(_.a)().mark(function a(r,s){return Object(_.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(v.i)("/api/admin/user-groups",Object(l.a)({data:r,method:"POST"},s||{})));case 1:case"end":return t.stop()}},a)})),R.apply(this,arguments)}function O(a,r){return i.apply(this,arguments)}function i(){return i=Object(f.a)(Object(_.a)().mark(function a(r,s){return Object(_.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(v.i)("/api/admin/user-groups/".concat(r),Object(l.a)({method:"DELETE"},s||{})));case 1:case"end":return t.stop()}},a)})),i.apply(this,arguments)}function c(a,r,s){return m.apply(this,arguments)}function m(){return m=Object(f.a)(Object(_.a)().mark(function a(r,s,D){return Object(_.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(v.i)("/api/admin/user-groups/".concat(r,"/members"),Object(l.a)({data:{user_id:s},method:"POST"},D||{})));case 1:case"end":return d.stop()}},a)})),m.apply(this,arguments)}function I(a,r,s){return x.apply(this,arguments)}function x(){return x=Object(f.a)(Object(_.a)().mark(function a(r,s,D){return Object(_.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(v.i)("/api/admin/user-groups/".concat(r,"/members/").concat(s),Object(l.a)({method:"DELETE"},D||{})));case 1:case"end":return d.stop()}},a)})),x.apply(this,arguments)}function y(a,r){return F.apply(this,arguments)}function F(){return F=Object(f.a)(Object(_.a)().mark(function a(r,s){return Object(_.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(v.i)("/api/admin/user-groups/tree",Object(l.a)({params:r,method:"GET"},s||{})));case 1:case"end":return t.stop()}},a)})),F.apply(this,arguments)}}}]);
