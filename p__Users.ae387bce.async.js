(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{"DBJ/":function(N,v,e){"use strict";var C=e("k1fw"),T=e("y8nQ"),$=e("Vl3Y"),m=e("etVw"),g=e("9kvl"),R=e("qFDU"),p=e("nKUr"),W=e.n(p);function x(d){var D=d.onChange,F=d.onUpload,y=d.url,E=d.name,A=d.extra,r=d.accept,c=d.data,O=d.wrapInForm,n=O===void 0?!0:O,a=d.title,M=d.formProps,Q=Object(g.i)();return c&&c[E]&&delete c[E],Object(p.jsx)(R.a,{condition:n,wrap:function(U){return Object(p.jsx)($.a,Object(C.a)(Object(C.a)({},M),{},{children:U}))},children:Object(p.jsx)(m.a,{title:a||Object(p.jsx)(g.a,{id:"upload_click_here"}),placeholder:Q.formatMessage({id:"upload_click_here"}),onChange:function(U){D&&D(U),U.file.status==="done"&&F&&F(U.file.response)},label:Object(p.jsx)(g.a,{id:"upload"}),max:2,fieldProps:{data:c,accept:r,name:E,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(y),extra:A})})}v.a=x},"G/Ub":function(N,v,e){"use strict";e.d(v,"d",function(){return R}),e.d(v,"a",function(){return W}),e.d(v,"b",function(){return d}),e.d(v,"c",function(){return F}),e.d(v,"e",function(){return E});var C=e("k1fw"),T=e("9og8"),$=e("WmNS"),m=e.n($),g=e("9kvl");function R(r){return p.apply(this,arguments)}function p(){return p=Object(T.a)(m.a.mark(function r(c){return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(g.f)("/api/admin/roles",Object(C.a)({method:"GET",useCache:!1},c||{})));case 1:case"end":return n.stop()}},r)})),p.apply(this,arguments)}function W(r,c){return x.apply(this,arguments)}function x(){return x=Object(T.a)(m.a.mark(function r(c,O){return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(g.f)("/api/admin/roles",Object(C.a)({method:"POST",headers:{"Content-Type":"application/json"},data:c},O||{})));case 1:case"end":return a.stop()}},r)})),x.apply(this,arguments)}function d(r,c){return D.apply(this,arguments)}function D(){return D=Object(T.a)(m.a.mark(function r(c,O){return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(g.f)("/api/admin/roles/".concat(c),Object(C.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},O||{})));case 1:case"end":return a.stop()}},r)})),D.apply(this,arguments)}function F(r,c){return y.apply(this,arguments)}function y(){return y=Object(T.a)(m.a.mark(function r(c,O){return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(g.f)("/api/admin/roles/".concat(c),Object(C.a)({method:"GET",useCache:!1},O||{})));case 1:case"end":return a.stop()}},r)})),y.apply(this,arguments)}function E(r,c,O){return A.apply(this,arguments)}function A(){return A=Object(T.a)(m.a.mark(function r(c,O,n){return m.a.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",Object(g.f)("/api/admin/roles/".concat(c),Object(C.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:O},n||{})));case 1:case"end":return M.stop()}},r)})),A.apply(this,arguments)}},n6PA:function(N,v,e){},u7Dd:function(N,v,e){"use strict";e.r(v),e.d(v,"TableColumns",function(){return te});var C=e("P2fV"),T=e("NJEC"),$=e("5Dmo"),m=e("3S7+"),g=e("+L6B"),R=e("2/Rp"),p=e("miYZ"),W=e("tsqr"),x=e("tJVT"),d=e("k1fw"),D=e("PpiC"),F=e("+BJd"),y=e("mr32"),E=e("9og8"),A=e("WmNS"),r=e.n(A),c=e("4KAj"),O=e("xvlK"),n=e("q1tI"),a=e("9kvl"),M=e("55Ip"),Q=e("tMyG"),Y=e("Qiat"),U=e("sWYD"),_=e("VK58");function ae(b,i){return H.apply(this,arguments)}function H(){return H=Object(E.a)(r.a.mark(function b(i,s){return r.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(a.f)("/api/admin/csv/users",Object(d.a)({params:Object(d.a)(Object(d.a)({},i),{},{per_page:i&&i.pageSize,page:i&&i.current}),method:"GET",headers:{accept:"application/csv"},useCache:!1},s||{})));case 1:case"end":return j.stop()}},b)})),H.apply(this,arguments)}var re=e("G3dp"),ne=e("/MfK"),se=e("mGZj"),le=e("DBJ/"),me=e("OaEy"),ee=e("2fM7"),fe=e("T2oS"),ie=e("W9HT"),ce=e("G/Ub"),t=e("nKUr"),ue=function(i){var s=i.value,S=i.onChange,j=i.multiple,B=j===void 0?!1:j,X=Object(n.useState)(),w=Object(x.a)(X,2),K=w[0],k=w[1],z=Object(n.useState)(!1),J=Object(x.a)(z,2),L=J[0],o=J[1],u=Object(n.useRef)(),f=Object(n.useRef)(),I=Object(n.useCallback)(function(h){k(h)},[]);Object(n.useEffect)(function(){u.current=K},[K]);var l=Object(n.useCallback)(function(h){o(!0),f.current&&f.current.abort(),f.current=new AbortController,Object(ce.d)({search:h}).then(function(V){V.success&&I(V.data),o(!1)}).catch(function(){return o(!1)})},[I]),P=Object(n.useCallback)(function(h){l(h)},[l]);return Object(t.jsx)(ee.a,{onFocus:function(){return l()},allowClear:!0,style:{width:"100%"},value:s,onChange:S,mode:B?"multiple":void 0,showSearch:!0,onSearch:P,placeholder:Object(t.jsx)(a.a,{id:"select_user_role",defaultMessage:"Select role"}),optionFilterProp:"children",filterOption:function(V,G){if(G&&G.children){var q;return(G==null||(q=G.children)===null||q===void 0?void 0:q.toString().toLowerCase().indexOf(V.toLowerCase()))>=0}return!0},notFoundContent:L?Object(t.jsx)(ie.a,{size:"small"}):null,children:K&&K.map(function(h){return Object(t.jsx)(ee.a.Option,{value:h.name,children:h.name},h.id)})})},oe=ue,Z=e("nhC9"),he=e("n6PA"),de=function(){var b=Object(E.a)(r.a.mark(function i(s){return r.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,Object(_.b)(s);case 2:return j.abrupt("return",!0);case 3:case"end":return j.stop()}},i)}));return function(s){return b.apply(this,arguments)}}(),te=[{title:Object(t.jsx)(a.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"created_at",defaultMessage:"created_at"}),dataIndex:"created_at",hideInSearch:!0,render:function(i,s){return s.created_at&&Object(U.a)(new Date(s.created_at),se.a)}},{title:Object(t.jsx)(a.a,{id:"first_name",defaultMessage:"first_name"}),dataIndex:"first_name",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"last_name",defaultMessage:"last_name"}),dataIndex:"last_name",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"email",defaultMessage:"email"}),dataIndex:"email",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"search",defaultMessage:"search"}),dataIndex:"search",hideInSearch:!1,hideInTable:!0,hideInDescriptions:!0,tooltip:Object(t.jsx)(a.a,{id:"search_tooltip_1"})},{title:Object(t.jsx)(a.a,{id:"is_active"}),dataIndex:"is_active",hideInSearch:!0,render:function(i,s){return[Object(t.jsx)(y.a,{color:s.is_active?"green":"red",children:s.is_active?Object(t.jsx)(a.a,{id:"Active"}):Object(t.jsx)(a.a,{id:"Inactive"})})]}},{title:Object(t.jsx)(a.a,{id:"email_verified",defaultMessage:"email_verified"}),dataIndex:"email_verified",hideInSearch:!0,render:function(i,s){return[Object(t.jsx)(y.a,{color:s.email_verified?"green":"red",children:s.email_verified?Object(t.jsx)(a.a,{id:"verified"}):Object(t.jsx)(a.a,{id:"unverified"})})]}},{title:Object(t.jsx)(a.a,{id:"roles",defaultMessage:"roles"}),dataIndex:"roles",hideInSearch:!0,render:function(i,s){return s.roles.map(function(S){return Object(t.jsx)(y.a,{children:S},S)})}},{hideInSearch:!1,title:Object(t.jsx)(a.a,{id:"role",defaultMessage:"role"}),dataIndex:"role",renderFormItem:function(i,s){var S=s.type,j=s.defaultRender,B=Object(D.a)(s,["type","defaultRender"]);return Object(t.jsx)(oe,Object(d.a)({},B))}}],je=function(){var i=Object(n.useRef)(),s=Object(a.i)(),S=Object(n.useState)({}),j=Object(x.a)(S,2),B=j[0],X=j[1],w=Object(n.useState)(!1),K=Object(x.a)(w,2),k=K[0],z=K[1],J=Object(n.useCallback)(Object(E.a)(r.a.mark(function L(){var o,u,f;return r.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return z(!0),l.prev=1,l.next=4,ae(B);case 4:o=l.sent,o&&(u="data:text/csv;charset=utf-8,"+o,f=document.createElement("a"),f.href=u,f.download="users.csv",document.body.appendChild(f),f.click(),document.body.removeChild(f)),l.next=11;break;case 8:l.prev=8,l.t0=l.catch(1),console.error(l.t0);case 11:return l.prev=11,z(!1),l.finish(11);case 14:case"end":return l.stop()}},L,null,[[1,8,11,14]])})),[B]);return Object(t.jsx)(Q.a,{children:Object(t.jsxs)(Z.a,{tabs:{type:"card",activeKey:"list",onChange:function(o){switch(o){case"list":return a.d.push("/users");case"fields":return a.d.push("/users/fields");default:return a.d.push("/users/".concat(o))}}},children:[Object(t.jsx)(Z.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"list"}),children:Object(t.jsx)(Y.a,{headerTitle:s.formatMessage({id:"users",defaultMessage:"users"}),actionRef:i,rowKey:"key",search:{labelWidth:120},toolBarRender:function(){return[Object(t.jsx)(le.a,{title:s.formatMessage({id:"import_users"}),url:"/api/admin/csv/users",name:"file",accept:".csv",data:{return_url:"".concat(window.location.origin,"/#/user/reset-password")},onChange:function(u){u.file.status==="done"&&u.file.response&&u.file.response.success&&W.default.success(u.file.response.message),u.file.response&&u.file.status==="error"&&(W.default.error(u.file.response.message),console.error(u.file.response))}}),Object(t.jsxs)(R.a,{loading:k,type:"primary",onClick:function(){return J()},children:[Object(t.jsx)(c.a,{})," ",Object(t.jsx)(a.a,{id:"export",defaultMessage:"export"})]},"primary"),Object(t.jsx)(M.a,{to:"/users/new",children:Object(t.jsxs)(R.a,{type:"primary",children:[Object(t.jsx)(O.a,{})," ",Object(t.jsx)(a.a,{id:"new",defaultMessage:"new"})]},"primary")})]},request:function(o){var u=o.pageSize,f=o.current,I=o.search,l=o.role;X({pageSize:u,current:f,search:I,role:l});var P=l&&l.toString()==="all"?void 0:l;return Object(_.m)({pageSize:u,current:f,search:I,role:P}).then(function(h){return h.success?{data:h.data,total:h.meta.total,success:!0}:[]})},columns:[].concat(te,[{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption"}),dataIndex:"option",valueType:"option",render:function(o,u){return[Object(t.jsx)(M.a,{to:"/users/".concat(u.id,"/user_info"),children:Object(t.jsx)(m.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(R.a,{type:"primary",icon:Object(t.jsx)(re.a,{})})})},"edit"),Object(t.jsx)(T.a,{title:Object(t.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(E.a)(r.a.mark(function f(){var I;return r.a.wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,de(u.id);case 2:I=P.sent,I&&i.current&&i.current.reload();case 4:case"end":return P.stop()}},f)})),okText:Object(t.jsx)(a.a,{id:"yes"}),cancelText:Object(t.jsx)(a.a,{id:"no"}),children:Object(t.jsx)(m.a,{title:Object(t.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(R.a,{type:"primary",icon:Object(t.jsx)(ne.a,{}),danger:!0})})},"delete")]}}])})},"list"),Object(t.jsx)(Z.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"ModelFields"})},"fields")]})})},Oe=v.default=je}}]);
