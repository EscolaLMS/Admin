(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{"3fxf":function(te,T,e){"use strict";var I=e("DjyN"),B=e("NUBc"),v=e("Mwp2"),f=e("VXEj"),F=e("+L6B"),D=e("2/Rp"),R=e("5NDa"),r=e("5rEg"),V=e("oBTY"),n=e("k1fw"),o=e("tJVT"),E=e("DYRE"),C=e("zeV3"),_=e("tU7J"),b=e("wFql"),d=e("q1tI"),P=e.n(d),j=e("BAh9"),G=e("/MfK"),L=e("mAF4"),k=e("dF/Y"),K=e("9kvl"),ae=e("DBJ/"),S=e("lLVY"),oe=e.n(S),m=e("nKUr"),q=e.n(m),je=function(se){var ee=se.directory,de=se.onUploaded;return Object(m.jsxs)(C.b,{align:"start",children:[Object(m.jsxs)(b.a.Text,{children:[Object(m.jsx)(K.a,{id:"pages.files.filesBrowser"}),Object(m.jsx)(b.a.Text,{code:!0,children:ee})]}),Object(m.jsx)(ae.a,{url:"/api/admin/file/upload",name:"file[]",data:{target:ee},onUpload:function(Oe){Oe.success&&de(ee,Oe.data)}})]})},Pe=function(se){var ee=se.defaultDirectory,de=ee===void 0?"/":ee,J=se.onFile,Oe=se.hideDeleteBtn,me=Oe===void 0?!1:Oe,_e=se.forceLoading,ye=_e===void 0?!1:_e,ie=Object(K.i)(),Ee=Object(d.useState)({loading:!1,name:"",directory:de,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),ve=Object(o.a)(Ee,2),w=ve[0],fe=ve[1],re=Object(d.useRef)(),X=Object(d.useCallback)(function(A){fe(function(O){return Object(n.a)(Object(n.a)({},O),{},{loading:A})})},[]),Y=Object(d.useCallback)(function(A,O){A.success&&fe(function(U){return Object(n.a)(Object(n.a)(Object(n.a)({},U),A.data),{},{data:[{url:O.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(V.a)(A.data.data.map(function(H){return Object(n.a)(Object(n.a)({},H),{},{url:H.mime==="directory"?"".concat(O,"/").concat(H.name):H.url})}))).filter(function(H){return O==="/"||O===de?H.name!=="..":!0}),directory:O,loading:!1})})},[X]),Q=Object(d.useCallback)(function(A){var O,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,H=function(){return re.current&&re.current.abort()};return H(),re.current=new AbortController,X(!0),Object(j.a)({directory:A,page:U},{signal:(O=re.current)===null||O===void 0?void 0:O.signal}).then(function(le){le.success&&Y(le,A)}).catch(function(){return X(!1)}),function(){H()}},[X]);Object(d.useEffect)(function(){return Q(de)},[de,Q]);var be=Object(d.useCallback)(function(A){X(!0),Object(j.c)(A).then(function(){Q(w.directory)}).catch(function(){X(!1)})},[Q,X,w.directory]),pe=Object(d.useCallback)(function(A,O){var U,H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,le=function(){return re.current&&re.current.abort()};return le(),re.current=new AbortController,X(!0),Object(j.b)({directory:A,name:O,page:H},{signal:(U=re.current)===null||U===void 0?void 0:U.signal}).then(function(ue){ue.success&&Y(ue,A)}).catch(function(){return X(!1)}),function(){le()}},[X]);return Object(m.jsxs)("div",{className:"file-browser",children:[Object(m.jsxs)("div",{className:"file-browser__header",children:[Object(m.jsx)(r.a,{placeholder:ie.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(O){return fe(function(U){return Object(n.a)(Object(n.a)({},U),{},{name:O.target.value})})},value:w.name}),Object(m.jsxs)("div",{children:[Object(m.jsx)(D.a,{className:"file-browser__button",onClick:function(){return Q(w.directory)},children:Object(m.jsx)(K.a,{id:"reset"})}),Object(m.jsx)(D.a,{className:"file-browser__button",type:"primary",onClick:function(){return pe(w.directory,w.name)},children:Object(m.jsx)(K.a,{id:"query"})})]})]}),Object(m.jsx)(f.b,{loading:w.loading||ye,size:"small",itemLayout:"horizontal",dataSource:w.data,header:Object(m.jsx)(je,{directory:w.directory,onUploaded:function(O,U){U&&(Q(O),J&&J(U,O))}}),footer:Object(m.jsx)(je,{directory:w.directory,onUploaded:function(O,U){Q(O),U&&J&&J(U,O)}}),renderItem:function(O){return Object(m.jsx)(f.b.Item,{actions:O.mime!=="directory"&&!me?[Object(m.jsx)(D.a,{type:"default",danger:!0,icon:Object(m.jsx)(G.a,{}),size:"small",onClick:function(){return be(O.url)}},"dir")]:[],children:Object(m.jsx)(f.b.Item.Meta,{avatar:O.mime==="directory"?Object(m.jsx)(D.a,{type:"primary",icon:Object(m.jsx)(L.a,{}),size:"small",onClick:function(){return Q(O.url)}}):Object(m.jsx)("a",{href:O.url,target:"_blank",rel:"noreferrer",children:Object(m.jsx)(D.a,{type:"default",icon:Object(m.jsx)(k.a,{}),size:"small"})}),description:Object(m.jsx)(P.a.Fragment,{children:Object(m.jsx)(D.a,{type:"text",size:"small",onClick:function(){return O.mime==="directory"?Q(O.url):J&&J(O,w.directory)},children:O.name})})})})}}),Object(m.jsx)(B.a,{pageSizeOptions:[],current:w.current_page,total:w.total,pageSize:w.per_page,onChange:function(O){return Q(w.directory,O)}})]})};T.a=Pe},"5qq5":function(te,T,e){"use strict";var I=e("7Kak"),B=e("9yH6"),v=e("VTBJ"),f=e("Ff2n"),F=e("nKUr"),D=e.n(F),R=e("uX+g"),r=e("q1tI"),V=e.n(r),n=e("WFLz"),o=e("adzw"),E=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],C=V.a.forwardRef(function(P,j){var G=P.fieldProps,L=P.options,k=P.radioType,K=P.layout,ae=P.proFieldProps,S=P.valueEnum,oe=Object(f.a)(P,E);return Object(F.jsx)(o.a,Object(v.a)(Object(v.a)({mode:"edit",valueType:k==="button"?"radioButton":"radio",ref:j,valueEnum:Object(R.a)(S,void 0)},oe),{},{fieldProps:Object(v.a)({options:L,layout:K},G),proFieldProps:ae,filedConfig:{customLightMode:!0}}))}),_=V.a.forwardRef(function(P,j){var G=P.fieldProps,L=P.children;return Object(F.jsx)(B.a,Object(v.a)(Object(v.a)({},G),{},{ref:j,children:L}))}),b=Object(n.a)(_,{valuePropName:"checked",ignoreWidth:!0}),d=b;d.Group=C,d.Button=B.a.Button,d.displayName="ProFormComponent",T.a=d},BAh9:function(te,T,e){"use strict";e.d(T,"a",function(){return F}),e.d(T,"b",function(){return R}),e.d(T,"e",function(){return V}),e.d(T,"d",function(){return o}),e.d(T,"c",function(){return E});var I=e("qLMh"),B=e("k1fw"),v=e("9og8"),f=e("9kvl");function F(_,b){return D.apply(this,arguments)}function D(){return D=Object(v.a)(Object(I.a)().mark(function _(b,d){return Object(I.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(f.f)("/api/admin/file/list",Object(B.a)({method:"GET",params:b},d||{})));case 1:case"end":return j.stop()}},_)})),D.apply(this,arguments)}function R(_,b){return r.apply(this,arguments)}function r(){return r=Object(v.a)(Object(I.a)().mark(function _(b,d){return Object(I.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(f.f)("/api/admin/file/find",Object(B.a)({method:"GET",params:b},d||{})));case 1:case"end":return j.stop()}},_)})),r.apply(this,arguments)}function V(_,b,d){return n.apply(this,arguments)}function n(){return n=Object(v.a)(Object(I.a)().mark(function _(b,d,P){var j;return Object(I.a)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return j=new FormData,j.append("file[]",b),j.append("target",d),L.abrupt("return",Object(f.f)("/api/admin/file/upload",Object(B.a)({method:"POST",data:j},P||{})));case 4:case"end":return L.stop()}},_)})),n.apply(this,arguments)}var o=function(b){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/images/img?path=").concat(b,"&w=").concat(d)};function E(_,b){return C.apply(this,arguments)}function C(){return C=Object(v.a)(Object(I.a)().mark(function _(b,d){return Object(I.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(f.f)("/api/admin/file/delete",Object(B.a)({method:"DELETE",data:{url:b}},d||{})));case 1:case"end":return j.stop()}},_)})),C.apply(this,arguments)}},BiO0:function(te,T,e){"use strict";var I=e("VTBJ"),B=e("Ff2n"),v=e("nKUr"),f=e.n(v),F=e("q1tI"),D=e.n(F),R=e("adzw"),r=["fieldProps","proFieldProps"],V=function(o,E){var C=o.fieldProps,_=o.proFieldProps,b=Object(B.a)(o,r);return Object(v.jsx)(R.a,Object(I.a)({ref:E,mode:"edit",valueType:"textarea",fieldProps:C,proFieldProps:_},b))};T.a=D.a.forwardRef(V)},"DBJ/":function(te,T,e){"use strict";var I=e("k1fw"),B=e("y8nQ"),v=e("Vl3Y"),f=e("etVw"),F=e("9kvl"),D=e("qFDU"),R=e("nKUr"),r=e.n(R);function V(n){var o=n.onChange,E=n.onUpload,C=n.url,_=n.name,b=n.extra,d=n.accept,P=n.data,j=n.wrapInForm,G=j===void 0?!0:j,L=n.title,k=n.formProps,K=Object(F.i)();return P&&P[_]&&delete P[_],Object(R.jsx)(D.a,{condition:G,wrap:function(S){return Object(R.jsx)(v.a,Object(I.a)(Object(I.a)({},k),{},{children:S}))},children:Object(R.jsx)(f.a,{title:L||" ".concat(K.formatMessage({id:"upload_click_here"})),placeholder:K.formatMessage({id:"upload_click_here"}),onChange:function(S){o&&o(S),S.file.status==="done"&&E&&E(S.file.response)},label:Object(R.jsx)(F.a,{id:"upload"}),max:2,fieldProps:{data:P,accept:d,name:_,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(C),extra:b})})}T.a=V},Qurx:function(te,T,e){"use strict";var I=e("VTBJ"),B=e("Ff2n"),v=e("nKUr"),f=e.n(v),F=e("adzw"),D=["fieldProps","proFieldProps"],R=["fieldProps","proFieldProps"],r="text",V=function(C){var _=C.fieldProps,b=C.proFieldProps,d=Object(B.a)(C,D);return Object(v.jsx)(F.a,Object(I.a)({mode:"edit",valueType:r,fieldProps:_,filedConfig:{valueType:r},proFieldProps:b},d))},n=function(C){var _=C.fieldProps,b=C.proFieldProps,d=Object(B.a)(C,R);return Object(v.jsx)(F.a,Object(I.a)({mode:"edit",valueType:"password",fieldProps:_,proFieldProps:b,filedConfig:{valueType:r}},d))},o=V;o.Password=n,o.displayName="ProFormComponent",T.a=o},YjuE:function(te,T,e){"use strict";e.r(T);var I=e("T2oS"),B=e("W9HT"),v=e("tJVT"),f=e("q1tI"),F=e.n(f),D=e("nhC9"),R=e("Ty5D"),r=e("9kvl"),V=e("tMyG"),n=e("qLMh"),o=e("k1fw"),E=e("9og8");function C(u,a){return _.apply(this,arguments)}function _(){return _=Object(E.a)(Object(n.a)().mark(function u(a,s){return Object(n.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(r.f)("/api/admin/settings",Object(o.a)({method:"GET",useCache:!1,params:Object(o.a)(Object(o.a)({},a),{},{per_page:a.pageSize,page:a.current})},s||{})));case 1:case"end":return i.stop()}},u)})),_.apply(this,arguments)}function b(u,a){return d.apply(this,arguments)}function d(){return d=Object(E.a)(Object(n.a)().mark(function u(a,s){return Object(n.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(r.f)("/api/admin/settings/".concat(a),Object(o.a)({method:"GET",useCache:!1},s||{})));case 1:case"end":return i.stop()}},u)})),d.apply(this,arguments)}function P(u,a){return j.apply(this,arguments)}function j(){return j=Object(E.a)(Object(n.a)().mark(function u(a,s){return Object(n.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(r.f)("/api/admin/settings",Object(o.a)({method:"POST",headers:{"Content-Type":"application/json"},data:a},s||{})));case 1:case"end":return i.stop()}},u)})),j.apply(this,arguments)}function G(u,a,s){return L.apply(this,arguments)}function L(){return L=Object(E.a)(Object(n.a)().mark(function u(a,s,l){return Object(n.a)().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.abrupt("return",Object(r.f)("/api/admin/settings/".concat(a),Object(o.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:s},l||{})));case 1:case"end":return M.stop()}},u)})),L.apply(this,arguments)}function k(u,a){return K.apply(this,arguments)}function K(){return K=Object(E.a)(Object(n.a)().mark(function u(a,s){return Object(n.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(r.f)("/api/admin/settings/".concat(a),Object(o.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},s||{})));case 1:case"end":return i.stop()}},u)})),K.apply(this,arguments)}function ae(u){return S.apply(this,arguments)}function S(){return S=Object(E.a)(Object(n.a)().mark(function u(a){return Object(n.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(r.f)("/api/admin/settings/groups",Object(o.a)({method:"GET",useCache:!1},a||{})));case 1:case"end":return l.stop()}},u)})),S.apply(this,arguments)}function oe(u){return m.apply(this,arguments)}function m(){return m=Object(E.a)(Object(n.a)().mark(function u(a){return Object(n.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(r.f)("/api/admin/config",Object(o.a)({method:"GET",useCache:!1},a||{})));case 1:case"end":return l.stop()}},u)})),m.apply(this,arguments)}function q(u,a){return je.apply(this,arguments)}function je(){return je=Object(E.a)(Object(n.a)().mark(function u(a,s){var l,i;return Object(n.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l=a.key,i=a.value,c.abrupt("return",Object(r.f)("/api/admin/config",Object(o.a)({method:"POST",data:{config:[{key:l,value:i}]}},s||{})));case 2:case"end":return c.stop()}},u)})),je.apply(this,arguments)}var Pe=e("P2fV"),ge=e("NJEC"),se=e("5Dmo"),ee=e("3S7+"),de=e("+L6B"),J=e("2/Rp"),Oe=e("+BJd"),me=e("mr32"),_e=e("jrin"),ye=e("miYZ"),ie=e("tsqr"),Ee=e("xvlK"),ve=e("Qiat"),w=e("y8nQ"),fe=e("Vl3Y"),re=e("5NDa"),X=e("5rEg"),Y=e("VMEa"),Q=e("rmhi"),be=e("Qurx"),pe=e("F/zT"),A=e("5qq5"),O=e("BiO0"),U=e("hd5d"),H=e("3fxf"),le=e("ovOe"),ue=e.n(le),t=e("nKUr"),xe=function(a){var s=a.value,l=a.onChange,i=a.type,M=i===void 0?"file":i,c=Object(f.useState)(!1),x=Object(v.a)(c,2),N=x[0],p=x[1];return Object(t.jsxs)(F.a.Fragment,{children:[Object(t.jsxs)(Y.a.Group,{children:[Object(t.jsx)(X.a,{value:s,readOnly:!0}),Object(t.jsxs)(J.a,{size:"small",type:"primary",onClick:function(){return p(!N)},children:["toggle ",M," browser"]})]}),N&&Object(t.jsx)(H.a,{onFile:function($,y){return l&&l("".concat(y,"/").concat($.name))}})]})},De=function(a){var s=Object(r.i)(),l=a.visible,i=a.onVisibleChange,M=a.onFinish,c=a.id,x=fe.a.useForm(),N=Object(v.a)(x,1),p=N[0],W=!c||c===-1,$=Object(f.useState)("text"),y=Object(v.a)($,2),h=y[0],g=y[1];Object(f.useEffect)(function(){c&&c!==-1?b(c).then(function(z){z.success&&(p.setFieldsValue(z.data),g(z.data.type))}):(p.resetFields(),g("text"))},[c,p]);var ne=Object(f.useCallback)(function(z){z.type&&z.type!==h&&g(z.type)},[h]);return Object(t.jsxs)(Q.a,{form:p,title:s.formatMessage({id:c?"editSetting":"newSetting",defaultMessage:c?"editSetting":"newSetting"}),width:"60vw",visible:l,onVisibleChange:i,onFinish:M,onValuesChange:ne,children:[Object(t.jsxs)(Y.a.Group,{children:[Object(t.jsx)(be.a,{label:Object(t.jsx)(r.a,{id:"group",defaultMessage:"group"}),rules:[{required:!0}],width:"md",name:"group"})," ",Object(t.jsx)(be.a,{label:Object(t.jsx)(r.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"})]}),Object(t.jsxs)(Y.a.Group,{children:[Object(t.jsx)(pe.a,{name:"enumerable",label:Object(t.jsx)(r.a,{id:"enumerable",defaultMessage:"enumerable"})}),Object(t.jsx)(pe.a,{name:"public",label:Object(t.jsx)(r.a,{id:"public",defaultMessage:"public"})})]}),Object(t.jsx)(Y.a.Group,{children:Object(t.jsx)(A.a.Group,{disabled:!W,name:"type",label:Object(t.jsx)(r.a,{id:"type"}),options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"},{label:"json",value:"json"},{label:"file",value:"file"},{label:"image",value:"image"}]})}),Object(t.jsxs)("div",{children:[h==="text"&&Object(t.jsx)(be.a,{width:"lg",name:"value",label:Object(t.jsx)(r.a,{id:"value"})}),h==="json"&&Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(O.a,{width:"lg",name:"value",label:Object(t.jsx)(r.a,{id:"value"}),tooltip:"".concat(s.formatMessage({id:"example_json"}),': {"name":"John", "age":30, "city":["New York","Warsaw"]}')}),Object(t.jsx)(Y.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(ue.a,{src:JSON.parse(p.getFieldValue("value"))})}catch(Z){return Object(t.jsx)(ue.a,{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]}),(h==="file"||h==="image")&&Object(t.jsx)(Y.a.Item,{name:"value",label:"value",tooltip:"select file from current repository or upload new one",valuePropName:"value",children:Object(t.jsx)(xe,{type:h})}),h==="markdown"&&Object(t.jsx)(Y.a.Item,{name:"value",label:"value",tooltip:"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.",valuePropName:"value",children:Object(t.jsx)(U.a,{directory:"settings/wysiwyg"})})]})]})},Ce=De,Me=e("G3dp"),Te=e("/MfK"),Ie=function(){var u=Object(E.a)(Object(n.a)().mark(function a(s,l,i){var M;return Object(n.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return M=ie.b.loading(s.formatMessage({id:"loading"})),x.prev=1,x.next=4,i&&i!==-1?G(i,Object(o.a)({},l)):P(Object(o.a)({},l));case 4:return M(),ie.b.success(s.formatMessage({id:"success"})),x.abrupt("return",!0);case 9:return x.prev=9,x.t0=x.catch(1),M(),ie.b.error(s.formatMessage({id:"error"})),x.abrupt("return",!1);case 14:case"end":return x.stop()}},a,null,[[1,9]])}));return function(s,l,i){return u.apply(this,arguments)}}(),Ae=function(){var u=Object(E.a)(Object(n.a)().mark(function a(s,l){var i;return Object(n.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return i=ie.b.loading(s.formatMessage({id:"loading"})),c.prev=1,c.next=4,k(l);case 4:return i(),ie.b.success(s.formatMessage({id:"success"})),c.abrupt("return",!0);case 9:return c.prev=9,c.t0=c.catch(1),i(),ie.b.error(s.formatMessage({id:"error"})),c.abrupt("return",!1);case 14:case"end":return c.stop()}},a,null,[[1,9]])}));return function(s,l){return u.apply(this,arguments)}}(),Fe=function(){var a=Object(f.useState)(!1),s=Object(v.a)(a,2),l=s[0],i=s[1],M=Object(f.useState)([]),c=Object(v.a)(M,2),x=c[0],N=c[1],p=Object(f.useRef)(),W=Object(r.i)();Object(f.useEffect)(function(){ae().then(function(y){y.success&&N(y.data)})},[]);var $=[{title:Object(t.jsx)(r.a,{id:"group",defaultMessage:"group"}),dataIndex:"group",hideInSearch:!1,key:"group",valueType:"select",width:100,valueEnum:x.sort().reduce(function(y,h){return Object(o.a)(Object(o.a)({},y),{},Object(_e.a)({},h,h))},{})},{title:Object(t.jsx)(r.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(r.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(t.jsx)(r.a,{id:"enumerable",defaultMessage:"enumerable"}),dataIndex:"enumerable",hideInForm:!0,hideInSearch:!0,render:function(h,g){return Object(t.jsx)(me.a,{color:g.enumerable?"success":"error",children:Object(t.jsx)(r.a,{id:g.enumerable?"true":"false",defaultMessage:g.enumerable?"true":"false"})})}},{title:Object(t.jsx)(r.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(h,g){return Object(t.jsx)(me.a,{color:g.public?"success":"error",children:Object(t.jsx)(r.a,{id:g.public?"true":"false",defaultMessage:g.public?"true":"false"})})}},{hideInSearch:!0,title:Object(t.jsx)(r.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(h,g){return[Object(t.jsx)(ee.a,{title:Object(t.jsx)(r.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(J.a,{type:"primary",icon:Object(t.jsx)(Me.a,{}),onClick:function(){return i(g.id)}})},"edit"),Object(t.jsx)(ge.a,{title:Object(t.jsx)(r.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(E.a)(Object(n.a)().mark(function ne(){var z;return Object(n.a)().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=2,Ae(W,g.id);case 2:z=he.sent,z&&(i(!1),p.current&&p.current.reload());case 4:case"end":return he.stop()}},ne)})),okText:Object(t.jsx)(r.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(r.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(ee.a,{title:Object(t.jsx)(r.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(J.a,{type:"primary",icon:Object(t.jsx)(Te.a,{}),danger:!0})})},"delete")]}}];return Object(t.jsxs)(F.a.Fragment,{children:[Object(t.jsx)(ve.a,{headerTitle:W.formatMessage({id:"menu.settings"}),actionRef:p,rowKey:"id",search:{},toolBarRender:function(){return[Object(t.jsxs)(J.a,{type:"primary",onClick:function(){i(-1)},children:[Object(t.jsx)(Ee.a,{})," ",Object(t.jsx)(r.a,{id:"pages.searchTable.new"})]},"primary")]},request:function(h){var g=h.pageSize,ne=h.current,z=h.group;return C({pageSize:g,current:ne,group:z}).then(function(Z){return Z.success?{data:Z.data,total:Z.meta.total,success:!0}:[]})},columns:$}),Object(t.jsx)(Ce,{groups:x,id:l,visible:Number.isInteger(l),onVisibleChange:function(h){return h===!1&&i(!1)},onFinish:function(){var y=Object(E.a)(Object(n.a)().mark(function h(g){var ne;return Object(n.a)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,Ie(W,g,Number(l));case 2:ne=Z.sent,ne&&(i(!1),p.current&&p.current.reload());case 4:case"end":return Z.stop()}},h)}));return function(h){return y.apply(this,arguments)}}()})]})},Ue=Fe,Je=e("tU7J"),Be=e("wFql"),Re=e("Fghh"),Le=Be.a.Text,ce;(function(u){u.Array="array",u.String="string"})(ce||(ce={}));var Se=function(a,s){return s===ce.Array?a&&Array.isArray(a)?JSON.stringify(a):"[]":a},Ke=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",s=arguments.length>1?arguments[1]:void 0;if(s===ce.Array){var l=JSON.parse(a);return l&&Array.isArray(l)?l:[]}return a},We=function(a){var s=Object(Re.j)(),l=a.visible,i=a.onVisibleChange,M=a.onFinish,c=a.value,x=fe.a.useForm(),N=Object(v.a)(x,1),p=N[0],W=Object(f.useMemo)(function(){return(c.rules||[]).includes(ce.Array)?ce.Array:ce.String},[c.rules]);return Object(f.useEffect)(function(){p.setFieldsValue(Object(o.a)(Object(o.a)({},c),{},{value:Se(c.value,W)}))},[W,c,p]),Object(t.jsxs)(Q.a,{form:p,title:c.full_key,width:"60vw",visible:l,onVisibleChange:i,onFinish:Object(E.a)(Object(n.a)().mark(function $(){var y;return Object(n.a)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,q({key:c.full_key,value:Ke(p.getFieldsValue().value,W)});case 2:if(y=g.sent,!y.success){g.next=6;break}return M(y.success===!0),g.abrupt("return",y.success);case 6:return g.abrupt("return");case 7:case"end":return g.stop()}},$)})),children:[Object(t.jsxs)(Y.a.Group,{children:[Object(t.jsx)(pe.a,{disabled:!0,name:"public",label:Object(t.jsx)(r.a,{id:"public",defaultMessage:"public"})}),Object(t.jsx)(pe.a,{disabled:!0,name:"readonly",label:Object(t.jsx)(r.a,{id:"readonly",defaultMessage:"readonly"})}),Object(t.jsx)(Y.a.Item,{shouldUpdate:!0,label:Object(t.jsx)(r.a,{id:"rules",defaultMessage:"rules"}),children:function(){return Object(t.jsx)(Le,{code:!0,children:JSON.stringify(p.getFieldValue("rules"))})}})]}),W===ce.Array?Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(O.a,{width:"lg",name:"value",label:Object(t.jsx)(r.a,{id:"value"}),tooltip:"".concat(s.formatMessage({id:"example_json"}),': ["first_field_name", "second_field_name"]')}),Object(t.jsx)(Y.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(ue.a,{src:JSON.parse(p.getFieldValue("value"))})}catch(y){return Object(t.jsx)(ue.a,{src:JSON.parse('{ "error": "cannot parse this array" }')})}}})]}):Object(t.jsx)(be.a,{width:"lg",name:"value",label:Object(t.jsx)(r.a,{id:"value"})})]})},we=We,Ve=[{title:Object(t.jsx)(r.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(r.a,{id:"readonly",defaultMessage:"readonly"}),dataIndex:"readonly",hideInForm:!0,hideInSearch:!0,render:function(a,s){return Object(t.jsx)(me.a,{color:s.readonly?"success":"error",children:Object(t.jsx)(r.a,{id:s.readonly?"true":"false",defaultMessage:s.readonly?"true":"false"})})}},{title:Object(t.jsx)(r.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(a,s){return Object(t.jsx)(me.a,{color:s.public?"success":"error",children:Object(t.jsx)(r.a,{id:s.public?"true":"false",defaultMessage:s.public?"true":"false"})})}},{title:Object(t.jsx)(r.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0}],Ne=function u(a,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return!a||typeof a!="object"?!1:(Object.keys(a).forEach(function(i){var M=a[i];i===s?l.push(a):typeof M=="object"&&u(M,s,l)}),l)},$e=function(a){var s=a.packageName,l=a.values,i=a.onValueUpdated,M=Object(r.i)(),c=Object(f.useState)(),x=Object(v.a)(c,2),N=x[0],p=x[1],W=Object(f.useMemo)(function(){var $=l[s];return Ne($,"rules")},[l,s]);return Object(t.jsxs)(F.a.Fragment,{children:[Object(t.jsx)(ve.a,{headerTitle:M.formatMessage({id:"menu.settings"}),rowKey:"key",search:{},dataSource:W,columns:[].concat(Ve,[{hideInSearch:!0,title:Object(t.jsx)(r.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(y,h){return[Object(t.jsx)(ee.a,{title:Object(t.jsx)(r.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(J.a,{type:"primary",icon:Object(t.jsx)(Me.a,{}),onClick:function(){return p(h)}})},"edit")]}}])}),N&&Object(t.jsx)(we,{value:N,visible:N!==void 0,onVisibleChange:function(y){return y===!1&&p(void 0)},onFinish:Object(E.a)(Object(n.a)().mark(function $(){return Object(n.a)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:i();case 1:case"end":return h.stop()}},$)}))})]})},ze=$e,Ge=function(a){return a.replaceAll("escolalms","").split("_").join("")},Ye=T.default=function(){var u=Object(R.l)(),a=Object(r.i)(),s=u.tab,l=s===void 0?"user_settings":s,i=Object(f.useState)(),M=Object(v.a)(i,2),c=M[0],x=M[1],N=Object(f.useCallback)(function(){oe().then(function(p){p.success&&x(p.data)})},[]);return Object(f.useEffect)(function(){N()},[]),c?Object(t.jsx)(V.a,{title:Object(t.jsx)(r.a,{id:"settings"}),header:{breadcrumb:{routes:[{path:"settings",breadcrumbName:a.formatMessage({id:"menu.Configuration.settings"})},{path:String(l),breadcrumbName:String(l)}]}},children:Object(t.jsxs)(D.a,{tabs:{type:"card",activeKey:l,onChange:function(W){return r.d.push("/configuration/settings/".concat(W))}},children:[Object(t.jsx)(D.a.TabPane,{tab:Object(t.jsx)(r.a,{id:"user.settings"}),children:Object(t.jsx)(Ue,{})},"user_settings"),Object.keys(c).map(function(p){return Object(t.jsxs)(D.a.TabPane,{tab:Object(t.jsxs)("span",{children:[Object(t.jsx)(r.a,{id:"package"})," ",Ge(p)]}),children:[Object(t.jsx)(ze,{values:c,packageName:p,onValueUpdated:function(){return N()}}),p]},p)})]})}):Object(t.jsx)(B.a,{})}},hd5d:function(te,T,e){"use strict";var I=e("qLMh"),B=e("9og8"),v=e("q1tI"),f=e.n(v),F=e("3Ef1"),D=e.n(F),R=e("BAh9"),r=e("vtG9"),V=e.n(r),n=e("9kvl"),o=e("nKUr"),E=e.n(o),C=function(b){var d=b.value,P=b.onChange,j=b.directory,G=j===void 0?"/wysiwyg":j,L=Object(n.i)();return Object(o.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(o.jsx)(D.a,{uploadImage:function(){var k=Object(B.a)(Object(I.a)().mark(function K(ae){var S,oe;return Object(I.a)().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,Object(R.e)(ae,G);case 2:if(S=q.sent,!S.success){q.next=6;break}return oe=S.data[0].name.includes("/")?S.data[0].name:"".concat(G).concat(S.data[0].name),q.abrupt("return",Object(R.d)(oe,1e3));case 6:throw new Error("Error while uploading");case 7:case"end":return q.stop()}},K)}));return function(K){return k.apply(this,arguments)}}(),defaultValue:d||"",onChange:function(K){return P&&P(K())},placeholder:L.formatMessage({id:"wysiwyg_placeholder"})})})};T.a=C},lLVY:function(te,T,e){},vtG9:function(te,T,e){}}]);
