(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{"3fxf":function(oe,S,e){"use strict";var ee=e("DjyN"),w=e("NUBc"),U=e("Mwp2"),j=e("VXEj"),$=e("+L6B"),C=e("2/Rp"),Q=e("5NDa"),n=e("5rEg"),H=e("oBTY"),f=e("k1fw"),E=e("tJVT"),D=e("DYRE"),o=e("zeV3"),X=e("tU7J"),y=e("wFql"),O=e("q1tI"),x=e.n(O),P=e("BAh9"),b=e("/MfK"),te=e("mAF4"),B=e("dF/Y"),G=e("9kvl"),z=e("DBJ/"),ie=e("lLVY"),Z=e.n(ie),d=e("nKUr"),de=e.n(d),V=function(le){var ue=le.directory,ae=le.onUploaded;return Object(d.jsxs)(o.b,{align:"start",children:[Object(d.jsxs)(y.a.Text,{children:[Object(d.jsx)(G.a,{id:"pages.files.filesBrowser"}),Object(d.jsx)(y.a.Text,{code:!0,children:ue})]}),Object(d.jsx)(z.a,{url:"/api/admin/file/upload",name:"file[]",data:{target:ue},onChange:function(q){return q.file.status==="done"&&ae(ue,q.file)}})]})},je=function(le){var ue=le.defaultDirectory,ae=ue===void 0?"/":ue,re=le.onFile,q=Object(G.i)(),pe=Object(O.useState)({loading:!1,name:"",directory:ae,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),ce=Object(E.a)(pe,2),T=ce[0],be=ce[1],R=Object(O.useRef)(),N=Object(O.useCallback)(function(M){be(function(c){return Object(f.a)(Object(f.a)({},c),{},{loading:M})})},[]),me=Object(O.useCallback)(function(M,c){be(function(I){return Object(f.a)(Object(f.a)(Object(f.a)({},I),M.data),{},{data:[{url:c.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(H.a)(M.data.data.map(function(F){return Object(f.a)(Object(f.a)({},F),{},{url:F.mime==="directory"?"".concat(c,"/").concat(F.name):F.url})}))).filter(function(F){return c==="/"?F.name!=="..":!0}),directory:c,loading:!1})})},[N]),J=Object(O.useCallback)(function(M){var c,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,F=function(){return R.current&&R.current.abort()};return F(),R.current=new AbortController,N(!0),Object(P.a)({directory:M,page:I},{signal:(c=R.current)===null||c===void 0?void 0:c.signal}).then(function(Y){Y.success&&me(Y,M)}).catch(function(){return N(!1)}),function(){F()}},[N]);Object(O.useEffect)(function(){return J(ae)},[ae,J]);var he=Object(O.useCallback)(function(M){N(!0),Object(P.c)(M).then(function(){J(T.directory)}).catch(function(){N(!1)})},[J,N,T.directory]),_e=Object(O.useCallback)(function(M,c){var I,F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,Y=function(){return R.current&&R.current.abort()};return Y(),R.current=new AbortController,N(!0),Object(P.b)({directory:M,name:c,page:F},{signal:(I=R.current)===null||I===void 0?void 0:I.signal}).then(function(fe){fe.success&&me(fe,M)}).catch(function(){return N(!1)}),function(){Y()}},[N]);return Object(d.jsxs)("div",{className:"file-browser",children:[Object(d.jsxs)("div",{className:"file-browser__header",children:[Object(d.jsx)(n.a,{placeholder:q.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(c){return be(function(I){return Object(f.a)(Object(f.a)({},I),{},{name:c.target.value})})},value:T.name}),Object(d.jsxs)("div",{children:[Object(d.jsx)(C.a,{className:"file-browser__button",onClick:function(){return J(T.directory)},children:Object(d.jsx)(G.a,{id:"reset"})}),Object(d.jsx)(C.a,{className:"file-browser__button",type:"primary",onClick:function(){return _e(T.directory,T.name)},children:Object(d.jsx)(G.a,{id:"query"})})]})]}),Object(d.jsx)(j.b,{loading:T.loading,size:"small",itemLayout:"horizontal",dataSource:T.data,header:Object(d.jsx)(V,{directory:T.directory,onUploaded:function(c,I){return J(c)&&re&&re(I,c)}}),footer:Object(d.jsx)(V,{directory:T.directory,onUploaded:function(c){return J(c)&&re&&re(name,c)}}),renderItem:function(c){return Object(d.jsx)(j.b.Item,{actions:c.mime!=="directory"?[Object(d.jsx)(C.a,{type:"default",danger:!0,icon:Object(d.jsx)(b.a,{}),size:"small",onClick:function(){return he(c.url)}})]:[],children:Object(d.jsx)(j.b.Item.Meta,{avatar:c.mime==="directory"?Object(d.jsx)(C.a,{type:"primary",icon:Object(d.jsx)(te.a,{}),size:"small",onClick:function(){return J(c.url)}}):Object(d.jsx)("a",{href:c.url,target:"_blank",rel:"noreferrer",children:Object(d.jsx)(C.a,{type:"default",icon:Object(d.jsx)(B.a,{}),size:"small"})}),description:Object(d.jsx)(x.a.Fragment,{children:Object(d.jsx)(C.a,{type:"text",size:"small",onClick:function(){return c.mime==="directory"?J(c.url):re&&re(c,T.directory)},children:c.name})})})})}}),Object(d.jsx)(w.a,{pageSizeOptions:[],current:T.current_page,total:T.total,pageSize:T.per_page,onChange:function(c){return J(T.directory,c)}})]})};S.a=je},BAh9:function(oe,S,e){"use strict";e.d(S,"a",function(){return C}),e.d(S,"b",function(){return n}),e.d(S,"e",function(){return f}),e.d(S,"d",function(){return D}),e.d(S,"c",function(){return o});var ee=e("k1fw"),w=e("9og8"),U=e("WmNS"),j=e.n(U),$=e("9kvl");function C(y,O){return Q.apply(this,arguments)}function Q(){return Q=Object(w.a)(j.a.mark(function y(O,x){return j.a.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",Object($.f)("/api/admin/file/list",Object(ee.a)({method:"GET",params:O},x||{})));case 1:case"end":return b.stop()}},y)})),Q.apply(this,arguments)}function n(y,O){return H.apply(this,arguments)}function H(){return H=Object(w.a)(j.a.mark(function y(O,x){return j.a.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",Object($.f)("/api/admin/file/find",Object(ee.a)({method:"GET",params:O},x||{})));case 1:case"end":return b.stop()}},y)})),H.apply(this,arguments)}function f(y,O,x){return E.apply(this,arguments)}function E(){return E=Object(w.a)(j.a.mark(function y(O,x,P){var b;return j.a.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return b=new FormData,b.append("file[]",O),b.append("target",x),B.abrupt("return",Object($.f)("/api/admin/file/upload",Object(ee.a)({method:"POST",data:b},P||{})));case 4:case"end":return B.stop()}},y)})),E.apply(this,arguments)}var D=function(O){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(O,"&w=").concat(x)};function o(y,O){return X.apply(this,arguments)}function X(){return X=Object(w.a)(j.a.mark(function y(O,x){return j.a.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",Object($.f)("/api/admin/file/delete",Object(ee.a)({method:"DELETE",data:{url:O}},x||{})));case 1:case"end":return b.stop()}},y)})),X.apply(this,arguments)}},"DBJ/":function(oe,S,e){"use strict";var ee=e("y8nQ"),w=e("Vl3Y"),U=e("etVw"),j=e("q1tI"),$=e.n(j),C=e("9kvl"),Q=e("qFDU"),n=e("nKUr"),H=e.n(n),f=function(D){var o=D.onChange,X=D.url,y=D.name,O=D.extra,x=D.accept,P=D.data,b=D.wrapInForm,te=b===void 0?!0:b,B=D.title,G=Object(C.i)();return P&&P[y]&&delete P[y],Object(n.jsx)(Q.a,{condition:te,wrap:function(ie){return Object(n.jsx)(w.a,{children:ie})},children:Object(n.jsx)(U.a,{title:B||Object(n.jsx)(C.a,{id:"upload_click_here"}),placeholder:G.formatMessage({id:"upload_click_here"}),onChange:o,label:Object(n.jsx)(C.a,{id:"upload"}),max:2,fieldProps:{data:P,accept:x,name:y,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(X),extra:O})})};S.a=f},YjuE:function(oe,S,e){"use strict";e.r(S);var ee=e("T2oS"),w=e("W9HT"),U=e("tJVT"),j=e("q1tI"),$=e.n(j),C=e("nhC9"),Q=e("Ty5D"),n=e("9kvl"),H=e("tMyG"),f=e("k1fw"),E=e("9og8"),D=e("WmNS"),o=e.n(D);function X(l,a){return y.apply(this,arguments)}function y(){return y=Object(E.a)(o.a.mark(function l(a,r){return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(n.f)("/api/admin/settings",Object(f.a)({method:"GET",useCache:!1,params:Object(f.a)(Object(f.a)({},a),{},{per_page:a.pageSize,page:a.current})},r||{})));case 1:case"end":return s.stop()}},l)})),y.apply(this,arguments)}function O(l,a){return x.apply(this,arguments)}function x(){return x=Object(E.a)(o.a.mark(function l(a,r){return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(n.f)("/api/admin/settings/".concat(a),Object(f.a)({method:"GET",useCache:!1},r||{})));case 1:case"end":return s.stop()}},l)})),x.apply(this,arguments)}function P(l,a){return b.apply(this,arguments)}function b(){return b=Object(E.a)(o.a.mark(function l(a,r){return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(n.f)("/api/admin/settings",Object(f.a)({method:"POST",headers:{"Content-Type":"application/json"},data:a},r||{})));case 1:case"end":return s.stop()}},l)})),b.apply(this,arguments)}function te(l,a,r){return B.apply(this,arguments)}function B(){return B=Object(E.a)(o.a.mark(function l(a,r,i){return o.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",Object(n.f)("/api/admin/settings/".concat(a),Object(f.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:r},i||{})));case 1:case"end":return p.stop()}},l)})),B.apply(this,arguments)}function G(l,a){return z.apply(this,arguments)}function z(){return z=Object(E.a)(o.a.mark(function l(a,r){return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(n.f)("/api/admin/settings/".concat(a),Object(f.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},r||{})));case 1:case"end":return s.stop()}},l)})),z.apply(this,arguments)}function ie(l){return Z.apply(this,arguments)}function Z(){return Z=Object(E.a)(o.a.mark(function l(a){return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(n.f)("/api/admin/settings/groups",Object(f.a)({method:"GET",useCache:!1},a||{})));case 1:case"end":return i.stop()}},l)})),Z.apply(this,arguments)}function d(l){return de.apply(this,arguments)}function de(){return de=Object(E.a)(o.a.mark(function l(a){return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(n.f)("/api/admin/config",Object(f.a)({method:"GET",useCache:!1},a||{})));case 1:case"end":return i.stop()}},l)})),de.apply(this,arguments)}function V(l,a){return je.apply(this,arguments)}function je(){return je=Object(E.a)(o.a.mark(function l(a,r){var i,s;return o.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return i=a.key,s=a.value,u.abrupt("return",Object(n.f)("/api/admin/config",Object(f.a)({method:"POST",data:{config:[{key:i,value:s}]}},r||{})));case 2:case"end":return u.stop()}},l)})),je.apply(this,arguments)}var ve=e("P2fV"),le=e("NJEC"),ue=e("5Dmo"),ae=e("3S7+"),re=e("+L6B"),q=e("2/Rp"),pe=e("+BJd"),ce=e("mr32"),T=e("jrin"),be=e("miYZ"),R=e("tsqr"),N=e("xvlK"),me=e("Qiat"),J=e("y8nQ"),he=e("Vl3Y"),_e=e("5NDa"),M=e("5rEg"),c=e("VMEa"),I=e("rmhi"),F=e("Qurx"),Y=e("F/zT"),fe=e("5qq5"),ye=e("BiO0"),Me=e("hd5d"),xe=e("3fxf"),Ce=e("ovOe"),ge=e.n(Ce),t=e("nKUr"),Pe=function(a){var r=a.value,i=a.onChange,s=a.type,p=s===void 0?"file":s,u=Object(j.useState)(!1),_=Object(U.a)(u,2),L=_[0],m=_[1];return Object(t.jsxs)($.a.Fragment,{children:[Object(t.jsxs)(c.a.Group,{children:[Object(t.jsx)(M.a,{value:r,readOnly:!0}),Object(t.jsxs)(q.a,{size:"small",type:"primary",onClick:function(){return m(!L)},children:["toggle ",p," browser"]})]}),L&&Object(t.jsx)(xe.a,{onFile:function(W,v){return i&&i("".concat(v,"/").concat(W.name))}})]})},De=function(a){var r=Object(n.i)(),i=a.visible,s=a.onVisibleChange,p=a.onFinish,u=a.id,_=he.a.useForm(),L=Object(U.a)(_,1),m=L[0],A=!u||u===-1,W=Object(j.useState)("text"),v=Object(U.a)(W,2),h=v[0],g=v[1];Object(j.useEffect)(function(){u&&u!==-1?O(u).then(function(K){K.success&&(m.setFieldsValue(K.data),g(K.data.type))}):(m.resetFields(),g("text"))},[u,m]);var ne=Object(j.useCallback)(function(K){K.type&&K.type!==h&&g(K.type)},[h]);return Object(t.jsxs)(I.a,{form:m,title:r.formatMessage({id:u?"editSetting":"newSetting",defaultMessage:u?"editSetting":"newSetting"}),width:"60vw",visible:i,onVisibleChange:s,onFinish:p,onValuesChange:ne,children:[Object(t.jsxs)(c.a.Group,{children:[Object(t.jsx)(F.a,{label:Object(t.jsx)(n.a,{id:"group",defaultMessage:"group"}),rules:[{required:!0}],width:"md",name:"group"})," ",Object(t.jsx)(F.a,{label:Object(t.jsx)(n.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"})]}),Object(t.jsxs)(c.a.Group,{children:[Object(t.jsx)(Y.a,{name:"enumerable",label:Object(t.jsx)(n.a,{id:"enumerable",defaultMessage:"enumerable"})}),Object(t.jsx)(Y.a,{name:"public",label:Object(t.jsx)(n.a,{id:"public",defaultMessage:"public"})})]}),Object(t.jsx)(c.a.Group,{children:Object(t.jsx)(fe.a.Group,{disabled:!A,name:"type",label:Object(t.jsx)(n.a,{id:"type"}),options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"},{label:"json",value:"json"},{label:"file",value:"file"},{label:"image",value:"image"}]})}),Object(t.jsxs)("div",{children:[h==="text"&&Object(t.jsx)(F.a,{width:"lg",name:"value",label:Object(t.jsx)(n.a,{id:"value"})}),h==="json"&&Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(ye.a,{width:"lg",name:"value",label:Object(t.jsx)(n.a,{id:"value"}),tooltip:"".concat(r.formatMessage({id:"example_json"}),': {"name":"John", "age":30, "city":["New York","Warsaw"]}')}),Object(t.jsx)(c.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(ge.a,{src:JSON.parse(m.getFieldValue("value"))})}catch(k){return Object(t.jsx)(ge.a,{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]}),(h==="file"||h==="image")&&Object(t.jsx)(c.a.Item,{name:"value",label:"value",tooltip:"select file from current repository or upload new one",valuePropName:"value",children:Object(t.jsx)(Pe,{type:h})}),h==="markdown"&&Object(t.jsx)(c.a.Item,{name:"value",label:"value",tooltip:"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.",valuePropName:"value",children:Object(t.jsx)(Me.a,{directory:"settings/wysiwyg"})})]})]})},Te=De,Ee=e("G3dp"),Ie=e("/MfK"),Ae=function(){var l=Object(E.a)(o.a.mark(function a(r,i,s){var p;return o.a.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return p=R.default.loading(r.formatMessage({id:"loading"})),_.prev=1,_.next=4,s&&s!==-1?te(s,Object(f.a)({},i)):P(Object(f.a)({},i));case 4:return p(),R.default.success(r.formatMessage({id:"success"})),_.abrupt("return",!0);case 9:return _.prev=9,_.t0=_.catch(1),p(),R.default.error(r.formatMessage({id:"error"})),_.abrupt("return",!1);case 14:case"end":return _.stop()}},a,null,[[1,9]])}));return function(r,i,s){return l.apply(this,arguments)}}(),Se=function(){var l=Object(E.a)(o.a.mark(function a(r,i){var s;return o.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return s=R.default.loading(r.formatMessage({id:"loading"})),u.prev=1,u.next=4,G(i);case 4:return s(),R.default.success(r.formatMessage({id:"success"})),u.abrupt("return",!0);case 9:return u.prev=9,u.t0=u.catch(1),s(),R.default.error(r.formatMessage({id:"error"})),u.abrupt("return",!1);case 14:case"end":return u.stop()}},a,null,[[1,9]])}));return function(r,i){return l.apply(this,arguments)}}(),Ue=function(){var a=Object(j.useState)(!1),r=Object(U.a)(a,2),i=r[0],s=r[1],p=Object(j.useState)([]),u=Object(U.a)(p,2),_=u[0],L=u[1],m=Object(j.useRef)(),A=Object(n.i)();Object(j.useEffect)(function(){ie().then(function(v){v.success&&L(v.data)})},[]);var W=[{title:Object(t.jsx)(n.a,{id:"group",defaultMessage:"group"}),dataIndex:"group",hideInSearch:!1,key:"group",valueType:"select",width:100,valueEnum:_.sort().reduce(function(v,h){return Object(f.a)(Object(f.a)({},v),{},Object(T.a)({},h,h))},{})},{title:Object(t.jsx)(n.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(n.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(t.jsx)(n.a,{id:"enumerable",defaultMessage:"enumerable"}),dataIndex:"enumerable",hideInForm:!0,hideInSearch:!0,render:function(h,g){return Object(t.jsx)(ce.a,{color:g.enumerable?"success":"error",children:Object(t.jsx)(n.a,{id:g.enumerable?"true":"false",defaultMessage:g.enumerable?"true":"false"})})}},{title:Object(t.jsx)(n.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(h,g){return Object(t.jsx)(ce.a,{color:g.public?"success":"error",children:Object(t.jsx)(n.a,{id:g.public?"true":"false",defaultMessage:g.public?"true":"false"})})}},{hideInSearch:!0,title:Object(t.jsx)(n.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(h,g){return[Object(t.jsx)(ae.a,{title:Object(t.jsx)(n.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(q.a,{type:"primary",icon:Object(t.jsx)(Ee.a,{}),onClick:function(){return s(g.id)}})},"edit"),Object(t.jsx)(le.a,{title:Object(t.jsx)(n.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(E.a)(o.a.mark(function ne(){var K;return o.a.wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.next=2,Se(A,g.id);case 2:K=Oe.sent,K&&(s(!1),m.current&&m.current.reload());case 4:case"end":return Oe.stop()}},ne)})),okText:Object(t.jsx)(n.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(n.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(ae.a,{title:Object(t.jsx)(n.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(q.a,{type:"primary",icon:Object(t.jsx)(Ie.a,{}),danger:!0})})},"delete")]}}];return Object(t.jsxs)($.a.Fragment,{children:[Object(t.jsx)(me.a,{headerTitle:A.formatMessage({id:"menu.settings"}),actionRef:m,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[Object(t.jsxs)(q.a,{type:"primary",onClick:function(){s(-1)},children:[Object(t.jsx)(N.a,{})," ",Object(t.jsx)(n.a,{id:"pages.searchTable.new"})]},"primary")]},request:function(h){var g=h.pageSize,ne=h.current,K=h.group;return X({pageSize:g,current:ne,group:K}).then(function(k){return k.success?{data:k.data,total:k.meta.total,success:!0}:[]})},columns:W}),Object(t.jsx)(Te,{groups:_,id:i,visible:Number.isInteger(i),onVisibleChange:function(h){return h===!1&&s(!1)},onFinish:function(){var v=Object(E.a)(o.a.mark(function h(g){var ne;return o.a.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,Ae(A,g,Number(i));case 2:ne=k.sent,ne&&(s(!1),m.current&&m.current.reload());case 4:case"end":return k.stop()}},h)}));return function(h){return v.apply(this,arguments)}}()})]})},Fe=Ue,Ye=e("tU7J"),Be=e("wFql"),Re=e("Fghh"),Le=Be.a.Text,se;(function(l){l.Array="array",l.String="string"})(se||(se={}));var We=function(a,r){return r===se.Array?a&&Array.isArray(a)?JSON.stringify(a):"[]":a},Ke=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;if(r===se.Array){var i=JSON.parse(a);return i&&Array.isArray(i)?i:[]}return a},we=function(a){var r=Object(Re.j)(),i=a.visible,s=a.onVisibleChange,p=a.onFinish,u=a.value,_=he.a.useForm(),L=Object(U.a)(_,1),m=L[0],A=Object(j.useMemo)(function(){return(u.rules||[]).includes(se.Array)?se.Array:se.String},[u.rules]);return Object(j.useEffect)(function(){m.setFieldsValue(Object(f.a)(Object(f.a)({},u),{},{value:We(u.value,A)}))},[A,u,m]),Object(t.jsxs)(I.a,{form:m,title:u.full_key,width:"60vw",visible:i,onVisibleChange:s,onFinish:Object(E.a)(o.a.mark(function W(){var v;return o.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,V({key:u.full_key,value:Ke(m.getFieldsValue().value,A)});case 2:if(v=g.sent,!v.success){g.next=6;break}return p(v.success===!0),g.abrupt("return",v.success);case 6:return g.abrupt("return");case 7:case"end":return g.stop()}},W)})),children:[Object(t.jsxs)(c.a.Group,{children:[Object(t.jsx)(Y.a,{disabled:!0,name:"public",label:Object(t.jsx)(n.a,{id:"public",defaultMessage:"public"})}),Object(t.jsx)(Y.a,{disabled:!0,name:"readonly",label:Object(t.jsx)(n.a,{id:"readonly",defaultMessage:"readonly"})}),Object(t.jsx)(c.a.Item,{shouldUpdate:!0,label:Object(t.jsx)(n.a,{id:"rules",defaultMessage:"rules"}),children:function(){return Object(t.jsx)(Le,{code:!0,children:JSON.stringify(m.getFieldValue("rules"))})}})]}),A===se.Array?Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(ye.a,{width:"lg",name:"value",label:Object(t.jsx)(n.a,{id:"value"}),tooltip:"".concat(r.formatMessage({id:"example_json"}),': ["first_field_name", "second_field_name"]')}),Object(t.jsx)(c.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(ge.a,{src:JSON.parse(m.getFieldValue("value"))})}catch(v){return Object(t.jsx)(ge.a,{src:JSON.parse('{ "error": "cannot parse this array" }')})}}})]}):Object(t.jsx)(F.a,{width:"lg",name:"value",label:Object(t.jsx)(n.a,{id:"value"})})]})},Ve=we,Ne=[{title:Object(t.jsx)(n.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(n.a,{id:"readonly",defaultMessage:"readonly"}),dataIndex:"readonly",hideInForm:!0,hideInSearch:!0,render:function(a,r){return Object(t.jsx)(ce.a,{color:r.readonly?"success":"error",children:Object(t.jsx)(n.a,{id:r.readonly?"true":"false",defaultMessage:r.readonly?"true":"false"})})}},{title:Object(t.jsx)(n.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(a,r){return Object(t.jsx)(ce.a,{color:r.public?"success":"error",children:Object(t.jsx)(n.a,{id:r.public?"true":"false",defaultMessage:r.public?"true":"false"})})}},{title:Object(t.jsx)(n.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0}],$e=function l(a,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return!a||typeof a!="object"?!1:(Object.keys(a).forEach(function(s){var p=a[s];s===r?i.push(a):typeof p=="object"&&l(p,r,i)}),i)},Ge=function(a){var r=a.packageName,i=a.values,s=a.onValueUpdated,p=Object(n.i)(),u=Object(j.useState)(),_=Object(U.a)(u,2),L=_[0],m=_[1],A=Object(j.useMemo)(function(){var W=i[r];return $e(W,"rules")},[i,r]);return Object(t.jsxs)($.a.Fragment,{children:[Object(t.jsx)(me.a,{headerTitle:p.formatMessage({id:"menu.settings"}),rowKey:"key",search:{labelWidth:120},dataSource:A,columns:[].concat(Ne,[{hideInSearch:!0,title:Object(t.jsx)(n.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(v,h){return[Object(t.jsx)(ae.a,{title:Object(t.jsx)(n.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(q.a,{type:"primary",icon:Object(t.jsx)(Ee.a,{}),onClick:function(){return m(h)}})},"edit")]}}])}),L&&Object(t.jsx)(Ve,{value:L,visible:L!==void 0,onVisibleChange:function(v){return v===!1&&m(void 0)},onFinish:Object(E.a)(o.a.mark(function W(){return o.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:s();case 1:case"end":return h.stop()}},W)}))})]})},ze=Ge,Je=function(a){return a.replaceAll("escolalms","").split("_").join("")},ke=S.default=function(){var l=Object(Q.h)(),a=Object(n.i)(),r=l.tab,i=r===void 0?"user_settings":r,s=Object(j.useState)(),p=Object(U.a)(s,2),u=p[0],_=p[1],L=Object(j.useCallback)(function(){d().then(function(m){m.success&&_(m.data)})},[]);return Object(j.useEffect)(function(){L()},[]),u?Object(t.jsx)(H.a,{title:Object(t.jsx)(n.a,{id:"settings"}),header:{breadcrumb:{routes:[{path:"settings",breadcrumbName:a.formatMessage({id:"menu.Settings"})},{path:String(i),breadcrumbName:String(i)}]}},children:Object(t.jsxs)(C.a,{tabs:{type:"card",activeKey:i,onChange:function(A){return n.d.push("/settings/".concat(A))}},children:[Object(t.jsx)(C.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"user.settings"}),children:Object(t.jsx)(Fe,{})},"user_settings"),Object.keys(u).map(function(m){return Object(t.jsxs)(C.a.TabPane,{tab:Object(t.jsxs)("span",{children:[Object(t.jsx)(n.a,{id:"package"})," ",Je(m)]}),children:[Object(t.jsx)(ze,{values:u,packageName:m,onValueUpdated:function(){return L()}}),m]},m)})]})}):Object(t.jsx)(w.a,{})}},hd5d:function(oe,S,e){"use strict";var ee=e("9og8"),w=e("WmNS"),U=e.n(w),j=e("q1tI"),$=e.n(j),C=e("3Ef1"),Q=e.n(C),n=e("BAh9"),H=e("vtG9"),f=e.n(H),E=e("9kvl"),D=e("nKUr"),o=e.n(D),X=function(O){var x=O.value,P=O.onChange,b=O.directory,te=b===void 0?"/wysiwyg":b,B=Object(E.i)();return Object(D.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(D.jsx)(Q.a,{uploadImage:function(){var G=Object(ee.a)(U.a.mark(function z(ie){var Z,d;return U.a.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,Object(n.e)(ie,te);case 2:if(Z=V.sent,!Z.success){V.next=6;break}return d=Z.data[0].name.includes("/")?Z.data[0].name:"".concat(te).concat(Z.data[0].name),V.abrupt("return",Object(n.d)(d,1e3));case 6:throw new Error("Error while uploading");case 7:case"end":return V.stop()}},z)}));return function(z){return G.apply(this,arguments)}}(),defaultValue:x||"",onChange:function(z){return P&&P(z())},placeholder:B.formatMessage({id:"wysiwyg_placeholder"})})})};S.a=X},lLVY:function(oe,S,e){},vtG9:function(oe,S,e){}}]);
