(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"3fxf":function(F,u,t){"use strict";var C=t("DjyN"),E=t("NUBc"),R=t("Mwp2"),c=t("VXEj"),v=t("+L6B"),d=t("2/Rp"),h=t("5NDa"),m=t("5rEg"),M=t("oBTY"),n=t("k1fw"),A=t("tJVT"),f=t("DYRE"),L=t("zeV3"),U=t("tU7J"),s=t("wFql"),r=t("q1tI"),i=t.n(r),O=t("BAh9"),_=t("/MfK"),S=t("mAF4"),b=t("dF/Y"),K=t("9kvl"),V=t("DBJ/"),Q=t("lLVY"),q=t.n(Q),e=t("nKUr"),tt=t.n(e),Y=function(x){var B=x.directory,W=x.onUploaded;return Object(e.jsxs)(L.b,{align:"start",children:[Object(e.jsxs)(s.a.Text,{children:[Object(e.jsx)(K.a,{id:"pages.files.filesBrowser"}),Object(e.jsx)(s.a.Text,{code:!0,children:B})]}),Object(e.jsx)(V.a,{url:"/api/admin/file/upload",name:"file[]",data:{target:B},onChange:function(J){return J.file.status==="done"&&W(B)}})]})},X=function(x){var B=x.defaultDirectory,W=B===void 0?"/":B,$=x.onFile,J=Object(K.i)(),Z=Object(r.useState)({loading:!1,name:"",directory:W,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),G=Object(A.a)(Z,2),l=G[0],z=G[1],g=Object(r.useRef)(),P=Object(r.useCallback)(function(o){z(function(a){return Object(n.a)(Object(n.a)({},a),{},{loading:o})})},[]),j=Object(r.useCallback)(function(o){var a,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,N=function(){return g.current&&g.current.abort()};return N(),g.current=new AbortController,P(!0),Object(O.a)({directory:o,page:D},{signal:(a=g.current)===null||a===void 0?void 0:a.signal}).then(function(y){y.success&&z(function(I){return Object(n.a)(Object(n.a)(Object(n.a)({},I),y.data),{},{data:[{url:o.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(M.a)(y.data.data.map(function(p){return Object(n.a)(Object(n.a)({},p),{},{url:p.mime==="directory"?"".concat(o,"/").concat(p.name):p.url})}))).filter(function(p){return o==="/"?p.name!=="..":!0}),directory:o,loading:!1})})}).catch(function(){return P(!1)}),function(){N()}},[P]);Object(r.useEffect)(function(){return j(W)},[W,j]);var w=Object(r.useCallback)(function(o){P(!0),Object(O.c)(o).then(function(){j(l.directory)}).catch(function(){P(!1)})},[j,P,l.directory]),k=Object(r.useCallback)(function(o,a){var D,N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,y=function(){return g.current&&g.current.abort()};return y(),g.current=new AbortController,P(!0),Object(O.b)({directory:o,name:a,page:N},{signal:(D=g.current)===null||D===void 0?void 0:D.signal}).then(function(I){I.success&&z(function(p){return Object(n.a)(Object(n.a)(Object(n.a)({},p),I.data),{},{data:[{url:o.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(M.a)(I.data.data.map(function(T){return Object(n.a)(Object(n.a)({},T),{},{url:T.mime==="directory"?"".concat(o,"/").concat(T.name):T.url})}))).filter(function(T){return o==="/"?T.name!=="..":!0}),directory:o,loading:!1})})}).catch(function(){return P(!1)}),function(){y()}},[P]);return Object(e.jsxs)("div",{className:"file-browser",children:[Object(e.jsxs)("div",{className:"file-browser__header",children:[Object(e.jsx)(m.a,{placeholder:J.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(a){return z(function(D){return Object(n.a)(Object(n.a)({},D),{},{name:a.target.value})})},value:l.name}),Object(e.jsxs)("div",{children:[Object(e.jsx)(d.a,{className:"file-browser__button",onClick:function(){return j(l.directory)},children:Object(e.jsx)(K.a,{id:"reset"})}),Object(e.jsx)(d.a,{className:"file-browser__button",type:"primary",onClick:function(){return k(l.directory,l.name)},children:Object(e.jsx)(K.a,{id:"query"})})]})]}),Object(e.jsx)(c.b,{loading:l.loading,size:"small",itemLayout:"horizontal",dataSource:l.data,header:Object(e.jsx)(Y,{directory:l.directory,onUploaded:function(a){return j(a)}}),footer:Object(e.jsx)(Y,{directory:l.directory,onUploaded:function(a){return j(a)}}),renderItem:function(a){return Object(e.jsx)(c.b.Item,{actions:a.mime!=="directory"?[Object(e.jsx)(d.a,{type:"default",danger:!0,icon:Object(e.jsx)(_.a,{}),size:"small",onClick:function(){return w(a.url)}})]:[],children:Object(e.jsx)(c.b.Item.Meta,{avatar:a.mime==="directory"?Object(e.jsx)(d.a,{type:"primary",icon:Object(e.jsx)(S.a,{}),size:"small",onClick:function(){return j(a.url)}}):Object(e.jsx)("a",{href:a.url,target:"_blank",children:Object(e.jsx)(d.a,{type:"default",icon:Object(e.jsx)(b.a,{}),size:"small"})}),description:Object(e.jsx)(i.a.Fragment,{children:Object(e.jsx)(d.a,{type:"text",size:"small",onClick:function(){return a.mime==="directory"?j(a.url):$&&$(a,l.directory)},children:a.name})})})})}}),Object(e.jsx)(E.a,{pageSizeOptions:[],current:l.current_page,total:l.total,pageSize:l.per_page,onChange:function(a){return j(l.directory,a)}})]})};u.a=X},BAh9:function(F,u,t){"use strict";t.d(u,"a",function(){return d}),t.d(u,"b",function(){return m}),t.d(u,"e",function(){return n}),t.d(u,"d",function(){return f}),t.d(u,"c",function(){return L});var C=t("k1fw"),E=t("9og8"),R=t("WmNS"),c=t.n(R),v=t("9kvl");function d(s,r){return h.apply(this,arguments)}function h(){return h=Object(E.a)(c.a.mark(function s(r,i){return c.a.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",Object(v.f)("/api/admin/file/list",Object(C.a)({method:"GET",params:r},i||{})));case 1:case"end":return _.stop()}},s)})),h.apply(this,arguments)}function m(s,r){return M.apply(this,arguments)}function M(){return M=Object(E.a)(c.a.mark(function s(r,i){return c.a.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",Object(v.f)("/api/admin/file/find",Object(C.a)({method:"GET",params:r},i||{})));case 1:case"end":return _.stop()}},s)})),M.apply(this,arguments)}function n(s,r,i){return A.apply(this,arguments)}function A(){return A=Object(E.a)(c.a.mark(function s(r,i,O){var _;return c.a.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return _=new FormData,_.append("file[]",r),_.append("target",i),b.abrupt("return",Object(v.f)("/api/admin/file/upload",Object(C.a)({method:"POST",data:_},O||{})));case 4:case"end":return b.stop()}},s)})),A.apply(this,arguments)}var f=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(r,"&w=").concat(i)};function L(s,r){return U.apply(this,arguments)}function U(){return U=Object(E.a)(c.a.mark(function s(r,i){return c.a.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",Object(v.f)("/api/admin/file/delete",Object(C.a)({method:"DELETE",data:{url:r}},i||{})));case 1:case"end":return _.stop()}},s)})),U.apply(this,arguments)}},"DBJ/":function(F,u,t){"use strict";var C=t("y8nQ"),E=t("Vl3Y"),R=t("etVw"),c=t("q1tI"),v=t.n(c),d=t("9kvl"),h=t("qFDU"),m=t("nKUr"),M=t.n(m),n=function(f){var L=f.onChange,U=f.url,s=f.name,r=f.extra,i=f.accept,O=f.data,_=f.wrapInForm,S=_===void 0?!0:_,b=Object(d.i)();return O&&O[s]&&delete O[s],Object(m.jsx)(h.a,{condition:S,wrap:function(V){return Object(m.jsx)(E.a,{children:V})},children:Object(m.jsx)(R.a,{title:Object(m.jsx)(d.a,{id:"upload_click_here"}),placeholder:b.formatMessage({id:"upload_click_here"}),onChange:L,label:Object(m.jsx)(d.a,{id:"upload"}),max:2,fieldProps:{data:O,accept:i,name:s,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(U),extra:r})})};u.a=n},lLVY:function(F,u,t){},u4ym:function(F,u,t){"use strict";t.r(u);var C=t("IzEo"),E=t("bx4M"),R=t("tU7J"),c=t("wFql"),v=t("q1tI"),d=t.n(v),h=t("tMyG"),m=t("9kvl"),M=t("3fxf"),n=t("nKUr"),A=t.n(n);u.default=function(){return Object(n.jsx)(h.a,{children:Object(n.jsxs)(E.a,{children:[Object(n.jsx)(c.a.Text,{strong:!0,children:Object(n.jsx)(m.a,{id:"pages.files.content"})}),Object(n.jsx)(M.a,{})]})})}}}]);
