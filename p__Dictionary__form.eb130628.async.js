"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[3507],{29477:function(Y,I,e){var C=e(97857),p=e.n(C),A=e(5574),l=e.n(A),j=e(55523),u=e(75842),r=e(21974),i=e(67294),M=e(80854),n=e(85893);function T(s){var S=s.onChange,v=s.onUpload,k=s.url,N=s.name,_=s.extra,q=s.accept,w=s.data,U=s.wrapInForm,ee=U===void 0?!0:U,B=s.title,$=s.formProps,z=s.maxFiles,P=s.clearListAfterUpload,a=s.hideLabel,t=s.disabled,te=s.showUploadList,ae=(0,i.useState)(),H=l()(ae,2),O=H[0],Q=H[1],V=(0,M.useIntl)();return w&&w[N]&&delete w[N],(0,n.jsx)(r.Z,{condition:ee,wrap:function(Z){return(0,n.jsx)(u.Z,p()(p()({},$),{},{children:Z}))},children:(0,n.jsx)(j.Z,{title:B||" ".concat(V.formatMessage({id:"upload_click_here"})),placeholder:V.formatMessage({id:"upload_click_here"}),label:!a&&(0,n.jsx)(M.FormattedMessage,{id:"upload"}),max:z!=null?z:2,fieldProps:{data:w,accept:q,name:N,showUploadList:te,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))},onChange:function(Z){Q(Z),S&&S(Z),Z.file.status==="done"&&(v&&v(Z.file.response),P&&Q(void 0))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(k),extra:_,fileList:O==null?void 0:O.fileList,disabled:t})})}I.Z=T},68505:function(Y,I,e){e.d(I,{E:function(){return j}});var C=[{regex:/^(Consultation|Course|Webinar|Questionnaire|Dictionary|Voucher) updated successfully$/,translationKey:"notifications.updateSuccessfully",extractModel:function(r){return r.split(" ")[0]}},{regex:/^(Consultation|Course|Webinar|Questionnaire|Dictionary|Voucher) saved successfully$/,translationKey:"notifications.createSuccessfully",extractModel:function(r){return r.split(" ")[0]}},{regex:/^(Consultation|Course|Webinar|Questionnaire|Dictionary|Voucher) created successfully$/,translationKey:"notifications.createSuccessfully",extractModel:function(r){return r.split(" ")[0]}},{regex:/^(Product|Group) updated$/,translationKey:"notifications.updated",extractModel:function(r){return r.split(" ")[0]}}],p=function(r){for(var i=0,M=C;i<M.length;i++){var n=M[i];if(n.regex.test(r))return{translationKey:n.translationKey,model:n.extractModel?n.extractModel(r):void 0}}return{translationKey:null,model:null}},A=e(2453),l=e(80854),j=function(){var r=(0,l.useIntl)(),i=function(n){var T=p(n.message),s=T.translationKey,S=T.model,v=n.success&&!("error"in n);s?A.ZP[v?"success":"error"](r.formatMessage({id:s},{id:S?r.formatMessage({id:S.toLocaleLowerCase()}):void 0})):A.ZP[v?"success":"error"](v?n.message?n.message:r.formatMessage({id:"updated_at"}):r.formatMessage({id:"notifications.unexpectedError"}))};return{showNotification:i}}},54464:function(Y,I,e){e.d(I,{T:function(){return A}});var C=e(67294),p=e(80854),A=function(){var j,u=(0,p.useModel)("@@initialState"),r=u.initialState,i=(r==null||(j=r.currentUser)===null||j===void 0?void 0:j.permissions)||[],M=(0,C.useCallback)(function(n){return Array.isArray(i)?!!(i!=null&&i.find(function(T){return T.includes(n)})):!1},[i]);return{checkPermission:M}}},73197:function(Y,I,e){e.r(I),e.d(I,{DictionaryTabNames:function(){return ne},default:function(){return ce}});var C=e(97857),p=e.n(C),A=e(15009),l=e.n(A),j=e(99289),u=e.n(j),r=e(5574),i=e.n(r),M=e(68505),n=e(29477),T=e(91115),s=e(54464),S=e(61441),v=e(42782),k=e(66419),N=e(47389),_=e(82061),q=e(51042),w=e(16894),U=e(2453),ee=e(66309),B=e(83062),$=e(14726),z=e(86738),P=e(67294),a=e(80854),t=e(85893),te=function(){var h=u()(l()().mark(function x(c){return l()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,v.FX)(c).then(function(L){return L.success&&U.ZP.success(L.message),!0}));case 1:case"end":return f.stop()}},x)}));return function(c){return h.apply(this,arguments)}}(),ae=function(){var x=(0,P.useRef)(),c=(0,a.useIntl)(),G=(0,a.useParams)(),f=G.dictionaryId,L=G.tab,ie=(0,s.T)(),oe=ie.checkPermission,J=[{title:(0,t.jsx)(a.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:(0,t.jsx)(a.FormattedMessage,{id:"word",defaultMessage:"word"}),dataIndex:"word",sorter:!0},{title:(0,t.jsx)(a.FormattedMessage,{id:"categories",defaultMessage:"categories"}),dataIndex:"categories",sorter:!1,hideInSearch:!0,render:function(E,o){var m;return(0,t.jsx)(P.Fragment,{children:(m=o.categories)===null||m===void 0?void 0:m.map(function(D){return(0,t.jsx)(ee.Z,{children:D.name},D.name)})})}},{hideInSearch:!0,title:(0,t.jsx)(a.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",width:100,render:function(E,o){return[(0,t.jsx)(a.Link,{to:"/other/dictionary/".concat(f,"/").concat(L,"/").concat(o.id,"/").concat(S.DictionaryWordsTabNames.FORM),children:(0,t.jsx)(B.Z,{title:(0,t.jsx)(a.FormattedMessage,{id:"edit",defaultMessage:"edit"}),children:(0,t.jsx)($.ZP,{type:"primary",icon:(0,t.jsx)(N.Z,{})})})},"edit"),(0,t.jsx)(z.Z,{title:(0,t.jsx)(a.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:u()(l()().mark(function m(){var D;return l()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,te(o.id);case 2:D=g.sent,D&&x.current&&x.current.reload();case 4:case"end":return g.stop()}},m)})),okText:(0,t.jsx)(a.FormattedMessage,{id:"yes"}),cancelText:(0,t.jsx)(a.FormattedMessage,{id:"no"}),children:(0,t.jsx)(B.Z,{title:(0,t.jsx)(a.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,t.jsx)($.ZP,{type:"primary",icon:(0,t.jsx)(_.Z,{}),danger:!0})})},"delete")]}}];return(0,t.jsx)(w.ZP,{headerTitle:c.formatMessage({id:"words",defaultMessage:"Words"}),actionRef:x,rowKey:"id",search:{layout:"vertical"},toolBarRender:function(){return[(0,t.jsx)(a.Link,{to:"/other/dictionary/".concat(f,"/").concat(L,"/new/").concat(S.DictionaryWordsTabNames.FORM),children:(0,t.jsxs)($.ZP,{type:"primary",children:[(0,t.jsx)(q.Z,{})," ",(0,t.jsx)(a.FormattedMessage,{id:"new",defaultMessage:"new"})]},"primary")},"new"),oe(T.Z.DictionaryImport)?(0,t.jsx)("div",{className:"import-dictionary",children:(0,t.jsx)(n.Z,{title:c.formatMessage({id:"import_dictionary",defaultMessage:"Import dictionary"}),url:"/api/admin/dictionary-words/import",name:"file",accept:".csv, .xlsx",data:{dictionary_id:Number(f)},onChange:function(o){if(o.file.status==="done"&&o.file.response&&o.file.response.success){var m;U.ZP.success(o.file.response.message),(m=x.current)===null||m===void 0||m.reload()}o.file.response&&o.file.status==="error"&&(U.ZP.error(o.file.response.message),console.error(o.file.response))},hideLabel:!0,wrapInForm:!1,maxFiles:1,clearListAfterUpload:!0})}):void 0]},request:function(E,o){var m=E.pageSize,D=E.current,X=E.word;return(0,v.uz)(p()({per_page:m,page:D,word:X,dictionary_id:Number(f)},(0,k.di)(o,"created_at"))).then(function(g){return g.success?{data:g.data,total:g.meta.total,success:!0}:[]})},columns:J})},H=ae,O=e(78715),Q=e(952),V=e(5966),re=e(31199),Z=e(74453),de=e(74330),ue=e(71230),se=e(15746),ne=function(h){return h.FORM="form",h.WORDS="words",h}({}),ce=function(){var h=(0,a.useIntl)(),x=(0,a.useParams)(),c=x.dictionaryId,G=x.tab,f=c==="new",L=(0,M.E)(),ie=L.showNotification,oe=(0,P.useState)(),J=i()(oe,2),R=J[0],E=J[1],o=(0,P.useState)(!1),m=i()(o,2),D=m[0],X=m[1],g=Q.ZP.useForm(),me=i()(g,1),fe=me[0],le=(0,P.useCallback)(u()(l()().mark(function W(){var F;return l()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return X(!0),y.next=3,(0,v.RC)(Number(c));case 3:F=y.sent,F.success&&E(F.data),X(!1);case 6:case"end":return y.stop()}},W)})),[c]);(0,P.useEffect)(function(){if(c==="new"){E({});return}le()},[c,le]);var ve=(0,P.useMemo)(function(){return{onFinish:function(){var W=u()(l()().mark(function b(y){var K;return l()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(c!=="new"){d.next=7;break}return d.next=3,(0,v.Xk)(y);case 3:K=d.sent,K.success&&a.history.push("/other/dictionary/".concat(K.data.id,"/form")),d.next=10;break;case 7:return d.next=9,(0,v.ax)(Number(c),y);case 9:K=d.sent;case 10:ie(K);case 11:case"end":return d.stop()}},b)}));function F(b){return W.apply(this,arguments)}return F}(),initialValues:R}},[R,c]);return R?(0,t.jsx)(Z._z,{title:f?(0,t.jsx)(a.FormattedMessage,{id:"new_dictionary"}):(0,t.jsx)(a.FormattedMessage,{id:"edit_dictionary"}),children:(0,t.jsxs)(O.ZP,{tabs:{type:"card",activeKey:G,onChange:function(F){a.history.push("/other/dictionary/".concat(c,"/").concat(F))}},children:[(0,t.jsx)(O.ZP.TabPane,{tab:(0,t.jsx)(a.FormattedMessage,{id:"attributes"}),children:(0,t.jsxs)(Q.ZP,p()(p()({},ve),{},{form:fe,children:[(0,t.jsxs)(ue.Z,{gutter:[16,16],children:[(0,t.jsx)(se.Z,{xs:{span:24},md:{span:12},children:(0,t.jsx)(V.Z,{name:"name",label:(0,t.jsx)(a.FormattedMessage,{id:"name"}),tooltip:(0,t.jsx)(a.FormattedMessage,{id:"name"}),placeholder:h.formatMessage({id:"Name"}),required:!0,rules:[{validator:function(){var W=u()(l()().mark(function b(y,K){return l()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(K){d.next=2;break}return d.abrupt("return",Promise.reject(new Error(h.formatMessage({id:"field_required",defaultMessage:"field_required"}))));case 2:return d.abrupt("return",Promise.resolve());case 3:case"end":return d.stop()}},b)}));function F(b,y){return W.apply(this,arguments)}return F}()}]})}),!f&&(0,t.jsx)(se.Z,{xs:{span:24},md:{span:12},children:(0,t.jsx)(V.Z,{name:"slug",label:(0,t.jsx)(a.FormattedMessage,{id:"slug"}),placeholder:h.formatMessage({id:"slug"}),disabled:!0,required:!0})}),(0,t.jsx)(se.Z,{xs:{span:24},md:{span:12},children:(0,t.jsx)(re.Z,{name:"free_views_count",label:(0,t.jsx)(a.FormattedMessage,{id:"free_views_count"}),tooltip:(0,t.jsx)(a.FormattedMessage,{id:"free_views_count_tooltip"}),placeholder:h.formatMessage({id:"Free views count"}),min:0})})]}),D&&(0,t.jsx)(de.Z,{})]}))},ne.FORM),(0,t.jsx)(O.ZP.TabPane,{tab:(0,t.jsx)(a.FormattedMessage,{id:"words"}),disabled:f,children:(0,t.jsx)(H,{})},ne.WORDS)]})}):(0,t.jsx)(de.Z,{})}}}]);

//# sourceMappingURL=p__Dictionary__form.eb130628.async.js.map