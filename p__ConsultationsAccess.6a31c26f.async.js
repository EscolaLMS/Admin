(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"49nl":function(_,$,e){"use strict";e.r($);var s=e("qLMh"),O=e("9og8"),o=e("DYRE"),b=e("zeV3"),r=e("+L6B"),i=e("2/Rp"),P=e("+BJd"),v=e("mr32"),m=e("k1fw"),w=e("PpiC"),x=e("tJVT"),p=e("q1tI"),I=e.n(p),S=e("sWYD"),n=e("9kvl"),L=e("tMyG"),l=e("Qiat"),T=e("0WSk"),g=e("Vpfc"),K=e("A6KM"),A=e("mGZj");function q(y,j){return G.apply(this,arguments)}function G(){return G=Object(O.a)(Object(s.a)().mark(function y(j,u){return Object(s.a)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt("return",Object(n.i)("/api/admin/consultation-access-enquiries",Object(m.a)({method:"GET",params:j},u||{})));case 1:case"end":return F.stop()}},y)})),G.apply(this,arguments)}function Q(y,j,u){return U.apply(this,arguments)}function U(){return U=Object(O.a)(Object(s.a)().mark(function y(j,u,D){return Object(s.a)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",Object(n.i)("/api/admin/consultation-access-enquiries/approve/".concat(j),Object(m.a)({data:u,method:"POST"},D||{})));case 1:case"end":return E.stop()}},y)})),U.apply(this,arguments)}function ee(y,j,u){return V.apply(this,arguments)}function V(){return V=Object(O.a)(Object(s.a)().mark(function y(j,u,D){return Object(s.a)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",Object(n.i)("/api/admin/consultation-access-enquiries/disapprove/".concat(j),Object(m.a)({data:u,method:"POST"},D||{})));case 1:case"end":return E.stop()}},y)})),V.apply(this,arguments)}var re=e("bP8k"),z=e("gFTJ"),ve=e("oBTY"),me=e("y8nQ"),oe=e("Vl3Y"),te=e("jrin"),c=e("EcEN"),ue=e("+caW"),pe=e("yj/a"),ie=e("Qurx"),fe=e("7GUw"),t=e("nKUr"),f;(function(y){y.Custom="custom",y.Jitsi="jitsi",y.PencilSpaces="pencil-spaces"})(f||(f={}));var R=function(j,u){return u?[j]:[]},W=function(){return"https://meet.jit.si/".concat(Object(c.v4)())},Y=function(j){var u,D,F=j.meeting_link,E=j.meeting_type,N=(u={},Object(te.a)(u,f.Custom,F),Object(te.a)(u,f.Jitsi,W()),Object(te.a)(u,f.PencilSpaces,null),u);return(D=N==null?void 0:N[E])!==null&&D!==void 0?D:F},ge=function(j){var u=j.term,D=j.onClose,F=j.onSuccess,E=Object(n.l)(),N=Object(n.m)("@@initialState"),J=N.initialState,ae=oe.a.useForm(),X=Object(x.a)(ae,1),ne=X[0],ce=oe.a.useWatch("meeting_type",ne),h=Object(p.useMemo)(function(){var d;return Boolean(J==null||(d=J.packages)===null||d===void 0?void 0:d[fe.a.PencilSpaces])},[J==null?void 0:J.packages]),C=Object(p.useMemo)(function(){return[{value:f.Custom,label:E.formatMessage({id:"ConsultationsAccess.meetingType.custom"})},{value:f.Jitsi,label:E.formatMessage({id:"ConsultationsAccess.meetingType.jitsi"})}].concat(Object(ve.a)(R({value:f.PencilSpaces,label:E.formatMessage({id:"ConsultationsAccess.meetingType.pencil-spaces"})},h)))},[E,h]),a=Object(p.useCallback)(function(){var d=Object(O.a)(Object(s.a)().mark(function M(se){var Z,H;return Object(s.a)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(u){B.next=2;break}return B.abrupt("return");case 2:return Z=Y(se),B.next=5,Q(u==null?void 0:u.id,{meeting_link:Z});case 5:if(H=B.sent,H.success){B.next=8;break}return B.abrupt("return");case 8:D(),F();case 10:case"end":return B.stop()}},M)}));return function(M){return d.apply(this,arguments)}}(),[u]);return Object(t.jsxs)(ue.a,{title:Object(t.jsx)(n.a,{id:"approve_form",defaultMessage:"Approve Form"}),onVisibleChange:function(M){return!M&&D()},form:ne,visible:!!u,autoFocusFirstInput:!0,drawerProps:{destroyOnClose:!0},submitTimeout:2e3,initialValues:{meeting_type:f.Custom},onFinish:a,children:[u&&Object(t.jsx)(z.b,{column:2,children:Object(t.jsx)(z.b.Item,{label:Object(t.jsx)(n.a,{id:"approve_date",defaultMessage:"Approved Date"}),children:Object(S.a)(new Date(u.proposed_at),A.a)})}),Object(t.jsx)(pe.a,{name:"meeting_type",options:C,label:Object(t.jsx)(n.a,{id:"ConsultationsAccess.meetingType"})}),ce===f.Custom&&Object(t.jsx)(ie.a,{rules:[{required:!0}],name:"meeting_link",label:Object(t.jsx)(n.a,{id:"ConsultationsAccess.meetingLink"})})]})},he=e("BiO0"),Ce=function(j){var u=j.id,D=j.onClose,F=j.onSuccess,E=oe.a.useForm(),N=Object(x.a)(E,1),J=N[0];return Object(t.jsx)(ue.a,{title:Object(t.jsx)(n.a,{id:"disapprove_form",defaultMessage:"Disapprove Form"}),onVisibleChange:function(X){return!X&&D()},form:J,visible:!!u,autoFocusFirstInput:!0,drawerProps:{destroyOnClose:!0},submitTimeout:2e3,onFinish:function(){var ae=Object(O.a)(Object(s.a)().mark(function X(ne){return Object(s.a)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!u){h.next=3;break}return h.next=3,ee(u,ne).then(function(C){C.success&&(D(),F())});case 3:return h.abrupt("return",!0);case 4:case"end":return h.stop()}},X)}));return function(X){return ae.apply(this,arguments)}}(),children:Object(t.jsx)(he.a,{name:"message",label:Object(t.jsx)(n.a,{id:"reason",defaultMessage:"Reason"}),tooltip:Object(t.jsx)(n.a,{id:"reason_tooltip",defaultMessage:"Reason"})})})},xe=["type","defaultRender"],Ee=["type","defaultRender"],Me=function(){var j=Object(p.useRef)(),u=Object(n.l)(),D=Object(p.useState)(),F=Object(x.a)(D,2),E=F[0],N=F[1],J=Object(p.useState)(),ae=Object(x.a)(J,2),X=ae[0],ne=ae[1],ce=Object(p.useMemo)(function(){return[{title:Object(t.jsx)(n.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,defaultSortOrder:"descend",sorter:!0,width:"80px"},{title:Object(t.jsx)(n.a,{id:"description",defaultMessage:"Description"}),dataIndex:"description",hideInSearch:!0,sorter:!0},{title:Object(t.jsx)(n.a,{id:"user",defaultMessage:"User"}),dataIndex:"user_id",renderFormItem:function(C,a,d){var M=a.type,se=a.defaultRender,Z=Object(w.a)(a,xe);if(M==="form")return null;var H=d.getFieldValue("state");return Object(t.jsx)(T.a,Object(m.a)(Object(m.a)({},Z),{},{state:{type:H}}))},render:function(C,a){var d,M;return((d=a.user)===null||d===void 0?void 0:d.id)&&Object(t.jsx)(g.a,{type:"EscolaLms\\Core\\Models\\User",type_id:(M=a.user)===null||M===void 0?void 0:M.id,children:Object(t.jsx)(v.a,{children:a.user.email})},"user")}},{title:Object(t.jsx)(n.a,{id:"consultation_id",defaultMessage:"Consultation"}),dataIndex:"consultation_id",renderFormItem:function(C,a,d){var M=a.type,se=a.defaultRender,Z=Object(w.a)(a,Ee);if(M==="form")return null;var H=d.getFieldValue("state");return Object(t.jsx)(K.a,Object(m.a)(Object(m.a)({modelType:"CONSULTATIONS"},Z),{},{state:{type:H}}))},render:function(C,a){var d,M;return((d=a.consultation)===null||d===void 0?void 0:d.id)&&Object(t.jsx)(g.a,{type:"EscolaLms\\Consultations\\Models\\Consultation",type_id:(M=a.consultation)===null||M===void 0?void 0:M.id,children:Object(t.jsx)(v.a,{children:a.consultation.name})},"consultation_id")}},{title:Object(t.jsx)(n.a,{id:"consultation_term_date",defaultMessage:"Term Date"}),dataIndex:"consultation_term",hideInSearch:!0,sorter:!0,render:function(C,a){return a.consultation_term?Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(n.a,{id:"approved_date",defaultMessage:"Approved Date"}),":",Object(S.a)(new Date(a.consultation_term.date),A.a)]}):Object(t.jsx)(b.b,{direction:"vertical",children:a.proposed_terms.map(function(d){return Object(t.jsxs)(i.a,{size:"small",type:"primary",onClick:function(){ne(d)},children:[Object(t.jsx)(n.a,{id:"approve",defaultMessage:"Approve Term"}),":",Object(S.a)(new Date(d.proposed_at),A.a)]},d.id)})})}},{title:Object(t.jsx)(n.a,{id:"meeting_link",defaultMessage:"Meeting Link"}),dataIndex:"meeting_link",hideInSearch:!0,render:function(C,a){return a.meeting_link?Object(t.jsx)(i.a,{target:"_blank",type:"primary",href:a.meeting_link,children:new URL(a.meeting_link).host}):Object(t.jsx)(I.a.Fragment,{})}},{title:Object(t.jsx)(n.a,{id:"created_at",defaultMessage:"Created at"}),dataIndex:"created_at",hideInSearch:!0,sorter:!0,render:function(C,a){return a.created_at&&Object(S.a)(new Date(a.created_at),A.a)}},{title:Object(t.jsx)(n.a,{id:"status",defaultMessage:"Status"}),dataIndex:"status",sorter:!0,valueType:"select",valueEnum:{pending:{text:"pending",status:"pending"},approved:{text:"approved",status:"approved"}},render:function(C,a){return a.status==="pending"?Object(t.jsx)(i.a,{danger:!0,size:"small",type:"primary",onClick:function(){N(a.id)},children:Object(t.jsx)(n.a,{id:"disapprove",defaultMessage:"Disapprove"})}):a.status}}]},[]);return Object(t.jsxs)(L.a,{children:[Object(t.jsx)(ge,{term:X,onClose:function(){return ne(void 0)},onSuccess:function(){var C;return(C=j.current)===null||C===void 0?void 0:C.reload()}}),Object(t.jsx)(Ce,{id:E,onClose:function(){return N(void 0)},onSuccess:function(){var C;return(C=j.current)===null||C===void 0?void 0:C.reload()}}),Object(t.jsx)(l.a,{headerTitle:u.formatMessage({id:"menu.Other activities.Consultation Requests"}),search:{layout:"vertical"},actionRef:j,rowKey:"id",request:function(){var h=Object(O.a)(Object(s.a)().mark(function C(a,d){var M,se,Z,H,je,B,Oe,be,le,de;return Object(s.a)().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return M=a.pageSize,se=a.current,Z=a.consultation_id,H=a.status,je=a.user_id,B=a.is_coming,Oe=a.proposed_at_from,be=a.proposed_at_to,le=d&&Object.entries(d)[0],k.next=4,q({per_page:M,page:se,consultation_id:Z,status:H,user_id:je,is_coming:B,proposed_at_from:Oe,proposed_at_to:be,order_by:le&&le[0],order:le?le[1]==="ascend"?"ASC":"DESC":void 0});case 4:if(de=k.sent,de.success){k.next=7;break}return k.abrupt("return",{data:[],total:0,success:!1});case 7:return k.abrupt("return",{data:de.data,total:de.meta.total,success:!0});case 8:case"end":return k.stop()}},C)}));return function(C,a){return h.apply(this,arguments)}}(),columns:ce})]})},ye=$.default=Me},"4fRq":function(_,$){var e=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(e){var s=new Uint8Array(16);_.exports=function(){return e(s),s}}else{var O=new Array(16);_.exports=function(){for(var b=0,r;b<16;b++)(b&3)==0&&(r=Math.random()*4294967296),O[b]=r>>>((b&3)<<3)&255;return O}}},A6KM:function(_,$,e){"use strict";e.d($,"a",function(){return L});var s=e("OaEy"),O=e("2fM7"),o=e("T2oS"),b=e("W9HT"),r=e("oBTY"),i=e("tJVT"),P=e("q1tI"),v=e.n(P),m=e("H6aw"),w=e("EmS3"),x=e("Gb5Y"),p=e("9kvl"),I=e("nKUr"),S=e.n(I),n=function(T){return T.map(function(g){return"name"in g?{id:Number(g.id),name:g.name}:{id:Number(g.id),name:g.title?g.title:""}})},L=function(T){var g=T.value,K=T.onChange,A=T.multiple,q=A===void 0?!1:A,G=T.defaultValue,Q=T.modelType,U=Q===void 0?"COURSE":Q,ee=Object(P.useState)([]),V=Object(i.a)(ee,2),re=V[0],z=V[1],ve=Object(P.useState)(!1),me=Object(i.a)(ve,2),oe=me[0],te=me[1],c=Object(P.useRef)(),ue=Object(P.useCallback)(function(t){var f,R,W,Y;switch(U){case"COURSE":return Object(m.e)(t,{signal:c==null||(f=c.current)===null||f===void 0?void 0:f.signal});case"WEBINAR":return Object(w.f)(t,{signal:c==null||(R=c.current)===null||R===void 0?void 0:R.signal});case"CONSULTATIONS":return Object(x.b)(t,{signal:c==null||(W=c.current)===null||W===void 0?void 0:W.signal});default:return Object(m.e)(t,{signal:c==null||(Y=c.current)===null||Y===void 0?void 0:Y.signal})}},[U,c]),pe=Object(P.useCallback)(function(t){var f,R,W,Y;switch(U){case"COURSE":return Object(m.k)(Number(t),{signal:(f=c.current)===null||f===void 0?void 0:f.signal});case"WEBINAR":return Object(w.d)(Number(t),{signal:(R=c.current)===null||R===void 0?void 0:R.signal});case"CONSULTATIONS":return Object(x.e)(Number(t),{signal:(W=c.current)===null||W===void 0?void 0:W.signal});default:return Object(m.k)(Number(t),{signal:(Y=c.current)===null||Y===void 0?void 0:Y.signal})}},[U,c]),ie=Object(P.useCallback)(function(t){te(!0),c.current&&c.current.abort(),c.current=new AbortController,ue(t?{title:t}:{}).then(function(f){f.success&&z(n(f.data)),te(!1)}).catch(function(){return te(!1)})},[U]),fe=Object(P.useCallback)(function(t){ie(t)},[ie]);return Object(P.useEffect)(function(){return c.current=new AbortController,g&&pe(Number(g)).then(function(t){t&&t.success&&z(function(f){return[].concat(Object(r.a)(f),Object(r.a)(n([t.data])))})}),function(){c.current&&c.current.abort()}},[g,U]),Object(I.jsx)(O.a,{defaultValue:G,onFocus:function(){return ie()},allowClear:!0,style:{width:"100%"},value:g,onChange:K,mode:q?"multiple":void 0,showSearch:!0,onSearch:fe,placeholder:Object(I.jsx)(p.a,{id:"select_content",defaultMessage:"select_content"}),optionFilterProp:"children",filterOption:function(f,R){if(R&&R.children){var W;return(R==null||(W=R.children)===null||W===void 0?void 0:W.toString().toLowerCase().indexOf(f.toLowerCase()))>=0}return!0},notFoundContent:oe?Object(I.jsx)(b.a,{size:"small"}):null,optionLabelProp:"label",children:re.map(function(t){return Object(I.jsx)(O.a.Option,{value:t.id,label:t.name,children:t.name},t.id)})})}},EcEN:function(_,$,e){var s=e("xDdU"),O=e("xk4V"),o=O;o.v1=s,o.v4=O,_.exports=o},I2ZF:function(_,$){for(var e=[],s=0;s<256;++s)e[s]=(s+256).toString(16).substr(1);function O(o,b){var r=b||0,i=e;return[i[o[r++]],i[o[r++]],i[o[r++]],i[o[r++]],"-",i[o[r++]],i[o[r++]],"-",i[o[r++]],i[o[r++]],"-",i[o[r++]],i[o[r++]],"-",i[o[r++]],i[o[r++]],i[o[r++]],i[o[r++]],i[o[r++]],i[o[r++]]].join("")}_.exports=O},xDdU:function(_,$,e){var s=e("4fRq"),O=e("I2ZF"),o,b,r=0,i=0;function P(v,m,w){var x=m&&w||0,p=m||[];v=v||{};var I=v.node||o,S=v.clockseq!==void 0?v.clockseq:b;if(I==null||S==null){var n=s();I==null&&(I=o=[n[0]|1,n[1],n[2],n[3],n[4],n[5]]),S==null&&(S=b=(n[6]<<8|n[7])&16383)}var L=v.msecs!==void 0?v.msecs:new Date().getTime(),l=v.nsecs!==void 0?v.nsecs:i+1,T=L-r+(l-i)/1e4;if(T<0&&v.clockseq===void 0&&(S=S+1&16383),(T<0||L>r)&&v.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");r=L,i=l,b=S,L+=122192928e5;var g=((L&268435455)*1e4+l)%4294967296;p[x++]=g>>>24&255,p[x++]=g>>>16&255,p[x++]=g>>>8&255,p[x++]=g&255;var K=L/4294967296*1e4&268435455;p[x++]=K>>>8&255,p[x++]=K&255,p[x++]=K>>>24&15|16,p[x++]=K>>>16&255,p[x++]=S>>>8|128,p[x++]=S&255;for(var A=0;A<6;++A)p[x+A]=I[A];return m||O(p)}_.exports=P},xk4V:function(_,$,e){var s=e("4fRq"),O=e("I2ZF");function o(b,r,i){var P=r&&i||0;typeof b=="string"&&(r=b==="binary"?new Array(16):null,b=null),b=b||{};var v=b.random||(b.rng||s)();if(v[6]=v[6]&15|64,v[8]=v[8]&63|128,r)for(var m=0;m<16;++m)r[P+m]=v[m];return r||O(v)}_.exports=o},"yj/a":function(_,$,e){"use strict";var s=e("VTBJ"),O=e("Ff2n"),o=e("nKUr"),b=e.n(o),r=e("uX+g"),i=e("q1tI"),P=e.n(i),v=e("lS/g"),m=e("adzw"),w=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],x=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],p=P.a.forwardRef(function(l,T){var g=l.fieldProps,K=l.children,A=l.params,q=l.proFieldProps,G=l.mode,Q=l.valueEnum,U=l.request,ee=l.showSearch,V=l.options,re=Object(O.a)(l,w),z=Object(i.useContext)(v.b);return Object(o.jsx)(m.a,Object(s.a)(Object(s.a)({valueEnum:Object(r.a)(Q),request:U,params:A,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:Object(s.a)({options:V,mode:G,showSearch:ee,getPopupContainer:z.getPopupContainer},g),ref:T,proFieldProps:q},re),{},{children:K}))}),I=P.a.forwardRef(function(l,T){var g=l.fieldProps,K=l.children,A=l.params,q=l.proFieldProps,G=l.mode,Q=l.valueEnum,U=l.request,ee=l.options,V=Object(O.a)(l,x),re=Object(s.a)({options:ee,mode:G||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},g),z=Object(i.useContext)(v.b);return Object(o.jsx)(m.a,Object(s.a)(Object(s.a)({valueEnum:Object(r.a)(Q),request:U,params:A,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:Object(s.a)({getPopupContainer:z.getPopupContainer},re),ref:T,proFieldProps:q},V),{},{children:K}))}),S=p,n=I,L=S;L.SearchSelect=n,L.displayName="ProFormComponent",$.a=L}}]);

//# sourceMappingURL=p__ConsultationsAccess.6a31c26f.async.js.map