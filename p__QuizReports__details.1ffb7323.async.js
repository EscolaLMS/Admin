"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[7729,2803,8047],{91791:function(he,Q,s){s.r(Q),s.d(Q,{default:function(){return pe}});var P=s(15009),y=s.n(P),W=s(97857),S=s.n(W),L=s(99289),I=s.n(L),O=s(5574),h=s.n(O),G=s(26271),U=s(74453),H=s(75081),E=s(78957),F=s(25093),z=s(47221),v=s(67294),a=s(80854),w=s(3598),l=s(26412),A=s(60943),T=s(62235),C=s(45919),e=s(85893),N=function(i){var t,o,r=i.data;return(0,e.jsxs)(E.Z,{direction:"vertical",children:[(0,e.jsx)(F.Z.Text,{strong:!0,children:(0,e.jsx)(a.FormattedMessage,{id:"details",defaultMessage:"Details"})}),(0,e.jsxs)(l.Z,{style:{width:"100%"},bordered:!0,children:[(0,e.jsx)(l.Z.Item,{span:3,label:(0,e.jsx)(a.FormattedMessage,{id:"ID",defaultMessage:"ID"}),children:r.id}),(0,e.jsx)(l.Z.Item,{span:1.5,label:(0,e.jsx)(a.FormattedMessage,{id:"student",defaultMessage:"Student"}),children:(0,e.jsx)(T.Z,{type:"EscolaLms\\Core\\Models\\User",type_id:r.user_id,text:r!=null&&(t=r.user)!==null&&t!==void 0&&t.first_name&&r!==null&&r!==void 0&&(o=r.user)!==null&&o!==void 0&&o.last_name?"".concat(r.user.first_name," ").concat(r.user.last_name):void 0})}),(0,e.jsx)(l.Z.Item,{span:1.5,label:(0,e.jsx)(a.FormattedMessage,{id:"gift_quiz",defaultMessage:"GIFT Quiz"}),children:(0,e.jsx)(T.Z,{type:"EscolaLms\\TopicTypeGift\\Models\\GiftQuiz",type_id:r.topic_gift_quiz_id})}),(0,e.jsx)(l.Z.Item,{span:1.5,label:(0,e.jsx)(a.FormattedMessage,{id:"started_at",defaultMessage:"Started at Date"}),children:(0,A.WU)(new Date(r.started_at),C.Cu)}),(0,e.jsx)(l.Z.Item,{span:1.5,label:(0,e.jsx)(a.FormattedMessage,{id:"end_at",defaultMessage:"End at Date"}),children:r.end_at?(0,A.WU)(new Date(r.end_at),C.Cu):"-"}),(0,e.jsx)(l.Z.Item,{span:1.5,label:(0,e.jsx)(a.FormattedMessage,{id:"result_score",defaultMessage:"Result score"}),children:typeof r.result_score=="number"?r.result_score:"-"}),(0,e.jsx)(l.Z.Item,{span:1.5,label:(0,e.jsx)(a.FormattedMessage,{id:"max_score",defaultMessage:"Max score"}),children:r.max_score})]})]})},B=N,V=s(13769),$=s.n(V),J=s(52677),Y=s.n(J),K=s(47389),X=s(83062),k=s(14726),q=s(184),_=s(5966),ee=function(i){var t=i.answer,o=i.onClose,r=i.onSuccess,d=i.onError,f=(0,v.useCallback)(function(){var p=I()(y()().mark(function g(M){var j;return y()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if((t==null?void 0:t.id)!==void 0){u.next=2;break}return u.abrupt("return");case 2:return u.prev=2,u.next=5,(0,w.Sm)(t.id,M);case 5:if(j=u.sent,j.success){u.next=9;break}return d==null||d(j.errors),u.abrupt("return");case 9:r==null||r(j.data),u.next=15;break;case 12:u.prev=12,u.t0=u.catch(2),d==null||d(u.t0);case 15:case"end":return u.stop()}},g,null,[[2,12]])}));return function(g){return p.apply(this,arguments)}}(),[t==null?void 0:t.id]),m=(0,v.useMemo)(function(){return{score:t==null?void 0:t.score}},[t==null?void 0:t.score]);return(0,e.jsx)(q.a,{visible:!!t,initialValues:m,onVisibleChange:function(g){return!g&&(o==null?void 0:o())},onFinish:f,title:(0,e.jsx)(a.FormattedMessage,{id:"edit_score"}),drawerProps:{width:378,destroyOnClose:!0},children:(0,e.jsx)(_.Z,{name:"score",label:(0,e.jsx)(a.FormattedMessage,{id:"student_score"}),required:!0,rules:[{required:!0,message:(0,e.jsx)(a.FormattedMessage,{id:"field_required"})}]})})},te=["refreshData"],x=function(i){var t=i.children,o=i.openEditScoreFactory,r=i.answer;return(0,e.jsxs)(l.Z,{column:2,labelStyle:{fontWeight:"bold"},children:[(0,e.jsx)(l.Z.Item,{label:(0,e.jsxs)(E.Z,{align:"center",children:[(0,e.jsx)(a.FormattedMessage,{id:"student_score",defaultMessage:"Student score"}),(0,e.jsx)(X.Z,{title:(0,e.jsx)(a.FormattedMessage,{id:"edit_score"}),children:(0,e.jsx)(k.ZP,{type:"text",style:{width:22,height:22},icon:(0,e.jsx)(K.Z,{}),onClick:o(r)})})]}),children:r.score}),(0,e.jsx)(l.Z.Item,{contentStyle:{display:"flex",gap:"10px",flexWrap:"wrap"},label:(0,e.jsx)(a.FormattedMessage,{id:"student_answer",defaultMessage:"Student answer"}),children:t})]})};function se(n){return typeof(n==null?void 0:n.text)=="string"}function re(n){return Array.isArray(n==null?void 0:n.multiple)}function ae(n){return Y()(n==null?void 0:n.matching)==="object"}function ne(n){return typeof(n==null?void 0:n.numeric)=="number"}function ie(n){return typeof(n==null?void 0:n.bool)=="boolean"}var oe=function(i){var t=i.answerObj,o=i.openEditScoreFactory;if(!t)return(0,e.jsx)(F.Z.Paragraph,{style:{fontStyle:"italic"},children:(0,e.jsx)(a.FormattedMessage,{id:"student_didnt_answer",defaultMessage:"Student didn't answer this question"})});if(se(t.answer))return(0,e.jsx)(x,{openEditScoreFactory:o,answer:t,children:t.answer.text});if(re(t.answer))return(0,e.jsx)(x,{openEditScoreFactory:o,answer:t,children:t.answer.multiple.join(", ")});if(ae(t.answer)){var r=Object.entries(t.answer.matching).map(function(d){var f=h()(d,2),m=f[0],p=f[1];return"".concat(m," - ").concat(p!=null?p:"")});return(0,e.jsx)(x,{openEditScoreFactory:o,answer:t,children:r.map(function(d){return(0,e.jsx)(F.Z.Text,{style:{width:"max-content"},children:d},d)})})}return ne(t.answer)?(0,e.jsx)(x,{openEditScoreFactory:o,answer:t,children:t.answer.numeric}):ie(t.answer)?(0,e.jsx)(x,{openEditScoreFactory:o,answer:t,children:t.answer.bool?(0,e.jsx)(a.FormattedMessage,{id:"true_answer",defaultMessage:"True"}):(0,e.jsx)(a.FormattedMessage,{id:"false_answer",defaultMessage:"False"})}):(0,e.jsx)("pre",{children:"answer type not supported"})},le=function(i){var t=i.refreshData,o=$()(i,te),r=(0,v.useState)(),d=h()(r,2),f=d[0],m=d[1],p=(0,v.useCallback)(function(j){return function(){return m(j)}},[]),g=(0,v.useCallback)(function(){return m(void 0)},[]),M=(0,v.useCallback)(function(){t(),g()},[]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(oe,S()(S()({},o),{},{openEditScoreFactory:p})),(0,e.jsx)(ee,{answer:f,onSuccess:M,onClose:g})]})},de=le,Z=s(31472),ue=[Z.ce.MULTIPLE_CHOICE,Z.ce.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS],ce=function(i){var t=i.question;return(0,e.jsxs)(l.Z,{column:2,labelStyle:{fontWeight:"bold"},children:[(0,e.jsx)(l.Z.Item,{label:(0,e.jsx)(a.FormattedMessage,{id:"ID",defaultMessage:"ID"}),children:t.id}),(0,e.jsx)(l.Z.Item,{label:(0,e.jsx)(a.FormattedMessage,{id:"type",defaultMessage:"Type"}),children:(0,e.jsx)(a.FormattedMessage,{id:"gift_type.".concat(t.type)})}),t.title&&(0,e.jsx)(l.Z.Item,{label:(0,e.jsx)(a.FormattedMessage,{id:"title",defaultMessage:"Title"}),children:t.title}),(0,e.jsx)(l.Z.Item,{label:(0,e.jsx)(a.FormattedMessage,{id:"possible_score",defaultMessage:"Possible score"}),children:t.score}),ue.includes(t.type)&&(0,e.jsx)(l.Z.Item,{label:(0,e.jsx)(a.FormattedMessage,{id:"possible_answers",defaultMessage:"Possible answers"}),children:t.options.answers.join(", ")}),t.type===Z.ce.TRUE_FALSE&&(0,e.jsx)(l.Z.Item,{label:(0,e.jsx)(a.FormattedMessage,{id:"possible_answers",defaultMessage:"Possible answers"}),children:(0,e.jsx)(a.FormattedMessage,{id:"possible_true_false",defaultMessage:"True, False"})}),t.type===Z.ce.MATCHING&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(l.Z.Item,{label:(0,e.jsx)(a.FormattedMessage,{id:"matching_questions",defaultMessage:"Matching questions"}),children:t.options.sub_questions.join(", ")}),(0,e.jsx)(l.Z.Item,{label:(0,e.jsx)(a.FormattedMessage,{id:"matching_answers",defaultMessage:"Matching answers"}),children:t.options.sub_answers.join(", ")})]})]})},fe=ce;function ve(){var n=(0,a.useParams)(),i=n.reportId,t=(0,v.useState)(),o=h()(t,2),r=o[0],d=o[1],f=(0,v.useState)(),m=h()(f,2),p=m[0],g=m[1],M=(0,v.useState)(!1),j=h()(M,2),R=j[0],u=j[1],b=(0,v.useCallback)(I()(y()().mark(function ge(){var D;return y()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(i){c.next=2;break}return c.abrupt("return");case 2:return u(!0),c.prev=3,c.next=6,(0,w.Wb)(i);case 6:D=c.sent,D.success?d(D.data):g(D.errors),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(3),g(function(je){return S()(S()({},je),{},{message:["Error during fetching occurred!",c.t0]})});case 13:return c.prev=13,u(!1),c.finish(13);case 16:case"end":return c.stop()}},ge,null,[[3,10,13,16]])})),[i]);return(0,v.useEffect)(function(){b()},[b]),{data:r,error:p,loading:R,fetchQuizAttempt:b}}var me=function(){var i=ve(),t=i.data,o=i.error,r=i.loading,d=i.fetchQuizAttempt;return(0,e.jsx)(U._z,{title:(0,e.jsx)(a.FormattedMessage,{id:"quiz_report_details",defaultMessage:"Quiz Report Details"}),children:(0,e.jsxs)(G.ZP,{bodyStyle:{display:"flex",flexDirection:"column",gap:"20px"},children:[!t&&r&&(0,e.jsx)(H.Z,{}),!t&&o&&(0,e.jsx)("pre",{children:JSON.stringify(o)}),t&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(B,{data:t}),!!t.questions.length&&(0,e.jsxs)(E.Z,{direction:"vertical",children:[(0,e.jsx)(F.Z.Text,{strong:!0,children:(0,e.jsx)(a.FormattedMessage,{id:"questions",defaultMessage:"Questions"})}),(0,e.jsx)(z.Z,{style:{width:"100%"},children:t.questions.map(function(f){return(0,e.jsxs)(z.Z.Panel,{header:f.question,children:[(0,e.jsx)(fe,{question:f}),(0,e.jsx)(de,{refreshData:d,answerObj:t==null?void 0:t.answers.find(function(m){return m.topic_gift_question_id===f.id})})]},f.id)})})]})]})]})})},pe=me}}]);
