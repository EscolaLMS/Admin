(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[4254],{19411:function(T,c,e){"use strict";e.d(c,{ZP:function(){return _}});var P=e(15009),n=e.n(P),y=e(99289),l=e.n(y),f=e(17578),m=e(2800),a=e.n(m),E=e(67294),g=e(80854),M=e(85893),p=function(b){var d=b.attrs,i=d.href,t=i.split("/").pop();return(0,M.jsx)("p",{children:(0,M.jsx)("a",{rel:"noreferrer",href:i,target:"_blank",children:t})})},v=function(b){var d=b.value,i=b.onChange,t=b.directory,s=t===void 0?"/wysiwyg":t,o=(0,g.useIntl)();return(0,M.jsx)("div",{className:"form-wysiwyg-markdown",children:(0,M.jsx)(a(),{excludeBlockMenuItems:["Sketch"],embeds:[{matcher:function(){return!0},component:p}],uploadImage:function(){var r=l()(n()().mark(function u(D){var h,I;return n()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,f.ws)(D,s);case 2:if(h=A.sent,!h.success){A.next=8;break}if(!D.type.includes("image/")){A.next=7;break}return I=h.data[0].name.includes("/")?h.data[0].name:"".concat(s).concat(h.data[0].name),A.abrupt("return",(0,f.pV)(I,1e3));case 7:return A.abrupt("return",h.data[0].url);case 8:throw new Error("Error while uploading");case 9:case"end":return A.stop()}},u)}));return function(u){return r.apply(this,arguments)}}(),defaultValue:d||"",onChange:function(u){return i&&i(u())},placeholder:o.formatMessage({id:"wysiwyg_placeholder"})})})},_=v},74603:function(T,c,e){"use strict";e.r(c);var P=e(15009),n=e.n(P),y=e(97857),l=e.n(y),f=e(99289),m=e.n(f),a=e(5574),E=e.n(a),g=e(53893),M=e(78715),p=e(952),v=e(5966),_=e(52688),j=e(2453),b=e(74330),d=e(67294),i=e(19411),t=e(74453),s=e(81587),o=e(80854),r=e(85893);c.default=function(){var u=(0,o.useIntl)(),D=(0,o.useParams)(),h=D.page,I=h==="new",B=(0,d.useState)(),A=E()(B,2),L=A[0],K=A[1],$=p.ZP.useForm(),k=E()($,1),F=k[0],S=(0,d.useCallback)(m()(n()().mark(function U(){var w;return n()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,g.Md)(Number(h));case 2:w=O.sent,w.success&&K(l()(l()({},w.data),{},{content:w.data.content||""}));case 4:case"end":return O.stop()}},U)})),[h]);(0,d.useEffect)(function(){if(h==="new"){K({active:!1});return}S()},[h,S]);var G=(0,d.useMemo)(function(){return{onFinish:function(){var U=m()(n()().mark(function W(O){var R,x;return n()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(x=l()(l()({},O),{},{bio:O.bio?O.bio:void 0}),h!=="new"){C.next=8;break}return C.next=4,(0,g.D4)(x);case 4:R=C.sent,R.success&&o.history.push("/pages/".concat(R.data.id)),C.next=11;break;case 8:return C.next=10,(0,g.T$)(Number(h),x);case 10:R=C.sent;case 11:j.ZP.success(R.message);case 12:case"end":return C.stop()}},W)}));function w(W){return U.apply(this,arguments)}return w}(),initialValues:L}},[L,h]);return L?(0,r.jsx)(t._z,{title:I?(0,r.jsx)(o.FormattedMessage,{id:"new_page"}):(0,r.jsx)(o.FormattedMessage,{id:"edit_page"}),children:(0,r.jsx)(M.ZP,{children:(0,r.jsxs)(p.ZP,l()(l()({},G),{},{form:F,onValuesChange:function(w){w.title&&F.setFieldsValue({slug:(0,s.l)(w.title)})},children:[(0,r.jsxs)(p.ZP.Group,{children:[(0,r.jsx)(v.Z,{width:"md",name:"title",label:(0,r.jsx)(o.FormattedMessage,{id:"title"}),tooltip:(0,r.jsx)(o.FormattedMessage,{id:"title"}),placeholder:u.formatMessage({id:"title"}),required:!0}),(0,r.jsx)(v.Z,{width:"md",name:"slug",label:(0,r.jsx)(o.FormattedMessage,{id:"slug"}),tooltip:(0,r.jsx)(o.FormattedMessage,{id:"slug_tooltip"}),placeholder:u.formatMessage({id:"slug"}),disabled:!0,required:!0}),(0,r.jsx)(_.Z,{name:"active",label:(0,r.jsx)(o.FormattedMessage,{id:"is_active"})})]}),(0,r.jsx)(p.ZP.Item,{name:"content",label:(0,r.jsx)(o.FormattedMessage,{id:"content"}),tooltip:(0,r.jsx)(o.FormattedMessage,{id:"content_tooltip"}),valuePropName:"value",required:!0,children:(0,r.jsx)(i.ZP,{directory:"pages/".concat(h,"/wysiwyg")})})]}))})}):(0,r.jsx)(b.Z,{})}},17578:function(T,c,e){"use strict";e.d(c,{Od:function(){return b},QZ:function(){return E},ht:function(){return M},pV:function(){return j},ws:function(){return v}});var P=e(15009),n=e.n(P),y=e(97857),l=e.n(y),f=e(99289),m=e.n(f),a=e(80854);function E(i,t){return g.apply(this,arguments)}function g(){return g=m()(n()().mark(function i(t,s){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,a.request)("/api/admin/file/list",l()({method:"GET",params:t},s||{})));case 1:case"end":return r.stop()}},i)})),g.apply(this,arguments)}function M(i,t){return p.apply(this,arguments)}function p(){return p=m()(n()().mark(function i(t,s){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,a.request)("/api/admin/file/find",l()({method:"GET",params:t},s||{})));case 1:case"end":return r.stop()}},i)})),p.apply(this,arguments)}function v(i,t,s){return _.apply(this,arguments)}function _(){return _=m()(n()().mark(function i(t,s,o){var r;return n()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return r=new FormData,r.append("file[]",t),r.append("target",s),D.abrupt("return",(0,a.request)("/api/admin/file/upload",l()({method:"POST",data:r},o||{})));case 4:case"end":return D.stop()}},i)})),_.apply(this,arguments)}var j=function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/images/img?path=").concat(t,"&w=").concat(s)};function b(i,t){return d.apply(this,arguments)}function d(){return d=m()(n()().mark(function i(t,s){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,a.request)("/api/admin/file/delete",l()({method:"DELETE",data:{url:t}},s||{})));case 1:case"end":return r.stop()}},i)})),d.apply(this,arguments)}},53893:function(T,c,e){"use strict";e.d(c,{CT:function(){return d},D4:function(){return v},L1:function(){return E},Md:function(){return M},T$:function(){return j}});var P=e(15009),n=e.n(P),y=e(97857),l=e.n(y),f=e(99289),m=e.n(f),a=e(80854);function E(t,s){return g.apply(this,arguments)}function g(){return g=m()(n()().mark(function t(s,o){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,a.request)("/api/admin/pages",l()({method:"GET",useCache:!1,params:s},o||{})));case 1:case"end":return u.stop()}},t)})),g.apply(this,arguments)}function M(t,s){return p.apply(this,arguments)}function p(){return p=m()(n()().mark(function t(s,o){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,a.request)("/api/admin/pages/".concat(s),l()({method:"GET"},o||{})));case 1:case"end":return u.stop()}},t)})),p.apply(this,arguments)}function v(t,s){return _.apply(this,arguments)}function _(){return _=m()(n()().mark(function t(s,o){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,a.request)("/api/admin/pages",l()({method:"POST",headers:{"Content-Type":"application/json"},data:s},o||{})));case 1:case"end":return u.stop()}},t)})),_.apply(this,arguments)}function j(t,s,o){return b.apply(this,arguments)}function b(){return b=m()(n()().mark(function t(s,o,r){return n()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.abrupt("return",(0,a.request)("/api/admin/pages/".concat(s),l()({method:"PATCH",headers:{"Content-Type":"application/json"},data:o},r||{})));case 1:case"end":return D.stop()}},t)})),b.apply(this,arguments)}function d(t,s){return i.apply(this,arguments)}function i(){return i=m()(n()().mark(function t(s,o){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,a.request)("/api/admin/pages/".concat(s),l()({method:"DELETE",headers:{"Content-Type":"application/json"}},o||{})));case 1:case"end":return u.stop()}},t)})),i.apply(this,arguments)}},81587:function(T,c,e){"use strict";e.d(c,{l:function(){return P}});var P=function(y){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"-",f=y.toString().toLowerCase().trim(),m=[{to:"a",from:"[\xC0\xC1\xC2\xC3\xC5\xC6\u0100\u0102\u0104\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6]"},{to:"ae",from:"[\xC4]"},{to:"c",from:"[\xC7\u0106\u0108\u010C]"},{to:"d",from:"[\xD0\u010E\u0110\xDE]"},{to:"e",from:"[\xC8\xC9\xCA\xCB\u0112\u0114\u0116\u0118\u011A\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6]"},{to:"g",from:"[\u011C\u011E\u0122\u01F4]"},{to:"h",from:"[\u0124\u1E26]"},{to:"i",from:"[\xCC\xCD\xCE\xCF\u0128\u012A\u012E\u0130\u1EC8\u1ECA]"},{to:"j",from:"[\u0134]"},{to:"ij",from:"[\u0132]"},{to:"k",from:"[\u0136]"},{to:"l",from:"[\u0139\u013B\u013D\u0141]"},{to:"m",from:"[\u1E3E]"},{to:"n",from:"[\xD1\u0143\u0145\u0147]"},{to:"o",from:"[\xD2\xD3\xD4\xD5\xD8\u014C\u014E\u0150\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u01EA\u01EC\u01A0]"},{to:"oe",from:"[\u0152\xD6]"},{to:"p",from:"[\u1E55]"},{to:"r",from:"[\u0154\u0156\u0158]"},{to:"s",from:"[\u015A\u015C\u015E\u0160]"},{to:"ss",from:"[\xDF]"},{to:"t",from:"[\u0162\u0164]"},{to:"u",from:"[\xD9\xDA\xDB\u0168\u016A\u016C\u016E\u0170\u0172\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u01AF]"},{to:"ue",from:"[\xDC]"},{to:"w",from:"[\u1E82\u0174\u1E80\u1E84]"},{to:"x",from:"[\u1E8D]"},{to:"y",from:"[\xDD\u0176\u0178\u1EF2\u1EF4\u1EF6\u1EF8]"},{to:"z",from:"[\u0179\u017B\u017D]"},{to:"-",from:"[\xB7/_,:;']"}];return m.forEach(function(a){f=f.replace(new RegExp(a.from,"gi"),a.to)}),f=f.toString().toLowerCase().replace(/\s+/g,"-").replace(/&/g,"-and-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),typeof l!="undefined"&&l!=="-"&&(f=f.replace(/-/g,l)),f}},20640:function(T,c,e){"use strict";var P=e(11742),n={"text/plain":"Text","text/html":"Url",default:"Text"},y="Copy to clipboard: #{key}, Enter";function l(m){var a=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return m.replace(/#{\s*key\s*}/g,a)}function f(m,a){var E,g,M,p,v,_,j=!1;a||(a={}),E=a.debug||!1;try{M=P(),p=document.createRange(),v=document.getSelection(),_=document.createElement("span"),_.textContent=m,_.ariaHidden="true",_.style.all="unset",_.style.position="fixed",_.style.top=0,_.style.clip="rect(0, 0, 0, 0)",_.style.whiteSpace="pre",_.style.webkitUserSelect="text",_.style.MozUserSelect="text",_.style.msUserSelect="text",_.style.userSelect="text",_.addEventListener("copy",function(d){if(d.stopPropagation(),a.format)if(d.preventDefault(),typeof d.clipboardData=="undefined"){E&&console.warn("unable to use e.clipboardData"),E&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var i=n[a.format]||n.default;window.clipboardData.setData(i,m)}else d.clipboardData.clearData(),d.clipboardData.setData(a.format,m);a.onCopy&&(d.preventDefault(),a.onCopy(d.clipboardData))}),document.body.appendChild(_),p.selectNodeContents(_),v.addRange(p);var b=document.execCommand("copy");if(!b)throw new Error("copy command was unsuccessful");j=!0}catch(d){E&&console.error("unable to copy using execCommand: ",d),E&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(a.format||"text",m),a.onCopy&&a.onCopy(window.clipboardData),j=!0}catch(i){E&&console.error("unable to copy using clipboardData: ",i),E&&console.error("falling back to prompt"),g=l("message"in a?a.message:y),window.prompt(g,m)}}finally{v&&(typeof v.removeRange=="function"?v.removeRange(p):v.removeAllRanges()),_&&document.body.removeChild(_),M()}return j}T.exports=f},11742:function(T){T.exports=function(){var c=document.getSelection();if(!c.rangeCount)return function(){};for(var e=document.activeElement,P=[],n=0;n<c.rangeCount;n++)P.push(c.getRangeAt(n));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return c.removeAllRanges(),function(){c.type==="Caret"&&c.removeAllRanges(),c.rangeCount||P.forEach(function(y){c.addRange(y)}),e&&e.focus()}}}}]);

//# sourceMappingURL=p__Pages__form.6da87253.async.js.map