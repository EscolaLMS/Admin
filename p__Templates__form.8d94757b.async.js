(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{10:function(K,E){},"1f8b":function(K,E,i){},8:function(K,E){},9:function(K,E){},BOG6:function(K,E,i){"use strict";i.r(E);var G=i("DYRE"),H=i("zeV3"),Ae=i("tU7J"),T=i("wFql"),Z=i("+BJd"),oe=i("mr32"),se=i("/zsF"),ae=i("PArb"),ce=i("T2oS"),ve=i("W9HT"),le=i("miYZ"),me=i("tsqr"),z=i("9og8"),N=i("tJVT"),J=i("oBTY"),Q=i("jrin"),y=i("k1fw"),he=i("WmNS"),P=i.n(he),c=i("q1tI"),g=i.n(c),F=i("VMEa"),I=i("Qurx"),p=i("yj/a"),ee=i("tneF"),Ue=i("nhC9"),re=i("rWUb"),$e=i("tMyG"),Gt=i("fOrg"),Te=i("+KLJ"),Ht=i("+L6B"),M=i("2/Rp"),m=i("9kvl"),e=i("nKUr"),Ge=function(r){var t=r.disabled,a=t===void 0?!1:t,n=r.id,o=r.onPreviewData,d=Object(c.useState)({state:"ready"}),v=Object(N.a)(d,2),u=v[0],b=v[1],h=Object(c.useCallback)(function(){b({state:"loading"}),Object(re.c)(n).then(function(s){s.success?(o&&o(s.data),s.data.sent&&s.data.to?b({state:"loaded",data:s.data,message:"email sent to ".concat(s.data.to)}):s.data.url?b({state:"loaded",data:s.data,message:Object(e.jsxs)(g.a.Fragment,{children:["Download"," ",Object(e.jsx)("a",{target:"_blank",href:s.data.url,children:s.data.filename})]})}):b({state:"loaded",data:s.data,message:s.message})):b({state:"error",error:s.message})}).catch(function(){b({state:"error",error:"error"})})},[n]);return Object(e.jsxs)(g.a.Fragment,{children:[Object(e.jsx)(M.a,{type:"primary",loading:u.state==="loading",disabled:a,onClick:h,children:Object(e.jsx)(m.a,{id:"preview"})}),u.state==="loaded"&&Object(e.jsx)(Te.a,{message:u.message,type:"success",closable:!0,onClose:function(){return b({state:"ready"})}}),u.state==="error"&&Object(e.jsx)(Te.a,{message:u.error,type:"error",closable:!0,onClose:function(){return b({state:"ready"})}})]})},He=Ge,Je=i("Ty5D"),fe=i("BiO0"),Jt=i("14J3"),W=i("BMrR"),Kt=i("jCWc"),x=i("kPKH"),ue=i("QDO1"),S=i("LvDl"),ke=i("i680"),zt=i("ZEwP"),Ke=function(r){var t=r.svgDef,a=r.width,n=r.height;return Object(c.useEffect)(function(){var o=new ke.e("l","px",[a,n]),d=new DOMParser,v=d.parseFromString(t,"image/svg+xml"),u=v.documentElement.querySelector("rect");u&&(u.setAttribute("width",a+"px"),u.setAttribute("height",n+"px")),o.svg(v.documentElement).then(function(){o.save("myPDF.pdf")})},[t]),Object(e.jsx)("div",{})},ze=function(r){var t=r.initialValue,a=r.width,n=a===void 0?842:a,o=r.height,d=o===void 0?592:o,v=r.onRendered,u=Object(ue.b)(),b=u.onReady,h=function(O){if(t)try{var k=JSON.parse(t);O.loadFromJSON(k,function(){var f=O.toSVG(),j=new ke.e("l","px",[n,d]),V=new DOMParser,B=V.parseFromString(f,"image/svg+xml");j.svg(B.documentElement).then(function(){j.save("myPDF.pdf"),v()})})}catch(f){}b(O)};return Object(e.jsx)("div",{className:"fakeA4",style:{width:n,height:d},children:Object(e.jsx)(ue.a,{className:"fakeA4-canvas",onReady:h})})},Qe=Ke,Ye=i("fWQN"),Ze=i("mtLc"),ge=i("epSk"),Xe=/^rgb\((((((((1?[1-9]?\d)|10\d|(2[0-4]\d)|25[0-5]),\s?)){2}|((((1?[1-9]?\d)|10\d|(2[0-4]\d)|25[0-5])\s)){2})((1?[1-9]?\d)|10\d|(2[0-4]\d)|25[0-5]))|((((([1-9]?\d(\.\d+)?)|100|(\.\d+))%,\s?){2}|((([1-9]?\d(\.\d+)?)|100|(\.\d+))%\s){2})(([1-9]?\d(\.\d+)?)|100|(\.\d+))%))\)$/i,qe=/^rgba\((((((((1?[1-9]?\d)|10\d|(2[0-4]\d)|25[0-5]),\s?)){3})|(((([1-9]?\d(\.\d+)?)|100|(\.\d+))%,\s?){3}))|(((((1?[1-9]?\d)|10\d|(2[0-4]\d)|25[0-5])\s){3})|(((([1-9]?\d(\.\d+)?)|100|(\.\d+))%\s){3}))\/\s)((0?\.\d+)|[01]|(([1-9]?\d(\.\d+)?)|100|(\.\d+))%)\)$/i,Pe=function(r){return Object(S.isString)(r)&&Xe.test(r)},Ie=function(r){return Object(S.isString)(r)&&qe.test(r)};function _e(l){if(!Pe(l))return l;var r=function(n){var o=n.indexOf(",")>-1?",":" ";return n.substr(4).split(")")[0].split(o)},t=function(n){var o=n.indexOf("%")>-1?Math.round(+n.substr(0,n.length-1)/100*255).toString(16):(+n).toString(16);return o.length===1?"0"+o:o};return"#"+r(l).map(t).join("")}function et(l){if(!Ie(l))return l;var r=function(n){var o=n.indexOf(",")>-1?",":" ",d=n.substr(5).split(")")[0].split(o);return d.indexOf("/")>-1&&d.splice(3,1),d},t=function(n,o){var d=n.substr(0,n.length-1)/100,v=n.indexOf("%")>-1||o===3?Math.round(d*255).toString(16):(+n).toString(16);return v.length===1?"0"+v:v};return"#"+r(l).map(t).join("")}function Be(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return Object(S.isString)(l)?Pe(l)?_e(l):Ie(l)?et(l):l:l}var Oe=function(r){return!!r.getSelectionStyles&&!!r.isEditing},de=function(r){if(Object(S.isString)(r)){if(r==="false")return!1;if(r==="true")return!0;if(!Object(S.isNaN)(r))return!!+r}return!!r},pe=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#ffffff00",a=Be(r);return Object(S.isString)(a)?a===""?t:a:t},tt=function(r){return r==="text"||r==="i-text"||r==="textbox"},at=["fontFamily","fontSize","lineHeight","textAlign","bold","italic","underline","linethrough","overline","fill","textBackgroundColor","backgroundColor","opacity","stroke","strokeWidth","text"],we=["fontFamily","fontSize","bold","fontWeight","italic","fontStyle","underline","linethrough","overline","fill","textBackgroundColor","stroke","strokeWidth"],rt=["Arial","Times New Roman","Helvetica","Myriad Pro","Delicious","Verdana","Georgia","Courier","Comic Sans MS","Impact","Monaco","Optima","Hoefler Text","Plaster","Engagement"],nt=["Left","Center","Right","Justify"],it=Object(J.a)(Array(120)).map(function(l,r){return r+1}),ot=Object(J.a)(Array(6)).map(function(l,r){return r}),st=Object(J.a)(Array(15)).map(function(l,r){return r}),ct=Object(J.a)(Array(15)).map(function(l,r){return r}),lt=Object(J.a)(Array(6)).map(function(l,r){return r}),ut=function(){function l(r){Object(Ye.a)(this,l),this.editor=void 0,this.editor=r}return Object(Ze.a)(l,[{key:"canvas",get:function(){return this.editor.canvas}},{key:"activeObject",get:function(){return this.editor.canvas.getActiveObject()}},{key:"addIText",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"sample itext",a=new ge.fabric.IText(t);this.canvas.add(a)}},{key:"addTextbox",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"sample itextbox",a=new ge.fabric.Textbox(t);this.canvas.add(a)}},{key:"addVariable",value:function(t){if(this.activeObject&&tt(this.activeObject.type)&&Oe(this.activeObject)){var a=this.getForActive("text"),n=this.activeObject.selectionEnd||a.length-1;this.setForActive("text","".concat(a.substring(0,n)," ").concat(t," ").concat(a.substring(n)));return}this.addTextbox(t)}},{key:"addCircle",value:function(){this.editor.addCircle()}},{key:"addRectangle",value:function(){this.editor.addRectangle()}},{key:"addLine",value:function(){this.editor.addLine()}},{key:"addFile",value:function(t){var a=this;ge.fabric.Image.fromURL(t,function(n){n.set({left:0,top:0});var o=(a.canvas.width||1)/(n.width||1),d=(a.canvas.height||1)/(n.height||1),v=Math.min(o,d);v<1&&n.scale(v),a.canvas.add(n)})}},{key:"getEditorBackgroundColor",value:function(){return pe(this.canvas.backgroundColor)}},{key:"setEditorBackgroundColor",value:function(t){var a=this;return this.canvas.setBackgroundColor(pe(t,""),function(){a.canvas.requestRenderAll()})}},{key:"deleteAll",value:function(){var t=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.canvas.getObjects().forEach(function(n){return t.canvas.remove(n)}),this.canvas.discardActiveObject(),a&&this.setEditorBackgroundColor("#ffffff00"),this.canvas.requestRenderAll()}},{key:"deleteSelected",value:function(){var t=this;this.canvas.getActiveObjects().forEach(function(a){return t.canvas.remove(a)}),this.canvas.discardActiveObject(),this.canvas.requestRenderAll()}},{key:"getForActive",value:function(t){switch(t){case"opacity":return this.getOpacity();case"textAlign":return this.getTextAlign();case"fontFamily":return this.getFontFamily();case"fill":case"stroke":case"backgroundColor":case"textBackgroundColor":return this.getColorProp(t);case"bold":return this.getBold();case"italic":return this.getItalic();case"underline":case"linethrough":case"overline":return this.getBoolean(t);case"strokeWidth":case"fontSize":case"lineHeight":return this.getProp(t);default:return this.getProp(t)}}},{key:"setForActive",value:function(t,a){switch(t){case"opacity":return this.setOpacity(a);case"textAlign":case"fontFamily":return this.setLowerCaseProp(t,a);case"strokeWidth":case"fontSize":return this.setIntProp(t,a);case"lineHeight":return this.setFloatProp(t,a);case"fill":case"stroke":case"backgroundColor":case"textBackgroundColor":return this.setColorProp(t,a);case"bold":return this.setBold(a);case"italic":return this.setItalic(a);case"underline":case"linethrough":case"overline":return this.setBoolean(t,a);default:return this.setProp(t,a)}}},{key:"getProp",value:function(t){var a,n,o,d,v,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.activeObject;return u?!we.includes(t)||!Oe(u)||!u.getSelectionStyles().length?(a=u[t])!==null&&a!==void 0?a:"":(n=(o=(d=u.getSelectionStyles())===null||d===void 0||(v=d[0])===null||v===void 0?void 0:v[t])!==null&&o!==void 0?o:u[t])!==null&&n!==void 0?n:"":""}},{key:"setProp",value:function(t,a){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.activeObject;!n||(!we.includes(t)||!Oe(n)||!n.getSelectionStyles().length?n.set(t,a):n.setSelectionStyles(Object(Q.a)({},t,a)),this.canvas.requestRenderAll())}},{key:"setIntProp",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(Object(S.isString)(a)&&!Object(S.isNaN)(a)||Object(S.isNumber)(a))return this.setProp(t,parseInt(a+"",10));console.error("".concat(a," is not ").concat(t," value"))}},{key:"setFloatProp",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(Object(S.isString)(a)&&!Object(S.isNaN)(a)||Object(S.isNumber)(a))return this.setProp(t,parseFloat(a+""));console.error("".concat(a," is not ").concat(t," value"))}},{key:"getBoolean",value:function(t){return de(this.getProp(t))}},{key:"setBoolean",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.setProp(t,de(a))}},{key:"setLowerCaseProp",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(Object(S.isString)(a))return this.setProp(t,a.toLowerCase());console.error("".concat(a," is not ").concat(t," value"))}},{key:"getColorProp",value:function(t,a){return pe(this.getProp(t),a)}},{key:"setColorProp",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return this.setProp(t,Be(a))}},{key:"getOpacity",value:function(){return+this.getProp("opacity")*100}},{key:"setOpacity",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"100";if(Object(S.isString)(t)&&!Object(S.isNaN)(t)||Object(S.isNumber)(t))return this.setProp("opacity",+t/100);console.error("".concat(t," is not opacity value"))}},{key:"getTextAlign",value:function(){var t=this.getProp("textAlign").toLowerCase();return t===""?"left":t}},{key:"getFontFamily",value:function(){return this.getProp("fontFamily").toLowerCase()}},{key:"getBold",value:function(){return this.getProp("fontWeight")==="bold"}},{key:"setBold",value:function(t){this.setProp("fontWeight",de(t)?"bold":"")}},{key:"getItalic",value:function(){return this.getProp("fontStyle")==="italic"}},{key:"setItalic",value:function(t){this.setProp("fontStyle",de(t)?"italic":"")}}]),l}(),Qt=i("P2fV"),Me=i("NJEC"),Ne=i("Lyp1"),Yt=i("5NDa"),R=i("5rEg"),Zt=i("y8nQ"),xe=i("Vl3Y"),Xt=i("1f8b"),Re=function(r){return Object(S.toNumber)(r)===1?"":("0"+ +r*100).slice(-2)},dt=function(r){var t=r.className,a=t===void 0?"":t,n=r.name,o=r.value,d=r.onChange,v=r.label,u=r.style,b=Object(c.useMemo)(function(){return o&&o.length===9?[o.substring(0,7),+o.substring(7,9)/100]:[o,1]},[o]),h=Object(N.a)(b,2),s=h[0],O=h[1],k=Object(c.useCallback)(function(j){d(j.currentTarget.value+Re(O))},[d,O]),f=Object(c.useCallback)(function(j){d(s+Re(j.currentTarget.value))},[d,s]);return Object(e.jsx)("div",{className:"input-color ".concat(a),style:u,children:Object(e.jsx)(xe.a.Item,{label:v,children:Object(e.jsxs)(R.a.Group,{className:"input-color__container",size:"small",children:[Object(e.jsx)(R.a,{className:"input-color__color",name:n,value:s,onChange:k,type:"color"}),Object(e.jsx)(R.a,{className:"input-color__opacity",name:n+"Alpha",value:O,onChange:f,type:"range",min:"0",max:"1",step:"0.1"})]})})})},Y=dt,ye=i("PpiC"),bt=function(r){var t=r.value,a=r.onChange,n=r.label,o=r.name,d=r.type,v=d===void 0?"text":d,u=r.style,b=Object(ye.a)(r,["value","onChange","label","name","type","style"]),h=Object(c.useCallback)(function(s){a(s.currentTarget.value)},[a]);return Object(e.jsx)(xe.a.Item,{label:n,children:Object(e.jsx)(R.a,Object(y.a)({name:o,value:t,onChange:h,type:v,style:u},b))})},ne=bt,qt=i("OaEy"),De=i("2fM7"),jt=De.a.Option,vt=function(r){var t=r.value,a=r.onChange,n=r.label,o=r.name,d=r.options,v=d===void 0?[]:d,u=r.style,b=Object(ye.a)(r,["value","onChange","label","name","options","style"]);return Object(e.jsx)(xe.a.Item,{label:n,children:Object(e.jsx)(De.a,Object(y.a)(Object(y.a)({value:t,onChange:a,style:u},b),{},{children:v.map(function(h){return Object(e.jsx)(jt,{value:h.value,children:h.label},h.value)})}))})},_=vt,_t=i("sRBo"),mt=i("kaz8"),ht=function(r){var t=r.value,a=r.onChange,n=r.label,o=r.name,d=Object(ye.a)(r,["value","onChange","label","name"]),v=Object(c.useCallback)(function(u){a(u.target.checked)},[a]);return Object(e.jsx)(mt.a,Object(y.a)(Object(y.a)({name:o,value:t,checked:t,onChange:v},d),{},{children:n}))},ie=ht,ft=function(r){var t=r.values,a=r.onChange,n=Object(m.i)();return Object(e.jsxs)("div",{className:"fabric-editor__form fabric-editor__form--active-element",children:[Object(e.jsx)("h3",{className:"fabric-editor__form-title",children:Object(e.jsx)(m.a,{id:"fabric.text_options"})}),Object(e.jsxs)(W.a,{gutter:5,children:[Object(e.jsxs)(x.a,{children:[Object(e.jsxs)(W.a,{gutter:5,children:[Object(e.jsx)(x.a,{children:Object(e.jsxs)(R.a.Group,{compact:!0,children:[Object(e.jsx)(_,{value:t.fontFamily,onChange:a("fontFamily"),label:n.formatMessage({id:"fabric.font_family"}),name:"fontFamily",options:rt.map(function(o){return{value:o.toLowerCase(),label:o}}),style:{minWidth:"180px"}}),Object(e.jsx)(_,{value:t.fontSize,onChange:a("fontSize"),label:n.formatMessage({id:"fabric.font_size"}),name:"fontSize",options:it.map(function(o){return{value:o,label:""+o}}),style:{minWidth:"75px"}})]})}),Object(e.jsx)(x.a,{children:Object(e.jsxs)(R.a.Group,{compact:!0,children:[Object(e.jsx)(_,{value:t.textAlign,onChange:a("textAlign"),label:n.formatMessage({id:"fabric.text_align"}),name:"textAlign",options:nt.map(function(o){return{value:o.toLowerCase(),label:o}}),style:{minWidth:"180px"}}),Object(e.jsx)(ne,{value:t.lineHeight,onChange:a("lineHeight"),label:n.formatMessage({id:"fabric.line_height"}),name:"lineHeight",type:"number",min:"0",max:"10",step:"0.1",style:{minWidth:"75px"}})]})})]}),Object(e.jsx)(R.a.Group,{style:{marginBottom:"15px"},children:Object(e.jsxs)(W.a,{gutter:5,children:[Object(e.jsx)(x.a,{children:Object(e.jsx)(ie,{value:t.bold,onChange:a("bold"),label:n.formatMessage({id:"fabric.bold"}),name:"bold"})}),Object(e.jsx)(x.a,{children:Object(e.jsx)(ie,{value:t.italic,onChange:a("italic"),label:n.formatMessage({id:"fabric.italic"}),name:"italic"})}),Object(e.jsx)(x.a,{children:Object(e.jsx)(ie,{value:t.underline,onChange:a("underline"),label:n.formatMessage({id:"fabric.underline"}),name:"underline"})}),Object(e.jsx)(x.a,{children:Object(e.jsx)(ie,{value:t.linethrough,onChange:a("linethrough"),label:n.formatMessage({id:"fabric.linethrough"}),name:"linethrough"})}),Object(e.jsx)(x.a,{children:Object(e.jsx)(ie,{value:t.overline,onChange:a("overline"),label:n.formatMessage({id:"fabric.overline"}),name:"overline"})})]})})]}),Object(e.jsxs)(x.a,{children:[Object(e.jsx)(R.a.Group,{children:Object(e.jsxs)(W.a,{gutter:10,children:[Object(e.jsx)(x.a,{children:Object(e.jsx)(Y,{value:t.fill,onChange:a("fill"),label:n.formatMessage({id:"fabric.text_color"}),name:"fill"})}),Object(e.jsx)(x.a,{children:Object(e.jsx)(Y,{value:t.textBackgroundColor,onChange:a("textBackgroundColor"),label:n.formatMessage({id:"fabric.text_background"}),name:"textBackgroundColor"})}),Object(e.jsx)(x.a,{children:Object(e.jsx)(Y,{value:t.backgroundColor,onChange:a("backgroundColor"),label:n.formatMessage({id:"fabric.background_color"}),name:"backgroundColor"})})]})}),Object(e.jsxs)(W.a,{gutter:10,children:[Object(e.jsx)(x.a,{children:Object(e.jsxs)(R.a.Group,{compact:!0,children:[Object(e.jsx)(Y,{value:t.stroke,onChange:a("stroke"),label:n.formatMessage({id:"fabric.stroke_color"}),name:"stroke"}),Object(e.jsx)(_,{value:t.strokeWidth,onChange:a("strokeWidth"),label:n.formatMessage({id:"fabric.stroke_width"}),name:"strokeWidth",options:ot.map(function(o){return{value:o,label:""+o}}),style:{minWidth:"65px"}})]})}),Object(e.jsx)(x.a,{children:Object(e.jsx)(ne,{value:t.opacity,onChange:a("opacity"),label:"Opacity",name:"opacity",type:"range"})})]})]})]})]})},gt=ft,Ot=function(r){var t=r.values,a=r.onChange,n=Object(m.i)();return Object(e.jsxs)("div",{className:"fabric-editor__form fabric-editor__form--active-element",children:[Object(e.jsx)("h3",{className:"fabric-editor__form-title",children:Object(e.jsx)(m.a,{id:"fabric.object_options"})}),Object(e.jsxs)(W.a,{gutter:20,children:[Object(e.jsx)(x.a,{children:Object(e.jsx)(Y,{value:t.fill,onChange:a("fill"),label:n.formatMessage({id:"fabric.background_color"}),name:"fill"})}),Object(e.jsx)(x.a,{children:Object(e.jsxs)(W.a,{gutter:10,children:[Object(e.jsx)(x.a,{children:Object(e.jsxs)(R.a.Group,{compact:!0,children:[Object(e.jsx)(Y,{value:t.stroke,onChange:a("stroke"),label:n.formatMessage({id:"fabric.stroke_color"}),name:"stroke"}),Object(e.jsx)(_,{value:t.strokeWidth,onChange:a("strokeWidth"),label:n.formatMessage({id:"fabric.stroke_width"}),name:"strokeWidth",options:lt.map(function(o){return{value:o,label:""+o}}),style:{minWidth:"65px"}})]})}),Object(e.jsx)(x.a,{children:Object(e.jsx)(ne,{value:t.opacity,onChange:a("opacity"),label:"Opacity",name:"opacity",type:"range"})})]})})]})]})},pt=Ot,xt=function(r){var t=r.values,a=r.onChange,n=Object(m.i)();return Object(e.jsxs)("div",{className:"fabric-editor__form fabric-editor__form--active-element",children:[Object(e.jsx)("h3",{className:"fabric-editor__form-title",children:Object(e.jsx)(m.a,{id:"fabric.image_options"})}),Object(e.jsxs)(W.a,{gutter:10,children:[Object(e.jsx)(x.a,{children:Object(e.jsxs)(R.a.Group,{compact:!0,children:[Object(e.jsx)(Y,{value:t.stroke,onChange:a("stroke"),label:n.formatMessage({id:"fabric.stroke_color"}),name:"stroke"}),Object(e.jsx)(_,{value:t.strokeWidth,onChange:a("strokeWidth"),label:n.formatMessage({id:"fabric.stroke_width"}),name:"strokeWidth",options:st.map(function(o){return{value:o,label:""+o}}),style:{minWidth:"65px"}})]})}),Object(e.jsx)(x.a,{children:Object(e.jsx)(ne,{value:t.opacity,onChange:a("opacity"),label:"Opacity",name:"opacity",type:"range"})})]})]})},yt=xt,Ct=function(r){var t=r.values,a=r.onChange,n=Object(m.i)();return Object(e.jsxs)("div",{className:"fabric-editor__form fabric-editor__form--active-element",children:[Object(e.jsx)("h3",{className:"fabric-editor__form-title",children:Object(e.jsx)(m.a,{id:"fabric.line_options"})}),Object(e.jsxs)(W.a,{gutter:10,children:[Object(e.jsx)(x.a,{children:Object(e.jsxs)(R.a.Group,{compact:!0,children:[Object(e.jsx)(Y,{value:t.stroke,onChange:a("stroke"),label:n.formatMessage({id:"fabric.line_color"}),name:"stroke"}),Object(e.jsx)(_,{value:t.strokeWidth,onChange:a("strokeWidth"),label:n.formatMessage({id:"fabric.stroke_width"}),name:"strokeWidth",options:ct.map(function(o){return{value:o,label:""+o}}),style:{minWidth:"65px"}})]})}),Object(e.jsx)(x.a,{children:Object(e.jsx)(ne,{value:t.opacity,onChange:a("opacity"),label:"Opacity",name:"opacity",type:"range"})})]})]})},Ft=Ct,Et=function(r){var t=r.editorController,a=r.activeObject,n=Object(c.useCallback)(function(){return Object.fromEntries(at.map(function(s){return[s,t.getForActive(s)]}))},[t]),o=Object(c.useState)(n()),d=Object(N.a)(o,2),v=d[0],u=d[1];Object(c.useEffect)(function(){u(n());var s=function(){u(n())};return a&&a.on&&(a.on("selection:changed",s),a.on("editing:exited",s)),function(){a&&a.off&&(a.off("selection:changed",s),a.off("editing:exited",s))}},[n,a]);var b=Object(c.useCallback)(function(s){return function(O){u(Object(y.a)(Object(y.a)({},v),{},Object(Q.a)({},s,O))),t==null||t.setForActive(s,O)}},[v,t]),h=function(O){switch(O){case"text":case"i-text":case"textbox":return Object(e.jsx)(gt,{values:v,onChange:b});case"image":return Object(e.jsx)(yt,{values:v,onChange:b});case"line":return Object(e.jsx)(Ft,{values:v,onChange:b});default:return Object(e.jsx)(pt,{values:v,onChange:b})}};return Object(e.jsx)(e.Fragment,{children:a&&Object(e.jsxs)(e.Fragment,{children:[h(a.type),Object(e.jsx)("hr",{}),Object(e.jsx)(Me.a,{title:"Are you sure you want to delete object?",icon:Object(e.jsx)(Ne.a,{style:{color:"red"}}),onConfirm:function(){return t==null?void 0:t.deleteSelected()},children:Object(e.jsx)(M.a,{type:"primary",danger:!0,htmlType:"button",children:Object(e.jsx)(m.a,{id:"fabric.remove"})})})]})})},St=Et,ea=i("qVdP"),We=i("jsC+"),ta=i("DZo9"),At=i("8z0m"),aa=i("lUTK"),L=i("BvKs"),Le=i("8Skl"),ra=i("Ssu6"),Tt=function(r){var t=r.editorController,a=r.variables,n=a===void 0?[]:a,o=Object(m.i)(),d=Object(c.useState)({backgroundColor:t.getEditorBackgroundColor()}),v=Object(N.a)(d,2),u=v[0],b=v[1];Object(c.useEffect)(function(){var f=function j(){b({backgroundColor:t.getEditorBackgroundColor()}),t.canvas.off("after:render",j)};return t.canvas.on("after:render",f),function(){t.canvas.off("after:render",f)}},[]),Object(c.useEffect)(function(){b(Object(y.a)(Object(y.a)({},u),{},{backgroundColor:t.getEditorBackgroundColor()}))},[t]);var h=Object(c.useCallback)(function(f){b(Object(y.a)(Object(y.a)({},u),{},{backgroundColor:f})),t.setEditorBackgroundColor(f)},[t]),s=Object(c.useCallback)(function(f){if(f){var j=new FileReader;j.readAsDataURL(f),j.onload=function(){if(j.result){var V;t==null||t.addFile((V=j.result)===null||V===void 0?void 0:V.toString())}},j.onerror=function(V){console.log("Error: ",V)}}},[]),O=Object(e.jsxs)(L.a,{children:[Object(e.jsx)(L.a.Item,{children:Object(e.jsx)(M.a,{type:"primary",block:!0,onClick:function(){return t==null?void 0:t.addCircle()},htmlType:"button",children:Object(e.jsx)(m.a,{id:"fabric.add_circle"})})},"1"),Object(e.jsx)(L.a.Item,{children:Object(e.jsx)(M.a,{type:"primary",block:!0,onClick:function(){return t==null?void 0:t.addRectangle()},htmlType:"button",children:Object(e.jsx)(m.a,{id:"fabric.add_rectangle"})})},"2"),Object(e.jsx)(L.a.Item,{children:Object(e.jsx)(M.a,{type:"primary",block:!0,onClick:function(){return t==null?void 0:t.addLine()},htmlType:"button",children:Object(e.jsx)(m.a,{id:"fabric.add_line"})})},"3"),Object(e.jsx)(L.a.Item,{children:Object(e.jsx)(At.a,{beforeUpload:s,showUploadList:!1,accept:"image/*",className:"input-upload",children:Object(e.jsx)(M.a,{type:"primary",block:!0,children:Object(e.jsx)(m.a,{id:"fabric.add_image"})})})},"4")]}),k=Object(e.jsxs)(L.a,{children:[Object(e.jsxs)(L.a.ItemGroup,{title:"Text",children:[Object(e.jsx)(L.a.Item,{children:Object(e.jsx)(M.a,{type:"primary",block:!0,onClick:function(){return t==null?void 0:t.addTextbox()},htmlType:"button",children:Object(e.jsx)(m.a,{id:"fabric.add_textbox"})})},"1"),Object(e.jsx)(L.a.Item,{children:Object(e.jsx)(M.a,{type:"primary",block:!0,onClick:function(){return t==null?void 0:t.addIText()},htmlType:"button",children:Object(e.jsx)(m.a,{id:"fabric.add_text"})})},"2")]}),Object(e.jsx)(L.a.ItemGroup,{title:"Variables",children:n.map(function(f){return Object(e.jsx)(L.a.Item,{children:Object(e.jsxs)(M.a,{type:"primary",block:!0,onClick:function(){return t==null?void 0:t.addVariable(f)},htmlType:"button",children:[Object(e.jsx)(m.a,{id:"fabric.add"})," "," ".concat(f)]})},f)})})]});return Object(e.jsxs)("div",{className:"fabric-editor__form fabric-editor__form--basic",children:[Object(e.jsx)("h3",{className:"fabric-editor__form-title",children:Object(e.jsx)(m.a,{id:"fabric.editor_options"})}),Object(e.jsxs)(W.a,{align:"middle",children:[Object(e.jsx)(x.a,{children:Object(e.jsx)(Y,{value:u.backgroundColor,onChange:h,label:o.formatMessage({id:"fabric.editor_background_color"}),name:"backgroundColor",style:{marginTop:"13px"}})}),Object(e.jsxs)(x.a,{children:[Object(e.jsx)(We.a,{overlay:O,children:Object(e.jsxs)(M.a,{children:[Object(e.jsx)(m.a,{id:"fabric.add_object"})," ",Object(e.jsx)(Le.a,{})]})}),Object(e.jsx)(We.a,{overlay:k,children:Object(e.jsxs)(M.a,{children:[Object(e.jsx)(m.a,{id:"fabric.add_text"})," ",Object(e.jsx)(Le.a,{})]})}),Object(e.jsx)(Me.a,{title:"Are you sure you want to delete everything?",icon:Object(e.jsx)(Ne.a,{style:{color:"red"}}),onConfirm:function(){return t==null?void 0:t.deleteAll()},children:Object(e.jsx)(M.a,{type:"primary",danger:!0,htmlType:"button",children:Object(e.jsx)(m.a,{id:"fabric.clear"})})})]})]})]})},kt=Tt,na=i("K4qu"),Pt=function(r){var t=r.onUpdate,a=r.initialValue,n=r.width,o=n===void 0?842:n,d=r.height,v=d===void 0?592:d,u=r.variables,b=u===void 0?[]:u,h=Object(c.useState)(),s=Object(N.a)(h,2),O=s[0],k=s[1],f=Object(ue.b)(),j=f.editor,V=f.onReady,B=Object(c.useMemo)(function(){return j?new ut(j):void 0},[j]),w=function(){var q=j==null?void 0:j.canvas.toJSON();return q&&t&&t(q)};Object(c.useEffect)(function(){var X=Object(S.debounce)(w,500);return j&&j.canvas&&j.canvas.on("after:render",X),function(){j&&j.canvas&&j.canvas.off("after:render",X)}},[j]);var Fe=function(q){if(a)try{var be=JSON.parse(a);q.loadFromJSON(be,function(){})}catch(Se){}V(q)},Ee=function(){return j&&k(j.canvas.toSVG())};return Object(e.jsxs)("div",{className:"fabric-editor",children:[Object(e.jsxs)(W.a,{className:"fabric-editor__top",gutter:50,justify:"space-between",children:[Object(e.jsx)(x.a,{children:(B==null?void 0:B.canvas)&&Object(e.jsx)(kt,{editorController:B,variables:b})}),Object(e.jsx)(x.a,{children:Object(e.jsx)(M.a,{onClick:Ee,htmlType:"button",children:Object(e.jsx)(m.a,{id:"fabric.preview",defaultMessage:"fabric.preview"})})})]}),Object(e.jsx)("div",{className:"fabric-editor__canvas fakeA4",style:{width:o,height:v},children:Object(e.jsx)(ue.a,{className:"fakeA4-canvas",onReady:Fe})}),Object(e.jsx)("div",{className:"fabric-editor__bottom",children:(B==null?void 0:B.canvas)&&Object(e.jsx)(St,{editorController:B,activeObject:B.activeObject})}),O&&Object(e.jsx)(Qe,{svgDef:O,width:o,height:v})]})},It=Pt,Bt=i("PGov"),ia=i("D6/r"),oa=i("wbUo"),wt=function(r){return Object(e.jsxs)("div",{className:"".concat(r.entity.required&&"required"),children:["@","".concat(r.entity.name)]})},Mt=function(r){var t=r.requiredVariables,a=r.variables,n=r.onChange,o=r.value,d=r.error,v=a.map(function(u){return{name:u.substring(1),required:t.includes(u)}});return Object(e.jsxs)(g.a.Fragment,{children:[Object(e.jsx)(Bt.a,{className:"ant-input pro-field pro-field-lg rta__textarea_wide ".concat(d.length&&"error"),onChange:function(b){return n(b.target.value)},loadingComponent:function(){return Object(e.jsx)(m.a,{id:"loading"})},minChar:0,value:o,itemStyle:{fontSize:"16px"},trigger:{"@":{dataProvider:function(b){return v.filter(function(h){return h.name.startsWith(b)})},component:wt,output:function(b,h){return"".concat(h).concat(b.name)}}}}),Object(e.jsx)("div",{role:"alert",className:"ant-form-item-explain-error",children:d})]})},Nt=Mt,sa=i("JAl+"),Rt=function(r){var t=r.name,a=r.field,n=r.variables,o=n===void 0?[]:n,d=Object(c.useCallback)(function(b){if(b.length)return Object(e.jsx)(H.b,{children:Object(e.jsxs)(T.a,{children:[Object(e.jsx)(m.a,{id:"templates.required_variables"}),":"," ",b.map(function(h){return Object(e.jsx)(oe.a,{color:"red",children:h},h)})]})})},[a,t]),v=Object(c.useCallback)(function(b,h){return b&&h.every(function(s){return b.includes(s)})?Promise.resolve():Promise.reject(new Error("No required variable used"))},[a,t]),u=Object(c.useCallback)(function(){if(!a.readonly)switch(a.type){case"text":case"url":return Object(e.jsxs)(g.a.Fragment,{children:[Object(e.jsx)(I.a,{readonly:a.readonly,shouldUpdate:!0,width:"lg",name:t,label:Object(e.jsx)(m.a,{id:t}),rules:a.readonly?void 0:[{required:a.required,message:Object(e.jsx)(m.a,{id:"templates.this_required"})},{validator:function(){var b=Object(z.a)(P.a.mark(function s(O,k){return P.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",v(k,a.required_variables));case 1:case"end":return j.stop()}},s)}));function h(s,O){return b.apply(this,arguments)}return h}()}]}),d(a.required_variables)]});case"fabric.js":return Object(e.jsxs)(g.a.Fragment,{children:[Object(e.jsx)(F.a.Item,{shouldUpdate:!0,children:function(h){return Object(e.jsx)(It,{initialValue:h.getFieldValue(t),variables:o,onUpdate:function(O){return h.setFieldsValue(Object(Q.a)({},t,JSON.stringify(O)))}})}}),Object(e.jsx)(fe.a,{name:t,shouldUpdate:!0,width:"lg",hidden:!0})]});case"html":return Object(e.jsxs)(g.a.Fragment,{children:[Object(e.jsx)(fe.a,{readonly:a.readonly,shouldUpdate:!0,width:"lg",label:Object(e.jsx)(m.a,{id:t}),name:t,tooltip:Object(e.jsx)(m.a,{id:"templates.html_tooltip"}),rules:a.readonly?void 0:[{required:a.required,message:Object(e.jsx)(m.a,{id:"templates.this_required"})},{validator:function(){var b=Object(z.a)(P.a.mark(function s(O,k){return P.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",v(k,a.required_variables));case 1:case"end":return j.stop()}},s)}));function h(s,O){return b.apply(this,arguments)}return h}()}]}),d(a.required_variables)]});case"mjml":return Object(e.jsxs)(g.a.Fragment,{children:[Object(e.jsxs)("p",{children:[Object(e.jsx)(m.a,{id:"templates.to_create_template"})," ",Object(e.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://mjml.io/try-it-live",children:"https://mjml.io/try-it-live"})]}),Object(e.jsx)("code",{children:Object(e.jsx)(m.a,{id:"code.snippet"})}),Object(e.jsx)(F.a.Item,{shouldUpdate:!0,children:function(h){return Object(e.jsx)(Nt,{requiredVariables:a.required_variables,variables:o,value:h.getFieldValue(t),onChange:function(O){return h.setFieldsValue(Object(Q.a)({},t,O))},error:h.getFieldError(t)})}}),Object(e.jsx)(fe.a,{name:t,shouldUpdate:!0,hidden:!0,rules:a.readonly?void 0:[{required:a.required,message:Object(e.jsx)(m.a,{id:"templates.this_required"})},{validator:function(){var b=Object(z.a)(P.a.mark(function s(O,k){return P.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",v(k,a.required_variables));case 1:case"end":return j.stop()}},s)}));function h(s,O){return b.apply(this,arguments)}return h}()}]}),d(a.required_variables)]});default:return}},[a,t,o]);return Object(e.jsx)(g.a.Fragment,{children:u()})},Dt=Rt,Wt=function(r,t){return r?Object.keys(r).reduce(function(a,n){return r[n][t]?Object(y.a)(Object(y.a)({},a),{},Object(Q.a)({},n,n)):a},{}):{}},Lt=function(r){return Object.entries(r).map(function(t){return{key:t[0],content:t[1]}})},Ve=function(r){return Object.assign.apply(Object,[{}].concat(Object(J.a)(r)))},Vt=function(r){var t=["name","event","default"];return Object.keys(r).filter(function(a){return!t.includes(a)}).reduce(function(a,n){return a[n]=r[n],a},{})},Ce={email:"EscolaLms\\TemplatesEmail\\Core\\EmailChannel",pdf:"EscolaLms\\TemplatesPdf\\Core\\PdfChannel"},ca=E.default=function(){var l=Object(m.i)(),r=Object(Je.h)(),t=r.template,a=r.id,n=a==="new",o=Object(c.useState)(!1),d=Object(N.a)(o,2),v=d[0],u=d[1],b=F.a.useForm(),h=Object(N.a)(b,1),s=h[0],O=Object(c.useState)(),k=Object(N.a)(O,2),f=k[0],j=k[1],V=Object(c.useState)(void 0),B=Object(N.a)(V,2),w=B[0],Fe=B[1],Ee=Object(c.useState)(),X=Object(N.a)(Ee,2),q=X[0],be=X[1];Object(c.useEffect)(function(){Object(re.g)().then(function(A){j(A.success?A.data:{})})},[]),Object(c.useEffect)(function(){var A=s.getFieldsValue(),C=w&&Object.keys(w.sections).map(function(U){return Object(Q.a)({},U,w.sections[U].default_content)});C&&n&&s.setFieldsValue(Object(y.a)(Object(y.a)({},A),Ve(C)))},[w]);var Se=Object(c.useCallback)(function(A){if(A&&t){var C=f&&f[A][Ce[t]];Fe(C)}},[f,a]),Ut=Object(c.useCallback)(Object(z.a)(P.a.mark(function A(){var C,U,$;return P.a.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,Object(re.d)(Number(a));case 2:C=te.sent,C.success&&(U=C.data.sections&&C.data.sections.map(function(D){return Object(Q.a)({},D.key,D.content)}),$=U&&Ve(U),s.setFieldsValue(Object(y.a)(Object(y.a)({},C.data),$)),Se(String(C.data.event)),u(!0));case 4:case"end":return te.stop()}},A)})),[a,f]),$t=Object(c.useCallback)(function(){var A=Object(z.a)(P.a.mark(function C(U){var $,je;return P.a.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(je=Object(y.a)(Object(y.a)({},U),{},{channel:Ce[t],sections:Lt(Vt(U))}),!n){D.next=8;break}return D.next=4,Object(re.a)(je);case 4:$=D.sent,$.success&&m.d.push("/templates/".concat(t,"/").concat($.data.id)),D.next=11;break;case 8:return D.next=10,Object(re.f)(Number(a),je);case 10:$=D.sent;case 11:u(!0),me.default.success($.message);case 13:case"end":return D.stop()}},C)}));return function(C){return A.apply(this,arguments)}}(),[f,a]);return Object(c.useEffect)(function(){n||Ut()},[a,f]),Object(e.jsxs)($e.a,{title:n?Object(e.jsxs)("span",{children:[Object(e.jsx)(m.a,{id:"new"})," ",t," ",Object(e.jsx)(m.a,{id:"template"})]}):Object(e.jsxs)("span",{children:[Object(e.jsx)(m.a,{id:"edit"})," ",t," ",Object(e.jsx)(m.a,{id:"template"})]}),children:[Object(e.jsx)(Ue.a,{size:"small",children:Object(e.jsxs)(F.a,{initialValues:{},onFinish:$t,form:s,onValuesChange:function(){var C=s.getFieldsValue();Se(C.event),u(!1)},children:[Object(e.jsxs)(F.a.Group,{children:[Object(e.jsx)(I.a,{width:"sm",name:"name",label:Object(e.jsx)(m.a,{id:"name"}),placeholder:l.formatMessage({id:"name"}),rules:[{required:!0,message:Object(e.jsx)(m.a,{id:"select"})}]}),Object(e.jsx)(p.a,{name:"event",width:"lg",label:Object(e.jsx)(m.a,{id:"event"}),valueEnum:f?Wt(f,Ce[t]):{},placeholder:l.formatMessage({id:"event"}),rules:[{required:!0,message:Object(e.jsx)(m.a,{id:"select"})}]}),Object(e.jsx)(F.a.Item,{label:Object(e.jsx)(m.a,{id:"templates.set_as_default_template"}),children:Object(e.jsx)(ee.a,{name:"default"})}),!n&&Object(e.jsx)(F.a.Item,{label:Object(e.jsx)(m.a,{id:"preview"}),children:Object(e.jsx)(He,{disabled:!v,id:Number(a),type:t,onPreviewData:function(C){C&&C.data&&C.data.content&&be(C.data.content)}})})]}),!w&&!n?Object(e.jsx)(ve.a,{}):w&&w.sections&&Object.keys(w.sections).map(function(A,C){var U=w.sections&&w.sections[A];return Object(e.jsxs)(g.a.Fragment,{children:[C===0&&Object(e.jsxs)(g.a.Fragment,{children:[Object(e.jsx)(ae.a,{children:Object(e.jsx)(m.a,{id:"templates.tokens"})}),Object(e.jsx)(H.b,{children:Object(e.jsx)(T.a,{children:w.variables.map(function($){return Object(e.jsx)(oe.a,{color:"orange",children:$},$)})})})]}),Object(e.jsx)(ae.a,{}),Object(e.jsx)(Dt,{name:A,field:U,variables:w.variables})]},A)}),Object(e.jsx)(ae.a,{})]})}),q&&Object(e.jsx)(ze,{initialValue:q,onRendered:function(){return be(void 0)}})]})}},"JAl+":function(K,E,i){},K4qu:function(K,E,i){},Ssu6:function(K,E,i){},rWUb:function(K,E,i){"use strict";i.d(E,"e",function(){return oe}),i.d(E,"d",function(){return ae}),i.d(E,"a",function(){return ve}),i.d(E,"f",function(){return me}),i.d(E,"b",function(){return N}),i.d(E,"g",function(){return Q}),i.d(E,"c",function(){return he});var G=i("k1fw"),H=i("9og8"),Ae=i("WmNS"),T=i.n(Ae),Z=i("9kvl");function oe(c,g){return se.apply(this,arguments)}function se(){return se=Object(H.a)(T.a.mark(function c(g,F){return T.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",Object(Z.f)("/api/admin/templates",Object(G.a)({method:"GET",useCache:!1,params:Object(G.a)(Object(G.a)({},g),{},{per_page:g.pageSize&&g.pageSize,page:g.current&&g.current})},F||{})));case 1:case"end":return p.stop()}},c)})),se.apply(this,arguments)}function ae(c,g){return ce.apply(this,arguments)}function ce(){return ce=Object(H.a)(T.a.mark(function c(g,F){return T.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",Object(Z.f)("/api/admin/templates/".concat(g),Object(G.a)({method:"GET"},F||{})));case 1:case"end":return p.stop()}},c)})),ce.apply(this,arguments)}function ve(c,g){return le.apply(this,arguments)}function le(){return le=Object(H.a)(T.a.mark(function c(g,F){return T.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",Object(Z.f)("/api/admin/templates",Object(G.a)({method:"POST",headers:{"Content-Type":"application/json"},data:g},F||{})));case 1:case"end":return p.stop()}},c)})),le.apply(this,arguments)}function me(c,g,F){return z.apply(this,arguments)}function z(){return z=Object(H.a)(T.a.mark(function c(g,F,I){return T.a.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.abrupt("return",Object(Z.f)("/api/admin/templates/".concat(g),Object(G.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:F},I||{})));case 1:case"end":return ee.stop()}},c)})),z.apply(this,arguments)}function N(c,g){return J.apply(this,arguments)}function J(){return J=Object(H.a)(T.a.mark(function c(g,F){return T.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",Object(Z.f)("/api/admin/templates/".concat(g),Object(G.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},F||{})));case 1:case"end":return p.stop()}},c)})),J.apply(this,arguments)}function Q(c){return y.apply(this,arguments)}function y(){return y=Object(H.a)(T.a.mark(function c(g){return T.a.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",Object(Z.f)("/api/admin/templates/variables",Object(G.a)({method:"GET"},g||{})));case 1:case"end":return I.stop()}},c)})),y.apply(this,arguments)}function he(c,g){return P.apply(this,arguments)}function P(){return P=Object(H.a)(T.a.mark(function c(g,F){return T.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",Object(Z.f)("/api/admin/templates/".concat(g,"/preview"),Object(G.a)({method:"GET"},F||{})));case 1:case"end":return p.stop()}},c)})),P.apply(this,arguments)}},wbUo:function(K,E,i){}}]);
