"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[5093],{85118:function(F,g){var n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"};g.Z=n},69753:function(F,g,n){var y=n(1413),c=n(67294),x=n(49495),s=n(84089),f=function(d,I){return c.createElement(s.Z,(0,y.Z)((0,y.Z)({},d),{},{ref:I,icon:x.Z}))};f.displayName="DownloadOutlined",g.Z=c.forwardRef(f)},55725:function(F,g,n){var y=n(1413),c=n(67294),x=n(85118),s=n(84089),f=function(d,I){return c.createElement(s.Z,(0,y.Z)((0,y.Z)({},d),{},{ref:I,icon:x.Z}))};f.displayName="FolderOutlined",g.Z=c.forwardRef(f)},1977:function(F,g,n){n.d(g,{n:function(){return Z}});var y=n(97685),c=n(71002),x=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,s=function(a){return a==="*"||a==="x"||a==="X"},f=function(a){var u=parseInt(a,10);return isNaN(u)?a:u},j=function(a,u){return(0,c.Z)(a)!==(0,c.Z)(u)?[String(a),String(u)]:[a,u]},d=function(a,u){if(s(a)||s(u))return 0;var h=j(f(a),f(u)),M=(0,y.Z)(h,2),D=M[0],E=M[1];return D>E?1:D<E?-1:0},I=function(a,u){for(var h=0;h<Math.max(a.length,u.length);h++){var M=d(a[h]||"0",u[h]||"0");if(M!==0)return M}return 0},O=function(a){var u,h=a.match(x);return h==null||(u=h.shift)===null||u===void 0||u.call(h),h},Z=function(a,u){var h=O(a),M=O(u),D=h.pop(),E=M.pop(),v=I(h,M);return v!==0?v:D||E?D?-1:1:0}},62914:function(F,g,n){n.d(g,{Z:function(){return Ze}});var y=n(87462),c=n(97685),x=n(4942),s=n(45987),f=n(67294),j=n(93967),d=n.n(j),I=n(86500),O=n(1350),Z=2,T=.16,a=.05,u=.05,h=.15,M=5,D=4,E=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function v(e){var t=e.r,o=e.g,r=e.b,C=(0,I.py)(t,o,r);return{h:C.h*360,s:C.s,v:C.v}}function P(e){var t=e.r,o=e.g,r=e.b;return"#".concat((0,I.vq)(t,o,r,!1))}function i(e,t,o){var r=o/100,C={r:(t.r-e.r)*r+e.r,g:(t.g-e.g)*r+e.g,b:(t.b-e.b)*r+e.b};return C}function _(e,t,o){var r;return Math.round(e.h)>=60&&Math.round(e.h)<=240?r=o?Math.round(e.h)-Z*t:Math.round(e.h)+Z*t:r=o?Math.round(e.h)+Z*t:Math.round(e.h)-Z*t,r<0?r+=360:r>=360&&(r-=360),r}function Q(e,t,o){if(e.h===0&&e.s===0)return e.s;var r;return o?r=e.s-T*t:t===D?r=e.s+T:r=e.s+a*t,r>1&&(r=1),o&&t===M&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function W(e,t,o){var r;return o?r=e.v+u*t:r=e.v-h*t,r>1&&(r=1),Number(r.toFixed(2))}function V(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=[],r=(0,O.uA)(e),C=M;C>0;C-=1){var U=v(r),k=P((0,O.uA)({h:_(U,C,!0),s:Q(U,C,!0),v:W(U,C,!0)}));o.push(k)}o.push(P(r));for(var w=1;w<=D;w+=1){var q=v(r),ee=P((0,O.uA)({h:_(q,w),s:Q(q,w),v:W(q,w)}));o.push(ee)}return t.theme==="dark"?E.map(function(G){var L=G.index,ie=G.opacity,pe=P(i((0,O.uA)(t.backgroundColor||"#141414"),(0,O.uA)(o[L]),ie*100));return pe}):o}var R={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},p={},S={};Object.keys(R).forEach(function(e){p[e]=V(R[e]),p[e].primary=p[e][5],S[e]=V(R[e],{theme:"dark",backgroundColor:"#141414"}),S[e].primary=S[e][5]});var N=p.red,X=p.volcano,ne=p.gold,Y=p.orange,re=p.yellow,te=p.lime,le=p.green,$=p.cyan,b=p.blue,se=p.geekblue,H=p.purple,K=p.magenta,me=p.grey,z=p.grey,fe=(0,f.createContext)({}),ue=fe,m=n(1413),l=n(71002),A=n(44958),B=n(27571),J=n(80334);function ae(e){return e.replace(/-(.)/g,function(t,o){return o.toUpperCase()})}function xe(e,t){(0,J.ZP)(e,"[@ant-design/icons] ".concat(t))}function he(e){return(0,l.Z)(e)==="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&((0,l.Z)(e.icon)==="object"||typeof e.icon=="function")}function Ce(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce(function(t,o){var r=e[o];switch(o){case"class":t.className=r,delete t.class;break;default:delete t[o],t[ae(o)]=r}return t},{})}function _e(e,t,o){return o?f.createElement(e.tag,(0,m.Z)((0,m.Z)({key:t},Ce(e.attrs)),o),(e.children||[]).map(function(r,C){return _e(r,"".concat(t,"-").concat(e.tag,"-").concat(C))})):f.createElement(e.tag,(0,m.Z)({key:t},Ce(e.attrs)),(e.children||[]).map(function(r,C){return _e(r,"".concat(t,"-").concat(e.tag,"-").concat(C))}))}function ye(e){return V(e)[0]}function Ee(e){return e?Array.isArray(e)?e:[e]:[]}var we={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},De=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,Oe=function(t){var o=(0,f.useContext)(ue),r=o.csp,C=o.prefixCls,U=De;C&&(U=U.replace(/anticon/g,C)),(0,f.useEffect)(function(){var k=t.current,w=(0,B.A)(k);(0,A.hq)(U,"@ant-design-icons",{prepend:!0,csp:r,attachTo:w})},[])},Te=["icon","className","onClick","style","primaryColor","secondaryColor"],oe={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function Me(e){var t=e.primaryColor,o=e.secondaryColor;oe.primaryColor=t,oe.secondaryColor=o||ye(t),oe.calculated=!!o}function be(){return(0,m.Z)({},oe)}var ce=function(t){var o=t.icon,r=t.className,C=t.onClick,U=t.style,k=t.primaryColor,w=t.secondaryColor,q=(0,s.Z)(t,Te),ee=f.useRef(),G=oe;if(k&&(G={primaryColor:k,secondaryColor:w||ye(k)}),Oe(ee),xe(he(o),"icon should be icon definiton, but got ".concat(o)),!he(o))return null;var L=o;return L&&typeof L.icon=="function"&&(L=(0,m.Z)((0,m.Z)({},L),{},{icon:L.icon(G.primaryColor,G.secondaryColor)})),_e(L.icon,"svg-".concat(L.name),(0,m.Z)((0,m.Z)({className:r,onClick:C,style:U,"data-icon":L.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},q),{},{ref:ee}))};ce.displayName="IconReact",ce.getTwoToneColors=be,ce.setTwoToneColors=Me;var ve=ce;function Pe(e){var t=Ee(e),o=(0,c.Z)(t,2),r=o[0],C=o[1];return ve.setTwoToneColors({primaryColor:r,secondaryColor:C})}function je(){var e=ve.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var Ie=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];Pe(b.primary);var de=f.forwardRef(function(e,t){var o=e.className,r=e.icon,C=e.spin,U=e.rotate,k=e.tabIndex,w=e.onClick,q=e.twoToneColor,ee=(0,s.Z)(e,Ie),G=f.useContext(ue),L=G.prefixCls,ie=L===void 0?"anticon":L,pe=G.rootClassName,Re=d()(pe,ie,(0,x.Z)((0,x.Z)({},"".concat(ie,"-").concat(r.name),!!r.name),"".concat(ie,"-spin"),!!C||r.name==="loading"),o),ge=k;ge===void 0&&w&&(ge=-1);var Be=U?{msTransform:"rotate(".concat(U,"deg)"),transform:"rotate(".concat(U,"deg)")}:void 0,Ue=Ee(q),Ae=(0,c.Z)(Ue,2),Le=Ae[0],Se=Ae[1];return f.createElement("span",(0,y.Z)({role:"img","aria-label":r.name},ee,{ref:t,tabIndex:ge,onClick:w,className:Re}),f.createElement(ve,{icon:r,primaryColor:Le,secondaryColor:Se,style:Be}))});de.displayName="AntdIcon",de.getTwoToneColor=je,de.setTwoToneColor=Pe;var Ze=de},20568:function(F,g,n){n.d(g,{Z:function(){return W}});var y=n(19632),c=n.n(y),x=n(97857),s=n.n(x),f=n(5574),j=n.n(f),d=n(67294),I=n(17578),O=n(78957),Z=n(25093),T=n(96365),a=n(14726),u=n(2487),h=n(72252),M=n(82061),D=n(55725),E=n(69753),v=n(80854),P=n(29477),i=n(85893),_=function(R){var p=R.directory,S=R.onUploaded;return(0,i.jsxs)(O.Z,{align:"start",children:[(0,i.jsxs)(Z.Z.Text,{children:[(0,i.jsx)(v.FormattedMessage,{id:"pages.files.filesBrowser"}),(0,i.jsx)(Z.Z.Text,{code:!0,children:p})]}),(0,i.jsx)(P.Z,{url:"/api/admin/file/upload",name:"file[]",data:{target:p},onUpload:function(X){X.success&&S(p,X.data)}})]})},Q=function(R){var p=R.defaultDirectory,S=p===void 0?"/":p,N=R.onFile,X=R.hideDeleteBtn,ne=X===void 0?!1:X,Y=R.forceLoading,re=Y===void 0?!1:Y,te=(0,v.useIntl)(),le=(0,d.useState)({loading:!1,name:"",directory:S,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),$=j()(le,2),b=$[0],se=$[1],H=(0,d.useRef)(),K=(0,d.useCallback)(function(m){se(function(l){return s()(s()({},l),{},{loading:m})})},[]),me=(0,d.useCallback)(function(m,l){m.success&&se(function(A){return s()(s()(s()({},A),m.data),{},{data:[{url:l.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(c()(m.data.data.map(function(B){return s()(s()({},B),{},{url:B.mime==="directory"?"".concat(l,"/").concat(B.name):B.url})}))).filter(function(B){return l==="/"||l===S?B.name!=="..":!0}),directory:l,loading:!1})})},[K]),z=(0,d.useCallback)(function(m){var l,A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,B=function(){return H.current&&H.current.abort()};return B(),H.current=new AbortController,K(!0),(0,I.QZ)({directory:m,page:A},{signal:(l=H.current)===null||l===void 0?void 0:l.signal}).then(function(J){J.success&&me(J,m)}).catch(function(){return K(!1)}),function(){B()}},[K]);(0,d.useEffect)(function(){return z(S)},[S,z]);var fe=(0,d.useCallback)(function(m){K(!0),(0,I.Od)(m).then(function(){z(b.directory)}).catch(function(){K(!1)})},[z,K,b.directory]),ue=(0,d.useCallback)(function(m,l){var A,B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,J=function(){return H.current&&H.current.abort()};return J(),H.current=new AbortController,K(!0),(0,I.ht)({directory:m,name:l,page:B},{signal:(A=H.current)===null||A===void 0?void 0:A.signal}).then(function(ae){ae.success&&me(ae,m)}).catch(function(){return K(!1)}),function(){J()}},[K]);return(0,i.jsxs)("div",{className:"file-browser",children:[(0,i.jsxs)("div",{className:"file-browser__header",children:[(0,i.jsx)(T.Z,{placeholder:te.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(l){return se(function(A){return s()(s()({},A),{},{name:l.target.value})})},value:b.name}),(0,i.jsxs)("div",{children:[(0,i.jsx)(a.ZP,{className:"file-browser__button",onClick:function(){return z(b.directory)},children:(0,i.jsx)(v.FormattedMessage,{id:"reset"})}),(0,i.jsx)(a.ZP,{className:"file-browser__button",type:"primary",onClick:function(){return ue(b.directory,b.name)},children:(0,i.jsx)(v.FormattedMessage,{id:"query"})})]})]}),(0,i.jsx)(u.Z,{loading:b.loading||re,size:"small",itemLayout:"horizontal",dataSource:b.data,header:(0,i.jsx)(_,{directory:b.directory,onUploaded:function(l,A){A&&(z(l),N&&N(A,l))}}),footer:(0,i.jsx)(_,{directory:b.directory,onUploaded:function(l,A){z(l),A&&N&&N(A,l)}}),renderItem:function(l){return(0,i.jsx)(u.Z.Item,{actions:l.mime!=="directory"&&!ne?[(0,i.jsx)(a.ZP,{type:"default",danger:!0,icon:(0,i.jsx)(M.Z,{}),size:"small",onClick:function(){return fe(l.url)}},"dir")]:[],children:(0,i.jsx)(u.Z.Item.Meta,{avatar:l.mime==="directory"?(0,i.jsx)(a.ZP,{type:"primary",icon:(0,i.jsx)(D.Z,{}),size:"small",onClick:function(){return z(l.url)}}):(0,i.jsx)("a",{href:l.url,target:"_blank",rel:"noreferrer",children:(0,i.jsx)(a.ZP,{type:"default",icon:(0,i.jsx)(E.Z,{}),size:"small"})}),description:(0,i.jsx)(d.Fragment,{children:(0,i.jsx)(a.ZP,{type:"text",size:"small",onClick:function(){return l.mime==="directory"?z(l.url):N&&N(l,b.directory)},children:l.name})})})})}}),(0,i.jsx)(h.Z,{pageSizeOptions:[],current:b.current_page,total:b.total,pageSize:b.per_page,onChange:function(l){return z(b.directory,l)}})]})},W=Q},29477:function(F,g,n){var y=n(97857),c=n.n(y),x=n(5574),s=n.n(x),f=n(55523),j=n(75842),d=n(21974),I=n(67294),O=n(80854),Z=n(85893);function T(a){var u=a.onChange,h=a.onUpload,M=a.url,D=a.name,E=a.extra,v=a.accept,P=a.data,i=a.wrapInForm,_=i===void 0?!0:i,Q=a.title,W=a.formProps,V=a.maxFiles,R=a.clearListAfterUpload,p=a.hideLabel,S=a.disabled,N=a.showUploadList,X=(0,I.useState)(),ne=s()(X,2),Y=ne[0],re=ne[1],te=(0,O.useIntl)();return P&&P[D]&&delete P[D],(0,Z.jsx)(d.Z,{condition:_,wrap:function($){return(0,Z.jsx)(j.Z,c()(c()({},W),{},{children:$}))},children:(0,Z.jsx)(f.Z,{title:Q||" ".concat(te.formatMessage({id:"upload_click_here"})),placeholder:te.formatMessage({id:"upload_click_here"}),label:!p&&(0,Z.jsx)(O.FormattedMessage,{id:"upload"}),max:V!=null?V:2,fieldProps:{data:P,accept:v,name:D,showUploadList:N,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))},onChange:function($){re($),u&&u($),$.file.status==="done"&&(h&&h($.file.response),R&&re(void 0))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(M),extra:E,fileList:Y==null?void 0:Y.fileList,disabled:S})})}g.Z=T},8079:function(F,g,n){n.r(g);var y=n(20568),c=n(74453),x=n(4393),s=n(25093),f=n(67294),j=n(80854),d=n(85893);g.default=function(){return(0,d.jsx)(c._z,{children:(0,d.jsxs)(x.Z,{children:[(0,d.jsx)(s.Z.Text,{strong:!0,children:(0,d.jsx)(j.FormattedMessage,{id:"pages.files.content"})}),(0,d.jsx)(y.Z,{})]})})}},17578:function(F,g,n){n.d(g,{Od:function(){return M},QZ:function(){return I},ht:function(){return Z},pV:function(){return h},ws:function(){return a}});var y=n(15009),c=n.n(y),x=n(97857),s=n.n(x),f=n(99289),j=n.n(f),d=n(80854);function I(E,v){return O.apply(this,arguments)}function O(){return O=j()(c()().mark(function E(v,P){return c()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,d.request)("/api/admin/file/list",s()({method:"GET",params:v},P||{})));case 1:case"end":return _.stop()}},E)})),O.apply(this,arguments)}function Z(E,v){return T.apply(this,arguments)}function T(){return T=j()(c()().mark(function E(v,P){return c()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,d.request)("/api/admin/file/find",s()({method:"GET",params:v},P||{})));case 1:case"end":return _.stop()}},E)})),T.apply(this,arguments)}function a(E,v,P){return u.apply(this,arguments)}function u(){return u=j()(c()().mark(function E(v,P,i){var _;return c()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return _=new FormData,_.append("file[]",v),_.append("target",P),W.abrupt("return",(0,d.request)("/api/admin/file/upload",s()({method:"POST",data:_},i||{})));case 4:case"end":return W.stop()}},E)})),u.apply(this,arguments)}var h=function(v){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/images/img?path=").concat(v,"&w=").concat(P)};function M(E,v){return D.apply(this,arguments)}function D(){return D=j()(c()().mark(function E(v,P){return c()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,d.request)("/api/admin/file/delete",s()({method:"DELETE",data:{url:v}},P||{})));case 1:case"end":return _.stop()}},E)})),D.apply(this,arguments)}},15746:function(F,g,n){var y=n(21584);g.Z=y.Z},71230:function(F,g,n){var y=n(92820);g.Z=y.Z},97435:function(F,g){function n(y,c){for(var x=Object.assign({},y),s=0;s<c.length;s+=1){var f=c[s];delete x[f]}return x}g.Z=n}}]);
