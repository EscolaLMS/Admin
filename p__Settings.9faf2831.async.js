(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"+up7":function(ee,v,e){"use strict";e.d(v,"f",function(){return D}),e.d(v,"d",function(){return a}),e.d(v,"b",function(){return O}),e.d(v,"h",function(){return u}),e.d(v,"c",function(){return h}),e.d(v,"e",function(){return s}),e.d(v,"a",function(){return p}),e.d(v,"g",function(){return K});var B=e("k1fw"),_=e("9og8"),F=e("WmNS"),r=e.n(F),E=e("9kvl");function D(l,i){return y.apply(this,arguments)}function y(){return y=Object(_.a)(r.a.mark(function l(i,C){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(E.f)("/api/admin/settings",Object(B.a)({method:"GET",useCache:!1,params:Object(B.a)(Object(B.a)({},i),{},{per_page:i.pageSize,page:i.current})},C||{})));case 1:case"end":return n.stop()}},l)})),y.apply(this,arguments)}function a(l,i){return P.apply(this,arguments)}function P(){return P=Object(_.a)(r.a.mark(function l(i,C){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(E.f)("/api/admin/settings/".concat(i),Object(B.a)({method:"GET",useCache:!1},C||{})));case 1:case"end":return n.stop()}},l)})),P.apply(this,arguments)}function O(l,i){return U.apply(this,arguments)}function U(){return U=Object(_.a)(r.a.mark(function l(i,C){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(E.f)("/api/admin/settings",Object(B.a)({method:"POST",headers:{"Content-Type":"application/json"},data:i},C||{})));case 1:case"end":return n.stop()}},l)})),U.apply(this,arguments)}function u(l,i,C){return S.apply(this,arguments)}function S(){return S=Object(_.a)(r.a.mark(function l(i,C,c){return r.a.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.abrupt("return",Object(E.f)("/api/admin/settings/".concat(i),Object(B.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:C},c||{})));case 1:case"end":return Z.stop()}},l)})),S.apply(this,arguments)}function h(l,i){return b.apply(this,arguments)}function b(){return b=Object(_.a)(r.a.mark(function l(i,C){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(E.f)("/api/admin/settings/".concat(i),Object(B.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},C||{})));case 1:case"end":return n.stop()}},l)})),b.apply(this,arguments)}function s(l){return I.apply(this,arguments)}function I(){return I=Object(_.a)(r.a.mark(function l(i){return r.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(E.f)("/api/admin/settings/groups",Object(B.a)({method:"GET",useCache:!1},i||{})));case 1:case"end":return c.stop()}},l)})),I.apply(this,arguments)}function p(l){return o.apply(this,arguments)}function o(){return o=Object(_.a)(r.a.mark(function l(i){return r.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(E.f)("/api/admin/config",Object(B.a)({method:"GET",useCache:!1},i||{})));case 1:case"end":return c.stop()}},l)})),o.apply(this,arguments)}function K(l,i){return V.apply(this,arguments)}function V(){return V=Object(_.a)(r.a.mark(function l(i,C){var c,n;return r.a.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return c=i.key,n=i.value,N.abrupt("return",Object(E.f)("/api/admin/config",Object(B.a)({method:"POST",data:{config:[{key:c,value:n}]}},C||{})));case 2:case"end":return N.stop()}},l)})),V.apply(this,arguments)}},"3fxf":function(ee,v,e){"use strict";var B=e("DjyN"),_=e("NUBc"),F=e("Mwp2"),r=e("VXEj"),E=e("+L6B"),D=e("2/Rp"),y=e("5NDa"),a=e("5rEg"),P=e("oBTY"),O=e("k1fw"),U=e("tJVT"),u=e("DYRE"),S=e("zeV3"),h=e("tU7J"),b=e("wFql"),s=e("q1tI"),I=e.n(s),p=e("BAh9"),o=e("/MfK"),K=e("mAF4"),V=e("dF/Y"),l=e("9kvl"),i=e("DBJ/"),C=e("lLVY"),c=e.n(C),n=e("nKUr"),Z=e.n(n),N=function(se){var $=se.directory,te=se.onUploaded;return Object(n.jsxs)(S.b,{align:"start",children:[Object(n.jsxs)(b.a.Text,{children:[Object(n.jsx)(l.a,{id:"pages.files.filesBrowser"}),Object(n.jsx)(b.a.Text,{code:!0,children:$})]}),Object(n.jsx)(i.a,{url:"/api/admin/file/upload",name:"file[]",data:{target:$},onChange:function(oe){return oe.file.status==="done"&&te($)}})]})},ue=function(se){var $=se.defaultDirectory,te=$===void 0?"/":$,k=se.onFile,oe=Object(l.i)(),he=Object(s.useState)({loading:!1,name:"",directory:te,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),fe=Object(U.a)(he,2),w=fe[0],je=fe[1],ne=Object(s.useRef)(),X=Object(s.useCallback)(function(L){je(function(x){return Object(O.a)(Object(O.a)({},x),{},{loading:L})})},[]),t=Object(s.useCallback)(function(L){var x,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,Oe=function(){return ne.current&&ne.current.abort()};return Oe(),ne.current=new AbortController,X(!0),Object(p.a)({directory:L,page:q},{signal:(x=ne.current)===null||x===void 0?void 0:x.signal}).then(function(ie){ie.success&&je(function(ce){return Object(O.a)(Object(O.a)(Object(O.a)({},ce),ie.data),{},{data:[{url:L.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(P.a)(ie.data.data.map(function(re){return Object(O.a)(Object(O.a)({},re),{},{url:re.mime==="directory"?"".concat(L,"/").concat(re.name):re.url})}))).filter(function(re){return L==="/"?re.name!=="..":!0}),directory:L,loading:!1})})}).catch(function(){return X(!1)}),function(){Oe()}},[X]);Object(s.useEffect)(function(){return t(te)},[te,t]);var pe=Object(s.useCallback)(function(L){X(!0),Object(p.c)(L).then(function(){t(w.directory)}).catch(function(){X(!1)})},[t,X,w.directory]),ge=Object(s.useCallback)(function(L,x){var q,Oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,ie=function(){return ne.current&&ne.current.abort()};return ie(),ne.current=new AbortController,X(!0),Object(p.b)({directory:L,name:x,page:Oe},{signal:(q=ne.current)===null||q===void 0?void 0:q.signal}).then(function(ce){ce.success&&je(function(re){return Object(O.a)(Object(O.a)(Object(O.a)({},re),ce.data),{},{data:[{url:L.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(P.a)(ce.data.data.map(function(me){return Object(O.a)(Object(O.a)({},me),{},{url:me.mime==="directory"?"".concat(L,"/").concat(me.name):me.url})}))).filter(function(me){return L==="/"?me.name!=="..":!0}),directory:L,loading:!1})})}).catch(function(){return X(!1)}),function(){ie()}},[X]);return Object(n.jsxs)("div",{className:"file-browser",children:[Object(n.jsxs)("div",{className:"file-browser__header",children:[Object(n.jsx)(a.a,{placeholder:oe.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(x){return je(function(q){return Object(O.a)(Object(O.a)({},q),{},{name:x.target.value})})},value:w.name}),Object(n.jsxs)("div",{children:[Object(n.jsx)(D.a,{className:"file-browser__button",onClick:function(){return t(w.directory)},children:Object(n.jsx)(l.a,{id:"reset"})}),Object(n.jsx)(D.a,{className:"file-browser__button",type:"primary",onClick:function(){return ge(w.directory,w.name)},children:Object(n.jsx)(l.a,{id:"query"})})]})]}),Object(n.jsx)(r.b,{loading:w.loading,size:"small",itemLayout:"horizontal",dataSource:w.data,header:Object(n.jsx)(N,{directory:w.directory,onUploaded:function(x){return t(x)}}),footer:Object(n.jsx)(N,{directory:w.directory,onUploaded:function(x){return t(x)}}),renderItem:function(x){return Object(n.jsx)(r.b.Item,{actions:x.mime!=="directory"?[Object(n.jsx)(D.a,{type:"default",danger:!0,icon:Object(n.jsx)(o.a,{}),size:"small",onClick:function(){return pe(x.url)}})]:[],children:Object(n.jsx)(r.b.Item.Meta,{avatar:x.mime==="directory"?Object(n.jsx)(D.a,{type:"primary",icon:Object(n.jsx)(K.a,{}),size:"small",onClick:function(){return t(x.url)}}):Object(n.jsx)("a",{href:x.url,target:"_blank",children:Object(n.jsx)(D.a,{type:"default",icon:Object(n.jsx)(V.a,{}),size:"small"})}),description:Object(n.jsx)(I.a.Fragment,{children:Object(n.jsx)(D.a,{type:"text",size:"small",onClick:function(){return x.mime==="directory"?t(x.url):k&&k(x,w.directory)},children:x.name})})})})}}),Object(n.jsx)(_.a,{pageSizeOptions:[],current:w.current_page,total:w.total,pageSize:w.per_page,onChange:function(x){return t(w.directory,x)}})]})};v.a=ue},"5qq5":function(ee,v,e){"use strict";var B=e("7Kak"),_=e("9yH6"),F=e("wx14"),r=e("VTBJ"),E=e("Ff2n"),D=e("q1tI"),y=e.n(D),a=e("adzw"),P=e("uX+g"),O=e("WFLz"),U=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],u=y.a.forwardRef(function(s,I){var p=s.fieldProps,o=s.options,K=s.radioType,V=s.layout,l=s.proFieldProps,i=s.valueEnum,C=Object(E.a)(s,U);return y.a.createElement(a.a,Object(F.a)({mode:"edit",valueType:K==="button"?"radioButton":"radio",ref:I,valueEnum:Object(P.a)(i,void 0)},C,{fieldProps:Object(r.a)({options:o,layout:V},p),proFieldProps:l,filedConfig:{customLightMode:!0}}))}),S=y.a.forwardRef(function(s,I){var p=s.fieldProps,o=s.children;return y.a.createElement(_.a,Object(F.a)({},p,{ref:I}),o)}),h=Object(O.a)(S,{valuePropName:"checked",ignoreWidth:!0}),b=h;b.Group=u,b.Button=_.a.Button,b.displayName="ProFormComponent",v.a=b},BAh9:function(ee,v,e){"use strict";e.d(v,"a",function(){return D}),e.d(v,"b",function(){return a}),e.d(v,"e",function(){return O}),e.d(v,"d",function(){return u}),e.d(v,"c",function(){return S});var B=e("k1fw"),_=e("9og8"),F=e("WmNS"),r=e.n(F),E=e("9kvl");function D(b,s){return y.apply(this,arguments)}function y(){return y=Object(_.a)(r.a.mark(function b(s,I){return r.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(E.f)("/api/admin/file/list",Object(B.a)({method:"GET",params:s},I||{})));case 1:case"end":return o.stop()}},b)})),y.apply(this,arguments)}function a(b,s){return P.apply(this,arguments)}function P(){return P=Object(_.a)(r.a.mark(function b(s,I){return r.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(E.f)("/api/admin/file/find",Object(B.a)({method:"GET",params:s},I||{})));case 1:case"end":return o.stop()}},b)})),P.apply(this,arguments)}function O(b,s,I){return U.apply(this,arguments)}function U(){return U=Object(_.a)(r.a.mark(function b(s,I,p){var o;return r.a.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return o=new FormData,o.append("file[]",s),o.append("target",I),V.abrupt("return",Object(E.f)("/api/admin/file/upload",Object(B.a)({method:"POST",data:o},p||{})));case 4:case"end":return V.stop()}},b)})),U.apply(this,arguments)}var u=function(s){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(s,"&w=").concat(I)};function S(b,s){return h.apply(this,arguments)}function h(){return h=Object(_.a)(r.a.mark(function b(s,I){return r.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(E.f)("/api/admin/file/delete",Object(B.a)({method:"DELETE",data:{url:s}},I||{})));case 1:case"end":return o.stop()}},b)})),h.apply(this,arguments)}},BiO0:function(ee,v,e){"use strict";var B=e("wx14"),_=e("Ff2n"),F=e("q1tI"),r=e.n(F),E=e("adzw"),D=["fieldProps","proFieldProps"],y=function(P,O){var U=P.fieldProps,u=P.proFieldProps,S=Object(_.a)(P,D);return r.a.createElement(E.a,Object(B.a)({ref:O,mode:"edit",valueType:"textarea",fieldProps:U,proFieldProps:u},S))};v.a=r.a.forwardRef(y)},"DBJ/":function(ee,v,e){"use strict";var B=e("y8nQ"),_=e("Vl3Y"),F=e("etVw"),r=e("q1tI"),E=e.n(r),D=e("9kvl"),y=function(U){var u=U.condition,S=U.children,h=U.wrap;return u?E.a.cloneElement(h(S)):S},a=e("nKUr"),P=function(u){var S=u.onChange,h=u.url,b=u.name,s=u.extra,I=u.accept,p=u.data,o=u.wrapInForm,K=o===void 0?!0:o,V=Object(D.i)();return p&&p[b]&&delete p[b],Object(a.jsx)(y,{condition:K,wrap:function(i){return Object(a.jsx)(_.a,{children:i})},children:Object(a.jsx)(F.a,{title:Object(a.jsx)(D.a,{id:"upload_click_here"}),placeholder:V.formatMessage({id:"upload_click_here"}),onChange:S,label:Object(a.jsx)(D.a,{id:"upload"}),max:2,fieldProps:{data:p,accept:I,name:b,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(h),extra:s})})},O=v.a=P},"F/zT":function(ee,v,e){"use strict";var B=e("wx14"),_=e("VTBJ"),F=e("Ff2n"),r=e("q1tI"),E=e.n(r),D=e("adzw"),y=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],a=E.a.forwardRef(function(P,O){var U=P.fieldProps,u=P.unCheckedChildren,S=P.checkedChildren,h=P.proFieldProps,b=Object(F.a)(P,y);return E.a.createElement(D.a,Object(B.a)({valueType:"switch",mode:"edit",fieldProps:Object(_.a)({unCheckedChildren:u,checkedChildren:S},U),ref:O,valuePropName:"checked",proFieldProps:h,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},b))});v.a=a},YjuE:function(ee,v,e){"use strict";e.r(v);var B=e("T2oS"),_=e("W9HT"),F=e("tJVT"),r=e("q1tI"),E=e.n(r),D=e("nhC9"),y=e("Ty5D"),a=e("9kvl"),P=e("tMyG"),O=e("+up7"),U=e("P2fV"),u=e("NJEC"),S=e("5Dmo"),h=e("3S7+"),b=e("+L6B"),s=e("2/Rp"),I=e("+BJd"),p=e("mr32"),o=e("jrin"),K=e("k1fw"),V=e("miYZ"),l=e("tsqr"),i=e("9og8"),C=e("WmNS"),c=e.n(C),n=e("xvlK"),Z=e("Qiat"),N=e("y8nQ"),ue=e("Vl3Y"),ve=e("5NDa"),se=e("5rEg"),$=e("VMEa"),te=e("rmhi"),k=e("Qurx"),oe=e("F/zT"),he=e("5qq5"),fe=e("BiO0"),w=e("hd5d"),je=e("3fxf"),ne=e("ovOe"),X=e.n(ne),t=e("nKUr"),pe=function(d){var j=d.value,T=d.onChange,R=d.type,G=R===void 0?"file":R,m=Object(r.useState)(!1),W=Object(F.a)(m,2),Y=W[0],g=W[1];return Object(t.jsxs)(E.a.Fragment,{children:[Object(t.jsxs)($.b.Group,{children:[Object(t.jsx)(se.a,{value:j,readOnly:!0}),Object(t.jsxs)(s.a,{size:"small",type:"primary",onClick:function(){return g(!Y)},children:["toggle ",G," browser"]})]}),Y&&Object(t.jsx)(je.a,{onFile:function(Q,M){return T&&T("".concat(M,"/").concat(Q.name))}})]})},ge=function(d){var j=Object(a.i)(),T=d.visible,R=d.onVisibleChange,G=d.onFinish,m=d.id,W=ue.a.useForm(),Y=Object(F.a)(W,1),g=Y[0],J=!m||m===-1,Q=Object(r.useState)("text"),M=Object(F.a)(Q,2),f=M[0],A=M[1];Object(r.useEffect)(function(){m&&m!==-1?Object(O.d)(m).then(function(H){H.success&&(g.setFieldsValue(H.data),A(H.data.type))}):(g.resetFields(),A("text"))},[m,g]);var le=Object(r.useCallback)(function(H){H.type&&H.type!==f&&A(H.type)},[f]);return Object(t.jsxs)(te.a,{form:g,title:j.formatMessage({id:m?"editSetting":"newSetting",defaultMessage:m?"editSetting":"newSetting"}),width:"60vw",visible:T,onVisibleChange:R,onFinish:G,onValuesChange:le,children:[Object(t.jsxs)($.b.Group,{children:[Object(t.jsx)(k.a,{label:Object(t.jsx)(a.a,{id:"group",defaultMessage:"group"}),rules:[{required:!0}],width:"md",name:"group"})," ",Object(t.jsx)(k.a,{label:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"})]}),Object(t.jsxs)($.b.Group,{children:[Object(t.jsx)(oe.a,{name:"enumerable",label:Object(t.jsx)(a.a,{id:"enumerable",defaultMessage:"enumerable"})}),Object(t.jsx)(oe.a,{name:"public",label:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"})})]}),Object(t.jsx)($.b.Group,{children:Object(t.jsx)(he.a.Group,{disabled:!J,name:"type",label:Object(t.jsx)(a.a,{id:"type"}),options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"},{label:"json",value:"json"},{label:"file",value:"file"},{label:"image",value:"image"}]})}),Object(t.jsxs)("div",{children:[f==="text"&&Object(t.jsx)(k.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"})}),f==="json"&&Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(fe.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"}),tooltip:"".concat(j.formatMessage({id:"example_json"}),': {"name":"John", "age":30, "city":["New York","Warsaw"]}')}),Object(t.jsx)($.b.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(X.a,{src:JSON.parse(g.getFieldValue("value"))})}catch(ae){return Object(t.jsx)(X.a,{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]}),(f==="file"||f==="image")&&Object(t.jsx)($.b.Item,{name:"value",label:"value",tooltip:"select file from current repository or upload new one",valuePropName:"value",children:Object(t.jsx)(pe,{type:f})}),f==="markdown"&&Object(t.jsx)($.b.Item,{name:"value",label:"value",tooltip:"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.",valuePropName:"value",children:Object(t.jsx)(w.a,{directory:"settings/wysiwyg"})})]})]})},L=ge,x=e("G3dp"),q=e("/MfK"),Oe=function(){var z=Object(i.a)(c.a.mark(function d(j,T,R){var G;return c.a.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return G=l.default.loading(j.formatMessage({id:"loading"})),W.prev=1,W.next=4,R&&R!==-1?Object(O.h)(R,Object(K.a)({},T)):Object(O.b)(Object(K.a)({},T));case 4:return G(),l.default.success(j.formatMessage({id:"success"})),W.abrupt("return",!0);case 9:return W.prev=9,W.t0=W.catch(1),G(),l.default.error(j.formatMessage({id:"error"})),W.abrupt("return",!1);case 14:case"end":return W.stop()}},d,null,[[1,9]])}));return function(j,T,R){return z.apply(this,arguments)}}(),ie=function(){var z=Object(i.a)(c.a.mark(function d(j,T){var R;return c.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return R=l.default.loading(j.formatMessage({id:"loading"})),m.prev=1,m.next=4,Object(O.c)(T);case 4:return R(),l.default.success(j.formatMessage({id:"success"})),m.abrupt("return",!0);case 9:return m.prev=9,m.t0=m.catch(1),R(),l.default.error(j.formatMessage({id:"error"})),m.abrupt("return",!1);case 14:case"end":return m.stop()}},d,null,[[1,9]])}));return function(j,T){return z.apply(this,arguments)}}(),ce=function(){var d=Object(r.useState)(!1),j=Object(F.a)(d,2),T=j[0],R=j[1],G=Object(r.useState)([]),m=Object(F.a)(G,2),W=m[0],Y=m[1],g=Object(r.useRef)(),J=Object(a.i)();Object(r.useEffect)(function(){Object(O.e)().then(function(M){M.success&&Y(M.data)})},[]);var Q=[{title:Object(t.jsx)(a.a,{id:"group",defaultMessage:"group"}),dataIndex:"group",hideInSearch:!1,key:"group",valueType:"select",width:100,valueEnum:W.sort().reduce(function(M,f){return Object(K.a)(Object(K.a)({},M),{},Object(o.a)({},f,f))},{})},{title:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"enumerable",defaultMessage:"enumerable"}),dataIndex:"enumerable",hideInForm:!0,hideInSearch:!0,render:function(f,A){return Object(t.jsx)(p.a,{color:A.enumerable?"success":"error",children:Object(t.jsx)(a.a,{id:A.enumerable?"true":"false",defaultMessage:A.enumerable?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(f,A){return Object(t.jsx)(p.a,{color:A.public?"success":"error",children:Object(t.jsx)(a.a,{id:A.public?"true":"false",defaultMessage:A.public?"true":"false"})})}},{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(f,A){return[Object(t.jsx)(h.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(s.a,{type:"primary",icon:Object(t.jsx)(x.a,{}),onClick:function(){return R(A.id)}})},"edit"),Object(t.jsx)(u.a,{title:Object(t.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(i.a)(c.a.mark(function le(){var H;return c.a.wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.next=2,ie(J,A.id);case 2:H=be.sent,H&&(R(!1),g.current&&g.current.reload());case 4:case"end":return be.stop()}},le)})),okText:Object(t.jsx)(a.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(a.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(h.a,{title:Object(t.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(s.a,{type:"primary",icon:Object(t.jsx)(q.a,{}),danger:!0})})},"delete")]}}];return Object(t.jsxs)(E.a.Fragment,{children:[Object(t.jsx)(Z.a,{headerTitle:J.formatMessage({id:"menu.settings"}),actionRef:g,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[Object(t.jsxs)(s.a,{type:"primary",onClick:function(){R(-1)},children:[Object(t.jsx)(n.a,{})," ",Object(t.jsx)(a.a,{id:"pages.searchTable.new"})]},"primary")]},request:function(f){var A=f.pageSize,le=f.current,H=f.group;return Object(O.f)({pageSize:A,current:le,group:H}).then(function(ae){return ae.success?{data:ae.data,total:ae.meta.total,success:!0}:[]})},columns:Q}),Object(t.jsx)(L,{groups:W,id:T,visible:Number.isInteger(T),onVisibleChange:function(f){return f===!1&&R(!1)},onFinish:function(){var M=Object(i.a)(c.a.mark(function f(A){var le;return c.a.wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,Oe(J,A,Number(T));case 2:le=ae.sent,le&&(R(!1),g.current&&g.current.reload());case 4:case"end":return ae.stop()}},f)}));return function(f){return M.apply(this,arguments)}}()})]})},re=ce,me=e("tU7J"),Ee=e("wFql"),_e=e("Fghh"),Pe=Ee.a.Text,de;(function(z){z.Array="array",z.String="string"})(de||(de={}));var ye=function(d,j){return j===de.Array?d&&Array.isArray(d)?JSON.stringify(d):"[]":d},Me=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",j=arguments.length>1?arguments[1]:void 0;if(j===de.Array){var T=JSON.parse(d);return T&&Array.isArray(T)?T:[]}return d},De=function(d){var j=Object(_e.j)(),T=d.visible,R=d.onVisibleChange,G=d.onFinish,m=d.value,W=ue.a.useForm(),Y=Object(F.a)(W,1),g=Y[0],J=Object(r.useMemo)(function(){return(m.rules||[]).includes(de.Array)?de.Array:de.String},[m.rules]);return Object(r.useEffect)(function(){g.setFieldsValue(Object(K.a)(Object(K.a)({},m),{},{value:ye(m.value,J)}))},[J,m,g]),Object(t.jsxs)(te.a,{form:g,title:m.full_key,width:"60vw",visible:T,onVisibleChange:R,onFinish:Object(i.a)(c.a.mark(function Q(){var M;return c.a.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,Object(O.g)({key:m.full_key,value:Me(g.getFieldsValue().value,J)});case 2:if(M=A.sent,!M.success){A.next=6;break}return G(M.success===!0),A.abrupt("return",M.success);case 6:return A.abrupt("return");case 7:case"end":return A.stop()}},Q)})),children:[Object(t.jsxs)($.b.Group,{children:[Object(t.jsx)(oe.a,{disabled:!0,name:"public",label:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"})}),Object(t.jsx)(oe.a,{disabled:!0,name:"readonly",label:Object(t.jsx)(a.a,{id:"readonly",defaultMessage:"readonly"})}),Object(t.jsx)($.b.Item,{shouldUpdate:!0,label:Object(t.jsx)(a.a,{id:"rules",defaultMessage:"rules"}),children:function(){return Object(t.jsx)(Pe,{code:!0,children:JSON.stringify(g.getFieldValue("rules"))})}})]}),J===de.Array?Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(fe.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"}),tooltip:"".concat(j.formatMessage({id:"example_json"}),': ["first_field_name", "second_field_name"]')}),Object(t.jsx)($.b.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(X.a,{src:JSON.parse(g.getFieldValue("value"))})}catch(M){return Object(t.jsx)(X.a,{src:JSON.parse('{ "error": "cannot parse this array" }')})}}})]}):Object(t.jsx)(k.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"})})]})},Ce=De,xe=[{title:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"readonly",defaultMessage:"readonly"}),dataIndex:"readonly",hideInForm:!0,hideInSearch:!0,render:function(d,j){return Object(t.jsx)(p.a,{color:j.readonly?"success":"error",children:Object(t.jsx)(a.a,{id:j.readonly?"true":"false",defaultMessage:j.readonly?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(d,j){return Object(t.jsx)(p.a,{color:j.public?"success":"error",children:Object(t.jsx)(a.a,{id:j.public?"true":"false",defaultMessage:j.public?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0}],Te=function(d){var j=d.packageName,T=d.values,R=d.onValueUpdated,G=Object(a.i)(),m=Object(r.useState)(),W=Object(F.a)(m,2),Y=W[0],g=W[1],J=Object(r.useMemo)(function(){var Q=T[j],M=Object.entries(Q).map(function(f){return Object(K.a)({key:f[0],full_key:"".concat(j,".").concat(f[0])},f[1])});return M},[T,j]);return Object(t.jsxs)(E.a.Fragment,{children:[Object(t.jsx)(Z.a,{headerTitle:G.formatMessage({id:"menu.settings"}),rowKey:"key",search:{labelWidth:120},dataSource:J,columns:[].concat(xe,[{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(M,f){return[Object(t.jsx)(h.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(s.a,{type:"primary",icon:Object(t.jsx)(x.a,{}),onClick:function(){return g(f)}})},"edit")]}}])}),Y&&Object(t.jsx)(Ce,{value:Y,visible:Y!==void 0,onVisibleChange:function(M){return M===!1&&g(void 0)},onFinish:Object(i.a)(c.a.mark(function Q(){return c.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:R();case 1:case"end":return f.stop()}},Q)}))})]})},Ae=Te,Ie=function(d){return d.replaceAll("escolalms","").split("_").join("")},Be=v.default=function(){var z=Object(y.g)(),d=Object(a.i)(),j=z.tab,T=j===void 0?"user_settings":j,R=Object(r.useState)(),G=Object(F.a)(R,2),m=G[0],W=G[1],Y=Object(r.useCallback)(function(){Object(O.a)().then(function(g){g.success&&W(g.data)})},[]);return Object(r.useEffect)(function(){Y()},[]),m?Object(t.jsx)(P.a,{title:Object(t.jsx)(a.a,{id:"settings"}),header:{breadcrumb:{routes:[{path:"settings",breadcrumbName:d.formatMessage({id:"menu.Settings"})},{path:String(T),breadcrumbName:String(T)}]}},children:Object(t.jsxs)(D.a,{tabs:{type:"card",activeKey:T,onChange:function(J){return a.d.push("/settings/".concat(J))}},children:[Object(t.jsx)(D.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"user.settings"}),children:Object(t.jsx)(re,{})},"user_settings"),Object.keys(m).map(function(g){return Object(t.jsxs)(D.a.TabPane,{tab:Object(t.jsxs)("span",{children:[Object(t.jsx)(a.a,{id:"package"})," ",Ie(g)]}),children:[Object(t.jsx)(Ae,{values:m,packageName:g,onValueUpdated:function(){return Y()}}),g]},g)})]})}):Object(t.jsx)(_.a,{})}},etVw:function(ee,v,e){"use strict";var B=e("DZo9"),_=e("8z0m"),F=e("+L6B"),r=e("2/Rp"),E=e("wx14"),D=e("q1tI"),y=e.n(D),a=e("z7Xi"),P=e("WFLz"),O=function(u,S){var h=u.fieldProps,b=u.name,s=u.action,I=u.accept,p=u.listType,o=u.title,K=o===void 0?"\u5355\u51FB\u4E0A\u4F20":o,V=u.max,l=u.icon,i=l===void 0?y.a.createElement(a.a,null):l,C=u.value,c=u.buttonProps,n=u.onChange,Z=u.disabled,N=u.proFieldProps,ue=u.fileList,ve=(V===void 0||!C||(C==null?void 0:C.length)<V)&&(N==null?void 0:N.mode)!=="read",se=(p!=null?p:h==null?void 0:h.listType)==="picture-card";return y.a.createElement(_.a,Object(E.a)({action:s,accept:I,ref:S,name:b||"file",listType:p||"picture",fileList:ue!=null?ue:C},h,{onChange:function(te){var k;n==null||n(te),h==null||(k=h.onChange)===null||k===void 0||k.call(h,te)}}),ve&&(se?y.a.createElement("span",null,i," ",K):y.a.createElement(r.a,Object(E.a)({disabled:Z||(h==null?void 0:h.disabled)},c),i,K)))};v.a=Object(P.a)(y.a.forwardRef(O),{getValueFromEvent:function(u){return u.fileList}})},hd5d:function(ee,v,e){"use strict";var B=e("9og8"),_=e("WmNS"),F=e.n(_),r=e("q1tI"),E=e.n(r),D=e("3Ef1"),y=e.n(D),a=e("BAh9"),P=e("vtG9"),O=e.n(P),U=e("9kvl"),u=e("nKUr"),S=e.n(u),h=function(s){var I=s.value,p=s.onChange,o=s.directory,K=o===void 0?"/wysiwyg":o,V=Object(U.i)();return Object(u.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(u.jsx)(y.a,{uploadImage:function(){var l=Object(B.a)(F.a.mark(function i(C){var c,n;return F.a.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,Object(a.e)(C,K);case 2:if(c=N.sent,!c.success){N.next=6;break}return n=c.data[0].name.includes("/")?c.data[0].name:"".concat(K).concat(c.data[0].name),N.abrupt("return",Object(a.d)(n,1e3));case 6:throw new Error("Error while uploading");case 7:case"end":return N.stop()}},i)}));return function(i){return l.apply(this,arguments)}}(),defaultValue:I||"",onChange:function(i){return p&&p(i())},placeholder:V.formatMessage({id:"wysiwyg_placeholder"})})})};v.a=h},lLVY:function(ee,v,e){},vtG9:function(ee,v,e){}}]);
