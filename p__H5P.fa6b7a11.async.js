(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"5YLw":function($,p,e){"use strict";var _=e("DBJ/"),f=e("q1tI"),g=e.n(f),c=e("nKUr"),S=e.n(c),j=function(M){var E=M.onSuccess,b=M.onError,y=M.hideLabel;return Object(c.jsx)(_.a,{url:"/api/admin/hh5p/content/upload",name:"h5p_file",accept:".h5p",hideLabel:y,onChange:function(r){r.file.status==="done"&&r.file.response&&E(r.file.response),r.file.status==="error"&&b()}})};p.a=j},"DBJ/":function($,p,e){"use strict";var _=e("k1fw"),f=e("y8nQ"),g=e("Vl3Y"),c=e("tJVT"),S=e("etVw"),j=e("q1tI"),U=e.n(j),M=e("9kvl"),E=e("qFDU"),b=e("nKUr"),y=e.n(b);function C(r){var R=r.onChange,a=r.onUpload,v=r.url,d=r.name,l=r.extra,u=r.accept,o=r.data,s=r.wrapInForm,I=s===void 0?!0:s,w=r.title,z=r.formProps,t=r.maxFiles,J=r.clearListAfterUpload,F=r.hideLabel,V=Object(j.useState)(),H=Object(c.a)(V,2),B=H[0],G=H[1],P=Object(M.l)();return o&&o[d]&&delete o[d],Object(b.jsx)(E.a,{condition:I,wrap:function(T){return Object(b.jsx)(g.a,Object(_.a)(Object(_.a)({},z),{},{children:T}))},children:Object(b.jsx)(S.a,{title:w||" ".concat(P.formatMessage({id:"upload_click_here"})),placeholder:P.formatMessage({id:"upload_click_here"}),onChange:function(T){G(T),R&&R(T),T.file.status==="done"&&(a&&a(T.file.response),J&&G(void 0))},label:!F&&Object(b.jsx)(M.a,{id:"upload"}),max:t!=null?t:2,fieldProps:{data:o,accept:u,name:d,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(v),extra:l,fileList:B==null?void 0:B.fileList})})}p.a=C},Unir:function($,p,e){"use strict";e.r(p);var _=e("P2fV"),f=e("NJEC"),g=e("5Dmo"),c=e("3S7+"),S=e("+L6B"),j=e("2/Rp"),U=e("qLMh"),M=e("miYZ"),E=e("tsqr"),b=e("9og8"),y=e("tJVT"),C=e("xvlK"),r=e("q1tI"),R=e.n(r),a=e("9kvl"),v=e("55Ip"),d=e("tMyG"),l=e("Qiat"),u=e("nzng"),o=e("G3dp"),s=e("/MfK"),I=e("2PG1"),w=e("4KAj"),z=e("5YLw"),t=e("nKUr"),J=e.n(t),F=function(){var H=Object(r.useState)(!1),B=Object(y.a)(H,2),G=B[0],P=B[1],x=Object(r.useRef)(),T=Object(a.l)(),Y=Object(r.useCallback)(function(){var O=Object(b.a)(Object(U.a)().mark(function i(n){var D,A;return Object(U.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return P(!0),D=E.b.loading(Object(t.jsx)(a.a,{id:"loading",defaultMessage:"loading"})),m.prev=2,m.next=5,Object(u.e)(n);case 5:return D(),E.b.success(Object(t.jsx)(a.a,{id:"success",defaultMessage:"success"})),P(!1),(A=x.current)===null||A===void 0||A.reload(),m.abrupt("return",!0);case 12:return m.prev=12,m.t0=m.catch(2),D(),E.b.error(Object(t.jsx)(a.a,{id:"error",defaultMessage:"error"})),P(!1),m.abrupt("return",!1);case 18:case"end":return m.stop()}},i,null,[[2,12]])}));return function(i){return O.apply(this,arguments)}}(),[x]),N=Object(r.useCallback)(function(){var O=Object(b.a)(Object(U.a)().mark(function i(n,D){var A,W,m,K,L;return Object(U.a)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return P(!0),A=E.b.loading(Object(t.jsx)(a.a,{id:"loading",defaultMessage:"loading"})),h.prev=2,h.next=5,fetch("".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/admin/hh5p/content/").concat(n,"/export"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}});case 5:if(W=h.sent,W.ok){h.next=8;break}throw Error("Error occured");case 8:return A(),P(!1),E.b.success(Object(t.jsx)(a.a,{id:"downloading",defaultMessage:"Downloading"})),h.next=13,W.blob();case 13:m=h.sent,K=window.URL.createObjectURL(m),L=document.createElement("a"),L.href=K,L.download="".concat(D.split(" ").join("-").toLocaleLowerCase()),L.click(),L.remove(),h.next=28;break;case 22:return h.prev=22,h.t0=h.catch(2),A(),P(!1),E.b.error(Object(t.jsx)(a.a,{id:"cant-download-file",defaultMessage:"Can't download file"})),h.abrupt("return");case 28:case"end":return h.stop()}},i,null,[[2,22]])}));return function(i,n){return O.apply(this,arguments)}}(),[]),Q=[{title:Object(t.jsx)(a.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",sorter:!0,search:!1},{title:Object(t.jsx)(a.a,{id:"newH5P",defaultMessage:"newH5P"}),dataIndex:"upload",hideInSearch:!1,hideInTable:!0,renderFormItem:function(){return[Object(t.jsx)(z.a,{hideLabel:!0,onSuccess:function(){x.current&&x.current.reload(),E.b.success(Object(t.jsx)(a.a,{id:"H5P_uploaded",defaultMessage:"new H5P uploaded successfully"}))},onError:function(){return E.b.error(Object(t.jsx)(a.a,{id:"error",defaultMessage:"error"}))}},"upload")]}},{title:Object(t.jsx)(a.a,{id:"title",defaultMessage:"title"}),dataIndex:"title",sorter:function(i,n){return i.title.length-n.title.length},render:function(i,n){return n.title}},{title:Object(t.jsx)(a.a,{id:"library",defaultMessage:"library"}),dataIndex:"library",sorter:function(i,n){return i.library.title.length-n.library.title.length},search:!1,render:function(i,n){return n.library.title}},{title:Object(t.jsx)(a.a,{id:"library_id",defaultMessage:"library_id"}),dataIndex:"library_id",sorter:function(i,n){return i.library.id-n.library.id},render:function(i,n){return n.library.id}},{title:Object(t.jsx)(a.a,{id:"count_h5p",defaultMessage:"count_h5p"}),dataIndex:"count_h5p",sorter:function(i,n){return i.count_h5p-n.count_h5p},search:!1,render:function(i,n){return n.count_h5p}},{title:Object(t.jsx)(a.a,{id:"options",defaultMessage:"options"}),dataIndex:"option",valueType:"option",render:function(i,n){return[Object(t.jsx)(v.a,{to:"/courses/h5ps/".concat(n.id),children:Object(t.jsx)(c.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(j.a,{type:"primary",icon:Object(t.jsx)(o.a,{})})})},"edit"),Object(t.jsx)(f.a,{disabled:n.count_h5p!==0,title:Object(t.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:function(){return n.id&&Y(n.id)},okText:Object(t.jsx)(a.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(a.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(c.a,{title:Object(t.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(j.a,{disabled:n.count_h5p!==0,type:"primary",icon:Object(t.jsx)(s.a,{}),danger:!0})})},"delete"),Object(t.jsx)(v.a,{to:"/courses/h5ps/preview/".concat(n.id),children:Object(t.jsx)(c.a,{title:Object(t.jsx)(a.a,{id:"preview",defaultMessage:"preview"}),children:Object(t.jsx)(j.a,{icon:Object(t.jsx)(I.a,{})})})},"preview"),Object(t.jsx)(c.a,{title:Object(t.jsx)(a.a,{id:"export",defaultMessage:"export"}),children:Object(t.jsx)(j.a,{icon:Object(t.jsx)(w.a,{}),onClick:function(){return N(n.id,n.title)}})},"export")]}}];return Object(t.jsx)(d.a,{children:Object(t.jsx)(l.a,{loading:G,headerTitle:T.formatMessage({id:"menu.Courses.H5Ps",defaultMessage:"H5Ps List"}),actionRef:x,rowKey:"id",search:{layout:"vertical"},toolBarRender:function(){return[Object(t.jsx)(v.a,{to:"/courses/h5ps/new",children:Object(t.jsxs)(j.a,{type:"primary",children:[Object(t.jsx)(C.a,{})," ",Object(t.jsx)(a.a,{id:"new",defaultMessage:"new"})]},"primary")},"new")]},request:function(i,n){var D=i.pageSize,A=i.current,W=i.title,m=i.library_id;P(!0);var K=n&&Object.entries(n)[0];return Object(u.d)({title:W,library_id:m,pageSize:D,current:A,order_by:K&&K[0],order:K?K[1]==="ascend"?"ASC":"DESC":void 0}).then(function(L){return P(!1),L.success?{data:L.data,total:L.meta.total,success:!0}:[]})},columns:Q})})};p.default=F},nzng:function($,p,e){"use strict";e.d(p,"d",function(){return S}),e.d(p,"c",function(){return E}),e.d(p,"b",function(){return b}),e.d(p,"f",function(){return y}),e.d(p,"e",function(){return r}),e.d(p,"a",function(){return a});var _=e("qLMh"),f=e("k1fw"),g=e("9og8"),c=e("9kvl");function S(d,l){return j.apply(this,arguments)}function j(){return j=Object(g.a)(Object(_.a)().mark(function d(l,u){return Object(_.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(c.i)("/api/admin/hh5p/content",Object(f.a)({method:"GET",params:Object(f.a)(Object(f.a)({},l),{},{per_page:l.pageSize,page:l.current})},u||{})));case 1:case"end":return s.stop()}},d)})),j.apply(this,arguments)}function U(d,l){return M.apply(this,arguments)}function M(){return M=Object(g.a)(Object(_.a)().mark(function d(l,u){return Object(_.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(c.i)("/api/admin/hh5p/content/".concat(l),Object(f.a)({method:"GET"},u||{})));case 1:case"end":return s.stop()}},d)})),M.apply(this,arguments)}var E=function(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en",o=arguments.length>2?arguments[2]:void 0,s=l?"/api/admin/hh5p/editor/".concat(l):"/api/admin/hh5p/editor";return s=u?"".concat(s,"?lang=").concat(u):s,Object(c.i)(s,Object(f.a)({method:"GET"},o||{}))},b=function(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en",o=arguments.length>2?arguments[2]:void 0,s="/api/admin/hh5p/content/".concat(l);return s=u?"".concat(s,"?lang=").concat(u):s,Object(c.i)(s,Object(f.a)({method:"GET"},o||{}))};function y(d,l,u){return C.apply(this,arguments)}function C(){return C=Object(g.a)(Object(_.a)().mark(function d(l,u,o){return Object(_.a)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",Object(c.i)(u?"/api/admin/hh5p/content/".concat(u):"/api/admin/hh5p/content",Object(f.a)({method:"POST",headers:{"Content-Type":"application/json"},data:l},o||{})));case 1:case"end":return I.stop()}},d)})),C.apply(this,arguments)}function r(d){return R.apply(this,arguments)}function R(){return R=Object(g.a)(Object(_.a)().mark(function d(l){return Object(_.a)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(c.i)("/api/admin/hh5p/content/".concat(l),{method:"DELETE"}));case 1:case"end":return o.stop()}},d)})),R.apply(this,arguments)}function a(d){return v.apply(this,arguments)}function v(){return v=Object(g.a)(Object(_.a)().mark(function d(l){return Object(_.a)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",Object(c.i)("/api/admin/hh5p/content?per_page=0",Object(f.a)({method:"GET"},l||{})));case 1:case"end":return o.stop()}},d)})),v.apply(this,arguments)}}}]);
