(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[4981,2803,2238,7883],{48959:function(Qe,xe,t){"use strict";var Me=t(28248),_=t(80854),me=t(85893),T=function(f){var L=f.open,u=f.onOk,N=f.onCancel,O=f.title,H=f.content,j=f.okText,ae=f.loading;return(0,me.jsx)(Me.Z,{width:"600px",title:O!=null?O:(0,me.jsx)(_.FormattedMessage,{id:"confirmModal.title"}),open:L,onOk:u,onCancel:N,okText:j!=null?j:(0,me.jsx)(_.FormattedMessage,{id:"save"}),cancelText:(0,me.jsx)(_.FormattedMessage,{id:"cancel"}),confirmLoading:ae,children:H!=null?H:(0,me.jsx)("p",{children:(0,me.jsx)(_.FormattedMessage,{id:"confirmModal.content"})})})};xe.Z=T},11312:function(Qe,xe,t){"use strict";t.d(xe,{nu:function(){return E},rL:function(){return se},Du:function(){return ce}});var Me=t(9783),_=t.n(Me),me=t(97857),T=t.n(me),de=t(19632),f=t.n(de),L=t(5574),u=t.n(L),N=t(45919),O=t(66419),H=t(78677),j=t(26271),ae=t(78957),D=t(66309),J=t(72051),G=t(71230),B=t(72269),w=t(83863),l=t(60943),n=t(67294),U=t(70804),e=t(80854),Q=t(62235),$=t(15009),Y=t.n($),h=t(99289),ne=t.n(h),_e=t(58638),pe=t(14726),R=t(76841),p=t(85893),m=function(Z){var g=Z.course_id,b=Z.stat,X=b===void 0?"EscolaLms\\Reports\\Stats\\Course\\FinishedTopics":b,ue=(0,n.useState)(!1),re=u()(ue,2),F=re[0],W=re[1],ie=(0,n.useCallback)(function(ee){return ne()(Y()().mark(function Ee(){var Pe,Te;return Y()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return W(!0),K.prev=1,K.next=4,(0,R._g)(ee,{stat:X});case 4:Pe=K.sent,Pe instanceof Blob&&(Te=document.createElement("a"),Te.href=window.URL.createObjectURL(Pe),Te.download="finished_topics_".concat(g,".xlsx"),document.body.appendChild(Te),Te.click(),document.body.removeChild(Te)),K.next=11;break;case 8:K.prev=8,K.t0=K.catch(1),console.error(K.t0);case 11:return K.prev=11,W(!1),K.finish(11);case 14:case"end":return K.stop()}},Ee,null,[[1,8,11,14]])}))},[X]);return(0,p.jsxs)(pe.ZP,{type:"primary",loading:F,onClick:ie(g),children:[(0,p.jsx)(_e.Z,{})," ",(0,p.jsx)(e.FormattedMessage,{id:"export"})]})},k=function(Z){return Z.topicable.content.contents?Object.values(Z.topicable.content.contents)[0].library:"H5P"},ce=function(Z){var g=Z.course_id,b=Z.topics,X=Z.stats,ue=(0,n.useState)(!1),re=u()(ue,2),F=re[0],W=re[1],ie=(0,n.useMemo)(function(){return[{title:(0,p.jsx)(e.FormattedMessage,{id:"user"}),dataIndex:"id",render:function(Pe){return(0,p.jsx)(Q.Z,{type:"App\\Models\\User",type_id:Pe})}},{title:(0,p.jsx)(e.FormattedMessage,{id:"email"}),dataIndex:"email"}].concat(f()(b.map(function(Ee){var Pe,Te=(Pe=Ee.topicable_type)===null||Pe===void 0?void 0:Pe.split("\\").pop();return Te==="H5P"&&(Te=k(Ee)),{render:function(K){var we=0;switch(K&&(K.started_at&&K.finished_at?we=1:K.started_at&&(we=2)),we){case 1:return(0,p.jsxs)(ae.Z,{children:[(0,p.jsx)(D.Z,{color:"success",children:"F"}),F&&(K==null?void 0:K.seconds)&&(0,p.jsx)("small",{children:(0,O.Im)(K.seconds)})]});case 2:return(0,p.jsxs)(ae.Z,{children:[(0,p.jsx)(D.Z,{color:"blue",children:"S"}),F&&(K==null?void 0:K.seconds)&&(0,p.jsx)("small",{children:(0,O.Im)(K.seconds)})]});case 0:default:return(0,p.jsx)(n.Fragment,{children:(0,p.jsx)(D.Z,{color:"error",children:"N"})})}},title:(0,p.jsxs)("small",{children:[(0,p.jsx)(D.Z,{children:Te})," ",Ee.title]}),dataIndex:Ee.id}})))},[b,F]),ee=(0,n.useMemo)(function(){return X.map(function(Ee){return b.reduce(function(Pe,Te){var Oe=Ee.topics.find(function(K){return K.id===Te.id});return T()(T()({},Pe),{},_()({},Number(Te.id),Oe!=null?Oe:0))},{email:Ee.email,id:Ee.id})})},[X,b]);return(0,p.jsx)(J.Z,{title:function(){return(0,p.jsxs)(G.Z,{justify:"space-between",align:"middle",children:[(0,p.jsxs)(ae.Z,{children:[(0,p.jsx)(e.FormattedMessage,{id:"Finished",defaultMessage:"Finished:"})," ",(0,p.jsx)(D.Z,{color:"success",children:"F"}),(0,p.jsx)(e.FormattedMessage,{id:"Started",defaultMessage:"Started:"})," ",(0,p.jsx)(D.Z,{color:"blue",children:"S"}),(0,p.jsx)(e.FormattedMessage,{id:"NotStarted",defaultMessage:"Not Started:"})," ",(0,p.jsx)(D.Z,{color:"error",children:"N"}),(0,p.jsx)(e.FormattedMessage,{id:"ShowMinutes",defaultMessage:"Show minutes spent on topic:"})," ",(0,p.jsx)(B.Z,{checked:F,onChange:function(Te){return W(Te)}})]}),(0,p.jsx)(m,{course_id:g})]})},columns:ie,dataSource:ee,size:"small",scroll:{x:1500},components:{table:function(Pe){return(0,p.jsx)(U.Z,{horizontal:!0,style:{maxWidth:"auto"},hideScrollbars:!1,children:(0,p.jsx)("table",T()({},Pe))})}}})},se=function(Z){var g=Z.stats,b=Z.attempts,X=(0,n.useMemo)(function(){return[{title:(0,p.jsx)(e.FormattedMessage,{id:"user"}),dataIndex:"id",render:function(F){return(0,p.jsx)(Q.Z,{type:"App\\Models\\User",type_id:F})}},{title:(0,p.jsx)(e.FormattedMessage,{id:"email"}),dataIndex:"email"},{title:(0,p.jsx)(e.FormattedMessage,{id:"attempt",defaultMessage:"Attempt"}),dataIndex:"attempt"},{title:(0,p.jsx)(e.FormattedMessage,{id:"finished_at",defaultMessage:"Finished at"}),dataIndex:"finished_at",render:function(F){return F?(0,l.WU)(new Date(F),N.Cu):""}}]},[]),ue=(0,n.useMemo)(function(){return g.map(function(re){var F=re.id,W=re.email,ie=re.finished_at,ee=b==null?void 0:b.find(function(Pe){return Pe.id===F}),Ee=Array.isArray(ee==null?void 0:ee.attempts)?ee==null?void 0:ee.attempts.length:0;return{id:F,email:W,finished_at:ie,attempt:Ee}})},[g]);return(0,p.jsx)(J.Z,{title:function(){return(0,p.jsx)(ae.Z,{children:(0,p.jsx)(e.FormattedMessage,{id:"course.finished",defaultMessage:"Finished"})})},columns:X,dataSource:ue,size:"small",scroll:{x:500}})},E=function(Z){var g=Z.stats,b=(0,n.useState)(null),X=u()(b,2),ue=X[0],re=X[1],F=(0,n.useState)(null),W=u()(F,2),ie=W[0],ee=W[1],Ee=(0,e.useIntl)(),Pe=(0,n.useMemo)(function(){return g.flatMap(function(Oe){return Object.values(Oe.attempts).flatMap(function(K){var we=K.dates,Xe=K.attempt,Ue=Object.values(we).flatMap(function(Je){var ke=Je.date,Ve=Je.seconds_total;return{date:ke,attempt:Xe,seconds_total:Ve,email:Oe.email}});return Ue})})},[g]),Te={xField:"date",yField:"seconds_total",seriesField:"attempt",isStack:!0,xAxis:{label:{autoHide:!0,autoRotate:!1}},slider:{start:0,end:1},label:{position:"middle",layout:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"}]}};return(0,p.jsx)(j.ZP,{title:(0,p.jsxs)(ae.Z,{children:[(0,p.jsx)(e.FormattedMessage,{id:"course.interactions_time_in_days"}),(0,p.jsx)(w.default,{showSearch:!0,value:ue,onChange:function(K){re(K),ee(null)},placeholder:(0,p.jsx)(e.FormattedMessage,{id:"select_person",defaultMessage:"Select a person"}),children:g.map(function(Oe){var K=Oe.id,we=Oe.email;return(0,p.jsx)(w.default.Option,{value:we,children:we},K)})}),(0,p.jsx)(w.default,{value:ie,onChange:function(K){return ee(K)},disabled:ue===null,placeholder:(0,p.jsx)(e.FormattedMessage,{id:"select_attempt",defaultMessage:"Select attempt"}),children:f()(new Set(Pe.filter(function(Oe){var K=Oe.email;return K===ue}).map(function(Oe){var K=Oe.attempt;return K}))).map(function(Oe){return(0,p.jsxs)(w.default.Option,{value:Oe,children:[(0,p.jsx)(e.FormattedMessage,{id:"attempt",defaultMessage:"Attempt"})," ",Oe]},Oe)})})]}),colSpan:12,layout:"center",children:(0,p.jsx)("div",{style:{overflow:"auto",minHeight:"400px",width:"100%"},children:(0,p.jsx)(H.Z,T()(T()({},Te),{},{tooltip:{title:"".concat(Ee.formatMessage({id:"attempt"})),formatter:function(K){var we=Math.floor(+K.seconds_total/60),Xe=+K.seconds_total>60?+K.seconds_total-we*60:0;return{name:K.attempt,value:"".concat(we,"m ").concat(Xe,"s")}}},data:Pe.filter(function(Oe){var K=Oe.email;return K===ue}).filter(function(Oe){var K=Oe.attempt;return Number.isInteger(ie)?K===ie:!0})}))})})}},28225:function(Qe,xe,t){"use strict";var Me=t(28248),_=t(80854),me=t(85893),T=function(f){var L=f.visible,u=f.setManage;return(0,me.jsx)(Me.Z,{width:"600px",title:(0,me.jsx)(_.FormattedMessage,{id:"course.validate_edit.header",defaultMessage:"course.validate_edit.header"}),visible:L,onOk:function(){return u({showModal:!1,disableEdit:!1,clicked:!0})},onCancel:function(){return u({showModal:!1,disableEdit:!0,clicked:!1})},okText:"OK",cancelText:"Cancel",children:(0,me.jsx)("p",{children:(0,me.jsx)(_.FormattedMessage,{id:"course.validate_edit.content",defaultMessage:"course.validate_edit.content"})})})};xe.Z=T},20568:function(Qe,xe,t){"use strict";t.d(xe,{Z:function(){return Q}});var Me=t(19632),_=t.n(Me),me=t(97857),T=t.n(me),de=t(5574),f=t.n(de),L=t(67294),u=t(17578),N=t(78957),O=t(25093),H=t(96365),j=t(14726),ae=t(2487),D=t(72252),J=t(82061),G=t(55725),B=t(69753),w=t(80854),l=t(29477),n=t(85893),U=function(Y){var h=Y.directory,ne=Y.onUploaded;return(0,n.jsxs)(N.Z,{align:"start",children:[(0,n.jsxs)(O.Z.Text,{children:[(0,n.jsx)(w.FormattedMessage,{id:"pages.files.filesBrowser"}),(0,n.jsx)(O.Z.Text,{code:!0,children:h})]}),(0,n.jsx)(l.Z,{url:"/api/admin/file/upload",name:"file[]",data:{target:h},onUpload:function(pe){pe.success&&ne(h,pe.data)}})]})},e=function(Y){var h=Y.defaultDirectory,ne=h===void 0?"/":h,_e=Y.onFile,pe=Y.hideDeleteBtn,R=pe===void 0?!1:pe,p=Y.forceLoading,m=p===void 0?!1:p,k=(0,w.useIntl)(),ce=(0,L.useState)({loading:!1,name:"",directory:ne,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),se=f()(ce,2),E=se[0],P=se[1],Z=(0,L.useRef)(),g=(0,L.useCallback)(function(F){P(function(W){return T()(T()({},W),{},{loading:F})})},[]),b=(0,L.useCallback)(function(F,W){F.success&&P(function(ie){return T()(T()(T()({},ie),F.data),{},{data:[{url:W.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(_()(F.data.data.map(function(ee){return T()(T()({},ee),{},{url:ee.mime==="directory"?"".concat(W,"/").concat(ee.name):ee.url})}))).filter(function(ee){return W==="/"||W===ne?ee.name!=="..":!0}),directory:W,loading:!1})})},[g]),X=(0,L.useCallback)(function(F){var W,ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,ee=function(){return Z.current&&Z.current.abort()};return ee(),Z.current=new AbortController,g(!0),(0,u.QZ)({directory:F,page:ie},{signal:(W=Z.current)===null||W===void 0?void 0:W.signal}).then(function(Ee){Ee.success&&b(Ee,F)}).catch(function(){return g(!1)}),function(){ee()}},[g]);(0,L.useEffect)(function(){return X(ne)},[ne,X]);var ue=(0,L.useCallback)(function(F){g(!0),(0,u.Od)(F).then(function(){X(E.directory)}).catch(function(){g(!1)})},[X,g,E.directory]),re=(0,L.useCallback)(function(F,W){var ie,ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,Ee=function(){return Z.current&&Z.current.abort()};return Ee(),Z.current=new AbortController,g(!0),(0,u.ht)({directory:F,name:W,page:ee},{signal:(ie=Z.current)===null||ie===void 0?void 0:ie.signal}).then(function(Pe){Pe.success&&b(Pe,F)}).catch(function(){return g(!1)}),function(){Ee()}},[g]);return(0,n.jsxs)("div",{className:"file-browser",children:[(0,n.jsxs)("div",{className:"file-browser__header",children:[(0,n.jsx)(H.Z,{placeholder:k.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(W){return P(function(ie){return T()(T()({},ie),{},{name:W.target.value})})},value:E.name}),(0,n.jsxs)("div",{children:[(0,n.jsx)(j.ZP,{className:"file-browser__button",onClick:function(){return X(E.directory)},children:(0,n.jsx)(w.FormattedMessage,{id:"reset"})}),(0,n.jsx)(j.ZP,{className:"file-browser__button",type:"primary",onClick:function(){return re(E.directory,E.name)},children:(0,n.jsx)(w.FormattedMessage,{id:"query"})})]})]}),(0,n.jsx)(ae.Z,{loading:E.loading||m,size:"small",itemLayout:"horizontal",dataSource:E.data,header:(0,n.jsx)(U,{directory:E.directory,onUploaded:function(W,ie){ie&&(X(W),_e&&_e(ie,W))}}),footer:(0,n.jsx)(U,{directory:E.directory,onUploaded:function(W,ie){X(W),ie&&_e&&_e(ie,W)}}),renderItem:function(W){return(0,n.jsx)(ae.Z.Item,{actions:W.mime!=="directory"&&!R?[(0,n.jsx)(j.ZP,{type:"default",danger:!0,icon:(0,n.jsx)(J.Z,{}),size:"small",onClick:function(){return ue(W.url)}},"dir")]:[],children:(0,n.jsx)(ae.Z.Item.Meta,{avatar:W.mime==="directory"?(0,n.jsx)(j.ZP,{type:"primary",icon:(0,n.jsx)(G.Z,{}),size:"small",onClick:function(){return X(W.url)}}):(0,n.jsx)("a",{href:W.url,target:"_blank",rel:"noreferrer",children:(0,n.jsx)(j.ZP,{type:"default",icon:(0,n.jsx)(B.Z,{}),size:"small"})}),description:(0,n.jsx)(L.Fragment,{children:(0,n.jsx)(j.ZP,{type:"text",size:"small",onClick:function(){return W.mime==="directory"?X(W.url):_e&&_e(W,E.directory)},children:W.name})})})})}}),(0,n.jsx)(D.Z,{pageSizeOptions:[],current:E.current_page,total:E.total,pageSize:E.per_page,onChange:function(W){return X(E.directory,W)}})]})},Q=e},89825:function(Qe,xe,t){"use strict";t.d(xe,{Z:function(){return e}});var Me=t(26271),_=t(80854),me=t(5574),T=t.n(me),de=t(50227),f=t(2453),L=t(15746),u=t(71230),N=t(38925),O=t(75081),H=t(67294);function j(Q){var $=(0,H.useRef)(Q);(0,H.useEffect)(function(){var Y=function(){var ne=localStorage.getItem("TOKEN");$.current(ne)};return window.addEventListener("token_change",Y),function(){window.removeEventListener("token_change",Y)}},[])}var ae=t(97704),D=t(85893),J="h5p-editor",G=function(Q){return Q.TokenChanged="TOKEN_CHANGED",Q}(G||{}),B=function($){var Y,h=document.getElementById(J);if(!h){console.error("There is no iframe with id '".concat(J,"'"));return}(Y=h.contentWindow)===null||Y===void 0||Y.postMessage({type:G.TokenChanged,token:$},"*")},w=function($){var Y=$.id,h=$.onSubmitted,ne=$.onLoaded,_e=(0,H.useState)(),pe=T()(_e,2),R=pe[0],p=pe[1],m=(0,H.useState)(!1),k=T()(m,2),ce=k[0],se=k[1],E=(0,H.useState)(),P=T()(E,2),Z=P[0],g=P[1],b=(0,_.useIntl)(),X=b.locale.split("-")[0];j(B),(0,H.useEffect)(function(){Y&&(se(!0),(0,ae.RN)(Y==="new"?void 0:Y,X).then(function(re){re.success?(ne&&ne(re.data),p(re.data)):g(re.message)}).catch(function(re){return re&&g(re.toString())}).finally(function(){return se(!1)}))},[Y]);var ue=(0,H.useCallback)(function(re){se(!0),(0,ae.x0)(re,Y==="new"?void 0:Y).then(function(F){F.success?(h(F.data.id),f.ZP.success((0,D.jsx)(_.FormattedMessage,{id:"h5p_edited",defaultMessage:"H5P Element edited and saved successfully"}))):g(F.message)}).catch(function(F){return F&&g(F.toString())}).finally(function(){return se(!1)})},[]);return R?(0,D.jsxs)(H.Fragment,{children:[Z&&(0,D.jsx)(N.Z,{message:Z,type:"error"}),R&&(0,D.jsx)(de.ContextlessEditor,{onError:function(F){return console.error(F)},state:R,allowSameOrigin:!0,onSubmit:ue,loading:ce,lang:X,iframeId:J})]}):(0,D.jsx)(L.Z,{children:(0,D.jsxs)(u.Z,{justify:"center",align:"middle",children:[Z&&(0,D.jsx)(N.Z,{message:Z,type:"error"}),(0,D.jsx)(O.Z,{})]})})},l=w,n=t(66340),U=function($){var Y=$.defaultCard,h=Y===void 0?"edit":Y,ne=$.id,_e=$.onSubmit,pe=$.onLoaded;return(0,D.jsxs)(Me.ZP,{tabs:{type:"card",defaultActiveKey:h},children:[(0,D.jsx)(Me.ZP.TabPane,{disabled:!ne,tab:(0,D.jsx)(_.FormattedMessage,{id:"edit"}),children:(0,D.jsx)(l,{id:ne,onSubmitted:_e,onLoaded:pe},ne)},"edit"),ne!=="new"&&(0,D.jsx)(Me.ZP.TabPane,{disabled:!ne,tab:(0,D.jsx)(_.FormattedMessage,{id:"preview"}),children:(0,D.jsx)(n.Z,{id:ne,onLoaded:pe})},"preview")]})},e=U},66340:function(Qe,xe,t){"use strict";var Me=t(19632),_=t.n(Me),me=t(5574),T=t.n(me),de=t(97704),f=t(50227),L=t.n(f),u=t(25093),N=t(15746),O=t(71230),H=t(38925),j=t(75081),ae=t(96074),D=t(67294),J=t(55171),G=t.n(J),B=t(80854),w=t(85893),l=u.Z.Title,n=function(e){var Q=e.id,$=e.onXAPI,Y=e.onLoaded,h=(0,D.useState)(),ne=T()(h,2),_e=ne[0],pe=ne[1],R=(0,D.useState)(!1),p=T()(R,2),m=p[0],k=p[1],ce=(0,D.useState)([]),se=T()(ce,2),E=se[0],P=se[1],Z=(0,D.useState)(),g=T()(Z,2),b=g[0],X=g[1],ue=(0,B.useIntl)(),re=ue.locale.split("-")[0];return(0,D.useEffect)(function(){Q&&(k(!0),(0,de.LK)(Q,re).then(function(F){F.success?(Y&&Y(F.data),pe(F.data)):X(F.message)}).catch(function(F){return F&&X(F.toString())}).finally(function(){return k(!1)}))},[Q]),_e?(0,w.jsxs)(D.Fragment,{children:[b&&(0,w.jsx)(H.Z,{message:b,type:"error"}),(0,w.jsx)(f.ContextlessPlayer,{contentId:Q,onError:function(W){return console.error(W)},state:_e,allowSameOrigin:!0,loading:m,onXAPI:function(W){$?$(W):P(function(ie){return[].concat(_()(ie),[W])})}}),!$&&(0,w.jsxs)(D.Fragment,{children:[(0,w.jsx)(ae.Z,{}),(0,w.jsxs)("div",{style:{overflow:"auto",maxHeight:"400px"},children:[(0,w.jsx)(l,{level:5,children:"XAPI Events"}),(0,w.jsx)(G(),{src:E})]})]})]}):(0,w.jsx)(N.Z,{children:(0,w.jsxs)(O.Z,{justify:"center",align:"middle",children:[b&&(0,w.jsx)(H.Z,{message:b,type:"error"}),(0,w.jsx)(j.Z,{})]})})};xe.Z=n},9412:function(Qe,xe,t){"use strict";var Me=t(29477),_=t(67294),me=t(85893),T=function(f){var L=f.onSuccess,u=f.onError,N=f.hideLabel;return(0,me.jsx)(Me.Z,{url:"/api/admin/hh5p/content/upload",name:"h5p_file",accept:".h5p",hideLabel:N,onChange:function(H){H.file.status==="done"&&H.file.response&&L(H.file.response),H.file.status==="error"&&u()}})};xe.C=T},95486:function(Qe,xe,t){"use strict";var Me=t(5574),_=t.n(Me),me=t(14726),T=t(28248),de=t(55742),f=t(94315),L=t(45823),u=t(67294),N=t(80854),O=t(85893),H=function(ae){var D=ae.value,J=ae.onChange,G=(0,u.useState)(!1),B=_()(G,2),w=B[0],l=B[1],n=(0,u.useCallback)(function(){l(!1)},[]),U=(0,u.useState)("code"),e=_()(U,2),Q=e[0],$=e[1];return(0,O.jsxs)("div",{children:[(0,O.jsx)(me.ZP,{type:"primary",onClick:function(){return l(!0)},size:"small",children:(0,O.jsx)(N.FormattedMessage,{id:"json_editor"})}),(0,O.jsxs)(T.Z,{title:"JSON",open:w,onOk:n,onCancel:n,destroyOnClose:!0,children:[(0,O.jsxs)(de.ZP.Group,{onChange:function(h){return $(h.target.value)},value:Q,children:[(0,O.jsx)(de.ZP,{value:"tree",children:"tree"}),(0,O.jsx)(de.ZP,{value:"view",children:"view"}),(0,O.jsx)(de.ZP,{value:"form",children:"form"}),(0,O.jsx)(de.ZP,{value:"code",children:"code"}),(0,O.jsx)(de.ZP,{value:"text",children:"text"})]}),(0,O.jsx)(f.A,{mode:Q,value:D,onChange:J},Q)]})]})};xe.Z=H},34201:function(Qe,xe,t){"use strict";t.d(xe,{Z:function(){return se}});var Me=t(5574),_=t.n(Me),me=t(38925),T=t(75081),de=t(96074),f=t(2487),L=t(25093),u=t(14726),N=t(67294),O=t(80854),H=t(19632),j=t.n(H),ae=t(93162),D=t(55733),J=t.n(D),G=t(85893),B=function(P){var Z=P.pdfIds,g=P.onProgress,b=P.onFinished,X=P.filename,ue=X===void 0?"package.zip":X,re=(0,N.useState)([]),F=_()(re,2),W=F[0],ie=F[1],ee=(0,N.useCallback)(function(Ee){var Pe=new(J());Ee.forEach(function(Te,Oe){return Pe.file("".concat(Z[Oe],".pdf"),Te)}),Pe.generateAsync({type:"blob"}).then(function(Te){(0,ae.saveAs)(Te,ue),b&&b()})},[W,ue]);return(0,N.useEffect)(function(){Z.forEach(function(Ee){var Pe=fetch("".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/pdfs/generate/").concat(Ee),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}});Pe.then(function(Te){return Te.blob()}).then(function(Te){Te&&Te instanceof Blob&&ie(function(Oe){var K=(Oe.length+1)/Z.length;return g&&g(K),K>=1&&ee([].concat(j()(Oe),[Te])),[].concat(j()(Oe),[Te])})})})},[Z]),(0,G.jsxs)("p",{children:["Progress ",W.length," / ",Z.length]})},w=B,l=t(15009),n=t.n(l),U=t(97857),e=t.n(U),Q=t(99289),$=t.n(Q);function Y(E,P){return h.apply(this,arguments)}function h(){return h=$()(n()().mark(function E(P,Z){return n()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,O.request)("/api/admin/pdfs",e()({params:e()({},P),method:"GET"},Z||{})));case 1:case"end":return b.stop()}},E)})),h.apply(this,arguments)}function ne(E,P){return _e.apply(this,arguments)}function _e(){return _e=$()(n()().mark(function E(P,Z){return n()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,O.request)("/api/pdfs/".concat(P),e()({method:"GET"},Z||{})));case 1:case"end":return b.stop()}},E)})),_e.apply(this,arguments)}function pe(E,P){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime().mark(function E(P,Z){return _regeneratorRuntime().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",request("/api/pdfs/generate/".concat(P),_objectSpread({method:"GET"},Z||{})));case 1:case"end":return b.stop()}},E)})),R.apply(this,arguments)}var p=t(62235),m=t(69753),k=t(19326),ce=function(P){var Z=P.user_id,g=P.template_id,b=P.title,X=(0,N.useState)({state:"initial"}),ue=_()(X,2),re=ue[0],F=ue[1],W=(0,N.useState)({state:"initial"}),ie=_()(W,2),ee=ie[0],Ee=ie[1],Pe=(0,N.useState)(!1),Te=_()(Pe,2),Oe=Te[0],K=Te[1];(0,N.useEffect)(function(){F({state:"loading"});var Xe=new AbortController;return Y({user_id:Z,template_id:g},{signal:Xe.signal}).then(function(Ue){Ue&&Ue.success?F({state:"loaded",list:Ue.data}):Ue&&!Ue.success&&F({state:"error",error:Ue.message})}).catch(function(Ue){return F({state:"error",error:Ue.toString()})}),function(){Xe.abort()}},[]);var we=(0,N.useCallback)(function(Xe){Ee({state:"loading"}),ne(Xe).then(function(Ue){Ue.success?Ee({state:"loaded",data:Ue.data.content}):Ee({state:"initial"})})},[]);return re.state==="error"?(0,G.jsx)(me.Z,{message:"Error Text",type:"error"}):re.state==="loading"||re.state==="initial"?(0,G.jsx)(T.Z,{}):(0,G.jsxs)(N.Fragment,{children:[(0,G.jsx)(de.Z,{}),Oe&&(0,G.jsx)(w,{pdfIds:re.list.map(function(Xe){return Xe.id}),onFinished:function(){return K(!1)}}),(0,G.jsx)(f.Z,{size:"small",itemLayout:"horizontal",dataSource:re.list,header:(0,G.jsxs)("div",{children:[(0,G.jsx)(O.FormattedMessage,{id:"template"})," ",b&&(0,G.jsx)(L.Z.Text,{strong:!0,children:b}),". ",(0,G.jsx)(O.FormattedMessage,{id:"generated_pdfs",defaultMessage:"Generated PDFs"})," ",(0,G.jsx)(u.ZP,{loading:Oe,type:"primary",onClick:function(){return K(!0)},icon:(0,G.jsx)(m.Z,{}),size:"small",children:(0,G.jsx)(O.FormattedMessage,{id:"download_all",defaultMessage:"Download all PDFs"})})]}),renderItem:function(Ue){return(0,G.jsxs)(f.Z.Item,{actions:[(0,G.jsx)(k.Z,{url:"/api/pdfs/generate/".concat(Ue.id),filename:"generated-".concat(Ue.id,".pdf"),size:"small",icon:(0,G.jsx)(m.Z,{}),type:"primary",onClick:function(){return we(Ue.id)},loading:ee.state==="loading",children:(0,G.jsx)(O.FormattedMessage,{id:"download_pdf",defaultMessage:"Download PDFs"})},"download")],children:[Ue.title," ",(0,G.jsx)(p.Z,{type:"App\\Models\\User",type_id:Ue.user_id})]})}})]})},se=ce},53957:function(Qe,xe,t){"use strict";var Me=t(5574),_=t.n(Me),me=t(50082),T=t(67294),de=t(85893),f=function(u){var N=u.productable,O=u.type,H=O===void 0?"card":O,j=(0,T.useState)("attributes"),ae=_()(j,2),D=ae[0],J=ae[1];return(0,de.jsx)(me.Z,{productable:N,tab:D,onTabChange:function(B){return J(B)},type:H})};xe.C=f},81424:function(Qe,xe,t){"use strict";var Me=t(52677),_=t.n(Me),me=t(5574),T=t.n(me),de=t(83863),f=t(75081),L=t(67294),u=t(44837),N=t(80854),O=t(85893),H=function(ae){var D=ae.value,J=ae.onChange,G=ae.multiple,B=G===void 0?!1:G,w=ae.type,l=(0,L.useState)([]),n=T()(l,2),U=n[0],e=n[1],Q=(0,L.useState)(!1),$=T()(Q,2),Y=$[0],h=$[1],ne=(0,L.useState)([]),_e=T()(ne,2),pe=_e[0],R=_e[1],p=(0,L.useRef)(),m=(0,L.useCallback)(function(E){h(!0),p.current&&p.current.abort(),p.current=new AbortController,(0,u.RB)({productable_type:w,name:E||void 0},{signal:p.current.signal}).then(function(P){P.success&&e(w?P.data.filter(function(Z){return Z.type==="single"&&Z.productables&&Z.productables[0].id}):P.data),h(!1)}).catch(function(){return h(!1)})},[]);(0,L.useEffect)(function(){var E=new AbortController;if(D){var P=Array.isArray(D)?D:[D],Z=P.map(function(g){return _()(g)==="object"?Number(g.id):Number(g)});R(Z)}return function(){E.abort()}},[D]);var k=(0,L.useCallback)(function(E){m(E)},[m]),ce=(0,L.useCallback)(function(){R([])},[]),se=(0,L.useCallback)(function(E){E||ce(),J&&J(E)},[J,ce]);return(0,O.jsx)(de.default,{onFocus:function(){return m()},allowClear:!0,style:{width:"100%",minWidth:"150px"},value:pe,onChange:se,mode:B?"multiple":void 0,showSearch:!0,onSearch:k,onDeselect:ce,placeholder:(0,O.jsx)(N.FormattedMessage,{id:"select_product",defaultMessage:"Select a product"}),optionFilterProp:"children",filterOption:function(P,Z){if(Z&&Z.children){var g;return(Z==null||(g=Z.children)===null||g===void 0?void 0:g.toString().toLowerCase().indexOf(P&&P.toLowerCase()||""))>=0}return!1},notFoundContent:Y?(0,O.jsx)(f.Z,{size:"small"}):null,children:U.map(function(E){return(0,O.jsx)(de.default.Option,{value:E.id,children:E.name},E.id)})})};xe.Z=H},87366:function(Qe,xe,t){"use strict";t.d(xe,{Il:function(){return pe},_y:function(){return w},uS:function(){return U}});var Me=t(15009),_=t.n(Me),me=t(99289),T=t.n(me),de=t(5574),f=t.n(de),L=t(97857),u=t.n(L),N=t(19632),O=t.n(N),H=t(2453),j=t(67294),ae=t(80854),D=t(99100),J=t(31472),G=t(36309),B=t(85893),w=j.createContext({}),l=function(){return Math.round(Math.random()*99999)},n=function R(p){return p.reduce(function(m,k){return[].concat(O()(m),O()(k.lessons?R(k.lessons):[]),[k])},[])},U=function R(p){return p.reduce(function(m,k){var ce;return[].concat(O()(m),O()(k.lessons?R(k.lessons):[]),O()((ce=k.topics)!==null&&ce!==void 0?ce:[]))},[])},e=function R(p,m,k){return p.map(function(ce){var se,E;return u()(u()({},ce),{},{lessons:ce.lessons?R(ce.lessons,m,k):[],topics:ce.id===m?[].concat(O()((se=ce.topics)!==null&&se!==void 0?se:[]),[k]):(E=ce.topics)!==null&&E!==void 0?E:[]})})},Q=function R(p,m,k){return k?p.map(function(ce){return u()(u()({},ce),{},{lessons:[].concat(O()(ce.lessons?R(ce.lessons,m,k):[]),O()(ce.id===k?[m]:[]))})}):[].concat(O()(p),[m])},$=function R(p,m,k){return p.map(function(ce){return u()(u()({},ce.id===m?k:ce),{},{lessons:ce.lessons?R(ce.lessons,m,k):[]})})},Y=function R(p,m){return p.map(function(k){return u()(u()({},k),{},{parent_id:m,lessons:k.lessons?R(k.lessons,k.id):[]})})},h=function R(p,m){return p.filter(function(k){return k.id!==m}).map(function(k){return u()(u()({},k),{},{lessons:k.lessons?R(k.lessons,m):[]})})},ne=function R(p,m){return p.map(function(k){return u()(u()({},k),{},{lessons:k.lessons?R(k.lessons,m):[],topics:k.topics?k.topics.filter(function(ce){return ce.id!==m}):[]})})},_e=function R(p,m,k,ce){return ce==null?void 0:ce.map(function(se){if(se.id===k){var E;return u()(u()({},se),{},{topics:(E=se.topics)===null||E===void 0?void 0:E.map(function(P){return P.id===p?m.file.response.data:P})})}else if(se.lessons)return u()(u()({},se),{},{lessons:R(p,m,k,se.lessons||[])});return se})},pe=function(p){var m=p.children,k=p.id,ce=(0,j.useState)(),se=f()(ce,2),E=se[0],P=se[1],Z=(0,ae.useIntl)(),g=(0,j.useMemo)(function(){return E&&E.lessons?U(E.lessons):[]},[E]),b=(0,j.useMemo)(function(){return E&&E.lessons?n(E.lessons):[]},[E]),X=(0,j.useState)([]),ue=f()(X,2),re=ue[0],F=ue[1],W=(0,j.useState)(void 0),ie=f()(W,2),ee=ie[0],Ee=ie[1],Pe=(0,ae.useLocation)(),Te=(0,j.useMemo)(function(){var Ae=new URLSearchParams(Pe.search);return{lesson:Ae.get("lesson"),topic:Ae.get("topic")}},[Pe]),Oe=(0,j.useCallback)(T()(_()().mark(function Ae(){var Be,be;return _()().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return Le.next=2,(0,G.XU)({class_type:"EscolaLms\\Courses\\Models\\Lesson"});case 2:Be=Le.sent,Be.success&&(be=Be.data.find(function(We){var ot=We.name;return ot==="assistant_id"}),Ee(be==null?void 0:be.id));case 4:case"end":return Le.stop()}},Ae)})),[]);(0,j.useEffect)(function(){Oe(),F([])},[]);var K=(0,j.useCallback)(function(){(0,D.Nx)(k).then(function(Ae){return Ae.success&&P(u()(u()({},Ae.data),{},{lessons:Y(Ae.data.lessons)}))})},[k]);(0,j.useEffect)(function(){K()},[K]);var we=(0,j.useCallback)(function(Ae){var Be=b.find(function(be){var fe;return be==null||(fe=be.topics)===null||fe===void 0?void 0:fe.find(function(Le){return Le.id===Ae})});return Be?Be.id:null},[b]),Xe=(0,j.useMemo)(function(){return Te.lesson?{mode:"lesson",id:Number(Te.lesson),value:b.find(function(Ae){return Ae.id===Number(Te.lesson)})}:Te.topic?{mode:"topic",id:Number(Te.topic),value:g.find(function(Ae){return Ae.id===Number(Te.topic)})}:{mode:"init"}},[Te,E,b,g]),Ue=(0,j.useCallback)(function(Ae){var Be={course_id:k,topics:[],isNew:!0,id:E?E.lessons.length+1:l(),order:0,title:Z.formatMessage({id:"add_title_here"}),active:!0,parent_id:Ae};return P(function(be){var fe;return u()(u()({},be),{},{lessons:Q((fe=be==null?void 0:be.lessons)!==null&&fe!==void 0?fe:[],Be,Ae)})}),Be},[k,E]),Je=(0,j.useCallback)(function(Ae,Be){var be=b.find(function(Le){return Le.id===Ae}),fe=be&&be.isNew;return ee&&Be.append("assistant_id","".concat(ee)),(fe?(0,D.aA)(Be):(0,D.sI)(Ae,Be)).then(function(Le){return H.ZP.success(Le.message),K(),Le.success&&P(function(We){var ot;return u()(u()({},We),{},{lessons:$((ot=We==null?void 0:We.lessons)!==null&&ot!==void 0?ot:[],Ae,u()(u()({},Le.data),{},{isNew:!1}))})})})},[E,ee]),ke=(0,j.useCallback)(function(Ae){var Be=b.find(function(fe){return fe.id===Ae});if(Be){var be=Be.isNew;be?P(function(fe){var Le;return u()(u()({},fe),{},{lessons:h((Le=fe==null?void 0:fe.lessons)!==null&&Le!==void 0?Le:[],Ae)})}):(0,D.iI)(Ae).then(function(fe){fe.success&&(H.ZP.success(fe.message),P(function(Le){var We;return u()(u()({},Le),{},{lessons:h((We=Le==null?void 0:Le.lessons)!==null&&We!==void 0?We:[],Ae)})}))})}},[E]),Ve=(0,j.useCallback)(function(Ae,Be){var be,fe=we(Ae),Le=b.find(function(ut){return ut.id===fe}),We=Le&&((be=Le.topics)===null||be===void 0?void 0:be.find(function(ut){return ut.id===Ae})),ot=We==null?void 0:We.isNew;return(ot?(0,D.HV)(Be):(0,D.Cn)(Ae,Be)).then(function(ut){ut.success&&(H.ZP.success(ut.message),K(),ae.history.push("/courses/list/".concat(k,"/program/?topic=").concat(ut.data.id)),(We==null?void 0:We.topicable_type)===J.oz.Video&&setTimeout(function(){K()},5e3))})},[we,E,K]),lt=(0,j.useCallback)(function(Ae){var Be=we(Ae),be=b.find(function(We){return We.id===Be});if(be){var fe=g==null?void 0:g.find(function(We){return We.id===Ae}),Le=fe==null?void 0:fe.isNew;Le&&!fe.topicable?P(function(We){var ot;return u()(u()({},We),{},{lessons:ne((ot=We==null?void 0:We.lessons)!==null&&ot!==void 0?ot:[],Ae)})}):(0,D.vJ)(Ae).then(function(We){We.success&&(H.ZP.success(We.message),P(function(ot){var ut;return u()(u()({},ot),{},{lessons:ne((ut=ot==null?void 0:ot.lessons)!==null&&ut!==void 0?ut:[],Ae)})}))})}},[E,we]),Ie=(0,j.useCallback)(function(Ae,Be){var be={lesson_id:Ae,isNew:!0,id:l(),title:Z.formatMessage({id:"add_title_here"}),active:!0,topicable_type:Be};return P(function(fe){var Le;return u()(u()({},fe),{},{lessons:e((Le=fe==null?void 0:fe.lessons)!==null&&Le!==void 0?Le:[],Ae,be)})}),be},[]),it=function(Be,be){var fe=we(Be);P(function(Le){return u()(u()({},Le),{},{lessons:Le?_e(Be,be,fe,Le.lessons||[]):[]})}),ae.history.push("/courses/list/".concat(k,"/program/?topic=").concat(be.file.response.data.id))},At=(0,j.useCallback)(function(Ae){return(0,D.Cx)(Ae).then(function(Be){if(Be.success){H.ZP.success(Be.message);var be=we(Ae);P(function(fe){var Le;return u()(u()({},fe),{},{lessons:fe?(Le=fe.lessons)===null||Le===void 0?void 0:Le.map(function(We){if(We.id===be){var ot=We.topics||[];return u()(u()({},We),{},{topics:[].concat(O()(ot),[Be.data])})}return We}):[]})})}})},[E,we]),jt=(0,j.useCallback)(function(Ae){return(0,D.if)(Ae).then(function(Be){Be.success&&(H.ZP.success(Be.message),P(function(be){return u()(u()({},be),{},{lessons:be?[].concat(O()(be.lessons),[Be.data]):[]})}))})},[]),Qt={state:E,h5ps:re,id:k,addNewLesson:Ue,updateLesson:Je,updateTopic:Ve,deleteLesson:ke,addNewTopic:Ie,deleteTopic:lt,onTopicUploaded:it,cloneTopic:At,cloneLesson:jt,currentEditMode:Xe,getLessons:K};return(0,B.jsx)(w.Provider,{value:Qt,children:m})}},75175:function(Qe,xe,t){"use strict";var Me=t(67294),_=t(85893),me=function(de){var f=de.uuid;return(0,_.jsx)("iframe",{style:{border:"none",background:"none",width:"100%",height:"100%"},className:"scorm-preview-player",src:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/scorm/play/").concat(f)})};xe.Z=me},82238:function(Qe,xe,t){"use strict";var Me=t(9783),_=t.n(Me),me=t(5574),T=t.n(me),de=t(13769),f=t.n(de),L=t(15009),u=t.n(L),N=t(97857),O=t.n(N),H=t(99289),j=t.n(H),ae=t(20568),D=t(29477),J=t(54734),G=t(14726),B=t(28248),w=t(2453),l=t(67294),n=t(80854),U=t(85893),e=["folder","onResponse"],Q=function(){var pe=j()(u()().mark(function R(p,m,k){return u()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.abrupt("return",(0,n.request)(p,O()({method:"POST",data:m},k||{})));case 1:case"end":return se.stop()}},R)}));return function(p,m,k){return pe.apply(this,arguments)}}(),$=function(R){var p=R.split("//").join("/");return p=p[p.length-1]==="/"?p:"".concat(p,"/"),p=p[0]==="/"?p.slice(1):p,p},Y=function(R){return Array.isArray(R)&&R[0]?R[0].name:R.name},h=function(R,p){var m=$(R),k=Y(p);return k.includes(m)?k:"".concat(m).concat(k)},ne=function(R){return{file:{status:"done",uid:"fileFromBrowser",name:"fileFromBrowser",response:R},fileList:[]}};function _e(pe){var R=pe.folder,p=pe.onResponse,m=f()(pe,e),k=(0,l.useState)(!1),ce=T()(k,2),se=ce[0],E=ce[1],P=(0,l.useState)(!1),Z=T()(P,2),g=Z[0],b=Z[1],X=m.url,ue=m.name,re=m.onChange,F=m.data,W=(0,l.useCallback)(function(){E(!1)},[]);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(G.ZP,{onClick:function(){return E(!0)},icon:(0,U.jsx)(J.Z,{}),children:[" ",(0,U.jsx)(n.FormattedMessage,{id:"browse"})]}),se&&(0,U.jsx)(B.Z,{open:se,onCancel:W,onOk:W,width:"60vw",closeIcon:!1,children:(0,U.jsx)(ae.Z,{forceLoading:g,hideDeleteBtn:!0,defaultDirectory:R,onFile:function(ee,Ee){Ee&&(b(!0),Q(X,O()(O()({},F),{},_()({},ue,h(Ee,ee)))).then(function(Pe){b(!1),p&&p(Pe),Pe.success?(W(),re&&re(ne(Pe))):w.ZP.error(Pe.message)}).catch(function(Pe){b(!1),"data"in Pe?w.ZP.error(Pe.data.message):w.ZP.error("Unknown Error")}))}})}),(0,U.jsx)("div",{style:{marginTop:"10px"},children:(0,U.jsx)(D.Z,O()({},m))})]})}xe.Z=_e},29477:function(Qe,xe,t){"use strict";var Me=t(97857),_=t.n(Me),me=t(5574),T=t.n(me),de=t(55523),f=t(75842),L=t(21974),u=t(67294),N=t(80854),O=t(85893);function H(j){var ae=j.onChange,D=j.onUpload,J=j.url,G=j.name,B=j.extra,w=j.accept,l=j.data,n=j.wrapInForm,U=n===void 0?!0:n,e=j.title,Q=j.formProps,$=j.maxFiles,Y=j.clearListAfterUpload,h=j.hideLabel,ne=j.disabled,_e=j.showUploadList,pe=(0,u.useState)(),R=T()(pe,2),p=R[0],m=R[1],k=(0,N.useIntl)();return l&&l[G]&&delete l[G],(0,O.jsx)(L.Z,{condition:U,wrap:function(se){return(0,O.jsx)(f.Z,_()(_()({},Q),{},{children:se}))},children:(0,O.jsx)(de.Z,{title:e||" ".concat(k.formatMessage({id:"upload_click_here"})),placeholder:k.formatMessage({id:"upload_click_here"}),label:!h&&(0,O.jsx)(N.FormattedMessage,{id:"upload"}),max:$!=null?$:2,fieldProps:{data:l,accept:w,name:G,showUploadList:_e,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))},onChange:function(se){m(se),ae&&ae(se),se.file.status==="done"&&(D&&D(se.file.response),Y&&m(void 0))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(J),extra:B,fileList:p==null?void 0:p.fileList,disabled:ne})})}xe.Z=H},44167:function(Qe,xe,t){"use strict";var Me=t(52677),_=t.n(Me),me=t(19632),T=t.n(me),de=t(5574),f=t.n(de),L=t(83863),u=t(75081),N=t(67294),O=t(30869),H=t(80854),j=t(85893),ae=function(J){var G=J.value,B=J.onChange,w=J.multiple,l=w===void 0?!1:w,n=J.role,U=J.showEmail,e=J.disabled,Q=(0,N.useState)([]),$=f()(Q,2),Y=$[0],h=$[1],ne=(0,N.useState)(!1),_e=f()(ne,2),pe=_e[0],R=_e[1],p=(0,N.useState)([]),m=f()(p,2),k=m[0],ce=m[1],se=(0,N.useRef)(),E=(0,N.useRef)(),P=(0,N.useCallback)(function(ue){h(function(re){return[].concat(T()(re),T()(ue)).filter(function(F,W,ie){return ie.findIndex(function(ee){return U?ee.email===F.email:ee.id===F.id})===W})})},[]);(0,N.useEffect)(function(){se.current=Y},[Y]);var Z=(0,N.useCallback)(function(ue){R(!0),E.current&&E.current.abort(),E.current=new AbortController,(0,O.rC)({search:ue,role:n},{signal:E.current.signal}).then(function(re){re&&re.success&&(P(re.data),R(!1))}).catch(function(){return R(!1)})},[]),g=(0,N.useCallback)(function(ue){Z(ue)},[Z]),b=(0,N.useCallback)(function(){ce([])},[]);(0,N.useEffect)(function(){var ue=new AbortController;if(G){var re=Array.isArray(G)?G:[G],F=re.map(function(W){return _()(W)==="object"?Number(W.id):Number(W)});ce(F),F.filter(function(W){var ie;return!((ie=se.current)!==null&&ie!==void 0&&ie.find(function(ee){return ee.id===W}))}).forEach(function(W){(0,O.EA)(Number(W),{signal:ue.signal},!1).then(function(ie){ie&&ie.success&&P([ie.data])})})}return function(){ue.abort()}},[G]);var X=(0,N.useCallback)(function(ue,re){ue||b(),B&&B(ue,re)},[B,b]);return(0,j.jsx)(L.default,{disabled:e,onFocus:function(){return Z()},allowClear:!0,style:{width:"100%",minWidth:"150px"},value:k,onChange:X,mode:l?"multiple":void 0,showSearch:!0,onSearch:g,onDeselect:b,placeholder:(0,j.jsx)(H.FormattedMessage,{id:"select_person",defaultMessage:"Select a person"}),optionFilterProp:"children",filterOption:function(re,F){return F&&F.children?String("".concat(F.user.name," ").concat(F.user.email)).toLowerCase().indexOf(re&&re.toLowerCase()||"")>=0:!0},notFoundContent:pe?(0,j.jsx)(u.Z,{size:"small"}):null,children:Y.map(function(ue){return(0,j.jsxs)(L.default.Option,{value:ue.id,user:ue,children:[ue.name," ",U&&" - ".concat(ue.email)]},ue.id)})})};xe.Z=ae},14408:function(Qe,xe,t){"use strict";t.d(xe,{Z:function(){return L}});var Me=t(97857),_=t.n(Me),me=t(5574),T=t.n(me),de=t(2254),f=t(67294);function L(){var u=(0,f.useState)({showModal:!1,disableEdit:!1,clicked:!1}),N=T()(u,2),O=N[0],H=N[1],j=function(D){(D==null?void 0:D.status)==="published"&&D!==null&&D!==void 0&&D.active_from&&(0,de.C)(new Date(D==null?void 0:D.active_from))&&!O.clicked?H(_()(_()({},O),{},{showModal:!1,disableEdit:!0,clicked:!1})):H(_()(_()({},O),{},{showModal:!1,disableEdit:!1,clicked:!1}))};return{manageCourseEdit:O,setManageCourseEdit:H,validateCourseEdit:j}}},12648:function(Qe,xe,t){"use strict";t.r(xe),t.d(xe,{default:function(){return Vs}});var Me=t(9783),_=t.n(Me),me=t(52677),T=t.n(me),de=t(15009),f=t.n(de),L=t(97857),u=t.n(L),N=t(99289),O=t.n(N),H=t(5574),j=t.n(H),ae=t(49677),D=t.n(ae),J=t(95020),G=t(16894),B=t(2453),w=t(72269),l=t(67294),n=t(80854),U=t(62235),e=t(85893),Q={1:"course"},$=function(M){return M[M.COURSE=1]="COURSE",M}({}),Y=[{title:(0,e.jsx)(n.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:(0,e.jsx)(n.FormattedMessage,{id:"title",defaultMessage:"title"}),dataIndex:"title",hideInSearch:!0,sorter:!0,width:"80%",render:function(r,s){return(0,e.jsx)(U.Z,{type:"Questionnaire",type_id:Number(s.id),text:s.title})}}],h=function(r){var s=r.modelType,i=r.id,a=(0,l.useRef)(),o=(0,n.useIntl)(),c=(0,l.useCallback)(function(){var C=O()(f()().mark(function S(x,y){var z,d,v;return f()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(z=B.ZP.loading(o.formatMessage({id:"loading"})),V.prev=1,!y){V.next=8;break}return V.next=5,(0,J.cc)(Q[s],i,x);case 5:V.t0=V.sent,V.next=11;break;case 8:return V.next=10,(0,J.nX)(Q[s],i,x);case 10:V.t0=V.sent;case 11:return d=V.t0,d.success&&(z(),B.ZP.success(d.message),(v=a.current)===null||v===void 0||v.reload()),V.abrupt("return");case 16:return V.prev=16,V.t1=V.catch(1),z(),B.ZP.error((0,e.jsx)(n.FormattedMessage,{id:"error",defaultMessage:"error"})),V.abrupt("return",!1);case 21:case"end":return V.stop()}},S,null,[[1,16]])}));return function(S,x){return C.apply(this,arguments)}}(),[s,i]);return(0,e.jsx)(G.ZP,{headerTitle:o.formatMessage({id:"questionnaires",defaultMessage:"questionnaires"}),actionRef:a,rowKey:"id",search:!1,request:function(S,x){D()(S);var y=x&&Object.entries(x)[0];return(0,J.SC)({order_by:y&&y[0],order:y?y[1]==="ascend"?"ASC":"DESC":void 0}).then(function(z){return z.success?{data:z.data,success:!0}:[]})},columns:[].concat(Y,[{title:(0,e.jsx)(n.FormattedMessage,{id:"assign",defaultMessage:"assign"}),dataIndex:"option",valueType:"option",render:function(S,x){var y;return[(0,e.jsx)(w.Z,{defaultChecked:x.models&&((y=x.models)===null||y===void 0?void 0:y.filter(function(z){return z.model_id===i}).length)>0,onChange:function(d){return c(Number(x.id),d)}},"assign")]}}])})},ne=h,_e=t(7418),pe=t(48959),R=t(19632),p=t.n(R),m=t(31472),k=t(61227),ce=t.n(k),se=t(60943),E=t(45919),P=t(99100),Z=t(58638),g=t(14726),b=t(76841),X=function(r){var s=r.topic_id,i=r.stat,a=(0,l.useState)(!1),o=j()(a,2),c=o[0],C=o[1],S=(0,l.useCallback)(function(x){return O()(f()().mark(function y(){var z,d;return f()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(x){A.next=2;break}return A.abrupt("return");case 2:return C(!0),A.prev=3,A.next=6,(0,b.Sx)(x,i);case 6:z=A.sent,z instanceof Blob&&(d=document.createElement("a"),d.href=window.URL.createObjectURL(z),d.download="".concat(i,"_").concat(x,".xlsx"),document.body.appendChild(d),d.click(),document.body.removeChild(d)),A.next=13;break;case 10:A.prev=10,A.t0=A.catch(3),console.error(A.t0);case 13:return A.prev=13,C(!1),A.finish(13);case 16:case"end":return A.stop()}},y,null,[[3,10,13,16]])}))},[i]);return(0,e.jsxs)(g.ZP,{type:"primary",loading:c,disabled:s===void 0,onClick:S(s),children:[(0,e.jsx)(Z.Z,{})," ",(0,e.jsx)(n.FormattedMessage,{id:"export"})]})},ue=[{dataIndex:"attempt",title:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.attempt"}),hideInSearch:!0,fixed:"left",width:100},{dataIndex:"email",title:(0,e.jsx)(n.FormattedMessage,{id:"email"}),hideInSearch:!0,fixed:"left"},{dataIndex:"user_id",title:(0,e.jsx)(n.FormattedMessage,{id:"user"}),hideInSearch:!0,render:function(r,s){return(0,e.jsx)(U.Z,{type:"App\\Models\\User",type_id:s.user_id})}},{dataIndex:"attempt_date",title:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.attemptDate"}),hideInSearch:!0,render:function(r,s){return s.attempt_date?(0,se.WU)(new Date(s.attempt_date),E.Cu):"-"}},{dataIndex:"attempt_time",title:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.attemptDuration"}),hideInSearch:!0,render:function(r,s){return s.attempt_time?"".concat(s.attempt_time,"s"):"-"}},{dataIndex:"summary",title:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.result"}),hideInSearch:!0,render:function(r,s){return typeof s.summary=="number"?"".concat((s.summary*100).toFixed(2),"%"):"-"}}],re=function(r){return r!==void 0?Object.keys(r).filter(function(s){return s.includes("question")}).map(function(s,i){return{title:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.question",values:{i:i+1}}),dataIndex:s,hideInSearch:!0}}):[]},F=function(r){var s,i=r.quizTopics,a=(0,l.useState)(i==null||(s=i[0])===null||s===void 0?void 0:s.id),o=j()(a,2),c=o[0],C=o[1],S=(0,l.useState)([]),x=j()(S,2),y=x[0],z=x[1],d=(0,l.useMemo)(function(){return i.reduce(function(V,I){var q=I.id,oe=I.title;return oe!==void 0&&q!==void 0?[].concat(p()(V),[{value:q,label:oe}]):V},[])},[i]),v=(0,l.useMemo)(function(){var V;return[{dataIndex:"topic_id",title:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.topic"}),hideInTable:!0,valueType:"select",fieldProps:{options:d,defaultValue:d==null||(V=d[0])===null||V===void 0?void 0:V.value,allowClear:!1}}].concat(ue,p()(y))},[d,y]),A=(0,l.useCallback)(function(){var V=O()(f()().mark(function I(q){var oe,le,ze,ye,Se,Ne,Re,tt;return f()().wrap(function(nt){for(;;)switch(nt.prev=nt.next){case 0:if(le=q.topic_id,ze=le===void 0?c:le,ze){nt.next=3;break}return nt.abrupt("return",{success:!1,data:[],total:0});case 3:return nt.next=5,(0,P.ps)(ze,m.rX.QuizSummary);case 5:if(ye=nt.sent,!(!ye.success||!((oe=ye.data)!==null&&oe!==void 0&&oe[m.rX.QuizSummary]))){nt.next=8;break}return nt.abrupt("return",{success:!1,data:[],total:0});case 8:return Se=ye.data[m.rX.QuizSummary],Ne=ce()(Se),Re=Ne[0],tt=Ne.slice(1),z(re(Re)),nt.abrupt("return",{success:!0,data:tt,total:tt.length});case 11:case"end":return nt.stop()}},I)}));return function(I){return V.apply(this,arguments)}}(),[]);return(0,e.jsx)(G.ZP,{headerTitle:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.title"}),onSubmit:function(I){var q=I.topic_id;return C(q)},onReset:function(){var I;return C(i==null||(I=i[0])===null||I===void 0?void 0:I.id)},toolBarRender:function(){return[(0,e.jsx)(X,{stat:m.rX.QuizSummary,topic_id:c},"export")]},className:"table-standalone",request:A,columns:v,search:{layout:"vertical"},scroll:{x:1500}})},W=function(r){var s=r.flatTopics,i=(0,l.useMemo)(function(){var a;return s.reduce(function(o,c){return u()(u()({},o),{},_()({},c.topicable_type,[].concat(p()(o[c.topicable_type]),[c])))},(a={},_()(_()(_()(_()(_()(_()(_()(_()(_()(_()(a,m.oz.RichText,[]),m.oz.OEmbed,[]),m.oz.Audio,[]),m.oz.Video,[]),m.oz.H5P,[]),m.oz.Image,[]),m.oz.PDF,[]),m.oz.SCORM,[]),m.oz.Project,[]),m.oz.GiftQuiz,[]),_()(a,m.oz.Unselected,[])))},[s]);return(0,e.jsx)(e.Fragment,{children:i[m.oz.GiftQuiz].length>0&&(0,e.jsx)(F,{quizTopics:i[m.oz.GiftQuiz]})})},ie=t(87366),ee=t(26271),Ee=t(25093),Pe=t(75081),Te=t(38925),Oe=t(78677),K=function(r){var s=r.config,i=r.value,a=r.title,o=r.children,c=r.valueLabel,C=(0,l.useCallback)(function(x,y){var z,d=(z=i.find(function(v){return v.type===y.type}))===null||z===void 0?void 0:z.topic;return d?"".concat(d.topicable_type.split("\\").pop(),":").concat(d.title):x},[i]),S=(0,l.useCallback)(function(x){return{name:c||x.type,value:x.value}},[c]);return(0,e.jsx)(ee.ZP,{title:a,headerBordered:!0,children:(0,e.jsxs)("div",{style:{overflow:"auto",minHeight:"400px"},children:[(0,e.jsx)(Oe.Z,u()(u()({},s),{},{tooltip:{formatter:S,title:C},data:i})),o&&o]})})},we=K,Xe=t(11312),Ue={xField:"type",yField:"value",seriesField:"type",isRange:!1,title:null,xAxis:{label:{autoHide:!0,autoRotate:!1}},interactions:[{type:"active-region",enable:!1}],columnBackground:{style:{fill:"rgba(0,0,0,0.1)"}}},Je=function(r){var s,i,a,o,c=r.courseId,C=(0,l.useState)({mode:"init"}),S=j()(C,2),x=S[0],y=S[1],z=(0,l.useState)([]),d=j()(z,2),v=d[0],A=d[1],V=Ee.Z.Text,I=(0,n.useIntl)();return(0,l.useEffect)(function(){y({mode:"loading"}),Promise.all([(0,P.Nx)(Number(c)),(0,P.ue)(Number(c))]).then(function(q){var oe=j()(q,2),le=oe[0],ze=oe[1];le.success&&ze.success&&(A((0,ie.uS)(le.data.lessons)),y({mode:"loaded",value:Object.entries(ze.data).map(function(ye){var Se=j()(ye,2),Ne=Se[0],Re=Se[1],tt=I.formatMessage({id:Ne.split("\\").pop()});return{type:tt,value:Re}})}))})},[]),(0,e.jsxs)(ee.ZP,{split:"vertical",children:[x.mode==="loading"&&(0,e.jsx)(Pe.Z,{}),x.mode==="loaded"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Xe.Du,{course_id:Number(c),topics:v,stats:(s=x.value.find(function(q){return q.type.includes("FinishedTopics")}))===null||s===void 0?void 0:s.value}),(0,e.jsx)(Xe.rL,{stats:(i=x.value.find(function(q){return q.type.includes("FinishedCourse")}))===null||i===void 0?void 0:i.value,attempts:(a=x.value.find(function(q){return q.type.includes("AttendanceList")}))===null||a===void 0?void 0:a.value}),(0,e.jsx)(Xe.nu,{stats:(o=x.value.find(function(q){return q.type.includes("AttendanceList")}))===null||o===void 0?void 0:o.value}),(0,e.jsxs)(V,{children:[(0,e.jsx)(n.FormattedMessage,{id:"MoneyEarned"}),": ".concat(x.value.find(function(q){return q.type.split("\\").pop()===I.formatMessage({id:"MoneyEarned"})}).value)]}),(0,e.jsx)(ee.ZP,{colSpan:12,layout:"center",children:(0,e.jsx)(we,{config:Ue,title:(0,e.jsx)(n.FormattedMessage,{id:"People"}),value:x.value.filter(function(q){var oe=q.type.split("\\").pop();return oe===I.formatMessage({id:"PeopleBought"})||oe===I.formatMessage({id:"PeopleFinished"})||oe===I.formatMessage({id:"PeopleStarted"})})})}),(0,e.jsx)(ee.ZP,{colSpan:12,layout:"center",children:(0,e.jsx)(we,{config:Ue,title:(0,e.jsx)(n.FormattedMessage,{id:"AverageTimePerTopic"}),valueLabel:I.formatMessage({id:"seconds",defaultMessage:"seconds"}),value:Object.entries(x.value.find(function(q){return q.type.split("\\").pop()===I.formatMessage({id:"AverageTimePerTopic"})}).value).map(function(q){var oe;return{type:q[0],value:(oe=q[1])===null||oe===void 0?void 0:oe.average_time,topic:v.find(function(le){return le.id===Number(q[0])})}}),children:(0,e.jsxs)(V,{children:[(0,e.jsx)(n.FormattedMessage,{id:"AverageTime"}),`:
                    `.concat(x.value.find(function(q){return q.type.split("\\").pop()===I.formatMessage({id:"AverageTime"})}).value,`
                  `)]})})}),(0,e.jsx)(ee.ZP,{children:(0,e.jsx)(W,{flatTopics:v})})]}),x.mode==="error"&&(0,e.jsx)(Te.Z,{message:x.error,type:"error"})]})},ke=Je,Ve=t(28225),lt=t(23535),Ie=t(952),it=t(22004),At=t.n(it),jt=t(82238),Qt=function(r){var s=r.action,i=r.form_name,a=r.src_name,o=r.getUploadedSrcField,c=r.setPath,C=r.folder,S=r.hideLabel;return(0,e.jsxs)(Ie.ZP.Group,{title:(0,e.jsx)(n.FormattedMessage,{id:"video"}),children:[(0,e.jsx)(Ie.ZP.Item,{shouldUpdate:!0,children:function(y){return(0,e.jsxs)(l.Fragment,{children:[(0,e.jsx)(jt.Z,{folder:C,accept:"video/*",name:i,url:s,onChange:function(d){if(d.file.status==="done"){var v;y.setFieldsValue(_()({},a,o(d))),(v=d.file.response)!==null&&v!==void 0&&v.success&&c(_()(_()({},"".concat(i,"_url"),d.file.response.data["".concat(i,"_url")]),"".concat(i,"_path"),d.file.response.data["".concat(i,"_path")]))}},hideLabel:S}),(0,e.jsx)(g.ZP,{danger:!0,onClick:function(){return[c(_()(_()({},"".concat(i,"_url"),""),"".concat(i,"_path"),"")),y.setFieldsValue(_()({},a,""))]},children:(0,e.jsx)(n.FormattedMessage,{id:"delete"})})]})}}),(0,e.jsx)(Ie.ZP.Item,{shouldUpdate:!0,children:function(y){var z=y.getFieldValue(a);return z?(0,e.jsx)(At(),{width:"auto",height:200,url:z,controls:!0}):(0,e.jsx)(e.Fragment,{})}})]})},Ae=Qt,Be=t(53957),be=t(71230),fe=t(15746),Le=t(8266),We=t(64599),ot=t.n(We),ut=function(r){var s=new FormData;for(var i in r)if(r[i]!=null||r[i]!=null){if(Array.isArray(r[i])){r[i].length||s.append("".concat(i,"[]"),"[]");var a=ot()(r[i]),o;try{for(a.s();!(o=a.n()).done;){var c=o.value;s.append("".concat(i,"[]"),c)}}catch(C){a.e(C)}finally{a.f()}continue}s.set(i,r[i])}return s},Et=t(5966),Ft=t(52688),Wt=t(50335),yn=t(64218),Lt=t(78957),Tn=t(86738),Kt=t(96074),Sn=t(35614),An=t(2291),Ct=t(19411),wr=t(19054),Br=function M(r,s,i){return r.reduce(function(a,o){var c,C=s===o.id;return[].concat(p()(a),[{value:o.id,title:o.title,label:o.title,disabled:i||C,children:M((c=o==null?void 0:o.lessons)!==null&&c!==void 0?c:[],s,C||i)}])},[])},On=function(r){var s=r.name,i=r.currentLessonId,a=(0,n.useIntl)(),o=(0,l.useContext)(ie._y),c=o.state,C=(0,l.useMemo)(function(){var S;return[{value:"",title:a.formatMessage({id:"root",defaultMessage:"Root"}),label:a.formatMessage({id:"root",defaultMessage:"Root"}),children:Br((S=c==null?void 0:c.lessons)!==null&&S!==void 0?S:[],i)}]},[c,i]);return(0,e.jsx)("div",{className:"tree-select",children:(0,e.jsx)(wr.Z,{name:s,label:(0,e.jsx)(n.FormattedMessage,{id:"parent_lesson"}),fieldProps:{treeData:C,treeDefaultExpandAll:!0,treeLine:!0}})})},Wr=function(r){var s=r.onFinish,i=r.onValuesChange,a=r.onDelete,o=r.onClone,c=r.initialValues,C=r.lesson,S=r.loading,x=S===void 0?!1:S,y=Ie.ZP.useForm(),z=j()(y,1),d=z[0],v=Ie.ZP.useWatch("active_from",d),A=Ie.ZP.useWatch("active_to",d),V=(0,n.useIntl)();return(0,e.jsx)(Ie.ZP,{form:d,submitter:{render:function(q){return(0,e.jsx)(be.Z,{gutter:16,children:(0,e.jsx)(fe.Z,{span:24-8,children:(0,e.jsx)(be.Z,{justify:"center",className:"program__cta-footer",children:(0,e.jsx)(yn.Z,{offsetBottom:4,children:(0,e.jsxs)(Lt.Z,{size:"large",children:[(0,e.jsx)(g.ZP,u()(u()({loading:x,type:"primary",onClick:function(){var le;return(le=q.form)===null||le===void 0?void 0:le.submit()}},q.submitButtonProps),{},{children:C.isNew?(0,e.jsx)(n.FormattedMessage,{id:"create"}):(0,e.jsx)(n.FormattedMessage,{id:"save"})}),"submit"),!C.isNew&&(0,e.jsx)(g.ZP,{onClick:o,loading:x,children:(0,e.jsx)(n.FormattedMessage,{id:"clone"})}),(0,e.jsx)(Tn.Z,{onConfirm:a,title:(0,e.jsx)(n.FormattedMessage,{id:"deleteQuestion"}),okText:(0,e.jsx)(n.FormattedMessage,{id:"yes"}),cancelText:(0,e.jsx)(n.FormattedMessage,{id:"no"}),children:(0,e.jsx)(g.ZP,u()(u()({type:"primary",danger:!0},q.submitButtonProps),{},{loading:x,children:(0,e.jsx)(n.FormattedMessage,{id:"delete"})}))},"delete")]})})})})})}},layout:"horizontal",onFinish:s,onValuesChange:i,initialValues:u()(u()({},c),{},{summary:c.summary||""}),style:{height:"100%"},children:(0,e.jsxs)(be.Z,{gutter:16,style:{height:"100%"},children:[(0,e.jsxs)(fe.Z,{span:24-8,children:[(0,e.jsx)(Kt.Z,{children:(0,e.jsx)(n.FormattedMessage,{id:"lesson"})}),(0,e.jsxs)(ee.ZP,{children:[(0,e.jsx)(Et.Z,{name:"title",label:(0,e.jsx)(n.FormattedMessage,{id:"title"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"title"}),placeholder:V.formatMessage({id:"title"}),required:!0,labelCol:{span:5}}),(0,e.jsx)(Ie.ZP.Item,{name:"summary",label:(0,e.jsx)(n.FormattedMessage,{id:"summary"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"summary_tooltip"}),valuePropName:"value",labelCol:{span:5},children:(0,e.jsx)(Ct.ZP,{directory:"course/".concat(C.course_id,"/lesson/").concat(C.id,"/wysiwyg")})})]})]}),(0,e.jsx)(fe.Z,{span:8,children:(0,e.jsxs)("aside",{className:"program-sidebar program-sidebar--right",children:[(0,e.jsx)(Et.Z,{name:"duration",label:(0,e.jsx)(n.FormattedMessage,{id:"duration"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"duration"}),placeholder:V.formatMessage({id:"duration"})}),(0,e.jsx)(Ft.Z,{name:"active",label:(0,e.jsx)(n.FormattedMessage,{id:"is_active"})}),(0,e.jsx)(Wt.Z,{allowClear:!1,width:"md",name:"active_from",label:(0,e.jsx)(n.FormattedMessage,{id:"active_from"}),placeholder:V.formatMessage({id:"active_from",defaultMessage:"active_from"}),rules:[{validator:function(q,oe){return oe&&A&&(0,Sn.A)(new Date(oe),new Date(A))?Promise.reject(new Error(V.formatMessage({id:"invalidDate"}))):Promise.resolve()}}]}),(0,e.jsx)(Wt.Z,{allowClear:!1,width:"md",name:"active_to",label:(0,e.jsx)(n.FormattedMessage,{id:"active_to"}),placeholder:V.formatMessage({id:"active_to",defaultMessage:"active_to"}),disabled:!v&&!A,rules:[{validator:function(q,oe){return oe&&v&&(0,An.R)(new Date(oe),new Date(v))?Promise.reject(new Error(V.formatMessage({id:"invalidDate"}))):Promise.resolve()}}]}),(0,e.jsx)(On,{name:"parent_id",currentLessonId:C==null?void 0:C.id})]})})]})})},Kr=Wr,Dn=function(r){var s;return u()(u()({},r),{},{parent_id:(s=r.parent_id)!==null&&s!==void 0?s:""})},Nr=function(){var r=(0,l.useContext)(ie._y),s=r.currentEditMode,i=s&&s.mode==="lesson"&&s.value?s.value:{},a=(0,l.useState)(Dn(i)),o=j()(a,2),c=o[0],C=o[1],S=(0,l.useState)([]),x=j()(S,2),y=x[1],z=(0,l.useState)(!1),d=j()(z,2),v=d[0],A=d[1],V=(0,l.useContext)(ie._y),I=V.updateLesson,q=V.deleteLesson,oe=V.cloneLesson,le=(0,n.useParams)();(0,l.useEffect)(function(){return C(Dn(i)),(i==null?void 0:i.topics)&&y(i.topics)},[i]);var ze=(0,l.useCallback)(function(){A(!0);var Ne=ut(u()(u()({course_id:(i==null?void 0:i.course_id)||le.course},c),{},{active:c.active?1:0,parent_lesson_id:c.parent_id}));return I&&c.id?I(c.id,Ne).then(function(){return A(!1)}).catch(function(Re){console.error(Re),A(!1)}):Promise.resolve()},[c,i==null?void 0:i.course_id,I]),ye=(0,l.useCallback)(function(){return c.id&&q&&q(c.id),Promise.resolve()},[q,c.id]),Se=(0,l.useCallback)(function(){return c.id&&(oe==null?void 0:oe(c.id))},[oe,c.id]);return(0,e.jsx)(Kr,{loading:v,lesson:c,initialValues:c,onDelete:ye,onFinish:ze,onClone:Se,onValuesChange:function(Re){C(function(tt){return u()(u()({},tt),Re)})}})},$r=Nr,zr=t(54734),In=t(55725),Jt=t(51042),Zn=t(75625),kr=t(62848),ct=t(83062),Gr=t(65400),Nt=t.n(Gr),Fn=t(74253),Vr=t(95486),xt=t(43669),Xt=t(28248),Hr=function(r){var s=r.handleOk,i=r.isModalVisible,a=r.initialValues,o=r.courseId;return(0,e.jsxs)(Xt.Z,{title:(0,e.jsx)(xt._H,{id:"description"}),visible:i,onOk:s,onCancel:s,width:1e3,footer:[(0,e.jsx)(g.ZP,{type:"primary",onClick:s,children:"Ok"},"back")],children:[(0,e.jsx)(Ie.ZP.Item,{name:"introduction",label:(0,e.jsx)(xt._H,{id:"introduction"}),labelCol:{span:5},wrapperCol:{span:19},tooltip:(0,e.jsx)(xt._H,{id:"introduction_tooltip"}),valuePropName:"value",children:(0,e.jsx)(Ct.ZP,{directory:"course/".concat(o,"/lesson/").concat(a.lesson_id,"/topic/").concat(a.id,"/wysiwyg")})}),(0,e.jsx)(Ie.ZP.Item,{name:"description",label:(0,e.jsx)(xt._H,{id:"description"}),labelCol:{span:5},wrapperCol:{span:19},tooltip:(0,e.jsx)(xt._H,{id:"description_tooltip"}),valuePropName:"value",children:(0,e.jsx)(Ct.ZP,{directory:"course/".concat(o,"/lesson/").concat(a.lesson_id,"/topic/").concat(a.id,"/wysiwyg")})}),(0,e.jsx)(Ie.ZP.Item,{name:"summary",label:(0,e.jsx)(xt._H,{id:"summary"}),labelCol:{span:5},wrapperCol:{span:19},tooltip:(0,e.jsx)(xt._H,{id:"summary_tooltip"}),valuePropName:"value",children:(0,e.jsx)(Ct.ZP,{directory:"course/".concat(o,"/lesson/").concat(a.lesson_id,"/topic/").concat(a.id,"/wysiwyg")})})]})},Qr=function(r){var s=r.onValuesChange,i=r.initialValues,a=r.courseId,o=(0,n.useIntl)(),c=l.useState(!1),C=j()(c,2),S=C[0],x=C[1];return(0,e.jsxs)(Ie.ZP,{submitter:!1,onValuesChange:s,initialValues:u()({},i),layout:"horizontal",children:[(0,e.jsx)(Et.Z,{name:"title",label:(0,e.jsx)(n.FormattedMessage,{id:"title"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"title"}),placeholder:o.formatMessage({id:"title",defaultMessage:"title"}),required:!0}),(0,e.jsx)(Et.Z,{name:"duration",label:(0,e.jsx)(n.FormattedMessage,{id:"duration"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"duration"}),placeholder:o.formatMessage({id:"duration"})}),(0,e.jsx)(On,{name:"lesson_id"}),(0,e.jsx)(Ie.ZP.Item,{label:(0,e.jsx)(n.FormattedMessage,{id:"description"}),children:(0,e.jsx)(g.ZP,{type:"primary",onClick:function(){return x(!0)},children:(0,e.jsx)(n.FormattedMessage,{id:"open_editor"})})}),(0,e.jsx)(Ft.Z,{name:"active",label:(0,e.jsx)(n.FormattedMessage,{id:"is_active"})}),(0,e.jsx)(Ft.Z,{name:"preview",label:(0,e.jsx)(n.FormattedMessage,{id:"able_to_preview"})}),(0,e.jsx)(Ft.Z,{name:"can_skip",label:(0,e.jsx)(n.FormattedMessage,{id:"can_skip"})}),(0,e.jsx)(Ie.ZP.Item,{name:"json",label:(0,e.jsx)(n.FormattedMessage,{id:"json"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"json_tooltip"}),valuePropName:"value",children:(0,e.jsx)(Vr.Z,{})}),(0,e.jsx)(Hr,{isModalVisible:S,handleOk:function(){return x(!1)},initialValues:i,courseId:a})]})},Jr=Qr,Yt=function(r){if(typeof(r==null?void 0:r.topicable_type)!="string"||!r.topicable_type)return"Unknown";var s=((r==null?void 0:r.topicable_type)||"").split("\\");return s.pop()||"Unknown"},Ln=t(97704),Ot=t(66419),yt=t(83863),Xr=function(r){var s=r.value,i=r.onChange,a=r.multiple,o=a===void 0?!1:a,c=(0,l.useState)([]),C=j()(c,2),S=C[0],x=C[1];return(0,l.useEffect)(function(){(0,Ln.gq)().then(function(y){return y.success&&x(y.data)})},[]),(0,l.useEffect)(function(){S.length&&(S.find(function(y){return Number(y.id)===Number(s)})||(0,Ln.gq)().then(function(y){return y.success&&x(y.data)}))},[s]),(0,e.jsx)(yt.default,{loading:S.length===0,style:{width:"100%"},value:s,onChange:i,mode:o?"multiple":void 0,showSearch:!0,placeholder:(0,e.jsx)(n.FormattedMessage,{id:"H5P_select_content"}),optionFilterProp:"children",filterOption:function(z,d){var v,A=d==null||(v=d.children)===null||v===void 0?void 0:v.slice(1,d==null?void 0:d.children.length).join("");return(0,Ot.ri)(A,z)},children:S.map(function(y){return(0,e.jsxs)(yt.default.Option,{value:y.id.toString(),children:[(0,e.jsx)("small",{children:y.id})," ",y.title," (",y.library.title,")"]},y.id.toString())})})},Yr=Xr,qr=t(9412),ea=t(89825),ta=function(r){var s=r.id,i=r.onChange,a=(0,n.useIntl)(),o=(0,l.useState)(s==="new"||s===void 0?"new":Number(s)),c=j()(o,2),C=c[0],S=c[1];return(0,e.jsxs)(l.Fragment,{children:[(0,e.jsxs)(be.Z,{gutter:16,align:"middle",className:"create-new",children:[(0,e.jsx)(fe.Z,{children:(0,e.jsxs)(g.ZP,{type:"primary",onClick:function(){return S("new")},children:[" ",(0,e.jsx)(n.FormattedMessage,{id:"create_new"})]})}),(0,e.jsx)(fe.Z,{span:4,children:(0,e.jsxs)(Ee.Z,{children:[(0,e.jsx)("small",{children:(0,e.jsx)(n.FormattedMessage,{id:"or"})})," ",(0,e.jsx)(n.FormattedMessage,{id:"reuse_existing"})]})}),(0,e.jsx)(fe.Z,{span:12,children:(0,e.jsx)(Yr,{value:s,onChange:function(y){i(y),S(s==="new"?"new":Number(s))}})})]}),(0,e.jsx)(be.Z,{style:{marginTop:"30px"},children:(0,e.jsx)(fe.Z,{span:24,children:(0,e.jsx)(ea.Z,{id:C,onSubmit:function(y){return i(String(y))}},C)})}),(0,e.jsx)(Kt.Z,{}),(0,e.jsx)(be.Z,{gutter:16,children:(0,e.jsx)(fe.Z,{span:24,children:(0,e.jsx)(be.Z,{children:(0,e.jsx)(qr.C,{onSuccess:function(y){y.data.id&&i(String(y.data.id))},onError:function(){return console.log(a.formatMessage({id:"error"}))}})})})})]})},na=ta,Rn=t(96365),ra=t(98980),aa=t.n(ra),sa=[{provider_name:"YouTube",provider_url:"https://www.youtube.com/",endpoints:[{schemes:["https://*.youtube.com/watch*","https://*.youtube.com/v/*","https://youtu.be/*","https://*.youtube.com/shorts/*","https://youtube.com/shorts/*"],url:"https://www.youtube.com/oembed",discovery:!0}]},{provider_name:"Reddit",provider_url:"https://reddit.com/",endpoints:[{schemes:["https://reddit.com/r/*/comments/*/*","https://www.reddit.com/r/*/comments/*/*"],url:"https://www.reddit.com/oembed"}]},{provider_name:"Flickr",provider_url:"https://www.flickr.com/",endpoints:[{schemes:["http://*.flickr.com/photos/*","http://flic.kr/p/*","https://*.flickr.com/photos/*","https://flic.kr/p/*"],url:"https://www.flickr.com/services/oembed/",discovery:!0}]},{provider_name:"Vimeo",provider_url:"https://vimeo.com/",endpoints:[{schemes:["https://vimeo.com/*","https://vimeo.com/album/*/video/*","https://vimeo.com/channels/*/*","https://vimeo.com/groups/*/videos/*","https://vimeo.com/ondemand/*/*","https://player.vimeo.com/video/*"],url:"https://vimeo.com/api/oembed.{format}",discovery:!0}]},{provider_name:"SoundCloud",provider_url:"http://soundcloud.com/",endpoints:[{schemes:["http://soundcloud.com/*","https://soundcloud.com/*","https://soundcloud.app.goog.gl/*"],url:"https://soundcloud.com/oembed"}]},{provider_name:"Twitter",provider_url:"http://www.twitter.com/",endpoints:[{schemes:["https://twitter.com/*/status/*","https://*.twitter.com/*/status/*","https://twitter.com/*/moments/*","https://*.twitter.com/*/moments/*"],url:"https://publish.twitter.com/oembed"}]},{provider_name:"GIPHY",provider_url:"https://giphy.com",endpoints:[{schemes:["https://giphy.com/gifs/*","http://gph.is/*","https://media.giphy.com/media/*/giphy.gif"],url:"https://giphy.com/services/oembed",discovery:!0}]}],ia=function(r){return(0,e.jsx)(aa(),u()(u()({},r),{},{providers:sa}))},oa=function(r){var s=r.text,i=r.onChange,a=(0,l.useState)(s),o=j()(a,2),c=o[0],C=o[1],S=(0,l.useState)(s),x=j()(S,2),y=x[0],z=x[1];return(0,e.jsxs)(l.Fragment,{children:[(0,e.jsxs)(be.Z,{children:[(0,e.jsx)(Rn.Z,{value:s,onChange:function(v){C(v.target.value),i(v.target.value)}}),(0,e.jsx)(g.ZP,{onClick:function(){return z(c)},children:(0,e.jsx)(n.FormattedMessage,{id:"preview"})})]}),(0,e.jsx)(be.Z,{children:y&&(0,e.jsx)(ia,{url:y},y)})]})},la=oa,ua=function(r){var s=r.text,i=r.onChange,a=r.directory,o=a===void 0?"topics/new":a;return(0,e.jsx)("div",{children:(0,e.jsx)(Ct.ZP,{directory:o,value:s,onChange:function(C){i(C)}})})},da=ua,ca=t(26859),ma=t(72252),_a=t(38703),Un=t(97042),pa=t(56117),fa=t(59037);Un.default.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(Un.default.version,"/pdf.worker.min.js");var va={acceptedTypes:_()(_()(_()({audio:".mp3,audio/*",video:".mp3,video/*",document:".doc,.docx,.pdf,.zip"},m.oz.Audio,".mp3,audio/*"),m.oz.Video,".mp3,video/*"),m.oz.PDF,".pdf,application/pdf")},ha=function(r){var s={},i;for(i in r)switch(T()(r[i])){case"boolean":s[i]=r[i]?1:0;break;case"object":s[i]=JSON.stringify(r[i]);break;case"string":case"number":s[i]=r[i];break;default:break}return s},ga=function(r){var s=r.file,i=(0,l.useState)(0),a=j()(i,2),o=a[0],c=a[1],C=(0,l.useState)(1),S=j()(C,2),x=S[0],y=S[1];return(0,e.jsxs)("div",{children:[o===0?(0,e.jsx)(Pe.Z,{}):(0,e.jsxs)("div",{style:{margin:"0.5em 0"},children:[(0,e.jsxs)(Ee.Z,{children:[(0,e.jsx)(n.FormattedMessage,{id:"page"}),":"]}),(0,e.jsx)(ma.Z,{defaultPageSize:1,size:"small",total:o,onChange:function(d){return y(d)},simple:!0})]}),(0,e.jsx)(pa.Z,{file:s,onLoadSuccess:function(d){var v=d.numPages;return c(v)},children:(0,e.jsx)(fa.Z,{pageNumber:x,className:"pdf-preview"})})]})},ja=function(r){var s,i=r.topic,a=(0,l.useContext)(ie._y),o=a.getLessons;if((0,l.useEffect)(function(){var C;if(((C=i.json)===null||C===void 0?void 0:C.ffmpeg.state)==="coding"){var S=setTimeout(function(){o&&o()},1e3);return function(){return clearTimeout(S)}}},[]),((s=i.json)===null||s===void 0?void 0:s.ffmpeg.state)==="coding"){var c;return(0,e.jsxs)(Ee.Z,{children:[(0,e.jsx)(n.FormattedMessage,{id:"encoding_progress",defaultMessage:"Encoding progress:"}),(0,e.jsx)(_a.Z,{percent:(c=i.json)===null||c===void 0||(c=c.ffmpeg)===null||c===void 0?void 0:c.percentage})]})}return(0,e.jsx)(l.Fragment,{})},xa=function(r){var s,i,a,o,c=r.type,C=r.topic;if(C&&C.topicable&&"url"in C.topicable)switch(c){case m.oz.Audio:return C.topicable_type===m.oz.Audio&&(s=C.topicable)!==null&&s!==void 0&&s.url?(0,e.jsx)("audio",{preload:"none",controls:!0,src:C.topicable.url}):(0,e.jsx)(l.Fragment,{});case m.oz.Video:return C.topicable_type===m.oz.Video&&(i=C.topicable)!==null&&i!==void 0&&i.url?(0,e.jsx)("video",{controls:!0,src:C.topicable.url,width:"100%"}):(0,e.jsx)(l.Fragment,{});case m.oz.Image:return C.topicable_type===m.oz.Image&&(a=C.topicable)!==null&&a!==void 0&&a.url?(0,e.jsx)("img",{title:"Topic image",src:C.topicable.url,width:"100%"}):(0,e.jsx)(l.Fragment,{});case m.oz.PDF:return C.topicable_type===m.oz.PDF&&(o=C.topicable)!==null&&o!==void 0&&o.url?(0,e.jsx)(ga,{file:C.topicable.url}):(0,e.jsx)(l.Fragment,{});default:return(0,e.jsx)(l.Fragment,{})}return(0,e.jsx)(l.Fragment,{})},ba=function(r){var s=r.topic,i=r.type,a=r.onUpdate,o=r.disabled,c=o===void 0?!1:o,C=r.currentState,S=r.onChange,x=r.folder,y=r.maxFiles,z=r.clearListAfterUpload,d=(0,l.useCallback)(function(A){return A.file.status==="done"?a&&a(A):S&&S(A)},[a,S]),v=u()(u()({},C),{},{topicable_type:i,active:C.active?1:0,preview:C.preview?1:0,can_skip:C.can_skip?1:0});return v.introduction||v==null||delete v.introduction,v.description||v==null||delete v.description,v.summary||v==null||delete v.summary,v.json||v==null||delete v.json,(0,e.jsxs)(l.Fragment,{children:[(0,e.jsx)(be.Z,{children:(0,e.jsx)(jt.Z,{folder:x,onChange:d,name:"value",url:s.isNew?"/api/admin/topics":"/api/admin/topics/".concat(s.id,"?_method=PUT"),accept:va.acceptedTypes[i],data:ha(v),maxFiles:y,clearListAfterUpload:z,children:(0,e.jsxs)(g.ZP,{disabled:c,icon:(0,e.jsx)(ca.Z,{}),children:["Click to upload ",i]})})}),(0,e.jsx)(be.Z,{children:(0,e.jsxs)("div",{style:{padding:"0 12px"},children:[s.topicable_type===m.oz.Video&&(0,e.jsx)(ja,{topic:s}),(0,e.jsx)(xa,{type:i,topic:C})]})})]})},Ma=ba,wn=t(82061),Ea=t(69753),qt=t(2487),Pa=function(r){var s=r.topicId,i=r.folder,a=(0,l.useState)(),o=j()(a,2),c=o[0],C=o[1],S=(0,l.useRef)(),x=(0,l.useCallback)(function(){S.current&&S.current.abort(),S.current=new AbortController,(0,P.Jb)(s,{signal:S.current.signal}).then(function(d){d&&d.success&&C(d.data)})},[s]),y=(0,l.useCallback)(function(d){d&&d.success&&(0,P.Jb)(s).then(function(v){v&&v.success&&C(v.data)})},[]),z=(0,l.useCallback)(function(d){(0,P.fg)(s,d).then(function(v){v.success&&x()})},[s]);return(0,l.useEffect)(function(){x()},[s]),(0,e.jsx)(qt.Z,{size:"small",itemLayout:"horizontal",dataSource:c,header:(0,e.jsx)(jt.Z,{folder:i,url:"/api/admin/topics/".concat(s,"/resources"),name:"resource",onChange:function(v){if(v.file.status==="done"){var A;(A=v.file.response)!==null&&A!==void 0&&A.success&&y(v.file.response)}}}),renderItem:function(v){return(0,e.jsx)(qt.Z.Item,{actions:[(0,e.jsx)(g.ZP,{type:"default",danger:!0,icon:(0,e.jsx)(wn.Z,{}),size:"small",onClick:function(){return z(v.id)}},"delete")],children:(0,e.jsx)(qt.Z.Item.Meta,{avatar:(0,e.jsx)("a",{href:v.url,target:"_blank",rel:"noreferrer",children:(0,e.jsx)(g.ZP,{type:"default",icon:(0,e.jsx)(Ea.Z,{}),size:"small"})}),description:(0,e.jsx)(l.Fragment,{children:(0,e.jsx)(g.ZP,{type:"text",size:"small",children:v.name})})})})}})},Ca=Pa,ya=t(75175),Ta=t(9649),Sa=function(r){var s=r.value,i=r.onChange,a=(0,l.useState)([]),o=j()(a,2),c=o[0],C=o[1],S=(0,l.useState)(!1),x=j()(S,2),y=x[0],z=x[1],d=(0,l.useState)(),v=j()(d,2),A=v[0],V=v[1],I=(0,l.useState)(),q=j()(I,2),oe=q[0],le=q[1],ze=(0,l.useRef)(),ye=(0,l.useCallback)(function(Ne){z(!0),ze.current&&ze.current.abort(),ze.current=new AbortController,(0,Ta.JZ)({search:Ne,pageSize:0},{signal:ze.current.signal}).then(function(Re){if(Re.success)return Array.isArray(Re.data.data)&&C(Re.data.data);z(!1)}).catch(function(){return z(!1)})},[]),Se=(0,l.useCallback)(function(Ne){ye(Ne)},[ye]);return(0,l.useEffect)(function(){ye()},[s]),(0,l.useEffect)(function(){V(c.map(function(Ne){return Ne.scos.filter(function(Re){return Re.id===s})}).flat()[0])},[c]),(0,e.jsxs)(l.Fragment,{children:[oe&&(0,e.jsx)(Xt.Z,{width:"80vw",bodyStyle:{height:"70vh"},visible:!0,onOk:function(){return le(void 0)},onCancel:function(){return le(void 0)},children:(0,e.jsx)(ya.Z,{uuid:oe})}),(0,e.jsxs)(Lt.Z,{children:[(0,e.jsx)(yt.default,{allowClear:!0,style:{width:"100%",minWidth:"300px"},value:A?"".concat(A==null?void 0:A.id,": ").concat(A==null?void 0:A.title):void 0,onChange:function(Re){return i&&i(Re&&Re.split(":")[0])},showSearch:!0,onSearch:Se,placeholder:(0,e.jsx)(n.FormattedMessage,{id:"select_scorm_package"}),optionFilterProp:"children",filterOption:function(Re,tt){if(tt&&tt.children){var pt;return(tt==null||(pt=tt.children)===null||pt===void 0?void 0:pt.toString().toLowerCase().indexOf(Re.toLowerCase()))>=0}return!0},notFoundContent:y?(0,e.jsx)(Pe.Z,{size:"small"}):null,children:c.map(function(Ne){return(0,e.jsx)(yt.default.OptGroup,{label:"".concat(Ne.id,": ").concat(Ne.version),children:(0,e.jsx)(l.Fragment,{children:Ne.scos.map(function(Re){return(0,e.jsx)(yt.default.Option,{value:"".concat(Re.id,": ").concat(Re.title),children:Re.title},Re.id)})})},Ne.id)})}),A&&(0,e.jsx)(g.ZP,{onClick:function(){le(A==null?void 0:A.uuid)},children:(0,e.jsx)(n.FormattedMessage,{id:"preview"})},s)]})]})},Aa=Sa,Oa=function(r){var s=r.value,i=r.onChange;return(0,e.jsxs)(Lt.Z,{size:"large",align:"start",children:[(0,e.jsx)(Aa,{value:s,onChange:function(o){return i&&i(Number(o))}}),(0,e.jsx)(g.ZP,{onClick:function(){return i&&i(void 0)},children:(0,e.jsx)(n.FormattedMessage,{id:"clear_selection"})})]})},Bn=Oa,en=t(4828),tn=t(49354),nn=t(35102),rn=t(45699),an=t(35326),sn=t(67337),on=t(68432),ln=t(15360),un=t(43973),dn=t(57619),Da=t(11475),Ia=t(38751),Za=t(24739),$t=t(31199),Fa=t(89652),La=function(r){var s=r.topicable,i=r.onAdded,a=r.onRemoved,o=r.onEdited,c=r.onChange,C=(0,n.useIntl)();return(0,e.jsxs)(l.Fragment,{children:[(0,e.jsx)(Ie.ZP,{initialValues:{max_attempts:s?s.max_attempts:void 0,max_execution_time:s?s.max_execution_time:void 0,min_pass_score:s?s.min_pass_score:void 0},onValuesChange:function(x){var y=Object.keys(x)[0];y&&c(y,x[y])},submitter:!1,children:(0,e.jsxs)(Za.UW,{children:[(0,e.jsx)($t.Z,{name:"max_attempts",label:(0,e.jsx)(n.FormattedMessage,{id:"max_attempts"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"max_attempts"}),placeholder:C.formatMessage({id:"max_attempts",defaultMessage:"max_attempts"})}),(0,e.jsx)($t.Z,{name:"max_execution_time",label:(0,e.jsx)(n.FormattedMessage,{id:"max_execution_time"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"max_execution_time_tooltip"}),placeholder:C.formatMessage({id:"max_execution_time",defaultMessage:"max_execution_time"})}),(0,e.jsx)($t.Z,{name:"min_pass_score",max:100,label:(0,e.jsx)(n.FormattedMessage,{id:"min_pass_score"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"min_pass_score_tooltip"}),placeholder:C.formatMessage({id:"min_pass_score",defaultMessage:"min_pass_score"})})]})}),(0,e.jsx)(Kt.Z,{}),s?(0,e.jsx)(Ia.i,{questions:s.questions,quizId:s.id,onAdded:i,onEdited:o,onRemoved:a}):(0,e.jsx)(Fa.default,{children:(0,e.jsx)(n.FormattedMessage,{id:"pressSaveToCreateQuestions",defaultMessage:"Create this Topic before adding questions"})})]})},Ra=La,zt=t(44167),Ua=function(r){var s,i=r.onChange,a=r.topicable,o=(0,l.useCallback)(function(c){var C=Object.keys(c)[0];C&&i(c[C])},[]);return(0,e.jsx)(l.Fragment,{children:(0,e.jsx)(Ie.ZP,{initialValues:{notify_users:(s=a==null?void 0:a.notify_users)!==null&&s!==void 0?s:[]},onValuesChange:o,submitter:!1,children:(0,e.jsx)(Ie.ZP.Item,{name:"notify_users",label:(0,e.jsx)(n.FormattedMessage,{id:"notify_users",defaultMessage:"Users to notify"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"notify_users_tooltip",defaultMessage:"Indicate which users should be notified about project upload"}),children:(0,e.jsx)(zt.Z,{multiple:!0})})})})},wa=Ua,Wn=function(r){if(r)switch(r){case"ScormSco":return(0,e.jsx)(en.Z,{});case"PDF":return(0,e.jsx)(tn.Z,{});case"Audio":return(0,e.jsx)(nn.Z,{});case"Image":return(0,e.jsx)(rn.Z,{});case"OEmbed":return(0,e.jsx)(an.Z,{});case"H5P":return(0,e.jsx)(sn.Z,{});case"Video":return(0,e.jsx)(on.Z,{});case"RichText":return(0,e.jsx)(ln.Z,{});case"Project":return(0,e.jsx)(un.Z,{});case"GiftQuiz":return(0,e.jsx)(dn.Z,{})}return(0,e.jsx)(Da.Z,{})},Kn=function(r){return[m.oz.GiftQuiz,m.oz.Project,m.oz.GiftQuiz].includes(r)},Ba=function(){var r,s,i,a=(0,l.useContext)(ie._y),o=a.state,c=a.currentEditMode,C=a.updateTopic,S=a.deleteTopic,x=a.onTopicUploaded,y=a.cloneTopic,z=a.getLessons,d=c&&c.mode==="topic"&&c.value?c.value:{},v=(0,l.useState)(!1),A=j()(v,2),V=A[0],I=A[1],q=(0,l.useState)(u()(u()({},d),{},{value:d==null||(r=d.topicable)===null||r===void 0?void 0:r.value})),oe=j()(q,2),le=oe[0],ze=oe[1],ye=le.topicable_type,Se=(0,l.useState)(le.order),Ne=j()(Se,1),Re=Ne[0],tt=(0,l.useState)(!1),pt=j()(tt,2),nt=pt[0],Ze=pt[1],ve=(0,l.useState)(d),Ce=j()(ve,2),te=Ce[0],Ge=Ce[1];(0,l.useEffect)(function(){Ge(d)},[d]),(0,l.useEffect)(function(){ze(function(Ke){var he;return u()(u()(u()({},Ke),d),{},{value:ye===(d==null?void 0:d.topicable_type)?d==null||(he=d.topicable)===null||he===void 0?void 0:he.value:""})}),d!=null&&d.isNew&&I(!Kn(d.topicable_type))},[ye,d]),(0,l.useEffect)(function(){var Ke,he;if(!((te==null?void 0:te.topicable_type)!==m.oz.Video||!((Ke=te.json)!==null&&Ke!==void 0&&Ke.ffmpeg.state)||((he=te.json)===null||he===void 0?void 0:he.ffmpeg.state)==="finished")){var Ye=function(){var He=O()(f()().mark(function st(){var ge;return f()().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:if(!d.id){$e.next=5;break}return $e.next=3,(0,P.BN)(d.id);case 3:ge=$e.sent,ge.success&&Ge(ge.data);case 5:case"end":return $e.stop()}},st)}));return function(){return He.apply(this,arguments)}}(),mt=window.setInterval(Ye,5e3);return function(){window.clearInterval(mt)}}},[te==null?void 0:te.topicable_type,(s=te.json)===null||s===void 0||(s=s.ffmpeg)===null||s===void 0?void 0:s.state]);var Fe=(0,l.useCallback)(function(Ke,he){ze(function(Ye){return u()(u()({},Ye),{},_()({},Ke,he))}),I(!1)},[d]),qe=(0,l.useCallback)(function(Ke){ze(function(he){return u()(u()({},he),Ke)})},[d]),bt=(0,l.useCallback)(function(Ke){C&&le.id&&(Ze(!0),C(le.id,Ke).then(function(){return Ze(!1)}).catch(function(){Ze(!1)}))},[le,C,d]),rt=(0,l.useCallback)(function(){var Ke=u()(u()({},le),{},{active:le.active?1:0,preview:le.preview?1:0,can_skip:le.can_skip?1:0,order:Re,json:le.json?JSON.stringify(le.json):null});Kn(d.topicable_type)&&!Ke.value&&(Ke.value="theProject");var he=ut(Ke);bt(he)},[le,bt,Re]),gt=(0,l.useCallback)(function(){return d!=null&&d.isNew||Ze(!0),S&&le.id&&S(le.id)},[le,S,d]),dt=(0,l.useCallback)(function(){return d.id&&y&&y(d.id)},[d,y]);return(0,e.jsx)(l.Fragment,{children:(0,e.jsxs)(be.Z,{gutter:16,style:{height:"100%"},children:[(0,e.jsxs)(fe.Z,{span:24-8,style:{marginBottom:"46px"},children:[(0,e.jsxs)(Fn.Z,{children:[d&&Wn(Yt(d))," ",(d==null?void 0:d.topicable_type)&&(d==null?void 0:d.topicable_type.split("\\").pop())," ",(0,e.jsx)(n.FormattedMessage,{id:"type"})]}),!ye&&(0,e.jsx)(Te.Z,{message:(0,e.jsx)(n.FormattedMessage,{id:"select_type_topic"}),type:"info"}),ye&&ye===(m.oz===null||m.oz===void 0?void 0:m.oz.RichText)&&(0,e.jsx)(da,{directory:"course/".concat(o==null?void 0:o.id,"/lesson/").concat(d==null?void 0:d.lesson_id,"/topic/").concat(d==null?void 0:d.id,"/wysiwyg"),text:(d==null?void 0:d.topicable_type)===(m.oz===null||m.oz===void 0?void 0:m.oz.RichText)&&(d==null||(i=d.topicable)===null||i===void 0?void 0:i.value)||"",onChange:function(he){return Fe("value",he)}}),d&&ye&&(ye===m.oz.Video||ye===m.oz.Audio||ye===m.oz.Image||ye===m.oz.PDF)&&(0,e.jsx)(Ma,{folder:"course/".concat(o==null?void 0:o.id),type:ye,topic:te,currentState:le,onChange:function(he){Ze(!0),he.file.status==="removed"&&Ze(!1)},onUpdate:function(he){var Ye,mt,He,st;d.id&&x&&x(d.id,he),d.topicable_type===m.oz.Video&&setTimeout(function(){z&&z()},5e3),ze(u()(u()({},le),{},{id:he==null||(Ye=he.file)===null||Ye===void 0||(Ye=Ye.response)===null||Ye===void 0||(Ye=Ye.data)===null||Ye===void 0?void 0:Ye.id,order:(mt=he.file.response.data)===null||mt===void 0?void 0:mt.order,value:he==null||(He=he.file)===null||He===void 0||(He=He.response.data)===null||He===void 0||(He=He.topicable)===null||He===void 0?void 0:He.value,topicable:he==null||(st=he.file)===null||st===void 0||(st=st.response.data)===null||st===void 0?void 0:st.topicable})),I(!1),Ze(!1)},disabled:!1,maxFiles:1,clearListAfterUpload:!0}),ye&&ye===m.oz.OEmbed&&(0,e.jsx)(la,{text:le.value,onChange:function(he){return Fe("value",he)}}),ye&&ye===m.oz.Project&&(0,e.jsx)(wa,{onChange:function(he){return Fe("notify_users",he)},topicable:d.topicable}),ye&&ye===m.oz.GiftQuiz&&(0,e.jsx)(Ra,{onChange:function(he,Ye){Fe(he,Ye)},topicable:le.topicable,onAdded:z,onRemoved:z,onEdited:z}),ye&&ye===m.oz.H5P&&(0,e.jsx)(na,{id:le.value,onChange:function(he){return Fe("value",he)}}),ye&&ye===m.oz.SCORM&&(0,e.jsx)(Bn,{value:Number(le.value),onChange:function(he){return Fe("value",he)}}),(0,e.jsx)(be.Z,{justify:"center",className:"program__cta-footer",children:(0,e.jsx)(yn.Z,{offsetBottom:4,children:(0,e.jsxs)(Lt.Z,{size:"large",children:[(0,e.jsx)(Nt(),{loading:nt,children:(0,e.jsx)(n.FormattedMessage,{id:"cancel"})}),!d.isNew&&(0,e.jsx)(Nt(),{onClick:dt,loading:nt,children:(0,e.jsx)(n.FormattedMessage,{id:"clone"})}),(0,e.jsx)(Nt(),{type:"primary",onClick:rt,disabled:V,loading:nt,children:(0,e.jsx)(n.FormattedMessage,{id:"save"})}),(0,e.jsx)(Nt(),{danger:!0,onClick:gt,loading:nt,children:(0,e.jsx)(n.FormattedMessage,{id:"delete"})})]})})})]}),(0,e.jsx)(fe.Z,{span:8,children:(0,e.jsxs)("aside",{className:"program-sidebar program-sidebar--right",children:[(o==null?void 0:o.lessons)&&(0,e.jsx)(Jr,{courseId:Number(o==null?void 0:o.id),courseLessons:o==null?void 0:o.lessons,initialValues:le,onValuesChange:function(he){return qe(he)}}),!le.isNew&&(0,e.jsxs)(l.Fragment,{children:[(0,e.jsx)(Fn.Z,{children:(0,e.jsx)(n.FormattedMessage,{id:"file_resources"})}),(0,e.jsx)(Ca,{topicId:Number(d==null?void 0:d.id),folder:"course/".concat(o==null?void 0:o.id)})]})]})})]})})},Wa=Ba,Pt=t(57818),Nn=t(43458),Ka=t(13769),$n=t.n(Ka),Na=["initialValue","onCreate"],$a=l.forwardRef(function(M,r){var s=M.initialValue,i=M.onCreate,a=$n()(M,Na),o=(0,l.useState)(""),c=j()(o,2),C=c[0],S=c[1];return(0,e.jsxs)("div",u()(u()({className:"program-sidebar__list-item program-sidebar__list-item--lesson-new",ref:r},a),{},{children:[(0,e.jsx)(In.Z,{}),(0,e.jsx)(Rn.Z,{value:C,onChange:function(y){return S(y.target.value)},placeholder:s.title}),(0,e.jsx)("div",{children:(0,e.jsx)(ct.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"create"}),children:(0,e.jsx)(g.ZP,{disabled:!C,size:"small",className:"btn-create-lesson",type:"primary",icon:(0,e.jsx)(Z.Z,{}),onClick:function(){return i(C)}})})})]}))}),za=t(16165),ka=function(){return(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23.01",height:"18.077",viewBox:"0 0 23.01 18.077",children:(0,e.jsxs)("g",{id:"Group_5","data-name":"Group 5",transform:"translate(-97.496 -306.965)",children:[(0,e.jsx)("path",{id:"Path_2","data-name":"Path 2",d:"M138.934,401.557s8.685.579,12.972-6.836-11.893-6.747-7.254-1.854,16.02-8.07,16.02-8.07",transform:"translate(-40.906 -77.037)",fill:"none",stroke:"#58c35d",strokeLinecap:"round",strokeWidth:"1"}),(0,e.jsx)("path",{id:"Path_3","data-name":"Path 3",d:"M115.761,306.465h5.332V311.8",transform:"translate(-1.087 1)",fill:"none",stroke:"#58c35d",strokeLinecap:"round",strokeWidth:"1"})]})})},zn=function(r){return(0,e.jsx)(za.Z,u()({component:ka},r))},cn=t(21987);function Ga(M,r){return mn.apply(this,arguments)}function mn(){return mn=O()(f()().mark(function M(r,s){return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/admin/recommender/course/".concat(r," "),u()({method:"GET",useCache:!1},s||{})));case 1:case"end":return a.stop()}},M)})),mn.apply(this,arguments)}function Va(M,r){return _n.apply(this,arguments)}function _n(){return _n=O()(f()().mark(function M(r,s){return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/admin/recommender/lesson/".concat(r,"/topic "),u()({method:"GET",useCache:!1},s||{})));case 1:case"end":return a.stop()}},M)})),_n.apply(this,arguments)}var Ha=function(r){var s=(0,l.useState)(),i=j()(s,2),a=i[0],o=i[1];return(0,l.useEffect)(function(){Ga(r).then(function(c){return c.success&&o(c.data)})},[r]),a},Qa=function(r){var s=(0,l.useState)(),i=j()(s,2),a=i[0],o=i[1];return(0,l.useEffect)(function(){Va(r).then(function(c){return c.success&&o(c.data)})},[r]),a},Ja=function(r){return r.includes("H5P")?"H5P":r},Xa=function(r){return(r==null?void 0:r.includes("."))&&(r==null?void 0:r.split(".").join(" "))},kn=function(r){return Math.min(Math.ceil(Math.abs(r)*100),100)},Ya=function(r){var s=r.recommendedData,i=r.createTopic;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(cn.Z,{className:"recommender__paragraph",children:[(0,e.jsx)(n.FormattedMessage,{id:"recommender.add_exercise"}),(0,e.jsx)("span",{className:"recommender__paragraph--span",children:"".concat(Xa(s==null?void 0:s.topic_type),",")}),(0,e.jsx)("br",{}),(0,e.jsx)(n.FormattedMessage,{id:"recommender.increase"}),(0,e.jsx)("span",{className:"recommender__paragraph--span",children:"".concat(kn(s.probability),"%.")})]}),(0,e.jsx)(g.ZP,{className:"recommender__button",type:"default",onClick:i,children:(0,e.jsx)(n.FormattedMessage,{id:"recommender.add_button"})})]})},qa=function(){return(0,e.jsx)(cn.Z,{className:"recommender__paragraph",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender.save_exercise"})})},es=t(56717),ts=t(55241),ns=function(){return(0,e.jsxs)("div",{className:"recommender__popover-wrapper",children:[(0,e.jsx)("h3",{className:"recommender__popover-title",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender_info.title"})}),(0,e.jsx)("strong",{className:"recommender__popover-text",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender_info.first_title"})}),(0,e.jsx)("p",{className:"recommender__popover-text",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender_info.first_text"})}),(0,e.jsx)("strong",{className:"recommender__popover-text",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender_info.second_title"})}),(0,e.jsx)("p",{className:"recommender__popover-text",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender_info.second_text"})})]})},Gn=function(){return(0,e.jsx)(ts.Z,{placement:"bottomLeft",content:(0,e.jsx)(ns,{}),trigger:"click",showArrow:!1,className:"recommender__popover",children:(0,e.jsx)(es.Z,{style:{color:"#2DAC34"}})})},rs=function(r){var s=r.courseId,i=r.lessonId,a=r.recommenderType,o=a===void 0?m.Zg.Exercise:a,c=(0,l.useContext)(ie._y),C=c.addNewTopic,S=Qa(i),x=(0,l.useCallback)(function(d,v){if(C){var A=C(d,v);n.history.push("/courses/list/".concat(s,"/program/?topic=").concat(A.id))}},[C]),y=function(v){switch(v){case m.Zg.Info:return(0,e.jsx)(qa,{});case m.Zg.Exercise:return S&&(0,e.jsx)(Ya,{createTopic:function(){return x(i,m.oz[Ja(S==null?void 0:S.topic_type)])},recommendedData:S});default:return(0,e.jsx)(n.FormattedMessage,{id:"recommender.no_recommendation"})}},z=o===m.Zg.Exercise&&!S;return(0,e.jsxs)("div",{className:"recommender",children:[(0,e.jsx)(zn,{style:{marginTop:"4px"}}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"recommender__title",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender.title"})}),z&&(0,e.jsx)(Pe.Z,{}),y(o)]}),(0,e.jsx)(Gn,{})]})},as=function(r){var s=r.courseId,i=Ha(s);return i&&i.probability&&i.probability>-.016?null:i?(0,e.jsxs)("div",{className:"recommender",children:[(0,e.jsx)(zn,{style:{marginTop:"4px"}}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"recommender__title",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender.title"})}),(0,e.jsxs)(cn.Z,{className:"recommender__paragraph",children:[(0,e.jsx)(n.FormattedMessage,{id:"recommender.finish"}),(0,e.jsx)("strong",{children:"".concat(kn(i.probability),"%. ")}),(0,e.jsx)("br",{}),(0,e.jsx)(n.FormattedMessage,{id:"recommender.too_long"})]})]}),(0,e.jsx)(Gn,{})]}):(0,e.jsx)(e.Fragment,{})},ss=t(52745),Vn=t(59234),is=[{type:m.oz.RichText,icon:(0,e.jsx)(ln.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"RichText"})},{type:m.oz.OEmbed,icon:(0,e.jsx)(an.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"OEmbed"})},{type:m.oz.Audio,icon:(0,e.jsx)(nn.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"Audio"})},{type:m.oz.Video,icon:(0,e.jsx)(on.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"Video"})},{type:m.oz.H5P,icon:(0,e.jsx)(sn.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"H5P"})},{type:m.oz.Image,icon:(0,e.jsx)(rn.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"Image"})},{type:m.oz.PDF,icon:(0,e.jsx)(tn.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"PDF"})},{type:m.oz.SCORM,icon:(0,e.jsx)(en.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"SCORM"})},{type:m.oz.Project,icon:(0,e.jsx)(un.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"Project"})},{type:m.oz.GiftQuiz,icon:(0,e.jsx)(dn.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"Quiz"})}],os=function(r){var s=r.onSelected,i=r.positionsToHide,a=(0,l.useState)(!1),o=j()(a,2),c=o[0],C=o[1],S=(0,n.useModel)("@@initialState"),x=S.initialState,y=(0,l.useCallback)(function(v){C(!1),s(v)},[]),z=(0,l.useCallback)((0,Nn.a)(x==null?void 0:x.packages),[x==null?void 0:x.packages]),d=(0,l.useCallback)(function(v){var A,V=Object.keys(m.oz).filter(function(q){return m.oz[q]==v}).pop(),I=V&&(x==null||(A=x.config)===null||A===void 0||(A=A.filter(function(q){return q.key===(0,Vn.Wg)(V)})[0])===null||A===void 0?void 0:A.data);if(I)return!0;switch(v){case m.oz.GiftQuiz:return!z(Pt.Z.TopicTypeGift);case m.oz.SCORM:return!z(Pt.Z.Scorm);case m.oz.Project:return!z(Pt.Z.TopicTypeProject);default:return!z(Pt.Z.TopicTypes)}},[x]);return(0,e.jsxs)("div",{className:`topic-types-selector topic-types-selector__recommender-wrapper
       `.concat(c?"topic-types-selector--visible":""),children:[(0,e.jsx)(g.ZP,{type:"text",size:"small",onClick:function(){return C(function(A){return!A})},className:"topic-types-selector__recommender--add-btn",icon:c?(0,e.jsx)(ss.Z,{}):(0,e.jsx)(Jt.Z,{}),children:(0,e.jsx)(n.FormattedMessage,{id:"recommender.add_new_exercise"})}),(0,e.jsx)("div",{className:"topic-types-selector__recommender".concat(`
          `,c?"topic-types-selector__recommender--active":""),children:is.map(function(v){return!(i!=null&&i.includes(v.type))&&!d(v.type)&&(0,e.jsx)(ct.Z,{title:v.title,children:(0,e.jsx)(g.ZP,{block:!0,onClick:function(){return y(v.type)},icon:v.icon})},v.type)})})]})},ls=t(86864),us=function(r){var s=r.onSelected,i=r.onNewLesson,a=r.positionsToHide,o=r.depth,c=o===void 0?0:o,C=(0,l.useState)(!1),S=j()(C,2),x=S[0],y=S[1],z=(0,n.useModel)("@@initialState"),d=z.initialState,v=(0,n.useIntl)(),A=(0,l.useCallback)(function(I){y(!1),s(I)},[]),V=(0,l.useCallback)(function(I){var q,oe,le,ze,ye,Se=Object.keys(m.oz).filter(function(Re){return m.oz[Re]==I}).pop(),Ne=Se&&(d==null||(q=d.config)===null||q===void 0||(q=q.filter(function(Re){return Re.key===(0,Vn.Wg)(Se)})[0])===null||q===void 0?void 0:q.data);if(Ne)return!0;switch(I){case m.oz.GiftQuiz:return!(d!=null&&d.packages&&d!==null&&d!==void 0&&(oe=d.packages)!==null&&oe!==void 0&&oe[Pt.Z.TopicTypeGift]);case m.oz.SCORM:return!(d!=null&&d.packages&&d!==null&&d!==void 0&&(le=d.packages)!==null&&le!==void 0&&le[Pt.Z.Scorm]);case m.oz.Project:return!(d!=null&&d.packages&&d!==null&&d!==void 0&&(ze=d.packages)!==null&&ze!==void 0&&ze[Pt.Z.TopicTypeProject]);default:return!(d!=null&&d.packages&&d!==null&&d!==void 0&&(ye=d.packages)!==null&&ye!==void 0&&ye[Pt.Z.TopicTypes])}},[d]);return(0,e.jsxs)("div",{className:"topic-types-selector ".concat(x?"topic-types-selector--visible":""),children:[(0,e.jsx)(Lt.Z,{children:(0,e.jsx)(ct.Z,{placement:"top",title:(0,e.jsx)(n.FormattedMessage,{id:"add_new_topic"}),children:(0,e.jsx)(g.ZP,{type:"primary",size:"small",onClick:function(){return y(function(q){return!q})},icon:(0,e.jsx)(Jt.Z,{})})})}),(0,e.jsxs)("div",{className:"topic-types-selector__list ".concat(x?"topic-types-selector__list--visible":""),children:[!(a!=null&&a.includes("lesson"))&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ct.Z,{placement:"right",title:v.messages["Lesson_level-".concat(c)]?(0,e.jsx)(n.FormattedMessage,{id:"Lesson_level-".concat(c)}):(0,e.jsx)(n.FormattedMessage,{id:"Lesson",defaultMessage:"Lesson"}),children:(0,e.jsx)(g.ZP,{block:!0,onClick:function(){y(!1),i()},icon:(0,e.jsx)(ls.Z,{})})}),(0,e.jsx)(Kt.Z,{})]}),!(a!=null&&a.includes(m.oz.RichText))&&!V(m.oz.RichText)&&(0,e.jsx)(ct.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"RichText"}),children:(0,e.jsx)(g.ZP,{block:!0,onClick:function(){return A(m.oz.RichText)},icon:(0,e.jsx)(ln.Z,{})})}),!(a!=null&&a.includes(m.oz.OEmbed))&&!V(m.oz.OEmbed)&&(0,e.jsx)(ct.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"OEmbed"}),children:(0,e.jsx)(g.ZP,{block:!0,onClick:function(){return A(m.oz.OEmbed)},icon:(0,e.jsx)(an.Z,{})})}),!(a!=null&&a.includes(m.oz.Audio))&&!V(m.oz.Audio)&&(0,e.jsx)(ct.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"Audio"}),children:(0,e.jsx)(g.ZP,{block:!0,onClick:function(){return A(m.oz.Audio)},icon:(0,e.jsx)(nn.Z,{})})}),!(a!=null&&a.includes(m.oz.Video))&&!V(m.oz.Video)&&(0,e.jsx)(ct.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"Video"}),children:(0,e.jsx)(g.ZP,{block:!0,onClick:function(){return A(m.oz.Video)},icon:(0,e.jsx)(on.Z,{})})}),!(a!=null&&a.includes(m.oz.H5P))&&!V(m.oz.H5P)&&(0,e.jsx)(ct.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"H5P"}),children:(0,e.jsx)(g.ZP,{block:!0,onClick:function(){return A(m.oz.H5P)},icon:(0,e.jsx)(sn.Z,{})})}),!(a!=null&&a.includes(m.oz.Image))&&!V(m.oz.Image)&&(0,e.jsx)(ct.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"Image"}),children:(0,e.jsx)(g.ZP,{block:!0,onClick:function(){return A(m.oz.Image)},icon:(0,e.jsx)(rn.Z,{})})}),!(a!=null&&a.includes(m.oz.PDF))&&!V(m.oz.PDF)&&(0,e.jsx)(ct.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"PDF"}),children:(0,e.jsx)(g.ZP,{block:!0,onClick:function(){return A(m.oz.PDF)},icon:(0,e.jsx)(tn.Z,{})})}),!(a!=null&&a.includes(m.oz.SCORM))&&!V(m.oz.SCORM)&&(0,e.jsx)(ct.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"SCORM"}),children:(0,e.jsx)(g.ZP,{block:!0,onClick:function(){return A(m.oz.SCORM)},icon:(0,e.jsx)(en.Z,{})})}),!(a!=null&&a.includes(m.oz.Project))&&!V(m.oz.Project)&&(0,e.jsx)(ct.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"Project"}),children:(0,e.jsx)(g.ZP,{block:!0,onClick:function(){return A(m.oz.Project)},icon:(0,e.jsx)(un.Z,{})})}),!(a!=null&&a.includes(m.oz.GiftQuiz))&&!V(m.oz.GiftQuiz)&&(0,e.jsx)(ct.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"Quiz"}),children:(0,e.jsx)(g.ZP,{block:!0,onClick:function(){return A(m.oz.GiftQuiz)},icon:(0,e.jsx)(dn.Z,{})})})]})]})},ds=t(70227),vt=function(M){return M.New="new",M.Lesson="lesson",M.Topic="topic",M}({}),Hn=function(r,s){return r.map(function(i){return u()(u()({},i),{},{id:"topic-".concat(i.id,"-").concat(s)})})},cs=function(r,s){return r.map(function(i){return u()(u()({},i),{},{id:i.isNew?"new-".concat(i.id,"-").concat(s):"lesson-".concat(i.id,"-").concat(s)})})},Qn=function(r,s){var i,a;return u()(u()({},r),{},{id:r.isNew?"new-".concat(r.id,"-").concat(s):"lesson-".concat(r.id,"-").concat(s),lessons:cs((i=r==null?void 0:r.lessons)!==null&&i!==void 0?i:[],s+1),topics:Hn((a=r==null?void 0:r.topics)!==null&&a!==void 0?a:[],s+1)})},ms=function M(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return r.reduce(function(i,a){var o;return[].concat(p()(i),p()(M((o=a==null?void 0:a.lessons)!==null&&o!==void 0?o:[],s+1)),[Qn(a,s)])},[])},_s=function M(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return r.reduce(function(i,a){var o,c;return[].concat(p()(i),p()(M((o=a==null?void 0:a.lessons)!==null&&o!==void 0?o:[],s+1)),p()(Hn((c=a==null?void 0:a.topics)!==null&&c!==void 0?c:[],s)))},[])},ps=function(r){return r.map(function(s){var i,a,o=Qn(s,0),c=[].concat(p()((i=o.lessons)!==null&&i!==void 0?i:[]),p()((a=o.topics)!==null&&a!==void 0?a:[])).map(function(C){var S=C.id;return S});return{id:o.id,children:c,hasChildren:c.length>0,isExpanded:!0,data:o}})},fs=function(r,s){return r.reduce(function(i,a){var o,c,C=[];if("lessons"in a||"topics"in a){var S,x;C=[].concat(p()((S=a.lessons)!==null&&S!==void 0?S:[]),p()((x=a.topics)!==null&&x!==void 0?x:[])).map(function(z){var d=z.id;return d})}var y=(o=s==null||(c=s["".concat(a.id)])===null||c===void 0?void 0:c.isExpanded)!==null&&o!==void 0?o:!0;return u()(u()({},i),{},_()({},"".concat(a.id),{id:a.id,children:C,hasChildren:C.length>0,isExpanded:y,data:a}))},{})},pn=function(r,s,i){var a=p()(r),o=s%a.length,c=i%a.length,C=a.splice(o,1),S=j()(C,1),x=S[0];return a.splice(c,0,x),a},kt=function(r,s,i){var a=p()(r),o=a.length===1||s===a.length?s:s%a.length;return a.splice(o,0,i),a},Tt=function(r){return r.map(function(s,i){var a=s.toString().split("-"),o=j()(a,2),c=o[1];return[+c,i]})},St=function(){var M=O()(f()().mark(function r(s,i,a){var o,c;return f()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return o=void 0,s(function(x){return o=x,ds.d.apply(void 0,[x].concat(p()(i)))}),S.prev=2,S.next=5,a();case 5:c=S.sent,T()(c)==="object"&&c!==null&&"success"in c&&typeof c.success=="boolean"&&!c.success&&o&&s(o),S.next=12;break;case 9:S.prev=9,S.t0=S.catch(2),o&&s(o);case 12:case"end":return S.stop()}},r,null,[[2,9]])}));return function(s,i,a){return M.apply(this,arguments)}}(),vs=function(r,s){return Object.values(r.items).find(function(i){var a=i.children;return a.includes(s)})},Jn=function(r,s,i){var a,o;return(a=(o=r.items)===null||o===void 0||(o=o[s])===null||o===void 0||(o=o.children)===null||o===void 0?void 0:o.indexOf(i))!==null&&a!==void 0?a:-1},hs=function(r){var s=r.onNewLesson,i=(0,l.useContext)(ie._y),a=i.state,o=i.currentEditMode,c=i.updateLesson,C=i.addNewTopic,S=i.addNewLesson,x=i.getLessons,y=a==null?void 0:a.id,z=(0,l.useMemo)(function(){var Ze;return ps((Ze=a==null?void 0:a.lessons)!==null&&Ze!==void 0?Ze:[])},[a==null?void 0:a.lessons]),d=(0,l.useMemo)(function(){var Ze,ve;return[].concat(p()(ms((Ze=a==null?void 0:a.lessons)!==null&&Ze!==void 0?Ze:[])),p()(_s((ve=a==null?void 0:a.lessons)!==null&&ve!==void 0?ve:[])))},[a==null?void 0:a.lessons]),v=(0,l.useState)({rootId:0,items:{}}),A=j()(v,2),V=A[0],I=A[1],q=(0,n.useModel)("@@initialState"),oe=q.initialState,le=(0,n.useIntl)(),ze=(0,l.useCallback)((0,Nn.a)(oe==null?void 0:oe.packages),[oe==null?void 0:oe.packages]);(0,l.useEffect)(function(){I(function(Ze){var ve={children:z.map(function(te){var Ge=te.id;return Ge}),id:"root",data:z,isExpanded:!0,hasChildren:z.length>0},Ce=fs(d,Ze.items);return{rootId:ve.id,items:u()(u()({},Ce),{},_()({},ve.id,ve))}})},[d]);var ye=(0,l.useCallback)(function(Ze,ve){if(C){var Ce=C(Ze,ve);n.history.push("/courses/list/".concat(y,"/program/?topic=").concat(Ce.id))}},[C]),Se=(0,l.useMemo)(function(){var Ze;return((Ze=oe==null?void 0:oe.config)!==null&&Ze!==void 0?Ze:[]).reduce(function(ve,Ce){return Ce.key==="maxLessonsNestingInProgram"?u()(u()({},ve),{},{lesson:Ce.data}):Ce.key==="minTopicNestingInProgram"?u()(u()({},ve),{},{topic:Ce.data}):ve},{})},[oe==null?void 0:oe.config]),Ne=(0,l.useCallback)(function(Ze){var ve,Ce,te=[],Ge=(ve=Se==null?void 0:Se.lesson)!==null&&ve!==void 0?ve:.5,Fe=(Ce=Se==null?void 0:Se.topic)!==null&&Ce!==void 0?Ce:.5;return Number.isInteger(Ge)&&Ze>Ge&&te.push("lesson"),Number.isInteger(Fe)&&Ze<Fe&&Object.values(m.oz).forEach(function(qe){return te.push(qe)}),te},[Se]),Re=(0,l.useCallback)(function(Ze){var ve,Ce,te=Ze.item,Ge=Ze.depth,Fe=Ze.provided,qe=Ze.onExpand,bt=Ze.onCollapse,rt=te.id.toString().split("-"),gt=j()(rt,2),dt=gt[0],Ke=gt[1],he=Number(Ke),Ye=function(He,st){var ge,De=d.find(function(et){return et.id.includes(String(He))}),$e=De==null||(ge=De.topics)===null||ge===void 0?void 0:ge[De.topics.length-1];return($e==null?void 0:$e.id)===st};return dt==="new"&&te.data.isNew?(0,e.jsx)($a,u()(u()(u()({},Fe.draggableProps),Fe.dragHandleProps),{},{ref:Fe.innerRef,initialValue:te.data,onCreate:function(He){var st=ut(u()(u()({},te.data),{},{parent_lesson_id:te.data.parent_id,title:He,active:te.data.active?1:0}));c&&c(he,st)}})):dt==="lesson"?(0,e.jsxs)("div",u()(u()(u()({},Fe.draggableProps),Fe.dragHandleProps),{},{ref:Fe.innerRef,className:"program-sidebar__list-item program-sidebar__list-item--lesson ".concat((o==null?void 0:o.mode)==="lesson"&&o.id===he?"program-sidebar__list-item--active":""),children:[(0,e.jsxs)("div",{className:"program-sidebar__text-wrap",children:[(0,e.jsx)("button",{className:"program-sidebar__collapse",onClick:function(){return te.isExpanded?bt(te.id):qe(te.id)},children:te.isExpanded?(0,e.jsx)(zr.Z,{}):(0,e.jsx)(In.Z,{})}),(0,e.jsx)(ct.Z,{placement:"top",title:te.data.title,children:(0,e.jsx)(n.NavLink,{to:"/courses/list/".concat(y,"/program/?").concat(dt,"=").concat(he),className:"program-sidebar__link",children:(0,e.jsx)("span",{className:"program-sidebar__title",children:te.data.title})})})]}),(0,e.jsx)(us,{onNewLesson:function(){S&&S(he)},onSelected:function(He){return ye(he,He)},positionsToHide:Ne(Ge+1),depth:Ge})]})):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.NavLink,u()(u()(u()({className:"program-sidebar__link program-sidebar__list-item program-sidebar__list-item--topic ".concat((o==null?void 0:o.mode)==="topic"&&o.id===he?"program-sidebar__list-item--active":""),to:"/courses/list/".concat(y,"/program/?").concat(dt,"=").concat(he)},Fe.draggableProps),Fe.dragHandleProps),{},{ref:Fe.innerRef,children:[(0,e.jsx)(ct.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:Yt(te.data)}),children:Wn(Yt(te.data))}),(0,e.jsx)("span",{className:"title",children:te.data.title})]})),ze(Pt.Z.Recommender)&&y&&(o==null?void 0:o.mode)==="topic"&&(o==null||(ve=o.value)===null||ve===void 0?void 0:ve.lesson_id)&&(o==null||(Ce=o.value)===null||Ce===void 0?void 0:Ce.lesson_id)===te.data.lesson_id&&Ye(o.value.lesson_id,te.data.id)&&(0,e.jsxs)(e.Fragment,{children:[d.length>5&&(0,e.jsx)(as,{courseId:y}),(0,e.jsx)(rs,{courseId:y,lessonId:o.value.lesson_id,recommenderType:o.value.isNew?m.Zg.Info:m.Zg.Exercise}),(0,e.jsx)(os,{onSelected:function(He){return ye(te.data.lesson_id,He)},positionsToHide:Ne(Ge+1)})]})]})},[y,o]),tt=(0,l.useCallback)(function(Ze){return I(function(ve){return(0,Zn.U)(ve,Ze,{isExpanded:!0})})},[]),pt=(0,l.useCallback)(function(Ze){return I(function(ve){return(0,Zn.U)(ve,Ze,{isExpanded:!1})})},[]),nt=(0,l.useCallback)(function(){var Ze=O()(f()().mark(function ve(Ce,te){var Ge,Fe,qe,bt,rt,gt,dt,Ke,he,Ye,mt,He,st,ge,De,$e,et,Mt,ft,Gt,at,Dt,Yn,qn,er,tr,nr,rr,ar,Rt,sr,ir,or,lr,ur,dr,cr,Vt,mr,_r,pr,fr,vr,hr,gr,jr,xr,bn,Mn,Ut,br,En,Pn,Mr,wt,It,Er,Pr,Cr,yr,Tr,Sr,Ar,Or,Cn,Ht,Bt,Zt,Dr,Ir,Zr,Fr,Lr,Rr,Ur;return f()().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:if(!(!te||!y)){je.next=2;break}return je.abrupt("return");case 2:if(Ge=V.items[Ce.parentId].children,Fe=Ge[Ce.index].toString(),qe=Fe.split("-"),bt=j()(qe,2),rt=bt[0],gt=bt[1],dt=V.items[te.parentId].children,Ke=Se==null?void 0:Se.lesson,he=Se==null?void 0:Se.topic,rt!==vt.New){je.next=11;break}return B.ZP.warning(le.formatMessage({id:"new_lessons_cant_be_moved"})),je.abrupt("return");case 11:if(!te.parentId.toString().includes("topic")){je.next=63;break}if(st=Ge.filter(function(ht){return ht.toString().includes("topic")}),ge=vs(V,te.parentId),De=Number((Ye=(mt=((He=ge==null?void 0:ge.id)!==null&&He!==void 0?He:"").toString().split("-"))===null||mt===void 0?void 0:mt[2])!==null&&Ye!==void 0?Ye:-2)+1,!(rt===vt.Lesson&&Ke!==void 0&&De>Ke)){je.next=18;break}return B.ZP.warning(le.formatMessage({id:"max_lesson_nesting"},{max:Ke})),je.abrupt("return");case 18:if(!(rt===vt.Topic&&he!==void 0&&De<he)){je.next=21;break}return B.ZP.warning(le.formatMessage({id:"min_topic_nesting"},{min:he})),je.abrupt("return");case 21:if(!((ge==null?void 0:ge.id)!==void 0&&Ce.parentId===ge.id)){je.next=35;break}if(rt!==vt.Lesson){je.next=25;break}return B.ZP.warning(le.formatMessage({id:"lessons_and_topics_cant_be_mixed"})),je.abrupt("return");case 25:if(rt!==vt.Topic){je.next=35;break}if($e=Jn(V,ge.id,te.parentId),!($e<0)){je.next=29;break}return je.abrupt("return");case 29:return et=pn(st,Ce.index,$e),Mt=Tt(et),je.next=33,St(I,[Ce,{parentId:ge.id,index:$e}],function(){return(0,P.DY)({class:"Topic",orders:Mt,course_id:y})});case 33:return x==null||x(),je.abrupt("return");case 35:if(!((ge==null?void 0:ge.id)!==void 0&&Ce.parentId!==ge.id)){je.next=62;break}if(ft=ge.children.filter(function(ht){return ht.toString().includes("lesson")}),Gt=ge.children.filter(function(ht){return ht.toString().includes("topic")}),rt!==vt.Lesson){je.next=50;break}return at=ft.length,Dt=ge.id.toString().split("-"),Yn=j()(Dt,2),qn=Yn[1],er=V.items[Fe].data,tr={parent_lesson_id:ge.id==="root"?"":+qn,course_id:y,title:er.title,order:at},nr=ut(tr),rr=kt(ft,at,Fe),ar=Tt(rr),je.next=48,St(I,[Ce,u()(u()({},te),{},{index:at})],function(){return(0,P.sI)(+gt,nr).then(function(){return(0,P.DY)({class:"Lesson",orders:ar,course_id:y})})});case 48:return x==null||x(),je.abrupt("return");case 50:if(rt!==vt.Topic){je.next=62;break}if(Rt=Jn(V,ge.id,te.parentId)+1,!(Rt<1)){je.next=54;break}return je.abrupt("return");case 54:return sr=ge.id.toString().split("-"),ir=j()(sr,2),or=ir[1],lr={lesson_id:+or,order:Rt},ur=kt(Gt,Rt-ft.length,Fe),dr=Tt(ur),cr=ut(lr),je.next=61,St(I,[Ce,{parentId:ge.id,index:Rt}],function(){return(0,P.Cn)(+gt,cr).then(function(){return(0,P.DY)({class:"Topic",orders:dr,course_id:y})})});case 61:x==null||x();case 62:return je.abrupt("return");case 63:if(!(te.parentId==="root"&&rt===vt.Topic)){je.next=66;break}return B.ZP.warning(le.formatMessage({id:"topic_cant_be_in_root"})),je.abrupt("return");case 66:if(!(Ce.parentId===te.parentId&&te.index!==void 0)){je.next=93;break}if(Vt=Ge.filter(function(ht){return ht.toString().includes("lesson")}),mr=Ge.filter(function(ht){return ht.toString().includes("topic")}),rt!==vt.Lesson){je.next=81;break}if(_r=0,pr=Vt.length-1,!(te.index<_r||te.index>pr)){je.next=75;break}return B.ZP.warning(le.formatMessage({id:"lessons_and_topics_cant_be_mixed"})),je.abrupt("return");case 75:return fr=pn(Vt,Ce.index,te.index),vr=Tt(fr),je.next=79,St(I,[Ce,te],function(){return(0,P.DY)({class:"Lesson",orders:vr,course_id:y})});case 79:return x==null||x(),je.abrupt("return");case 81:if(rt!==vt.Topic){je.next=93;break}if(hr=Vt.length,gr=Ge.length-1,!(te.index<hr||te.index>gr)){je.next=87;break}return B.ZP.warning(le.formatMessage({id:"lessons_and_topics_cant_be_mixed"})),je.abrupt("return");case 87:return jr=pn(mr,Ce.index,te.index),xr=Tt(jr),je.next=91,St(I,[Ce,te],function(){return(0,P.DY)({class:"Topic",orders:xr,course_id:y})});case 91:return x==null||x(),je.abrupt("return");case 93:if(Ce.parentId===te.parentId){je.next=135;break}if(Ut=dt.filter(function(ht){return ht.toString().includes("lesson")}),br=dt.filter(function(ht){return ht.toString().includes("topic")}),En=Number((bn=(Mn=te.parentId.toString().split("-"))===null||Mn===void 0?void 0:Mn[2])!==null&&bn!==void 0?bn:-2)+1,!(rt===vt.Lesson&&Ke!==void 0&&En>Ke)){je.next=100;break}return B.ZP.warning(le.formatMessage({id:"max_lesson_nesting"},{max:Ke})),je.abrupt("return");case 100:if(!(rt===vt.Topic&&he!==void 0&&En<he)){je.next=103;break}return B.ZP.warning(le.formatMessage({id:"min_topic_nesting"},{min:he})),je.abrupt("return");case 103:if(rt!==vt.Lesson){je.next=120;break}if(Mr=0,wt=Ut.length,It=(Pn=te.index)!==null&&Pn!==void 0?Pn:wt,!(wt!==0&&It<Mr||wt!==0&&It>wt)){je.next=110;break}return B.ZP.warning(le.formatMessage({id:"lessons_and_topics_cant_be_mixed"})),je.abrupt("return");case 110:return Er=te.parentId.toString().split("-"),Pr=j()(Er,2),Cr=Pr[1],yr=V.items[Fe].data,Tr={parent_lesson_id:te.parentId==="root"?"":+Cr,course_id:y,title:yr.title,order:It},Sr=ut(Tr),Ar=kt(Ut,It,Fe),Or=Tt(Ar),je.next=118,St(I,[Ce,u()(u()({},te),{},{index:It})],function(){return(0,P.sI)(+gt,Sr).then(function(){return(0,P.DY)({class:"Lesson",orders:Or,course_id:y})})});case 118:return x==null||x(),je.abrupt("return");case 120:if(rt!==vt.Topic){je.next=135;break}if(Ht=Ut.length,Bt=dt.length,Zt=(Cn=te.index)!==null&&Cn!==void 0?Cn:Bt,!(Ht!==0&&Bt!==0&&Zt<Ht||Ht!==0&&Bt!==0&&Zt>Bt)){je.next=127;break}return B.ZP.warning(le.formatMessage({id:"lessons_and_topics_cant_be_mixed"})),je.abrupt("return");case 127:return Dr=te.parentId.toString().split("-"),Ir=j()(Dr,2),Zr=Ir[1],Fr={lesson_id:+Zr,order:Zt},Lr=kt(br,Zt-Ut.length,Fe),Rr=Tt(Lr),Ur=ut(Fr),je.next=134,St(I,[Ce,u()(u()({},te),{},{index:Zt})],function(){return(0,P.Cn)(+gt,Ur).then(function(){return(0,P.DY)({class:"Topic",orders:Rr,course_id:y})})});case 134:x==null||x();case 135:case"end":return je.stop()}},ve)}));return function(ve,Ce){return Ze.apply(this,arguments)}}(),[le,V,y,Se]);return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)(kr.Z,{offsetPerLevel:9,tree:V,onExpand:tt,onCollapse:pt,onDragEnd:nt,renderItem:Re,isDragEnabled:!0,isNestingEnabled:!0}),(0,e.jsx)(g.ZP,{onClick:s,type:"primary",className:"program-sidebar__add-btn",icon:(0,e.jsx)(Jt.Z,{}),children:(0,e.jsx)("span",{children:(0,e.jsx)(n.FormattedMessage,{id:"add_lesson"})})})]})},gs=function(){var r=(0,l.useContext)(ie._y),s=r.state,i=r.addNewLesson,a=(0,l.useCallback)(function(){if(i&&s){var o=i();n.history.push("/courses/list/".concat(s.id,"/program/?lesson=").concat(o.id))}},[i,s]);return s&&s.lessons?(0,e.jsx)("aside",{className:"program-sidebar program-sidebar--left ".concat(s.lessons.length>0?"":"program-sidebar--empty"),children:(0,e.jsx)(hs,{onNewLesson:a})}):(0,e.jsx)("div",{children:(0,e.jsx)(Pe.Z,{})})},js=gs,xs=function(){var r=(0,l.useContext)(ie._y),s=r.state,i=r.currentEditMode,a=Ee.Z.Title;return s&&s.lessons?(0,e.jsxs)("div",{className:"course-block",children:[(0,e.jsxs)(be.Z,{gutter:16,children:[(0,e.jsx)(fe.Z,{span:4,children:(0,e.jsx)(js,{})}),(0,e.jsxs)(fe.Z,{span:24-4,children:[i&&i.mode==="lesson"&&i.value&&(0,e.jsx)($r,{},i.id),i&&i.mode==="topic"&&i.value&&(0,e.jsx)(Wa,{},i.id),i&&i.mode==="init"&&(0,e.jsxs)(be.Z,{style:{height:"100%"},children:[(0,e.jsx)(fe.Z,{span:16,children:(0,e.jsx)("div",{className:"program__empty-message",children:s.lessons.length>0?(0,e.jsx)(a,{level:4,children:(0,e.jsx)(Le.Z,{id:"program_form_not_selected_list_message"})}):(0,e.jsx)(a,{level:4,children:(0,e.jsx)(Le.Z,{id:"program_form_empty_list_message"})})})}),(0,e.jsx)(fe.Z,{span:8,children:(0,e.jsx)("aside",{className:"program-sidebar program-sidebar--right"})})]})]})]}),(0,e.jsx)("div",{className:"curriculum-lessons-wrapper"})]}):(0,e.jsx)("div",{children:(0,e.jsx)(Pe.Z,{})})},bs=xs,Ms=function(r){var s=r.id;return(0,e.jsxs)(ie.Il,{id:Number(s),children:[(0,e.jsx)(bs,{})," "]})},Es=Ms;function Ps(M,r){return fn.apply(this,arguments)}function fn(){return fn=O()(f()().mark(function M(r,s){return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/admin/topic-project-solutions",u()({params:u()(u()({},r),{},{per_page:r.pageSize,page:r.current}),method:"GET",useCache:!1},s||{})));case 1:case"end":return a.stop()}},M)})),fn.apply(this,arguments)}function Cs(M,r){return vn.apply(this,arguments)}function vn(){return vn=O()(f()().mark(function M(r,s){return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/admin/topic-project-solutions/".concat(r),u()({method:"DELETE"},s||{})));case 1:case"end":return a.stop()}},M)})),vn.apply(this,arguments)}var ys=["type","defaultRender"],Ts=function(){var M=O()(f()().mark(function r(s){var i;return f()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Cs(s);case 2:return i=o.sent,i.success&&B.ZP.success(i.message),o.abrupt("return",!0);case 5:case"end":return o.stop()}},r)}));return function(s){return M.apply(this,arguments)}}(),Ss=function M(r){return r.reduce(function(s,i){var a;return[].concat(p()(s),p()(i.lessons?M(i.lessons):[]),p()((a=i.topics)!==null&&a!==void 0?a:[]))},[])},As=function(r){var s=r.courseId,i=(0,n.useIntl)(),a=(0,l.useState)([]),o=j()(a,2),c=o[0],C=o[1],S=(0,l.useMemo)(function(){return c.reduce(function(y,z){var d,v,A;return u()(u()({},y),{},_()({},(d=z.id)!==null&&d!==void 0?d:-1,{text:(v=z.title)!==null&&v!==void 0?v:"",status:(A=z.id)!==null&&A!==void 0?A:-1}))},{})},[c]),x=(0,l.useMemo)(function(){return[{title:(0,e.jsx)(n.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:(0,e.jsx)(n.FormattedMessage,{id:"topic",defaultMessage:"topic"}),dataIndex:"topic_id",hideInSearch:!1,sorter:!0,valueEnum:S,render:function(z,d){var v,A;return(0,e.jsx)(n.Link,{to:"/courses/list/".concat(s,"/program/?topic=").concat(d.topic_id),children:(v=S==null||(A=S[d.topic_id])===null||A===void 0?void 0:A.text)!==null&&v!==void 0?v:d.topic_id})}},{sorter:!0,title:(0,e.jsx)(n.FormattedMessage,{id:"user",defaultMessage:"user"}),dataIndex:"user_id",renderFormItem:function(z,d,v){var A=d.type,V=d.defaultRender,I=$n()(d,ys);if(A==="form")return null;var q=v.getFieldValue("state");return(0,e.jsx)(zt.Z,u()(u()({},I),{},{state:{type:q}}))},render:function(z,d){return d.user_id&&(0,e.jsx)(U.Z,{type:"EscolaLms\\Core\\Models\\User",type_id:d.user_id},"user")}},{sorter:!0,title:(0,e.jsx)(n.FormattedMessage,{id:"created_at",defaultMessage:"Created at"}),dataIndex:"created_at",hideInSearch:!0,render:function(z,d){return d.created_at&&(0,se.WU)(new Date(d.created_at),E.Cu)}},{title:(0,e.jsx)(n.FormattedMessage,{id:"download",defaultMessage:"Download"}),dataIndex:"file_url",hideInSearch:!0,render:function(z,d){return(0,e.jsx)(g.ZP,{type:"primary",target:"_blank",size:"small",href:d.file_url,children:(0,e.jsx)(n.FormattedMessage,{id:"download",defaultMessage:"Download"})})}},{hideInSearch:!0,title:(0,e.jsx)(n.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",render:function(z,d,v,A){return[(0,e.jsx)(Tn.Z,{title:(0,e.jsx)(n.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:O()(f()().mark(function V(){var I;return f()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.next=2,Ts(d.id);case 2:if(I=oe.sent,I){oe.next=5;break}return oe.abrupt("return");case 5:A==null||A.reload();case 6:case"end":return oe.stop()}},V)})),okText:(0,e.jsx)(n.FormattedMessage,{id:"yes"}),cancelText:(0,e.jsx)(n.FormattedMessage,{id:"no"}),children:(0,e.jsx)(ct.Z,{title:(0,e.jsx)(n.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,e.jsx)(g.ZP,{type:"primary",icon:(0,e.jsx)(wn.Z,{}),danger:!0})})},"delete")]}}]},[S]);return(0,l.useEffect)(function(){s&&(0,P.Nx)(s).then(function(y){if(y.success){var z=Ss(y.data.lessons).filter(function(d){return d.topicable_type===m.oz.Project});C(z)}})},[s]),(0,e.jsx)(G.ZP,{headerTitle:i.formatMessage({id:"project_solutions",defaultMessage:"Project Uploaded Solutions"}),search:{layout:"vertical"},rowKey:"id",request:function(){var y=O()(f()().mark(function z(d,v){var A,V,I,q,oe,le,ze;return f()().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return A=d.pageSize,V=d.current,I=d.user_id,q=d.topic_id,oe=v&&Object.entries(v)[0],le=oe&&oe[0],Se.next=5,Ps({pageSize:A,current:V,course_id:s,user_id:I,topic_id:q,order_by:le,order:oe?oe[1]==="ascend"?"ASC":"DESC":void 0});case 5:if(ze=Se.sent,ze.success){Se.next=8;break}return Se.abrupt("return",{data:[],total:0,success:!1});case 8:return Se.abrupt("return",{data:ze.data,total:ze.meta.total,success:!0});case 9:case"end":return Se.stop()}},z)}));return function(z,d){return y.apply(this,arguments)}}(),columns:x})},Hs=null,Os=t(39470),Ds=t(54434),Is=t(14408),Zs=function(r){var s=r.visible,i=s===void 0?!1:s,a=r.handleOk,o=r.handleCancel;return(0,e.jsx)(Xt.Z,{title:(0,e.jsx)(xt._H,{id:"course_success_modal_title",defaultMessage:"course_success_modal_title"}),visible:i,onOk:a,onCancel:o,footer:[(0,e.jsx)(g.ZP,{onClick:o,children:(0,e.jsx)(xt._H,{id:"course_success_modal_button_cancel",defaultMessage:"course_success_modal_button_cancel"})},"link"),(0,e.jsx)(g.ZP,{type:"primary",onClick:a,children:(0,e.jsx)(xt._H,{id:"course_success_modal_button_ok",defaultMessage:"course_success_modal_button_ok"})},"link")],children:(0,e.jsx)("p",{children:(0,e.jsx)(xt._H,{id:"course_success_modal_content",defaultMessage:"course_success_modal_content"})})})},Xn=t(64317),Fs=t(74453),Ls=t(76560),Rs=function(r){var s=r.id;return(0,e.jsxs)(Ie.ZP,{onFinish:function(){var i=O()(f()().mark(function a(o){return f()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:(0,P.O1)(Number(s),o).then(function(S){S.success&&B.ZP.success(S.message)});case 1:case"end":return C.stop()}},a)}));return function(a){return i.apply(this,arguments)}}(),request:function(){return(0,P.Pd)(Number(s)).then(function(a){return a.success?{users:a.data.users.map(function(o){return T()(o)==="object"?o.id:o}),groups:a.data.groups.map(function(o){return T()(o)==="object"?o.id:o})}:{users:[],groups:[]}})},children:[(0,e.jsx)(Ie.ZP.Item,{valuePropName:"value",name:"users",label:(0,e.jsx)(n.FormattedMessage,{id:"users",defaultMessage:"Users"}),children:(0,e.jsx)(zt.Z,{multiple:!0})}),(0,e.jsx)(Ie.ZP.Item,{valuePropName:"value",name:"groups",label:(0,e.jsx)(n.FormattedMessage,{id:"groups",defaultMessage:"Groups"}),children:(0,e.jsx)(Ls.Z,{multiple:!0})})]})},Us=Rs;function ws(M,r){return hn.apply(this,arguments)}function hn(){return hn=O()(f()().mark(function M(r,s){return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/admin/templates/assignable",u()({method:"GET",useCache:!1,params:r},s||{})));case 1:case"end":return a.stop()}},M)})),hn.apply(this,arguments)}function Bs(M,r,s){return gn.apply(this,arguments)}function gn(){return gn=O()(f()().mark(function M(r,s,i){return f()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,n.request)("/api/admin/templates/".concat(r,"/assign"),u()({method:"POST",headers:{"Content-Type":"application/json"},data:s},i||{})));case 1:case"end":return o.stop()}},M)})),gn.apply(this,arguments)}function Ws(M,r,s){return jn.apply(this,arguments)}function jn(){return jn=O()(f()().mark(function M(r,s,i){return f()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,n.request)("/api/admin/templates/".concat(r,"/unassign"),u()({method:"POST",headers:{"Content-Type":"application/json"},data:s},i||{})));case 1:case"end":return o.stop()}},M)})),jn.apply(this,arguments)}function Ks(M,r){return xn.apply(this,arguments)}function xn(){return xn=O()(f()().mark(function M(r,s){return f()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/admin/templates/assigned",u()({params:r,method:"GET",useCache:!1},s||{})));case 1:case"end":return a.stop()}},M)})),xn.apply(this,arguments)}var Ns=function(r){var s=r.onChange,i=r.multiple,a=i===void 0?!1:i,o=r.assignable_class,c=r.assignable_id,C=r.onAssign,S=r.onUnassign,x=r.onTemplates,y=(0,l.useState)([]),z=j()(y,2),d=z[0],v=z[1],A=(0,l.useState)([]),V=j()(A,2),I=V[0],q=V[1],oe=(0,l.useState)(!1),le=j()(oe,2),ze=le[0],ye=le[1],Se=(0,l.useRef)(),Ne=(0,l.useCallback)(function(ve){v(ve),x&&x(ve)},[x]),Re=(0,l.useCallback)(function(){Ks({assignable_class:o,assignable_id:Number(c)}).then(function(ve){ve.success&&q(ve.data.map(function(Ce){return Ce.id}))})},[o,c]),tt=(0,l.useCallback)(function(){return ye(!0),Se.current&&Se.current.abort(),Se.current=new AbortController,ws({assignable_class:o},{signal:Se.current.signal}).then(function(ve){ve&&ve.success&&Ne(ve.data),ye(!1)}).catch(function(){return ye(!1)}),function(){Se.current&&Se.current.abort()}},[o,c]),pt=(0,l.useCallback)(function(ve){q(function(Ce){return Ce.filter(function(te){return te!=ve})})},[]),nt=(0,l.useCallback)(function(ve){q(function(Ce){return Ce.includes(ve)?Ce:[].concat(p()(Ce),[ve])})},[]),Ze=(0,l.useCallback)(function(ve){var Ce=Array.isArray(ve)?ve:[ve],te=Ce.filter(function(Fe){return!I.includes(Fe)}),Ge=I.filter(function(Fe){return!Ce.includes(Fe)});te.forEach(function(Fe){Bs(Fe,{assignable_id:Number(c)}).then(function(qe){qe.success&&B.ZP.success(qe.message),qe.success||(B.ZP.error(qe.message),pt(Fe))}).catch(function(qe){B.ZP.error(qe.toString()),pt(Fe)})}),Ge.forEach(function(Fe){Ws(Fe,{assignable_id:Number(c)}).then(function(qe){qe.success&&B.ZP.success(qe.message),qe.success||(B.ZP.error(qe.message),nt(Fe))}).catch(function(qe){B.ZP.error(qe.toString()),nt(Fe)})}),te.length!=0&&C&&C(te),Ge.length!=0&&S&&S(Ge),q(Ce)},[I,c,C,S]);return(0,l.useEffect)(function(){tt(),Re()},[o,c]),(0,l.useEffect)(function(){s&&s(I)},[I,s]),(0,e.jsx)(yt.default,{style:{width:"100%"},value:I,onChange:Ze,mode:a?"multiple":void 0,showSearch:!0,placeholder:(0,e.jsx)(n.FormattedMessage,{id:"select_templates",defaultMessage:"Select a templates"}),optionFilterProp:"children",filterOption:function(Ce,te){if(te&&te.children){var Ge;return(te==null||(Ge=te.children)===null||Ge===void 0?void 0:Ge.toString().toLowerCase().indexOf(Ce.toLowerCase()))>=0}return!0},notFoundContent:ze?(0,e.jsx)(Pe.Z,{size:"small"}):null,children:d.map(function(ve){return(0,e.jsxs)(yt.default.Option,{value:ve.id,children:[ve.name," ",(0,e.jsxs)("small",{children:[(0,e.jsx)(n.FormattedMessage,{id:ve.channel.split("\\").pop()}),":",(0,e.jsx)(n.FormattedMessage,{id:ve.event.split("\\").pop()})]})," "]},ve.id)})})},$s=Ns,zs=t(34201),ks=function(r){var s=r.id,i=Ee.Z.Text,a=(0,l.useState)([]),o=j()(a,2),c=o[0],C=o[1],S=(0,l.useState)([]),x=j()(S,2),y=x[0],z=x[1],d=(0,l.useMemo)(function(){return y.map(function(v){return c.find(function(A){return A.id===v})}).filter(function(v){return v!==void 0}).filter(function(v){return v&&v.channel==="EscolaLms\\TemplatesPdf\\Core\\PdfChannel"})},[c,y]);return(0,e.jsxs)("div",{children:[(0,e.jsxs)(be.Z,{align:"middle",children:[(0,e.jsx)(fe.Z,{span:3,children:(0,e.jsx)(i,{children:(0,e.jsx)(n.FormattedMessage,{id:"CertificateTemplates",defaultMessage:"Users"})})}),(0,e.jsx)(fe.Z,{span:12,children:(0,e.jsx)($s,{onTemplates:function(A){return C(A)},assignable_class:"EscolaLms\\Courses\\Models\\Course",assignable_id:Number(s),multiple:!0,onChange:function(A){return z(A)}})})]}),d.map(function(v){return v&&(0,e.jsx)(zs.Z,{template_id:v.id,title:v.name},v.id)})]})},Gs=ks,_t=function(M){return M.ATTRIBUTES="attributes",M.PRODUCT="product",M.MEDIA="media",M.USER_SUBMISSION="user_submission",M.CATEGORIES="categories",M.PROGRAM="program",M.SCORM="scorm",M.ACCESS="access",M.CERTIFICATES="certificates",M.QUESTIONNAIRES="questionnaires",M.STATISTICS="statistics",M.USER_PROJECTS="user_projects",M}(_t||{}),Vs=function(){var M,r,s,i,a=(0,n.useParams)(),o=(0,n.useIntl)(),c=a.course,C=a.tab,S=C===void 0?_t.ATTRIBUTES:C,x=c==="new",y=(0,n.useAccess)(),z=(0,l.useState)(),d=j()(z,2),v=d[0],A=d[1],V=(0,Is.Z)(),I=V.manageCourseEdit,q=V.setManageCourseEdit,oe=V.validateCourseEdit,le=(0,l.useState)(null),ze=j()(le,2),ye=ze[0],Se=ze[1],Ne=(0,l.useState)(null),Re=j()(Ne,2),tt=Re[0],pt=Re[1],nt=(0,l.useState)({showModal:!1,courseId:0}),Ze=j()(nt,2),ve=Ze[0],Ce=Ze[1],te=(0,l.useState)(!0),Ge=j()(te,2),Fe=Ge[0],qe=Ge[1],bt=(0,n.getAllLocales)()||[],rt=(0,n.useModel)("@@initialState"),gt=rt.setInitialState,dt=rt.initialState,Ke=Ie.ZP.useForm(),he=j()(Ke,1),Ye=he[0],mt=(M=dt==null||(r=dt.config)===null||r===void 0||(r=r.find(function(ge){return ge.key==="showInCourseAdditionalSettings-public"}))===null||r===void 0?void 0:r.data)!==null&&M!==void 0?M:!1,He=(s=dt==null||(i=dt.config)===null||i===void 0||(i=i.filter(function(ge){return ge.key.includes("hideInCourseTabs")}))===null||i===void 0?void 0:i.reduce(function(ge,De){var $e=De.key,et=De.data;return ge[$e.split("-")[1]]=et,ge},{}))!==null&&s!==void 0?s:{};(0,l.useEffect)(function(){S===_t.ATTRIBUTES&&v&&Fe&&(oe(v),qe(!1))},[v,S,Fe]),(0,l.useEffect)(function(){if(c==="new"){A({title:"new"});return}var ge=function(){var De=O()(f()().mark(function $e(){var et,Mt,ft;return f()().wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return at.next=2,(0,P.XR)(Number(c));case 2:et=at.sent,et.success&&(A(u()(u()({},et.data),{},{categories:(Mt=et.data.categories)===null||Mt===void 0?void 0:Mt.map(Ot.i4),tags:(ft=et.data.tags)===null||ft===void 0?void 0:ft.map(Ot.ZR),summary:et.data.summary||""})),Se(et.data.active_from),pt(et.data.active_to));case 4:case"end":return at.stop()}},$e)}));return function(){return De.apply(this,arguments)}}();ge()},[c]);var st=(0,l.useMemo)(function(){return{onValuesChange:function(De){return q(u()(u()({},I),{},{valuesChanged:!0})),De.active_from&&Se(De.active_from),De.active_to&&pt(De.active_to),De.title&&A({title:De.title})},onFinish:function(){var ge=O()(f()().mark(function $e(et){var Mt,ft;return f()().wrap(function(at){for(;;)switch(at.prev=at.next){case 0:if(!I.disableEdit){at.next=3;break}return q({showModal:!0,disableEdit:!0,clicked:!1}),at.abrupt("return");case 3:if(Mt=u()(u()({},et),{},{active_from:et.active_from||(v==null?void 0:v.active_from)||null,active_to:et.active_to||(v==null?void 0:v.active_to)||null,authors:et.authors&&et.authors.map(function(Dt){return T()(Dt)==="object"?Dt.id:Dt}),scorm_sco_id:et.scorm_sco_id?et.scorm_sco_id:null,image_url:v&&v.image_url,image_path:v&&v.image_url&&(0,Ot.Ox)(v.image_url),video_url:v&&v.video_url,video_path:v&&v.video_url&&(0,Ot.Ox)(v.video_url),poster_url:v&&v.poster_url,poster_path:v&&v.poster_url&&(0,Ot.Ox)(v.poster_url),hours_to_complete:et.hours_to_complete||null}),c!=="new"){at.next=11;break}return at.next=7,(0,P.P6)(Mt);case 7:ft=at.sent,ft.success&&ft.data.id&&Ce({showModal:!0,courseId:ft.data.id}),at.next=14;break;case 11:return at.next=13,(0,P.Hf)(Number(c),Mt);case 13:ft=at.sent;case 14:B.ZP.success(o.formatMessage({id:ft.message})),q(u()(u()({},I),{},{showConfirmModal:!1,loading:!1,valuesChanged:!1}));case 16:case"end":return at.stop()}},$e)}));function De($e){return ge.apply(this,arguments)}return De}(),initialValues:v,form:Ye}},[c,v,I,Ye]);return v?(0,e.jsxs)(Fs._z,{title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.FormattedMessage,{id:v.title?"course":"new_course"}),", ",(0,e.jsx)(n.FormattedMessage,{id:S})]}),header:{breadcrumb:{routes:[{path:"courses/list",breadcrumbName:o.formatMessage({id:"menu.Courses"})},{path:String(c),breadcrumbName:o.formatMessage({id:"form"})},{path:"/",breadcrumbName:String(v.title)},{path:String(S),breadcrumbName:o.formatMessage({id:S,defaultMessage:String(S)})}]}},children:[(0,e.jsxs)(ee.ZP,{bodyStyle:{padding:"24px"},tabs:{type:"card",activeKey:S,onChange:function(De){gt(u()(u()({},dt),{},{collapsed:De==="program"})),De!==_t.ATTRIBUTES&&I.valuesChanged?q(u()(u()({},I),{},{showConfirmModal:!0})):n.history.push("/courses/list/".concat(c,"/").concat(De))}},children:[(0,e.jsxs)(ee.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"attributes"}),children:[I.disableEdit&&(0,e.jsx)(Te.Z,{closable:!0,style:{marginBottom:"20px"},type:"warning",message:(0,e.jsx)(n.FormattedMessage,{id:"course_edit_warning_message",defaultMessage:"course_edit_warning_message"}),action:(0,e.jsx)(g.ZP,{onClick:function(){return q({showModal:!0,disableEdit:!0,clicked:!0})},type:"primary",children:(0,e.jsx)(n.FormattedMessage,{id:"questionnaire.submit",defaultMessage:"questionnaire.submit"})})}),(0,e.jsx)(Ve.Z,{visible:I.showModal,setManage:q}),(0,e.jsx)(Zs,{visible:ve.showModal,handleOk:function(){n.history.push("/courses/list/".concat(ve.courseId,"/program"))},handleCancel:function(){return n.history.push("/courses/list/".concat(ve.courseId,"/attributes"))}}),(0,e.jsxs)(Ie.ZP,u()(u()({},st),{},{children:[(0,e.jsxs)(Ie.ZP.Group,{label:(0,e.jsx)(n.FormattedMessage,{id:"description"}),children:[(0,e.jsx)(Et.Z,{width:"xl",name:"title",label:(0,e.jsx)(n.FormattedMessage,{id:"title"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.title"}),placeholder:o.formatMessage({id:"title",defaultMessage:"title"}),required:!0,disabled:I.disableEdit}),(0,e.jsx)(Et.Z,{width:"xl",name:"subtitle",label:(0,e.jsx)(n.FormattedMessage,{id:"subtitle"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.subtitle"}),placeholder:o.formatMessage({id:"subtitle",defaultMessage:"subtitle"}),disabled:I.disableEdit}),(0,e.jsx)(Ie.ZP.Item,{name:"summary",label:(0,e.jsx)(n.FormattedMessage,{id:"summary"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.summary"}),valuePropName:"value",style:{width:697},children:(0,e.jsx)(Ct.ZP,{directory:"course/".concat(c,"/wysiwyg")})}),(0,e.jsx)(Ie.ZP.Item,{name:"description",label:(0,e.jsx)(n.FormattedMessage,{id:"description"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.description"}),valuePropName:"value",style:{width:697},children:(0,e.jsx)(Ct.ZP,{directory:"course/".concat(c,"/wysiwyg")})})]}),(0,e.jsxs)(Ie.ZP.Group,{label:(0,e.jsx)(n.FormattedMessage,{id:"duration"}),children:[(0,e.jsx)(Wt.Z,{width:"md",name:"active_from",label:(0,e.jsx)(n.FormattedMessage,{id:"active_from"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.active_from"}),placeholder:o.formatMessage({id:"active_from",defaultMessage:"active_from"}),rules:[{validator:function(De,$e){return $e&&tt&&(0,Sn.A)(new Date($e),new Date(tt))?Promise.reject(new Error(o.formatMessage({id:"invalidDate"}))):Promise.resolve()}}],disabled:I.disableEdit}),(0,e.jsx)(Wt.Z,{width:"md",name:"active_to",label:(0,e.jsx)(n.FormattedMessage,{id:"active_to"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.active_to"}),placeholder:o.formatMessage({id:"active_to",defaultMessage:"active_to"}),disabled:I.disableEdit||!ye,rules:[{validator:function(De,$e){return $e&&ye&&(0,An.R)(new Date($e),new Date(ye))?Promise.reject(new Error(o.formatMessage({id:"invalidDate"}))):Promise.resolve()}}]}),(0,e.jsx)(Et.Z,{width:"md",name:"duration",label:(0,e.jsx)(n.FormattedMessage,{id:"duration"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.duration"}),placeholder:o.formatMessage({id:"duration",defaultMessage:"duration"}),disabled:I.disableEdit}),(0,e.jsx)($t.Z,{width:"md",name:"hours_to_complete",label:(0,e.jsx)(n.FormattedMessage,{id:"hours_to_complete"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"hours_to_complete"}),placeholder:o.formatMessage({id:"hours_to_complete",defaultMessage:"hours_to_complete"}),disabled:I.disableEdit})]}),(0,e.jsxs)(Ie.ZP.Group,{label:(0,e.jsx)(n.FormattedMessage,{id:"additional"}),children:[mt&&(0,e.jsx)(Ft.Z,{width:"xs",name:"public",label:(0,e.jsx)(n.FormattedMessage,{id:"public_label"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"public_tooltip"}),placeholder:o.formatMessage({id:"public",defaultMessage:"public"})}),(0,e.jsx)(Et.Z,{width:"xs",name:"level",label:(0,e.jsx)(n.FormattedMessage,{id:"level"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.level"}),placeholder:o.formatMessage({id:"level",defaultMessage:"level"})}),(0,e.jsx)(Xn.Z,{name:"language",width:"xs",label:(0,e.jsx)(n.FormattedMessage,{id:"language"}),placeholder:o.formatMessage({id:"language",defaultMessage:"language"}),valueEnum:bt.map(function(ge){return ge.split("-")[0]}).reduce(function(ge,De){return u()(u()({},ge),{},_()({},De,De))},{}),initialValue:(0,n.getLocale)().split("-")[0],disabled:I.disableEdit}),(0,e.jsx)(Xn.Z,{name:"status",width:"md",label:(0,e.jsx)(n.FormattedMessage,{id:"status"}),valueEnum:{draft:o.formatMessage({id:"draft",defaultMessage:"draft"}),published:o.formatMessage({id:"published",defaultMessage:"published"}),archived:o.formatMessage({id:"archived",defaultMessage:"archived"}),published_unactivated:o.formatMessage({id:"published_unactivated",defaultMessage:"published_unactivated"})},initialValue:{draft:o.formatMessage({id:"draft",defaultMessage:"draft"})},placeholder:o.formatMessage({id:"status"}),disabled:I.disableEdit,rules:[{required:!0,message:(0,e.jsx)(n.FormattedMessage,{id:"select"})}]}),(0,e.jsx)(Et.Z,{width:"sm",name:"target_group",label:(0,e.jsx)(n.FormattedMessage,{id:"target_group"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.target_group"}),placeholder:o.formatMessage({id:"target_group",defaultMessage:"target_group"}),disabled:I.disableEdit}),(0,e.jsx)(Ie.ZP.Item,{name:"authors",label:(0,e.jsx)(n.FormattedMessage,{id:"author_tutor"}),valuePropName:"value",children:(0,e.jsx)(zt.Z,{multiple:!0})})]})]}))]},_t.ATTRIBUTES),!x&&y.salesPermission&&(0,e.jsx)(ee.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"product"}),disabled:I.disableEdit,children:c&&(0,e.jsx)(Be.C,{productable:{class_type:"App\\Models\\Course",class_id:c,name:String(v.title),quantity:1}})},_t.PRODUCT),!x&&(0,e.jsx)(ee.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"media"}),disabled:I.disableEdit,children:(0,e.jsx)(Ie.ZP,u()(u()({},st),{},{layout:"horizontal",children:(0,e.jsxs)(be.Z,{children:[(0,e.jsx)(fe.Z,{span:24,children:(0,e.jsx)(lt.Z,{folder:"course/".concat(c),title:"image",action:"/api/admin/courses/".concat(c),src_name:"image_url",form_name:"image",getUploadedSrcField:function(De){return De.file.response.data.image_url},setPath:function(De){return A(function($e){return u()(u()({},$e),De)})},hideLabel:!0})}),(0,e.jsx)(fe.Z,{span:24,children:(0,e.jsx)(Ae,{folder:"course/".concat(c),action:"/api/admin/courses/".concat(c),src_name:"video_url",form_name:"video",getUploadedSrcField:function(De){return De.file.response.data.video_url},setPath:function(De){return A(function($e){return u()(u()({},$e),De)})},hideLabel:!0})}),(0,e.jsx)(fe.Z,{span:24,children:(0,e.jsx)(lt.Z,{folder:"course/".concat(c),title:"poster",action:"/api/admin/courses/".concat(c),src_name:"poster_url",form_name:"poster",getUploadedSrcField:function(De){return De.file.response.data.poster_url},setPath:function(De){return A(function($e){return u()(u()({},$e),De)})},hideLabel:!0})})]})}))},_t.MEDIA),!x&&(0,e.jsx)(ee.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"categories_tags"}),disabled:I.disableEdit,children:(0,e.jsx)(Ie.ZP,u()(u()({},st),{},{children:(0,e.jsxs)(be.Z,{children:[(0,e.jsx)(fe.Z,{span:12,children:(0,e.jsx)(Ie.ZP.Item,{label:(0,e.jsx)(n.FormattedMessage,{id:"categories"}),name:"categories",valuePropName:"value",children:(0,e.jsx)(_e.Z,{})})}),(0,e.jsx)(fe.Z,{span:12,children:(0,e.jsx)(Ie.ZP.Item,{label:(0,e.jsx)(n.FormattedMessage,{id:"tags"}),name:"tags",valuePropName:"value",children:(0,e.jsx)(Os.Z,{})})})]})}))},_t.CATEGORIES),!x&&(0,e.jsx)(ee.ZP.TabPane,{className:"program",tab:(0,e.jsx)(n.FormattedMessage,{id:"program"}),disabled:I.disableEdit,cardProps:{bodyStyle:{padding:0}},children:c&&(0,e.jsx)(Es,{id:c})},_t.PROGRAM),!x&&y.scormListPermission&&(0,e.jsx)(ee.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"scorm"}),disabled:I.disableEdit,children:(0,e.jsx)(Ie.ZP,u()(u()({},st),{},{children:(0,e.jsx)(Ie.ZP.Item,{label:"Scorm",name:"scorm_sco_id",valuePropName:"value",children:(0,e.jsx)(Bn,{})})}))},_t.SCORM),!x&&(0,e.jsx)(ee.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"access"}),disabled:I.disableEdit,children:c&&(0,e.jsx)(Us,{id:c})},_t.ACCESS),!x&&y.certificatesPermission&&(0,e.jsx)(ee.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"certificates"}),disabled:I.disableEdit,children:c&&(0,e.jsx)(Gs,{id:c})},_t.CERTIFICATES),!x&&y.questionnaireListPermission&&(0,e.jsx)(ee.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"questionnaires"}),disabled:I.disableEdit,children:c&&(0,e.jsx)(ne,{modelType:$.COURSE,id:Number(c)})},_t.QUESTIONNAIRES),!x&&!He.statistics&&(0,e.jsx)(ee.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"statistics"}),disabled:I.disableEdit,children:c&&(0,e.jsx)(ke,{courseId:c})},_t.STATISTICS),!x&&!He.user_submission&&(0,e.jsx)(ee.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"user_submission"}),disabled:I.disableEdit,children:c&&(0,e.jsx)(Ds.ZP,{id:Number(c),type:"App\\Models\\Course"})},_t.USER_SUBMISSION),!x&&!He.user_projects&&(0,e.jsx)(ee.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"user_projects"}),children:(0,e.jsx)(As,{courseId:Number(c)})},_t.USER_PROJECTS)]}),(0,e.jsx)(pe.Z,{open:!!I.showConfirmModal,onOk:function(){q(u()(u()({},I),{},{loading:!0})),Ye.submit()},onCancel:function(){q(u()(u()({},I),{},{showConfirmModal:!1}))},loading:!!I.loading})]}):(0,e.jsx)(Pe.Z,{})}},62343:function(Qe,xe,t){"use strict";var Me=t(52677),_=t.n(Me),me=t(5574),T=t.n(me),de=t(952),f=t(37476),L=t(5966),u=t(52688),N=t(86615),O=t(90672),H=t(63434),j=t(31199),ae=t(96365),D=t(14726),J=t(75842),G=t(49288),B=t(67294),w=t(43564),l=t(80854),n=t(20568),U=t(19411),e=t(88284),Q=t(28508),$=t(55171),Y=t.n($),h=t(85893),ne=function(R){var p=R.value,m=R.onChange,k=R.type,ce=k===void 0?"file":k,se=(0,B.useState)(!1),E=T()(se,2),P=E[0],Z=E[1];return(0,h.jsxs)(B.Fragment,{children:[(0,h.jsxs)(de.ZP.Group,{children:[(0,h.jsx)(ae.Z,{value:p,readOnly:!0}),(0,h.jsxs)(D.ZP,{size:"small",type:"primary",onClick:function(){return Z(!P)},children:["toggle ",ce," browser"]})]}),P&&(0,h.jsx)(n.Z,{onFile:function(b,X){return m&&m("".concat(X,"/").concat(b.name))}})]})},_e=function(R){var p=(0,l.useIntl)(),m=R.visible,k=R.onVisibleChange,ce=R.onFinish,se=R.id,E=R.initialData,P=R.groups,Z=J.Z.useForm(),g=T()(Z,1),b=g[0],X=!se||se===-1,ue=(0,B.useState)("text"),re=T()(ue,2),F=re[0],W=re[1],ie=(0,B.useCallback)(function(){return!!(b.getFieldValue("group")==="global"||E)},[b,E]),ee=(0,B.useState)(""),Ee=T()(ee,2),Pe=Ee[0],Te=Ee[1];(0,B.useEffect)(function(){if(_()(se)==="object"){var K;b.setFieldsValue(se),W((K=se.type)!==null&&K!==void 0?K:"text")}else se&&se!==-1?(0,w.GF)(Number(se)).then(function(we){we.success&&(b.setFieldsValue(we.data),W(we.data.type),Te(we.data.group))}):(b.resetFields(),W("text"))},[se,b,E]);var Oe=(0,B.useCallback)(function(K){K.type&&K.type!==F&&W(K.type)},[F]);return(0,h.jsxs)(f.Y,{form:b,title:p.formatMessage({id:se?"editSetting":"newSetting",defaultMessage:se?"editSetting":"newSetting"}),width:"60vw",visible:!!m,onVisibleChange:k,onFinish:ce,onValuesChange:Oe,children:[(0,h.jsxs)(de.ZP.Group,{children:[E?(0,h.jsx)(L.Z,{label:(0,h.jsx)(l.FormattedMessage,{id:"group",defaultMessage:"group"}),rules:[{required:!0}],width:"md",name:"group",disabled:ie()}):(0,h.jsx)(de.ZP.Item,{label:(0,h.jsx)(l.FormattedMessage,{id:"group",defaultMessage:"group"}),name:"group",children:(0,h.jsx)(G.Z,{style:{width:"300px"},autoFocus:!0,value:Pe,onChange:function(we){return Te(we)},filterOption:function(we,Xe){var Ue;return(Xe==null||(Ue=Xe.children)===null||Ue===void 0?void 0:Ue.toString().toLowerCase().indexOf(we.toLowerCase()))!==-1},children:P.map(function(K){return(0,h.jsx)(G.Z.Option,{value:K,children:K},K)})})}),(0,h.jsx)(L.Z,{label:(0,h.jsx)(l.FormattedMessage,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key",disabled:ie()})]}),(0,h.jsxs)(de.ZP.Group,{children:[(0,h.jsx)(u.Z,{name:"enumerable",disabled:ie(),label:(0,h.jsx)(l.FormattedMessage,{id:"enumerable",defaultMessage:"enumerable"})}),(0,h.jsx)(u.Z,{name:"public",disabled:ie(),label:(0,h.jsx)(l.FormattedMessage,{id:"public",defaultMessage:"public"})})]}),(0,h.jsx)(de.ZP.Group,{children:(0,h.jsx)(N.Z.Group,{disabled:!!(!X||E),name:"type",label:(0,h.jsx)(l.FormattedMessage,{id:"type"}),options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"},{label:"json",value:"json"},{label:"file",value:"file"},{label:"image",value:"image"},{label:"boolean",value:"boolean"},{label:"number",value:"number"},{label:"array",value:"array"}]})}),(0,h.jsxs)("div",{children:[F==="text"&&(0,h.jsx)(L.Z,{width:"lg",name:"value",label:(0,h.jsx)(l.FormattedMessage,{id:"value"})}),F==="json"&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(O.Z,{width:"lg",name:"value",label:(0,h.jsx)(l.FormattedMessage,{id:"value"}),tooltip:"".concat(p.formatMessage({id:"example_json"}),': {"name":"John", "age":30, "city":["New York","Warsaw"]}')}),(0,h.jsx)(de.ZP.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return(0,h.jsx)(Y(),{src:JSON.parse(b.getFieldValue("value"))})}catch(we){return(0,h.jsx)(Y(),{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]}),(F==="file"||F==="image")&&(0,h.jsx)(de.ZP.Item,{name:"value",label:"value",tooltip:"select file from current repository or upload new one",valuePropName:"value",children:(0,h.jsx)(ne,{type:F})}),F==="markdown"&&(0,h.jsx)(de.ZP.Item,{name:"value",label:"value",tooltip:"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.",valuePropName:"value",children:(0,h.jsx)(U.ZP,{directory:"settings/wysiwyg"})}),F==="boolean"?(0,h.jsx)(u.Z,{name:"value",label:(0,h.jsx)(l.FormattedMessage,{id:"value"}),checkedChildren:(0,h.jsx)(e.Z,{}),unCheckedChildren:(0,h.jsx)(Q.Z,{})}):(0,h.jsx)(de.ZP.Item,{noStyle:!0,hidden:!0,children:(0,h.jsx)(H.Z,{name:"data",valuePropName:"data"})}),F==="number"&&(0,h.jsx)(j.Z,{name:"data",label:(0,h.jsx)(l.FormattedMessage,{id:"value"})}),F==="array"&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(O.Z,{width:"lg",name:"value",label:(0,h.jsx)(l.FormattedMessage,{id:"value"}),tooltip:"".concat(p.formatMessage({id:"example_json"}),": ['tutor', 'student']")}),(0,h.jsx)(de.ZP.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return(0,h.jsx)(Y(),{src:JSON.parse(b.getFieldValue("value"))})}catch(we){return(0,h.jsx)(Y(),{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]})]})]})};xe.ZP=_e},59234:function(Qe,xe,t){"use strict";t.d(xe,{Wg:function(){return ce}});var Me=t(5574),_=t.n(Me),me=t(19632),T=t.n(me),de=t(15009),f=t.n(de),L=t(97857),u=t.n(L),N=t(99289),O=t.n(N),H=t(31472),j=t(51042),ae=t(16894),D=t(2453),J=t(83062),G=t(14726),B=t(86738),w=t(67294),l=t(80854),n=t(43564),U=t(56717),e=t(47389),Q=t(82061),$=t(62343),Y=t(20188),h=t(85893),ne=function(){var g=O()(f()().mark(function b(X,ue,re){var F,W;return f()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return F=D.ZP.loading(X.formatMessage({id:"loading"})),ee.prev=1,ee.next=4,re&&re!==-1?(0,n.VP)(re,u()({},ue)):(0,n.oh)(u()({},ue));case 4:return W=ee.sent,F(),D.ZP.success(X.formatMessage({id:"success"})),ee.abrupt("return",{success:!0,updatedSettings:W});case 10:return ee.prev=10,ee.t0=ee.catch(1),F(),D.ZP.error(X.formatMessage({id:"error"})),ee.abrupt("return",{success:!1,updateSettings:null});case 15:case"end":return ee.stop()}},b,null,[[1,10]])}));return function(X,ue,re){return g.apply(this,arguments)}}(),_e=function(){var g=O()(f()().mark(function b(X,ue){var re;return f()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return re=D.ZP.loading(X.formatMessage({id:"loading"})),W.prev=1,W.next=4,(0,n.Rb)(ue);case 4:return re(),D.ZP.success(X.formatMessage({id:"success"})),W.abrupt("return",!0);case 9:return W.prev=9,W.t0=W.catch(1),re(),D.ZP.error(X.formatMessage({id:"error"})),W.abrupt("return",!1);case 14:case"end":return W.stop()}},b,null,[[1,9]])}));return function(X,ue){return g.apply(this,arguments)}}(),pe=function(b){return b.toLowerCase().replace(/(_\w)/g,function(X){return X.toUpperCase().substr(1)})},R=["statistics","user_submission","user_projects"],p=["public"],m=["email","sms"],k=function(b){return"hideInMenu-".concat(pe(b.split("/").join("_")))},ce=function(b){return"disableTopicType-".concat(b)},se=[].concat(T()(Object.keys(H.oz).map(function(g){return{key:ce(g),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),T()(["ECommerce","Certificates"].map(function(g){return{key:"disable-".concat(g),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),T()(p.map(function(g){return{key:"showInCourseAdditionalSettings-".concat(g),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),T()(R.map(function(g){return{key:"hideInCourseTabs-".concat(g),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),T()(m.map(function(g){return{key:"hideTemplateTab-".concat(g),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}}))).reduce(function(g,b,X){return g[b.key]=u()(u()({},b),{},{id:-100*X}),g},{}),E=u()({logo:{id:-1,key:"logo",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"image",data:"EscolaLMS"},frontURL:{id:-2,key:"frontURL",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},maxLessonsNestingInProgram:{id:-4,key:"maxLessonsNestingInProgram",group:"global",value:"0",public:!0,enumerable:!0,sort:1,type:"number",data:0},minTopicNestingInProgram:{id:-5,key:"minTopicNestingInProgram",group:"global",value:"0",public:!0,enumerable:!0,sort:1,type:"number",data:0},companyName:{id:-6,key:"companyName",group:"global",value:"Wellms",public:!0,enumerable:!0,sort:0,type:"text",data:"Wellms"},companyURL:{id:-7,key:"companyURL",group:"global",value:"https://www.wellms.io/",public:!0,enumerable:!0,sort:0,type:"text",data:"https://www.wellms.io/"},logoLogin:{id:-8,key:"logoLogin",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"image",data:"EscolaLMS"},logoFooter:{id:-9,key:"logoFooter",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"image",data:"EscolaLMS"},footerFontColor:{id:-10,key:"footerFontColor",group:"global",value:"#00000072",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},showLoginBackgroundImage:{id:-11,key:"showLoginBackgroundImage",group:"global",value:"true",public:!0,enumerable:!0,sort:0,type:"boolean",data:"EscolaLMS"},loginHeaderBackgroundColor:{id:-12,key:"loginHeaderBackgroundColor",group:"global",value:"#f0f2f5",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},loginHeaderFontColor:{id:-13,key:"loginHeaderFontColor",group:"global",value:"#000000D8",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},loginFormBackgroundColor:{id:-14,key:"loginFormBackgroundColor",group:"global",value:"#f0f2f5",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},contentBackgroundColor:{id:-15,key:"contentBackgroundColor",group:"global",value:"#f0f2f5",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},technicalMaintenance:{id:-16,key:"technicalMaintenance",group:"global",value:"false",public:!0,enumerable:!0,sort:0,type:"boolean",data:"EscolaLMS"},technicalMaintenanceText:{id:-17,key:"technicalMaintenanceText",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"}},se),P=function(b){return typeof b.path=="string"},Z=function(){var b=(0,w.useState)(!1),X=_()(b,2),ue=X[0],re=X[1],F=(0,w.useRef)(),W=(0,l.useIntl)(),ie=(0,w.useState)(E),ee=_()(ie,2),Ee=ee[0],Pe=ee[1],Te=(0,l.useModel)("@@initialState"),Oe=Te.setInitialState,K=Te.initialState;(0,w.useEffect)(function(){(0,Y.s)().then(function(Ue){var Je=Object.values(Ue.routes).filter(P).filter(function(ke){return ke.path&&ke.path!=="/"&&ke.layout!==!1}).map(function(ke){return{path:ke.path,key:k(ke.path),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}});Pe(function(ke){return u()(u()({},ke),Je)})})},[]),(0,w.useEffect)(function(){F.current&&F.current.reload()},[Ee]);var we=[{title:(0,h.jsx)(l.FormattedMessage,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0,render:function(Je,ke){return(0,h.jsx)(w.Fragment,{children:(0,h.jsxs)(J.Z,{title:(0,h.jsx)(l.FormattedMessage,{id:"Settings.tooltip.".concat(ke.key)}),children:[ke.key," ",(0,h.jsx)(U.Z,{})]})})}},{title:(0,h.jsx)(l.FormattedMessage,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:(0,h.jsx)(l.FormattedMessage,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0,render:function(Je,ke){return ke.value}},{hideInSearch:!0,title:(0,h.jsx)(l.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(Je,ke){return[ke.id>0?(0,h.jsx)(J.Z,{title:(0,h.jsx)(l.FormattedMessage,{id:"edit",defaultMessage:"edit"}),children:(0,h.jsx)(G.ZP,{type:"primary",icon:(0,h.jsx)(e.Z,{}),onClick:function(){return re(ke.id)}})},"edit"):(0,h.jsx)(J.Z,{title:(0,h.jsx)(l.FormattedMessage,{id:"create",defaultMessage:"create"}),children:(0,h.jsx)(G.ZP,{type:"primary",icon:(0,h.jsx)(j.Z,{}),onClick:function(){re(Ee[ke.key]||-1)}})},"create"),(0,h.jsx)(B.Z,{title:(0,h.jsx)(l.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:O()(f()().mark(function Ve(){var lt;return f()().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return it.next=2,_e(W,ke.id);case 2:lt=it.sent,lt&&(re(!1),F.current&&F.current.reload());case 4:case"end":return it.stop()}},Ve)})),okText:(0,h.jsx)(l.FormattedMessage,{id:"yes",defaultMessage:"Yes"}),cancelText:(0,h.jsx)(l.FormattedMessage,{id:"no",defaultMessage:"No"}),children:ke.id>0?(0,h.jsx)(J.Z,{title:(0,h.jsx)(l.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,h.jsx)(G.ZP,{type:"primary",icon:(0,h.jsx)(Q.Z,{}),danger:!0})}):null},"delete")]}}],Xe=function(Je){var ke;if(Je&&(!(K!=null&&(ke=K.config)!==null&&ke!==void 0&&ke.length)&&Je&&Oe(u()(u()({},K),{},{config:[Je]})),!!(K!=null&&K.config))){var Ve=K==null?void 0:K.config.map(function(lt){return lt.key===Je.key?u()(u()({},lt),Je):lt});Oe(u()(u()({},K),{},{config:Ve}))}};return(0,h.jsxs)(w.Fragment,{children:[(0,h.jsx)(ae.ZP,{headerTitle:W.formatMessage({id:"menu.settings"}),search:!1,toolBarRender:!1,actionRef:F,rowKey:"id",request:function(Je){var ke=Je.pageSize,Ve=Je.current;return(0,n.Xd)({per_page:ke,current:Ve,group:"global"}).then(function(lt){if(lt.success){var Ie=[].concat(T()(Object.keys(Ee).map(function(it){return lt.data.find(function(At){return At.key===it})||Ee[it]})),T()(lt.data.filter(function(it){return!Object.keys(Ee).includes(it.key)})));return{data:Ie,total:Ie.length,success:!0}}return[]})},columns:we}),(0,h.jsx)($.ZP,{groups:[],id:ue,visible:ue,initialData:Ee,onVisibleChange:function(Je){return!Je&&re(!1)},onFinish:function(){var Ue=O()(f()().mark(function Je(ke){var Ve,lt,Ie,it;return f()().wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return Ve=ke,Ve.type==="number"&&(Ve=u()(u()({},Ve),{},{value:String(Ve.data)})),Ve.type==="boolean"&&(Ve=u()(u()({},Ve),{},{value:Ve.data})),Ve.type==="array"&&(Ve=u()(u()({},Ve),{},{value:JSON.parse(Ve.value)})),jt.next=6,ne(W,Ve,Number(ue));case 6:lt=jt.sent,Ie=lt.success,it=lt.updatedSettings,Ie&&(it!=null&&it.success&&Xe(it.data),re(!1),F.current&&F.current.reload());case 10:case"end":return jt.stop()}},Je)}));return function(Je){return Ue.apply(this,arguments)}}()})]})};xe.ZP=Z},94116:function(Qe,xe,t){"use strict";t.d(xe,{CL:function(){return u},W3:function(){return j},bd:function(){return O},k4:function(){return D},uu:function(){return w},yr:function(){return G}});var Me=t(15009),_=t.n(Me),me=t(97857),T=t.n(me),de=t(99289),f=t.n(de),L=t(80854);function u(n){return N.apply(this,arguments)}function N(){return N=f()(_()().mark(function n(U){return _()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.abrupt("return",(0,L.request)("/api/admin/categories/tree",T()({method:"GET",useCache:!1},U||{})));case 1:case"end":return Q.stop()}},n)})),N.apply(this,arguments)}function O(n,U){return H.apply(this,arguments)}function H(){return H=f()(_()().mark(function n(U,e){return _()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",(0,L.request)("/api/admin/categories",T()({method:"GET",useCache:!1,params:U},e||{})));case 1:case"end":return $.stop()}},n)})),H.apply(this,arguments)}function j(n,U){return ae.apply(this,arguments)}function ae(){return ae=f()(_()().mark(function n(U,e){return _()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",(0,L.request)("/api/admin/categories/".concat(U),T()({method:"GET",useCache:!1},e||{})));case 1:case"end":return $.stop()}},n)})),ae.apply(this,arguments)}function D(n,U){return J.apply(this,arguments)}function J(){return J=f()(_()().mark(function n(U,e){return _()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",(0,L.request)("/api/admin/categories",T()({method:"POST",headers:{"Content-Type":"application/json"},data:U},e||{})));case 1:case"end":return $.stop()}},n)})),J.apply(this,arguments)}function G(n,U,e){return B.apply(this,arguments)}function B(){return B=f()(_()().mark(function n(U,e,Q){return _()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.abrupt("return",(0,L.request)("/api/admin/categories/".concat(U),T()({method:"POST",headers:{"Content-Type":"application/json"},data:e},Q||{})));case 1:case"end":return Y.stop()}},n)})),B.apply(this,arguments)}function w(n,U,e){return l.apply(this,arguments)}function l(){return l=f()(_()().mark(function n(U,e,Q){return _()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.abrupt("return",(0,L.request)("/api/admin/categories/".concat(U),T()({method:"DELETE",headers:{"Content-Type":"application/json"},data:e},Q||{})));case 1:case"end":return Y.stop()}},n)})),l.apply(this,arguments)}},17578:function(Qe,xe,t){"use strict";t.d(xe,{Od:function(){return J},QZ:function(){return u},ht:function(){return O},pV:function(){return D},ws:function(){return j}});var Me=t(15009),_=t.n(Me),me=t(97857),T=t.n(me),de=t(99289),f=t.n(de),L=t(80854);function u(B,w){return N.apply(this,arguments)}function N(){return N=f()(_()().mark(function B(w,l){return _()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",(0,L.request)("/api/admin/file/list",T()({method:"GET",params:w},l||{})));case 1:case"end":return U.stop()}},B)})),N.apply(this,arguments)}function O(B,w){return H.apply(this,arguments)}function H(){return H=f()(_()().mark(function B(w,l){return _()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",(0,L.request)("/api/admin/file/find",T()({method:"GET",params:w},l||{})));case 1:case"end":return U.stop()}},B)})),H.apply(this,arguments)}function j(B,w,l){return ae.apply(this,arguments)}function ae(){return ae=f()(_()().mark(function B(w,l,n){var U;return _()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return U=new FormData,U.append("file[]",w),U.append("target",l),Q.abrupt("return",(0,L.request)("/api/admin/file/upload",T()({method:"POST",data:U},n||{})));case 4:case"end":return Q.stop()}},B)})),ae.apply(this,arguments)}var D=function(w){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/images/img?path=").concat(w,"&w=").concat(l)};function J(B,w){return G.apply(this,arguments)}function G(){return G=f()(_()().mark(function B(w,l){return _()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",(0,L.request)("/api/admin/file/delete",T()({method:"DELETE",data:{url:w}},l||{})));case 1:case"end":return U.stop()}},B)})),G.apply(this,arguments)}},97704:function(Qe,xe,t){"use strict";t.d(xe,{Kn:function(){return u},LK:function(){return ae},RN:function(){return j},gq:function(){return w},jc:function(){return G},x0:function(){return D}});var Me=t(15009),_=t.n(Me),me=t(97857),T=t.n(me),de=t(99289),f=t.n(de),L=t(80854);function u(n,U){return N.apply(this,arguments)}function N(){return N=f()(_()().mark(function n(U,e){return _()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",(0,L.request)("/api/admin/hh5p/content",T()({method:"GET",params:U},e||{})));case 1:case"end":return $.stop()}},n)})),N.apply(this,arguments)}function O(n,U){return H.apply(this,arguments)}function H(){return H=_asyncToGenerator(_regeneratorRuntime().mark(function n(U,e){return _regeneratorRuntime().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",request("/api/admin/hh5p/content/".concat(U),_objectSpread({method:"GET"},e||{})));case 1:case"end":return $.stop()}},n)})),H.apply(this,arguments)}var j=function(U){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en",Q=arguments.length>2?arguments[2]:void 0,$=U?"/api/admin/hh5p/editor/".concat(U):"/api/admin/hh5p/editor";return $=e?"".concat($,"?lang=").concat(e):$,(0,L.request)($,T()({method:"GET"},Q||{}))},ae=function(U){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en",Q=arguments.length>2?arguments[2]:void 0,$="/api/admin/hh5p/content/".concat(U);return $=e?"".concat($,"?lang=").concat(e):$,(0,L.request)($,T()({method:"GET"},Q||{}))};function D(n,U,e){return J.apply(this,arguments)}function J(){return J=f()(_()().mark(function n(U,e,Q){return _()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.abrupt("return",(0,L.request)(e?"/api/admin/hh5p/content/".concat(e):"/api/admin/hh5p/content",T()({method:"POST",headers:{"Content-Type":"application/json"},data:U},Q||{})));case 1:case"end":return Y.stop()}},n)})),J.apply(this,arguments)}function G(n){return B.apply(this,arguments)}function B(){return B=f()(_()().mark(function n(U){return _()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.abrupt("return",(0,L.request)("/api/admin/hh5p/content/".concat(U),{method:"DELETE"}));case 1:case"end":return Q.stop()}},n)})),B.apply(this,arguments)}function w(n){return l.apply(this,arguments)}function l(){return l=f()(_()().mark(function n(U){return _()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.abrupt("return",(0,L.request)("/api/admin/hh5p/content?per_page=0",T()({method:"GET"},U||{})));case 1:case"end":return Q.stop()}},n)})),l.apply(this,arguments)}},44837:function(Qe,xe,t){"use strict";t.d(xe,{Ir:function(){return G},RB:function(){return u},fw:function(){return e},nM:function(){return D},nS:function(){return n},q5:function(){return $},rc:function(){return w},ry:function(){return O},wv:function(){return j}});var Me=t(15009),_=t.n(Me),me=t(97857),T=t.n(me),de=t(99289),f=t.n(de),L=t(80854);function u(h,ne){return N.apply(this,arguments)}function N(){return N=f()(_()().mark(function h(ne,_e){return _()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",(0,L.request)("/api/admin/products",T()({method:"GET",params:T()(T()({},ne),{},{free:typeof ne.free!="undefined"?ne.free==="true"?1:0:void 0,per_page:ne.pageSize,page:ne.current})},_e||{})));case 1:case"end":return R.stop()}},h)})),N.apply(this,arguments)}function O(h,ne){return H.apply(this,arguments)}function H(){return H=f()(_()().mark(function h(ne,_e){return _()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",(0,L.request)("/api/admin/products",T()({method:"POST",data:ne},_e||{})));case 1:case"end":return R.stop()}},h)})),H.apply(this,arguments)}function j(h,ne){return ae.apply(this,arguments)}function ae(){return ae=f()(_()().mark(function h(ne,_e){return _()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",(0,L.request)("/api/admin/products/".concat(ne),T()({method:"GET"},_e||{})));case 1:case"end":return R.stop()}},h)})),ae.apply(this,arguments)}function D(h,ne,_e){return J.apply(this,arguments)}function J(){return J=f()(_()().mark(function h(ne,_e,pe){return _()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,L.request)("/api/admin/products/".concat(ne,"?_method=PUT"),T()({method:"POST",data:_e},pe||{})));case 1:case"end":return p.stop()}},h)})),J.apply(this,arguments)}function G(h,ne){return B.apply(this,arguments)}function B(){return B=f()(_()().mark(function h(ne,_e){return _()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",(0,L.request)("/api/admin/products/".concat(ne),T()({method:"DELETE"},_e||{})));case 1:case"end":return R.stop()}},h)})),B.apply(this,arguments)}function w(h){return l.apply(this,arguments)}function l(){return l=f()(_()().mark(function h(ne){return _()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.abrupt("return",(0,L.request)("/api/admin/productables",T()({method:"GET"},ne||{})));case 1:case"end":return pe.stop()}},h)})),l.apply(this,arguments)}function n(h,ne){return U.apply(this,arguments)}function U(){return U=f()(_()().mark(function h(ne,_e){return _()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",(0,L.request)("/api/admin/productables/product",T()({method:"GET",params:ne},_e||{})));case 1:case"end":return R.stop()}},h)})),U.apply(this,arguments)}function e(h,ne,_e){return Q.apply(this,arguments)}function Q(){return Q=f()(_()().mark(function h(ne,_e,pe){return _()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,L.request)("/api/admin/products/".concat(ne,"/attach"),T()({method:"POST",data:_e},pe||{})));case 1:case"end":return p.stop()}},h)})),Q.apply(this,arguments)}function $(h,ne,_e){return Y.apply(this,arguments)}function Y(){return Y=f()(_()().mark(function h(ne,_e,pe){return _()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,L.request)("/api/admin/products/".concat(ne,"/detach"),T()({method:"POST",data:_e},pe||{})));case 1:case"end":return p.stop()}},h)})),Y.apply(this,arguments)}},76841:function(Qe,xe,t){"use strict";t.d(xe,{Gm:function(){return u},Sx:function(){return j},_g:function(){return O}});var Me=t(15009),_=t.n(Me),me=t(97857),T=t.n(me),de=t(99289),f=t.n(de),L=t(80854);function u(D,J){return N.apply(this,arguments)}function N(){return N=f()(_()().mark(function D(J,G){return _()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,L.request)("/api/admin/reports/report",T()({params:J,method:"GET",useCache:!1},G||{})));case 1:case"end":return w.stop()}},D)})),N.apply(this,arguments)}function O(D,J,G){return H.apply(this,arguments)}function H(){return H=f()(_()().mark(function D(J,G,B){return _()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,L.request)("/api/admin/stats/course/".concat(J,"/export"),T()({params:G,method:"GET",useCache:!1,responseType:"blob",headers:{accept:"application/vnd.ms-excel"}},B||{})));case 1:case"end":return l.stop()}},D)})),H.apply(this,arguments)}function j(D,J,G){return ae.apply(this,arguments)}function ae(){return ae=f()(_()().mark(function D(J,G,B){return _()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,L.request)("/api/admin/stats/topic/".concat(J,"/export"),T()({method:"GET",useCache:!1,params:{stat:G},responseType:"blob",headers:{accept:"application/vnd.ms-excel"}},B||{})));case 1:case"end":return l.stop()}},D)})),ae.apply(this,arguments)}},9649:function(Qe,xe,t){"use strict";t.d(xe,{JZ:function(){return u},NK:function(){return j}});var Me=t(15009),_=t.n(Me),me=t(97857),T=t.n(me),de=t(99289),f=t.n(de),L=t(80854);function u(D,J){return N.apply(this,arguments)}function N(){return N=f()(_()().mark(function D(J,G){return _()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,L.request)("/api/admin/scorm",T()({params:J,method:"GET",useCache:!1},G||{})));case 1:case"end":return w.stop()}},D)})),N.apply(this,arguments)}function O(D,J){return H.apply(this,arguments)}function H(){return H=_asyncToGenerator(_regeneratorRuntime().mark(function D(J,G){return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",request("/api/admin/scorm/scos",_objectSpread({params:_objectSpread(_objectSpread({},J),{},{per_page:J.pageSize,page:J.current}),method:"GET",useCache:!1},G||{})));case 1:case"end":return w.stop()}},D)})),H.apply(this,arguments)}function j(D,J){return ae.apply(this,arguments)}function ae(){return ae=f()(_()().mark(function D(J,G){return _()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,L.request)("/api/admin/scorm/".concat(J),T()({method:"DELETE"},G||{})));case 1:case"end":return w.stop()}},D)})),ae.apply(this,arguments)}},30869:function(Qe,xe,t){"use strict";t.d(xe,{EA:function(){return O},Je:function(){return G},LS:function(){return ce},N5:function(){return j},Nq:function(){return w},VB:function(){return R},WC:function(){return $},ck:function(){return D},h8:function(){return e},m9:function(){return _e},nS:function(){return h},r4:function(){return n},rC:function(){return u},yi:function(){return m}});var Me=t(15009),_=t.n(Me),me=t(97857),T=t.n(me),de=t(99289),f=t.n(de),L=t(80854);function u(E,P){return N.apply(this,arguments)}function N(){return N=f()(_()().mark(function E(P,Z){return _()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,L.request)("/api/admin/users",T()({params:P,method:"GET",useCache:!1},Z||{})));case 1:case"end":return b.stop()}},E)})),N.apply(this,arguments)}function O(E,P,Z){return H.apply(this,arguments)}function H(){return H=f()(_()().mark(function E(P,Z,g){return _()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.abrupt("return",(0,L.request)("/api/admin/users/".concat(P),T()({method:"GET",useCache:g!==void 0?g:!0},Z||{})));case 1:case"end":return X.stop()}},E)})),H.apply(this,arguments)}function j(E){return ae.apply(this,arguments)}function ae(){return ae=f()(_()().mark(function E(P){return _()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,L.request)("/api/profile/me",T()({method:"GET",useCache:!1},P||{})));case 1:case"end":return g.stop()}},E)})),ae.apply(this,arguments)}function D(E,P){return J.apply(this,arguments)}function J(){return J=f()(_()().mark(function E(P,Z){return _()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,L.request)("/api/profile/me",T()({data:P,method:"PUT"},Z||{})));case 1:case"end":return b.stop()}},E)})),J.apply(this,arguments)}function G(E,P){return B.apply(this,arguments)}function B(){return B=f()(_()().mark(function E(P,Z){return _()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,L.request)("/api/profile/password",T()({data:P,method:"PUT"},Z||{})));case 1:case"end":return b.stop()}},E)})),B.apply(this,arguments)}function w(E,P,Z){return l.apply(this,arguments)}function l(){return l=f()(_()().mark(function E(P,Z,g){return _()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.abrupt("return",(0,L.request)("/api/admin/users/".concat(P),T()({data:Z,method:"PUT"},g||{})));case 1:case"end":return X.stop()}},E)})),l.apply(this,arguments)}function n(E,P){return U.apply(this,arguments)}function U(){return U=f()(_()().mark(function E(P,Z){return _()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,L.request)("/api/admin/users",T()({data:P,method:"POST"},Z||{})));case 1:case"end":return b.stop()}},E)})),U.apply(this,arguments)}function e(E,P){return Q.apply(this,arguments)}function Q(){return Q=f()(_()().mark(function E(P,Z){return _()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,L.request)("/api/admin/users/".concat(P),T()({method:"DELETE"},Z||{})));case 1:case"end":return b.stop()}},E)})),Q.apply(this,arguments)}function $(E,P,Z){return Y.apply(this,arguments)}function Y(){return Y=f()(_()().mark(function E(P,Z,g){return _()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.abrupt("return",(0,L.request)("/api/auth/email/resend",T()({method:"POST",data:{email:P,return_url:Z}},g||{})));case 1:case"end":return X.stop()}},E)})),Y.apply(this,arguments)}function h(E,P){return ne.apply(this,arguments)}function ne(){return ne=f()(_()().mark(function E(P,Z){return _()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,L.request)("/api/admin/users/".concat(P,"/settings"),T()({method:"GET",useCache:!1},Z||{})));case 1:case"end":return b.stop()}},E)})),ne.apply(this,arguments)}function _e(E,P,Z,g){return pe.apply(this,arguments)}function pe(){return pe=f()(_()().mark(function E(P,Z,g,b){return _()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.abrupt("return",(0,L.request)("/api/admin/users/".concat(P,"/settings"),T()({method:Z,data:{settings:[g]},useCache:!1},b||{})));case 1:case"end":return ue.stop()}},E)})),pe.apply(this,arguments)}function R(E,P){return p.apply(this,arguments)}function p(){return p=f()(_()().mark(function E(P,Z){return _()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,L.request)("/api/admin/users/".concat(P,"/avatar"),T()({method:"DELETE"},Z||{})));case 1:case"end":return b.stop()}},E)})),p.apply(this,arguments)}function m(E,P,Z){return k.apply(this,arguments)}function k(){return k=f()(_()().mark(function E(P,Z,g){return _()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.abrupt("return",(0,L.request)("/api/admin/users/".concat(P,"/interests"),T()({data:Z,method:"PUT"},g||{})));case 1:case"end":return X.stop()}},E)})),k.apply(this,arguments)}function ce(E,P){return se.apply(this,arguments)}function se(){return se=f()(_()().mark(function E(P,Z){return _()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,L.request)("/api/admin/stats/date-range",T()({params:P,method:"GET"},Z||{})));case 1:case"end":return b.stop()}},E)})),se.apply(this,arguments)}},93414:function(){},70172:function(){},2001:function(){},33779:function(){},66558:function(){},82258:function(){}}]);
