(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"3fxf":function(oe,A,e){"use strict";var S=e("DjyN"),J=e("NUBc"),C=e("Mwp2"),m=e("VXEj"),Y=e("+L6B"),D=e("2/Rp"),w=e("5NDa"),n=e("5rEg"),te=e("KQm4"),r=e("VTBJ"),g=e("ODXe"),x=e("DYRE"),Q=e("zeV3"),M=e("tU7J"),E=e("wFql"),b=e("q1tI"),U=e.n(b),j=e("BAh9"),Z=e("/MfK"),R=e("mAF4"),ae=e("dF/Y"),B=e("9kvl"),le=e("DBJ/"),T=e("lLVY"),he=e.n(T),d=e("nKUr"),H=e.n(d),de=function(ne){var X=ne.directory,ue=ne.onUploaded;return Object(d.jsxs)(Q.b,{align:"start",children:[Object(d.jsxs)(E.a.Text,{children:[Object(d.jsx)(B.a,{id:"pages.files.filesBrowser"}),Object(d.jsx)(E.a.Text,{code:!0,children:X})]}),Object(d.jsx)(le.a,{url:"/api/admin/file/upload",name:"file[]",data:{target:X},onUpload:function(je){je.success&&ue(X,je.data)}})]})},Me=function(ne){var X=ne.defaultDirectory,ue=X===void 0?"/":X,V=ne.onFile,je=ne.hideDeleteBtn,Oe=je===void 0?!1:je,ve=ne.forceLoading,xe=ve===void 0?!1:ve,re=Object(B.i)(),Ee=Object(b.useState)({loading:!1,name:"",directory:ue,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),ge=Object(g.a)(Ee,2),F=ge[0],fe=ge[1],q=Object(b.useRef)(),z=Object(b.useCallback)(function(_){fe(function(o){return Object(r.a)(Object(r.a)({},o),{},{loading:_})})},[]),N=Object(b.useCallback)(function(_,o){fe(function(P){return Object(r.a)(Object(r.a)(Object(r.a)({},P),_.data),{},{data:[{url:o.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(te.a)(_.data.data.map(function(G){return Object(r.a)(Object(r.a)({},G),{},{url:G.mime==="directory"?"".concat(o,"/").concat(G.name):G.url})}))).filter(function(G){return o==="/"||o===ue?G.name!=="..":!0}),directory:o,loading:!1})})},[z]),$=Object(b.useCallback)(function(_){var o,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,G=function(){return q.current&&q.current.abort()};return G(),q.current=new AbortController,z(!0),Object(j.a)({directory:_,page:P},{signal:(o=q.current)===null||o===void 0?void 0:o.signal}).then(function(se){se.success&&N(se,_)}).catch(function(){return z(!1)}),function(){G()}},[z]);Object(b.useEffect)(function(){return $(ue)},[ue,$]);var me=Object(b.useCallback)(function(_){z(!0),Object(j.c)(_).then(function(){$(F.directory)}).catch(function(){z(!1)})},[$,z,F.directory]),be=Object(b.useCallback)(function(_,o){var P,G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,se=function(){return q.current&&q.current.abort()};return se(),q.current=new AbortController,z(!0),Object(j.b)({directory:_,name:o,page:G},{signal:(P=q.current)===null||P===void 0?void 0:P.signal}).then(function(ie){ie.success&&N(ie,_)}).catch(function(){return z(!1)}),function(){se()}},[z]);return Object(d.jsxs)("div",{className:"file-browser",children:[Object(d.jsxs)("div",{className:"file-browser__header",children:[Object(d.jsx)(n.a,{placeholder:re.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(o){return fe(function(P){return Object(r.a)(Object(r.a)({},P),{},{name:o.target.value})})},value:F.name}),Object(d.jsxs)("div",{children:[Object(d.jsx)(D.a,{className:"file-browser__button",onClick:function(){return $(F.directory)},children:Object(d.jsx)(B.a,{id:"reset"})}),Object(d.jsx)(D.a,{className:"file-browser__button",type:"primary",onClick:function(){return be(F.directory,F.name)},children:Object(d.jsx)(B.a,{id:"query"})})]})]}),Object(d.jsx)(m.b,{loading:F.loading||xe,size:"small",itemLayout:"horizontal",dataSource:F.data,header:Object(d.jsx)(de,{directory:F.directory,onUploaded:function(o,P){P&&($(o),V&&V(P,o))}}),footer:Object(d.jsx)(de,{directory:F.directory,onUploaded:function(o,P){$(o),P&&V&&V(P,o)}}),renderItem:function(o){return Object(d.jsx)(m.b.Item,{actions:o.mime!=="directory"&&!Oe?[Object(d.jsx)(D.a,{type:"default",danger:!0,icon:Object(d.jsx)(Z.a,{}),size:"small",onClick:function(){return me(o.url)}},"dir")]:[],children:Object(d.jsx)(m.b.Item.Meta,{avatar:o.mime==="directory"?Object(d.jsx)(D.a,{type:"primary",icon:Object(d.jsx)(R.a,{}),size:"small",onClick:function(){return $(o.url)}}):Object(d.jsx)("a",{href:o.url,target:"_blank",rel:"noreferrer",children:Object(d.jsx)(D.a,{type:"default",icon:Object(d.jsx)(ae.a,{}),size:"small"})}),description:Object(d.jsx)(U.a.Fragment,{children:Object(d.jsx)(D.a,{type:"text",size:"small",onClick:function(){return o.mime==="directory"?$(o.url):V&&V(o,F.directory)},children:o.name})})})})}}),Object(d.jsx)(J.a,{pageSizeOptions:[],current:F.current_page,total:F.total,pageSize:F.per_page,onChange:function(o){return $(F.directory,o)}})]})};A.a=Me},BAh9:function(oe,A,e){"use strict";e.d(A,"a",function(){return Y}),e.d(A,"b",function(){return w}),e.d(A,"e",function(){return te}),e.d(A,"d",function(){return g}),e.d(A,"c",function(){return x});var S=e("x+uP"),J=e("VTBJ"),C=e("HaE+"),m=e("9kvl");function Y(M,E){return D.apply(this,arguments)}function D(){return D=Object(C.a)(Object(S.a)().mark(function M(E,b){return Object(S.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(m.f)("/api/admin/file/list",Object(J.a)({method:"GET",params:E},b||{})));case 1:case"end":return j.stop()}},M)})),D.apply(this,arguments)}function w(M,E){return n.apply(this,arguments)}function n(){return n=Object(C.a)(Object(S.a)().mark(function M(E,b){return Object(S.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(m.f)("/api/admin/file/find",Object(J.a)({method:"GET",params:E},b||{})));case 1:case"end":return j.stop()}},M)})),n.apply(this,arguments)}function te(M,E,b){return r.apply(this,arguments)}function r(){return r=Object(C.a)(Object(S.a)().mark(function M(E,b,U){var j;return Object(S.a)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return j=new FormData,j.append("file[]",E),j.append("target",b),R.abrupt("return",Object(m.f)("/api/admin/file/upload",Object(J.a)({method:"POST",data:j},U||{})));case 4:case"end":return R.stop()}},M)})),r.apply(this,arguments)}var g=function(E){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/images/img?path=").concat(E,"&w=").concat(b)};function x(M,E){return Q.apply(this,arguments)}function Q(){return Q=Object(C.a)(Object(S.a)().mark(function M(E,b){return Object(S.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(m.f)("/api/admin/file/delete",Object(J.a)({method:"DELETE",data:{url:E}},b||{})));case 1:case"end":return j.stop()}},M)})),Q.apply(this,arguments)}},"DBJ/":function(oe,A,e){"use strict";var S=e("VTBJ"),J=e("y8nQ"),C=e("Vl3Y"),m=e("etVw"),Y=e("9kvl"),D=e("qFDU"),w=e("nKUr"),n=e.n(w);function te(r){var g=r.onChange,x=r.onUpload,Q=r.url,M=r.name,E=r.extra,b=r.accept,U=r.data,j=r.wrapInForm,Z=j===void 0?!0:j,R=r.title,ae=r.formProps,B=Object(Y.i)();return U&&U[M]&&delete U[M],Object(w.jsx)(D.a,{condition:Z,wrap:function(T){return Object(w.jsx)(C.a,Object(S.a)(Object(S.a)({},ae),{},{children:T}))},children:Object(w.jsx)(m.a,{title:R||" ".concat(B.formatMessage({id:"upload_click_here"})),placeholder:B.formatMessage({id:"upload_click_here"}),onChange:function(T){g&&g(T),T.file.status==="done"&&x&&x(T.file.response)},label:Object(w.jsx)(Y.a,{id:"upload"}),max:2,fieldProps:{data:U,accept:b,name:M,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(Q),extra:E})})}A.a=te},YjuE:function(oe,A,e){"use strict";e.r(A);var S=e("T2oS"),J=e("W9HT"),C=e("ODXe"),m=e("q1tI"),Y=e.n(m),D=e("nhC9"),w=e("Ty5D"),n=e("9kvl"),te=e("tMyG"),r=e("x+uP"),g=e("VTBJ"),x=e("HaE+");function Q(l,a){return M.apply(this,arguments)}function M(){return M=Object(x.a)(Object(r.a)().mark(function l(a,s){return Object(r.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(n.f)("/api/admin/settings",Object(g.a)({method:"GET",useCache:!1,params:Object(g.a)(Object(g.a)({},a),{},{per_page:a.pageSize,page:a.current})},s||{})));case 1:case"end":return i.stop()}},l)})),M.apply(this,arguments)}function E(l,a){return b.apply(this,arguments)}function b(){return b=Object(x.a)(Object(r.a)().mark(function l(a,s){return Object(r.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(n.f)("/api/admin/settings/".concat(a),Object(g.a)({method:"GET",useCache:!1},s||{})));case 1:case"end":return i.stop()}},l)})),b.apply(this,arguments)}function U(l,a){return j.apply(this,arguments)}function j(){return j=Object(x.a)(Object(r.a)().mark(function l(a,s){return Object(r.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(n.f)("/api/admin/settings",Object(g.a)({method:"POST",headers:{"Content-Type":"application/json"},data:a},s||{})));case 1:case"end":return i.stop()}},l)})),j.apply(this,arguments)}function Z(l,a,s){return R.apply(this,arguments)}function R(){return R=Object(x.a)(Object(r.a)().mark(function l(a,s,c){return Object(r.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",Object(n.f)("/api/admin/settings/".concat(a),Object(g.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:s},c||{})));case 1:case"end":return v.stop()}},l)})),R.apply(this,arguments)}function ae(l,a){return B.apply(this,arguments)}function B(){return B=Object(x.a)(Object(r.a)().mark(function l(a,s){return Object(r.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(n.f)("/api/admin/settings/".concat(a),Object(g.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},s||{})));case 1:case"end":return i.stop()}},l)})),B.apply(this,arguments)}function le(l){return T.apply(this,arguments)}function T(){return T=Object(x.a)(Object(r.a)().mark(function l(a){return Object(r.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(n.f)("/api/admin/settings/groups",Object(g.a)({method:"GET",useCache:!1},a||{})));case 1:case"end":return c.stop()}},l)})),T.apply(this,arguments)}function he(l){return d.apply(this,arguments)}function d(){return d=Object(x.a)(Object(r.a)().mark(function l(a){return Object(r.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(n.f)("/api/admin/config",Object(g.a)({method:"GET",useCache:!1},a||{})));case 1:case"end":return c.stop()}},l)})),d.apply(this,arguments)}function H(l,a){return de.apply(this,arguments)}function de(){return de=Object(x.a)(Object(r.a)().mark(function l(a,s){var c,i;return Object(r.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return c=a.key,i=a.value,u.abrupt("return",Object(n.f)("/api/admin/config",Object(g.a)({method:"POST",data:{config:[{key:c,value:i}]}},s||{})));case 2:case"end":return u.stop()}},l)})),de.apply(this,arguments)}var Me=e("P2fV"),ye=e("NJEC"),ne=e("5Dmo"),X=e("3S7+"),ue=e("+L6B"),V=e("2/Rp"),je=e("+BJd"),Oe=e("mr32"),ve=e("rePB"),xe=e("miYZ"),re=e("tsqr"),Ee=e("xvlK"),ge=e("Qiat"),F=e("y8nQ"),fe=e("Vl3Y"),q=e("5NDa"),z=e("5rEg"),N=e("VMEa"),$=e("rmhi"),me=e("Qurx"),be=e("F/zT"),_=e("5qq5"),o=e("BiO0"),P=e("hd5d"),G=e("3fxf"),se=e("ovOe"),ie=e.n(se),t=e("nKUr"),Pe=function(a){var s=a.value,c=a.onChange,i=a.type,v=i===void 0?"file":i,u=Object(m.useState)(!1),y=Object(C.a)(u,2),L=y[0],O=y[1];return Object(t.jsxs)(Y.a.Fragment,{children:[Object(t.jsxs)(N.a.Group,{children:[Object(t.jsx)(z.a,{value:s,readOnly:!0}),Object(t.jsxs)(V.a,{size:"small",type:"primary",onClick:function(){return O(!L)},children:["toggle ",v," browser"]})]}),L&&Object(t.jsx)(G.a,{onFile:function(K,p){return c&&c("".concat(p,"/").concat(K.name))}})]})},Ce=function(a){var s=Object(n.i)(),c=a.visible,i=a.onVisibleChange,v=a.onFinish,u=a.id,y=fe.a.useForm(),L=Object(C.a)(y,1),O=L[0],I=!u||u===-1,K=Object(m.useState)("text"),p=Object(C.a)(K,2),f=p[0],h=p[1];Object(m.useEffect)(function(){u&&u!==-1?E(u).then(function(W){W.success&&(O.setFieldsValue(W.data),h(W.data.type))}):(O.resetFields(),h("text"))},[u,O]);var ee=Object(m.useCallback)(function(W){W.type&&W.type!==f&&h(W.type)},[f]);return Object(t.jsxs)($.a,{form:O,title:s.formatMessage({id:u?"editSetting":"newSetting",defaultMessage:u?"editSetting":"newSetting"}),width:"60vw",visible:c,onVisibleChange:i,onFinish:v,onValuesChange:ee,children:[Object(t.jsxs)(N.a.Group,{children:[Object(t.jsx)(me.a,{label:Object(t.jsx)(n.a,{id:"group",defaultMessage:"group"}),rules:[{required:!0}],width:"md",name:"group"})," ",Object(t.jsx)(me.a,{label:Object(t.jsx)(n.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"})]}),Object(t.jsxs)(N.a.Group,{children:[Object(t.jsx)(be.a,{name:"enumerable",label:Object(t.jsx)(n.a,{id:"enumerable",defaultMessage:"enumerable"})}),Object(t.jsx)(be.a,{name:"public",label:Object(t.jsx)(n.a,{id:"public",defaultMessage:"public"})})]}),Object(t.jsx)(N.a.Group,{children:Object(t.jsx)(_.a.Group,{disabled:!I,name:"type",label:Object(t.jsx)(n.a,{id:"type"}),options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"},{label:"json",value:"json"},{label:"file",value:"file"},{label:"image",value:"image"}]})}),Object(t.jsxs)("div",{children:[f==="text"&&Object(t.jsx)(me.a,{width:"lg",name:"value",label:Object(t.jsx)(n.a,{id:"value"})}),f==="json"&&Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(o.a,{width:"lg",name:"value",label:Object(t.jsx)(n.a,{id:"value"}),tooltip:"".concat(s.formatMessage({id:"example_json"}),': {"name":"John", "age":30, "city":["New York","Warsaw"]}')}),Object(t.jsx)(N.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(ie.a,{src:JSON.parse(O.getFieldValue("value"))})}catch(k){return Object(t.jsx)(ie.a,{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]}),(f==="file"||f==="image")&&Object(t.jsx)(N.a.Item,{name:"value",label:"value",tooltip:"select file from current repository or upload new one",valuePropName:"value",children:Object(t.jsx)(Pe,{type:f})}),f==="markdown"&&Object(t.jsx)(N.a.Item,{name:"value",label:"value",tooltip:"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.",valuePropName:"value",children:Object(t.jsx)(P.a,{directory:"settings/wysiwyg"})})]})]})},De=Ce,_e=e("G3dp"),Te=e("/MfK"),Ie=function(){var l=Object(x.a)(Object(r.a)().mark(function a(s,c,i){var v;return Object(r.a)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return v=re.default.loading(s.formatMessage({id:"loading"})),y.prev=1,y.next=4,i&&i!==-1?Z(i,Object(g.a)({},c)):U(Object(g.a)({},c));case 4:return v(),re.default.success(s.formatMessage({id:"success"})),y.abrupt("return",!0);case 9:return y.prev=9,y.t0=y.catch(1),v(),re.default.error(s.formatMessage({id:"error"})),y.abrupt("return",!1);case 14:case"end":return y.stop()}},a,null,[[1,9]])}));return function(s,c,i){return l.apply(this,arguments)}}(),Ae=function(){var l=Object(x.a)(Object(r.a)().mark(function a(s,c){var i;return Object(r.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return i=re.default.loading(s.formatMessage({id:"loading"})),u.prev=1,u.next=4,ae(c);case 4:return i(),re.default.success(s.formatMessage({id:"success"})),u.abrupt("return",!0);case 9:return u.prev=9,u.t0=u.catch(1),i(),re.default.error(s.formatMessage({id:"error"})),u.abrupt("return",!1);case 14:case"end":return u.stop()}},a,null,[[1,9]])}));return function(s,c){return l.apply(this,arguments)}}(),Se=function(){var a=Object(m.useState)(!1),s=Object(C.a)(a,2),c=s[0],i=s[1],v=Object(m.useState)([]),u=Object(C.a)(v,2),y=u[0],L=u[1],O=Object(m.useRef)(),I=Object(n.i)();Object(m.useEffect)(function(){le().then(function(p){p.success&&L(p.data)})},[]);var K=[{title:Object(t.jsx)(n.a,{id:"group",defaultMessage:"group"}),dataIndex:"group",hideInSearch:!1,key:"group",valueType:"select",width:100,valueEnum:y.sort().reduce(function(p,f){return Object(g.a)(Object(g.a)({},p),{},Object(ve.a)({},f,f))},{})},{title:Object(t.jsx)(n.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(n.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(t.jsx)(n.a,{id:"enumerable",defaultMessage:"enumerable"}),dataIndex:"enumerable",hideInForm:!0,hideInSearch:!0,render:function(f,h){return Object(t.jsx)(Oe.a,{color:h.enumerable?"success":"error",children:Object(t.jsx)(n.a,{id:h.enumerable?"true":"false",defaultMessage:h.enumerable?"true":"false"})})}},{title:Object(t.jsx)(n.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(f,h){return Object(t.jsx)(Oe.a,{color:h.public?"success":"error",children:Object(t.jsx)(n.a,{id:h.public?"true":"false",defaultMessage:h.public?"true":"false"})})}},{hideInSearch:!0,title:Object(t.jsx)(n.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(f,h){return[Object(t.jsx)(X.a,{title:Object(t.jsx)(n.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(V.a,{type:"primary",icon:Object(t.jsx)(_e.a,{}),onClick:function(){return i(h.id)}})},"edit"),Object(t.jsx)(ye.a,{title:Object(t.jsx)(n.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(x.a)(Object(r.a)().mark(function ee(){var W;return Object(r.a)().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=2,Ae(I,h.id);case 2:W=pe.sent,W&&(i(!1),O.current&&O.current.reload());case 4:case"end":return pe.stop()}},ee)})),okText:Object(t.jsx)(n.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(n.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(X.a,{title:Object(t.jsx)(n.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(V.a,{type:"primary",icon:Object(t.jsx)(Te.a,{}),danger:!0})})},"delete")]}}];return Object(t.jsxs)(Y.a.Fragment,{children:[Object(t.jsx)(ge.a,{headerTitle:I.formatMessage({id:"menu.settings"}),actionRef:O,rowKey:"id",search:{},toolBarRender:function(){return[Object(t.jsxs)(V.a,{type:"primary",onClick:function(){i(-1)},children:[Object(t.jsx)(Ee.a,{})," ",Object(t.jsx)(n.a,{id:"pages.searchTable.new"})]},"primary")]},request:function(f){var h=f.pageSize,ee=f.current,W=f.group;return Q({pageSize:h,current:ee,group:W}).then(function(k){return k.success?{data:k.data,total:k.meta.total,success:!0}:[]})},columns:K}),Object(t.jsx)(De,{groups:y,id:c,visible:Number.isInteger(c),onVisibleChange:function(f){return f===!1&&i(!1)},onFinish:function(){var p=Object(x.a)(Object(r.a)().mark(function f(h){var ee;return Object(r.a)().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,Ie(I,h,Number(c));case 2:ee=k.sent,ee&&(i(!1),O.current&&O.current.reload());case 4:case"end":return k.stop()}},f)}));return function(f){return p.apply(this,arguments)}}()})]})},Ue=Se,Je=e("tU7J"),Be=e("wFql"),Fe=e("Fghh"),Re=Be.a.Text,ce;(function(l){l.Array="array",l.String="string"})(ce||(ce={}));var Le=function(a,s){return s===ce.Array?a&&Array.isArray(a)?JSON.stringify(a):"[]":a},Ke=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",s=arguments.length>1?arguments[1]:void 0;if(s===ce.Array){var c=JSON.parse(a);return c&&Array.isArray(c)?c:[]}return a},We=function(a){var s=Object(Fe.j)(),c=a.visible,i=a.onVisibleChange,v=a.onFinish,u=a.value,y=fe.a.useForm(),L=Object(C.a)(y,1),O=L[0],I=Object(m.useMemo)(function(){return(u.rules||[]).includes(ce.Array)?ce.Array:ce.String},[u.rules]);return Object(m.useEffect)(function(){O.setFieldsValue(Object(g.a)(Object(g.a)({},u),{},{value:Le(u.value,I)}))},[I,u,O]),Object(t.jsxs)($.a,{form:O,title:u.full_key,width:"60vw",visible:c,onVisibleChange:i,onFinish:Object(x.a)(Object(r.a)().mark(function K(){var p;return Object(r.a)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,H({key:u.full_key,value:Ke(O.getFieldsValue().value,I)});case 2:if(p=h.sent,!p.success){h.next=6;break}return v(p.success===!0),h.abrupt("return",p.success);case 6:return h.abrupt("return");case 7:case"end":return h.stop()}},K)})),children:[Object(t.jsxs)(N.a.Group,{children:[Object(t.jsx)(be.a,{disabled:!0,name:"public",label:Object(t.jsx)(n.a,{id:"public",defaultMessage:"public"})}),Object(t.jsx)(be.a,{disabled:!0,name:"readonly",label:Object(t.jsx)(n.a,{id:"readonly",defaultMessage:"readonly"})}),Object(t.jsx)(N.a.Item,{shouldUpdate:!0,label:Object(t.jsx)(n.a,{id:"rules",defaultMessage:"rules"}),children:function(){return Object(t.jsx)(Re,{code:!0,children:JSON.stringify(O.getFieldValue("rules"))})}})]}),I===ce.Array?Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(o.a,{width:"lg",name:"value",label:Object(t.jsx)(n.a,{id:"value"}),tooltip:"".concat(s.formatMessage({id:"example_json"}),': ["first_field_name", "second_field_name"]')}),Object(t.jsx)(N.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(ie.a,{src:JSON.parse(O.getFieldValue("value"))})}catch(p){return Object(t.jsx)(ie.a,{src:JSON.parse('{ "error": "cannot parse this array" }')})}}})]}):Object(t.jsx)(me.a,{width:"lg",name:"value",label:Object(t.jsx)(n.a,{id:"value"})})]})},we=We,Ve=[{title:Object(t.jsx)(n.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(n.a,{id:"readonly",defaultMessage:"readonly"}),dataIndex:"readonly",hideInForm:!0,hideInSearch:!0,render:function(a,s){return Object(t.jsx)(Oe.a,{color:s.readonly?"success":"error",children:Object(t.jsx)(n.a,{id:s.readonly?"true":"false",defaultMessage:s.readonly?"true":"false"})})}},{title:Object(t.jsx)(n.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(a,s){return Object(t.jsx)(Oe.a,{color:s.public?"success":"error",children:Object(t.jsx)(n.a,{id:s.public?"true":"false",defaultMessage:s.public?"true":"false"})})}},{title:Object(t.jsx)(n.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0}],Ne=function l(a,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return!a||typeof a!="object"?!1:(Object.keys(a).forEach(function(i){var v=a[i];i===s?c.push(a):typeof v=="object"&&l(v,s,c)}),c)},$e=function(a){var s=a.packageName,c=a.values,i=a.onValueUpdated,v=Object(n.i)(),u=Object(m.useState)(),y=Object(C.a)(u,2),L=y[0],O=y[1],I=Object(m.useMemo)(function(){var K=c[s];return Ne(K,"rules")},[c,s]);return Object(t.jsxs)(Y.a.Fragment,{children:[Object(t.jsx)(ge.a,{headerTitle:v.formatMessage({id:"menu.settings"}),rowKey:"key",search:{},dataSource:I,columns:[].concat(Ve,[{hideInSearch:!0,title:Object(t.jsx)(n.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(p,f){return[Object(t.jsx)(X.a,{title:Object(t.jsx)(n.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(V.a,{type:"primary",icon:Object(t.jsx)(_e.a,{}),onClick:function(){return O(f)}})},"edit")]}}])}),L&&Object(t.jsx)(we,{value:L,visible:L!==void 0,onVisibleChange:function(p){return p===!1&&O(void 0)},onFinish:Object(x.a)(Object(r.a)().mark(function K(){return Object(r.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:i();case 1:case"end":return f.stop()}},K)}))})]})},Ge=$e,ze=function(a){return a.replaceAll("escolalms","").split("_").join("")},Ye=A.default=function(){var l=Object(w.l)(),a=Object(n.i)(),s=l.tab,c=s===void 0?"user_settings":s,i=Object(m.useState)(),v=Object(C.a)(i,2),u=v[0],y=v[1],L=Object(m.useCallback)(function(){he().then(function(O){O.success&&y(O.data)})},[]);return Object(m.useEffect)(function(){L()},[]),u?Object(t.jsx)(te.a,{title:Object(t.jsx)(n.a,{id:"settings"}),header:{breadcrumb:{routes:[{path:"settings",breadcrumbName:a.formatMessage({id:"menu.Settings"})},{path:String(c),breadcrumbName:String(c)}]}},children:Object(t.jsxs)(D.a,{tabs:{type:"card",activeKey:c,onChange:function(I){return n.d.push("/settings/".concat(I))}},children:[Object(t.jsx)(D.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"user.settings"}),children:Object(t.jsx)(Ue,{})},"user_settings"),Object.keys(u).map(function(O){return Object(t.jsxs)(D.a.TabPane,{tab:Object(t.jsxs)("span",{children:[Object(t.jsx)(n.a,{id:"package"})," ",ze(O)]}),children:[Object(t.jsx)(Ge,{values:u,packageName:O,onValueUpdated:function(){return L()}}),O]},O)})]})}):Object(t.jsx)(J.a,{})}},hd5d:function(oe,A,e){"use strict";var S=e("x+uP"),J=e("HaE+"),C=e("q1tI"),m=e.n(C),Y=e("3Ef1"),D=e.n(Y),w=e("BAh9"),n=e("vtG9"),te=e.n(n),r=e("9kvl"),g=e("nKUr"),x=e.n(g),Q=function(E){var b=E.value,U=E.onChange,j=E.directory,Z=j===void 0?"/wysiwyg":j,R=Object(r.i)();return Object(g.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(g.jsx)(D.a,{uploadImage:function(){var ae=Object(J.a)(Object(S.a)().mark(function B(le){var T,he;return Object(S.a)().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,Object(w.e)(le,Z);case 2:if(T=H.sent,!T.success){H.next=6;break}return he=T.data[0].name.includes("/")?T.data[0].name:"".concat(Z).concat(T.data[0].name),H.abrupt("return",Object(w.d)(he,1e3));case 6:throw new Error("Error while uploading");case 7:case"end":return H.stop()}},B)}));return function(B){return ae.apply(this,arguments)}}(),defaultValue:b||"",onChange:function(B){return U&&U(B())},placeholder:R.formatMessage({id:"wysiwyg_placeholder"})})})};A.a=Q},lLVY:function(oe,A,e){},vtG9:function(oe,A,e){}}]);
