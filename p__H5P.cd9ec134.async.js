(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"5YLw":function(H,f,e){"use strict";var O=e("DBJ/"),h=e("q1tI"),D=e.n(h),c=e("nKUr"),x=e.n(c),j=function(g){var E=g.onSuccess,b=g.onError;return Object(c.jsx)(O.a,{url:"/api/admin/hh5p/content/upload",name:"h5p_file",accept:".h5p",onChange:function(M){M.file.status==="done"&&M.file.response&&E(M.file.response),M.file.status==="error"&&b()}})};f.a=j},"DBJ/":function(H,f,e){"use strict";var O=e("k1fw"),h=e("y8nQ"),D=e("Vl3Y"),c=e("tJVT"),x=e("etVw"),j=e("q1tI"),L=e.n(j),g=e("9kvl"),E=e("qFDU"),b=e("nKUr"),K=e.n(b);function M(d){var U=d.onChange,a=d.onUpload,A=d.url,l=d.name,o=d.extra,u=d.accept,i=d.data,r=d.wrapInForm,C=r===void 0?!0:r,S=d.title,G=d.formProps,t=d.maxFiles,F=d.clearListAfterUpload,$=Object(j.useState)(),z=Object(c.a)($,2),B=z[0],y=z[1],w=Object(g.l)();return i&&i[l]&&delete i[l],Object(b.jsx)(E.a,{condition:C,wrap:function(P){return Object(b.jsx)(D.a,Object(O.a)(Object(O.a)({},G),{},{children:P}))},children:Object(b.jsx)(x.a,{title:S||" ".concat(w.formatMessage({id:"upload_click_here"})),placeholder:w.formatMessage({id:"upload_click_here"}),onChange:function(P){y(P),U&&U(P),P.file.status==="done"&&(a&&a(P.file.response),F&&y(void 0))},label:Object(b.jsx)(g.a,{id:"upload"}),max:t!=null?t:2,fieldProps:{data:i,accept:u,name:l,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(A),extra:o,fileList:B==null?void 0:B.fileList})})}f.a=M},Unir:function(H,f,e){"use strict";e.r(f);var O=e("P2fV"),h=e("NJEC"),D=e("5Dmo"),c=e("3S7+"),x=e("+L6B"),j=e("2/Rp"),L=e("qLMh"),g=e("miYZ"),E=e("tsqr"),b=e("9og8"),K=e("tJVT"),M=e("xvlK"),d=e("q1tI"),U=e.n(d),a=e("9kvl"),A=e("55Ip"),l=e("tMyG"),o=e("Qiat"),u=e("nzng"),i=e("G3dp"),r=e("/MfK"),C=e("2PG1"),S=e("4KAj"),G=e("5YLw"),t=e("nKUr"),F=e.n(t),$=function(){var B=Object(d.useState)(!1),y=Object(K.a)(B,2),w=y[0],v=y[1],P=Object(d.useRef)(),V=Object(a.l)(),Y=Object(d.useCallback)(function(){var m=Object(b.a)(Object(L.a)().mark(function s(n){var I,T;return Object(L.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return v(!0),I=E.b.loading(Object(t.jsx)(a.a,{id:"loading",defaultMessage:"loading"})),_.prev=2,_.next=5,Object(u.e)(n);case 5:return I(),E.b.success(Object(t.jsx)(a.a,{id:"success",defaultMessage:"success"})),v(!1),(T=P.current)===null||T===void 0||T.reload(),_.abrupt("return",!0);case 12:return _.prev=12,_.t0=_.catch(2),I(),E.b.error(Object(t.jsx)(a.a,{id:"error",defaultMessage:"error"})),v(!1),_.abrupt("return",!1);case 18:case"end":return _.stop()}},s,null,[[2,12]])}));return function(s){return m.apply(this,arguments)}}(),[P]),N=Object(d.useCallback)(function(){var m=Object(b.a)(Object(L.a)().mark(function s(n,I){var T,R,_,J,W;return Object(L.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return v(!0),T=E.b.loading(Object(t.jsx)(a.a,{id:"loading",defaultMessage:"loading"})),p.prev=2,p.next=5,fetch("".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/admin/hh5p/content/").concat(n,"/export"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}});case 5:if(R=p.sent,R.ok){p.next=8;break}throw Error("Error occured");case 8:return T(),v(!1),E.b.success(Object(t.jsx)(a.a,{id:"downloading",defaultMessage:"Downloading"})),p.next=13,R.blob();case 13:_=p.sent,J=window.URL.createObjectURL(_),W=document.createElement("a"),W.href=J,W.download="".concat(I.split(" ").join("-").toLocaleLowerCase()),W.click(),W.remove(),p.next=28;break;case 22:return p.prev=22,p.t0=p.catch(2),T(),v(!1),E.b.error(Object(t.jsx)(a.a,{id:"cant-download-file",defaultMessage:"Can't download file"})),p.abrupt("return");case 28:case"end":return p.stop()}},s,null,[[2,22]])}));return function(s,n){return m.apply(this,arguments)}}(),[]),Q=[{title:Object(t.jsx)(a.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",sorter:!1,search:!1},{title:Object(t.jsx)(a.a,{id:"newH5P",defaultMessage:"newH5P"}),dataIndex:"upload",hideInSearch:!1,hideInTable:!0,renderFormItem:function(){return[Object(t.jsx)(G.a,{onSuccess:function(){P.current&&P.current.reload(),E.b.success(Object(t.jsx)(a.a,{id:"H5P_uploaded",defaultMessage:"new H5P uploaded successfully"}))},onError:function(){return E.b.error(Object(t.jsx)(a.a,{id:"error",defaultMessage:"error"}))}},"upload")]}},{title:Object(t.jsx)(a.a,{id:"title",defaultMessage:"title"}),dataIndex:"title",sorter:function(s,n){return s.title.length-n.title.length},render:function(s,n){return n.title}},{title:Object(t.jsx)(a.a,{id:"library",defaultMessage:"library"}),dataIndex:"library",sorter:function(s,n){return s.library.title.length-n.library.title.length},search:!1,render:function(s,n){return n.library.title}},{title:Object(t.jsx)(a.a,{id:"library_id",defaultMessage:"library_id"}),dataIndex:"library_id",sorter:function(s,n){return s.library.id-n.library.id},render:function(s,n){return n.library.id}},{title:Object(t.jsx)(a.a,{id:"count_h5p",defaultMessage:"count_h5p"}),dataIndex:"count_h5p",sorter:function(s,n){return s.count_h5p-n.count_h5p},search:!1,render:function(s,n){return n.count_h5p}},{title:Object(t.jsx)(a.a,{id:"options",defaultMessage:"options"}),dataIndex:"option",valueType:"option",render:function(s,n){return[Object(t.jsx)(A.a,{to:"/courses/h5ps/".concat(n.id),children:Object(t.jsx)(c.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(j.a,{type:"primary",icon:Object(t.jsx)(i.a,{})})})},"edit"),Object(t.jsx)(h.a,{disabled:n.count_h5p!==0,title:Object(t.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:function(){return n.id&&Y(n.id)},okText:Object(t.jsx)(a.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(a.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(c.a,{title:Object(t.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(j.a,{disabled:n.count_h5p!==0,type:"primary",icon:Object(t.jsx)(r.a,{}),danger:!0})})},"delete"),Object(t.jsx)(A.a,{to:"/courses/h5ps/preview/".concat(n.id),children:Object(t.jsx)(c.a,{title:Object(t.jsx)(a.a,{id:"preview",defaultMessage:"preview"}),children:Object(t.jsx)(j.a,{icon:Object(t.jsx)(C.a,{})})})},"preview"),Object(t.jsx)(c.a,{title:Object(t.jsx)(a.a,{id:"export",defaultMessage:"export"}),children:Object(t.jsx)(j.a,{icon:Object(t.jsx)(S.a,{}),onClick:function(){return N(n.id,n.title)}})},"export")]}}];return Object(t.jsx)(l.a,{children:Object(t.jsx)(o.a,{loading:w,headerTitle:V.formatMessage({id:"menu.Courses.H5Ps",defaultMessage:"H5Ps List"}),actionRef:P,rowKey:"id",search:{},toolBarRender:function(){return[Object(t.jsx)(A.a,{to:"/courses/h5ps/new",children:Object(t.jsxs)(j.a,{type:"primary",children:[Object(t.jsx)(M.a,{})," ",Object(t.jsx)(a.a,{id:"new",defaultMessage:"new"})]},"primary")},"new")]},request:function(s){var n=s.pageSize,I=s.current,T=s.title,R=s.library_id;return v(!0),Object(u.d)({title:T,library_id:R,pageSize:n,current:I}).then(function(_){return v(!1),_.success?{data:_.data,total:_.meta.total,success:!0}:[]})},columns:Q})})};f.default=$},nzng:function(H,f,e){"use strict";e.d(f,"d",function(){return x}),e.d(f,"c",function(){return E}),e.d(f,"b",function(){return b}),e.d(f,"f",function(){return K}),e.d(f,"e",function(){return d}),e.d(f,"a",function(){return a});var O=e("qLMh"),h=e("k1fw"),D=e("9og8"),c=e("9kvl");function x(l,o){return j.apply(this,arguments)}function j(){return j=Object(D.a)(Object(O.a)().mark(function l(o,u){return Object(O.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(c.i)("/api/admin/hh5p/content",Object(h.a)({method:"GET",params:Object(h.a)(Object(h.a)({},o),{},{per_page:o.pageSize,page:o.current})},u||{})));case 1:case"end":return r.stop()}},l)})),j.apply(this,arguments)}function L(l,o){return g.apply(this,arguments)}function g(){return g=Object(D.a)(Object(O.a)().mark(function l(o,u){return Object(O.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Object(c.i)("/api/admin/hh5p/content/".concat(o),Object(h.a)({method:"GET"},u||{})));case 1:case"end":return r.stop()}},l)})),g.apply(this,arguments)}var E=function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en",i=arguments.length>2?arguments[2]:void 0,r=o?"/api/admin/hh5p/editor/".concat(o):"/api/admin/hh5p/editor";return r=u?"".concat(r,"?lang=").concat(u):r,Object(c.i)(r,Object(h.a)({method:"GET"},i||{}))},b=function(o){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en",i=arguments.length>2?arguments[2]:void 0,r="/api/admin/hh5p/content/".concat(o);return r=u?"".concat(r,"?lang=").concat(u):r,Object(c.i)(r,Object(h.a)({method:"GET"},i||{}))};function K(l,o,u){return M.apply(this,arguments)}function M(){return M=Object(D.a)(Object(O.a)().mark(function l(o,u,i){return Object(O.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",Object(c.i)(u?"/api/admin/hh5p/content/".concat(u):"/api/admin/hh5p/content",Object(h.a)({method:"POST",headers:{"Content-Type":"application/json"},data:o},i||{})));case 1:case"end":return C.stop()}},l)})),M.apply(this,arguments)}function d(l){return U.apply(this,arguments)}function U(){return U=Object(D.a)(Object(O.a)().mark(function l(o){return Object(O.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(c.i)("/api/admin/hh5p/content/".concat(o),{method:"DELETE"}));case 1:case"end":return i.stop()}},l)})),U.apply(this,arguments)}function a(l){return A.apply(this,arguments)}function A(){return A=Object(D.a)(Object(O.a)().mark(function l(o){return Object(O.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(c.i)("/api/admin/hh5p/content?per_page=0",Object(h.a)({method:"GET"},o||{})));case 1:case"end":return i.stop()}},l)})),A.apply(this,arguments)}}}]);
