(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"UI+1":function(le,W,t){"use strict";t.r(W);var ye=t("14J3"),ae=t("BMrR"),ue=t("jCWc"),je=t("kPKH"),be=t("T2oS"),Se=t("W9HT"),Me=t("miYZ"),Ce=t("tsqr"),S=t("qLMh"),i=t("k1fw"),w=t("9og8"),y=t("tJVT"),l=t("q1tI"),f=t("VMEa"),L=t("Qurx"),Oe=t("FJDo"),De=t("yj/a"),ne=t("lR9U"),Pe=t("BiO0"),B=t("nhC9"),Te=t("hd5d"),Ee=t("tMyG"),a=t("9kvl"),Fe=t("Ty5D"),Ie=t("0WSk"),fe=t("lJbd"),Ne=t("Gn8c"),Ae=t("TWax"),Q=t("c+yx"),ct=t("zjZ2"),Ue=t("q34N"),e=t("nKUr"),Re=function(x){var c=x.show,V=Object(a.l)();return Object(e.jsx)(Fe.b,{when:c,message:V.formatMessage({id:"unsaved_changes"})})},we=Re,Ve=t("5RzD"),ot=t("P2fV"),Be=t("NJEC"),lt=t("5Dmo"),Je=t("3S7+"),ut=t("+L6B"),ve=t("2/Rp"),U=t("oBTY"),$e=t("0Owb"),jt=t("DYRE"),Ke=t("zeV3"),bt=t("hUqB"),We=t("wYyv"),me=t("YJCA"),Le=t("eyie"),Ge=t("xvlK"),Ye=t("G3dp"),He=t("/MfK"),ze=t("CTl7"),Qe=t("Qiat"),Ot=t("y8nQ"),Ze=t("Vl3Y"),Xe=t("rmhi"),ke=t("w/uu"),qe=function(x){var c=Object(a.l)(),V=x.visible,d=x.fields,G=x.onVisibleChange,h=x.onFinish,M=x.id,Z=Ze.a.useForm(),$=Object(y.a)(Z,1),j=$[0];return Object(l.useEffect)(function(){if(d){j.setFieldsValue(d);return}j.resetFields()},[d]),Object(e.jsx)(Xe.a,{form:j,title:c.formatMessage({id:M?"editSetting":"newSetting",defaultMessage:M?"editSetting":"newSetting"}),width:"40vw",visible:V,onVisibleChange:function(R){G(R),j.resetFields()},onFinish:function(R){return j.resetFields(),h(Object(i.a)(Object(i.a)({},R),{},{id:(d==null?void 0:d.id)||null}))},children:Object(e.jsxs)(f.a.Group,{children:[Object(e.jsx)(L.a,{label:Object(e.jsx)(a.a,{id:"title",defaultMessage:"title"}),rules:[{required:!0}],width:"lg",name:"title"}),Object(e.jsx)(L.a,{label:Object(e.jsx)(a.a,{id:"subtitle",defaultMessage:"subtitle"}),rules:[{required:!0}],width:"lg",name:"subtitle"}),Object(e.jsx)(ke.a,{name:"hour",label:Object(e.jsx)(a.a,{id:"hour",defaultMessage:"hour"}),rules:[{required:!0}],width:"xs"}),Object(e.jsx)(f.a.Item,{name:"tutors",label:Object(e.jsx)(a.a,{id:"tutors"}),rules:[{required:!0}],convertValue:function(R){return R},valuePropName:"value",children:Object(e.jsx)(Ie.a,{multiple:!0})}),Object(e.jsx)(Pe.a,{label:Object(e.jsx)(a.a,{id:"description",defaultMessage:"description"}),rules:[{required:!1}],width:"lg",name:"description"}),Object(e.jsx)(f.a.Item,{name:"asCandidate",hidden:!0})]})})},_e=qe,et=t("Vpfc"),tt=Object(me.b)(function(J){return Object(e.jsx)("tr",Object(i.a)({},J))}),at=Object(me.a)(function(J){return Object(e.jsx)("tbody",Object(i.a)({},J))}),nt=Object(me.c)(function(){return Object(e.jsx)(Le.a,{style:{cursor:"grab",color:"#999"}})}),rt=function(x){var c=x.data,V=x.onCreate,d=x.lastDataUpdateDate,G=Object(l.useRef)(),h=Object(l.useRef)(null),M=Object(a.l)(),Z=Object(l.useState)([]),$=Object(y.a)(Z,2),j=$[0],K=$[1],R=Object(l.useState)(null),X=Object(y.a)(R,2),he=X[0],I=X[1],ge=Object(l.useState)(!1),k=Object(y.a)(ge,2),C=k[0],N=k[1],xe=Object(l.useState)(c),re=Object(y.a)(xe,2),q=re[0],se=re[1],ie=Object(l.useState)([]),de=Object(y.a)(ie,2),A=de[0],Y=de[1],H=Object(l.useState)(!1),T=Object(y.a)(H,2),v=T[0],P=T[1],E=[{title:"Sort",dataIndex:"sort",width:"5%",className:"drag-visible",render:function(){return Object(e.jsx)(nt,{})}},{width:"20%",title:Object(e.jsx)(a.a,{id:"title",defaultMessage:"Title"}),dataIndex:"title",hideInSearch:!0,renderText:function(n){return n.length>80?"".concat(n.slice(0,77),"..."):n}},{width:"20%",title:Object(e.jsx)(a.a,{id:"subtitle",defaultMessage:"subtitle"}),dataIndex:"subtitle",hideInSearch:!0,renderText:function(n){return n.length>80?"".concat(n.slice(0,77),"..."):n}},{width:"10%",title:Object(e.jsx)(a.a,{id:"hour",defaultMessage:"hour"}),dataIndex:"hour",hideInSearch:!0},{width:"15%",title:Object(e.jsx)(a.a,{id:"tutors",defaultMessage:"tutors"}),dataIndex:"tutors",hideInSearch:!0,render:function(n,s){var r=s.tutors;return r&&Object(e.jsx)(Ke.b,{children:r.map(function(o){return Object(e.jsx)(et.a,{type:"App\\Models\\User",type_id:o},o)})})}},{width:"18%",title:Object(e.jsx)(a.a,{id:"description",defaultMessage:"description"}),dataIndex:"description",hideInSearch:!0,renderText:function(n){return n?n.length>80?"".concat(n.trim().slice(0,77),"..."):n.trim():"-"}}],z=function(n){var s=n.oldIndex,r=n.newIndex;if(s!==r){var o=Object(We.a)(j.slice(),s,r).filter(Boolean);K(o)}},m=function(n){return Object(e.jsx)(at,Object(i.a)({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:z},n))},_=function(n){var s,r=Object($e.a)({},n),o=j.findIndex(function(p){var O=p.id;return O===r["data-row-key"]}),b=Object(i.a)(Object(i.a)({},r),{},{className:"".concat(r.className," ").concat((s=j[o])!==null&&s!==void 0&&s.asCandidate?"agenda-row-candidate":"")});return Object(e.jsx)(tt,Object(i.a)({index:o},b))};return Object(l.useEffect)(function(){Y([]),se(c),I(null),P(!1),h.current=null},[d]),Object(l.useEffect)(function(){Object(w.a)(Object(S.a)().mark(function u(){var n,s,r,o,b;return Object(S.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!(!q||!A)){O.next=2;break}return O.abrupt("return");case 2:n=[].concat(Object(U.a)(q),Object(U.a)(A)),s=n.reduce(function(g,D,F,ee){var ce=ee.filter(function(te){var pe=te.id;return pe===D.id});if(ce.length>1){var oe=ce.find(function(te){return"asCandidate"in te});if(!oe)return[].concat(Object(U.a)(g),[ce[-1]]);var dt=oe&&g.find(function(te){var pe=te.id;return pe===oe.id});return dt?g:[].concat(Object(U.a)(g),[oe])}return[].concat(Object(U.a)(g),[ce[0]])},[]),r=j.length?s.filter(function(g){var D=g.id;return j.findIndex(function(F){return F.id===D})===-1}):[],o=j.length?j.map(function(g){var D=s.findIndex(function(F){var ee=F.id;return ee===g.id});return s[D]}):s,b=[].concat(Object(U.a)(o),Object(U.a)(r)),K(b.filter(Boolean));case 8:case"end":return O.stop()}},u)}))()},[q,A]),Object(l.useEffect)(function(){var u=j.map(function(r){var o=r.id,b=r.title,p=r.subtitle,O=r.hour,g=r.description,D=r.tutors;return{id:o,title:b,subtitle:p,hour:O,description:g,tutors:D}});V(JSON.stringify(u));var n=j.map(function(r){var o=r.id;return o});if(h.current===null){if(!n.length)return;h.current=n}if(n.length>h.current.length){var s=JSON.stringify(n.slice(0,h.current.length))!==JSON.stringify(h.current);if(P(s),!s){h.current=n;return}}P(JSON.stringify(n)!==JSON.stringify(h.current))},[j]),Object(e.jsxs)(Ee.a,{header:{breadcrumb:{}},className:"agenda-container",children:[Object(e.jsx)(Qe.a,{className:"agenda-table",headerTitle:M.formatMessage({id:"agenda",defaultMessage:"Agenda"}),actionRef:G,rowKey:function(n){return n.id},search:!1,toolBarRender:function(){return[Object(e.jsxs)(ve.a,{type:"primary",onClick:function(){return N(!0)},children:[Object(e.jsx)(Ge.a,{})," ",Object(e.jsx)(a.a,{id:"new",defaultMessage:"new"})]},"primary")]},pagination:!1,dataSource:j,columns:[].concat(E,[{width:"12%",hideInSearch:!0,title:Object(e.jsx)(a.a,{id:"pages.searchTable.titleOption"}),dataIndex:"option",valueType:"option",render:function(n,s){return[Object(e.jsx)(ve.a,{type:"primary",icon:Object(e.jsx)(Ye.a,{}),onClick:function(){if("asCandidate"in s){var o;I((o=A.find(function(p){var O=p.id;return O===s.id}))!==null&&o!==void 0?o:null)}else{var b;I((b=c.find(function(p){var O=p.id;return O===s.id}))!==null&&b!==void 0?b:null)}N(!0)}},"edit"),Object(e.jsx)(Be.a,{title:Object(e.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(w.a)(Object(S.a)().mark(function r(){return Object(S.a)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!("asCandidate"in s)){b.next=3;break}return Y(function(p){return p.filter(function(O){var g=O.id;return g!==s.id})}),b.abrupt("return");case 3:se(function(p){return p.filter(function(O){var g=O.id;return g!==s.id})});case 4:case"end":return b.stop()}},r)})),okText:Object(e.jsx)(a.a,{id:"yes"}),cancelText:Object(e.jsx)(a.a,{id:"no"}),children:Object(e.jsx)(Je.a,{title:Object(e.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(e.jsx)(ve.a,{type:"primary",icon:Object(e.jsx)(He.a,{}),danger:!0})})},"delete")]}}]),components:{body:{wrapper:m,row:_}}}),!!A.length&&Object(e.jsxs)("div",{className:"legend",children:[Object(e.jsx)("div",{className:"legend__dot"}),Object(e.jsx)("p",{className:"legend__label",children:Object(e.jsx)(a.a,{id:"changesToBeApproved",defaultMessage:"Changes to be approved"})})]}),v&&Object(e.jsxs)("div",{className:"legend",children:[Object(e.jsx)(ze.a,{className:"legend__icon"}),Object(e.jsx)("p",{className:"legend__label",children:Object(e.jsx)(a.a,{id:"orderHasBeenChanged",defaultMessage:"Order has been changed"})})]}),Object(e.jsx)(_e,{name:C,visible:C,fields:he,onVisibleChange:function(n){n===!1&&(N(!1),I(null))},onFinish:function(){var u=Object(w.a)(Object(S.a)().mark(function n(s){var r,o,b,p,O;return Object(S.a)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(!s.id){D.next=9;break}return r="asCandidate"in s,o=r?A:c,b=o.find(function(F){var ee=F.id;return ee===s.id}),p=b?JSON.stringify(b)!==JSON.stringify(s):!1,p&&(O=r?A.map(function(F){return F.id===s.id?s:F}):[].concat(Object(U.a)(A),[Object(i.a)(Object(i.a)({},s),{},{asCandidate:!0})]),Y(O)),I(null),N(!1),D.abrupt("return");case 9:Y(function(F){return[].concat(Object(U.a)(F),[Object(i.a)(Object(i.a)({},s),{},{asCandidate:!0,id:Date.now()})])}),I(null),N(!1);case 12:case"end":return D.stop()}},n)}));return function(n){return u.apply(this,arguments)}}()})]})},st=rt,it=function(){var x,c=Object(a.l)(),V=Object(Fe.l)(),d=V.id,G=V.tab,h=G===void 0?"attributes":G,M=d==="new",Z=Object(l.useState)(null),$=Object(y.a)(Z,2),j=$[0],K=$[1],R=Object(l.useState)(!1),X=Object(y.a)(R,2),he=X[0],I=X[1],ge=Object(l.useState)(),k=Object(y.a)(ge,2),C=k[0],N=k[1],xe=f.a.useForm(),re=Object(y.a)(xe,1),q=re[0],se=Object(l.useState)(new Date),ie=Object(y.a)(se,2),de=ie[0],A=ie[1],Y=Object(l.useCallback)(Object(w.a)(Object(S.a)().mark(function T(){var v,P,E;return Object(S.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,Object(fe.c)(Number(d));case 2:v=m.sent,v.success&&N(Object(i.a)(Object(i.a)({},v.data),{},{categories:v==null||(P=v.data)===null||P===void 0||(E=P.categories)===null||E===void 0?void 0:E.map(Q.d)}));case 4:case"end":return m.stop()}},T)})),[d]);Object(l.useEffect)(function(){if(M){N({name:"..."});return}Y()},[d]);var H=Object(l.useMemo)(function(){return{onFinish:function(){var T=Object(w.a)(Object(S.a)().mark(function P(E){var z,m,_,u,n;return Object(S.a)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(z=Object(i.a)(Object(i.a)({},E),{},{agenda:j,authors:E.authors&&E.authors.map(Q.a),categories:E.categories&&E.categories.map(Q.a),image_url:C&&C.image_url,image_path:C&&C.image_path&&Object(Q.k)(C.image_path)}),!M){r.next=8;break}return r.next=4,Object(fe.a)(z);case 4:m=r.sent,m.success&&(I(!1),a.f.push("/other/stationary-events/".concat(m.data.id))),r.next=12;break;case 8:return r.next=10,Object(fe.e)(Number(d),z);case 10:m=r.sent,m.success&&(I(!1),N(Object(i.a)(Object(i.a)({},m.data),{},{categories:(_=m)===null||_===void 0||(u=_.data)===null||u===void 0||(n=u.categories)===null||n===void 0?void 0:n.map(Q.d)})),A(new Date),a.f.push("/other/stationary-events/".concat(m.data.id,"/").concat(h)));case 12:Ce.b.success(m.message);case 13:case"end":return r.stop()}},P)}));function v(P){return T.apply(this,arguments)}return v}(),initialValues:C}},[C,d,h,j]);return C?Object(e.jsx)(Ee.a,{title:M?Object(e.jsx)(a.a,{id:"stationary_event"}):Object(e.jsx)(a.a,{id:"stationary_event.edit"}),header:{breadcrumb:{routes:[{path:"other/stationary-events",breadcrumbName:c.formatMessage({id:"menu.Other activities.StationaryEvents"})},{path:String(d),breadcrumbName:c.formatMessage({id:"form"})},{path:"/",breadcrumbName:c.formatMessage({id:d==="new"?"new":"edit"})},{path:String(h),breadcrumbName:c.formatMessage({id:String(h)})}]}},children:Object(e.jsxs)(B.a,{tabs:{type:"card",activeKey:h,onChange:function(v){return a.f.push("/other/stationary-events/".concat(d,"/").concat(v))}},children:[Object(e.jsxs)(B.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"attributes"}),children:[Object(e.jsx)(we,{show:he})," ",Object(e.jsxs)(f.a,Object(i.a)(Object(i.a)({},H),{},{form:q,onValuesChange:function(){I(!0)},children:[Object(e.jsxs)(f.a.Group,{children:[Object(e.jsx)(L.a,{width:"md",name:"name",label:Object(e.jsx)(a.a,{id:"name"}),tooltip:Object(e.jsx)(a.a,{id:"name_tooltip"}),placeholder:c.formatMessage({id:"name",defaultMessage:"name"}),required:!0}),Object(e.jsx)(L.a,{width:"md",name:"place",label:Object(e.jsx)(a.a,{id:"place"}),tooltip:Object(e.jsx)(a.a,{id:"place_tooltip"}),placeholder:c.formatMessage({id:"place",defaultMessage:"place"}),required:!0}),Object(e.jsx)(f.a.Item,{name:"authors",label:Object(e.jsx)(a.a,{id:"tutor"}),valuePropName:"value",children:Object(e.jsx)(Ie.a,{multiple:!0})}),Object(e.jsx)(Oe.a,{width:"xs",name:"max_participants",label:Object(e.jsx)(a.a,{id:"max_participants"}),tooltip:Object(e.jsx)(a.a,{id:"max_participants_tooltip"}),placeholder:c.formatMessage({id:"max_participants",defaultMessage:"max_participants"}),min:0,max:9999,fieldProps:{step:1}}),Object(e.jsx)(De.a,{name:"status",width:"md",label:Object(e.jsx)(a.a,{id:"status"}),tooltip:Object(e.jsx)(a.a,{id:"status_consultation_tooltip"}),valueEnum:{draft:c.formatMessage({id:"draft",defaultMessage:"draft"}),published:c.formatMessage({id:"published",defaultMessage:"published"}),archived:c.formatMessage({id:"archived",defaultMessage:"archived"})},initialValue:{draft:c.formatMessage({id:"draft",defaultMessage:"draft"})},placeholder:c.formatMessage({id:"status"}),rules:[{required:!0,message:Object(e.jsx)(a.a,{id:"select"})}]})]}),Object(e.jsxs)(f.a.Group,{children:[Object(e.jsx)(ne.a,{width:"sm",name:"started_at",label:Object(e.jsx)(a.a,{id:"started_at"}),tooltip:Object(e.jsx)(a.a,{id:"started_at_tooltip"}),placeholder:c.formatMessage({id:"started_at",defaultMessage:"started_at"})}),Object(e.jsx)(ne.a,{width:"sm",name:"finished_at",label:Object(e.jsx)(a.a,{id:"finished_at"}),tooltip:Object(e.jsx)(a.a,{id:"finished_at_tooltip"}),placeholder:c.formatMessage({id:"finished_at",defaultMessage:"finished_at"})})]}),Object(e.jsx)(f.a.Group,{children:Object(e.jsx)(Pe.a,{width:"lg",name:"short_desc",label:Object(e.jsx)(a.a,{id:"short_description"}),tooltip:Object(e.jsx)(a.a,{id:"short_description"})})}),Object(e.jsx)(f.a.Item,{name:"program",label:Object(e.jsx)(a.a,{id:"program"}),tooltip:Object(e.jsx)(a.a,{id:"program_tooltip"}),valuePropName:"value",children:Object(e.jsx)(Te.a,{directory:"stationary_events/".concat(d,"/wysiwyg")})}),Object(e.jsx)(f.a.Item,{name:"description",label:Object(e.jsx)(a.a,{id:"description"}),tooltip:Object(e.jsx)(a.a,{id:"description_tooltip"}),valuePropName:"value",children:Object(e.jsx)(Te.a,{directory:"stationary_events/".concat(d,"/wysiwyg")})})]}))]},"attributes")," ",!M&&Object(e.jsx)(B.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"agenda"}),children:Object(e.jsx)(f.a,Object(i.a)(Object(i.a)({},H),{},{children:Object(e.jsx)(st,{data:(x=C.agenda)!==null&&x!==void 0?x:[],onCreate:function(v){return K(v)},lastDataUpdateDate:de})}))},"agenda"),!M&&Object(e.jsx)(B.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"product"}),children:d&&Object(e.jsx)(Ue.a,{productable:{class_type:"App\\Models\\StationaryEvent",class_id:d,name:String(C.name),quantity:1}})},"product"),!M&&Object(e.jsx)(B.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"media"}),children:Object(e.jsx)(f.a,Object(i.a)(Object(i.a)({},H),{},{children:Object(e.jsx)(Ne.a,{folder:"stationary-events/".concat(d),title:"image",action:"/api/admin/stationary-events/".concat(d,"/?_method=PUT"),src_name:"image_url",form_name:"image",getUploadedSrcField:function(v){return v.file.response.data.image_url},setPath:function(v){return N(function(P){return Object(i.a)(Object(i.a)({},P),v)})}})}))},"media"),!M&&Object(e.jsx)(B.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"categories"}),children:Object(e.jsx)(ae.a,{children:Object(e.jsx)(je.a,{span:12,children:Object(e.jsx)(f.a,Object(i.a)(Object(i.a)({},H),{},{children:Object(e.jsx)(f.a.Item,{label:Object(e.jsx)(a.a,{id:"categories"}),name:"categories",valuePropName:"value",children:Object(e.jsx)(Ae.a,{multiple:!1})})}))})})},"categories"),!M&&Object(e.jsx)(B.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"user_submission"}),children:Object(e.jsx)(ae.a,{children:Object(e.jsx)(je.a,{span:12,children:d&&Object(e.jsx)(Ve.a,{id:Number(d),type:"App\\Models\\StationaryEvent"})})})},"user_submission")]})}):Object(e.jsx)(Se.a,{})},ft=W.default=it},hUqB:function(le,W,t){},q34N:function(le,W,t){"use strict";var ye=t("tJVT"),ae=t("0eZe"),ue=t("q1tI"),je=t.n(ue),be=t("nKUr"),Se=t.n(be),Me=function(S){var i=S.productable,w=S.type,y=w===void 0?"card":w,l=Object(ue.useState)("attributes"),f=Object(ye.a)(l,2),L=f[0],Oe=f[1];return Object(be.jsx)(ae.a,{productable:i,tab:L,onTabChange:function(ne){return Oe(ne)},type:y})};W.a=Me},zjZ2:function(le,W,t){}}]);
