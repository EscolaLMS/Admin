"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[9857],{89345:function(b,d,e){var s=e(97857),r=e.n(s),P=e(5574),f=e.n(P),t=e(76841),_=e(97175),c=e(63430),p=e(26271),E=e(14726),g=e(75081),O=e(72051),x=e(38925),h=e(75487),u=e(67294),o=e(80854),n=e(85893),D=[{title:(0,n.jsx)(o.FormattedMessage,{id:"label",defaultMessage:"label"}),dataIndex:"label",key:"label"},{title:(0,n.jsx)(o.FormattedMessage,{id:"value",defaultMessage:"value"}),dataIndex:"value",key:"value"}],v=function(j){var A=j.metric,I=j.header,R=I===void 0?!0:I,y=j.asDonut,Z=y===void 0?!1:y,U=j.customLabelTitle,T=j.customLabelContent,F=(0,u.useState)({mode:"init"}),K=f()(F,2),a=K[0],L=K[1],G=(0,o.useIntl)(),W={angleField:"value",colorField:"label",radius:.9,label:{type:"inner",offset:"-30%",content:function(l){var M=l.percent;return M>=.01?"".concat((M*100).toFixed(0),"%"):""},style:{fontSize:14,textAlign:"center"}},legend:{itemValue:{alignRight:!0,formatter:function(l,M){if(T&&"value"in a){var C=a.value.find(function(S){var B=S.label;return B===M.name});return C?T(C):l}return l}}}},w={appendPadding:20,innerRadius:.6,label:r()(r()({},W.label),{},{offset:"-50%"}),legend:{itemWidth:void 0,itemName:{formatter:function(l){return U?U(l):l}},offsetX:-24,itemValue:{formatter:function(l,M){if(T&&"value"in a){var C=a.value.find(function(S){var B=S.label;return B===M.value});return C?T(C):void 0}}}}},$=r()(r()({},W),Z?w:{});(0,u.useEffect)(function(){L({mode:"loading"}),(0,t.Gm)({metric:A}).then(function(i){i.success?L({mode:"loaded",value:i.data}):L({mode:"error",error:i.message})}).catch(function(i){return L({mode:"error",error:i.toString()})})},[A]);var z=(0,u.useCallback)(function(){if(a.mode==="loaded"){var i={filename:A.split("\\").join("-"),fieldSeparator:",",quoteStrings:'"',decimalSeparator:".",showLabels:!0,showTitle:!0,title:G.formatMessage({id:A.split("\\").pop()}),useTextFile:!1,useBom:!0,useKeysAsHeaders:!0},l=(0,h.iL)(i),M=(0,h.gB)(l)(a.value);(0,h.LR)(l)(M)}},[a]);return(0,n.jsxs)(p.ZP,{title:R&&(0,n.jsx)(o.FormattedMessage,{id:A.split("\\").pop(),defaultMessage:A.split("\\").pop()}),extra:R&&(0,n.jsxs)(E.ZP,{icon:(0,n.jsx)(_.Z,{}),size:"small",onClick:function(){return z()},children:[" ",(0,n.jsx)(o.FormattedMessage,{id:"download"}),"\xA0","CSV"]}),headerBordered:!0,children:[a.mode==="loading"&&(0,n.jsx)(g.Z,{}),a.mode==="loaded"&&(0,n.jsxs)("div",{children:[(0,n.jsx)(c.Z,r()(r()({},$),{},{data:a.value})),R&&(0,n.jsx)(O.Z,{pagination:!1,size:"small",dataSource:a.value,columns:D})]}),a.mode==="error"&&(0,n.jsx)(x.Z,{message:a.error,type:"error"})]})};d.Z=v},4723:function(b,d,e){e.r(d);var s=e(89345),r=e(26271),P=e(74453),f=e(67294),t=e(85893);d.default=function(){return(0,t.jsxs)(P._z,{children:[(0,t.jsxs)(r.ZP,{split:"vertical",children:[(0,t.jsx)(r.ZP,{colSpan:12,layout:"center",children:(0,t.jsx)(s.Z,{metric:"EscolaLms\\Reports\\Metrics\\CoursesMoneySpentMetric"})}),(0,t.jsx)(r.ZP,{colSpan:12,layout:"center",children:(0,t.jsx)(s.Z,{metric:"EscolaLms\\Reports\\Metrics\\CoursesPopularityMetric"})})]}),(0,t.jsxs)(r.ZP,{split:"vertical",children:[(0,t.jsx)(r.ZP,{colSpan:12,layout:"center",children:(0,t.jsx)(s.Z,{metric:"EscolaLms\\Reports\\Metrics\\CoursesSecondsSpentMetric"})}),(0,t.jsx)(r.ZP,{colSpan:12,layout:"center",children:(0,t.jsx)(s.Z,{metric:"EscolaLms\\Reports\\Metrics\\TutorsPopularityMetric"})})]})]})}},76841:function(b,d,e){e.d(d,{Gm:function(){return p},Sx:function(){return x},_g:function(){return g}});var s=e(15009),r=e.n(s),P=e(97857),f=e.n(P),t=e(99289),_=e.n(t),c=e(80854);function p(u,o){return E.apply(this,arguments)}function E(){return E=_()(r()().mark(function u(o,n){return r()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,c.request)("/api/admin/reports/report",f()({params:o,method:"GET",useCache:!1},n||{})));case 1:case"end":return v.stop()}},u)})),E.apply(this,arguments)}function g(u,o,n){return O.apply(this,arguments)}function O(){return O=_()(r()().mark(function u(o,n,D){return r()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,c.request)("/api/admin/stats/course/".concat(o,"/export"),f()({params:n,method:"GET",useCache:!1,responseType:"blob",headers:{accept:"application/vnd.ms-excel"}},D||{})));case 1:case"end":return m.stop()}},u)})),O.apply(this,arguments)}function x(u,o,n){return h.apply(this,arguments)}function h(){return h=_()(r()().mark(function u(o,n,D){return r()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,c.request)("/api/admin/stats/topic/".concat(o,"/export"),f()({method:"GET",useCache:!1,params:{stat:n},responseType:"blob",headers:{accept:"application/vnd.ms-excel"}},D||{})));case 1:case"end":return m.stop()}},u)})),h.apply(this,arguments)}},49867:function(b,d,e){e.d(d,{N:function(){return s}});const s=r=>({color:r.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${r.motionDurationSlow}`,"&:focus, &:hover":{color:r.colorLinkHover},"&:active":{color:r.colorLinkActive}})},79370:function(b,d,e){e.d(d,{G:function(){return f}});var s=e(98924),r=function(_){if((0,s.Z)()&&window.document.documentElement){var c=Array.isArray(_)?_:[_],p=window.document.documentElement;return c.some(function(E){return E in p.style})}return!1},P=function(_,c){if(!r(_))return!1;var p=document.createElement("div"),E=p.style[_];return p.style[_]=c,p.style[_]!==E};function f(t,_){return!Array.isArray(t)&&_!==void 0?P(t,_):r(t)}}}]);
