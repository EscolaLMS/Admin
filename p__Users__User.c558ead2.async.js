(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"5ddx":function(F,j,e){"use strict";var b=e("9og8"),p=e("+L6B"),i=e("2/Rp"),l=e("tJVT"),f=e("WmNS"),_=e.n(f),d=e("q1tI"),E=e.n(d),m=e("9kvl"),x=e("Qiat"),O=e("VK58"),r=e("xvlK"),P=e("Xcxh"),u=e("y8nQ"),c=e("Vl3Y"),n=e("rmhi"),s=e("VMEa"),o=e("Qurx"),a=e("nKUr"),v=function(D){var A=Object(m.i)(),N=D.visible,M=D.onVisibleChange,B=D.onFinish,Q=c.a.useForm(),Y=Object(l.a)(Q,1),G=Y[0];return Object(d.useEffect)(function(){return function(){G.resetFields()}},[]),Object(a.jsx)(n.a,{form:G,title:A.formatMessage({id:"newSetting",defaultMessage:"newSetting"}),width:"30vw",visible:N,onVisibleChange:M,onFinish:B,children:Object(a.jsxs)(s.b.Group,{children:[Object(a.jsx)(o.a,{label:Object(a.jsx)(m.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"}),Object(a.jsx)(o.a,{label:Object(a.jsx)(m.a,{id:"value",defaultMessage:"value"}),rules:[{required:!0}],width:"md",name:"value"})]})})},h=v,C=function(D){var A=D.user,N=D.isProfile,M=N===void 0?!1:N,B=Object(d.useRef)(),Q=Object(m.i)(),Y=Object(d.useState)(!1),G=Object(l.a)(Y,2),t=G[0],S=G[1],q=Object(d.useState)("PATCH"),ee=Object(l.a)(q,2),k=ee[0],w=ee[1],V=[{title:Object(a.jsx)(m.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(a.jsx)(m.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInSearch:!0}],W=Object(d.useCallback)(function(T){var g=T&&Object.entries(T).map(function(H){return{key:H[0],value:H[1]}});return g},[A]);return Object(a.jsxs)(E.a.Fragment,{children:[Object(a.jsx)(x.a,{headerTitle:Q.formatMessage({id:"menu.settings"}),actionRef:B,rowKey:"id",search:!1,toolBarRender:M?function(){return[Object(a.jsxs)(i.a,{type:"primary",onClick:function(){S(-1),w("PATCH")},children:[Object(a.jsx)(r.a,{})," ",Object(a.jsx)(m.a,{id:"pages.searchTable.new"})]},"primary"),Object(a.jsxs)(i.a,{color:"yellow",type:"primary",onClick:function(){S(-1),w("PUT")},children:[Object(a.jsx)(P.a,{})," ",Object(a.jsx)(m.a,{id:"user.settings.overwrite"})]},"primary")]}:!1,request:function(){return Object(O.c)(Number(A)).then(function(g){return g.success?{data:W(g.data)}:[]})},columns:V}),Object(a.jsx)(h,{id:t,visible:Number.isInteger(t),onVisibleChange:function(g){return g===!1&&S(!1)},onFinish:function(){var T=Object(b.a)(_.a.mark(function g(H){var X;return _.a.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,Object(O.f)(Number(A),k,H);case 2:X=J.sent,X.success&&(S(!1),B.current&&B.current.reload());case 4:case"end":return J.stop()}},g)}));return function(g){return T.apply(this,arguments)}}()})]})},U=j.a=C},BAh9:function(F,j,e){"use strict";e.d(j,"a",function(){return _}),e.d(j,"b",function(){return E}),e.d(j,"e",function(){return x}),e.d(j,"d",function(){return r}),e.d(j,"c",function(){return P});var b=e("k1fw"),p=e("9og8"),i=e("WmNS"),l=e.n(i),f=e("9kvl");function _(c,n){return d.apply(this,arguments)}function d(){return d=Object(p.a)(l.a.mark(function c(n,s){return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(f.f)("/api/admin/file/list",Object(b.a)({method:"GET",params:n},s||{})));case 1:case"end":return a.stop()}},c)})),d.apply(this,arguments)}function E(c,n){return m.apply(this,arguments)}function m(){return m=Object(p.a)(l.a.mark(function c(n,s){return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(f.f)("/api/admin/file/find",Object(b.a)({method:"GET",params:n},s||{})));case 1:case"end":return a.stop()}},c)})),m.apply(this,arguments)}function x(c,n,s){return O.apply(this,arguments)}function O(){return O=Object(p.a)(l.a.mark(function c(n,s,o){var a;return l.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return a=new FormData,a.append("file[]",n),a.append("target",s),h.abrupt("return",Object(f.f)("/api/admin/file/upload",Object(b.a)({method:"POST",data:a},o||{})));case 4:case"end":return h.stop()}},c)})),O.apply(this,arguments)}var r=function(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(n,"&w=").concat(s)};function P(c,n){return u.apply(this,arguments)}function u(){return u=Object(p.a)(l.a.mark(function c(n,s){return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(f.f)("/api/admin/file/delete",Object(b.a)({method:"DELETE",data:{url:n}},s||{})));case 1:case"end":return a.stop()}},c)})),u.apply(this,arguments)}},"DBJ/":function(F,j,e){"use strict";var b=e("y8nQ"),p=e("Vl3Y"),i=e("etVw"),l=e("q1tI"),f=e.n(l),_=e("9kvl"),d=function(O){var r=O.condition,P=O.children,u=O.wrap;return r?f.a.cloneElement(u(P)):P},E=e("nKUr"),m=function(r){var P=r.onChange,u=r.url,c=r.name,n=r.extra,s=r.accept,o=r.data,a=r.wrapInForm,v=a===void 0?!0:a,h=Object(_.i)();return o&&o[c]&&delete o[c],Object(E.jsx)(d,{condition:v,wrap:function(U){return Object(E.jsx)(p.a,{children:U})},children:Object(E.jsx)(i.a,{title:Object(E.jsx)(_.a,{id:"upload_click_here"}),placeholder:h.formatMessage({id:"upload_click_here"}),onChange:P,label:Object(E.jsx)(_.a,{id:"upload"}),max:2,fieldProps:{data:o,accept:s,name:c,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(u),extra:n})})},x=j.a=m},"F/zT":function(F,j,e){"use strict";var b=e("wx14"),p=e("VTBJ"),i=e("Ff2n"),l=e("q1tI"),f=e.n(l),_=e("adzw"),d=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],E=f.a.forwardRef(function(m,x){var O=m.fieldProps,r=m.unCheckedChildren,P=m.checkedChildren,u=m.proFieldProps,c=Object(i.a)(m,d);return f.a.createElement(_.a,Object(b.a)({valueType:"switch",mode:"edit",fieldProps:Object(p.a)({unCheckedChildren:r,checkedChildren:P},O),ref:x,valuePropName:"checked",proFieldProps:u,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},c))});j.a=E},"G/Ub":function(F,j,e){"use strict";e.d(j,"d",function(){return _}),e.d(j,"a",function(){return E}),e.d(j,"b",function(){return x}),e.d(j,"c",function(){return r}),e.d(j,"e",function(){return u});var b=e("k1fw"),p=e("9og8"),i=e("WmNS"),l=e.n(i),f=e("9kvl");function _(n){return d.apply(this,arguments)}function d(){return d=Object(p.a)(l.a.mark(function n(s){return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(f.f)("/api/admin/roles",Object(b.a)({method:"GET",useCache:!1},s||{})));case 1:case"end":return a.stop()}},n)})),d.apply(this,arguments)}function E(n,s){return m.apply(this,arguments)}function m(){return m=Object(p.a)(l.a.mark(function n(s,o){return l.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",Object(f.f)("/api/admin/roles",Object(b.a)({method:"POST",headers:{"Content-Type":"application/json"},data:s},o||{})));case 1:case"end":return v.stop()}},n)})),m.apply(this,arguments)}function x(n,s){return O.apply(this,arguments)}function O(){return O=Object(p.a)(l.a.mark(function n(s,o){return l.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",Object(f.f)("/api/admin/roles/".concat(s),Object(b.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},o||{})));case 1:case"end":return v.stop()}},n)})),O.apply(this,arguments)}function r(n,s){return P.apply(this,arguments)}function P(){return P=Object(p.a)(l.a.mark(function n(s,o){return l.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",Object(f.f)("/api/admin/roles/".concat(s),Object(b.a)({method:"GET",useCache:!1},o||{})));case 1:case"end":return v.stop()}},n)})),P.apply(this,arguments)}function u(n,s,o){return c.apply(this,arguments)}function c(){return c=Object(p.a)(l.a.mark(function n(s,o,a){return l.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",Object(f.f)("/api/admin/roles/".concat(s),Object(b.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:o},a||{})));case 1:case"end":return h.stop()}},n)})),c.apply(this,arguments)}},Jfn2:function(F,j,e){"use strict";var b=e("k1fw"),p=e("XCrF"),i=e("1GRj"),l=e("PpiC"),f=e("q1tI"),_=e.n(f),d=e("nKUr"),E=e.n(d),m=function(O){var r=O.path,P=O.size,u=O.srcSizes,c=O.alt,n=c===void 0?"LMS Image":c,s=Object(l.a)(O,["path","size","srcSizes","alt"]),o="".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(r,"&w=").concat(u?u[0]:P),a=u&&u.map(function(v){return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(r,"&w=").concat(v," ").concat(v,"w")});return Object(d.jsx)("div",{className:"escolalms-image",children:Object(d.jsx)(i.a,Object(b.a)({src:o,srcSet:a&&a.join(","),alt:n},s))})};j.a=m},etVw:function(F,j,e){"use strict";var b=e("DZo9"),p=e("8z0m"),i=e("+L6B"),l=e("2/Rp"),f=e("wx14"),_=e("q1tI"),d=e.n(_),E=e("z7Xi"),m=e("WFLz"),x=function(r,P){var u=r.fieldProps,c=r.name,n=r.action,s=r.accept,o=r.listType,a=r.title,v=a===void 0?"\u5355\u51FB\u4E0A\u4F20":a,h=r.max,C=r.icon,U=C===void 0?d.a.createElement(E.a,null):C,y=r.value,D=r.buttonProps,A=r.onChange,N=r.disabled,M=r.proFieldProps,B=r.fileList,Q=(h===void 0||!y||(y==null?void 0:y.length)<h)&&(M==null?void 0:M.mode)!=="read",Y=(o!=null?o:u==null?void 0:u.listType)==="picture-card";return d.a.createElement(p.a,Object(f.a)({action:n,accept:s,ref:P,name:c||"file",listType:o||"picture",fileList:B!=null?B:y},u,{onChange:function(t){var S;A==null||A(t),u==null||(S=u.onChange)===null||S===void 0||S.call(u,t)}}),Q&&(Y?d.a.createElement("span",null,U," ",v):d.a.createElement(l.a,Object(f.a)({disabled:N||(u==null?void 0:u.disabled)},D),U,v)))};j.a=Object(m.a)(d.a.forwardRef(x),{getValueFromEvent:function(r){return r.fileList}})},hd5d:function(F,j,e){"use strict";var b=e("9og8"),p=e("WmNS"),i=e.n(p),l=e("q1tI"),f=e.n(l),_=e("3Ef1"),d=e.n(_),E=e("BAh9"),m=e("vtG9"),x=e.n(m),O=e("9kvl"),r=e("nKUr"),P=e.n(r),u=function(n){var s=n.value,o=n.onChange,a=n.directory,v=a===void 0?"/wysiwyg":a,h=Object(O.i)();return Object(r.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(r.jsx)(d.a,{uploadImage:function(){var C=Object(b.a)(i.a.mark(function U(y){var D,A;return i.a.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,Object(E.e)(y,v);case 2:if(D=M.sent,!D.success){M.next=6;break}return A=D.data[0].name.includes("/")?D.data[0].name:"".concat(v).concat(D.data[0].name),M.abrupt("return",Object(E.d)(A,1e3));case 6:throw new Error("Error while uploading");case 7:case"end":return M.stop()}},U)}));return function(U){return C.apply(this,arguments)}}(),defaultValue:s||"",onChange:function(U){return o&&o(U())},placeholder:h.formatMessage({id:"wysiwyg_placeholder"})})})};j.a=u},tneF:function(F,j,e){"use strict";var b=e("sRBo"),p=e("kaz8"),i=e("wx14"),l=e("VTBJ"),f=e("Ff2n"),_=e("q1tI"),d=e.n(_),E=e("adzw"),m=e("uX+g"),x=e("WFLz"),O=["options","fieldProps","proFieldProps","valueEnum"],r=d.a.forwardRef(function(n,s){var o=n.options,a=n.fieldProps,v=n.proFieldProps,h=n.valueEnum,C=Object(f.a)(n,O);return d.a.createElement(E.a,Object(i.a)({ref:s,valueType:"checkbox",mode:"edit",valueEnum:Object(m.a)(h,void 0),fieldProps:Object(l.a)({options:o},a),proFieldProps:v},C))}),P=d.a.forwardRef(function(n,s){var o=n.fieldProps,a=n.children;return d.a.createElement(p.a,Object(i.a)({ref:s},o),a)}),u=Object(x.a)(P,{valuePropName:"checked"}),c=u;c.Group=r,j.a=c},vtG9:function(F,j,e){},weGn:function(F,j,e){"use strict";e.r(j);var b=e("nhC9"),p=e("Ty5D"),i=e("9kvl"),l=e("tMyG"),f=e("tU7J"),_=e("wFql"),d=e("DYRE"),E=e("zeV3"),m=e("y8nQ"),x=e("Vl3Y"),O=e("+L6B"),r=e("2/Rp"),P=e("T2oS"),u=e("W9HT"),c=e("miYZ"),n=e("tsqr"),s=e("k1fw"),o=e("9og8"),a=e("tJVT"),v=e("WmNS"),h=e.n(v),C=e("q1tI"),U=e.n(C),y=e("VMEa"),D=e("Qurx"),A=e("F/zT"),N=e("tneF"),M=e("VK58"),B=e("hd5d"),Q=e("DBJ/"),Y=e("Jfn2"),G=e("G/Ub"),t=e("nKUr"),S=function(k){var w,V=k.isNew,W=Object(i.i)(),T=Object(p.g)(),g=T.user,H=Object(C.useState)(),X=Object(a.a)(H,2),Z=X[0],J=X[1],se=Object(C.useState)(),ne=Object(a.a)(se,2),re=ne[0],ie=ne[1],ae=Object(C.useCallback)(Object(o.a)(h.a.mark(function L(){var I;return h.a.wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,Object(M.j)(Number(g));case 2:I=$.sent,I.success&&J(Object(s.a)(Object(s.a)({},I.data),{},{bio:I.data.bio||""}));case 4:case"end":return $.stop()}},L)})),[g]),oe=Object(C.useCallback)(Object(o.a)(h.a.mark(function L(){var I,K;return h.a.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,Object(G.d)();case 2:return I=R.sent,R.next=5,I;case 5:K=R.sent,K.success&&ie(K.data);case 7:case"end":return R.stop()}},L)})),[g]);Object(C.useEffect)(function(){if(V){J({});return}ae(),oe()},[g,ae]);var le=Object(C.useMemo)(function(){return{onFinish:function(){var L=Object(o.a)(h.a.mark(function K($){var R,te;return h.a.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(te=Object(s.a)(Object(s.a)({},$),{},{bio:$.bio?$.bio:void 0}),!V){z.next=8;break}return z.next=4,Object(M.a)(te);case 4:R=z.sent,R.success&&i.d.push("/users/".concat(R.data.id,"/user_info")),z.next=11;break;case 8:return z.next=10,Object(M.i)(Number(g),te);case 10:R=z.sent;case 11:n.default.success(R.message);case 12:case"end":return z.stop()}},K)}));function I(K){return L.apply(this,arguments)}return I}(),initialValues:Z}},[Z,g]);return Z?Object(t.jsxs)(y.b,Object(s.a)(Object(s.a)({},le),{},{children:[Object(t.jsxs)(y.b.Group,{children:[Object(t.jsx)(D.a,{width:"md",name:"first_name",label:Object(t.jsx)(i.a,{id:"first_name"}),tooltip:Object(t.jsx)(i.a,{id:"first_name"}),placeholder:W.formatMessage({id:"first_name"}),required:!0}),Object(t.jsx)(D.a,{width:"md",name:"last_name",label:Object(t.jsx)(i.a,{id:"last_name"}),tooltip:Object(t.jsx)(i.a,{id:"last_name"}),placeholder:W.formatMessage({id:"last_name"}),required:!0}),Object(t.jsx)(D.a,{width:"md",name:"email",label:Object(t.jsx)(i.a,{id:"email"}),tooltip:Object(t.jsx)(i.a,{id:"email"}),placeholder:W.formatMessage({id:"email"}),required:!0}),Object(t.jsx)(D.a.Password,{width:"md",name:"password",label:Object(t.jsx)(i.a,{id:"password"}),tooltip:Object(t.jsx)(i.a,{id:"password"}),placeholder:W.formatMessage({id:"password"}),required:V}),!V&&Object(t.jsxs)(E.b,{direction:"vertical",children:[!((w=Z.roles)!==null&&w!==void 0&&w.includes("admin"))&&Object(t.jsx)(A.a,{name:"email_verified",label:Object(t.jsx)(i.a,{id:"is_email_verified"})}),Object(t.jsx)(x.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(I){return I.getFieldValue("email_verified")?Object(t.jsx)(U.a.Fragment,{}):Object(t.jsx)(r.a,{size:"small",onClick:function(){Object(M.e)(I.getFieldValue("email")).then(function(){n.default.success(W.formatMessage({id:"email_resend"}))})},children:Object(t.jsx)(i.a,{id:"resend"})})}})]}),Object(t.jsx)(A.a,{name:"is_active",label:Object(t.jsx)(i.a,{id:"is_active"})}),re&&Object(t.jsx)(N.a.Group,{name:"roles",layout:"horizontal",label:Object(t.jsx)(i.a,{id:"roles"}),options:re.filter(function(L){return L.guard_name!=="web"}).map(function(L){return L.name})})]}),Object(t.jsx)(y.b.Item,{name:"bio",label:Object(t.jsx)(i.a,{id:"bio"}),tooltip:Object(t.jsx)(i.a,{id:"bio_tooltip"}),valuePropName:"value",children:Object(t.jsx)(B.a,{directory:"users/".concat(g,"/wysiwyg")})}),!V&&Object(t.jsxs)(y.b.Group,{children:[Object(t.jsx)(y.b.Item,{name:"avatar",label:Object(t.jsx)(i.a,{id:"avatar"}),children:Z.path_avatar?Object(t.jsx)(Y.a,{path:Z.path_avatar,size:600,width:200}):Object(t.jsx)(_.a,{children:Object(t.jsx)(i.a,{id:"avatar_placeholder"})})}),Object(t.jsx)(x.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){return Object(t.jsx)(Q.a,{wrapInForm:!1,url:"/api/admin/users/".concat(g,"/avatar"),name:"avatar",accept:"image/*",onChange:function(K){K.file.status==="done"&&K.file.response.success&&ae()}})}})]})]})):Object(t.jsx)(u.a,{})},q=e("5ddx"),ee=j.default=function(){var k=Object(p.g)(),w=Object(i.i)(),V=k.tab,W=V===void 0?"user_info":V,T=k.user,g=typeof T=="undefined";return Object(t.jsx)(l.a,{title:Object(t.jsx)(i.a,{id:"settings"}),header:{breadcrumb:{routes:[{path:"/users/".concat(T,"/user_info"),breadcrumbName:w.formatMessage({id:"menu.Settings"})},{path:String(W),breadcrumbName:String(W)}]}},children:Object(t.jsxs)(b.a,{tabs:{type:"card",activeKey:W,onChange:function(X){return i.d.push("/users/".concat(T,"/").concat(X))}},children:[Object(t.jsx)(b.a.TabPane,{tab:g?Object(t.jsx)(i.a,{id:"new_user"}):Object(t.jsx)(i.a,{id:"edit_user"}),children:Object(t.jsx)(S,{isNew:g})},"user_info"),!g&&Object(t.jsx)(b.a.TabPane,{tab:Object(t.jsx)("span",{children:Object(t.jsx)(i.a,{id:"user.settings"})}),children:T&&Object(t.jsx)(q.a,{user:T,isProfile:!1})},"settings")]})})}}}]);
