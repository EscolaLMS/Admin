(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[4173,2803,8047],{88280:function(le,ve,a){"use strict";a.d(ve,{Z:function(){return Ne}});var _=a(4942),fe=a(97685),I=a(45987),b=a(74165),r=a(15861),h=a(1413),V=a(87462),P=a(67294),W=a(42110),se=a(78026),O=function(L,J){return P.createElement(se.Z,(0,V.Z)({},L,{ref:J,icon:W.Z}))},H=P.forwardRef(O),Q=H,Te=a(97462),A=a(952),Ve=a(10915),ge=a(48171),Ie=a(53914),Pe=a(22270),he=a(60249),De=a(14726),ye=a(75842),ee=a(21770),xe=a(88306),pe=a(8880),e=a(48433),T=a(85893),Ee=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef"],Oe=["record","position","creatorButtonText","newRecordType","parentKey","style"],Ce=P.createContext(void 0);function Re(t){var L=t.children,J=t.record,te=t.position,ae=t.newRecordType,B=t.parentKey,re=(0,P.useContext)(Ce);return P.cloneElement(L,(0,h.Z)((0,h.Z)({},L.props),{},{onClick:function(){var ne=(0,r.Z)((0,b.Z)().mark(function be(Fe){var oe,de,Y,k;return(0,b.Z)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,(oe=(de=L.props).onClick)===null||oe===void 0?void 0:oe.call(de,Fe);case 2:if(k=R.sent,k!==!1){R.next=5;break}return R.abrupt("return");case 5:re==null||(Y=re.current)===null||Y===void 0||Y.addEditRecord(J,{position:te,newRecordType:ae,parentKey:B});case 6:case"end":return R.stop()}},be)}));function X(be){return ne.apply(this,arguments)}return X}()}))}function $e(t){var L,J,te=(0,Ve.YB)(),ae=t.onTableChange,B=t.maxLength,re=t.formItemProps,ne=t.recordCreatorProps,X=t.rowKey,be=t.controlled,Fe=t.defaultValue,oe=t.onChange,de=t.editableFormRef,Y=(0,I.Z)(t,Ee),k=(0,P.useRef)(void 0),ie=(0,P.useRef)(),R=(0,P.useRef)();(0,P.useImperativeHandle)(Y.actionRef,function(){return ie.current},[ie.current]);var we=(0,ee.Z)(function(){return t.value||Fe||[]},{value:t.value,onChange:t.onChange}),Se=(0,fe.Z)(we,2),x=Se[0],ze=Se[1],q=P.useMemo(function(){return typeof X=="function"?X:function(s,g){return s[X]||g}},[X]),D=(0,ge.J)(function(s){if(typeof s=="number"&&!t.name){if(s>=x.length)return s;var g=x&&x[s];return q==null?void 0:q(g,s)}if((typeof s=="string"||s>=x.length)&&t.name){var n=x.findIndex(function(i,d){var o;return(q==null||(o=q(i,d))===null||o===void 0?void 0:o.toString())===(s==null?void 0:s.toString())});if(n!==-1)return n}return s});(0,P.useImperativeHandle)(de,function(){var s=function(i){var d,o;if(i==null)throw new Error("rowIndex is required");var u=D(i),m=[t.name,(d=u==null?void 0:u.toString())!==null&&d!==void 0?d:""].flat(1).filter(Boolean);return(o=R.current)===null||o===void 0?void 0:o.getFieldValue(m)},g=function(){var i,d=[t.name].flat(1).filter(Boolean);if(Array.isArray(d)&&d.length===0){var o,u=(o=R.current)===null||o===void 0?void 0:o.getFieldsValue();return Array.isArray(u)?u:Object.keys(u).map(function(m){return u[m]})}return(i=R.current)===null||i===void 0?void 0:i.getFieldValue(d)};return(0,h.Z)((0,h.Z)({},R.current),{},{getRowData:s,getRowsData:g,setRowData:function(i,d){var o,u;if(i==null)throw new Error("rowIndex is required");var m=D(i),C=[t.name,(o=m==null?void 0:m.toString())!==null&&o!==void 0?o:""].flat(1).filter(Boolean),j=Object.assign({},(0,h.Z)((0,h.Z)({},s(i)),d||{})),c=(0,pe.Z)({},C,j);return(u=R.current)===null||u===void 0||u.setFieldsValue(c),!0}})},[D,t.name,R.current]),(0,P.useEffect)(function(){t.controlled&&(x||[]).forEach(function(s,g){var n;(n=R.current)===null||n===void 0||n.setFieldsValue((0,_.Z)({},"".concat(q(s,g)),s))},{})},[(0,Ie.ZP)(x),t.controlled]),(0,P.useEffect)(function(){if(t.name){var s;R.current=t==null||(s=t.editable)===null||s===void 0?void 0:s.form}},[(L=t.editable)===null||L===void 0?void 0:L.form,t.name]);var v=ne||{},l=v.record,F=v.position,f=v.creatorButtonText,M=v.newRecordType,Z=v.parentKey,$=v.style,N=(0,I.Z)(v,Oe),K=F==="top",p=(0,P.useMemo)(function(){return typeof B=="number"&&B<=(x==null?void 0:x.length)?!1:ne!==!1&&(0,T.jsx)(Re,{record:(0,Pe.h)(l,x==null?void 0:x.length,x)||{},position:F,parentKey:(0,Pe.h)(Z,x==null?void 0:x.length,x),newRecordType:M,children:(0,T.jsx)(De.ZP,(0,h.Z)((0,h.Z)({type:"dashed",style:(0,h.Z)({display:"block",margin:"10px 0",width:"100%"},$),icon:(0,T.jsx)(Q,{})},N),{},{children:f||te.getMessage("editableTable.action.add","\u6DFB\u52A0\u4E00\u884C\u6570\u636E")}))})},[ne,B,x==null?void 0:x.length]),w=(0,P.useMemo)(function(){return p?K?{components:{header:{wrapper:function(g){var n,i=g.className,d=g.children;return(0,T.jsxs)("thead",{className:i,children:[d,(0,T.jsxs)("tr",{style:{position:"relative"},children:[(0,T.jsx)("td",{colSpan:0,style:{visibility:"hidden"},children:p}),(0,T.jsx)("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:(n=Y.columns)===null||n===void 0?void 0:n.length,children:p})]})]})}}}}:{tableViewRender:function(g,n){var i,d;return(0,T.jsxs)(T.Fragment,{children:[(i=(d=t.tableViewRender)===null||d===void 0?void 0:d.call(t,g,n))!==null&&i!==void 0?i:n,p]})}}:{}},[K,p]),E=(0,h.Z)({},t.editable),z=(0,ge.J)(function(s,g){var n,i,d;if((n=t.editable)===null||n===void 0||(i=n.onValuesChange)===null||i===void 0||i.call(n,s,g),(d=t.onValuesChange)===null||d===void 0||d.call(t,g,s),t.controlled){var o;t==null||(o=t.onChange)===null||o===void 0||o.call(t,g)}});return(t!=null&&t.onValuesChange||(J=t.editable)!==null&&J!==void 0&&J.onValuesChange||t.controlled&&t!==null&&t!==void 0&&t.onChange)&&(E.onValuesChange=z),(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(Ce.Provider,{value:ie,children:(0,T.jsx)(e.Z,(0,h.Z)((0,h.Z)((0,h.Z)({search:!1,options:!1,pagination:!1,rowKey:X,revalidateOnFocus:!1},Y),w),{},{tableLayout:"fixed",actionRef:ie,onChange:ae,editable:(0,h.Z)((0,h.Z)({},E),{},{formProps:(0,h.Z)({formRef:R},E.formProps)}),dataSource:x,onDataSourceChange:function(g){if(ze(g),t.name&&F==="top"){var n,i=(0,pe.Z)({},[t.name].flat(1).filter(Boolean),g);(n=R.current)===null||n===void 0||n.setFieldsValue(i)}}}))}),t.name?(0,T.jsx)(Te.Z,{name:[t.name],children:function(g){var n,i;if(!k.current)return k.current=x,null;var d=(0,xe.Z)(g,[t.name].flat(1)),o=d==null?void 0:d.find(function(u,m){var C;return!(0,he.A)(u,(C=k.current)===null||C===void 0?void 0:C[m])});return k.current=x,o&&(t==null||(n=t.editable)===null||n===void 0||(i=n.onValuesChange)===null||i===void 0||i.call(n,o,d)),null}}):null]})}function je(t){var L=A.ZP.useFormInstance();return t.name?(0,T.jsx)(ye.Z.Item,(0,h.Z)((0,h.Z)({style:{maxWidth:"100%"}},t==null?void 0:t.formItemProps),{},{name:t.name,shouldUpdate:function(te,ae){var B=[t.name].flat(1);try{return JSON.stringify((0,xe.Z)(te,B))!==JSON.stringify((0,xe.Z)(ae,B))}catch(re){return!0}},children:(0,T.jsx)($e,(0,h.Z)((0,h.Z)({tableLayout:"fixed",scroll:{x:"max-content"}},t),{},{editable:(0,h.Z)((0,h.Z)({},t.editable),{},{form:L})}))})):(0,T.jsx)($e,(0,h.Z)({tableLayout:"fixed",scroll:{x:"max-content"}},t))}je.RecordCreator=Re;var Ne=je},63740:function(le,ve,a){"use strict";a.r(ve),a.d(ve,{default:function(){return q}});var _=a(26271),fe=a(74453),I=a(74330),b=a(67294),r=a(80854),h=a(15009),V=a.n(h),P=a(97857),W=a.n(P),se=a(99289),O=a.n(se),H=a(5574),Q=a.n(H),Te=a(58638),A=a(952),Ve=a(24739),ge=a(31199),Ie=a(78957),Pe=a(96074),he=a(14726),De=a(38751),ye=a(3598),ee=a(7014),xe=a(37476),pe=a(89974),e=a(85893),T=function(v){var l=v.quiz_id,F=v.visible,f=v.onVisibleChange,M=A.ZP.useForm(),Z=Q()(M,1),$=Z[0],N=(0,b.useCallback)(function(){var K=O()(V()().mark(function p(w){var E,z,s;return V()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return E=w.category_ids,n.prev=1,n.next=4,(0,ye.qp)({quiz_id:l,category_ids:E});case 4:z=n.sent,z instanceof Blob&&(s=document.createElement("a"),s.href=window.URL.createObjectURL(z),s.download="quiz_".concat(l,"_questions_by_category_id.xlsx"),document.body.appendChild(s),s.click(),document.body.removeChild(s)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),console.error(n.t0);case 11:return n.prev=11,f(!1),n.finish(11);case 14:case"end":return n.stop()}},p,null,[[1,8,11,14]])}));return function(p){return K.apply(this,arguments)}}(),[l]);return(0,e.jsx)(xe.Y,{title:(0,e.jsx)(r.FormattedMessage,{id:"exportQuestions"}),form:$,visible:F,onVisibleChange:f,onFinish:N,children:(0,e.jsx)(A.ZP.Item,{name:"category_ids",label:(0,e.jsx)(r.FormattedMessage,{id:"categories"}),required:!0,rules:[{required:!0,message:(0,e.jsx)(r.FormattedMessage,{id:"field_required"})}],children:(0,e.jsx)(pe.b,{multiple:!0,type:"question"})})})},Ee=function(){var v=(0,ee.O)(),l=v.competencyChallenge.data,F=(0,b.useState)(!1),f=Q()(F,2),M=f[0],Z=f[1],$=(0,b.useState)(!1),N=Q()($,2),K=N[0],p=N[1],w=(0,b.useState)(),E=Q()(w,2),z=E[0],s=E[1],g=(0,r.useIntl)(),n=(0,b.useCallback)(function(){return Z(!0)},[]),i=(0,b.useCallback)(function(){(l==null?void 0:l.quiz_id)!==void 0&&(p(!0),(0,ye.E8)(l==null?void 0:l.quiz_id).then(function(o){o.success&&s(o.data)}).finally(function(){return p(!1)}))},[l==null?void 0:l.quiz_id]),d=(0,b.useCallback)(function(){var o=O()(V()().mark(function u(m){return V()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if((l==null?void 0:l.quiz_id)!==void 0){j.next=2;break}return j.abrupt("return");case 2:p(!0),(0,ye.Lz)(l==null?void 0:l.quiz_id,W()(W()({},m),{},{value:"diagnostic-test"})).then(function(c){c.success&&s(c.data)}).finally(function(){return p(!1)});case 4:case"end":return j.stop()}},u)}));return function(u){return o.apply(this,arguments)}}(),[]);return(0,b.useEffect)(function(){i()},[i]),z?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(T,{visible:M,onVisibleChange:Z,quiz_id:z.id}),(0,e.jsxs)("div",{style:{position:"relative",paddingBottom:"64px"},children:[(0,e.jsx)(A.ZP,{submitter:{render:function(u,m){var C=Q()(m,2),j=C[0],c=C[1];return(0,e.jsxs)(Ie.Z,{style:{position:"absolute",bottom:0,left:0},children:[j,c]})}},initialValues:z,onFinish:d,children:(0,e.jsxs)(Ve.UW,{children:[(0,e.jsx)(ge.Z,{name:"max_attempts",label:(0,e.jsx)(r.FormattedMessage,{id:"max_attempts"}),tooltip:(0,e.jsx)(r.FormattedMessage,{id:"max_attempts"}),placeholder:g.formatMessage({id:"max_attempts",defaultMessage:"max_attempts"})}),(0,e.jsx)(ge.Z,{name:"max_execution_time",label:(0,e.jsx)(r.FormattedMessage,{id:"max_execution_time"}),tooltip:(0,e.jsx)(r.FormattedMessage,{id:"max_execution_time"}),placeholder:g.formatMessage({id:"max_execution_time",defaultMessage:"max_execution_time"})})]})}),(0,e.jsx)(Pe.Z,{}),(0,e.jsx)(De.i,{questions:z.questions,quizId:z.id,onAdded:i,onEdited:i,onRemoved:i,tableHeader:(0,e.jsx)(r.FormattedMessage,{id:"questions"}),tableLoading:K,questionsCategory:{type:"question"},customToolbarElements:[(0,e.jsxs)(he.ZP,{type:"primary",icon:(0,e.jsx)(Te.Z,{}),onClick:n,children:[" ",(0,e.jsx)(r.FormattedMessage,{id:"exportQuestionsByCategory"})]},"export_by_category")]})]})]}):(0,e.jsx)(I.Z,{})},Oe=a(13769),Ce=a.n(Oe),Re=a(5966),$e=a(64317),je=a(52688),Ne=a(90672),t=a(2453),L=a(86273),J=a(23535),te=a(44167),ae=a(19411),B=a(21711),re=a(31472),ne=["authors","category"],X=Object.values(re.Fh).map(function(D){return{value:D,label:(0,e.jsx)(r.FormattedMessage,{id:"CompetencyChallenges.types.".concat(D)})}}),be=function(){var v=(0,ee.O)(),l=v.competencyChallenge,F=v.categoryDepths,f=v.refreshData,M=(0,r.useParams)(),Z=Number(M.id),$=(0,r.useIntl)(),N=A.ZP.useForm(),K=Q()(N,1),p=K[0],w=A.ZP.useWatch("type",p),E=Number.isNaN(Z),z=(0,b.useMemo)(function(){if(!(l!=null&&l.data))return{};var n=l==null?void 0:l.data,i=n.authors,d=n.category,o=Ce()(n,ne);return W()(W()({},o),{},{authors:i.map(function(u){var m=u.id;return m}),category_id:d==null?void 0:d.id})},[l==null?void 0:l.data]),s=(0,b.useCallback)(function(){var n=O()(V()().mark(function i(d){var o,u,m,C,j,c,G,U;return V()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return o=d.name,u=d.type,m=d.is_active,C=m===void 0?!1:m,j=d.is_highlighted,c=j===void 0?!1:j,G=d.category_id,S.prev=1,S.next=4,(0,B.v8)({name:o,is_active:C,is_highlighted:c,type:u,category_id:G});case 4:if(U=S.sent,U.success){S.next=8;break}return t.ZP.error(U.message),S.abrupt("return");case 8:return t.ZP.success($.formatMessage({id:U.message})),r.history.push("/competency-challenges/".concat(U.data.id,"/main")),S.next=12,f();case 12:S.next=17;break;case 14:S.prev=14,S.t0=S.catch(1),t.ZP.error($.formatMessage({id:"error"}));case 17:case"end":return S.stop()}},i,null,[[1,14]])}));return function(i){return n.apply(this,arguments)}}(),[]),g=(0,b.useCallback)(function(){var n=O()(V()().mark(function i(d){var o,u,m,C;return V()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,o=p.getFieldsValue(["image_url","image_path"]),u=o.image_url,m=o.image_path,c.next=4,(0,B.dA)(Z,W()(W()({},d),{},{image_url:u,image_path:m}));case 4:if(C=c.sent,C.success){c.next=8;break}return t.ZP.error(C.message),c.abrupt("return");case 8:return t.ZP.success($.formatMessage({id:C.message})),c.next=11,f();case 11:c.next=16;break;case 13:c.prev=13,c.t0=c.catch(0),t.ZP.error($.formatMessage({id:"error"}));case 16:case"end":return c.stop()}},i,null,[[0,13]])}));return function(i){return n.apply(this,arguments)}}(),[Z]);return(0,e.jsxs)(A.ZP,{form:p,initialValues:z,onFinish:E?s:g,onValuesChange:function(i){(i==null?void 0:i.type)==="complex"&&p.setFieldValue("category",null)},children:[(0,e.jsxs)(A.ZP.Group,{title:(0,e.jsx)(r.FormattedMessage,{id:"CompetencyChallenges.base"}),children:[(0,e.jsx)(Re.Z,{width:"md",name:"name",label:(0,e.jsx)(r.FormattedMessage,{id:"name"}),placeholder:$.formatMessage({id:"name"}),required:!0,rules:[{required:!0,message:$.formatMessage({id:"field_required"})}]}),(0,e.jsx)($e.Z,{width:"md",name:"type",label:(0,e.jsx)(r.FormattedMessage,{id:"type"}),options:X,required:!0,rules:[{required:!0,message:$.formatMessage({id:"field_required"})}]}),w==="simple"&&(0,e.jsx)(A.ZP.Item,{name:"category_id",required:!0,label:(0,e.jsx)(r.FormattedMessage,{id:"category"}),rules:[{required:!0,message:$.formatMessage({id:"field_required"})}],children:(0,e.jsx)(L.Z,{enabledDepth:F.role})}),(0,e.jsx)(je.Z,{name:"is_active",label:(0,e.jsx)(r.FormattedMessage,{id:"is_active"})}),(0,e.jsx)(je.Z,{name:"is_highlighted",label:(0,e.jsx)(r.FormattedMessage,{id:"is_highlighted"}),tooltip:(0,e.jsx)(r.FormattedMessage,{id:"CompetencyChallenges.highlighted"})})]}),!E&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(A.ZP.Group,{title:(0,e.jsx)(r.FormattedMessage,{id:"CompetencyChallenges.additional"}),children:[(0,e.jsx)(A.ZP.Item,{name:"description",label:(0,e.jsx)(r.FormattedMessage,{id:"description"}),valuePropName:"value",style:{width:440},children:(0,e.jsx)(ae.ZP,{directory:"competency-challenges/".concat(Z)})}),(0,e.jsx)(Ne.Z,{width:"lg",name:"summary",label:(0,e.jsx)(r.FormattedMessage,{id:"summary"})}),(0,e.jsx)(A.ZP.Item,{name:"authors",label:(0,e.jsx)(r.FormattedMessage,{id:"author"}),style:{width:"100%",maxWidth:440},children:(0,e.jsx)(te.Z,{multiple:!0})})]}),(0,e.jsx)(J.Z,{wrapInForm:!1,folder:"/competency-challenges/".concat(Z),title:"image",action:"/api/admin/competency-challenges/".concat(Z,"?_method=PATCH"),src_name:"image_url",form_name:"image",getUploadedSrcField:function(i){return i.file.response.data.image_url},setPath:function(i){return p.setFieldsValue(i)}})]})]})},Fe=a(47389),oe=a(82061),de=a(88280),Y=a(83062),k=a(86738),ie=["scale_min","category_id"],R=[{title:(0,e.jsx)(r.FormattedMessage,{id:"ID"}),dataIndex:"id",editable:!1,render:function(v,l){if(typeof l.id!="string")return"-";var F=l.id.split("-"),f=Q()(F,2),M=f[0],Z=f[1];return M==="new"?"-":Z}},{title:(0,e.jsx)(r.FormattedMessage,{id:"min_points"}),dataIndex:"scale_min",valueType:"digit",formItemProps:{rules:[{required:!0,message:(0,e.jsx)(r.FormattedMessage,{id:"field_required"})},{type:"number",min:0,max:100,message:(0,e.jsx)(r.FormattedMessage,{id:"number_between",values:{min:0}})}]},fieldProps:{min:0}},{title:(0,e.jsx)(r.FormattedMessage,{id:"category"}),dataIndex:"category_id",render:function(v,l){return l.category_name},formItemProps:{rules:[{required:!0,message:(0,e.jsx)(r.FormattedMessage,{id:"field_required"})}]},renderFormItem:function(v,l,F){var f,M=((f=F.getFieldValue("table"))!==null&&f!==void 0?f:[]).map(function(Z){return Z.category_id});return(0,e.jsx)(pe.b,{disabledNodes:M})}}],we=function(v){return v.map(function(l){var F=l.id,f=l.scale_min,M=l.category;return{id:"old-".concat(F),scale_min:f,category_id:M.id,category_name:M.name_with_breadcrumbs}})},Se=function(){var v,l,F=(0,ee.O)(),f=F.competencyChallenge,M=F.refreshData,Z=(0,r.useParams)(),$=Number(Z.id),N=(v=f==null||(l=f.data)===null||l===void 0?void 0:l.scales)!==null&&v!==void 0?v:[],K=(0,b.useState)([]),p=Q()(K,2),w=p[0],E=p[1],z=(0,r.useIntl)(),s=(0,b.useRef)(),g=(0,b.useRef)(),n=(0,b.useRef)(),i=(0,b.useMemo)(function(){return we(N)},[N]),d=(0,b.useMemo)(function(){return[].concat(R,[{valueType:"option",title:(0,e.jsx)(r.FormattedMessage,{id:"options"}),render:function(u,m,C,j){return[(0,e.jsx)(Y.Z,{title:(0,e.jsx)(r.FormattedMessage,{id:"edit",defaultMessage:"edit"}),children:(0,e.jsx)(he.ZP,{type:"primary",icon:(0,e.jsx)(Fe.Z,{}),onClick:function(){return j==null?void 0:j.startEditable(m.id)}})},"edit"),(0,e.jsx)(k.Z,{title:(0,e.jsx)(r.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:O()(V()().mark(function c(){var G,U,ue,S,ce,me,Ze,Me;return V()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(typeof m.id=="string"){y.next=2;break}return y.abrupt("return");case 2:if(G=m.id.split("-"),U=Q()(G,2),ue=U[0],S=U[1],ue!=="new"){y.next=7;break}return Ze=(ce=s.current)===null||ce===void 0?void 0:ce.getFieldValue("table"),(me=s.current)===null||me===void 0||me.setFieldValue("table",Ze.filter(function(Be){var Ke=Be.id;return Ke!==m.id})),y.abrupt("return");case 7:return y.next=9,(0,B.sm)(+S);case 9:if(Me=y.sent,!Me.success){y.next=13;break}return y.next=13,M();case 13:case"end":return y.stop()}},c)})),okText:(0,e.jsx)(r.FormattedMessage,{id:"ok"}),cancelText:(0,e.jsx)(r.FormattedMessage,{id:"cancel"}),children:(0,e.jsx)(Y.Z,{title:(0,e.jsx)(r.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,e.jsx)(he.ZP,{type:"primary",icon:(0,e.jsx)(oe.Z,{}),danger:!0})})},"delete")]}}])},[]);return(0,e.jsx)(A.ZP,{formRef:s,initialValues:{table:i},submitter:!1,children:(0,e.jsx)(de.Z,{rowKey:function(u){return u.id},editableFormRef:g,controlled:!0,actionRef:n,name:"table",columns:d,recordCreatorProps:{creatorButtonText:(0,e.jsx)(r.FormattedMessage,{id:"CompetencyChallenges.addNewRow"}),disabled:w.length>0,record:function(u){return{id:"new-".concat(u)}}},editable:{onlyOneLineEditorAlertMessage:z.formatMessage({id:"CompetencyChallenges.onlyOneRowIsEditable"}),onSave:function(){var o=O()(V()().mark(function m(C,j){var c,G,U,ue,S,ce,me,Ze,Me;return V()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(c=j.scale_min,G=j.category_id,U=Ce()(j,ie),typeof U.id=="string"){y.next=3;break}return y.abrupt("return");case 3:if(ue=U.id.split("-"),S=Q()(ue,2),ce=S[0],me=S[1],ce!=="new"){y.next=12;break}return y.next=7,(0,B.Qd)({scale_min:c,category_id:G,competency_challenge_id:$});case 7:if(Ze=y.sent,!Ze.success){y.next=11;break}return y.next=11,M();case 11:return y.abrupt("return");case 12:return y.next=14,(0,B.U_)(+me,{scale_min:c,category_id:G,competency_challenge_id:$});case 14:if(Me=y.sent,!Me.success){y.next=18;break}return y.next=18,M();case 18:return y.abrupt("return");case 19:case"end":return y.stop()}},m)}));function u(m,C){return o.apply(this,arguments)}return u}(),deletePopconfirmMessage:(0,e.jsx)(r.FormattedMessage,{id:"deleteQuestion"}),actionRender:function(u,m,C){if(typeof u.id!="string")return[];var j=u.id.split("-"),c=Q()(j,1),G=c[0];return G==="new"?[C.save,C.delete]:[C.save,C.cancel]},type:"single",editableKeys:w,onChange:E}})})},x=function(){var v,l=(0,ee.O)(),F=l.competencyChallenge,f=(0,r.useIntl)(),M=(0,r.useParams)(),Z=M.id,$=M.tab,N=$===void 0?"main":$,K=Z==="new",p=(0,b.useMemo)(function(){var w;return K?f.formatMessage({id:"CompetencyChallenges.new_challenge"}):(w=F.data)!==null&&w!==void 0&&w.name?F.data.name:f.formatMessage({id:"menu.Competency challenges"})},[f,(v=F.data)===null||v===void 0?void 0:v.name]);return(0,e.jsx)(fe._z,{title:p,header:{breadcrumb:{items:[{path:"competency-challenges",breadcrumbName:f.formatMessage({id:"menu.Competency challenges"})},{path:String(Z),breadcrumbName:p},{path:N,breadcrumbName:f.formatMessage({id:"CompetencyChallenges.".concat(N)})}]}},children:(0,e.jsxs)(_.ZP,{bodyStyle:{padding:"24px"},tabs:{type:"card",cardProps:{loading:F.loading&&(0,e.jsx)(I.Z,{})},activeKey:N,onChange:function(E){r.history.push("/competency-challenges/".concat(Z,"/").concat(E))}},children:[(0,e.jsx)(_.ZP.TabPane,{tab:(0,e.jsx)(r.FormattedMessage,{id:"CompetencyChallenges.main"}),children:(0,e.jsx)(be,{})},"main"),(0,e.jsx)(_.ZP.TabPane,{tab:(0,e.jsx)(r.FormattedMessage,{id:"CompetencyChallenges.scales"}),disabled:K,children:(0,e.jsx)(Se,{})},"scales"),(0,e.jsx)(_.ZP.TabPane,{tab:(0,e.jsx)(r.FormattedMessage,{id:"CompetencyChallenges.diagnostic-test"}),disabled:K,children:(0,e.jsx)(Ee,{})},"diagnostic-test")]})})},ze=function(){return(0,e.jsx)(ee.F,{children:(0,e.jsx)(x,{})})},q=ze},64599:function(le,ve,a){var _=a(96263);function fe(I,b){var r=typeof Symbol!="undefined"&&I[Symbol.iterator]||I["@@iterator"];if(!r){if(Array.isArray(I)||(r=_(I))||b&&I&&typeof I.length=="number"){r&&(I=r);var h=0,V=function(){};return{s:V,n:function(){return h>=I.length?{done:!0}:{done:!1,value:I[h++]}},e:function(H){throw H},f:V}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var P=!0,W=!1,se;return{s:function(){r=r.call(I)},n:function(){var H=r.next();return P=H.done,H},e:function(H){W=!0,se=H},f:function(){try{!P&&r.return!=null&&r.return()}finally{if(W)throw se}}}}le.exports=fe,le.exports.__esModule=!0,le.exports.default=le.exports}}]);
