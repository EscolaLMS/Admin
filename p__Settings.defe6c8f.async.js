(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"5qq5":function(he,Q,e){"use strict";var be=e("7Kak"),ie=e("9yH6"),K=e("VTBJ"),ue=e("Ff2n"),W=e("nKUr"),h=e.n(W),H=e("uX+g"),U=e("q1tI"),r=e.n(U),m=e("WFLz"),j=e("adzw"),F=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],te=r.a.forwardRef(function(o,R){var G=o.fieldProps,P=o.options,de=o.radioType,C=o.layout,B=o.proFieldProps,Oe=o.valueEnum,z=Object(ue.a)(o,F);return Object(W.jsx)(j.a,Object(K.a)(Object(K.a)({valueType:de==="button"?"radioButton":"radio",ref:R,valueEnum:Object(H.a)(Oe,void 0)},z),{},{fieldProps:Object(K.a)({options:P,layout:C},G),proFieldProps:B,filedConfig:{customLightMode:!0}}))}),ae=r.a.forwardRef(function(o,R){var G=o.fieldProps,P=o.children;return Object(W.jsx)(ie.a,Object(K.a)(Object(K.a)({},G),{},{ref:R,children:P}))}),X=Object(m.a)(ae,{valuePropName:"checked",ignoreWidth:!0}),x=X;x.Group=te,x.Button=ie.a.Button,x.displayName="ProFormComponent",Q.a=x},FJDo:function(he,Q,e){"use strict";var be=e("VTBJ"),ie=e("Ff2n"),K=e("nKUr"),ue=e.n(K),W=e("q1tI"),h=e.n(W),H=e("adzw"),U=["fieldProps","min","proFieldProps","max"],r=function(j,F){var te=j.fieldProps,ae=j.min,X=j.proFieldProps,x=j.max,o=Object(ie.a)(j,U);return Object(K.jsx)(H.a,Object(be.a)({valueType:"digit",fieldProps:Object(be.a)({min:ae,max:x},te),ref:F,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:X},o))};Q.a=h.a.forwardRef(r)},HEzf:function(he,Q,e){"use strict";var be=e("EFp3"),ie=e("O/iA"),K=e("OaEy"),ue=e("wx14"),W=e("U8pU"),h=e("ODXe"),H=e("TSYQ"),U=e.n(H),r=e("Zm9Q"),m=e("bT9E"),j=e("q1tI"),F=e.n(j),te=e("H84U"),ae=e("2fM7"),X=e("0n0R"),x=ae.a.Option;function o(y){return y&&y.type&&(y.type.isSelectOption||y.type.isSelectOptGroup)}var R=function(b,je){var me=b.prefixCls,w=b.className,v=b.popupClassName,c=b.dropdownClassName,d=b.children,A=b.dataSource,J=Object(r.a)(d),E;if(J.length===1&&Object(X.c)(J[0])&&!o(J[0])){var $=Object(h.a)(J,1);E=$[0]}var ce=E?function(){return E}:void 0,Te;return J.length&&o(J[0])?Te=d:Te=A?A.map(function(re){if(Object(X.c)(re))return re;switch(Object(W.a)(re)){case"string":return j.createElement(x,{key:re,value:re},re);case"object":{var Y=re.value;return j.createElement(x,{key:Y,value:Y},re.text)}default:return}}):[],j.createElement(te.a,null,function(re){var Y=re.getPrefixCls,fe=Y("select",me);return j.createElement(ae.a,Object(ue.a)({ref:je},Object(m.a)(b,["dataSource"]),{prefixCls:fe,popupClassName:v||c,className:U()("".concat(fe,"-auto-complete"),w),mode:ae.a.SECRET_COMBOBOX_MODE_DO_NOT_USE},{getInputElement:ce}),Te)})},G=j.forwardRef(R);G.Option=x;var P=G,de=e("y8nQ"),C=e("Vl3Y"),B=e("+L6B"),Oe=e("2/Rp"),z=e("5NDa"),i=e("5rEg"),ye=e("tJVT"),D=e("VMEa"),Fe=e("rmhi"),Ee=e("Qurx"),Ce=e("F/zT"),t=e("5qq5"),Ie=e("BiO0"),Ae=e("tneF"),Le=e("FJDo"),Z=e("9kvl"),Re=e("+up7"),Me=e("hd5d"),Be=e("3fxf"),f=e("ovOe"),T=e.n(f),S=e("bRQS"),_=e("4i/N"),a=e("nKUr"),le=function(b){var je=b.value,me=b.onChange,w=b.type,v=w===void 0?"file":w,c=Object(j.useState)(!1),d=Object(ye.a)(c,2),A=d[0],J=d[1];return Object(a.jsxs)(F.a.Fragment,{children:[Object(a.jsxs)(D.a.Group,{children:[Object(a.jsx)(i.a,{value:je,readOnly:!0}),Object(a.jsxs)(Oe.a,{size:"small",type:"primary",onClick:function(){return J(!A)},children:["toggle ",v," browser"]})]}),A&&Object(a.jsx)(Be.a,{onFile:function($,ce){return me&&me("".concat(ce,"/").concat($.name))}})]})},N=function(b){var je=Object(Z.l)(),me=b.visible,w=b.onVisibleChange,v=b.onFinish,c=b.id,d=b.initialData,A=b.groups,J=C.a.useForm(),E=Object(ye.a)(J,1),$=E[0],ce=!c||c===-1,Te=Object(j.useState)("text"),re=Object(ye.a)(Te,2),Y=re[0],fe=re[1],Se=Object(j.useCallback)(function(){return!!($.getFieldValue("group")==="global"||d)},[$,d]),Ke=Object(j.useState)(""),g=Object(ye.a)(Ke,2),s=g[0],n=g[1];Object(j.useEffect)(function(){if(typeof c=="object"){var l;$.setFieldsValue(c),fe((l=c.type)!==null&&l!==void 0?l:"text")}else c&&c!==-1?Object(Re.e)(Number(c)).then(function(p){p.success&&($.setFieldsValue(p.data),fe(p.data.type),n(p.data.group))}):($.resetFields(),fe("text"))},[c,$,d]);var u=Object(j.useCallback)(function(l){l.type&&l.type!==Y&&fe(l.type)},[Y]);return Object(a.jsxs)(Fe.a,{form:$,title:je.formatMessage({id:c?"editSetting":"newSetting",defaultMessage:c?"editSetting":"newSetting"}),width:"60vw",visible:!!me,onVisibleChange:w,onFinish:v,onValuesChange:u,children:[Object(a.jsxs)(D.a.Group,{children:[d?Object(a.jsx)(Ee.a,{label:Object(a.jsx)(Z.a,{id:"group",defaultMessage:"group"}),rules:[{required:!0}],width:"md",name:"group",disabled:Se()}):Object(a.jsx)(D.a.Item,{label:Object(a.jsx)(Z.a,{id:"group",defaultMessage:"group"}),name:"group",children:Object(a.jsx)(P,{style:{width:"300px"},autoFocus:!0,value:s,onChange:function(p){return n(p)},filterOption:function(p,O){var L;return(O==null||(L=O.children)===null||L===void 0?void 0:L.toString().toLowerCase().indexOf(p.toLowerCase()))!==-1},children:A.map(function(l){return Object(a.jsx)(P.Option,{value:l,children:l},l)})})}),Object(a.jsx)(Ee.a,{label:Object(a.jsx)(Z.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key",disabled:Se()})]}),Object(a.jsxs)(D.a.Group,{children:[Object(a.jsx)(Ce.a,{name:"enumerable",disabled:Se(),label:Object(a.jsx)(Z.a,{id:"enumerable",defaultMessage:"enumerable"})}),Object(a.jsx)(Ce.a,{name:"public",disabled:Se(),label:Object(a.jsx)(Z.a,{id:"public",defaultMessage:"public"})})]}),Object(a.jsx)(D.a.Group,{children:Object(a.jsx)(t.a.Group,{disabled:!!(!ce||d),name:"type",label:Object(a.jsx)(Z.a,{id:"type"}),options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"},{label:"json",value:"json"},{label:"file",value:"file"},{label:"image",value:"image"},{label:"boolean",value:"boolean"},{label:"number",value:"number"},{label:"array",value:"array"}]})}),Object(a.jsxs)("div",{children:[Y==="text"&&Object(a.jsx)(Ee.a,{width:"lg",name:"value",label:Object(a.jsx)(Z.a,{id:"value"})}),Y==="json"&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Ie.a,{width:"lg",name:"value",label:Object(a.jsx)(Z.a,{id:"value"}),tooltip:"".concat(je.formatMessage({id:"example_json"}),': {"name":"John", "age":30, "city":["New York","Warsaw"]}')}),Object(a.jsx)(D.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(a.jsx)(T.a,{src:JSON.parse($.getFieldValue("value"))})}catch(p){return Object(a.jsx)(T.a,{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]}),(Y==="file"||Y==="image")&&Object(a.jsx)(D.a.Item,{name:"value",label:"value",tooltip:"select file from current repository or upload new one",valuePropName:"value",children:Object(a.jsx)(le,{type:Y})}),Y==="markdown"&&Object(a.jsx)(D.a.Item,{name:"value",label:"value",tooltip:"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.",valuePropName:"value",children:Object(a.jsx)(Me.a,{directory:"settings/wysiwyg"})}),Y==="boolean"?Object(a.jsx)(Ce.a,{name:"data",label:Object(a.jsx)(Z.a,{id:"value"}),checkedChildren:Object(a.jsx)(S.a,{}),unCheckedChildren:Object(a.jsx)(_.a,{})}):Object(a.jsx)(D.a.Item,{noStyle:!0,hidden:!0,children:Object(a.jsx)(Ae.a,{name:"data",valuePropName:"data"})}),Y==="number"&&Object(a.jsx)(Le.a,{name:"data",label:Object(a.jsx)(Z.a,{id:"value"})}),Y==="array"&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Ie.a,{width:"lg",name:"value",label:Object(a.jsx)(Z.a,{id:"value"}),tooltip:"".concat(je.formatMessage({id:"example_json"}),": ['tutor', 'student']")}),Object(a.jsx)(D.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(a.jsx)(T.a,{src:JSON.parse($.getFieldValue("value"))})}catch(p){return Object(a.jsx)(T.a,{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]})]})]})},De=Q.a=N},"O/iA":function(he,Q,e){},YjuE:function(he,Q,e){"use strict";e.r(Q);var be=e("fOrg"),ie=e("+KLJ"),K=e("T2oS"),ue=e("W9HT"),W=e("tJVT"),h=e("q1tI"),H=e.n(h),U=e("Ty5D"),r=e("9kvl"),m=e("nhC9"),j=e("tMyG"),F=e("+up7"),te=e("P2fV"),ae=e("NJEC"),X=e("5Dmo"),x=e("3S7+"),o=e("+L6B"),R=e("2/Rp"),G=e("+BJd"),P=e("mr32"),de=e("jrin"),C=e("qLMh"),B=e("k1fw"),Oe=e("miYZ"),z=e("tsqr"),i=e("9og8"),ye=e("xvlK"),D=e("Qiat"),Fe=e("HEzf"),Ee=e("G3dp"),Ce=e("/MfK"),t=e("nKUr"),Ie=function(){var g=Object(i.a)(Object(C.a)().mark(function s(n,u,l){var p;return Object(C.a)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return p=z.b.loading(n.formatMessage({id:"loading"})),L.prev=1,L.next=4,l&&l!==-1?Object(F.i)(l,Object(B.a)({},u)):Object(F.b)(Object(B.a)({},u));case 4:return p(),z.b.success(n.formatMessage({id:"success"})),L.abrupt("return",!0);case 9:return L.prev=9,L.t0=L.catch(1),p(),z.b.error(n.formatMessage({id:"error"})),L.abrupt("return",!1);case 14:case"end":return L.stop()}},s,null,[[1,9]])}));return function(n,u,l){return g.apply(this,arguments)}}(),Ae=function(){var g=Object(i.a)(Object(C.a)().mark(function s(n,u){var l;return Object(C.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return l=z.b.loading(n.formatMessage({id:"loading"})),O.prev=1,O.next=4,Object(F.c)(u);case 4:return l(),z.b.success(n.formatMessage({id:"success"})),O.abrupt("return",!0);case 9:return O.prev=9,O.t0=O.catch(1),l(),z.b.error(n.formatMessage({id:"error"})),O.abrupt("return",!1);case 14:case"end":return O.stop()}},s,null,[[1,9]])}));return function(n,u){return g.apply(this,arguments)}}(),Le=function(){var s=Object(h.useState)(!1),n=Object(W.a)(s,2),u=n[0],l=n[1],p=Object(h.useState)([]),O=Object(W.a)(p,2),L=O[0],ve=O[1],k=Object(h.useRef)(),q=Object(r.l)(),ne=Object(r.m)("@@initialState"),M=ne.setInitialState;Object(h.useEffect)(function(){Object(F.f)().then(function(I){I.success&&ve(I.data.filter(function(V){return V!=="global"}))})},[]);var oe=[{title:Object(t.jsx)(r.a,{id:"group",defaultMessage:"group"}),dataIndex:"group",hideInSearch:!1,key:"group",valueType:"select",width:100,valueEnum:L.sort().reduce(function(I,V){return Object(B.a)(Object(B.a)({},I),{},Object(de.a)({},V,V))},{})},{title:Object(t.jsx)(r.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(r.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(t.jsx)(r.a,{id:"enumerable",defaultMessage:"enumerable"}),dataIndex:"enumerable",hideInForm:!0,hideInSearch:!0,render:function(V,ee){return Object(t.jsx)(P.a,{color:ee.enumerable?"success":"error",children:Object(t.jsx)(r.a,{id:ee.enumerable?"true":"false",defaultMessage:ee.enumerable?"true":"false"})})}},{title:Object(t.jsx)(r.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(V,ee){return Object(t.jsx)(P.a,{color:ee.public?"success":"error",children:Object(t.jsx)(r.a,{id:ee.public?"true":"false",defaultMessage:ee.public?"true":"false"})})}},{hideInSearch:!0,title:Object(t.jsx)(r.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(V,ee){return[Object(t.jsx)(x.a,{title:Object(t.jsx)(r.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(R.a,{type:"primary",icon:Object(t.jsx)(Ee.a,{}),onClick:function(){return l(ee.id)}})},"edit"),Object(t.jsx)(ae.a,{title:Object(t.jsx)(r.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(i.a)(Object(C.a)().mark(function se(){var ge;return Object(C.a)().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,Ae(q,ee.id);case 2:ge=Pe.sent,ge&&(l(!1),k.current&&k.current.reload());case 4:case"end":return Pe.stop()}},se)})),okText:Object(t.jsx)(r.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(r.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(x.a,{title:Object(t.jsx)(r.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(R.a,{type:"primary",icon:Object(t.jsx)(Ce.a,{}),danger:!0})})},"delete")]}}];return Object(t.jsxs)(H.a.Fragment,{children:[Object(t.jsx)(D.a,{headerTitle:q.formatMessage({id:"menu.settings"}),actionRef:k,rowKey:"id",search:{layout:"vertical"},toolBarRender:function(){return[Object(t.jsxs)(R.a,{type:"primary",onClick:function(){l(-1)},children:[Object(t.jsx)(ye.a,{})," ",Object(t.jsx)(r.a,{id:"pages.searchTable.new"})]},"primary")]},request:function(V){var ee=V.pageSize,se=V.current,ge=V.group;return Object(F.g)({per_page:ee,current:se,group:ge}).then(function(xe){return xe.success?{data:xe.data.filter(function(Pe){return Pe.group!=="global"}),total:xe.meta.total,success:!0}:[]})},columns:oe}),Object(t.jsx)(Fe.a,{groups:L,id:u,visible:Number.isInteger(u),onVisibleChange:function(V){return!V&&l(!1)},onFinish:function(){var I=Object(i.a)(Object(C.a)().mark(function V(ee){var se,ge,xe;return Object(C.a)().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return se=ee,pe.next=3,Ie(q,se,Number(u));case 3:if(ge=pe.sent,!ge){pe.next=12;break}if(l(!1),k.current&&k.current.reload(),se.group!=="global"){pe.next=12;break}return pe.next=10,Object(F.g)({current:1,per_page:100,group:"global"});case 10:xe=pe.sent,M(function(Ue){return Object(B.a)(Object(B.a)({},Ue),{},{config:xe.success?xe.data:Ue==null?void 0:Ue.config})});case 12:case"end":return pe.stop()}},V)}));return function(V){return I.apply(this,arguments)}}()})]})},Z=Le,Re=e("oBTY"),Me=e("y8nQ"),Be=e("Vl3Y"),f=e("tU7J"),T=e("wFql"),S=e("rmhi"),_=e("VMEa"),a=e("F/zT"),le=e("BiO0"),N=e("ovOe"),De=e.n(N),y=e("Fghh"),b=e("Qurx"),je=function(s){var n=s.field,u=s.name;return n!=null&&n.includes("boolean")?Object(t.jsx)(a.a,{name:u,checkedChildren:Object(t.jsx)(y.a,{id:"true"}),unCheckedChildren:Object(t.jsx)(y.a,{id:"false"})}):Object(t.jsx)(b.a,{width:"lg",name:u})},me=je,w=T.a.Text,v;(function(g){g.Array="array",g.String="string"})(v||(v={}));var c=function(s,n){return n===v.Array?s&&Array.isArray(s)?JSON.stringify(s):"[]":s},d=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;if(n===v.Array){var u=JSON.parse(s);return u&&Array.isArray(u)?u:[]}return s},A=function(s){var n=Object(y.k)(),u=s.visible,l=s.onVisibleChange,p=s.onFinish,O=s.value,L=Be.a.useForm(),ve=Object(W.a)(L,1),k=ve[0],q=Object(h.useMemo)(function(){return(O.rules||[]).includes(v.Array)?v.Array:v.String},[O.rules]);return Object(h.useEffect)(function(){k.setFieldsValue(Object(B.a)(Object(B.a)({},O),{},{value:c(O.value,q)}))},[q,O,k]),Object(t.jsxs)(S.a,{form:k,title:O.full_key,width:"60vw",visible:u,onVisibleChange:l,onFinish:Object(i.a)(Object(C.a)().mark(function ne(){var M;return Object(C.a)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,Object(F.h)({key:O.full_key,value:d(k.getFieldsValue().value,q)});case 2:if(M=I.sent,!M.success){I.next=6;break}return p(M.success===!0),I.abrupt("return",M.success);case 6:return I.abrupt("return");case 7:case"end":return I.stop()}},ne)})),children:[Object(t.jsxs)(_.a.Group,{children:[Object(t.jsx)(a.a,{disabled:!0,name:"public",label:Object(t.jsx)(r.a,{id:"public",defaultMessage:"public"})}),Object(t.jsx)(a.a,{disabled:!0,name:"readonly",label:Object(t.jsx)(r.a,{id:"readonly",defaultMessage:"readonly"})}),Object(t.jsx)(_.a.Item,{shouldUpdate:!0,label:Object(t.jsx)(r.a,{id:"rules",defaultMessage:"rules"}),children:function(){return Object(t.jsx)(w,{code:!0,children:JSON.stringify(k.getFieldValue("rules"))})}})]}),q===v.Array?Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(le.a,{width:"lg",name:"value",label:Object(t.jsx)(r.a,{id:"value"}),tooltip:"".concat(n.formatMessage({id:"example_json"}),': ["first_field_name", "second_field_name"]')}),Object(t.jsx)(_.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(De.a,{src:JSON.parse(k.getFieldValue("value"))})}catch(M){return Object(t.jsx)(De.a,{src:JSON.parse('{ "error": "cannot parse this array" }')})}}})]}):Object(t.jsx)(t.Fragment,{children:Object(t.jsx)(_.a.Item,{shouldUpdate:!0,label:Object(t.jsx)(r.a,{id:"value"}),children:function(){return Object(t.jsx)(me,{field:k.getFieldValue("rules"),name:"value"})}})})]})},J=A,E=e("c+yx"),$=[{title:Object(t.jsx)(r.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!1,sorter:!0},{title:Object(t.jsx)(r.a,{id:"readonly",defaultMessage:"readonly"}),dataIndex:"readonly",hideInForm:!0,hideInSearch:!0,sorter:!0,render:function(s,n){return Object(t.jsx)(P.a,{color:n.readonly?"success":"error",children:Object(t.jsx)(r.a,{id:n.readonly?"true":"false",defaultMessage:n.readonly?"true":"false"})})}},{title:Object(t.jsx)(r.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,sorter:!0,render:function(s,n){return Object(t.jsx)(P.a,{color:n.public?"success":"error",children:Object(t.jsx)(r.a,{id:n.public?"true":"false",defaultMessage:n.public?"true":"false"})})}},{title:Object(t.jsx)(r.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0,render:function(s,n){return typeof n.value=="boolean"?Object(t.jsx)(P.a,{color:n.value?"success":"error",children:Object(t.jsx)(r.a,{id:n.value?"true":"false",defaultMessage:n.value?"true":"false"})}):Array.isArray(n.value)?n.value.map(function(u){return typeof u=="object"?H.a.Children.toArray(Object(t.jsx)("p",{children:Object.keys(u).map(function(l){return"".concat(l,": ").concat(u[l])}).join(", ")})):u}):n.value}}],ce=function g(s,n){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return!s||typeof s!="object"?!1:(Object.keys(s).forEach(function(l){var p=s[l];l===n?u.push(s):typeof p=="object"&&g(p,n,u)}),u)},Te=function(s){var n=s.packageName,u=s.values,l=s.onValueUpdated,p=Object(r.l)(),O=Object(h.useState)(),L=Object(W.a)(O,2),ve=L[0],k=L[1],q=Object(h.useMemo)(function(){var ne=u[n];return ce(ne,"rules")},[u,n]);return Object(t.jsxs)(H.a.Fragment,{children:[Object(t.jsx)(D.a,{headerTitle:p.formatMessage({id:"menu.settings"}),rowKey:"key",search:{layout:"vertical"},columns:[].concat($,[{hideInSearch:!0,title:Object(t.jsx)(r.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(M,oe){return[Object(t.jsx)(x.a,{title:Object(t.jsx)(r.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(R.a,{type:"primary",icon:Object(t.jsx)(Ee.a,{}),onClick:function(){return k(oe)}})},"edit")]}}]),request:function(M,oe){var I=M.key,V=oe&&Object.entries(oe)[0];return new Promise(function(ee){var se=q?Object(Re.a)(q):[];I&&(se=se.filter(function(ge){return ge.key.toLowerCase().includes(I.toLowerCase())})),V&&(se=Object(E.i)(se,V[0],V[1]!=="ascend")),ee({data:se,success:!0,total:se.length})})}}),ve&&Object(t.jsx)(J,{value:ve,visible:ve!==void 0,onVisibleChange:function(M){return M===!1&&k(void 0)},onFinish:Object(i.a)(Object(C.a)().mark(function ne(){return Object(C.a)().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:l();case 1:case"end":return oe.stop()}},ne)}))})]})},re=Te,Y=e("t4ZK");function fe(g){var s=g.replaceAll("escolalms",""),n=s.split("_"),u=n.map(function(l){return l.charAt(0).toUpperCase()+l.slice(1)});return u.join(" ")}function Se(g,s){var n=["global_settings","user_settings"];return n.includes(g)?s.formatMessage({id:String(g)}):s.formatMessage({id:"Settings.package"},{package:fe(g)})}var Ke=Q.default=function(){var g=Object(U.l)(),s=Object(r.l)(),n=g.tab,u=n===void 0?"user_settings":n,l=Object(h.useState)(),p=Object(W.a)(l,2),O=p[0],L=p[1],ve=Object(h.useCallback)(function(){Object(F.a)().then(function(M){M.success&&L(M.data)})},[]),k=Object(r.m)("@@initialState"),q=k.initialState,ne=Object(h.useCallback)(function(){var M;return(q==null||(M=q.config)===null||M===void 0?void 0:M.length)!==0},[q]);return Object(h.useEffect)(function(){ve()},[]),O?Object(t.jsxs)(j.a,{title:Se(u,s),header:{breadcrumb:{routes:[{path:"settings",breadcrumbName:s.formatMessage({id:"menu.Configuration.settings"})},{path:String(u),breadcrumbName:Se(u,s)}]}},children:[!ne()&&Object(t.jsx)(ie.a,{message:Object(t.jsx)(r.a,{id:"global_settings_alert_title",defaultMessage:"Add global settings"}),description:Object(t.jsx)(r.a,{id:"global_settings_alert_description",defaultMessage:"Global settings are used to configure the entire LMS. You can add global settings by clicking the button below."}),type:"warning",showIcon:!0,style:{marginBottom:"20px"}}),Object(t.jsxs)(m.a,{tabs:{type:"card",activeKey:u,onChange:function(oe){return r.f.push("/configuration/settings/".concat(oe))}},children:[Object(t.jsx)(m.a.TabPane,{tab:Object(t.jsx)(r.a,{id:"user.settings"}),children:Object(t.jsx)(Z,{})},"user_settings"),Object(t.jsx)(m.a.TabPane,{tab:Object(t.jsx)(r.a,{id:"global_settings"}),children:Object(t.jsx)(Y.a,{})},"global_settings"),Object.keys(O).map(function(M){return Object(t.jsxs)(m.a.TabPane,{tab:Object(t.jsx)("span",{children:Object(t.jsx)(r.a,{id:"Settings.package",values:{package:fe(M)}})}),children:[Object(t.jsx)(re,{values:O,packageName:M,onValueUpdated:function(){return ve()}}),M]},M)})]})]}):Object(t.jsx)(ue.a,{})}},hd5d:function(he,Q,e){"use strict";var be=e("qLMh"),ie=e("9og8"),K=e("q1tI"),ue=e.n(K),W=e("acco"),h=e.n(W),H=e("BAh9"),U=e("vtG9"),r=e.n(U),m=e("9kvl"),j=e("nKUr"),F=e.n(j),te=function(x){var o=x.attrs,R=o.href,G=R.split("/").pop();return Object(j.jsx)("p",{children:Object(j.jsx)("a",{rel:"noreferrer",href:R,target:"_blank",children:G})})},ae=function(x){var o=x.value,R=x.onChange,G=x.directory,P=G===void 0?"/wysiwyg":G,de=Object(m.l)();return Object(j.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(j.jsx)(h.a,{excludeBlockMenuItems:["Sketch"],embeds:[{matcher:function(B){return!0},component:te}],uploadImage:function(){var C=Object(ie.a)(Object(be.a)().mark(function B(Oe){var z,i;return Object(be.a)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,Object(H.e)(Oe,P);case 2:if(z=D.sent,!z.success){D.next=8;break}if(!Oe.type.includes("image/")){D.next=7;break}return i=z.data[0].name.includes("/")?z.data[0].name:"".concat(P).concat(z.data[0].name),D.abrupt("return",Object(H.d)(i,1e3));case 7:return D.abrupt("return",z.data[0].url);case 8:throw new Error("Error while uploading");case 9:case"end":return D.stop()}},B)}));return function(B){return C.apply(this,arguments)}}(),defaultValue:o||"",onChange:function(B){return R&&R(B())},placeholder:de.formatMessage({id:"wysiwyg_placeholder"})})})};Q.a=ae},t4ZK:function(he,Q,e){"use strict";e.d(Q,"b",function(){return Z});var be=e("P2fV"),ie=e("NJEC"),K=e("+L6B"),ue=e("2/Rp"),W=e("5Dmo"),h=e("3S7+"),H=e("tJVT"),U=e("oBTY"),r=e("qLMh"),m=e("k1fw"),j=e("miYZ"),F=e("tsqr"),te=e("9og8"),ae=e("xvlK"),X=e("q1tI"),x=e.n(X),o=e("9kvl"),R=e("Qiat"),G=e("/y+f"),P=e("+up7"),de=e("HEzf"),C=e("+YFz"),B=e("G3dp"),Oe=e("/MfK"),z=e("ujla"),i=e("nKUr"),ye=e.n(i),D=function(){var f=Object(te.a)(Object(r.a)().mark(function T(S,_,a){var le,N;return Object(r.a)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return le=F.b.loading(S.formatMessage({id:"loading"})),y.prev=1,y.next=4,a&&a!==-1?Object(P.i)(a,Object(m.a)({},_)):Object(P.b)(Object(m.a)({},_));case 4:return N=y.sent,le(),F.b.success(S.formatMessage({id:"success"})),y.abrupt("return",{success:!0,updatedSettings:N});case 10:return y.prev=10,y.t0=y.catch(1),le(),F.b.error(S.formatMessage({id:"error"})),y.abrupt("return",{success:!1,updateSettings:null});case 15:case"end":return y.stop()}},T,null,[[1,10]])}));return function(S,_,a){return f.apply(this,arguments)}}(),Fe=function(){var f=Object(te.a)(Object(r.a)().mark(function T(S,_){var a;return Object(r.a)().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return a=F.b.loading(S.formatMessage({id:"loading"})),N.prev=1,N.next=4,Object(P.c)(_);case 4:return a(),F.b.success(S.formatMessage({id:"success"})),N.abrupt("return",!0);case 9:return N.prev=9,N.t0=N.catch(1),a(),F.b.error(S.formatMessage({id:"error"})),N.abrupt("return",!1);case 14:case"end":return N.stop()}},T,null,[[1,9]])}));return function(S,_){return f.apply(this,arguments)}}(),Ee=function(T){return T.toLowerCase().replace(/(_\w)/g,function(S){return S.toUpperCase().substr(1)})},Ce=function f(T){return T.reduce(function(S,_){return[].concat(Object(U.a)(S),Object(U.a)(_.routes?f(_.routes):[]),[_])},[]).filter(function(S){return S.layout!==!1&&S.hideInMenu!==!0})},t=["statistics","user_submission","user_projects"],Ie=["public"],Ae=["email","sms"],Le=function(T){return"hideInMenu-".concat(Ee(T.split("/").join("_")))},Z=function(T){return"disableTopicType-".concat(T)},Re=[].concat(Object(U.a)(Object.keys(G.j).map(function(f){return{key:Z(f),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),Object(U.a)(Ce(Object(z.a)()).filter(function(f){return f.path&&f.path!=="/"}).map(function(f){return{path:f.path,key:Le(f.path),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),Object(U.a)(["ECommerce","Certificates"].map(function(f){return{key:"disable-".concat(f),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),Object(U.a)(Ie.map(function(f){return{key:"showInCourseAdditionalSettings-".concat(f),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),Object(U.a)(t.map(function(f){return{key:"hideInCourseTabs-".concat(f),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),Object(U.a)(Ae.map(function(f){return{key:"hideTemplateTab-".concat(f),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}}))).reduce(function(f,T,S){return f[T.key]=Object(m.a)(Object(m.a)({},T),{},{id:-100*S}),f},{}),Me=Object(m.a)({logo:{id:-1,key:"logo",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"image",data:"EscolaLMS"},frontURL:{id:-2,key:"frontURL",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},maxLessonsNestingInProgram:{id:-4,key:"maxLessonsNestingInProgram",group:"global",value:"0",public:!0,enumerable:!0,sort:1,type:"number",data:0},minTopicNestingInProgram:{id:-5,key:"minTopicNestingInProgram",group:"global",value:"0",public:!0,enumerable:!0,sort:1,type:"number",data:0},companyName:{id:-6,key:"companyName",group:"global",value:"Wellms",public:!0,enumerable:!0,sort:0,type:"text",data:"Wellms"},companyURL:{id:-7,key:"companyURL",group:"global",value:"https://www.wellms.io/",public:!0,enumerable:!0,sort:0,type:"text",data:"https://www.wellms.io/"},logoLogin:{id:-8,key:"logoLogin",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"image",data:"EscolaLMS"},logoFooter:{id:-9,key:"logoFooter",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"image",data:"EscolaLMS"},footerFontColor:{id:-10,key:"footerFontColor",group:"global",value:"#00000072",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},showLoginBackgroundImage:{id:-11,key:"showLoginBackgroundImage",group:"global",value:"true",public:!0,enumerable:!0,sort:0,type:"boolean",data:"EscolaLMS"},loginHeaderBackgroundColor:{id:-12,key:"loginHeaderBackgroundColor",group:"global",value:"#f0f2f5",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},loginHeaderFontColor:{id:-13,key:"loginHeaderFontColor",group:"global",value:"#000000D8",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},loginFormBackgroundColor:{id:-14,key:"loginFormBackgroundColor",group:"global",value:"#f0f2f5",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},contentBackgroundColor:{id:-15,key:"contentBackgroundColor",group:"global",value:"#f0f2f5",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},technicalMaintenance:{id:-16,key:"technicalMaintenance",group:"global",value:"false",public:!0,enumerable:!0,sort:0,type:"boolean",data:"EscolaLMS"},technicalMaintenanceText:{id:-17,key:"technicalMaintenanceText",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"}},Re),Be=function(){var T=Object(X.useState)(!1),S=Object(H.a)(T,2),_=S[0],a=S[1],le=Object(X.useRef)(),N=Object(o.l)(),De=Object(o.m)("@@initialState"),y=De.setInitialState,b=De.initialState,je=[{title:Object(i.jsx)(o.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0,render:function(v,c){return Object(i.jsx)(X.Fragment,{children:Object(i.jsxs)(h.a,{title:Object(i.jsx)(o.a,{id:"Settings.tooltip.".concat(c.key)}),children:[c.key," ",Object(i.jsx)(C.a,{})]})})}},{title:Object(i.jsx)(o.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(i.jsx)(o.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0,render:function(v,c){return c.value}},{hideInSearch:!0,title:Object(i.jsx)(o.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(v,c){return[c.id>0?Object(i.jsx)(h.a,{title:Object(i.jsx)(o.a,{id:"edit",defaultMessage:"edit"}),children:Object(i.jsx)(ue.a,{type:"primary",icon:Object(i.jsx)(B.a,{}),onClick:function(){return a(c.id)}})},"edit"):Object(i.jsx)(h.a,{title:Object(i.jsx)(o.a,{id:"create",defaultMessage:"create"}),children:Object(i.jsx)(ue.a,{type:"primary",icon:Object(i.jsx)(ae.a,{}),onClick:function(){a(Me[c.key]||-1)}})},"create"),Object(i.jsx)(ie.a,{title:Object(i.jsx)(o.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(te.a)(Object(r.a)().mark(function d(){var A;return Object(r.a)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,Fe(N,c.id);case 2:A=E.sent,A&&(a(!1),le.current&&le.current.reload());case 4:case"end":return E.stop()}},d)})),okText:Object(i.jsx)(o.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(i.jsx)(o.a,{id:"no",defaultMessage:"No"}),children:c.id>0?Object(i.jsx)(h.a,{title:Object(i.jsx)(o.a,{id:"delete",defaultMessage:"delete"}),children:Object(i.jsx)(ue.a,{type:"primary",icon:Object(i.jsx)(Oe.a,{}),danger:!0})}):null},"delete")]}}],me=function(v){var c;if(!!v&&(!(b!=null&&(c=b.config)!==null&&c!==void 0&&c.length)&&v&&y(Object(m.a)(Object(m.a)({},b),{},{config:[v]})),!!(b!=null&&b.config))){var d=b==null?void 0:b.config.map(function(A){return A.key===v.key?Object(m.a)(Object(m.a)({},A),v):A});y(Object(m.a)(Object(m.a)({},b),{},{config:d}))}};return Object(i.jsxs)(x.a.Fragment,{children:[Object(i.jsx)(R.a,{headerTitle:N.formatMessage({id:"menu.settings"}),search:!1,toolBarRender:!1,actionRef:le,rowKey:"id",request:function(v){var c=v.pageSize,d=v.current;return Object(P.g)({per_page:c,current:d,group:"global"}).then(function(A){if(A.success){var J=[].concat(Object(U.a)(Object.keys(Me).map(function(E){return A.data.find(function($){return $.key===E})||Me[E]})),Object(U.a)(A.data.filter(function(E){return!Object.keys(Me).includes(E.key)})));return{data:J,total:J.length,success:!0}}return[]})},columns:je}),Object(i.jsx)(de.a,{groups:[],id:_,visible:_,initialData:Me,onVisibleChange:function(v){return!v&&a(!1)},onFinish:function(){var w=Object(te.a)(Object(r.a)().mark(function v(c){var d,A,J,E;return Object(r.a)().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return d=c,d.type==="number"&&(d=Object(m.a)(Object(m.a)({},d),{},{value:String(d.data)})),d.type==="boolean"&&(d=Object(m.a)(Object(m.a)({},d),{},{value:d.data})),d.type==="array"&&(d=Object(m.a)(Object(m.a)({},d),{},{value:JSON.parse(d.value)})),ce.next=6,D(N,d,Number(_));case 6:A=ce.sent,J=A.success,E=A.updatedSettings,J&&(E!=null&&E.success&&me(E.data),a(!1),le.current&&le.current.reload());case 10:case"end":return ce.stop()}},v)}));return function(v){return w.apply(this,arguments)}}()})]})};Q.a=Be},tneF:function(he,Q,e){"use strict";var be=e("sRBo"),ie=e("kaz8"),K=e("VTBJ"),ue=e("Ff2n"),W=e("nKUr"),h=e.n(W),H=e("uX+g"),U=e("q1tI"),r=e.n(U),m=e("WFLz"),j=e("adzw"),F=["options","fieldProps","proFieldProps","valueEnum"],te=r.a.forwardRef(function(o,R){var G=o.options,P=o.fieldProps,de=o.proFieldProps,C=o.valueEnum,B=Object(ue.a)(o,F);return Object(W.jsx)(j.a,Object(K.a)({ref:R,valueType:"checkbox",valueEnum:Object(H.a)(C,void 0),fieldProps:Object(K.a)({options:G},P),lightProps:Object(K.a)({labelFormatter:function(){return Object(W.jsx)(j.a,Object(K.a)({ref:R,valueType:"checkbox",mode:"read",valueEnum:Object(H.a)(C,void 0),filedConfig:{customLightMode:!0},fieldProps:Object(K.a)({options:G},P),proFieldProps:de},B))}},B.lightProps),proFieldProps:de},B))}),ae=r.a.forwardRef(function(o,R){var G=o.fieldProps,P=o.children;return Object(W.jsx)(ie.a,Object(K.a)(Object(K.a)({ref:R},G),{},{children:P}))}),X=Object(m.a)(ae,{valuePropName:"checked"}),x=X;x.Group=te,Q.a=x},vtG9:function(he,Q,e){}}]);

//# sourceMappingURL=p__Settings.defe6c8f.async.js.map