(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"5qq5":function(Y,F,a){"use strict";var N=a("7Kak"),B=a("9yH6"),g=a("wx14"),b=a("VTBJ"),D=a("Ff2n"),I=a("q1tI"),T=a.n(I),t=a("adzw"),M=a("uX+g"),O=a("WFLz"),h=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],S=T.a.forwardRef(function(y,w){var V=y.fieldProps,A=y.options,z=y.radioType,$=y.layout,k=y.proFieldProps,U=y.valueEnum,Q=Object(D.a)(y,h);return T.a.createElement(t.a,Object(g.a)({mode:"edit",valueType:z==="button"?"radioButton":"radio",ref:w,valueEnum:Object(M.a)(U,void 0)},Q,{fieldProps:Object(b.a)({options:A,layout:$},V),proFieldProps:k,filedConfig:{customLightMode:!0}}))}),c=T.a.forwardRef(function(y,w){var V=y.fieldProps,A=y.children;return T.a.createElement(B.a,Object(g.a)({},V,{ref:w}),A)}),G=Object(O.a)(c,{valuePropName:"checked",ignoreWidth:!0}),W=G;W.Group=S,W.Button=B.a.Button,W.displayName="ProFormComponent",F.a=W},BiO0:function(Y,F,a){"use strict";var N=a("wx14"),B=a("Ff2n"),g=a("q1tI"),b=a.n(g),D=a("adzw"),I=["fieldProps","proFieldProps"],T=function(M,O){var h=M.fieldProps,S=M.proFieldProps,c=Object(B.a)(M,I);return b.a.createElement(D.a,Object(N.a)({ref:O,mode:"edit",valueType:"textarea",fieldProps:h,proFieldProps:S},c))};F.a=b.a.forwardRef(T)},"F/zT":function(Y,F,a){"use strict";var N=a("wx14"),B=a("VTBJ"),g=a("Ff2n"),b=a("q1tI"),D=a.n(b),I=a("adzw"),T=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],t=D.a.forwardRef(function(M,O){var h=M.fieldProps,S=M.unCheckedChildren,c=M.checkedChildren,G=M.proFieldProps,W=Object(g.a)(M,T);return D.a.createElement(I.a,Object(N.a)({valueType:"switch",mode:"edit",fieldProps:Object(B.a)({unCheckedChildren:S,checkedChildren:c},h),ref:O,valuePropName:"checked",proFieldProps:G,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},W))});F.a=t},YjuE:function(Y,F,a){"use strict";a.r(F);var N=a("T2oS"),B=a("W9HT"),g=a("tJVT"),b=a("q1tI"),D=a.n(b),I=a("nhC9"),T=a("Ty5D"),t=a("9kvl"),M=a("tMyG"),O=a("k1fw"),h=a("9og8"),S=a("WmNS"),c=a.n(S);function G(u,r){return W.apply(this,arguments)}function W(){return W=Object(h.a)(c.a.mark(function u(r,n){return c.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(t.f)("/api/admin/settings",Object(O.a)({method:"GET",useCache:!1,params:Object(O.a)(Object(O.a)({},r),{},{per_page:r.pageSize,page:r.current})},n||{})));case 1:case"end":return s.stop()}},u)})),W.apply(this,arguments)}function y(u,r){return w.apply(this,arguments)}function w(){return w=Object(h.a)(c.a.mark(function u(r,n){return c.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(t.f)("/api/admin/settings/".concat(r),Object(O.a)({method:"GET",useCache:!1},n||{})));case 1:case"end":return s.stop()}},u)})),w.apply(this,arguments)}function V(u,r){return A.apply(this,arguments)}function A(){return A=Object(h.a)(c.a.mark(function u(r,n){return c.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(t.f)("/api/admin/settings",Object(O.a)({method:"POST",headers:{"Content-Type":"application/json"},data:r},n||{})));case 1:case"end":return s.stop()}},u)})),A.apply(this,arguments)}function z(u,r,n){return $.apply(this,arguments)}function $(){return $=Object(h.a)(c.a.mark(function u(r,n,i){return c.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",Object(t.f)("/api/admin/settings/".concat(r),Object(O.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:n},i||{})));case 1:case"end":return f.stop()}},u)})),$.apply(this,arguments)}function k(u,r){return U.apply(this,arguments)}function U(){return U=Object(h.a)(c.a.mark(function u(r,n){return c.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Object(t.f)("/api/admin/settings/".concat(r),Object(O.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},n||{})));case 1:case"end":return s.stop()}},u)})),U.apply(this,arguments)}function Q(u){return K.apply(this,arguments)}function K(){return K=Object(h.a)(c.a.mark(function u(r){return c.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(t.f)("/api/admin/settings/groups",Object(O.a)({method:"GET",useCache:!1},r||{})));case 1:case"end":return i.stop()}},u)})),K.apply(this,arguments)}function Z(u){return q.apply(this,arguments)}function q(){return q=Object(h.a)(c.a.mark(function u(r){return c.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(t.f)("/api/admin/config",Object(O.a)({method:"GET",useCache:!1},r||{})));case 1:case"end":return i.stop()}},u)})),q.apply(this,arguments)}function L(u,r){return re.apply(this,arguments)}function re(){return re=Object(h.a)(c.a.mark(function u(r,n){var i,s;return c.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return i=r.key,s=r.value,l.abrupt("return",Object(t.f)("/api/admin/config",Object(O.a)({method:"POST",data:{config:[{key:i,value:s}]}},n||{})));case 2:case"end":return l.stop()}},u)})),re.apply(this,arguments)}var Ae=a("P2fV"),oe=a("NJEC"),Ue=a("5Dmo"),ne=a("3S7+"),we=a("+L6B"),H=a("2/Rp"),Ke=a("+BJd"),ee=a("mr32"),de=a("jrin"),Le=a("miYZ"),J=a("tsqr"),je=a("xvlK"),se=a("Qiat"),_e=a("y8nQ"),ie=a("Vl3Y"),Ve=a("5NDa"),fe=a("5rEg"),_=a("VMEa"),le=a("rmhi"),ae=a("Qurx"),te=a("F/zT"),me=a("5qq5"),be=a("BiO0"),Oe=a("hd5d"),he=a("3fxf"),pe=a("ovOe"),ue=a.n(pe),e=a("nKUr"),ve=function(r){var n=r.value,i=r.onChange,s=r.type,f=s===void 0?"file":s,l=Object(b.useState)(!1),m=Object(g.a)(l,2),v=m[0],j=m[1];return Object(e.jsxs)(D.a.Fragment,{children:[Object(e.jsxs)(_.b.Group,{children:[Object(e.jsx)(fe.a,{value:n,readOnly:!0}),Object(e.jsxs)(H.a,{size:"small",type:"primary",onClick:function(){return j(!v)},children:["toggle ",f," browser"]})]}),v&&Object(e.jsx)(he.a,{onFile:function(x,o){return i&&i("".concat(o,"/").concat(x.name))}})]})},ge=function(r){var n=Object(t.i)(),i=r.visible,s=r.onVisibleChange,f=r.onFinish,l=r.id,m=ie.a.useForm(),v=Object(g.a)(m,1),j=v[0],E=!l||l===-1,x=Object(b.useState)("text"),o=Object(g.a)(x,2),d=o[0],p=o[1];Object(b.useEffect)(function(){l&&l!==-1?y(l).then(function(P){P.success&&(j.setFieldsValue(P.data),p(P.data.type))}):(j.resetFields(),p("text"))},[l,j]);var C=Object(b.useCallback)(function(P){P.type&&P.type!==d&&p(P.type)},[d]);return Object(e.jsxs)(le.a,{form:j,title:n.formatMessage({id:l?"editSetting":"newSetting",defaultMessage:l?"editSetting":"newSetting"}),width:"60vw",visible:i,onVisibleChange:s,onFinish:f,onValuesChange:C,children:[Object(e.jsxs)(_.b.Group,{children:[Object(e.jsx)(ae.a,{label:Object(e.jsx)(t.a,{id:"group",defaultMessage:"group"}),rules:[{required:!0}],width:"md",name:"group"})," ",Object(e.jsx)(ae.a,{label:Object(e.jsx)(t.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"})]}),Object(e.jsxs)(_.b.Group,{children:[Object(e.jsx)(te.a,{name:"enumerable",label:Object(e.jsx)(t.a,{id:"enumerable",defaultMessage:"enumerable"})}),Object(e.jsx)(te.a,{name:"public",label:Object(e.jsx)(t.a,{id:"public",defaultMessage:"public"})})]}),Object(e.jsx)(_.b.Group,{children:Object(e.jsx)(me.a.Group,{disabled:!E,name:"type",label:Object(e.jsx)(t.a,{id:"type"}),options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"},{label:"json",value:"json"},{label:"file",value:"file"},{label:"image",value:"image"}]})}),Object(e.jsxs)("div",{children:[d==="text"&&Object(e.jsx)(ae.a,{width:"lg",name:"value",label:Object(e.jsx)(t.a,{id:"value"})}),d==="json"&&Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(be.a,{width:"lg",name:"value",label:Object(e.jsx)(t.a,{id:"value"}),tooltip:"".concat(n.formatMessage({id:"example_json"}),': {"name":"John", "age":30, "city":["New York","Warsaw"]}')}),Object(e.jsx)(_.b.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(e.jsx)(ue.a,{src:JSON.parse(j.getFieldValue("value"))})}catch(R){return Object(e.jsx)(ue.a,{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]}),(d==="file"||d==="image")&&Object(e.jsx)(_.b.Item,{name:"value",label:"value",tooltip:"select file from current repository or upload new one",valuePropName:"value",children:Object(e.jsx)(ve,{type:d})}),d==="markdown"&&Object(e.jsx)(_.b.Item,{name:"value",label:"value",tooltip:"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.",valuePropName:"value",children:Object(e.jsx)(Oe.a,{directory:"settings/wysiwyg"})})]})]})},ye=ge,ce=a("G3dp"),Ee=a("/MfK"),Me=function(){var u=Object(h.a)(c.a.mark(function r(n,i,s){var f;return c.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return f=J.default.loading(n.formatMessage({id:"loading"})),m.prev=1,m.next=4,s&&s!==-1?z(s,Object(O.a)({},i)):V(Object(O.a)({},i));case 4:return f(),J.default.success(n.formatMessage({id:"success"})),m.abrupt("return",!0);case 9:return m.prev=9,m.t0=m.catch(1),f(),J.default.error(n.formatMessage({id:"error"})),m.abrupt("return",!1);case 14:case"end":return m.stop()}},r,null,[[1,9]])}));return function(n,i,s){return u.apply(this,arguments)}}(),Pe=function(){var u=Object(h.a)(c.a.mark(function r(n,i){var s;return c.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return s=J.default.loading(n.formatMessage({id:"loading"})),l.prev=1,l.next=4,k(i);case 4:return s(),J.default.success(n.formatMessage({id:"success"})),l.abrupt("return",!0);case 9:return l.prev=9,l.t0=l.catch(1),s(),J.default.error(n.formatMessage({id:"error"})),l.abrupt("return",!1);case 14:case"end":return l.stop()}},r,null,[[1,9]])}));return function(n,i){return u.apply(this,arguments)}}(),xe=function(){var r=Object(b.useState)(!1),n=Object(g.a)(r,2),i=n[0],s=n[1],f=Object(b.useState)([]),l=Object(g.a)(f,2),m=l[0],v=l[1],j=Object(b.useRef)(),E=Object(t.i)();Object(b.useEffect)(function(){Q().then(function(o){o.success&&v(o.data)})},[]);var x=[{title:Object(e.jsx)(t.a,{id:"group",defaultMessage:"group"}),dataIndex:"group",hideInSearch:!1,key:"group",valueType:"select",width:100,valueEnum:m.sort().reduce(function(o,d){return Object(O.a)(Object(O.a)({},o),{},Object(de.a)({},d,d))},{})},{title:Object(e.jsx)(t.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(e.jsx)(t.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(e.jsx)(t.a,{id:"enumerable",defaultMessage:"enumerable"}),dataIndex:"enumerable",hideInForm:!0,hideInSearch:!0,render:function(d,p){return Object(e.jsx)(ee.a,{color:p.enumerable?"success":"error",children:Object(e.jsx)(t.a,{id:p.enumerable?"true":"false",defaultMessage:p.enumerable?"true":"false"})})}},{title:Object(e.jsx)(t.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(d,p){return Object(e.jsx)(ee.a,{color:p.public?"success":"error",children:Object(e.jsx)(t.a,{id:p.public?"true":"false",defaultMessage:p.public?"true":"false"})})}},{hideInSearch:!0,title:Object(e.jsx)(t.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(d,p){return[Object(e.jsx)(ne.a,{title:Object(e.jsx)(t.a,{id:"edit",defaultMessage:"edit"}),children:Object(e.jsx)(H.a,{type:"primary",icon:Object(e.jsx)(ce.a,{}),onClick:function(){return s(p.id)}})},"edit"),Object(e.jsx)(oe.a,{title:Object(e.jsx)(t.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(h.a)(c.a.mark(function C(){var P;return c.a.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,Pe(E,p.id);case 2:P=X.sent,P&&(s(!1),j.current&&j.current.reload());case 4:case"end":return X.stop()}},C)})),okText:Object(e.jsx)(t.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(e.jsx)(t.a,{id:"no",defaultMessage:"No"}),children:Object(e.jsx)(ne.a,{title:Object(e.jsx)(t.a,{id:"delete",defaultMessage:"delete"}),children:Object(e.jsx)(H.a,{type:"primary",icon:Object(e.jsx)(Ee.a,{}),danger:!0})})},"delete")]}}];return Object(e.jsxs)(D.a.Fragment,{children:[Object(e.jsx)(se.a,{headerTitle:E.formatMessage({id:"menu.settings"}),actionRef:j,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[Object(e.jsxs)(H.a,{type:"primary",onClick:function(){s(-1)},children:[Object(e.jsx)(je.a,{})," ",Object(e.jsx)(t.a,{id:"pages.searchTable.new"})]},"primary")]},request:function(d){var p=d.pageSize,C=d.current,P=d.group;return G({pageSize:p,current:C,group:P}).then(function(R){return R.success?{data:R.data,total:R.meta.total,success:!0}:[]})},columns:x}),Object(e.jsx)(ye,{groups:m,id:i,visible:Number.isInteger(i),onVisibleChange:function(d){return d===!1&&s(!1)},onFinish:function(){var o=Object(h.a)(c.a.mark(function d(p){var C;return c.a.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,Me(E,p,Number(i));case 2:C=R.sent,C&&(s(!1),j.current&&j.current.reload());case 4:case"end":return R.stop()}},d)}));return function(d){return o.apply(this,arguments)}}()})]})},Ce=xe,Ne=a("tU7J"),Te=a("wFql"),Fe=Te.a.Text,De=function(r){var n=r.visible,i=r.onVisibleChange,s=r.onFinish,f=r.value,l=ie.a.useForm(),m=Object(g.a)(l,1),v=m[0];return Object(b.useEffect)(function(){v.setFieldsValue(f)},[f,v]),Object(e.jsxs)(le.a,{form:v,title:f.full_key,width:"60vw",visible:n,onVisibleChange:i,onFinish:Object(h.a)(c.a.mark(function j(){var E;return c.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,L({key:f.full_key,value:v.getFieldsValue().value});case 2:return E=o.sent,s(E.success===!0),o.abrupt("return",E.success);case 5:case"end":return o.stop()}},j)})),children:[Object(e.jsxs)(_.b.Group,{children:[Object(e.jsx)(te.a,{disabled:!0,name:"public",label:Object(e.jsx)(t.a,{id:"public",defaultMessage:"public"})}),Object(e.jsx)(te.a,{disabled:!0,name:"readonly",label:Object(e.jsx)(t.a,{id:"readonly",defaultMessage:"readonly"})}),Object(e.jsx)(_.b.Item,{shouldUpdate:!0,label:Object(e.jsx)(t.a,{id:"rules",defaultMessage:"rules"}),children:function(){return Object(e.jsx)(Fe,{code:!0,children:JSON.stringify(v.getFieldValue("rules"))})}})]}),Object(e.jsx)(ae.a,{width:"lg",name:"value",label:Object(e.jsx)(t.a,{id:"value"})})]})},Ie=De,Se=[{title:Object(e.jsx)(t.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(e.jsx)(t.a,{id:"readonly",defaultMessage:"readonly"}),dataIndex:"readonly",hideInForm:!0,hideInSearch:!0,render:function(r,n){return Object(e.jsx)(ee.a,{color:n.readonly?"success":"error",children:Object(e.jsx)(t.a,{id:n.readonly?"true":"false",defaultMessage:n.readonly?"true":"false"})})}},{title:Object(e.jsx)(t.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(r,n){return Object(e.jsx)(ee.a,{color:n.public?"success":"error",children:Object(e.jsx)(t.a,{id:n.public?"true":"false",defaultMessage:n.public?"true":"false"})})}},{title:Object(e.jsx)(t.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0}],We=function(r){var n=r.packageName,i=r.values,s=r.onValueUpdated,f=Object(t.i)(),l=Object(b.useState)(),m=Object(g.a)(l,2),v=m[0],j=m[1],E=Object(b.useMemo)(function(){var x=i[n],o=Object.entries(x).map(function(d){return Object(O.a)({key:d[0],full_key:"".concat(n,".").concat(d[0])},d[1])});return o},[i,n]);return Object(e.jsxs)(D.a.Fragment,{children:[Object(e.jsx)(se.a,{headerTitle:f.formatMessage({id:"menu.settings"}),rowKey:"key",search:{labelWidth:120},request:function(){return Promise.resolve({data:E,success:!0})},columns:[].concat(Se,[{hideInSearch:!0,title:Object(e.jsx)(t.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(o,d){return[Object(e.jsx)(ne.a,{title:Object(e.jsx)(t.a,{id:"edit",defaultMessage:"edit"}),children:Object(e.jsx)(H.a,{type:"primary",icon:Object(e.jsx)(ce.a,{}),onClick:function(){return j(d)}})},"edit")]}}])}),v&&Object(e.jsx)(Ie,{value:v,visible:v!==void 0,onVisibleChange:function(o){return o===!1&&j(void 0)},onFinish:function(){var x=Object(h.a)(c.a.mark(function o(d){return c.a.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:d&&s();case 1:case"end":return C.stop()}},o)}));return function(o){return x.apply(this,arguments)}}()})]})},Re=We,Be=function(r){return r.replaceAll("escolalms","").split("_").join("")},Ge=F.default=function(){var u=Object(T.g)(),r=Object(t.i)(),n=u.tab,i=n===void 0?"user_settings":n,s=Object(b.useState)(),f=Object(g.a)(s,2),l=f[0],m=f[1],v=Object(b.useCallback)(function(){Z().then(function(j){j.success&&m(j.data)})},[]);return Object(b.useEffect)(function(){v()},[]),l?Object(e.jsx)(M.a,{title:Object(e.jsx)(t.a,{id:"settings"}),header:{breadcrumb:{routes:[{path:"settings",breadcrumbName:r.formatMessage({id:"menu.Settings"})},{path:String(i),breadcrumbName:String(i)}]}},children:Object(e.jsxs)(I.a,{tabs:{type:"card",activeKey:i,onChange:function(E){return t.d.push("/settings/".concat(E))}},children:[Object(e.jsx)(I.a.TabPane,{tab:Object(e.jsx)(t.a,{id:"user.settings"}),children:Object(e.jsx)(Ce,{})},"user_settings"),Object.keys(l).map(function(j){return Object(e.jsxs)(I.a.TabPane,{tab:Object(e.jsxs)("span",{children:[Object(e.jsx)(t.a,{id:"package"})," ",Be(j)]}),children:[Object(e.jsx)(Re,{values:l,packageName:j,onValueUpdated:function(){return v()}}),j]},j)})]})}):Object(e.jsx)(B.a,{})}},hd5d:function(Y,F,a){"use strict";var N=a("9og8"),B=a("WmNS"),g=a.n(B),b=a("q1tI"),D=a.n(b),I=a("3Ef1"),T=a.n(I),t=a("BAh9"),M=a("vtG9"),O=a.n(M),h=a("9kvl"),S=a("nKUr"),c=a.n(S),G=function(y){var w=y.value,V=y.onChange,A=y.directory,z=A===void 0?"/wysiwyg":A,$=Object(h.i)();return Object(S.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(S.jsx)(T.a,{uploadImage:function(){var k=Object(N.a)(g.a.mark(function U(Q){var K,Z;return g.a.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,Object(t.e)(Q,z);case 2:if(K=L.sent,!K.success){L.next=6;break}return Z=K.data[0].name.includes("/")?K.data[0].name:"".concat(z).concat(K.data[0].name),L.abrupt("return",Object(t.d)(Z,1e3));case 6:throw new Error("Error while uploading");case 7:case"end":return L.stop()}},U)}));return function(U){return k.apply(this,arguments)}}(),defaultValue:w||"",onChange:function(U){return V&&V(U())},placeholder:$.formatMessage({id:"wysiwyg_placeholder"})})})};F.a=G},vtG9:function(Y,F,a){}}]);
