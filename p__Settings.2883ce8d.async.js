(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"+up7":function(ae,f,e){"use strict";e.d(f,"f",function(){return D}),e.d(f,"d",function(){return a}),e.d(f,"b",function(){return g}),e.d(f,"h",function(){return o}),e.d(f,"c",function(){return x}),e.d(f,"e",function(){return s}),e.d(f,"a",function(){return b}),e.d(f,"g",function(){return W});var U=e("k1fw"),E=e("9og8"),y=e("WmNS"),r=e.n(y),M=e("9kvl");function D(i,u){return A.apply(this,arguments)}function A(){return A=Object(E.a)(r.a.mark(function i(u,P){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(M.f)("/api/admin/settings",Object(U.a)({method:"GET",useCache:!1,params:Object(U.a)(Object(U.a)({},u),{},{per_page:u.pageSize,page:u.current})},P||{})));case 1:case"end":return n.stop()}},i)})),A.apply(this,arguments)}function a(i,u){return F.apply(this,arguments)}function F(){return F=Object(E.a)(r.a.mark(function i(u,P){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(M.f)("/api/admin/settings/".concat(u),Object(U.a)({method:"GET",useCache:!1},P||{})));case 1:case"end":return n.stop()}},i)})),F.apply(this,arguments)}function g(i,u){return $.apply(this,arguments)}function $(){return $=Object(E.a)(r.a.mark(function i(u,P){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(M.f)("/api/admin/settings",Object(U.a)({method:"POST",headers:{"Content-Type":"application/json"},data:u},P||{})));case 1:case"end":return n.stop()}},i)})),$.apply(this,arguments)}function o(i,u,P){return G.apply(this,arguments)}function G(){return G=Object(E.a)(r.a.mark(function i(u,P,d){return r.a.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.abrupt("return",Object(M.f)("/api/admin/settings/".concat(u),Object(U.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:P},d||{})));case 1:case"end":return ee.stop()}},i)})),G.apply(this,arguments)}function x(i,u){return v.apply(this,arguments)}function v(){return v=Object(E.a)(r.a.mark(function i(u,P){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(M.f)("/api/admin/settings/".concat(u),Object(U.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},P||{})));case 1:case"end":return n.stop()}},i)})),v.apply(this,arguments)}function s(i){return I.apply(this,arguments)}function I(){return I=Object(E.a)(r.a.mark(function i(u){return r.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(M.f)("/api/admin/settings/groups",Object(U.a)({method:"GET",useCache:!1},u||{})));case 1:case"end":return d.stop()}},i)})),I.apply(this,arguments)}function b(i){return c.apply(this,arguments)}function c(){return c=Object(E.a)(r.a.mark(function i(u){return r.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",Object(M.f)("/api/admin/config",Object(U.a)({method:"GET",useCache:!1},u||{})));case 1:case"end":return d.stop()}},i)})),c.apply(this,arguments)}function W(i,u){return K.apply(this,arguments)}function K(){return K=Object(E.a)(r.a.mark(function i(u,P){var d,n;return r.a.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return d=u.key,n=u.value,S.abrupt("return",Object(M.f)("/api/admin/config",Object(U.a)({method:"POST",data:{config:[{key:d,value:n}]}},P||{})));case 2:case"end":return S.stop()}},i)})),K.apply(this,arguments)}},"3fxf":function(ae,f,e){"use strict";var U=e("DjyN"),E=e("NUBc"),y=e("Mwp2"),r=e("VXEj"),M=e("+L6B"),D=e("2/Rp"),A=e("5NDa"),a=e("5rEg"),F=e("oBTY"),g=e("k1fw"),$=e("tJVT"),o=e("DYRE"),G=e("zeV3"),x=e("tU7J"),v=e("wFql"),s=e("q1tI"),I=e.n(s),b=e("BAh9"),c=e("/MfK"),W=e("mAF4"),K=e("dF/Y"),i=e("9kvl"),u=e("DBJ/"),P=e("lLVY"),d=e.n(P),n=e("nKUr"),ee=e.n(n),S=function(ie){var z=ie.directory,ne=ie.onUploaded;return Object(n.jsxs)(G.b,{align:"start",children:[Object(n.jsxs)(v.a.Text,{children:[Object(n.jsx)(i.a,{id:"pages.files.filesBrowser"}),Object(n.jsx)(v.a.Text,{code:!0,children:z})]}),Object(n.jsx)(u.a,{url:"/api/admin/file/upload",name:"file[]",data:{target:z},onChange:function(le){return le.file.status==="done"&&ne(z,le.file)}})]})},oe=function(ie){var z=ie.defaultDirectory,ne=z===void 0?"/":z,Y=ie.onFile,le=Object(i.i)(),be=Object(s.useState)({loading:!1,name:"",directory:ne,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),me=Object($.a)(be,2),w=me[0],Oe=me[1],se=Object(s.useRef)(),X=Object(s.useCallback)(function(L){Oe(function(j){return Object(g.a)(Object(g.a)({},j),{},{loading:L})})},[]),t=Object(s.useCallback)(function(L,j){Oe(function(Q){return Object(g.a)(Object(g.a)(Object(g.a)({},Q),L.data),{},{data:[{url:j.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(F.a)(L.data.data.map(function(q){return Object(g.a)(Object(g.a)({},q),{},{url:q.mime==="directory"?"".concat(j,"/").concat(q.name):q.url})}))).filter(function(q){return j==="/"?q.name!=="..":!0}),directory:j,loading:!1})})},[X]),te=Object(s.useCallback)(function(L){var j,Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,q=function(){return se.current&&se.current.abort()};return q(),se.current=new AbortController,X(!0),Object(b.a)({directory:L,page:Q},{signal:(j=se.current)===null||j===void 0?void 0:j.signal}).then(function(ce){ce.success&&t(ce,L)}).catch(function(){return X(!1)}),function(){q()}},[X]);Object(s.useEffect)(function(){return te(ne)},[ne,te]);var he=Object(s.useCallback)(function(L){X(!0),Object(b.c)(L).then(function(){te(w.directory)}).catch(function(){X(!1)})},[te,X,w.directory]),pe=Object(s.useCallback)(function(L,j){var Q,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,ce=function(){return se.current&&se.current.abort()};return ce(),se.current=new AbortController,X(!0),Object(b.b)({directory:L,name:j,page:q},{signal:(Q=se.current)===null||Q===void 0?void 0:Q.signal}).then(function(je){je.success&&t(je,L)}).catch(function(){return X(!1)}),function(){ce()}},[X]);return Object(n.jsxs)("div",{className:"file-browser",children:[Object(n.jsxs)("div",{className:"file-browser__header",children:[Object(n.jsx)(a.a,{placeholder:le.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(j){return Oe(function(Q){return Object(g.a)(Object(g.a)({},Q),{},{name:j.target.value})})},value:w.name}),Object(n.jsxs)("div",{children:[Object(n.jsx)(D.a,{className:"file-browser__button",onClick:function(){return te(w.directory)},children:Object(n.jsx)(i.a,{id:"reset"})}),Object(n.jsx)(D.a,{className:"file-browser__button",type:"primary",onClick:function(){return pe(w.directory,w.name)},children:Object(n.jsx)(i.a,{id:"query"})})]})]}),Object(n.jsx)(r.b,{loading:w.loading,size:"small",itemLayout:"horizontal",dataSource:w.data,header:Object(n.jsx)(S,{directory:w.directory,onUploaded:function(j,Q){return te(j)&&Y&&Y(Q,j)}}),footer:Object(n.jsx)(S,{directory:w.directory,onUploaded:function(j){return te(j)&&Y&&Y(name,j)}}),renderItem:function(j){return Object(n.jsx)(r.b.Item,{actions:j.mime!=="directory"?[Object(n.jsx)(D.a,{type:"default",danger:!0,icon:Object(n.jsx)(c.a,{}),size:"small",onClick:function(){return he(j.url)}})]:[],children:Object(n.jsx)(r.b.Item.Meta,{avatar:j.mime==="directory"?Object(n.jsx)(D.a,{type:"primary",icon:Object(n.jsx)(W.a,{}),size:"small",onClick:function(){return te(j.url)}}):Object(n.jsx)("a",{href:j.url,target:"_blank",rel:"noreferrer",children:Object(n.jsx)(D.a,{type:"default",icon:Object(n.jsx)(K.a,{}),size:"small"})}),description:Object(n.jsx)(I.a.Fragment,{children:Object(n.jsx)(D.a,{type:"text",size:"small",onClick:function(){return j.mime==="directory"?te(j.url):Y&&Y(j,w.directory)},children:j.name})})})})}}),Object(n.jsx)(E.a,{pageSizeOptions:[],current:w.current_page,total:w.total,pageSize:w.per_page,onChange:function(j){return te(w.directory,j)}})]})};f.a=oe},"5qq5":function(ae,f,e){"use strict";var U=e("7Kak"),E=e("9yH6"),y=e("wx14"),r=e("VTBJ"),M=e("Ff2n"),D=e("q1tI"),A=e.n(D),a=e("adzw"),F=e("uX+g"),g=e("WFLz"),$=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],o=A.a.forwardRef(function(s,I){var b=s.fieldProps,c=s.options,W=s.radioType,K=s.layout,i=s.proFieldProps,u=s.valueEnum,P=Object(M.a)(s,$);return A.a.createElement(a.a,Object(y.a)({mode:"edit",valueType:W==="button"?"radioButton":"radio",ref:I,valueEnum:Object(F.a)(u,void 0)},P,{fieldProps:Object(r.a)({options:c,layout:K},b),proFieldProps:i,filedConfig:{customLightMode:!0}}))}),G=A.a.forwardRef(function(s,I){var b=s.fieldProps,c=s.children;return A.a.createElement(E.a,Object(y.a)({},b,{ref:I}),c)}),x=Object(g.a)(G,{valuePropName:"checked",ignoreWidth:!0}),v=x;v.Group=o,v.Button=E.a.Button,v.displayName="ProFormComponent",f.a=v},BAh9:function(ae,f,e){"use strict";e.d(f,"a",function(){return D}),e.d(f,"b",function(){return a}),e.d(f,"e",function(){return g}),e.d(f,"d",function(){return o}),e.d(f,"c",function(){return G});var U=e("k1fw"),E=e("9og8"),y=e("WmNS"),r=e.n(y),M=e("9kvl");function D(v,s){return A.apply(this,arguments)}function A(){return A=Object(E.a)(r.a.mark(function v(s,I){return r.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(M.f)("/api/admin/file/list",Object(U.a)({method:"GET",params:s},I||{})));case 1:case"end":return c.stop()}},v)})),A.apply(this,arguments)}function a(v,s){return F.apply(this,arguments)}function F(){return F=Object(E.a)(r.a.mark(function v(s,I){return r.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(M.f)("/api/admin/file/find",Object(U.a)({method:"GET",params:s},I||{})));case 1:case"end":return c.stop()}},v)})),F.apply(this,arguments)}function g(v,s,I){return $.apply(this,arguments)}function $(){return $=Object(E.a)(r.a.mark(function v(s,I,b){var c;return r.a.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return c=new FormData,c.append("file[]",s),c.append("target",I),K.abrupt("return",Object(M.f)("/api/admin/file/upload",Object(U.a)({method:"POST",data:c},b||{})));case 4:case"end":return K.stop()}},v)})),$.apply(this,arguments)}var o=function(s){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(s,"&w=").concat(I)};function G(v,s){return x.apply(this,arguments)}function x(){return x=Object(E.a)(r.a.mark(function v(s,I){return r.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(M.f)("/api/admin/file/delete",Object(U.a)({method:"DELETE",data:{url:s}},I||{})));case 1:case"end":return c.stop()}},v)})),x.apply(this,arguments)}},BiO0:function(ae,f,e){"use strict";var U=e("wx14"),E=e("Ff2n"),y=e("q1tI"),r=e.n(y),M=e("adzw"),D=["fieldProps","proFieldProps"],A=function(F,g){var $=F.fieldProps,o=F.proFieldProps,G=Object(E.a)(F,D);return r.a.createElement(M.a,Object(U.a)({ref:g,mode:"edit",valueType:"textarea",fieldProps:$,proFieldProps:o},G))};f.a=r.a.forwardRef(A)},"DBJ/":function(ae,f,e){"use strict";var U=e("y8nQ"),E=e("Vl3Y"),y=e("etVw"),r=e("q1tI"),M=e.n(r),D=e("9kvl"),A=e("qFDU"),a=e("nKUr"),F=e.n(a),g=function(o){var G=o.onChange,x=o.url,v=o.name,s=o.extra,I=o.accept,b=o.data,c=o.wrapInForm,W=c===void 0?!0:c,K=o.title,i=Object(D.i)();return b&&b[v]&&delete b[v],Object(a.jsx)(A.a,{condition:W,wrap:function(P){return Object(a.jsx)(E.a,{children:P})},children:Object(a.jsx)(y.a,{title:K||Object(a.jsx)(D.a,{id:"upload_click_here"}),placeholder:i.formatMessage({id:"upload_click_here"}),onChange:G,label:Object(a.jsx)(D.a,{id:"upload"}),max:2,fieldProps:{data:b,accept:I,name:v,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(x),extra:s})})};f.a=g},YjuE:function(ae,f,e){"use strict";e.r(f);var U=e("T2oS"),E=e("W9HT"),y=e("tJVT"),r=e("q1tI"),M=e.n(r),D=e("nhC9"),A=e("Ty5D"),a=e("9kvl"),F=e("tMyG"),g=e("+up7"),$=e("P2fV"),o=e("NJEC"),G=e("5Dmo"),x=e("3S7+"),v=e("+L6B"),s=e("2/Rp"),I=e("+BJd"),b=e("mr32"),c=e("jrin"),W=e("k1fw"),K=e("miYZ"),i=e("tsqr"),u=e("9og8"),P=e("WmNS"),d=e.n(P),n=e("xvlK"),ee=e("Qiat"),S=e("y8nQ"),oe=e("Vl3Y"),ve=e("5NDa"),ie=e("5rEg"),z=e("VMEa"),ne=e("rmhi"),Y=e("Qurx"),le=e("F/zT"),be=e("5qq5"),me=e("BiO0"),w=e("hd5d"),Oe=e("3fxf"),se=e("ovOe"),X=e.n(se),t=e("nKUr"),te=function(l){var m=l.value,h=l.onChange,C=l.type,N=C===void 0?"file":C,O=Object(r.useState)(!1),R=Object(y.a)(O,2),H=R[0],p=R[1];return Object(t.jsxs)(M.a.Fragment,{children:[Object(t.jsxs)(z.a.Group,{children:[Object(t.jsx)(ie.a,{value:m,readOnly:!0}),Object(t.jsxs)(s.a,{size:"small",type:"primary",onClick:function(){return p(!H)},children:["toggle ",N," browser"]})]}),H&&Object(t.jsx)(Oe.a,{onFile:function(Z,B){return h&&h("".concat(B,"/").concat(Z.name))}})]})},he=function(l){var m=Object(a.i)(),h=l.visible,C=l.onVisibleChange,N=l.onFinish,O=l.id,R=oe.a.useForm(),H=Object(y.a)(R,1),p=H[0],J=!O||O===-1,Z=Object(r.useState)("text"),B=Object(y.a)(Z,2),_=B[0],T=B[1];Object(r.useEffect)(function(){O&&O!==-1?Object(g.d)(O).then(function(k){k.success&&(p.setFieldsValue(k.data),T(k.data.type))}):(p.resetFields(),T("text"))},[O,p]);var ue=Object(r.useCallback)(function(k){k.type&&k.type!==_&&T(k.type)},[_]);return Object(t.jsxs)(ne.a,{form:p,title:m.formatMessage({id:O?"editSetting":"newSetting",defaultMessage:O?"editSetting":"newSetting"}),width:"60vw",visible:h,onVisibleChange:C,onFinish:N,onValuesChange:ue,children:[Object(t.jsxs)(z.a.Group,{children:[Object(t.jsx)(Y.a,{label:Object(t.jsx)(a.a,{id:"group",defaultMessage:"group"}),rules:[{required:!0}],width:"md",name:"group"})," ",Object(t.jsx)(Y.a,{label:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"})]}),Object(t.jsxs)(z.a.Group,{children:[Object(t.jsx)(le.a,{name:"enumerable",label:Object(t.jsx)(a.a,{id:"enumerable",defaultMessage:"enumerable"})}),Object(t.jsx)(le.a,{name:"public",label:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"})})]}),Object(t.jsx)(z.a.Group,{children:Object(t.jsx)(be.a.Group,{disabled:!J,name:"type",label:Object(t.jsx)(a.a,{id:"type"}),options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"},{label:"json",value:"json"},{label:"file",value:"file"},{label:"image",value:"image"}]})}),Object(t.jsxs)("div",{children:[_==="text"&&Object(t.jsx)(Y.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"})}),_==="json"&&Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(me.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"}),tooltip:"".concat(m.formatMessage({id:"example_json"}),': {"name":"John", "age":30, "city":["New York","Warsaw"]}')}),Object(t.jsx)(z.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(X.a,{src:JSON.parse(p.getFieldValue("value"))})}catch(re){return Object(t.jsx)(X.a,{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]}),(_==="file"||_==="image")&&Object(t.jsx)(z.a.Item,{name:"value",label:"value",tooltip:"select file from current repository or upload new one",valuePropName:"value",children:Object(t.jsx)(te,{type:_})}),_==="markdown"&&Object(t.jsx)(z.a.Item,{name:"value",label:"value",tooltip:"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.",valuePropName:"value",children:Object(t.jsx)(w.a,{directory:"settings/wysiwyg"})})]})]})},pe=he,L=e("G3dp"),j=e("/MfK"),Q=function(){var V=Object(u.a)(d.a.mark(function l(m,h,C){var N;return d.a.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return N=i.default.loading(m.formatMessage({id:"loading"})),R.prev=1,R.next=4,C&&C!==-1?Object(g.h)(C,Object(W.a)({},h)):Object(g.b)(Object(W.a)({},h));case 4:return N(),i.default.success(m.formatMessage({id:"success"})),R.abrupt("return",!0);case 9:return R.prev=9,R.t0=R.catch(1),N(),i.default.error(m.formatMessage({id:"error"})),R.abrupt("return",!1);case 14:case"end":return R.stop()}},l,null,[[1,9]])}));return function(m,h,C){return V.apply(this,arguments)}}(),q=function(){var V=Object(u.a)(d.a.mark(function l(m,h){var C;return d.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return C=i.default.loading(m.formatMessage({id:"loading"})),O.prev=1,O.next=4,Object(g.c)(h);case 4:return C(),i.default.success(m.formatMessage({id:"success"})),O.abrupt("return",!0);case 9:return O.prev=9,O.t0=O.catch(1),C(),i.default.error(m.formatMessage({id:"error"})),O.abrupt("return",!1);case 14:case"end":return O.stop()}},l,null,[[1,9]])}));return function(m,h){return V.apply(this,arguments)}}(),ce=function(){var l=Object(r.useState)(!1),m=Object(y.a)(l,2),h=m[0],C=m[1],N=Object(r.useState)([]),O=Object(y.a)(N,2),R=O[0],H=O[1],p=Object(r.useRef)(),J=Object(a.i)();Object(r.useEffect)(function(){Object(g.e)().then(function(B){B.success&&H(B.data)})},[]);var Z=[{title:Object(t.jsx)(a.a,{id:"group",defaultMessage:"group"}),dataIndex:"group",hideInSearch:!1,key:"group",valueType:"select",width:100,valueEnum:R.sort().reduce(function(B,_){return Object(W.a)(Object(W.a)({},B),{},Object(c.a)({},_,_))},{})},{title:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"enumerable",defaultMessage:"enumerable"}),dataIndex:"enumerable",hideInForm:!0,hideInSearch:!0,render:function(_,T){return Object(t.jsx)(b.a,{color:T.enumerable?"success":"error",children:Object(t.jsx)(a.a,{id:T.enumerable?"true":"false",defaultMessage:T.enumerable?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(_,T){return Object(t.jsx)(b.a,{color:T.public?"success":"error",children:Object(t.jsx)(a.a,{id:T.public?"true":"false",defaultMessage:T.public?"true":"false"})})}},{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(_,T){return[Object(t.jsx)(x.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(s.a,{type:"primary",icon:Object(t.jsx)(L.a,{}),onClick:function(){return C(T.id)}})},"edit"),Object(t.jsx)(o.a,{title:Object(t.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(u.a)(d.a.mark(function ue(){var k;return d.a.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.next=2,q(J,T.id);case 2:k=fe.sent,k&&(C(!1),p.current&&p.current.reload());case 4:case"end":return fe.stop()}},ue)})),okText:Object(t.jsx)(a.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(a.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(x.a,{title:Object(t.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(s.a,{type:"primary",icon:Object(t.jsx)(j.a,{}),danger:!0})})},"delete")]}}];return Object(t.jsxs)(M.a.Fragment,{children:[Object(t.jsx)(ee.a,{headerTitle:J.formatMessage({id:"menu.settings"}),actionRef:p,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[Object(t.jsxs)(s.a,{type:"primary",onClick:function(){C(-1)},children:[Object(t.jsx)(n.a,{})," ",Object(t.jsx)(a.a,{id:"pages.searchTable.new"})]},"primary")]},request:function(_){var T=_.pageSize,ue=_.current,k=_.group;return Object(g.f)({pageSize:T,current:ue,group:k}).then(function(re){return re.success?{data:re.data,total:re.meta.total,success:!0}:[]})},columns:Z}),Object(t.jsx)(pe,{groups:R,id:h,visible:Number.isInteger(h),onVisibleChange:function(_){return _===!1&&C(!1)},onFinish:function(){var B=Object(u.a)(d.a.mark(function _(T){var ue;return d.a.wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,Q(J,T,Number(h));case 2:ue=re.sent,ue&&(C(!1),p.current&&p.current.reload());case 4:case"end":return re.stop()}},_)}));return function(_){return B.apply(this,arguments)}}()})]})},je=ce,Be=e("tU7J"),ge=e("wFql"),_e=e("Fghh"),Ee=ge.a.Text,de;(function(V){V.Array="array",V.String="string"})(de||(de={}));var Me=function(l,m){return m===de.Array?l&&Array.isArray(l)?JSON.stringify(l):"[]":l},Pe=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",m=arguments.length>1?arguments[1]:void 0;if(m===de.Array){var h=JSON.parse(l);return h&&Array.isArray(h)?h:[]}return l},ye=function(l){var m=Object(_e.j)(),h=l.visible,C=l.onVisibleChange,N=l.onFinish,O=l.value,R=oe.a.useForm(),H=Object(y.a)(R,1),p=H[0],J=Object(r.useMemo)(function(){return(O.rules||[]).includes(de.Array)?de.Array:de.String},[O.rules]);return Object(r.useEffect)(function(){p.setFieldsValue(Object(W.a)(Object(W.a)({},O),{},{value:Me(O.value,J)}))},[J,O,p]),Object(t.jsxs)(ne.a,{form:p,title:O.full_key,width:"60vw",visible:h,onVisibleChange:C,onFinish:Object(u.a)(d.a.mark(function Z(){var B;return d.a.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,Object(g.g)({key:O.full_key,value:Pe(p.getFieldsValue().value,J)});case 2:if(B=T.sent,!B.success){T.next=6;break}return N(B.success===!0),T.abrupt("return",B.success);case 6:return T.abrupt("return");case 7:case"end":return T.stop()}},Z)})),children:[Object(t.jsxs)(z.a.Group,{children:[Object(t.jsx)(le.a,{disabled:!0,name:"public",label:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"})}),Object(t.jsx)(le.a,{disabled:!0,name:"readonly",label:Object(t.jsx)(a.a,{id:"readonly",defaultMessage:"readonly"})}),Object(t.jsx)(z.a.Item,{shouldUpdate:!0,label:Object(t.jsx)(a.a,{id:"rules",defaultMessage:"rules"}),children:function(){return Object(t.jsx)(Ee,{code:!0,children:JSON.stringify(p.getFieldValue("rules"))})}})]}),J===de.Array?Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(me.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"}),tooltip:"".concat(m.formatMessage({id:"example_json"}),': ["first_field_name", "second_field_name"]')}),Object(t.jsx)(z.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(X.a,{src:JSON.parse(p.getFieldValue("value"))})}catch(B){return Object(t.jsx)(X.a,{src:JSON.parse('{ "error": "cannot parse this array" }')})}}})]}):Object(t.jsx)(Y.a,{width:"lg",name:"value",label:Object(t.jsx)(a.a,{id:"value"})})]})},De=ye,xe=[{title:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"readonly",defaultMessage:"readonly"}),dataIndex:"readonly",hideInForm:!0,hideInSearch:!0,render:function(l,m){return Object(t.jsx)(b.a,{color:m.readonly?"success":"error",children:Object(t.jsx)(a.a,{id:m.readonly?"true":"false",defaultMessage:m.readonly?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(l,m){return Object(t.jsx)(b.a,{color:m.public?"success":"error",children:Object(t.jsx)(a.a,{id:m.public?"true":"false",defaultMessage:m.public?"true":"false"})})}},{title:Object(t.jsx)(a.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0}],Ce=function V(l,m){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return!l||typeof l!="object"?!1:(Object.keys(l).forEach(function(C){var N=l[C];C===m?h.push(l):typeof N=="object"&&V(N,m,h)}),h)},Te=function(l){var m=l.packageName,h=l.values,C=l.onValueUpdated,N=Object(a.i)(),O=Object(r.useState)(),R=Object(y.a)(O,2),H=R[0],p=R[1],J=Object(r.useMemo)(function(){var Z=h[m];return Ce(Z,"rules")},[h,m]);return Object(t.jsxs)(M.a.Fragment,{children:[Object(t.jsx)(ee.a,{headerTitle:N.formatMessage({id:"menu.settings"}),rowKey:"key",search:{labelWidth:120},dataSource:J,columns:[].concat(xe,[{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(B,_){return[Object(t.jsx)(x.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(s.a,{type:"primary",icon:Object(t.jsx)(L.a,{}),onClick:function(){return p(_)}})},"edit")]}}])}),H&&Object(t.jsx)(De,{value:H,visible:H!==void 0,onVisibleChange:function(B){return B===!1&&p(void 0)},onFinish:Object(u.a)(d.a.mark(function Z(){return d.a.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:C();case 1:case"end":return _.stop()}},Z)}))})]})},Ae=Te,Ie=function(l){return l.replaceAll("escolalms","").split("_").join("")},Ue=f.default=function(){var V=Object(A.h)(),l=Object(a.i)(),m=V.tab,h=m===void 0?"user_settings":m,C=Object(r.useState)(),N=Object(y.a)(C,2),O=N[0],R=N[1],H=Object(r.useCallback)(function(){Object(g.a)().then(function(p){p.success&&R(p.data)})},[]);return Object(r.useEffect)(function(){H()},[]),O?Object(t.jsx)(F.a,{title:Object(t.jsx)(a.a,{id:"settings"}),header:{breadcrumb:{routes:[{path:"settings",breadcrumbName:l.formatMessage({id:"menu.Settings"})},{path:String(h),breadcrumbName:String(h)}]}},children:Object(t.jsxs)(D.a,{tabs:{type:"card",activeKey:h,onChange:function(J){return a.d.push("/settings/".concat(J))}},children:[Object(t.jsx)(D.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"user.settings"}),children:Object(t.jsx)(je,{})},"user_settings"),Object.keys(O).map(function(p){return Object(t.jsxs)(D.a.TabPane,{tab:Object(t.jsxs)("span",{children:[Object(t.jsx)(a.a,{id:"package"})," ",Ie(p)]}),children:[Object(t.jsx)(Ae,{values:O,packageName:p,onValueUpdated:function(){return H()}}),p]},p)})]})}):Object(t.jsx)(E.a,{})}},etVw:function(ae,f,e){"use strict";var U=e("DZo9"),E=e("8z0m"),y=e("+L6B"),r=e("2/Rp"),M=e("wx14"),D=e("q1tI"),A=e.n(D),a=e("z7Xi"),F=e("WFLz"),g=function(o,G){var x=o.fieldProps,v=o.name,s=o.action,I=o.accept,b=o.listType,c=o.title,W=c===void 0?"\u5355\u51FB\u4E0A\u4F20":c,K=o.max,i=o.icon,u=i===void 0?A.a.createElement(a.a,null):i,P=o.value,d=o.buttonProps,n=o.onChange,ee=o.disabled,S=o.proFieldProps,oe=o.fileList,ve=(K===void 0||!P||(P==null?void 0:P.length)<K)&&(S==null?void 0:S.mode)!=="read",ie=(b!=null?b:x==null?void 0:x.listType)==="picture-card";return A.a.createElement(E.a,Object(M.a)({action:s,accept:I,ref:G,name:v||"file",listType:b||"picture",fileList:oe!=null?oe:P},x,{onChange:function(ne){var Y;n==null||n(ne),x==null||(Y=x.onChange)===null||Y===void 0||Y.call(x,ne)}}),ve&&(ie?A.a.createElement("span",null,u," ",W):A.a.createElement(r.a,Object(M.a)({disabled:ee||(x==null?void 0:x.disabled)},d),u,W)))};f.a=Object(F.a)(A.a.forwardRef(g),{getValueFromEvent:function(o){return o.fileList}})},hd5d:function(ae,f,e){"use strict";var U=e("9og8"),E=e("WmNS"),y=e.n(E),r=e("q1tI"),M=e.n(r),D=e("3Ef1"),A=e.n(D),a=e("BAh9"),F=e("vtG9"),g=e.n(F),$=e("9kvl"),o=e("nKUr"),G=e.n(o),x=function(s){var I=s.value,b=s.onChange,c=s.directory,W=c===void 0?"/wysiwyg":c,K=Object($.i)();return Object(o.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(o.jsx)(A.a,{uploadImage:function(){var i=Object(U.a)(y.a.mark(function u(P){var d,n;return y.a.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,Object(a.e)(P,W);case 2:if(d=S.sent,!d.success){S.next=6;break}return n=d.data[0].name.includes("/")?d.data[0].name:"".concat(W).concat(d.data[0].name),S.abrupt("return",Object(a.d)(n,1e3));case 6:throw new Error("Error while uploading");case 7:case"end":return S.stop()}},u)}));return function(u){return i.apply(this,arguments)}}(),defaultValue:I||"",onChange:function(u){return b&&b(u())},placeholder:K.formatMessage({id:"wysiwyg_placeholder"})})})};f.a=x},lLVY:function(ae,f,e){},qFDU:function(ae,f,e){"use strict";var U=e("q1tI"),E=e.n(U);f.a=function(y){var r=y.condition,M=y.children,D=y.wrap;return r?E.a.cloneElement(D(M)):M}},vtG9:function(ae,f,e){}}]);
