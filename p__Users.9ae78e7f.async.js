(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{"DBJ/":function(W,f,t){"use strict";var Q=t("y8nQ"),D=t("Vl3Y"),J=t("etVw"),M=t("q1tI"),Y=t.n(M),h=t("9kvl"),z=t("qFDU"),j=t("nKUr"),S=t.n(j),F=function(l){var T=l.onChange,u=l.url,g=l.name,P=l.extra,m=l.accept,a=l.data,b=l.wrapInForm,K=b===void 0?!0:b,C=l.title,R=Object(h.i)();return a&&a[g]&&delete a[g],Object(j.jsx)(z.a,{condition:K,wrap:function(I){return Object(j.jsx)(D.a,{children:I})},children:Object(j.jsx)(J.a,{title:C||Object(j.jsx)(h.a,{id:"upload_click_here"}),placeholder:R.formatMessage({id:"upload_click_here"}),onChange:T,label:Object(j.jsx)(h.a,{id:"upload"}),max:2,fieldProps:{data:a,accept:m,name:g,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(u),extra:P})})};f.a=F},n6PA:function(W,f,t){},u7Dd:function(W,f,t){"use strict";t.r(f),t.d(f,"TableColumns",function(){return G});var Q=t("P2fV"),D=t("NJEC"),J=t("5Dmo"),M=t("3S7+"),Y=t("+L6B"),h=t("2/Rp"),z=t("miYZ"),j=t("tsqr"),S=t("tJVT"),F=t("+BJd"),y=t("mr32"),l=t("9og8"),T=t("WmNS"),u=t.n(T),g=t("4KAj"),P=t("xvlK"),m=t("q1tI"),a=t("9kvl"),b=t("55Ip"),K=t("tMyG"),C=t("Qiat"),R=t("sWYD"),U=t("VK58"),I=t("k1fw");function Z(v,n){return A.apply(this,arguments)}function A(){return A=Object(l.a)(u.a.mark(function v(n,s){return u.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(a.f)("/api/admin/csv/users",Object(I.a)({params:Object(I.a)(Object(I.a)({},n),{},{per_page:n&&n.pageSize,page:n&&n.current}),method:"GET",headers:{accept:"application/csv"},useCache:!1},s||{})));case 1:case"end":return c.stop()}},v)})),A.apply(this,arguments)}var H=t("G3dp"),X=t("/MfK"),w=t("mGZj"),k=t("DBJ/"),B=t("nhC9"),se=t("n6PA"),e=t("nKUr"),q=function(){var v=Object(l.a)(u.a.mark(function n(s){return u.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(U.b)(s);case 2:return c.abrupt("return",!0);case 3:case"end":return c.stop()}},n)}));return function(s){return v.apply(this,arguments)}}(),G=[{title:Object(e.jsx)(a.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0},{title:Object(e.jsx)(a.a,{id:"created_at",defaultMessage:"created_at"}),dataIndex:"created_at",hideInSearch:!0,render:function(n,s){return s.created_at&&Object(R.a)(new Date(s.created_at),w.a)}},{title:Object(e.jsx)(a.a,{id:"first_name",defaultMessage:"first_name"}),dataIndex:"first_name",hideInSearch:!0},{title:Object(e.jsx)(a.a,{id:"last_name",defaultMessage:"last_name"}),dataIndex:"last_name",hideInSearch:!0},{title:Object(e.jsx)(a.a,{id:"email",defaultMessage:"email"}),dataIndex:"email",hideInSearch:!0},{title:Object(e.jsx)(a.a,{id:"search",defaultMessage:"search"}),dataIndex:"search",hideInSearch:!1,hideInTable:!0,hideInDescriptions:!0,tooltip:Object(e.jsx)(a.a,{id:"search_tooltip_1"})},{title:Object(e.jsx)(a.a,{id:"is_active"}),dataIndex:"is_active",hideInSearch:!0,render:function(n,s){return[Object(e.jsx)(y.a,{color:s.is_active?"green":"red",children:s.is_active?Object(e.jsx)(a.a,{id:"Active"}):Object(e.jsx)(a.a,{id:"Inactive"})})]}},{title:Object(e.jsx)(a.a,{id:"email_verified",defaultMessage:"email_verified"}),dataIndex:"email_verified",hideInSearch:!0,render:function(n,s){return[Object(e.jsx)(y.a,{color:s.email_verified?"green":"red",children:s.email_verified?Object(e.jsx)(a.a,{id:"verified"}):Object(e.jsx)(a.a,{id:"unverified"})})]}},{title:Object(e.jsx)(a.a,{id:"roles",defaultMessage:"roles"}),dataIndex:"roles",hideInSearch:!0,render:function(n,s){return s.roles.map(function(x){return Object(e.jsx)(y.a,{children:x},x)})}},{title:Object(e.jsx)(a.a,{id:"roles",defaultMessage:"roles"}),key:"role",valueType:"select",dataIndex:"role",width:100,hideInTable:!0,valueEnum:{admin:{text:"Admin"},tutor:{text:"Tutor"},student:{text:"Student"}}}],_=function(){var n=Object(m.useRef)(),s=Object(a.i)(),x=Object(m.useState)({}),c=Object(S.a)(x,2),V=c[0],ee=c[1],te=Object(m.useState)(!1),$=Object(S.a)(te,2),ae=$[0],N=$[1],re=Object(m.useCallback)(Object(l.a)(u.a.mark(function E(){var d,i,o;return u.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return N(!0),r.prev=1,r.next=4,Z(V);case 4:d=r.sent,d&&(i="data:text/csv;charset=utf-8,"+d,o=document.createElement("a"),o.href=i,o.download="users.csv",document.body.appendChild(o),o.click(),document.body.removeChild(o)),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),console.error(r.t0);case 11:return r.prev=11,N(!1),r.finish(11);case 14:case"end":return r.stop()}},E,null,[[1,8,11,14]])})),[V]);return Object(e.jsx)(K.a,{children:Object(e.jsxs)(B.a,{tabs:{type:"card",activeKey:"list",onChange:function(d){switch(d){case"list":return a.d.push("/users");case"fields":return a.d.push("/users/fields");default:return a.d.push("/users/".concat(d))}}},children:[Object(e.jsx)(B.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"list"}),children:Object(e.jsx)(C.a,{headerTitle:s.formatMessage({id:"users",defaultMessage:"users"}),actionRef:n,rowKey:"key",search:{labelWidth:120},toolBarRender:function(){return[Object(e.jsx)(k.a,{title:s.formatMessage({id:"import_users"}),url:"/api/admin/csv/users",name:"file",accept:".csv",data:{return_url:"".concat(window.location.origin,"/#/user/reset-password")},onChange:function(i){i.file.status==="done"&&i.file.response.success&&j.default.success(i.file.response.message),i.file.status==="error"&&(j.default.error(i.file.response.message),console.error(i.file.response))}}),Object(e.jsxs)(h.a,{loading:ae,type:"primary",onClick:function(){return re()},children:[Object(e.jsx)(g.a,{})," ",Object(e.jsx)(a.a,{id:"export",defaultMessage:"export"})]},"primary"),Object(e.jsx)(b.a,{to:"/users/new",children:Object(e.jsxs)(h.a,{type:"primary",children:[Object(e.jsx)(P.a,{})," ",Object(e.jsx)(a.a,{id:"new",defaultMessage:"new"})]},"primary")},"new")]},request:function(d){var i=d.pageSize,o=d.current,p=d.search,r=d.role;ee({pageSize:i,current:o,search:p,role:r});var O=r&&r.toString()==="all"?void 0:r;return Object(U.m)({pageSize:i,current:o,search:p,role:O}).then(function(L){return L.success?{data:L.data,total:L.meta.total,success:!0}:[]})},columns:[].concat(G,[{hideInSearch:!0,title:Object(e.jsx)(a.a,{id:"pages.searchTable.titleOption"}),dataIndex:"option",valueType:"option",render:function(d,i){return[Object(e.jsx)(b.a,{to:"/users/".concat(i.id,"/user_info"),children:Object(e.jsx)(M.a,{title:Object(e.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(e.jsx)(h.a,{type:"primary",icon:Object(e.jsx)(H.a,{})})})},"edit"),Object(e.jsx)(D.a,{title:Object(e.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(l.a)(u.a.mark(function o(){var p;return u.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,q(i.id);case 2:p=O.sent,p&&n.current&&n.current.reload();case 4:case"end":return O.stop()}},o)})),okText:Object(e.jsx)(a.a,{id:"yes"}),cancelText:Object(e.jsx)(a.a,{id:"no"}),children:Object(e.jsx)(M.a,{title:Object(e.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(e.jsx)(h.a,{type:"primary",icon:Object(e.jsx)(X.a,{}),danger:!0})})},"delete")]}}])})},"list"),Object(e.jsx)(B.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"ModelFields"})},"fields")]})})},ne=f.default=_}}]);
