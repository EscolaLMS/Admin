(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[4254],{52688:function(T,p,e){"use strict";var E=e(1413),a=e(45987),M=e(67294),i=e(41550),v=e(85893),d=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],_=M.forwardRef(function(f,g){var c=f.fieldProps,h=f.unCheckedChildren,D=f.checkedChildren,u=f.proFieldProps,b=(0,a.Z)(f,d);return(0,v.jsx)(i.Z,(0,E.Z)({valueType:"switch",fieldProps:(0,E.Z)({unCheckedChildren:h,checkedChildren:D},c),ref:g,valuePropName:"checked",proFieldProps:u,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},b))});p.Z=_},5966:function(T,p,e){"use strict";var E=e(97685),a=e(1413),M=e(45987),i=e(21770),v=e(75842),d=e(55241),_=e(97435),f=e(67294),g=e(41550),c=e(85893),h=["fieldProps","proFieldProps"],D=["fieldProps","proFieldProps"],u="text",b=function(t){var r=t.fieldProps,n=t.proFieldProps,o=(0,M.Z)(t,h);return(0,c.jsx)(g.Z,(0,a.Z)({valueType:u,fieldProps:r,filedConfig:{valueType:u},proFieldProps:n},o))},y=function(t){var r=(0,i.Z)(t.open||!1,{value:t.open,onChange:t.onOpenChange}),n=(0,E.Z)(r,2),o=n[0],C=n[1];return(0,c.jsx)(v.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(x){var j,O=x.getFieldValue(t.name||[]);return(0,c.jsx)(d.Z,(0,a.Z)((0,a.Z)({getPopupContainer:function(A){return A&&A.parentNode?A.parentNode:A},onOpenChange:C,content:(0,c.jsxs)("div",{style:{padding:"4px 0"},children:[(j=t.statusRender)===null||j===void 0?void 0:j.call(t,O),t.strengthText?(0,c.jsx)("div",{style:{marginTop:10},children:(0,c.jsx)("span",{children:t.strengthText})}):null]}),overlayStyle:{width:240},placement:"right"},t.popoverProps),{},{open:o,children:t.children}))}})},m=function(t){var r=t.fieldProps,n=t.proFieldProps,o=(0,M.Z)(t,D),C=(0,f.useState)(!1),P=(0,E.Z)(C,2),x=P[0],j=P[1];return r!=null&&r.statusRender&&o.name?(0,c.jsx)(y,{name:o.name,statusRender:r==null?void 0:r.statusRender,popoverProps:r==null?void 0:r.popoverProps,strengthText:r==null?void 0:r.strengthText,open:x,onOpenChange:j,children:(0,c.jsx)(g.Z,(0,a.Z)({valueType:"password",fieldProps:(0,a.Z)((0,a.Z)({},(0,_.Z)(r,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(U){var A;r==null||(A=r.onBlur)===null||A===void 0||A.call(r,U),j(!1)},onClick:function(U){var A;r==null||(A=r.onClick)===null||A===void 0||A.call(r,U),j(!0)}}),proFieldProps:n,filedConfig:{valueType:u}},o))}):(0,c.jsx)(g.Z,(0,a.Z)({valueType:"password",fieldProps:r,proFieldProps:n,filedConfig:{valueType:u}},o))},l=b;l.Password=m,l.displayName="ProFormComponent",p.Z=l},19411:function(T,p,e){"use strict";e.d(p,{ZP:function(){return u}});var E=e(15009),a=e.n(E),M=e(99289),i=e.n(M),v=e(17578),d=e(2800),_=e.n(d),f=e(67294),g=e(80854),c=e(85893),h=function(y){var m=y.attrs,l=m.href,s=l.split("/").pop();return(0,c.jsx)("p",{children:(0,c.jsx)("a",{rel:"noreferrer",href:l,target:"_blank",children:s})})},D=function(y){var m=y.value,l=y.onChange,s=y.directory,t=s===void 0?"/wysiwyg":s,r=(0,g.useIntl)();return(0,c.jsx)("div",{className:"form-wysiwyg-markdown",children:(0,c.jsx)(_(),{excludeBlockMenuItems:["Sketch"],embeds:[{matcher:function(){return!0},component:h}],uploadImage:function(){var n=i()(a()().mark(function o(C){var P,x;return a()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,v.ws)(C,t);case 2:if(P=O.sent,!P.success){O.next=8;break}if(!C.type.includes("image/")){O.next=7;break}return x=P.data[0].name.includes("/")?P.data[0].name:"".concat(t).concat(P.data[0].name),O.abrupt("return",(0,v.pV)(x,1e3));case 7:return O.abrupt("return",P.data[0].url);case 8:throw new Error("Error while uploading");case 9:case"end":return O.stop()}},o)}));return function(o){return n.apply(this,arguments)}}(),defaultValue:m||"",onChange:function(o){return l&&l(o())},placeholder:r.formatMessage({id:"wysiwyg_placeholder"})})})},u=D},74603:function(T,p,e){"use strict";e.r(p);var E=e(15009),a=e.n(E),M=e(97857),i=e.n(M),v=e(99289),d=e.n(v),_=e(5574),f=e.n(_),g=e(53893),c=e(26271),h=e(952),D=e(5966),u=e(52688),b=e(2453),y=e(75081),m=e(67294),l=e(19411),s=e(74453),t=e(81587),r=e(80854),n=e(85893);p.default=function(){var o=(0,r.useIntl)(),C=(0,r.useParams)(),P=C.page,x=P==="new",j=(0,m.useState)(),O=f()(j,2),U=O[0],A=O[1],S=h.ZP.useForm(),$=f()(S,1),F=$[0],Z=(0,m.useCallback)(d()(a()().mark(function L(){var R;return a()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,g.Md)(Number(P));case 2:R=w.sent,R.success&&A(i()(i()({},R.data),{},{content:R.data.content||""}));case 4:case"end":return w.stop()}},L)})),[P]);(0,m.useEffect)(function(){if(P==="new"){A({active:!1});return}Z()},[P,Z]);var k=(0,m.useMemo)(function(){return{onFinish:function(){var L=d()(a()().mark(function B(w){var W,K;return a()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(K=i()(i()({},w),{},{bio:w.bio?w.bio:void 0}),P!=="new"){I.next=8;break}return I.next=4,(0,g.D4)(K);case 4:W=I.sent,W.success&&r.history.push("/pages/".concat(W.data.id)),I.next=11;break;case 8:return I.next=10,(0,g.T$)(Number(P),K);case 10:W=I.sent;case 11:b.ZP.success(W.message);case 12:case"end":return I.stop()}},B)}));function R(B){return L.apply(this,arguments)}return R}(),initialValues:U}},[U,P]);return U?(0,n.jsx)(s._z,{title:x?(0,n.jsx)(r.FormattedMessage,{id:"new_page"}):(0,n.jsx)(r.FormattedMessage,{id:"edit_page"}),children:(0,n.jsx)(c.ZP,{children:(0,n.jsxs)(h.ZP,i()(i()({},k),{},{form:F,onValuesChange:function(R){R.title&&F.setFieldsValue({slug:(0,t.l)(R.title)})},children:[(0,n.jsxs)(h.ZP.Group,{children:[(0,n.jsx)(D.Z,{width:"md",name:"title",label:(0,n.jsx)(r.FormattedMessage,{id:"title"}),tooltip:(0,n.jsx)(r.FormattedMessage,{id:"title"}),placeholder:o.formatMessage({id:"title"}),required:!0}),(0,n.jsx)(D.Z,{width:"md",name:"slug",label:(0,n.jsx)(r.FormattedMessage,{id:"slug"}),tooltip:(0,n.jsx)(r.FormattedMessage,{id:"slug_tooltip"}),placeholder:o.formatMessage({id:"slug"}),disabled:!0,required:!0}),(0,n.jsx)(u.Z,{name:"active",label:(0,n.jsx)(r.FormattedMessage,{id:"is_active"})})]}),(0,n.jsx)(h.ZP.Item,{name:"content",label:(0,n.jsx)(r.FormattedMessage,{id:"content"}),tooltip:(0,n.jsx)(r.FormattedMessage,{id:"content_tooltip"}),valuePropName:"value",required:!0,children:(0,n.jsx)(l.ZP,{directory:"pages/".concat(P,"/wysiwyg")})})]}))})}):(0,n.jsx)(y.Z,{})}},17578:function(T,p,e){"use strict";e.d(p,{Od:function(){return y},QZ:function(){return f},ht:function(){return c},pV:function(){return b},ws:function(){return D}});var E=e(15009),a=e.n(E),M=e(97857),i=e.n(M),v=e(99289),d=e.n(v),_=e(80854);function f(l,s){return g.apply(this,arguments)}function g(){return g=d()(a()().mark(function l(s,t){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,_.request)("/api/admin/file/list",i()({method:"GET",params:s},t||{})));case 1:case"end":return n.stop()}},l)})),g.apply(this,arguments)}function c(l,s){return h.apply(this,arguments)}function h(){return h=d()(a()().mark(function l(s,t){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,_.request)("/api/admin/file/find",i()({method:"GET",params:s},t||{})));case 1:case"end":return n.stop()}},l)})),h.apply(this,arguments)}function D(l,s,t){return u.apply(this,arguments)}function u(){return u=d()(a()().mark(function l(s,t,r){var n;return a()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return n=new FormData,n.append("file[]",s),n.append("target",t),C.abrupt("return",(0,_.request)("/api/admin/file/upload",i()({method:"POST",data:n},r||{})));case 4:case"end":return C.stop()}},l)})),u.apply(this,arguments)}var b=function(s){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/images/img?path=").concat(s,"&w=").concat(t)};function y(l,s){return m.apply(this,arguments)}function m(){return m=d()(a()().mark(function l(s,t){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,_.request)("/api/admin/file/delete",i()({method:"DELETE",data:{url:s}},t||{})));case 1:case"end":return n.stop()}},l)})),m.apply(this,arguments)}},53893:function(T,p,e){"use strict";e.d(p,{CT:function(){return m},D4:function(){return D},L1:function(){return f},Md:function(){return c},T$:function(){return b}});var E=e(15009),a=e.n(E),M=e(97857),i=e.n(M),v=e(99289),d=e.n(v),_=e(80854);function f(s,t){return g.apply(this,arguments)}function g(){return g=d()(a()().mark(function s(t,r){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,_.request)("/api/admin/pages",i()({method:"GET",useCache:!1,params:t},r||{})));case 1:case"end":return o.stop()}},s)})),g.apply(this,arguments)}function c(s,t){return h.apply(this,arguments)}function h(){return h=d()(a()().mark(function s(t,r){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,_.request)("/api/admin/pages/".concat(t),i()({method:"GET"},r||{})));case 1:case"end":return o.stop()}},s)})),h.apply(this,arguments)}function D(s,t){return u.apply(this,arguments)}function u(){return u=d()(a()().mark(function s(t,r){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,_.request)("/api/admin/pages",i()({method:"POST",headers:{"Content-Type":"application/json"},data:t},r||{})));case 1:case"end":return o.stop()}},s)})),u.apply(this,arguments)}function b(s,t,r){return y.apply(this,arguments)}function y(){return y=d()(a()().mark(function s(t,r,n){return a()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",(0,_.request)("/api/admin/pages/".concat(t),i()({method:"PATCH",headers:{"Content-Type":"application/json"},data:r},n||{})));case 1:case"end":return C.stop()}},s)})),y.apply(this,arguments)}function m(s,t){return l.apply(this,arguments)}function l(){return l=d()(a()().mark(function s(t,r){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,_.request)("/api/admin/pages/".concat(t),i()({method:"DELETE",headers:{"Content-Type":"application/json"}},r||{})));case 1:case"end":return o.stop()}},s)})),l.apply(this,arguments)}},81587:function(T,p,e){"use strict";e.d(p,{l:function(){return E}});var E=function(M){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"-",v=M.toString().toLowerCase().trim(),d=[{to:"a",from:"[\xC0\xC1\xC2\xC3\xC5\xC6\u0100\u0102\u0104\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6]"},{to:"ae",from:"[\xC4]"},{to:"c",from:"[\xC7\u0106\u0108\u010C]"},{to:"d",from:"[\xD0\u010E\u0110\xDE]"},{to:"e",from:"[\xC8\xC9\xCA\xCB\u0112\u0114\u0116\u0118\u011A\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6]"},{to:"g",from:"[\u011C\u011E\u0122\u01F4]"},{to:"h",from:"[\u0124\u1E26]"},{to:"i",from:"[\xCC\xCD\xCE\xCF\u0128\u012A\u012E\u0130\u1EC8\u1ECA]"},{to:"j",from:"[\u0134]"},{to:"ij",from:"[\u0132]"},{to:"k",from:"[\u0136]"},{to:"l",from:"[\u0139\u013B\u013D\u0141]"},{to:"m",from:"[\u1E3E]"},{to:"n",from:"[\xD1\u0143\u0145\u0147]"},{to:"o",from:"[\xD2\xD3\xD4\xD5\xD8\u014C\u014E\u0150\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u01EA\u01EC\u01A0]"},{to:"oe",from:"[\u0152\xD6]"},{to:"p",from:"[\u1E55]"},{to:"r",from:"[\u0154\u0156\u0158]"},{to:"s",from:"[\u015A\u015C\u015E\u0160]"},{to:"ss",from:"[\xDF]"},{to:"t",from:"[\u0162\u0164]"},{to:"u",from:"[\xD9\xDA\xDB\u0168\u016A\u016C\u016E\u0170\u0172\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u01AF]"},{to:"ue",from:"[\xDC]"},{to:"w",from:"[\u1E82\u0174\u1E80\u1E84]"},{to:"x",from:"[\u1E8D]"},{to:"y",from:"[\xDD\u0176\u0178\u1EF2\u1EF4\u1EF6\u1EF8]"},{to:"z",from:"[\u0179\u017B\u017D]"},{to:"-",from:"[\xB7/_,:;']"}];return d.forEach(function(_){v=v.replace(new RegExp(_.from,"gi"),_.to)}),v=v.toString().toLowerCase().replace(/\s+/g,"-").replace(/&/g,"-and-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),typeof i!="undefined"&&i!=="-"&&(v=v.replace(/-/g,i)),v}},20640:function(T,p,e){"use strict";var E=e(11742),a={"text/plain":"Text","text/html":"Url",default:"Text"},M="Copy to clipboard: #{key}, Enter";function i(d){var _=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return d.replace(/#{\s*key\s*}/g,_)}function v(d,_){var f,g,c,h,D,u,b=!1;_||(_={}),f=_.debug||!1;try{c=E(),h=document.createRange(),D=document.getSelection(),u=document.createElement("span"),u.textContent=d,u.ariaHidden="true",u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",function(m){if(m.stopPropagation(),_.format)if(m.preventDefault(),typeof m.clipboardData=="undefined"){f&&console.warn("unable to use e.clipboardData"),f&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var l=a[_.format]||a.default;window.clipboardData.setData(l,d)}else m.clipboardData.clearData(),m.clipboardData.setData(_.format,d);_.onCopy&&(m.preventDefault(),_.onCopy(m.clipboardData))}),document.body.appendChild(u),h.selectNodeContents(u),D.addRange(h);var y=document.execCommand("copy");if(!y)throw new Error("copy command was unsuccessful");b=!0}catch(m){f&&console.error("unable to copy using execCommand: ",m),f&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(_.format||"text",d),_.onCopy&&_.onCopy(window.clipboardData),b=!0}catch(l){f&&console.error("unable to copy using clipboardData: ",l),f&&console.error("falling back to prompt"),g=i("message"in _?_.message:M),window.prompt(g,d)}}finally{D&&(typeof D.removeRange=="function"?D.removeRange(h):D.removeAllRanges()),u&&document.body.removeChild(u),c()}return b}T.exports=v},11742:function(T){T.exports=function(){var p=document.getSelection();if(!p.rangeCount)return function(){};for(var e=document.activeElement,E=[],a=0;a<p.rangeCount;a++)E.push(p.getRangeAt(a));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return p.removeAllRanges(),function(){p.type==="Caret"&&p.removeAllRanges(),p.rangeCount||E.forEach(function(M){p.addRange(M)}),e&&e.focus()}}}}]);
