(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"27AM":function(q,U,e){"use strict";e.r(U);var ee=e("P2fV"),K=e("NJEC"),te=e("5Dmo"),J=e("3S7+"),b=e("k1fw"),T=e("PpiC"),h=e("bbsP"),k=e("/wGt"),S=e("tU7J"),W=e("wFql"),G=e("+L6B"),D=e("2/Rp"),E=e("tJVT"),m=e("qLMh"),Y=e("miYZ"),H=e("tsqr"),y=e("9og8"),g=e("/MfK"),d=e("q1tI"),B=e.n(d),c=e("9kvl"),Q=e("tMyG"),Z=e("Qiat"),N=e("0WSk"),C=e("sWYD"),w=e("mGZj");function $(u,n){return P.apply(this,arguments)}function P(){return P=Object(y.a)(Object(m.a)().mark(function u(n,j){return Object(m.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(c.i)("/api/admin/course-access-enquiries",Object(b.a)({method:"GET",params:Object(b.a)(Object(b.a)({},n),{},{per_page:n.pageSize,page:n.current})},j||{})));case 1:case"end":return a.stop()}},u)})),P.apply(this,arguments)}function F(u,n){return I.apply(this,arguments)}function I(){return I=Object(y.a)(Object(m.a)().mark(function u(n,j){return Object(m.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(c.i)("/api/admin/course-access-enquiries/".concat(n),Object(b.a)({method:"DELETE"},j||{})));case 1:case"end":return a.stop()}},u)})),I.apply(this,arguments)}function V(u,n){return R.apply(this,arguments)}function R(){return R=Object(y.a)(Object(m.a)().mark(function u(n,j){return Object(m.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(c.i)("/api/admin/course-access-enquiries/approve/".concat(n),Object(b.a)({method:"POST"},j||{})));case 1:case"end":return a.stop()}},u)})),R.apply(this,arguments)}var A=e("Vpfc"),l=e("A6KM"),t=e("nKUr"),X=["type","defaultRender"],L=["type","defaultRender"],_=function(){var u=Object(y.a)(Object(m.a)().mark(function n(j){return Object(m.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",F(j).then(function(o){return o.success&&H.b.success(o.message),!0}));case 1:case"end":return a.stop()}},n)}));return function(j){return u.apply(this,arguments)}}(),s=function(n){var j=n.data,M=Object(d.useState)(!1),a=Object(E.a)(M,2),o=a[0],r=a[1];return j&&typeof j=="object"&&Object.keys(j).length>0?Object(t.jsxs)(B.a.Fragment,{children:[Object(t.jsx)(D.a,{size:"small",onClick:function(){return r(!0)},children:Object(t.jsx)(c.a,{id:"show",defaultMessage:"show"})}),Object(t.jsx)(k.a,{width:700,open:o,onClose:function(){return r(!1)},children:Object(t.jsx)(W.a.Paragraph,{children:Object(t.jsx)("pre",{children:JSON.stringify(j,null,2)})})})]}):Object(t.jsx)(B.a.Fragment,{})},i=function(){var n=Object(d.useRef)(),j=Object(c.l)(),M=[{title:Object(t.jsx)(c.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0},{title:Object(t.jsx)(c.a,{id:"course",defaultMessage:"course"}),dataIndex:"course_id",renderFormItem:function(o,r,O){var f=r.type,z=r.defaultRender,p=Object(T.a)(r,X);if(f==="form")return null;var x=O.getFieldValue("state");return Object(t.jsx)(l.a,Object(b.a)(Object(b.a)({},p),{},{state:{type:x}}))},render:function(o,r){return r.course&&r.course.id&&Object(t.jsx)(A.a,{type:"App\\Models\\Course",type_id:r.course.id},"course_id")}},{title:Object(t.jsx)(c.a,{id:"user",defaultMessage:"user"}),dataIndex:"user_id",renderFormItem:function(o,r,O){var f=r.type,z=r.defaultRender,p=Object(T.a)(r,L);if(f==="form")return null;var x=O.getFieldValue("state");return Object(t.jsx)(N.a,Object(b.a)(Object(b.a)({},p),{},{state:{type:x}}))},render:function(o,r){var O,f;return((O=r.user)===null||O===void 0?void 0:O.id)&&Object(t.jsx)(A.a,{type:"EscolaLms\\Core\\Models\\User",type_id:(f=r.user)===null||f===void 0?void 0:f.id},"user")}},{title:Object(t.jsx)(c.a,{id:"created_at",defaultMessage:"Created at"}),dataIndex:"created_at",hideInSearch:!0,render:function(o,r){return r.created_at&&Object(C.a)(new Date(r.created_at),w.a)}},{title:Object(t.jsx)(c.a,{id:"status",defaultMessage:"Status"}),dataIndex:"status",valueType:"select",valueEnum:{pending:{text:"pending",status:"pending"},approved:{text:"approved",status:"approved"}},render:function(o,r){return r.status==="pending"?Object(t.jsx)(D.a,{size:"small",type:"primary",onClick:function(){V(r.id).then(function(f){f.success&&n.current&&n.current.reload()})},children:Object(t.jsx)(c.a,{id:"approve",defaultMessage:"Approve"})}):r.status}},{title:Object(t.jsx)(c.a,{id:"extra_data",defaultMessage:"Extra data"}),dataIndex:"data",hideInSearch:!0,render:function(o,r){return Object(t.jsx)(s,{data:r.data})}},{hideInSearch:!0,title:Object(t.jsx)(c.a,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",render:function(o,r){return[Object(t.jsx)(K.a,{title:Object(t.jsx)(c.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(y.a)(Object(m.a)().mark(function O(){var f;return Object(m.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,_(r.id);case 2:f=p.sent,f&&n.current&&n.current.reload();case 4:case"end":return p.stop()}},O)})),okText:Object(t.jsx)(c.a,{id:"yes"}),cancelText:Object(t.jsx)(c.a,{id:"no"}),children:Object(t.jsx)(J.a,{title:Object(t.jsx)(c.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(D.a,{type:"primary",icon:Object(t.jsx)(g.a,{}),danger:!0})})},"delete")]}}];return Object(t.jsx)(Q.a,{children:Object(t.jsx)(Z.a,{headerTitle:j.formatMessage({id:"courseAccessEnquiries",defaultMessage:"Course Access Enquiries"}),search:{layout:"vertical"},actionRef:n,rowKey:"id",request:function(o){var r=o.pageSize,O=o.current,f=o.course_id,z=o.status,p=o.user_id;return $({pageSize:r,current:O,course_id:f,user_id:p,status:z}).then(function(x){return x.success?{data:x.data,total:x.meta.total,success:!0}:[]})},columns:M})})},v=U.default=i},A6KM:function(q,U,e){"use strict";e.d(U,"a",function(){return H});var ee=e("OaEy"),K=e("2fM7"),te=e("T2oS"),J=e("W9HT"),b=e("oBTY"),T=e("tJVT"),h=e("q1tI"),k=e.n(h),S=e("H6aw"),W=e("EmS3"),G=e("Gb5Y"),D=e("9kvl"),E=e("nKUr"),m=e.n(E),Y=function(g){return g.map(function(d){return"name"in d?{id:Number(d.id),name:d.name}:{id:Number(d.id),name:d.title?d.title:""}})},H=function(g){var d=g.value,B=g.onChange,c=g.multiple,Q=c===void 0?!1:c,Z=g.defaultValue,N=g.modelType,C=N===void 0?"COURSE":N,w=Object(h.useState)([]),$=Object(T.a)(w,2),P=$[0],F=$[1],I=Object(h.useState)(!1),V=Object(T.a)(I,2),R=V[0],A=V[1],l=Object(h.useRef)(),t=Object(h.useCallback)(function(s){var i,v,u,n;switch(C){case"COURSE":return Object(S.e)(s,{signal:l==null||(i=l.current)===null||i===void 0?void 0:i.signal});case"WEBINAR":return Object(W.f)(s,{signal:l==null||(v=l.current)===null||v===void 0?void 0:v.signal});case"CONSULTATIONS":return Object(G.b)(s,{signal:l==null||(u=l.current)===null||u===void 0?void 0:u.signal});default:return Object(S.e)(s,{signal:l==null||(n=l.current)===null||n===void 0?void 0:n.signal})}},[C,l]),X=Object(h.useCallback)(function(s){var i,v,u,n;switch(C){case"COURSE":return Object(S.k)(Number(s),{signal:(i=l.current)===null||i===void 0?void 0:i.signal});case"WEBINAR":return Object(W.d)(Number(s),{signal:(v=l.current)===null||v===void 0?void 0:v.signal});case"CONSULTATIONS":return Object(G.e)(Number(s),{signal:(u=l.current)===null||u===void 0?void 0:u.signal});default:return Object(S.k)(Number(s),{signal:(n=l.current)===null||n===void 0?void 0:n.signal})}},[C,l]),L=Object(h.useCallback)(function(s){A(!0),l.current&&l.current.abort(),l.current=new AbortController,t(s?{title:s}:{}).then(function(i){i.success&&F(Y(i.data)),A(!1)}).catch(function(){return A(!1)})},[C]),_=Object(h.useCallback)(function(s){L(s)},[L]);return Object(h.useEffect)(function(){return l.current=new AbortController,d&&X(Number(d)).then(function(s){s&&s.success&&F(function(i){return[].concat(Object(b.a)(i),Object(b.a)(Y([s.data])))})}),function(){l.current&&l.current.abort()}},[d,C]),Object(E.jsx)(K.a,{defaultValue:Z,onFocus:function(){return L()},allowClear:!0,style:{width:"100%"},value:d,onChange:B,mode:Q?"multiple":void 0,showSearch:!0,onSearch:_,placeholder:Object(E.jsx)(D.a,{id:"select_content",defaultMessage:"select_content"}),optionFilterProp:"children",filterOption:function(i,v){if(v&&v.children){var u;return(v==null||(u=v.children)===null||u===void 0?void 0:u.toString().toLowerCase().indexOf(i.toLowerCase()))>=0}return!0},notFoundContent:R?Object(E.jsx)(J.a,{size:"small"}):null,optionLabelProp:"label",children:P.map(function(s){return Object(E.jsx)(K.a.Option,{value:s.id,label:s.name,children:s.name},s.id)})})}}}]);
