"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[3015,2803,8047],{58664:function(ne,W,e){e.d(W,{T:function(){return Q}});var z=e(19632),h=e.n(z),V=e(5574),I=e.n(V),Z=e(83863),G=e(75081),j=e(67294),B=e(51490),P=e(99100),m=e(32283),X=e(80854),x=e(85893),N=function(E){return E.map(function(g){return"name"in g?{id:Number(g.id),name:g.name}:{id:Number(g.id),name:g.title?g.title:""}})},Q=function(E){var g=E.value,J=E.onChange,D=E.multiple,Y=D===void 0?!1:D,w=E.defaultValue,R=E.modelType,A=R===void 0?"COURSE":R,k=(0,j.useState)([]),$=I()(k,2),F=$[0],u=$[1],q=(0,j.useState)(!1),b=I()(q,2),ee=b[0],O=b[1],s=(0,j.useRef)(),L=(0,j.useCallback)(function(a){var i,v,p,y;switch(A){case"COURSE":return(0,P.N7)(a,{signal:s==null||(i=s.current)===null||i===void 0?void 0:i.signal});case"WEBINAR":return(0,m.i5)(a,{signal:s==null||(v=s.current)===null||v===void 0?void 0:v.signal});case"CONSULTATIONS":return(0,B.sL)(a,{signal:s==null||(p=s.current)===null||p===void 0?void 0:p.signal});default:return(0,P.N7)(a,{signal:s==null||(y=s.current)===null||y===void 0?void 0:y.signal})}},[A,s]),te=(0,j.useCallback)(function(a){var i,v,p,y;switch(A){case"COURSE":return(0,P.XR)(Number(a),{signal:(i=s.current)===null||i===void 0?void 0:i.signal});case"WEBINAR":return(0,m.tz)(Number(a),{signal:(v=s.current)===null||v===void 0?void 0:v.signal});case"CONSULTATIONS":return(0,B.hW)(Number(a),{signal:(p=s.current)===null||p===void 0?void 0:p.signal});default:return(0,P.XR)(Number(a),{signal:(y=s.current)===null||y===void 0?void 0:y.signal})}},[A,s]),T=(0,j.useCallback)(function(a){O(!0),s.current&&s.current.abort(),s.current=new AbortController,L(a?{title:a}:{}).then(function(i){i.success&&u(N(i.data)),O(!1)}).catch(function(){return O(!1)})},[A]),t=(0,j.useCallback)(function(a){T(a)},[T]);return(0,j.useEffect)(function(){return s.current=new AbortController,g&&te(Number(g)).then(function(a){a&&a.success&&u(function(i){return[].concat(h()(i),h()(N([a.data])))})}),function(){s.current&&s.current.abort()}},[g,A]),(0,x.jsx)(Z.default,{defaultValue:w,onFocus:function(){return T()},allowClear:!0,style:{width:"100%"},value:g,onChange:J,mode:Y?"multiple":void 0,showSearch:!0,onSearch:t,placeholder:(0,x.jsx)(X.FormattedMessage,{id:"select_content",defaultMessage:"select_content"}),optionFilterProp:"children",filterOption:function(i,v){if(v&&v.children){var p;return(v==null||(p=v.children)===null||p===void 0?void 0:p.toString().toLowerCase().indexOf(i.toLowerCase()))>=0}return!0},notFoundContent:ee?(0,x.jsx)(G.Z,{size:"small"}):null,optionLabelProp:"label",children:F.map(function(a){return(0,x.jsx)(Z.default.Option,{value:a.id,label:a.name,children:a.name},a.id)})})}},26781:function(ne,W,e){e.r(W),e.d(W,{default:function(){return ae}});var z=e(97857),h=e.n(z),V=e(13769),I=e.n(V),Z=e(52677),G=e.n(Z),j=e(5574),B=e.n(j),P=e(15009),m=e.n(P),X=e(99289),x=e.n(X),N=e(44167),Q=e(45919),H=e(82061),E=e(74453),g=e(16894),J=e(2453),D=e(14726),Y=e(85265),w=e(25093),R=e(66309),A=e(86738),k=e(83062),$=e(60943),F=e(67294),u=e(80854),q=e(58664),b=e(62235);function ee(C,l){return O.apply(this,arguments)}function O(){return O=x()(m()().mark(function C(l,c){return m()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,u.request)("/api/admin/course-access-enquiries",h()({method:"GET",params:h()(h()({},l),{},{per_page:l.pageSize,page:l.current})},c||{})));case 1:case"end":return n.stop()}},C)})),O.apply(this,arguments)}function s(C,l){return L.apply(this,arguments)}function L(){return L=x()(m()().mark(function C(l,c){return m()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,u.request)("/api/admin/course-access-enquiries/".concat(l),h()({method:"DELETE"},c||{})));case 1:case"end":return n.stop()}},C)})),L.apply(this,arguments)}function te(C,l){return T.apply(this,arguments)}function T(){return T=x()(m()().mark(function C(l,c){return m()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,u.request)("/api/admin/course-access-enquiries/approve/".concat(l),h()({method:"POST"},c||{})));case 1:case"end":return n.stop()}},C)})),T.apply(this,arguments)}var t=e(85893),a=["type","defaultRender"],i=["type","defaultRender"],v=function(){var C=x()(m()().mark(function l(c){return m()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",s(c).then(function(d){return d.success&&J.ZP.success(d.message),!0}));case 1:case"end":return n.stop()}},l)}));return function(c){return C.apply(this,arguments)}}(),p=function(l){var c=l.data,S=(0,F.useState)(!1),n=B()(S,2),d=n[0],r=n[1];return c&&G()(c)==="object"&&Object.keys(c).length>0?(0,t.jsxs)(F.Fragment,{children:[(0,t.jsx)(D.ZP,{size:"small",onClick:function(){return r(!0)},children:(0,t.jsx)(u.FormattedMessage,{id:"show",defaultMessage:"show"})}),(0,t.jsx)(Y.Z,{width:700,open:d,onClose:function(){return r(!1)},children:(0,t.jsx)(w.Z.Paragraph,{children:Object.keys(c).map(function(o){return(0,t.jsxs)("p",{children:[(0,t.jsx)(u.FormattedMessage,{id:o,defaultMessage:o}),":",(0,t.jsxs)("span",{children:[" ",c[o]]})]},o)})})})]}):(0,t.jsx)(F.Fragment,{})},y=function(){var l=(0,F.useRef)(),c=(0,u.useIntl)(),S=[{title:(0,t.jsx)(u.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:(0,t.jsx)(u.FormattedMessage,{id:"course",defaultMessage:"course"}),dataIndex:"course_id",renderFormItem:function(d,r,o){var f=r.type,_=r.defaultRender,M=I()(r,a);if(f==="form")return null;var U=o.getFieldValue("state");return(0,t.jsx)(q.T,h()(h()({},M),{},{state:{type:U}}))},render:function(d,r){return r.course&&r.course.id&&(0,t.jsx)(b.Z,{type:"App\\Models\\Course",type_id:r.course.id},"course_id")}},{title:(0,t.jsx)(u.FormattedMessage,{id:"user",defaultMessage:"user"}),dataIndex:"user_id",renderFormItem:function(d,r,o){var f=r.type,_=r.defaultRender,M=I()(r,i);if(f==="form")return null;var U=o.getFieldValue("state");return(0,t.jsx)(N.Z,h()(h()({},M),{},{state:{type:U}}))},render:function(d,r){var o,f;return((o=r.user)===null||o===void 0?void 0:o.id)&&(0,t.jsx)(b.Z,{type:"EscolaLms\\Core\\Models\\User",type_id:(f=r.user)===null||f===void 0?void 0:f.id},"user")}},{title:(0,t.jsx)(u.FormattedMessage,{id:"created_at",defaultMessage:"Created at"}),dataIndex:"created_at",hideInSearch:!0,sorter:!0,render:function(d,r){return r.created_at&&(0,$.WU)(new Date(r.created_at),Q.Cu)}},{title:(0,t.jsx)(u.FormattedMessage,{id:"status",defaultMessage:"Status"}),dataIndex:"status",sorter:!0,valueType:"select",valueEnum:{pending:{text:(0,t.jsx)(R.Z,{color:"processing",children:(0,t.jsx)(u.FormattedMessage,{id:"pending",defaultMessage:"pending"})}),status:"pending"},approved:{text:(0,t.jsx)(R.Z,{color:"success",children:(0,t.jsx)(u.FormattedMessage,{id:"approved",defaultMessage:"approved"})}),status:"approved"}},render:function(d,r){return r.status==="pending"?(0,t.jsx)(D.ZP,{size:"small",type:"primary",onClick:function(){te(r.id).then(function(f){f.success&&l.current&&l.current.reload()})},children:(0,t.jsx)(u.FormattedMessage,{id:"approve",defaultMessage:"Approve"})}):(0,t.jsx)(R.Z,{color:r.status==="approved"?"success":"processing",children:(0,t.jsx)(u.FormattedMessage,{id:r.status,defaultMessage:r.status})})}},{title:(0,t.jsx)(u.FormattedMessage,{id:"extra_data",defaultMessage:"Extra data"}),dataIndex:"data",hideInSearch:!0,render:function(d,r){return(0,t.jsx)(p,{data:r.data})}},{hideInSearch:!0,title:(0,t.jsx)(u.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",render:function(d,r){return[(0,t.jsx)(A.Z,{title:(0,t.jsx)(u.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:x()(m()().mark(function o(){var f;return m()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,v(r.id);case 2:f=M.sent,f&&l.current&&l.current.reload();case 4:case"end":return M.stop()}},o)})),okText:(0,t.jsx)(u.FormattedMessage,{id:"yes"}),cancelText:(0,t.jsx)(u.FormattedMessage,{id:"no"}),children:(0,t.jsx)(k.Z,{title:(0,t.jsx)(u.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,t.jsx)(D.ZP,{type:"primary",icon:(0,t.jsx)(H.Z,{}),danger:!0})})},"delete")]}}];return(0,t.jsx)(E._z,{children:(0,t.jsx)(g.ZP,{headerTitle:c.formatMessage({id:"courseAccessEnquiries",defaultMessage:"Course Access Enquiries"}),search:{layout:"vertical"},actionRef:l,rowKey:"id",request:function(d,r){var o=d.pageSize,f=d.current,_=d.course_id,M=d.status,U=d.user_id,K=r&&Object.entries(r)[0];return ee({pageSize:o,current:f,course_id:_,user_id:U,status:M,order_by:K&&K[0],order:K?K[1]==="ascend"?"ASC":"DESC":void 0}).then(function(re){return re.success?{data:re.data,total:re.meta.total,success:!0}:[]})},columns:S})})},ae=y}}]);
