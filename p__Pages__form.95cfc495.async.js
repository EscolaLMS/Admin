(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[4254],{52688:function(O,c,e){"use strict";var E=e(1413),n=e(45987),D=e(67294),l=e(41550),h=e(85893),d=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],t=D.forwardRef(function(p,g){var b=p.fieldProps,f=p.unCheckedChildren,v=p.checkedChildren,s=p.proFieldProps,A=(0,n.Z)(p,d);return(0,h.jsx)(l.Z,(0,E.Z)({valueType:"switch",fieldProps:(0,E.Z)({unCheckedChildren:f,checkedChildren:v},b),ref:g,valuePropName:"checked",proFieldProps:s,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},A))});c.Z=t},19411:function(O,c,e){"use strict";e.d(c,{ZP:function(){return s}});var E=e(15009),n=e.n(E),D=e(99289),l=e.n(D),h=e(17578),d=e(2800),t=e.n(d),p=e(67294),g=e(80854),b=e(85893),f=function(M){var m=M.attrs,i=m.href,a=i.split("/").pop();return(0,b.jsx)("p",{children:(0,b.jsx)("a",{rel:"noreferrer",href:i,target:"_blank",children:a})})},v=function(M){var m=M.value,i=M.onChange,a=M.directory,o=a===void 0?"/wysiwyg":a,_=(0,g.useIntl)();return(0,b.jsx)("div",{className:"form-wysiwyg-markdown",children:(0,b.jsx)(t(),{excludeBlockMenuItems:["Sketch"],embeds:[{matcher:function(){return!0},component:f}],uploadImage:function(){var r=l()(n()().mark(function u(y){var P,I;return n()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,h.ws)(y,o);case 2:if(P=C.sent,!P.success){C.next=8;break}if(!y.type.includes("image/")){C.next=7;break}return I=P.data[0].name.includes("/")?P.data[0].name:"".concat(o).concat(P.data[0].name),C.abrupt("return",(0,h.pV)(I,1e3));case 7:return C.abrupt("return",P.data[0].url);case 8:throw new Error("Error while uploading");case 9:case"end":return C.stop()}},u)}));return function(u){return r.apply(this,arguments)}}(),defaultValue:m||"",onChange:function(u){return i&&i(u())},placeholder:_.formatMessage({id:"wysiwyg_placeholder"})})})},s=v},74603:function(O,c,e){"use strict";e.r(c);var E=e(15009),n=e.n(E),D=e(97857),l=e.n(D),h=e(99289),d=e.n(h),t=e(5574),p=e.n(t),g=e(53893),b=e(26271),f=e(952),v=e(5966),s=e(52688),A=e(2453),M=e(75081),m=e(67294),i=e(19411),a=e(74453),o=e(81587),_=e(80854),r=e(85893);c.default=function(){var u=(0,_.useIntl)(),y=(0,_.useParams)(),P=y.page,I=P==="new",K=(0,m.useState)(),C=p()(K,2),L=C[0],x=C[1],k=f.ZP.useForm(),Z=p()(k,1),F=Z[0],S=(0,m.useCallback)(d()(n()().mark(function U(){var j;return n()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,g.Md)(Number(P));case 2:j=w.sent,j.success&&x(l()(l()({},j.data),{},{content:j.data.content||""}));case 4:case"end":return w.stop()}},U)})),[P]);(0,m.useEffect)(function(){if(P==="new"){x({active:!1});return}S()},[P,S]);var $=(0,m.useMemo)(function(){return{onFinish:function(){var U=d()(n()().mark(function W(w){var R,B;return n()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(B=l()(l()({},w),{},{bio:w.bio?w.bio:void 0}),P!=="new"){T.next=8;break}return T.next=4,(0,g.D4)(B);case 4:R=T.sent,R.success&&_.history.push("/pages/".concat(R.data.id)),T.next=11;break;case 8:return T.next=10,(0,g.T$)(Number(P),B);case 10:R=T.sent;case 11:A.ZP.success(R.message);case 12:case"end":return T.stop()}},W)}));function j(W){return U.apply(this,arguments)}return j}(),initialValues:L}},[L,P]);return L?(0,r.jsx)(a._z,{title:I?(0,r.jsx)(_.FormattedMessage,{id:"new_page"}):(0,r.jsx)(_.FormattedMessage,{id:"edit_page"}),children:(0,r.jsx)(b.ZP,{children:(0,r.jsxs)(f.ZP,l()(l()({},$),{},{form:F,onValuesChange:function(j){j.title&&F.setFieldsValue({slug:(0,o.l)(j.title)})},children:[(0,r.jsxs)(f.ZP.Group,{children:[(0,r.jsx)(v.Z,{width:"md",name:"title",label:(0,r.jsx)(_.FormattedMessage,{id:"title"}),tooltip:(0,r.jsx)(_.FormattedMessage,{id:"title"}),placeholder:u.formatMessage({id:"title"}),required:!0}),(0,r.jsx)(v.Z,{width:"md",name:"slug",label:(0,r.jsx)(_.FormattedMessage,{id:"slug"}),tooltip:(0,r.jsx)(_.FormattedMessage,{id:"slug_tooltip"}),placeholder:u.formatMessage({id:"slug"}),disabled:!0,required:!0}),(0,r.jsx)(s.Z,{name:"active",label:(0,r.jsx)(_.FormattedMessage,{id:"is_active"})})]}),(0,r.jsx)(f.ZP.Item,{name:"content",label:(0,r.jsx)(_.FormattedMessage,{id:"content"}),tooltip:(0,r.jsx)(_.FormattedMessage,{id:"content_tooltip"}),valuePropName:"value",required:!0,children:(0,r.jsx)(i.ZP,{directory:"pages/".concat(P,"/wysiwyg")})})]}))})}):(0,r.jsx)(M.Z,{})}},17578:function(O,c,e){"use strict";e.d(c,{Od:function(){return M},QZ:function(){return p},ht:function(){return b},pV:function(){return A},ws:function(){return v}});var E=e(15009),n=e.n(E),D=e(97857),l=e.n(D),h=e(99289),d=e.n(h),t=e(80854);function p(i,a){return g.apply(this,arguments)}function g(){return g=d()(n()().mark(function i(a,o){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,t.request)("/api/admin/file/list",l()({method:"GET",params:a},o||{})));case 1:case"end":return r.stop()}},i)})),g.apply(this,arguments)}function b(i,a){return f.apply(this,arguments)}function f(){return f=d()(n()().mark(function i(a,o){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,t.request)("/api/admin/file/find",l()({method:"GET",params:a},o||{})));case 1:case"end":return r.stop()}},i)})),f.apply(this,arguments)}function v(i,a,o){return s.apply(this,arguments)}function s(){return s=d()(n()().mark(function i(a,o,_){var r;return n()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return r=new FormData,r.append("file[]",a),r.append("target",o),y.abrupt("return",(0,t.request)("/api/admin/file/upload",l()({method:"POST",data:r},_||{})));case 4:case"end":return y.stop()}},i)})),s.apply(this,arguments)}var A=function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/images/img?path=").concat(a,"&w=").concat(o)};function M(i,a){return m.apply(this,arguments)}function m(){return m=d()(n()().mark(function i(a,o){return n()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,t.request)("/api/admin/file/delete",l()({method:"DELETE",data:{url:a}},o||{})));case 1:case"end":return r.stop()}},i)})),m.apply(this,arguments)}},53893:function(O,c,e){"use strict";e.d(c,{CT:function(){return m},D4:function(){return v},L1:function(){return p},Md:function(){return b},T$:function(){return A}});var E=e(15009),n=e.n(E),D=e(97857),l=e.n(D),h=e(99289),d=e.n(h),t=e(80854);function p(a,o){return g.apply(this,arguments)}function g(){return g=d()(n()().mark(function a(o,_){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,t.request)("/api/admin/pages",l()({method:"GET",useCache:!1,params:o},_||{})));case 1:case"end":return u.stop()}},a)})),g.apply(this,arguments)}function b(a,o){return f.apply(this,arguments)}function f(){return f=d()(n()().mark(function a(o,_){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,t.request)("/api/admin/pages/".concat(o),l()({method:"GET"},_||{})));case 1:case"end":return u.stop()}},a)})),f.apply(this,arguments)}function v(a,o){return s.apply(this,arguments)}function s(){return s=d()(n()().mark(function a(o,_){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,t.request)("/api/admin/pages",l()({method:"POST",headers:{"Content-Type":"application/json"},data:o},_||{})));case 1:case"end":return u.stop()}},a)})),s.apply(this,arguments)}function A(a,o,_){return M.apply(this,arguments)}function M(){return M=d()(n()().mark(function a(o,_,r){return n()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,t.request)("/api/admin/pages/".concat(o),l()({method:"PATCH",headers:{"Content-Type":"application/json"},data:_},r||{})));case 1:case"end":return y.stop()}},a)})),M.apply(this,arguments)}function m(a,o){return i.apply(this,arguments)}function i(){return i=d()(n()().mark(function a(o,_){return n()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,t.request)("/api/admin/pages/".concat(o),l()({method:"DELETE",headers:{"Content-Type":"application/json"}},_||{})));case 1:case"end":return u.stop()}},a)})),i.apply(this,arguments)}},81587:function(O,c,e){"use strict";e.d(c,{l:function(){return E}});var E=function(D){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"-",h=D.toString().toLowerCase().trim(),d=[{to:"a",from:"[\xC0\xC1\xC2\xC3\xC5\xC6\u0100\u0102\u0104\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6]"},{to:"ae",from:"[\xC4]"},{to:"c",from:"[\xC7\u0106\u0108\u010C]"},{to:"d",from:"[\xD0\u010E\u0110\xDE]"},{to:"e",from:"[\xC8\xC9\xCA\xCB\u0112\u0114\u0116\u0118\u011A\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6]"},{to:"g",from:"[\u011C\u011E\u0122\u01F4]"},{to:"h",from:"[\u0124\u1E26]"},{to:"i",from:"[\xCC\xCD\xCE\xCF\u0128\u012A\u012E\u0130\u1EC8\u1ECA]"},{to:"j",from:"[\u0134]"},{to:"ij",from:"[\u0132]"},{to:"k",from:"[\u0136]"},{to:"l",from:"[\u0139\u013B\u013D\u0141]"},{to:"m",from:"[\u1E3E]"},{to:"n",from:"[\xD1\u0143\u0145\u0147]"},{to:"o",from:"[\xD2\xD3\xD4\xD5\xD8\u014C\u014E\u0150\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u01EA\u01EC\u01A0]"},{to:"oe",from:"[\u0152\xD6]"},{to:"p",from:"[\u1E55]"},{to:"r",from:"[\u0154\u0156\u0158]"},{to:"s",from:"[\u015A\u015C\u015E\u0160]"},{to:"ss",from:"[\xDF]"},{to:"t",from:"[\u0162\u0164]"},{to:"u",from:"[\xD9\xDA\xDB\u0168\u016A\u016C\u016E\u0170\u0172\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u01AF]"},{to:"ue",from:"[\xDC]"},{to:"w",from:"[\u1E82\u0174\u1E80\u1E84]"},{to:"x",from:"[\u1E8D]"},{to:"y",from:"[\xDD\u0176\u0178\u1EF2\u1EF4\u1EF6\u1EF8]"},{to:"z",from:"[\u0179\u017B\u017D]"},{to:"-",from:"[\xB7/_,:;']"}];return d.forEach(function(t){h=h.replace(new RegExp(t.from,"gi"),t.to)}),h=h.toString().toLowerCase().replace(/\s+/g,"-").replace(/&/g,"-and-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),typeof l!="undefined"&&l!=="-"&&(h=h.replace(/-/g,l)),h}},20640:function(O,c,e){"use strict";var E=e(11742),n={"text/plain":"Text","text/html":"Url",default:"Text"},D="Copy to clipboard: #{key}, Enter";function l(d){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return d.replace(/#{\s*key\s*}/g,t)}function h(d,t){var p,g,b,f,v,s,A=!1;t||(t={}),p=t.debug||!1;try{b=E(),f=document.createRange(),v=document.getSelection(),s=document.createElement("span"),s.textContent=d,s.ariaHidden="true",s.style.all="unset",s.style.position="fixed",s.style.top=0,s.style.clip="rect(0, 0, 0, 0)",s.style.whiteSpace="pre",s.style.webkitUserSelect="text",s.style.MozUserSelect="text",s.style.msUserSelect="text",s.style.userSelect="text",s.addEventListener("copy",function(m){if(m.stopPropagation(),t.format)if(m.preventDefault(),typeof m.clipboardData=="undefined"){p&&console.warn("unable to use e.clipboardData"),p&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var i=n[t.format]||n.default;window.clipboardData.setData(i,d)}else m.clipboardData.clearData(),m.clipboardData.setData(t.format,d);t.onCopy&&(m.preventDefault(),t.onCopy(m.clipboardData))}),document.body.appendChild(s),f.selectNodeContents(s),v.addRange(f);var M=document.execCommand("copy");if(!M)throw new Error("copy command was unsuccessful");A=!0}catch(m){p&&console.error("unable to copy using execCommand: ",m),p&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",d),t.onCopy&&t.onCopy(window.clipboardData),A=!0}catch(i){p&&console.error("unable to copy using clipboardData: ",i),p&&console.error("falling back to prompt"),g=l("message"in t?t.message:D),window.prompt(g,d)}}finally{v&&(typeof v.removeRange=="function"?v.removeRange(f):v.removeAllRanges()),s&&document.body.removeChild(s),b()}return A}O.exports=h},11742:function(O){O.exports=function(){var c=document.getSelection();if(!c.rangeCount)return function(){};for(var e=document.activeElement,E=[],n=0;n<c.rangeCount;n++)E.push(c.getRangeAt(n));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return c.removeAllRanges(),function(){c.type==="Caret"&&c.removeAllRanges(),c.rangeCount||E.forEach(function(D){c.addRange(D)}),e&&e.focus()}}}}]);
