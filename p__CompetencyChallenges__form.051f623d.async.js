(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"/y+f":function(pe,G,t){"use strict";t.d(G,"g",function(){return F}),t.d(G,"e",function(){return x}),t.d(G,"f",function(){return v}),t.d(G,"d",function(){return B}),t.d(G,"a",function(){return ee}),t.d(G,"c",function(){return Z}),t.d(G,"b",function(){return k});var F;(function(r){r.Unselected="",r.RichText="EscolaLms\\TopicTypes\\Models\\TopicContent\\RichText",r.OEmbed="EscolaLms\\TopicTypes\\Models\\TopicContent\\OEmbed",r.Audio="EscolaLms\\TopicTypes\\Models\\TopicContent\\Audio",r.Video="EscolaLms\\TopicTypes\\Models\\TopicContent\\Video",r.H5P="EscolaLms\\TopicTypes\\Models\\TopicContent\\H5P",r.Image="EscolaLms\\TopicTypes\\Models\\TopicContent\\Image",r.PDF="EscolaLms\\TopicTypes\\Models\\TopicContent\\PDF",r.SCORM="EscolaLms\\TopicTypes\\Models\\TopicContent\\ScormSco",r.Project="EscolaLms\\TopicTypeProject\\Models\\Project",r.GiftQuiz="EscolaLms\\TopicTypeGift\\Models\\GiftQuiz"})(F||(F={}));var $;(function(r){r.OrderPaid="EscolaLms\\Cart\\Events\\OrderPaid",r.UserLogged="EscolaLms\\Auth\\Events\\UserLogged"})($||($={}));var z;(function(r){r.draft="draft",r.published="published",r.archived="archived"})(z||(z={}));var x;(function(r){r.email="EscolaLms\\TemplatesEmail\\Core\\EmailChannel",r.pdf="EscolaLms\\TemplatesPdf\\Core\\PdfChannel",r.sms="EscolaLms\\TemplatesSms\\Core\\SmsChannel"})(x||(x={}));var v;(function(r){r.ManuallyTriggeredEvent="EscolaLms\\Templates\\Events\\ManuallyTriggeredEvent"})(v||(v={}));var ue;(function(r){r.cart_fixed="cart_fixed",r.cart_percent="cart_percent",r.product_fixed="product_fixed",r.product_percent="product_percent"})(ue||(ue={}));var B;(function(r){r.MULTIPLE_CHOICE="multiple_choice",r.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS="multiple_choice_with_multiple_right_answers",r.TRUE_FALSE="true_false",r.SHORT_ANSWERS="short_answers",r.MATCHING="matching",r.NUMERICAL_QUESTION="numerical_question",r.ESSAY="essay",r.DESCRIPTION="description"})(B||(B={}));var ee;(function(r){r.PRESENT="present",r.PRESENT_NOT_EXERCISING="present_not_exercising",r.ABSENT="absent",r.EXCUSED_ABSENCE="excused_absence"})(ee||(ee={}));var Z;(function(r){r.Manual="manual",r.TeamsForms="teams_forms",r.TeamsLecture="teams_lecture",r.TestPortal="test_portal"})(Z||(Z={}));var k;(function(r){r.Simple="simple",r.Complex="complex"})(k||(k={}))},"60mZ":function(pe,G,t){},EKp7:function(pe,G,t){"use strict";t.r(G);var F=t("T2oS"),$=t("W9HT"),z=t("tJVT"),x=t("q1tI"),v=t("9kvl"),ue=t("Ty5D"),B=t("tMyG"),ee=t("nhC9"),Z=t("YRX9"),k=t("k1fw"),r=t("qLMh"),g=t("miYZ"),m=t("tsqr"),M=t("9og8"),q=t("VMEa"),ne=t("Qurx"),_=t("yj/a"),re=t("F/zT"),de=t("0WSk"),je=t("Gn8c"),R=t("hd5d"),S=t("/y+f"),a=t("nKUr"),K=Object.values(S.b).map(function(te){return{value:te,label:Object(a.jsx)(v.a,{id:"CompetencyChallenges.types.".concat(te)})}}),p=function(E){var C=E.data,L=E.competency_challenge_id,A=E.onAddSuccess,w=E.onUpdateSuccess,Q=Object(v.l)(),ce=q.a.useForm(),W=Object(z.a)(ce,1),J=W[0],h=Number.isNaN(L),c=Object(x.useCallback)(function(){var o=Object(M.a)(Object(r.a)().mark(function l(u){var n,f,j,b,D;return Object(r.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n=u.name,f=u.type,j=u.is_active,b=j===void 0?!1:j,i.prev=1,i.next=4,Object(Z.a)({name:n,is_active:b,type:f});case 4:if(D=i.sent,D.success){i.next=8;break}return m.b.error(D.message),i.abrupt("return");case 8:m.b.success(Q.formatMessage({id:D.message})),v.f.push("/competency-challenges/".concat(D.data.id,"/main")),A==null||A(D),i.next=16;break;case 13:i.prev=13,i.t0=i.catch(1),m.b.error(Q.formatMessage({id:"error"}));case 16:case"end":return i.stop()}},l,null,[[1,13]])}));return function(l){return o.apply(this,arguments)}}(),[]),s=Object(x.useCallback)(function(){var o=Object(M.a)(Object(r.a)().mark(function l(u){var n,f,j,b;return Object(r.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.prev=0,n=J.getFieldsValue(["image_url","image_path"]),f=n.image_url,j=n.image_path,O.next=4,Object(Z.g)(L,Object(k.a)(Object(k.a)({},u),{},{image_url:f,image_path:j}));case 4:if(b=O.sent,b.success){O.next=8;break}return m.b.error(b.message),O.abrupt("return");case 8:m.b.success(Q.formatMessage({id:b.message})),w==null||w(b),O.next=15;break;case 12:O.prev=12,O.t0=O.catch(0),m.b.error(Q.formatMessage({id:"error"}));case 15:case"end":return O.stop()}},l,null,[[0,12]])}));return function(l){return o.apply(this,arguments)}}(),[L]);return Object(a.jsxs)(q.a,{form:J,initialValues:C!=null?C:{},onFinish:h?c:s,children:[Object(a.jsxs)(q.a.Group,{title:Object(a.jsx)(v.a,{id:"CompetencyChallenges.base"}),children:[Object(a.jsx)(ne.a,{width:"md",name:"name",label:Object(a.jsx)(v.a,{id:"name"}),placeholder:Q.formatMessage({id:"name"}),required:!0,rules:[{required:!0,message:Q.formatMessage({id:"field_required"})}]}),Object(a.jsx)(_.a,{width:"md",name:"type",label:Object(a.jsx)(v.a,{id:"type"}),options:K,required:!0,rules:[{required:!0,message:Q.formatMessage({id:"field_required"})}]}),Object(a.jsx)(re.a,{name:"is_active",label:Object(a.jsx)(v.a,{id:"is_active"})})]}),!h&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(q.a.Group,{title:Object(a.jsx)(v.a,{id:"CompetencyChallenges.additional"}),children:[Object(a.jsx)(q.a.Item,{name:"description",label:Object(a.jsx)(v.a,{id:"description"}),valuePropName:"value",style:{width:697},children:Object(a.jsx)(R.a,{directory:"competency-challenges/".concat(L)})}),Object(a.jsx)(q.a.Item,{name:"authors",label:Object(a.jsx)(v.a,{id:"author"}),children:Object(a.jsx)(de.a,{multiple:!0})})]}),Object(a.jsx)(je.a,{wrapInForm:!1,folder:"/competency-challenges/".concat(L),title:"image",action:"/api/admin/competency-challenges/".concat(L,"?_method=PATCH"),src_name:"image_url",form_name:"image",getUploadedSrcField:function(l){return l.file.response.data.image_url},setPath:function(l){return J.setFieldsValue(l)}})]})]})},P=t("PpiC"),Ye=t("P2fV"),se=t("NJEC"),et=t("5Dmo"),Me=t("3S7+"),fe=t("+L6B"),Fe=t("2/Rp"),Pe=t("Vpfc"),Je=t("G3dp"),be=t("/MfK"),$e=t("Hn4i"),le=t("nRaC"),Se=t("5RzL"),Ce=t("JifO"),e=function te(E,C){var L,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return(L=E.subcategories)!==null&&L!==void 0&&L.length?{title:E.name,value:E.id,disabled:A===0||C.includes(E.id),children:E.subcategories.map(function(w){return te(w,C,A+1)})}:{title:E.name,value:E.id,disabled:A===0||C.includes(E.id)}},Ae=function(E){var C=E.value,L=E.onChange,A=E.multiple,w=A===void 0?!1:A,Q=E.disabledNodes,ce=Q===void 0?[]:Q,W=Object(x.useState)([]),J=Object(z.a)(W,2),h=J[0],c=J[1];Object(x.useEffect)(function(){Object(Ce.c)().then(function(o){o.success&&c(o.data)})},[]);var s=Object(x.useMemo)(function(){return h.map(function(o){return e(o,ce)})},[h,ce]);return Object(a.jsx)(Se.a,{loading:h.length===0,multiple:w,showSearch:!0,value:C,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:Object(a.jsx)(v.a,{id:"select",defaultMessage:"Please select"}),allowClear:!0,treeDefaultExpandAll:!0,onChange:L,treeData:s,disabled:h.length===0})},De=["scale_min","category_id"],Re=[{title:Object(a.jsx)(v.a,{id:"ID"}),dataIndex:"id",editable:!1,render:function(E,C){if(typeof C.id!="string")return"-";var L=C.id.split("-"),A=Object(z.a)(L,2),w=A[0],Q=A[1];return w==="new"?"-":Q}},{title:Object(a.jsx)(v.a,{id:"min_percent"}),dataIndex:"scale_min",valueType:"percent",formItemProps:{rules:[{required:!0,message:Object(a.jsx)(v.a,{id:"field_required"})},{type:"number",min:0,max:100,message:Object(a.jsx)(v.a,{id:"number_between",values:{min:0,max:100}})}]},fieldProps:{min:0,max:100}},{title:Object(a.jsx)(v.a,{id:"category"}),dataIndex:"category_id",render:function(E,C){return Object(a.jsx)(Pe.a,{type:"Category",type_id:C.category_id})},formItemProps:{rules:[{required:!0,message:Object(a.jsx)(v.a,{id:"field_required"})}]},renderFormItem:function(E,C,L){var A,w=((A=L.getFieldValue("table"))!==null&&A!==void 0?A:[]).map(function(Q){return Q.category_id});return Object(a.jsx)(Ae,{disabledNodes:w})}}],Le=function(E){return E.map(function(C){var L=C.id,A=C.scale_min,w=C.category;return{id:"old-".concat(L),scale_min:A,category_id:w.id}})},ze=function(E){var C=E.competency_challenge_id,L=E.scales,A=E.onScaleDelete,w=E.onScaleAdd,Q=E.onScaleUpdate,ce=Object(x.useState)([]),W=Object(z.a)(ce,2),J=W[0],h=W[1],c=Object(v.l)(),s=Object(x.useRef)(),o=Object(x.useRef)(),l=Object(x.useRef)(),u=Object(x.useMemo)(function(){return Le(L)},[L]),n=Object(x.useMemo)(function(){return[].concat(Re,[{valueType:"option",title:Object(a.jsx)(v.a,{id:"options"}),render:function(j,b,D,O){return[Object(a.jsx)(Me.a,{title:Object(a.jsx)(v.a,{id:"edit",defaultMessage:"edit"}),children:Object(a.jsx)(Fe.a,{type:"primary",icon:Object(a.jsx)(Je.a,{}),onClick:function(){return O==null?void 0:O.startEditable(b.id)}})},"edit"),Object(a.jsx)(se.a,{title:Object(a.jsx)(v.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(M.a)(Object(r.a)().mark(function i(){var d,y,T,V,Y,oe,H,I;return Object(r.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(typeof b.id=="string"){U.next=2;break}return U.abrupt("return");case 2:if(d=b.id.split("-"),y=Object(z.a)(d,2),T=y[0],V=y[1],T!=="new"){U.next=7;break}return H=(Y=s.current)===null||Y===void 0?void 0:Y.getFieldValue("table"),(oe=s.current)===null||oe===void 0||oe.setFieldValue("table",H.filter(function(ge){var ve=ge.id;return ve!==b.id})),U.abrupt("return");case 7:return U.next=9,Object(Z.d)(+V);case 9:I=U.sent,I.success&&(A==null||A());case 11:case"end":return U.stop()}},i)})),okText:Object(a.jsx)(v.a,{id:"ok"}),cancelText:Object(a.jsx)(v.a,{id:"cancel"}),children:Object(a.jsx)(Me.a,{title:Object(a.jsx)(v.a,{id:"delete",defaultMessage:"delete"}),children:Object(a.jsx)(Fe.a,{type:"primary",icon:Object(a.jsx)(be.a,{}),danger:!0})})},"delete")]}}])},[]);return Object(a.jsx)(q.a,{formRef:s,initialValues:{table:u},submitter:!1,children:Object(a.jsx)($e.a,{rowKey:function(j){return j.id},editableFormRef:o,controlled:!0,actionRef:l,maxLength:10,name:"table",columns:n,recordCreatorProps:{creatorButtonText:Object(a.jsx)(v.a,{id:"CompetencyChallenges.addNewRow"}),disabled:J.length>0,record:function(j){return{id:"new-".concat(j)}}},editable:{onlyOneLineEditorAlertMessage:c.formatMessage({id:"CompetencyChallenges.onlyOneRowIsEditable"}),onSave:function(){var f=Object(M.a)(Object(r.a)().mark(function b(D,O){var i,d,y,T,V,Y,oe,H,I;return Object(r.a)().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(i=O.scale_min,d=O.category_id,y=Object(P.a)(O,De),typeof y.id=="string"){U.next=3;break}return U.abrupt("return");case 3:if(T=y.id.split("-"),V=Object(z.a)(T,2),Y=V[0],oe=V[1],Y!=="new"){U.next=10;break}return U.next=7,Object(Z.b)({scale_min:i,category_id:d,competency_challenge_id:C});case 7:return H=U.sent,H.success&&(w==null||w()),U.abrupt("return");case 10:return U.next=12,Object(Z.h)(+oe,{scale_min:i,category_id:d,competency_challenge_id:C});case 12:return I=U.sent,I.success&&(Q==null||Q()),U.abrupt("return");case 15:case"end":return U.stop()}},b)}));function j(b,D){return f.apply(this,arguments)}return j}(),deletePopconfirmMessage:Object(a.jsx)(v.a,{id:"deleteQuestion"}),actionRender:function(j,b,D){if(typeof j.id!="string")return[];var O=j.id.split("-"),i=Object(z.a)(O,1),d=i[0];return d==="new"?[D.save,D.delete]:[D.save,D.cancel]},type:"single",editableKeys:J,onChange:h}})})},we=t("/zsF"),Ne=t("PArb"),We=t("DYRE"),Qe=t("zeV3"),N=t("uD7z"),ie=t("FJDo"),He=t("yioT"),Ue=t("qRSf"),Be=function(E){var C=E.data,L=Object(x.useState)(!1),A=Object(z.a)(L,2),w=A[0],Q=A[1],ce=Object(x.useState)(),W=Object(z.a)(ce,2),J=W[0],h=W[1],c=Object(v.l)(),s=Object(x.useCallback)(function(){(C==null?void 0:C.quiz_id)!==void 0&&(Q(!0),Object(Ue.c)(C==null?void 0:C.quiz_id).then(function(l){l.success&&h(l.data)}).finally(function(){return Q(!1)}))},[C==null?void 0:C.quiz_id]),o=Object(x.useCallback)(function(){var l=Object(M.a)(Object(r.a)().mark(function u(n){return Object(r.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if((C==null?void 0:C.quiz_id)!==void 0){j.next=2;break}return j.abrupt("return");case 2:Q(!0),Object(Ue.f)(C==null?void 0:C.quiz_id,Object(k.a)(Object(k.a)({},n),{},{value:"diagnostic-test"})).then(function(b){b.success&&h(b.data)}).finally(function(){return Q(!1)});case 4:case"end":return j.stop()}},u)}));return function(u){return l.apply(this,arguments)}}(),[]);return Object(x.useEffect)(function(){s()},[s]),J?Object(a.jsxs)("div",{style:{position:"relative",paddingBottom:"64px"},children:[Object(a.jsx)(q.a,{submitter:{render:function(u,n){var f=Object(z.a)(n,2),j=f[0],b=f[1];return Object(a.jsxs)(Qe.b,{style:{position:"absolute",bottom:0,left:0},children:[j,b]})}},title:c.formatMessage({id:"base",defaultMessage:"base"}),initialValues:J,onFinish:o,children:Object(a.jsxs)(N.a,{children:[Object(a.jsx)(ie.a,{name:"max_attempts",label:Object(a.jsx)(v.a,{id:"max_attempts"}),tooltip:Object(a.jsx)(v.a,{id:"max_attempts"}),placeholder:c.formatMessage({id:"max_attempts",defaultMessage:"max_attempts"}),required:!0,rules:[{required:!0,message:Object(a.jsx)(v.a,{id:"field_required"})}]}),Object(a.jsx)(ie.a,{name:"max_execution_time",label:Object(a.jsx)(v.a,{id:"max_execution_time"}),tooltip:Object(a.jsx)(v.a,{id:"max_execution_time"}),placeholder:c.formatMessage({id:"max_execution_time",defaultMessage:"max_execution_time"}),required:!0,rules:[{required:!0,message:Object(a.jsx)(v.a,{id:"field_required"})}]})]})}),Object(a.jsx)(Ne.a,{}),Object(a.jsx)(He.a,{questions:J.questions,quizId:J.id,onAdded:s,onEdited:s,onRemoved:s,tableHeader:Object(a.jsx)(v.a,{id:"questions"}),tableLoading:w,questionsCategory:{disabledDepth:1}})]}):Object(a.jsx)($.a,{})},Xe=function(){var E,C=Object(x.useState)(!1),L=Object(z.a)(C,2),A=L[0],w=L[1],Q=Object(x.useState)(),ce=Object(z.a)(Q,2),W=ce[0],J=ce[1],h=Object(v.l)(),c=Object(ue.l)(),s=c.id,o=c.tab,l=o===void 0?"main":o,u=s==="new",n=Number(s),f=Object(x.useMemo)(function(){return u?h.formatMessage({id:"CompetencyChallenges.new_challenge"}):W!=null&&W.name?W.name:h.formatMessage({id:"menu.Competency challenges"})},[h,W==null?void 0:W.name]),j=Object(x.useCallback)(function(){Number.isNaN(n)||(w(!0),Object(Z.e)(n).then(function(b){b.success&&J(b.data)}).finally(function(){return w(!1)}))},[n]);return Object(x.useEffect)(function(){j()},[j]),Object(a.jsx)(B.a,{title:f,header:{breadcrumb:{routes:[{path:"competency-challenges",breadcrumbName:h.formatMessage({id:"menu.Competency challenges"})},{path:String(s),breadcrumbName:f},{path:l,breadcrumbName:h.formatMessage({id:"CompetencyChallenges.".concat(l)})}]}},children:Object(a.jsxs)(ee.a,{bodyStyle:{padding:"24px"},tabs:{type:"card",cardProps:{loading:A&&Object(a.jsx)($.a,{})},activeKey:l,onChange:function(D){v.f.push("/competency-challenges/".concat(s,"/").concat(D))}},children:[Object(a.jsx)(ee.a.TabPane,{tab:Object(a.jsx)(v.a,{id:"CompetencyChallenges.main"}),children:Object(a.jsx)(p,{competency_challenge_id:n,data:W,onUpdateSuccess:j})},"main"),Object(a.jsx)(ee.a.TabPane,{tab:Object(a.jsx)(v.a,{id:"CompetencyChallenges.scales"}),disabled:u,children:Object(a.jsx)(ze,{competency_challenge_id:n,scales:(E=W==null?void 0:W.scales)!==null&&E!==void 0?E:[],onScaleDelete:j,onScaleAdd:j,onScaleUpdate:j})},"scales"),Object(a.jsx)(ee.a.TabPane,{tab:Object(a.jsx)(v.a,{id:"CompetencyChallenges.diagnostic-test"}),disabled:u,children:Object(a.jsx)(Be,{data:W})},"diagnostic-test")]})})},Ze=G.default=Xe},YRX9:function(pe,G,t){"use strict";t.d(G,"f",function(){return v}),t.d(G,"e",function(){return B}),t.d(G,"a",function(){return Z}),t.d(G,"g",function(){return r}),t.d(G,"c",function(){return m}),t.d(G,"b",function(){return q}),t.d(G,"h",function(){return _}),t.d(G,"d",function(){return de});var F=t("qLMh"),$=t("k1fw"),z=t("9og8"),x=t("9kvl");function v(R,S){return ue.apply(this,arguments)}function ue(){return ue=Object(z.a)(Object(F.a)().mark(function R(S,a){return Object(F.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",Object(x.i)("/api/admin/competency-challenges",Object($.a)({method:"GET",useCache:!1,params:S},a||{})));case 1:case"end":return p.stop()}},R)})),ue.apply(this,arguments)}function B(R,S){return ee.apply(this,arguments)}function ee(){return ee=Object(z.a)(Object(F.a)().mark(function R(S,a){return Object(F.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",Object(x.i)("/api/admin/competency-challenges/".concat(S),Object($.a)({method:"GET",useCache:!1},a||{})));case 1:case"end":return p.stop()}},R)})),ee.apply(this,arguments)}function Z(R,S){return k.apply(this,arguments)}function k(){return k=Object(z.a)(Object(F.a)().mark(function R(S,a){return Object(F.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",Object(x.i)("/api/admin/competency-challenges",Object($.a)({method:"POST",headers:{"Content-Type":"application/json"},data:S},a||{})));case 1:case"end":return p.stop()}},R)})),k.apply(this,arguments)}function r(R,S,a){return g.apply(this,arguments)}function g(){return g=Object(z.a)(Object(F.a)().mark(function R(S,a,K){return Object(F.a)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",Object(x.i)("/api/admin/competency-challenges/".concat(S),Object($.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:a},K||{})));case 1:case"end":return P.stop()}},R)})),g.apply(this,arguments)}function m(R,S){return M.apply(this,arguments)}function M(){return M=Object(z.a)(Object(F.a)().mark(function R(S,a){return Object(F.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",Object(x.i)("/api/admin/competency-challenges/".concat(S),Object($.a)({method:"DELETE"},a||{})));case 1:case"end":return p.stop()}},R)})),M.apply(this,arguments)}function q(R,S){return ne.apply(this,arguments)}function ne(){return ne=Object(z.a)(Object(F.a)().mark(function R(S,a){return Object(F.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",Object(x.i)("/api/admin/competency-challenges/scales",Object($.a)({method:"POST",headers:{"Content-Type":"application/json"},data:S},a||{})));case 1:case"end":return p.stop()}},R)})),ne.apply(this,arguments)}function _(R,S,a){return re.apply(this,arguments)}function re(){return re=Object(z.a)(Object(F.a)().mark(function R(S,a,K){return Object(F.a)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.abrupt("return",Object(x.i)("/api/admin/competency-challenges/scales/".concat(S),Object($.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:a},K||{})));case 1:case"end":return P.stop()}},R)})),re.apply(this,arguments)}function de(R,S){return je.apply(this,arguments)}function je(){return je=Object(z.a)(Object(F.a)().mark(function R(S,a){return Object(F.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",Object(x.i)("/api/admin/competency-challenges/scales/".concat(S),Object($.a)({method:"DELETE"},a||{})));case 1:case"end":return p.stop()}},R)})),je.apply(this,arguments)}},hd5d:function(pe,G,t){"use strict";var F=t("qLMh"),$=t("9og8"),z=t("q1tI"),x=t.n(z),v=t("acco"),ue=t.n(v),B=t("BAh9"),ee=t("vtG9"),Z=t.n(ee),k=t("9kvl"),r=t("nKUr"),g=t.n(r),m=function(ne){var _=ne.attrs,re=_.href,de=re.split("/").pop();return Object(r.jsx)("p",{children:Object(r.jsx)("a",{rel:"noreferrer",href:re,target:"_blank",children:de})})},M=function(ne){var _=ne.value,re=ne.onChange,de=ne.directory,je=de===void 0?"/wysiwyg":de,R=Object(k.l)();return Object(r.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(r.jsx)(ue.a,{excludeBlockMenuItems:["Sketch"],embeds:[{matcher:function(a){return!0},component:m}],uploadImage:function(){var S=Object($.a)(Object(F.a)().mark(function a(K){var p,P;return Object(F.a)().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,Object(B.e)(K,je);case 2:if(p=se.sent,!p.success){se.next=8;break}if(!K.type.includes("image/")){se.next=7;break}return P=p.data[0].name.includes("/")?p.data[0].name:"".concat(je).concat(p.data[0].name),se.abrupt("return",Object(B.d)(P,1e3));case 7:return se.abrupt("return",p.data[0].url);case 8:throw new Error("Error while uploading");case 9:case"end":return se.stop()}},a)}));return function(a){return S.apply(this,arguments)}}(),defaultValue:_||"",onChange:function(a){return re&&re(a())},placeholder:R.formatMessage({id:"wysiwyg_placeholder"})})})};G.a=M},vtG9:function(pe,G,t){},yioT:function(pe,G,t){"use strict";t.d(G,"a",function(){return J});var F=t("tU7J"),$=t("wFql"),z=t("BoS7"),x=t("Sdc0"),v=t("oBTY"),ue=t("+L6B"),B=t("2/Rp"),ee=t("bbsP"),Z=t("/wGt"),k=t("PpiC"),r=t("tJVT"),g=t("k1fw"),m=t("q1tI"),M=t("9kvl"),q=t("YJCA"),ne=t("wYyv"),_=t("smpX"),re=t("eyie"),de=t("w5pM"),je=t("mWMg"),R=t("Vpfc"),S=t("qRSf"),a=t("giR+"),K=t("fyUT"),p=t("DYRE"),P=t("zeV3"),Ye=t("OaEy"),se=t("2fM7"),et=t("/zsF"),Me=t("PArb"),fe=t("jrin"),Fe=t("sRBo"),Pe=t("kaz8"),Je=t("5Dmo"),be=t("3S7+"),$e=t("iJl9"),le=t.n($e),Se=t("/MfK"),Ce=t("Fghh"),e=t("nKUr"),Ae=function(c){var s=c.value,o=c.onChange,l=Object(m.useMemo)(function(){if(s)return Object(_.parse)(s)},[s]),u=Object(Ce.k)(),n=Object(m.useMemo)(function(){if(l&&l[0].type==="MC")return l[0]},[l]),f=Object(m.useCallback)(function(i,d){o("".concat(i,"{").concat(d.map(function(y){return"".concat(y.isCorrect?"=":"~").concat(y.weight?"%".concat(y.weight,"%"):"").concat(y.text.text)}).join(" "),"}"))},[]),j=Object(m.useCallback)(function(i){n&&f(i,n==null?void 0:n.choices)},[n]),b=Object(m.useCallback)(function(i,d){if(n){var y=n.choices.map(function(T,V){return V===d?i:T});f(n.stem.text,y)}},[n]),D=Object(m.useCallback)(function(){if(n){var i={text:{format:"moodle",text:"New Choice"},weight:null,feedback:null,isCorrect:!1},d=[].concat(Object(v.a)(n.choices),[i]);f(n.stem.text,d)}},[n]),O=Object(m.useCallback)(function(i){if(n){var d=n.choices.filter(function(y,T){return T!==i});f(n.stem.text,d)}},[n]);return Object(e.jsx)("div",{children:n&&Object(e.jsxs)(P.b,{direction:"vertical",size:"middle",style:{display:"flex"},children:[Object(e.jsx)(be.a,{title:u.formatMessage({id:"multipleChoiceTooltip",defaultMessage:'Title, use `_____` for "Mark the Word" question type'}),children:Object(e.jsx)(le.a,{size:"small",value:n.stem.text,onChange:function(d){return j(d.target.value)}})}),m.Children.toArray(n.choices.map(function(i,d){return Object(e.jsx)("div",{children:Object(e.jsxs)(P.b,{direction:"horizontal",children:[Object(e.jsx)(be.a,{title:u.formatMessage({id:"correctAnswer",defaultMessage:"Is Correct Answer?"}),children:Object(e.jsx)(Pe.a,{checked:i.isCorrect,onChange:function(T){return b(Object(g.a)(Object(g.a)({},i),{},{isCorrect:T.target.checked}),d)}})}),Object(e.jsx)(be.a,{title:u.formatMessage({id:"answer",defaultMessage:"Answer"}),children:Object(e.jsx)(le.a,{size:"small",value:i.text.text,onChange:function(T){return b(Object(g.a)(Object(g.a)({},i),{},{text:Object(g.a)(Object(g.a)({},i.text),{},{text:T.target.value})}),d)}})}),Object(e.jsx)(be.a,{title:u.formatMessage({id:"weight",defaultMessage:"Weight"}),children:Object(e.jsx)(K.a,{size:"small",addonAfter:"%",defaultValue:void 0,value:i.weight,min:1,max:100,onChange:function(T){b(Object(g.a)(Object(g.a)({},i),{},{weight:T!=null?T:null}),d)}})}),Object(e.jsx)(B.a,{size:"small",icon:Object(e.jsx)(Se.a,{}),onClick:function(){return O(d)}})]})})})),Object(e.jsx)(B.a,{size:"small",onClick:function(){return D()},children:Object(e.jsx)(M.a,{id:"Questions.add",defaultMessage:"Add question"})})]})})},De=function(c){var s=c.value,o=c.onChange,l=Object(m.useMemo)(function(){if(s)return Object(_.parse)(s)},[s]),u=Object(m.useMemo)(function(){if(l&&l[0].type==="Essay")return l[0]},[l]),n=Object(m.useCallback)(function(j){o("".concat(j,"{}"))},[]),f=Object(m.useMemo)(function(){return u==null?void 0:u.stem.text},[u]);return Object(e.jsx)("div",{children:u&&Object(e.jsx)(P.b,{direction:"vertical",size:"middle",style:{display:"flex"},children:Object(e.jsx)(le.a.TextArea,{defaultValue:f,size:"small",value:f,onChange:function(b){return n(b.target.value)}})})})},Re=function(c){var s=c.value,o=c.onChange,l=Object(m.useMemo)(function(){if(s)return Object(_.parse)(s)},[s]),u=Object(Ce.k)(),n=Object(m.useMemo)(function(){if(l&&l[0].type==="TF")return l[0]},[l]),f=Object(m.useCallback)(function(j,b){o("".concat(j,"{").concat(b?"T":"F","}"))},[]);return Object(e.jsx)("div",{children:n&&Object(e.jsxs)(P.b,{direction:"vertical",size:"middle",style:{display:"flex"},children:[Object(e.jsx)(be.a,{title:u.formatMessage({id:"trueAnswer",defaultMessage:"True Statement"}),children:Object(e.jsx)(Pe.a,{checked:n.isTrue,onChange:function(b){return f(n.stem.text,b.target.checked)}})}),Object(e.jsx)(le.a.TextArea,{size:"small",value:n.stem.text,onChange:function(b){return f(b.target.value,n.isTrue)}})]})})},Le=function(c){var s=c.value,o=c.onChange,l=Object(m.useMemo)(function(){if(s)return Object(_.parse)(s)},[s]),u=Object(m.useMemo)(function(){if(l&&l[0].type==="Matching")return l[0]},[l]),n=Object(m.useCallback)(function(O,i){o("".concat(O,`{
        `).concat(i.map(function(d){return"=".concat(d.subquestion.text," -> ").concat(d.subanswer)}).join(`
`),`
      }`))},[]),f=Object(m.useCallback)(function(O){u&&n(O,u==null?void 0:u.matchPairs)},[u]),j=Object(m.useCallback)(function(O,i){if(u){var d=u.matchPairs.map(function(y,T){return T===i?O:y});n(u.stem.text,d)}},[u]),b=Object(m.useCallback)(function(){if(u){var O={subanswer:"Answer",subquestion:{format:"moodle",text:"New Question"}},i=[].concat(Object(v.a)(u.matchPairs),[O]);n(u.stem.text,i)}},[u]),D=Object(m.useCallback)(function(O){if(u){var i=u.matchPairs.filter(function(d,y){return y!==O});n(u.stem.text,i)}},[u]);return Object(e.jsx)("div",{children:u&&Object(e.jsxs)(P.b,{direction:"vertical",size:"middle",style:{display:"flex"},children:[Object(e.jsx)(le.a,{size:"small",value:u.stem.text,onChange:function(i){return f(i.target.value)}}),m.Children.toArray(u.matchPairs.map(function(O,i){return Object(e.jsx)("div",{children:Object(e.jsxs)(P.b,{direction:"horizontal",children:[Object(e.jsx)(le.a,{size:"small",value:O.subquestion.text,onChange:function(y){return j(Object(g.a)(Object(g.a)({},O),{},{subquestion:Object(g.a)(Object(g.a)({},O.subquestion),{},{text:y.target.value})}),i)}}),Object(e.jsx)(le.a,{size:"small",value:O.subanswer,onChange:function(y){return j(Object(g.a)(Object(g.a)({},O),{},{subanswer:y.target.value}),i)}}),Object(e.jsx)(B.a,{size:"small",icon:Object(e.jsx)(Se.a,{}),onClick:function(){return D(i)}})]})})})),Object(e.jsx)(B.a,{size:"small",onClick:function(){return b()},children:Object(e.jsx)(M.a,{id:"Questions.addMatchingPair",defaultMessage:"Add Matching Pair"})})]})})},ze=function(c){var s=c.value,o=c.onChange,l=Object(m.useMemo)(function(){if(s)return Object(_.parse)(s)},[s]),u=Object(m.useMemo)(function(){if(l&&l[0].type==="Description")return l[0]},[l]),n=Object(m.useCallback)(function(f){o("".concat(f))},[]);return Object(e.jsx)("div",{children:u&&Object(e.jsx)(P.b,{direction:"vertical",size:"middle",style:{display:"flex"},children:Object(e.jsx)(le.a.TextArea,{size:"small",value:u.stem.text,onChange:function(j){return n(j.target.value)}})})})},we=function(c){var s=c.value,o=c.onChange,l=Object(m.useMemo)(function(){if(s)return Object(_.parse)(s)},[s]),u=Object(Ce.k)(),n=Object(m.useMemo)(function(){if(l&&l[0].type==="Numerical")return l[0]},[l]),f=Object(m.useCallback)(function(j,b){o("".concat(j,"{#").concat(b.number,":").concat(b.range,"}"))},[]);return Object(e.jsx)("div",{children:n&&Object(e.jsxs)(P.b,{direction:"horizontal",size:"middle",style:{display:"flex"},children:[Object(e.jsx)(le.a,{size:"small",value:n.stem.text,onChange:function(b){return f(b.target.value,n.choices)}}),Object(e.jsx)(be.a,{title:u.formatMessage({id:"correctAnswer",defaultMessage:"Correct Answer"}),children:Object(e.jsx)(K.a,{size:"small",value:n.choices.number,onChange:function(b){b&&f(n.stem.text,Object(g.a)(Object(g.a)({},n.choices),{},{number:b}))}})}),Object(e.jsx)(be.a,{title:u.formatMessage({id:"errorMargin",defaultMessage:"Error Margin"}),children:Object(e.jsx)(K.a,{size:"small",defaultValue:0,addonAfter:"+/-",value:n.choices.range,onChange:function(b){f(n.stem.text,Object(g.a)(Object(g.a)({},n.choices),{},{range:b!=null?b:0}))}})})]})})},Ne=function(c){var s=c.value,o=c.onChange,l=Object(m.useMemo)(function(){if(s)return Object(_.parse)(s)},[s]),u=Object(Ce.k)(),n=Object(m.useMemo)(function(){if(l&&l[0].type==="Short")return l[0]},[l]),f=Object(m.useCallback)(function(i,d){o("".concat(i,"{").concat(d.map(function(y){return"=".concat(y.text.text)}).join(" "),"}"))},[]),j=Object(m.useCallback)(function(i){n&&f(i,n==null?void 0:n.choices)},[n]),b=Object(m.useCallback)(function(i,d){if(n){var y=n.choices.map(function(T,V){return V===d?i:T});f(n.stem.text,y)}},[n]),D=Object(m.useCallback)(function(){if(n){var i={text:{format:"moodle",text:"New Answer"},weight:null,feedback:null,isCorrect:!1},d=[].concat(Object(v.a)(n.choices),[i]);f(n.stem.text,d)}},[n]),O=Object(m.useCallback)(function(i){if(n){var d=n.choices.filter(function(y,T){return T!==i});f(n.stem.text,d)}},[n]);return Object(e.jsx)("div",{children:n&&Object(e.jsxs)(P.b,{direction:"vertical",size:"middle",style:{display:"flex"},children:[Object(e.jsx)(le.a,{size:"small",value:n.stem.text,onChange:function(d){return j(d.target.value)}}),m.Children.toArray(n.choices.map(function(i,d){return Object(e.jsx)("div",{children:Object(e.jsxs)(P.b,{direction:"horizontal",children:[Object(e.jsx)(be.a,{title:u.formatMessage({id:"answer",defaultMessage:"Answer"}),children:Object(e.jsx)(le.a,{size:"small",value:i.text.text,onChange:function(T){return b(Object(g.a)(Object(g.a)({},i),{},{text:Object(g.a)(Object(g.a)({},i.text),{},{text:T.target.value})}),d)}})}),Object(e.jsx)(B.a,{size:"small",icon:Object(e.jsx)(Se.a,{}),onClick:function(){return O(d)}})]})})})),Object(e.jsx)(B.a,{size:"small",onClick:function(){return D()},children:Object(e.jsx)(M.a,{id:"Questions.add",defaultMessage:"Add Question"})})]})})};function We(h){var c=["number","undefined"];return c.includes(typeof h)}var Qe=t("CEpB"),N=t("/y+f"),ie,He=(ie={},Object(fe.a)(ie,N.d.DESCRIPTION,"You can use your pencil and paper for these next math questions."),Object(fe.a)(ie,N.d.ESSAY,"Write a short biography of Dag Hammarskj\xF6ld. {}"),Object(fe.a)(ie,N.d.MATCHING,`Match the following countries with their corresponding capitals. {
        =Canada -> Ottawa
        =Italy  -> Rome
        =Japan  -> Tokyo
        =India  -> New Delhi
        }`),Object(fe.a)(ie,N.d.MULTIPLE_CHOICE,"Who's buried in Grant's tomb?{=Grant ~no one ~Napoleon ~Churchill ~Mother Teresa }"),Object(fe.a)(ie,N.d.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS,`What two people are entombed in Grant's tomb? {
        ~%-100%No one
        ~%50%Grant
        ~%50%Grant's wife
        ~%-100%Grant's father
     }`),Object(fe.a)(ie,N.d.NUMERICAL_QUESTION,"When was Ulysses S. Grant born?{#1822:5}"),Object(fe.a)(ie,N.d.SHORT_ANSWERS,"Who's buried in Grant's tomb?{=Grant =Ulysses S. Grant =Ulysses Grant}"),Object(fe.a)(ie,N.d.TRUE_FALSE,"Grant was buried in a tomb in New York City.{T}"),ie),Ue=Object.values(N.d).reduce(function(h,c){return c?[].concat(Object(v.a)(h),[{value:c,label:Object(e.jsx)(M.a,{id:"gift_type.".concat(c)})}]):h},[]),Be=function(c){var s=c.value,o=c.onChange,l=c.loading,u=l===void 0?!1:l,n=c.onCreate,f=c.categoryProps,j=f===void 0?!1:f,b=c.debug,D=b===void 0?!1:b,O=Object(m.useState)(),i=Object(r.a)(O,2),d=i[0],y=i[1],T=Object(m.useState)(),V=Object(r.a)(T,2),Y=V[0],oe=V[1];return Object(m.useEffect)(function(){o({value:d?He[d]:"",score:s.score})},[d]),Object(m.useEffect)(function(){o(function(H){return Object(g.a)(Object(g.a)({},H),{},{category_id:Y})})},[Y]),Object(e.jsxs)(P.b,{direction:"vertical",style:{display:"flex"},children:[Object(e.jsx)(Me.a,{children:Object(e.jsx)(M.a,{id:"addNewQuestion",defaultMessage:"New Question"})}),Object(e.jsxs)(P.b,{wrap:!0,children:[Object(e.jsxs)($.a,{children:[Object(e.jsx)(M.a,{id:"type",defaultMessage:"Type:"}),":"]}),Object(e.jsx)(se.a,{value:d,onChange:function(I){return y(I)},placeholder:Object(e.jsx)(M.a,{id:"selectNewQuestionType",defaultMessage:"Select new question type"}),options:Ue,style:{maxWidth:"330px"}})]}),j&&Object(e.jsxs)(P.b,{wrap:!0,children:[Object(e.jsxs)($.a,{children:[Object(e.jsx)(M.a,{id:"category",defaultMessage:"Category"}),":"]}),Object(e.jsx)(Qe.a,Object(g.a)(Object(g.a)({},typeof j=="object"?j:{}),{},{value:Y,onChange:function(I){return We(I)&&oe(I)}}))]}),(d===N.d.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS||d===N.d.MULTIPLE_CHOICE)&&Object(e.jsx)(Ae,{value:s.value,onChange:function(I){return o({value:I,score:s.score})}}),d===N.d.ESSAY&&Object(e.jsx)(De,{value:s.value,onChange:function(I){return o({value:I,score:s.score})}}),d===N.d.DESCRIPTION&&Object(e.jsx)(ze,{value:s.value,onChange:function(I){return o({value:I,score:s.score})}}),d===N.d.TRUE_FALSE&&Object(e.jsx)(Re,{value:s.value,onChange:function(I){return o({value:I,score:s.score})}}),d===N.d.MATCHING&&Object(e.jsx)(Le,{value:s.value,onChange:function(I){return o({value:I,score:s.score})}}),d===N.d.NUMERICAL_QUESTION&&Object(e.jsx)(we,{value:s.value,onChange:function(I){return o({value:I,score:s.score})}}),d===N.d.SHORT_ANSWERS&&Object(e.jsx)(Ne,{value:s.value,onChange:function(I){return o({value:I,score:s.score})}}),d&&Object(e.jsxs)(P.b,{children:[Object(e.jsxs)($.a,{children:[Object(e.jsx)(M.a,{id:"Questions.score",defaultMessage:"Score"}),":"]}),Object(e.jsx)(K.a,{disabled:u,size:"small",value:s.score,onChange:function(I){return o({score:I!=null?I:1,value:s.value})}})]}),d&&Object(e.jsx)(B.a,{loading:u,size:"small",type:"primary",onClick:function(){n(),y(void 0),oe(void 0)},children:Object(e.jsx)(M.a,{id:"Questions.create",defaultMessage:"Create Question"})},"new"),d&&D&&Object(e.jsx)($.a.Paragraph,{code:!0,children:s.value})]})},Xe=t("5NDa"),Ze=t("5rEg"),te=function(c){var s=c.type,o=c.value,l=c.onChange,u=c.loading,n=u===void 0?!1:u,f=Object(m.useCallback)(function(j){j!==o&&l(j)},[]);switch(s){case N.d.MULTIPLE_CHOICE_WITH_MULTIPLE_RIGHT_ANSWERS:case N.d.MULTIPLE_CHOICE:return Object(e.jsx)(Ae,{value:o,onChange:f});case N.d.ESSAY:return Object(e.jsx)(De,{value:o,onChange:f});case N.d.DESCRIPTION:return Object(e.jsx)(ze,{value:o,onChange:f});case N.d.TRUE_FALSE:return Object(e.jsx)(Re,{value:o,onChange:f});case N.d.MATCHING:return Object(e.jsx)(Le,{value:o,onChange:f});case N.d.NUMERICAL_QUESTION:return Object(e.jsx)(we,{value:o,onChange:f});case N.d.SHORT_ANSWERS:return Object(e.jsx)(Ne,{value:o,onChange:f});default:return Object(e.jsx)(Ze.a.TextArea,{disabled:n,value:o,onChange:function(b){return f(b.target.value)}})}},E=function(c){var s,o=c.question,l=c.onRemoved,u=c.onEdited,n=c.quizId,f=c.loading,j=f===void 0?!1:f,b=c.onLoading,D=c.debug,O=D===void 0?!1:D,i=c.categoryProps,d=i===void 0?!1:i,y=Object(m.useState)(o.value),T=Object(r.a)(y,2),V=T[0],Y=T[1],oe=Object(m.useState)(o.score),H=Object(r.a)(oe,2),I=H[0],Oe=H[1],U=Object(m.useState)((s=o.category_id)!==null&&s!==void 0?s:void 0),ge=Object(r.a)(U,2),ve=ge[0],Ke=ge[1];return Object(e.jsxs)(P.b,{direction:"vertical",style:{display:"flex"},children:[Object(e.jsx)(Me.a,{children:Object(e.jsx)(M.a,{id:"gift_type.".concat(o.type)})}),d&&Object(e.jsxs)(P.b,{wrap:!0,children:[Object(e.jsxs)($.a,{children:[Object(e.jsx)(M.a,{id:"category",defaultMessage:"Category"}),":"]}),Object(e.jsx)(Qe.a,Object(g.a)(Object(g.a)({},typeof d=="object"?d:{}),{},{value:ve,onChange:function(me){return We(me)&&Ke(me)}}))]}),Object(e.jsx)(te,{type:o.type,loading:j,value:V,onChange:function(me){return Y(me)}}),Object(e.jsxs)(P.b,{children:[Object(e.jsxs)($.a,{children:[Object(e.jsx)(M.a,{id:"Questions.score",defaultMessage:"Score"}),":"]}),Object(e.jsx)(K.a,{disabled:j,size:"small",value:I,onChange:function(me){return me&&Oe(me)}})]}),O&&Object(e.jsx)($.a.Paragraph,{code:!0,children:V}),Object(e.jsx)(B.a,{loading:j,size:"small",type:"primary",onClick:function(){b(),Object(S.g)(o.id,Object(g.a)(Object(g.a)({},o),{},{topic_gift_quiz_id:n,value:V,score:I,category_id:ve})).then(function(){u&&u()})},children:Object(e.jsx)(M.a,{id:"Questions.edit",defaultMessage:"Edit Question"})},"update"),Object(e.jsx)(B.a,{loading:j,size:"small",danger:!0,onClick:function(){b(),Object(S.b)(o.id).then(function(){l&&l()})},children:Object(e.jsx)(M.a,{id:"Questions.delete",defaultMessage:"Delete Question"})},"delete")]})},C=t("60mZ"),L=["className","style"],A=Object(q.c)(function(){return Object(e.jsx)(re.a,{style:{cursor:"grab",color:"#999"}})}),w=Object(q.b)(function(h){return Object(e.jsx)("tr",Object(g.a)({},h))}),Q=Object(q.a)(function(h){return Object(e.jsx)("tbody",Object(g.a)({},h))}),ce=[{title:Object(e.jsx)(M.a,{id:"sort",defaultMessage:"sort"}),dataIndex:"id",width:60,className:"drag-visible",render:function(){return Object(e.jsx)(A,{})}},{title:Object(e.jsx)(M.a,{id:"type",defaultMessage:"Type"}),dataIndex:"type",hideInForm:!0,hideInSearch:!0,hideInSetting:!0,render:function(c,s){return Object(e.jsx)(M.a,{id:s.type})}},{title:Object(e.jsx)(M.a,{id:"question",defaultMessage:"Question"}),dataIndex:"question",hideInForm:!0,hideInSearch:!0,hideInSetting:!0,render:function(c,s){var o=Object(_.parse)(s.value);return o!=null&&o[0]&&"stem"in o[0]?o[0].stem.text:"question"}}],W={title:Object(e.jsx)(M.a,{id:"category",defaultMessage:"Category"}),dataIndex:"category_id",hideInForm:!0,hideInSearch:!0,hideInSetting:!0,render:function(c,s){return typeof s.category_id=="number"?Object(e.jsx)(R.a,{type:"Category",type_id:s.category_id}):"-"}},J=function(c){var s=c.questions,o=c.onAdded,l=c.onRemoved,u=c.onEdited,n=c.quizId,f=c.tableLoading,j=c.tableHeader,b=c.questionsCategory,D=Object(m.useState)(),O=Object(r.a)(D,2),i=O[0],d=O[1],y=Object(m.useState)(!1),T=Object(r.a)(y,2),V=T[0],Y=T[1],oe=Object(m.useState)(!1),H=Object(r.a)(oe,2),I=H[0],Oe=H[1],U=Object(m.useState)(!1),ge=Object(r.a)(U,2),ve=ge[0],Ke=ge[1],ye=Object(m.useState)({score:1,value:""}),me=Object(r.a)(ye,2),Ve=me[0],ke=me[1],tt=Object(m.useState)(s),qe=Object(r.a)(tt,2),Ge=qe[0],_e=qe[1],at=Object(m.useRef)();Object(m.useEffect)(function(){var X;(X=at.current)===null||X===void 0||X.reload(),_e(s)},[s]);var nt=function(ae){var xe=ae.oldIndex,Te=ae.newIndex;if(xe!==Te){var Ie=Object(ne.a)(Ge.slice(),xe,Te).filter(Boolean).map(function(he,Ee){return Object(g.a)(Object(g.a)({},he),{},{order:Ee})});Ie.forEach(function(he,Ee){he.id!==Ge[Ee].id&&Object(S.g)(he.id,Object(g.a)(Object(g.a)({},he),{},{order:Ee+1,topic_gift_quiz_id:n}))}),_e(Ie)}},rt=function(ae){return Object(e.jsx)(Q,Object(g.a)({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:nt},ae))},st=function(ae){var xe=ae.className,Te=ae.style,Ie=Object(k.a)(ae,L),he=Ge.findIndex(function(Ee){return Ee.id===Ie["data-row-key"]});return Object(e.jsx)(w,Object(g.a)({index:he},Ie))},it=Object(m.useCallback)(function(){Y(!0),Object(S.a)(Object(g.a)({topic_gift_quiz_id:n},Ve)).catch(function(X){return console.log("err",X)}).then(function(){ke({value:"",score:1}),Oe(!1),o&&o()}).finally(function(){Y(!1)})},[Ve,n]);return Object(e.jsxs)(e.Fragment,{children:[Object(e.jsx)(Z.a,{open:!!i,onClose:function(){return d(void 0)},children:i&&Object(e.jsx)(E,{debug:ve,onLoading:function(){return Y(!0)},loading:V,quizId:n,question:i,onRemoved:function(){l==null||l(),Y(!1)},onEdited:function(){u==null||u(),Y(!1)},categoryProps:b})}),Object(e.jsx)(Z.a,{open:I,onClose:function(){return Oe(!1)},children:Object(e.jsx)(Be,{debug:ve,onCreate:it,value:Ve,onChange:ke,categoryProps:b})}),Object(e.jsx)(je.a,{search:!1,cardProps:{bodyStyle:{padding:0}},loading:f,headerTitle:j,toolbar:{settings:[]},toolBarRender:function(){return[Object(e.jsxs)(B.a,{icon:Object(e.jsx)(de.a,{}),type:"primary",onClick:function(){return Oe(!0)},children:[" ",Object(e.jsx)(M.a,{id:"addNewQuestion",defaultMessage:"Add new question"})]},"add")]},columns:[].concat(ce,Object(v.a)(b?[W]:[]),[{title:Object(e.jsx)(M.a,{id:"actions",defaultMessage:"Actions"}),dataIndex:"address",valueType:"option",render:function(ae,xe){return[Object(e.jsx)(B.a,{size:"small",type:"primary",onClick:function(){d(xe)},children:Object(e.jsx)(M.a,{id:"Questions.edit",defaultMessage:"Edit Question"})},"edit"),Object(e.jsx)(B.a,{loading:V,size:"small",danger:!0,onClick:function(){Y(!0),Object(S.b)(xe.id).then(function(){l&&l()}).finally(function(){Y(!1)})},children:Object(e.jsx)(M.a,{id:"Questions.delete",defaultMessage:"Delete Question"})},"delete")]}}]),rowKey:function(ae){return ae.id},pagination:!1,dataSource:Ge,components:{body:{wrapper:rt,row:st}}}),Object(e.jsxs)($.a,{style:{marginTop:"3em"},children:["Debug GIFT: ",Object(e.jsx)(x.a,{checked:ve,onChange:function(ae){return Ke(ae)}})]})]})}}}]);
