(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"2ult":function(J,E,e){"use strict";var h=e("OaEy"),b=e("2fM7"),a=e("T2oS"),f=e("W9HT"),j=e("oBTY"),g=e("tJVT"),r=e("q1tI"),W=e.n(r),y=e("ri8c"),Z=e("9kvl"),P=e("nKUr"),z=e.n(P),m=function(D){var x=D.value,S=D.onChange,U=D.multiple,I=U===void 0?!1:U,i=Object(r.useState)([]),c=Object(g.a)(i,2),d=c[0],B=c[1],n=Object(r.useState)(!1),p=Object(g.a)(n,2),L=p[0],q=p[1],de=Object(r.useRef)(),Q=Object(r.useRef)(),X=Object(r.useCallback)(function(M){B(function(N){return[].concat(Object(j.a)(N),Object(j.a)(M)).filter(function(v,F,ee){return ee.findIndex(function(ne){return ne.id===v.id})===F})})},[]);Object(r.useEffect)(function(){de.current=d},[d]);var s=Object(r.useCallback)(function(M){q(!0),Q.current&&Q.current.abort(),Q.current=new AbortController,Object(y.g)({search:M},{signal:Q.current.signal}).then(function(N){N.success&&X(N.data),q(!1)}).catch(function(){return q(!1)})},[X]),Ee=Object(r.useCallback)(function(M){s(M)},[s]);return Object(r.useEffect)(function(){var M=new AbortController;if(x){var N=Array.isArray(x)?x:[x];N.filter(function(v){var F;return!((F=de.current)!==null&&F!==void 0&&F.find(function(ee){return ee.id===v}))}).forEach(function(v){Object(y.f)(Number(v),{signal:M.signal}).then(function(F){F&&F.success&&X([F.data])})})}return function(){M.abort()}},[x,X]),Object(P.jsx)(b.a,{onFocus:function(){return s()},allowClear:!0,style:{width:"100%"},value:x,onChange:S,mode:I?"multiple":void 0,showSearch:!0,onSearch:Ee,placeholder:Object(P.jsx)(Z.a,{id:"select_user_group",defaultMessage:"Select user group"}),optionFilterProp:"children",filterOption:function(N,v){return(v==null?void 0:v.children.toLowerCase().indexOf(N.toLowerCase()))>=0},notFoundContent:L?Object(P.jsx)(f.a,{size:"small"}):null,children:d.map(function(M){return Object(P.jsx)(b.a.Option,{value:M.id,children:M.name_with_breadcrumbs},M.id)})})};E.a=m},"F/zT":function(J,E,e){"use strict";var h=e("wx14"),b=e("VTBJ"),a=e("Ff2n"),f=e("q1tI"),j=e.n(f),g=e("adzw"),r=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],W=j.a.forwardRef(function(y,Z){var P=y.fieldProps,z=y.unCheckedChildren,m=y.checkedChildren,K=y.proFieldProps,D=Object(a.a)(y,r);return j.a.createElement(g.a,Object(h.a)({valueType:"switch",mode:"edit",fieldProps:Object(b.a)({unCheckedChildren:z,checkedChildren:m},P),ref:Z,valuePropName:"checked",proFieldProps:K,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},D))});E.a=W},Qurx:function(J,E,e){"use strict";var h=e("wx14"),b=e("Ff2n"),a=e("q1tI"),f=e.n(a),j=e("adzw"),g=["fieldProps","proFieldProps"],r=["fieldProps","proFieldProps"],W="text",y=function(m){var K=m.fieldProps,D=m.proFieldProps,x=Object(b.a)(m,g);return f.a.createElement(j.a,Object(h.a)({mode:"edit",valueType:W,fieldProps:K,filedConfig:{valueType:W},proFieldProps:D},x))},Z=function(m){var K=m.fieldProps,D=m.proFieldProps,x=Object(b.a)(m,r);return f.a.createElement(j.a,Object(h.a)({mode:"edit",valueType:"password",fieldProps:K,proFieldProps:D,filedConfig:{valueType:W}},x))},P=y;P.Password=Z,P.displayName="ProFormComponent",E.a=P},S76h:function(J,E,e){},UNho:function(J,E,e){"use strict";e.r(E);var h=e("Mwp2"),b=e("VXEj"),a=e("+L6B"),f=e("2/Rp"),j=e("/zsF"),g=e("PArb"),r=e("tU7J"),W=e("wFql"),y=e("T2oS"),Z=e("W9HT"),P=e("miYZ"),z=e("tsqr"),m=e("k1fw"),K=e("9og8"),D=e("tJVT"),x=e("WmNS"),S=e.n(x),U=e("q1tI"),I=e.n(U),i=e("VMEa"),c=e("Qurx"),d=e("F/zT"),B=e("nhC9"),n=e("ri8c"),p=e("tMyG"),L=e("9kvl"),q=e("Ty5D"),de=e("/MfK"),Q=e("0WSk"),X=e("2ult"),s=e("nKUr"),Ee=e.n(s);E.default=function(){var M=Object(L.i)(),N=Object(q.g)(),v=N.group,F=v==="new",ee=Object(U.useState)(),ne=Object(D.a)(ee,2),Y=ne[0],re=ne[1],be=Object(U.useCallback)(Object(K.a)(S.a.mark(function R(){var O;return S.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,Object(n.f)(Number(v));case 2:O=l.sent,O.success&&re(Object(m.a)({},O.data));case 4:case"end":return l.stop()}},R)})),[v]),Ce=Object(U.useCallback)(function(R){re(function(O){var t;return Object(m.a)(Object(m.a)({},O),{},{users:O?O==null||(t=O.users)===null||t===void 0?void 0:t.filter(function(l){return l.id!==R}):[]})}),Object(n.d)(Number(v),R).then(function(O){O.success&&re(function(t){return Object(m.a)(Object(m.a)({},t),{},{users:O.data})})})},[v]),ge=Object(U.useCallback)(function(R){var O;!R||Y!=null&&(O=Y.users)!==null&&O!==void 0&&O.find(function(t){return t.id===R})||Object(n.a)(Number(v),R).then(function(t){t.success&&re(function(l){return Object(m.a)(Object(m.a)({},l),{},{users:t.data})})})},[Y,v]);Object(U.useEffect)(function(){if(v==="new"){re({});return}be()},[v,be]);var ae=Object(U.useMemo)(function(){return{onFinish:function(){var R=Object(K.a)(S.a.mark(function t(l){var o,u;return S.a.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(u=Object(m.a)({},l),v!=="new"){T.next=8;break}return T.next=4,Object(n.b)(u);case 4:o=T.sent,o.success&&L.d.push("/user_groups/".concat(o.data.id)),T.next=11;break;case 8:return T.next=10,Object(n.e)(Number(v),u);case 10:o=T.sent;case 11:z.default.success(o.message);case 12:case"end":return T.stop()}},t)}));function O(t){return R.apply(this,arguments)}return O}(),initialValues:Y}},[Y,v]);return Y?Object(s.jsx)(p.a,{title:F?Object(s.jsx)(L.a,{id:"new_user_group"}):Object(s.jsx)(L.a,{id:"edit_user_group"}),children:Object(s.jsx)(B.a,{children:Object(s.jsxs)(i.b,Object(m.a)(Object(m.a)({},ae),{},{children:[Object(s.jsxs)(i.b.Group,{children:[Object(s.jsx)(c.a,{width:"md",name:"name",label:Object(s.jsx)(L.a,{id:"name"}),tooltip:Object(s.jsx)(L.a,{id:"name"}),placeholder:M.formatMessage({id:"name"}),required:!0}),Object(s.jsx)(i.b.Item,{style:{minWidth:"300px"},name:"parent_id",label:Object(s.jsx)(L.a,{id:"parent_id_group",defaultMessage:"parent_id_group"}),valuePropName:"value",children:Object(s.jsx)(X.a,{})}),Object(s.jsx)(d.a,{name:"registerable",label:Object(s.jsx)(L.a,{id:"registerable"})})]}),v!=="new"&&Object(s.jsxs)(I.a.Fragment,{children:[Object(s.jsxs)(i.b.Group,{children:[Object(s.jsx)(W.a,{children:Object(s.jsx)(L.a,{id:"add_person_to_group",defaultMessage:"Add User to group"})}),Object(s.jsx)(Q.a,{onChange:function(O){return ge(Number(O))}})]}),Object(s.jsx)(g.a,{}),Object(s.jsx)(b.b,{size:"small",itemLayout:"horizontal",dataSource:Y.users,renderItem:function(O){return Object(s.jsxs)(b.b.Item,{actions:[Object(s.jsxs)(f.a,{onClick:function(){return Ce(O.id)},type:"primary",icon:Object(s.jsx)(de.a,{}),size:"small",danger:!0,children:[" ",Object(s.jsx)(L.a,{id:"delete"})]})],children:[O.first_name," ",O.last_name," ",Object(s.jsx)("small",{children:O.email})]})}})]}),Object(s.jsx)(g.a,{})]}))})}):Object(s.jsx)(Z.a,{})}},VzZb:function(J,E,e){},"aK+R":function(J,E,e){},df8c:function(J,E,e){},nhC9:function(J,E,e){"use strict";var h=e("wx14"),b=e("q1tI"),a=e.n(b),f=e("Znn+"),j=e("ZTPi"),g=e("VTBJ"),r=e("rePB"),W=e("U8pU"),y=e("ODXe"),Z=e("GNNt"),P=e("wEI+"),z=e("Ff2n"),m=e("1GLa"),K=e("TLLU"),D=e("UESt"),x=e("6cGi"),S=e("YSkC"),U=e("TSYQ"),I=e.n(U),i=e("BGR+"),c=e("14J3"),d=e("BMrR"),B=e("jCWc"),n=e("kPKH"),p=e("aK+R"),L=function(l){var o=l.style,u=l.prefix;return a.a.createElement("div",{className:"".concat(u,"-loading-content"),style:o},a.a.createElement(d.a,{gutter:8},a.a.createElement(n.a,{span:22},a.a.createElement("div",{className:"".concat(u,"-loading-block")}))),a.a.createElement(d.a,{gutter:8},a.a.createElement(n.a,{span:8},a.a.createElement("div",{className:"".concat(u,"-loading-block")})),a.a.createElement(n.a,{span:15},a.a.createElement("div",{className:"".concat(u,"-loading-block")}))),a.a.createElement(d.a,{gutter:8},a.a.createElement(n.a,{span:6},a.a.createElement("div",{className:"".concat(u,"-loading-block")})),a.a.createElement(n.a,{span:18},a.a.createElement("div",{className:"".concat(u,"-loading-block")}))),a.a.createElement(d.a,{gutter:8},a.a.createElement(n.a,{span:13},a.a.createElement("div",{className:"".concat(u,"-loading-block")})),a.a.createElement(n.a,{span:9},a.a.createElement("div",{className:"".concat(u,"-loading-block")}))),a.a.createElement(d.a,{gutter:8},a.a.createElement(n.a,{span:4},a.a.createElement("div",{className:"".concat(u,"-loading-block")})),a.a.createElement(n.a,{span:3},a.a.createElement("div",{className:"".concat(u,"-loading-block")})),a.a.createElement(n.a,{span:16},a.a.createElement("div",{className:"".concat(u,"-loading-block")}))))},q=L,de=e("S76h"),Q=function(l){var o=l.actions,u=l.prefixCls;return Array.isArray(o)&&(o==null?void 0:o.length)?a.a.createElement("ul",{className:"".concat(u,"-actions")},o.map(function(G,T){return a.a.createElement("li",{style:{width:"".concat(100/o.length,"%")},key:"action-".concat(T)},a.a.createElement("span",null,G))})):o?a.a.createElement("ul",{className:"".concat(u,"-actions")},o):null},X=Q,s=e("df8c"),Ee=["className","style","bodyStyle","headStyle","title","subTitle","extra","tip","wrap","layout","loading","gutter","tooltip","split","headerBordered","bordered","children","size","actions","ghost","hoverable","direction","collapsed","collapsible","defaultCollapsed","onCollapse","checked","onChecked","tabs","type"],M=K.a.useBreakpoint,N=a.a.forwardRef(function(t,l){var o,u,G,T=t.className,le=t.style,se=t.bodyStyle,w=se===void 0?{}:se,oe=t.headStyle,ye=oe===void 0?{}:oe,he=t.title,Me=t.subTitle,ue=t.extra,De=t.tip,je=t.wrap,He=je===void 0?!1:je,Qe=t.layout,_e=t.loading,Le=t.gutter,Xe=Le===void 0?0:Le,we=t.tooltip,me=t.split,Re=t.headerBordered,ke=Re===void 0?!1:Re,We=t.bordered,qe=We===void 0?!1:We,Ke=t.children,Se=t.size,ea=t.actions,Ne=t.ghost,aa=Ne===void 0?!1:Ne,Fe=t.hoverable,ta=Fe===void 0?!1:Fe,na=t.direction,Ge=t.collapsed,ze=t.collapsible,ra=ze===void 0?!1:ze,$e=t.defaultCollapsed,la=$e===void 0?!1:$e,sa=t.onCollapse,oa=t.checked,Te=t.onChecked,Ae=t.tabs,xe=t.type,ve=Object(z.a)(t,Ee),ca=Object(b.useContext)(P.b.ConfigContext),ia=ca.getPrefixCls,Ve=M(),da=Object(x.a)(la,{value:Ge,onChange:sa}),Je=Object(y.a)(da,2),Ue=Je[0],ua=Je[1],Pe=["xxl","xl","lg","md","sm","xs"],_a=function(A){var C=[0,0],V=Array.isArray(A)?A:[A,0];return V.forEach(function(H,te){if(Object(W.a)(H)==="object")for(var k=0;k<Pe.length;k+=1){var fe=Pe[k];if(Ve[fe]&&H[fe]!==void 0){C[te]=H[fe];break}}else C[te]=H||0}),C},Oe=function(A,C){return A?C:{}},ma=function(A){var C=A;if(Object(W.a)(A)==="object")for(var V=0;V<Pe.length;V+=1){var H=Pe[V];if(Ve[H]&&A[H]!==void 0){C=A[H];break}}var te=Oe(typeof C=="string"&&/\d%|\dpx/i.test(C),{width:C,flexShrink:0});return{span:C,colSpanStyle:te}},_=ia("pro-card"),va=_a(Xe),Ze=Object(y.a)(va,2),ce=Ze[0],ie=Ze[1],Ie=!1,Be=a.a.Children.toArray(Ke),Oa=Be.map(function($,A){var C;if($==null||(C=$.type)===null||C===void 0?void 0:C.isProCard){var V;Ie=!0;var H=$.props.colSpan,te=ma(H),k=te.span,fe=te.colSpanStyle,ha=I()(["".concat(_,"-col")],(V={},Object(r.a)(V,"".concat(_,"-split-vertical"),me==="vertical"&&A!==Be.length-1),Object(r.a)(V,"".concat(_,"-split-horizontal"),me==="horizontal"&&A!==Be.length-1),Object(r.a)(V,"".concat(_,"-col-").concat(k),typeof k=="number"&&k>=0&&k<=24),V));return a.a.createElement("div",{style:Object(g.a)(Object(g.a)(Object(g.a)({},fe),Oe(ce>0,{paddingRight:ce/2,paddingLeft:ce/2})),Oe(ie>0,{paddingTop:ie/2,paddingBottom:ie/2})),key:"pro-card-col-".concat(A),className:ha},a.a.cloneElement($))}return $}),fa=I()("".concat(_),T,(o={},Object(r.a)(o,"".concat(_,"-border"),qe),Object(r.a)(o,"".concat(_,"-contain-card"),Ie),Object(r.a)(o,"".concat(_,"-loading"),_e),Object(r.a)(o,"".concat(_,"-split"),me==="vertical"||me==="horizontal"),Object(r.a)(o,"".concat(_,"-ghost"),aa),Object(r.a)(o,"".concat(_,"-hoverable"),ta),Object(r.a)(o,"".concat(_,"-size-").concat(Se),Se),Object(r.a)(o,"".concat(_,"-type-").concat(xe),xe),Object(r.a)(o,"".concat(_,"-collapse"),Ue),Object(r.a)(o,"".concat(_,"-checked"),oa),o)),Ea=I()("".concat(_,"-body"),(u={},Object(r.a)(u,"".concat(_,"-body-center"),Qe==="center"),Object(r.a)(u,"".concat(_,"-body-direction-column"),me==="horizontal"||na==="column"),Object(r.a)(u,"".concat(_,"-body-wrap"),He&&Ie),u)),ba=Object(g.a)(Object(g.a)(Object(g.a)({},Oe(ce>0,{marginRight:-ce/2,marginLeft:-ce/2})),Oe(ie>0,{marginTop:-ie/2,marginBottom:-ie/2})),w),Ye=a.a.isValidElement(_e)?_e:a.a.createElement(q,{prefix:_,style:w.padding===0||w.padding==="0px"?{padding:24}:void 0}),pe=ra&&Ge===void 0&&a.a.createElement(D.a,{rotate:Ue?void 0:90,className:"".concat(_,"-collapsible-icon")});return a.a.createElement("div",Object(h.a)({className:fa,style:le,ref:l,onClick:function(A){var C;Te==null||Te(A),ve==null||(C=ve.onClick)===null||C===void 0||C.call(ve,A)}},Object(i.a)(ve,["prefixCls","colSpan"])),(he||ue||pe)&&a.a.createElement("div",{className:I()("".concat(_,"-header"),(G={},Object(r.a)(G,"".concat(_,"-header-border"),ke||xe==="inner"),Object(r.a)(G,"".concat(_,"-header-collapsible"),pe),G)),style:ye,onClick:function(){pe&&ua(!Ue)}},a.a.createElement("div",{className:"".concat(_,"-title")},pe,a.a.createElement(S.a,{label:he,tooltip:we||De,subTitle:Me})),ue&&a.a.createElement("div",{className:"".concat(_,"-extra")},ue)),Ae?a.a.createElement("div",{className:"".concat(_,"-tabs")},a.a.createElement(j.a,Object(h.a)({onChange:Ae.onChange},Ae),_e?Ye:Ke)):a.a.createElement("div",{className:Ea,style:ba},_e?Ye:Oa),a.a.createElement(X,{actions:ea,prefixCls:_}))}),v=N,F=e("VzZb"),ee=["key","tab","tabKey","disabled","destroyInactiveTabPane","children","className","style","cardProps"],ne=function(l){var o=l.key,u=l.tab,G=l.tabKey,T=l.disabled,le=l.destroyInactiveTabPane,se=l.children,w=l.className,oe=l.style,ye=l.cardProps,he=Object(z.a)(l,ee),Me=Object(b.useContext)(P.b.ConfigContext),ue=Me.getPrefixCls,De=ue("pro-card-tabpane"),je=I()(De,w);return a.a.createElement(j.a.TabPane,Object(h.a)({key:o,tabKey:G,tab:u,className:je,style:oe,disabled:T,destroyInactiveTabPane:le},he),a.a.createElement(v,ye,se))},Y=ne,re=e("u1OI"),be=function(l){var o=Object(b.useContext)(P.b.ConfigContext),u=o.getPrefixCls,G=u("pro-card-divider"),T=l.className,le=l.style,se=le===void 0?{}:le,w=l.type,oe=I()(G,T,Object(r.a)({},"".concat(G,"-").concat(w),w));return a.a.createElement("div",{className:oe,style:se})},Ce=be,ge=function(l){return a.a.createElement(v,Object(h.a)({bodyStyle:{padding:0}},l))},ae=v;ae.isProCard=!0,ae.Divider=Ce,ae.TabPane=Y,ae.Group=ge;var R=ae,O=E.a=R},ri8c:function(J,E,e){"use strict";e.d(E,"g",function(){return g}),e.d(E,"f",function(){return W}),e.d(E,"e",function(){return Z}),e.d(E,"b",function(){return z}),e.d(E,"c",function(){return K}),e.d(E,"a",function(){return x}),e.d(E,"d",function(){return U});var h=e("k1fw"),b=e("9og8"),a=e("WmNS"),f=e.n(a),j=e("9kvl");function g(i,c){return r.apply(this,arguments)}function r(){return r=Object(b.a)(f.a.mark(function i(c,d){return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(j.f)("/api/admin/user-groups",Object(h.a)({params:Object(h.a)(Object(h.a)({},c),{},{per_page:c.pageSize,page:c.current,search:c.search?c.search:void 0,parent_id:c.parent_id}),method:"GET",useCache:!1},d||{})));case 1:case"end":return n.stop()}},i)})),r.apply(this,arguments)}function W(i,c){return y.apply(this,arguments)}function y(){return y=Object(b.a)(f.a.mark(function i(c,d){return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(j.f)("/api/admin/user-groups/".concat(c),Object(h.a)({method:"GET",useCache:!1},d||{})));case 1:case"end":return n.stop()}},i)})),y.apply(this,arguments)}function Z(i,c,d){return P.apply(this,arguments)}function P(){return P=Object(b.a)(f.a.mark(function i(c,d,B){return f.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",Object(j.f)("/api/admin/user-groups/".concat(c),Object(h.a)({data:d,method:"PUT"},B||{})));case 1:case"end":return p.stop()}},i)})),P.apply(this,arguments)}function z(i,c){return m.apply(this,arguments)}function m(){return m=Object(b.a)(f.a.mark(function i(c,d){return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(j.f)("/api/admin/user-groups",Object(h.a)({data:c,method:"POST"},d||{})));case 1:case"end":return n.stop()}},i)})),m.apply(this,arguments)}function K(i,c){return D.apply(this,arguments)}function D(){return D=Object(b.a)(f.a.mark(function i(c,d){return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(j.f)("/api/admin/user-groups/".concat(c),Object(h.a)({method:"DELETE"},d||{})));case 1:case"end":return n.stop()}},i)})),D.apply(this,arguments)}function x(i,c,d){return S.apply(this,arguments)}function S(){return S=Object(b.a)(f.a.mark(function i(c,d,B){return f.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",Object(j.f)("/api/admin/user-groups/".concat(c,"/members"),Object(h.a)({data:{user_id:d},method:"POST"},B||{})));case 1:case"end":return p.stop()}},i)})),S.apply(this,arguments)}function U(i,c,d){return I.apply(this,arguments)}function I(){return I=Object(b.a)(f.a.mark(function i(c,d,B){return f.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",Object(j.f)("/api/admin/user-groups/".concat(c,"/members/").concat(d),Object(h.a)({method:"DELETE"},B||{})));case 1:case"end":return p.stop()}},i)})),I.apply(this,arguments)}},u1OI:function(J,E,e){}}]);
