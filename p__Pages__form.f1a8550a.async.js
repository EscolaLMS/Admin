(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{NqYW:function(U,d,e){"use strict";e.d(d,"d",function(){return P}),e.d(d,"c",function(){return D}),e.d(d,"a",function(){return M}),e.d(d,"e",function(){return l}),e.d(d,"b",function(){return C});var u=e("qLMh"),m=e("k1fw"),p=e("9og8"),h=e("9kvl");function P(s,n){return o.apply(this,arguments)}function o(){return o=Object(p.a)(Object(u.a)().mark(function s(n,_){return Object(u.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(h.i)("/api/admin/pages",Object(m.a)({method:"GET",useCache:!1,params:n},_||{})));case 1:case"end":return a.stop()}},s)})),o.apply(this,arguments)}function D(s,n){return f.apply(this,arguments)}function f(){return f=Object(p.a)(Object(u.a)().mark(function s(n,_){return Object(u.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(h.i)("/api/admin/pages/".concat(n),Object(m.a)({method:"GET"},_||{})));case 1:case"end":return a.stop()}},s)})),f.apply(this,arguments)}function M(s,n){return T.apply(this,arguments)}function T(){return T=Object(p.a)(Object(u.a)().mark(function s(n,_){return Object(u.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(h.i)("/api/admin/pages",Object(m.a)({method:"POST",headers:{"Content-Type":"application/json"},data:n},_||{})));case 1:case"end":return a.stop()}},s)})),T.apply(this,arguments)}function l(s,n,_){return v.apply(this,arguments)}function v(){return v=Object(p.a)(Object(u.a)().mark(function s(n,_,t){return Object(u.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",Object(h.i)("/api/admin/pages/".concat(n),Object(m.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:_},t||{})));case 1:case"end":return O.stop()}},s)})),v.apply(this,arguments)}function C(s,n){return g.apply(this,arguments)}function g(){return g=Object(p.a)(Object(u.a)().mark(function s(n,_){return Object(u.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(h.i)("/api/admin/pages/".concat(n),Object(m.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},_||{})));case 1:case"end":return a.stop()}},s)})),g.apply(this,arguments)}},SWpp:function(U,d,e){"use strict";e.r(d);var u=e("T2oS"),m=e("W9HT"),p=e("miYZ"),h=e("tsqr"),P=e("qLMh"),o=e("k1fw"),D=e("9og8"),f=e("tJVT"),M=e("q1tI"),T=e.n(M),l=e("VMEa"),v=e("Qurx"),C=e("F/zT"),g=e("nhC9"),s=e("NqYW"),n=e("hd5d"),_=e("tMyG"),t=e("9kvl"),a=e("Ty5D"),O=e("BBow"),r=e("nKUr"),y=e.n(r);d.default=function(){var A=Object(t.l)(),I=Object(a.l)(),i=I.page,B=i==="new",x=Object(M.useState)(),c=Object(f.a)(x,2),R=c[0],F=c[1],S=l.a.useForm(),N=Object(f.a)(S,1),$=N[0],G=Object(M.useCallback)(Object(D.a)(Object(P.a)().mark(function L(){var j;return Object(P.a)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,Object(s.c)(Number(i));case 2:j=E.sent,j.success&&F(Object(o.a)(Object(o.a)({},j.data),{},{content:j.data.content||""}));case 4:case"end":return E.stop()}},L)})),[i]);Object(M.useEffect)(function(){if(i==="new"){F({active:!1});return}G()},[i,G]);var V=Object(M.useMemo)(function(){return{onFinish:function(){var L=Object(D.a)(Object(P.a)().mark(function K(E){var W,w;return Object(P.a)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(w=Object(o.a)(Object(o.a)({},E),{},{bio:E.bio?E.bio:void 0}),i!=="new"){b.next=8;break}return b.next=4,Object(s.a)(w);case 4:W=b.sent,W.success&&t.f.push("/pages/".concat(W.data.id)),b.next=11;break;case 8:return b.next=10,Object(s.e)(Number(i),w);case 10:W=b.sent;case 11:h.b.success(W.message);case 12:case"end":return b.stop()}},K)}));function j(K){return L.apply(this,arguments)}return j}(),initialValues:R}},[R,i]);return R?Object(r.jsx)(_.a,{title:B?Object(r.jsx)(t.a,{id:"new_page"}):Object(r.jsx)(t.a,{id:"edit_page"}),children:Object(r.jsx)(g.a,{children:Object(r.jsxs)(l.a,Object(o.a)(Object(o.a)({},V),{},{form:$,onValuesChange:function(j){j.title&&$.setFieldsValue({slug:Object(O.a)(j.title)})},children:[Object(r.jsxs)(l.a.Group,{children:[Object(r.jsx)(v.a,{width:"md",name:"title",label:Object(r.jsx)(t.a,{id:"title"}),tooltip:Object(r.jsx)(t.a,{id:"title"}),placeholder:A.formatMessage({id:"title"}),required:!0}),Object(r.jsx)(v.a,{width:"md",name:"slug",label:Object(r.jsx)(t.a,{id:"slug"}),tooltip:Object(r.jsx)(t.a,{id:"slug_tooltip"}),placeholder:A.formatMessage({id:"slug"}),disabled:!0,required:!0}),Object(r.jsx)(C.a,{name:"active",label:Object(r.jsx)(t.a,{id:"is_active"})})]}),Object(r.jsx)(l.a.Item,{name:"content",label:Object(r.jsx)(t.a,{id:"content"}),tooltip:Object(r.jsx)(t.a,{id:"content_tooltip"}),valuePropName:"value",required:!0,children:Object(r.jsx)(n.a,{directory:"pages/".concat(i,"/wysiwyg")})})]}))})}):Object(r.jsx)(m.a,{})}},hd5d:function(U,d,e){"use strict";var u=e("qLMh"),m=e("9og8"),p=e("q1tI"),h=e.n(p),P=e("C4gf"),o=e.n(P),D=e("BAh9"),f=e("vtG9"),M=e.n(f),T=e("9kvl"),l=e("nKUr"),v=e.n(l),C=function(n){var _=n.attrs,t=_.href,a=t.split("/").pop();return Object(l.jsx)("p",{children:Object(l.jsx)("a",{rel:"noreferrer",href:t,target:"_blank",children:a})})},g=function(n){var _=n.value,t=n.onChange,a=n.directory,O=a===void 0?"/wysiwyg":a,r=Object(T.l)();return Object(l.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(l.jsx)(o.a,{excludeBlockMenuItems:["Sketch"],embeds:[{matcher:function(){return!0},component:C}],uploadImage:function(){var y=Object(m.a)(Object(u.a)().mark(function A(I){var i,B;return Object(u.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(D.e)(I,O);case 2:if(i=c.sent,!i.success){c.next=8;break}if(!I.type.includes("image/")){c.next=7;break}return B=i.data[0].name.includes("/")?i.data[0].name:"".concat(O).concat(i.data[0].name),c.abrupt("return",Object(D.d)(B,1e3));case 7:return c.abrupt("return",i.data[0].url);case 8:throw new Error("Error while uploading");case 9:case"end":return c.stop()}},A)}));return function(A){return y.apply(this,arguments)}}(),defaultValue:_||"",onChange:function(A){return t&&t(A())},placeholder:r.formatMessage({id:"wysiwyg_placeholder"})})})};d.a=g},vtG9:function(U,d,e){}}]);

//# sourceMappingURL=p__Pages__form.f1a8550a.async.js.map