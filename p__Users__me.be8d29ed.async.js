(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{"0TUn":function(V,E,e){"use strict";e.d(E,"c",function(){return c}),e.d(E,"a",function(){return m}),e.d(E,"b",function(){return s});var f=e("qLMh"),h=e("k1fw"),_=e("9og8"),u=e("9kvl");function c(i,r){return b.apply(this,arguments)}function b(){return b=Object(_.a)(Object(f.a)().mark(function i(r,v){return Object(f.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(u.i)("/api/model-fields",Object(h.a)({method:"GET",params:r},v||{})));case 1:case"end":return l.stop()}},i)})),b.apply(this,arguments)}function m(i,r){return O.apply(this,arguments)}function O(){return O=Object(_.a)(Object(f.a)().mark(function i(r,v){return Object(f.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(u.i)("/api/admin/model-fields",Object(h.a)({method:"POST",data:r},v||{})));case 1:case"end":return l.stop()}},i)})),O.apply(this,arguments)}function s(i,r){return n.apply(this,arguments)}function n(){return n=Object(_.a)(Object(f.a)().mark(function i(r,v){return Object(f.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(u.i)("/api/admin/model-fields",Object(h.a)({method:"DELETE",data:r},v||{})));case 1:case"end":return l.stop()}},i)})),n.apply(this,arguments)}},Jfn2:function(V,E,e){"use strict";var f=e("k1fw"),h=e("XCrF"),_=e("1GRj"),u=e("PpiC"),c=e("q1tI"),b=e.n(c),m=e("nKUr"),O=e.n(m),s=["path","size","srcSizes","alt"],n=function(r){var v=r.path,o=r.size,l=r.srcSizes,p=r.alt,P=p===void 0?"LMS Image":p,x=Object(u.a)(r,s),a="".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/images/img?path=").concat(v,"&w=").concat(l?l[0]:o),d=l&&l.map(function(g){return"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/images/img?path=").concat(v,"&w=").concat(g," ").concat(g,"w")});return Object(m.jsx)("div",{className:"escolalms-image",children:Object(m.jsx)(_.a,Object(f.a)({src:a,srcSet:d&&d.join(","),alt:P},x))})};E.a=n},TpMl:function(V,E,e){"use strict";var f=e("tJVT"),h=e("q1tI"),_=e.n(h),u=e("0TUn"),c=function(m){var O=Object(h.useState)({state:"initial"}),s=Object(f.a)(O,2),n=s[0],i=s[1];return Object(h.useEffect)(function(){i({state:"loading"}),Object(u.c)({class_type:m}).then(function(r){r.success&&i({state:"loaded",list:r.data})})},[m]),n};E.a=c},YDZB:function(V,E,e){"use strict";var f=e("2qtc"),h=e("kLXV"),_=e("7Kak"),u=e("9yH6"),c=e("+L6B"),b=e("2/Rp"),m=e("tJVT"),O=e("q1tI"),s=e.n(O),n=e("gU/Y"),i=e("9kvl"),r=e("u95b"),v=e.n(r),o=e("nKUr"),l=e.n(o),p=function(x){var a=x.value,d=x.onChange,g=Object(O.useState)(!1),W=Object(m.a)(g,2),y=W[0],z=W[1],Z=Object(O.useCallback)(function(){z(!1)},[]),k=Object(O.useState)("code"),Y=Object(m.a)(k,2),t=Y[0],q=Y[1];return Object(o.jsxs)("div",{children:[Object(o.jsx)(b.a,{type:"primary",onClick:function(){return z(!0)},size:"small",children:Object(o.jsx)(i.a,{id:"json_editor"})}),Object(o.jsxs)(h.a,{title:"JSON",visible:y,onOk:Z,onCancel:Z,children:[Object(o.jsxs)(u.a.Group,{onChange:function(N){return q(N.target.value)},value:t,children:[Object(o.jsx)(u.a,{value:"tree",children:"tree"}),Object(o.jsx)(u.a,{value:"view",children:"view"}),Object(o.jsx)(u.a,{value:"form",children:"form"}),Object(o.jsx)(u.a,{value:"code",children:"code"}),Object(o.jsx)(u.a,{value:"text",children:"text"})]}),Object(o.jsx)(n.a,{mode:t,value:a,onChange:function(N){return d&&d(N)}},t)]})]})};E.a=p},YDsB:function(V,E,e){"use strict";var f=e("YDZB"),h=e("FJDo"),_=e("tneF"),u=e("Qurx"),c=e("VMEa"),b=e("BiO0"),m=e("q1tI"),O=e.n(m),s=e("9kvl"),n=e("nKUr"),i=e.n(n),r=function(o){var l=o.field,p=Object(s.l)(),P=function(a){var d=a&&a.extra&&a.extra.find(function(g){return g[Object(s.e)()]});switch(a.type){case"number":return Object(n.jsx)(h.a,{width:"md",name:a.name,label:d?d[Object(s.e)()]:Object(n.jsx)(s.a,{id:a.name}),tooltip:Object(n.jsx)(s.a,{id:a.name}),placeholder:p.formatMessage({id:a.name,defaultMessage:a.name}),min:1,max:1024,fieldProps:{step:1}});case"boolean":return Object(n.jsx)(_.a,{name:a.name,children:d?d[Object(s.e)()]:Object(n.jsx)(s.a,{id:a.name})});case"varchar":return Object(n.jsx)(u.a,{width:"md",name:a.name,label:d?d[Object(s.e)()]:Object(n.jsx)(s.a,{id:a.name}),tooltip:Object(n.jsx)(s.a,{id:a.name}),placeholder:p.formatMessage({id:a.name})});case"json":return Object(n.jsx)(c.a.Item,{name:a.name,label:d?d[Object(s.e)()]:Object(n.jsx)(s.a,{id:a.name}),tooltip:Object(n.jsx)(s.a,{id:a.name}),valuePropName:"value",children:Object(n.jsx)(f.a,{})});case"text":default:return Object(n.jsx)(b.a,{width:"md",name:a.name,label:d?d[Object(s.e)()]:Object(n.jsx)(s.a,{id:a.name}),tooltip:Object(n.jsx)(s.a,{id:a.name}),placeholder:p.formatMessage({id:a.name})})}};return Object(n.jsx)(n.Fragment,{children:P(l)})};E.a=r},fWLy:function(V,E,e){"use strict";e.r(E);var f=e("T2oS"),h=e("W9HT"),_=e("miYZ"),u=e("tsqr"),c=e("qLMh"),b=e("k1fw"),m=e("9og8"),O=e("tJVT"),s=e("q1tI"),n=e.n(s),i=e("VMEa"),r=e("Qurx"),v=e("nhC9"),o=e("VK58"),l=e("TpMl"),p=e("tMyG"),P=e("Jfn2"),x=e("Ty5D"),a=e("9kvl"),d=e("+L6B"),g=e("2/Rp"),W=e("Qiat"),y=e("xvlK"),z=e("Xcxh"),Z=e("y8nQ"),k=e("Vl3Y"),Y=e("rmhi"),t=e("nKUr"),q=function(M){var L=Object(a.l)(),B=M.visible,G=M.onVisibleChange,F=M.onFinish,J=k.a.useForm(),D=Object(O.a)(J,1),S=D[0];return Object(s.useEffect)(function(){return function(){S.resetFields()}},[]),Object(t.jsx)(Y.a,{form:S,title:L.formatMessage({id:"newSetting",defaultMessage:"newSetting"}),width:"30vw",visible:B,onVisibleChange:G,onFinish:F,children:Object(t.jsxs)(i.a.Group,{children:[Object(t.jsx)(r.a,{label:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"}),Object(t.jsx)(r.a,{label:Object(t.jsx)(a.a,{id:"value",defaultMessage:"value"}),rules:[{required:!0}],width:"md",name:"value"})]})})},H=q,N=function(M){var L=M.user,B=M.isProfile,G=B===void 0?!1:B,F=Object(s.useRef)(),J=Object(a.l)(),D=Object(s.useState)(!1),S=Object(O.a)(D,2),Q=S[0],$=S[1],C=Object(s.useState)("PATCH"),T=Object(O.a)(C,2),I=T[0],A=T[1],K=[{title:Object(t.jsx)(a.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInSearch:!0}],R=Object(s.useCallback)(function(j){var U=j&&Object.entries(j).map(function(X){return{key:X[0],value:X[1]}});return U},[L]);return Object(t.jsxs)(n.a.Fragment,{children:[Object(t.jsx)(W.a,{headerTitle:J.formatMessage({id:"menu.settings"}),actionRef:F,rowKey:"id",search:!1,toolBarRender:G?function(){return[Object(t.jsxs)(g.a,{type:"primary",onClick:function(){$(-1),A("PATCH")},children:[Object(t.jsx)(y.a,{})," ",Object(t.jsx)(a.a,{id:"pages.searchTable.new"})]},"primary"),Object(t.jsxs)(g.a,{color:"yellow",type:"primary",onClick:function(){$(-1),A("PUT")},children:[Object(t.jsx)(z.a,{})," ",Object(t.jsx)(a.a,{id:"user.settings.overwrite"})]},"primary")]}:!1,request:function(){return Object(o.e)(Number(L)).then(function(U){return U.success?{data:R(U.data)}:[]})},columns:K}),Object(t.jsx)(H,{id:Q,visible:Number.isInteger(Q),onVisibleChange:function(U){return U===!1&&$(!1)},onFinish:function(){var j=Object(m.a)(Object(c.a)().mark(function U(X){var te;return Object(c.a)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,Object(o.h)(Number(L),I,X);case 2:te=w.sent,te.success&&($(!1),F.current&&F.current.reload());case 4:case"end":return w.stop()}},U)}));return function(U){return j.apply(this,arguments)}}()})]})},ae=N,se=e("YDsB"),ne=e("02ly"),re=E.default=function(){var ee=Object(x.l)(),M=Object(a.l)(),L=ee.tab,B=L===void 0?"general":L,G=Object(l.a)("EscolaLms\\Auth\\Models\\User"),F=Object(s.useState)(),J=Object(O.a)(F,2),D=J[0],S=J[1];Object(s.useEffect)(function(){var C=function(){var T=Object(m.a)(Object(c.a)().mark(function I(){var A;return Object(c.a)().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,Object(o.f)();case 2:A=R.sent,A.success&&S(Object(b.a)(Object(b.a)({},A.data),{},{bio:A.data.bio||""}));case 4:case"end":return R.stop()}},I)}));return function(){return T.apply(this,arguments)}}();C()},[]);var Q=Object(s.useMemo)(function(){return{onFinish:function(){var C=Object(m.a)(Object(c.a)().mark(function I(A){var K;return Object(c.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,Object(o.i)(A);case 2:K=j.sent,u.b.success(K.message);case 4:case"end":return j.stop()}},I)}));function T(I){return C.apply(this,arguments)}return T}(),initialValues:D}},[D]),$=Object(s.useMemo)(function(){return{onFinish:function(){var C=Object(m.a)(Object(c.a)().mark(function I(A){var K;return Object(c.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,Object(o.j)(A);case 2:K=j.sent,u.b.success(K.message);case 4:case"end":return j.stop()}},I)}));function T(I){return C.apply(this,arguments)}return T}(),initialValues:D}},[D]);return D?Object(t.jsx)(p.a,{title:Object(t.jsx)(a.a,{id:"my_profile"}),header:{breadcrumb:{routes:[{path:"users",breadcrumbName:M.formatMessage({id:"menu.Users"})},{path:"me",breadcrumbName:M.formatMessage({id:"my_profile"})},{path:String(B),breadcrumbName:M.formatMessage({id:String(B)})}]}},children:Object(t.jsxs)(v.a,{tabs:{type:"card",activeKey:B,onChange:function(T){return a.f.push("/users/me/".concat(T))}},children:[Object(t.jsx)(v.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"general"}),children:Object(t.jsxs)(i.a,Object(b.a)(Object(b.a)({},Q),{},{children:[Object(t.jsxs)(i.a.Group,{children:[Object(t.jsx)(r.a,{width:"md",name:"first_name",label:Object(t.jsx)(a.a,{id:"first_name"}),tooltip:Object(t.jsx)(a.a,{id:"first_name"}),placeholder:M.formatMessage({id:"first_name"}),required:!0}),Object(t.jsx)(r.a,{width:"md",name:"last_name",label:Object(t.jsx)(a.a,{id:"last_name"}),tooltip:Object(t.jsx)(a.a,{id:"last_name"}),placeholder:M.formatMessage({id:"last_name"}),required:!0})]}),Object(t.jsx)(i.a.Group,{children:G.state==="loaded"&&G.list.map(function(C){return Object(t.jsx)(se.a,{field:C},C.id)})}),Object(t.jsx)(i.a.Group,{children:Object(t.jsxs)(i.a.Item,{name:"avatar",label:Object(t.jsx)(a.a,{id:"avatar"}),children:[D.path_avatar&&Object(t.jsx)(P.a,{path:D.path_avatar,size:600,width:200}),Object(t.jsx)(ne.a,{folder:"avatars/".concat(D.id),url:"/api/profile/upload-avatar",name:"avatar",accept:"image/*",onUpload:function(T){T.success}})]})})]}))},"general"),Object(t.jsx)(v.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"change_password"}),children:Object(t.jsxs)(i.a,Object(b.a)(Object(b.a)({},$),{},{children:[Object(t.jsx)(i.a.Group,{children:Object(t.jsx)(r.a.Password,{width:"md",name:"current_password",label:Object(t.jsx)(a.a,{id:"current_password"}),placeholder:M.formatMessage({id:"current_password"}),required:!0})}),Object(t.jsxs)(i.a.Group,{children:[Object(t.jsx)(r.a.Password,{width:"md",name:"new_password",label:Object(t.jsx)(a.a,{id:"new_password"}),placeholder:M.formatMessage({id:"new_password"}),required:!0}),Object(t.jsx)(r.a.Password,{width:"md",name:"new_confirm_password",label:Object(t.jsx)(a.a,{id:"new_confirm_password"}),placeholder:M.formatMessage({id:"new_confirm_password"}),required:!0})]})]}))},"change_password"),Object(t.jsx)(v.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"user.settings"}),children:Object(t.jsx)(ae,{user:String(D.id),isProfile:!0})},"user_settings")]})}):Object(t.jsx)(h.a,{})}},tneF:function(V,E,e){"use strict";var f=e("sRBo"),h=e("kaz8"),_=e("VTBJ"),u=e("Ff2n"),c=e("nKUr"),b=e.n(c),m=e("uX+g"),O=e("q1tI"),s=e.n(O),n=e("WFLz"),i=e("adzw"),r=["options","fieldProps","proFieldProps","valueEnum"],v=s.a.forwardRef(function(P,x){var a=P.options,d=P.fieldProps,g=P.proFieldProps,W=P.valueEnum,y=Object(u.a)(P,r);return Object(c.jsx)(i.a,Object(_.a)({ref:x,valueType:"checkbox",valueEnum:Object(m.a)(W,void 0),fieldProps:Object(_.a)({options:a},d),lightProps:Object(_.a)({labelFormatter:function(){return Object(c.jsx)(i.a,Object(_.a)({ref:x,valueType:"checkbox",mode:"read",valueEnum:Object(m.a)(W,void 0),filedConfig:{customLightMode:!0},fieldProps:Object(_.a)({options:a},d),proFieldProps:g},y))}},y.lightProps),proFieldProps:g},y))}),o=s.a.forwardRef(function(P,x){var a=P.fieldProps,d=P.children;return Object(c.jsx)(h.a,Object(_.a)(Object(_.a)({ref:x},a),{},{children:d}))}),l=Object(n.a)(o,{valuePropName:"checked"}),p=l;p.Group=v,E.a=p}}]);
