(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"49nl":function(F,K,e){"use strict";e.r(K);var M=e("DYRE"),h=e("zeV3"),s=e("+L6B"),u=e("2/Rp"),r=e("+BJd"),o=e("mr32"),f=e("k1fw"),m=e("PpiC"),O=e("tJVT"),_=e("q1tI"),C=e.n(_),n=e("9kvl"),P=e("tMyG"),V=e("Qiat"),A=e("0WSk"),D=e("sWYD"),U=e("mGZj"),W=e("bP8k"),p=e("gFTJ"),g=e("qLMh"),R=e("9og8"),ve=e("y8nQ"),ee=e("Vl3Y"),Z=e("+caW"),w=e("Qurx"),se=e("EcEN");function te(b,v){return H.apply(this,arguments)}function H(){return H=Object(R.a)(Object(g.a)().mark(function b(v,j){return Object(g.a)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",Object(n.i)("/api/admin/consultation-access-enquiries",Object(f.a)({method:"GET",params:Object(f.a)(Object(f.a)({},v),{},{per_page:v.pageSize,page:v.current})},j||{})));case 1:case"end":return I.stop()}},b)})),H.apply(this,arguments)}function ne(b,v,j){return Q.apply(this,arguments)}function Q(){return Q=Object(R.a)(Object(g.a)().mark(function b(v,j,$){return Object(g.a)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",Object(n.i)("/api/admin/consultation-access-enquiries/approve/".concat(v),Object(f.a)({data:j,method:"POST"},$||{})));case 1:case"end":return S.stop()}},b)})),Q.apply(this,arguments)}function re(b,v,j){return k.apply(this,arguments)}function k(){return k=Object(R.a)(Object(g.a)().mark(function b(v,j,$){return Object(g.a)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",Object(n.i)("/api/admin/consultation-access-enquiries/disapprove/".concat(v),Object(f.a)({data:j,method:"POST"},$||{})));case 1:case"end":return S.stop()}},b)})),k.apply(this,arguments)}var t=e("nKUr"),c=function(v){var j=v.term,$=v.onClose,I=v.onSuccess,S=ee.a.useForm(),G=Object(O.a)(S,1),J=G[0];return Object(t.jsxs)(Z.a,{title:Object(t.jsx)(n.a,{id:"approve_form",defaultMessage:"Approve Form"}),onVisibleChange:function(N){return!N&&$()},form:J,visible:!!j,autoFocusFirstInput:!0,drawerProps:{destroyOnClose:!0},submitTimeout:2e3,onFinish:function(){var B=Object(R.a)(Object(g.a)().mark(function N(Y){return Object(g.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!j){d.next=3;break}return d.next=3,ne(j==null?void 0:j.id,Y).then(function(i){i.success&&($(),I())});case 3:return d.abrupt("return",!0);case 4:case"end":return d.stop()}},N)}));return function(N){return B.apply(this,arguments)}}(),children:[j&&Object(t.jsx)(p.b,{column:2,children:Object(t.jsx)(p.b.Item,{label:Object(t.jsx)(n.a,{id:"approve_date",defaultMessage:"Approved Date"}),children:Object(D.a)(new Date(j.proposed_at),U.a)})}),Object(t.jsx)(w.a,{rules:[{required:!0}],name:"meeting_link",label:Object(t.jsx)(n.a,{id:"meeting_link",defaultMessage:"Meeting Link"}),tooltip:Object(t.jsx)(n.a,{id:"meeting_link",defaultMessage:"Meeting Link"})}),Object(t.jsx)(u.a,{onClick:function(){J.setFieldValue("meeting_link","https://meet.jit.si/".concat(Object(se.v4)()))},children:Object(t.jsx)(n.a,{id:"generate_jitsy",defaultMessage:"Generate Jitsy URL"})})]})},oe=e("BiO0"),ie=function(v){var j=v.id,$=v.onClose,I=v.onSuccess,S=ee.a.useForm(),G=Object(O.a)(S,1),J=G[0];return Object(t.jsx)(Z.a,{title:Object(t.jsx)(n.a,{id:"disapprove_form",defaultMessage:"Disapprove Form"}),onVisibleChange:function(N){return!N&&$()},form:J,visible:!!j,autoFocusFirstInput:!0,drawerProps:{destroyOnClose:!0},submitTimeout:2e3,onFinish:function(){var B=Object(R.a)(Object(g.a)().mark(function N(Y){return Object(g.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!j){d.next=3;break}return d.next=3,re(j,Y).then(function(i){i.success&&($(),I())});case 3:return d.abrupt("return",!0);case 4:case"end":return d.stop()}},N)}));return function(N){return B.apply(this,arguments)}}(),children:Object(t.jsx)(oe.a,{name:"message",label:Object(t.jsx)(n.a,{id:"reason",defaultMessage:"Reason"}),tooltip:Object(t.jsx)(n.a,{id:"reason_tooltip",defaultMessage:"Reason"})})})},z=e("Vpfc"),le=e("A6KM"),l=["type","defaultRender"],y=["type","defaultRender"],E=function(){var v=Object(_.useRef)(),j=Object(n.l)(),$=Object(_.useState)(),I=Object(O.a)($,2),S=I[0],G=I[1],J=Object(_.useState)(),B=Object(O.a)(J,2),N=B[0],Y=B[1],ue=[{title:Object(t.jsx)(n.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:Object(t.jsx)(n.a,{id:"description",defaultMessage:"Description"}),dataIndex:"description",hideInSearch:!0,sorter:!0},{title:Object(t.jsx)(n.a,{id:"user",defaultMessage:"User"}),dataIndex:"user_id",renderFormItem:function(i,a,x){var T=a.type,ce=a.defaultRender,X=Object(m.a)(a,l);if(T==="form")return null;var q=x.getFieldValue("state");return Object(t.jsx)(A.a,Object(f.a)(Object(f.a)({},X),{},{state:{type:q}}))},render:function(i,a){var x,T;return((x=a.user)===null||x===void 0?void 0:x.id)&&Object(t.jsx)(z.a,{type:"EscolaLms\\Core\\Models\\User",type_id:(T=a.user)===null||T===void 0?void 0:T.id,children:Object(t.jsx)(o.a,{children:a.user.email})},"user")}},{title:Object(t.jsx)(n.a,{id:"consultation_id",defaultMessage:"Consultation"}),dataIndex:"consultation_id",renderFormItem:function(i,a,x){var T=a.type,ce=a.defaultRender,X=Object(m.a)(a,y);if(T==="form")return null;var q=x.getFieldValue("state");return Object(t.jsx)(le.a,Object(f.a)(Object(f.a)({modelType:"CONSULTATIONS"},X),{},{state:{type:q}}))},render:function(i,a){var x,T;return((x=a.consultation)===null||x===void 0?void 0:x.id)&&Object(t.jsx)(z.a,{type:"EscolaLms\\Consultations\\Models\\Consultation",type_id:(T=a.consultation)===null||T===void 0?void 0:T.id,children:Object(t.jsx)(o.a,{children:a.consultation.name})},"consultation_id")}},{title:Object(t.jsx)(n.a,{id:"consultation_term_date",defaultMessage:"Term Date"}),dataIndex:"consultation_term",hideInSearch:!0,sorter:!0,render:function(i,a){return a.consultation_term?Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(n.a,{id:"approved_date",defaultMessage:"Approved Date"}),":",Object(D.a)(new Date(a.consultation_term.date),U.a)]}):Object(t.jsx)(h.b,{direction:"vertical",children:a.proposed_terms.map(function(x){return Object(t.jsxs)(u.a,{size:"small",type:"primary",onClick:function(){Y(x)},children:[Object(t.jsx)(n.a,{id:"approve",defaultMessage:"Approve Term"}),":",Object(D.a)(new Date(x.proposed_at),U.a)]},x.id)})})}},{title:Object(t.jsx)(n.a,{id:"meeting_link",defaultMessage:"Meeting Link"}),dataIndex:"meeting_link",hideInSearch:!0,render:function(i,a){return a.meeting_link?Object(t.jsx)(u.a,{target:"_blank",type:"primary",href:a.meeting_link,children:new URL(a.meeting_link).host}):Object(t.jsx)(C.a.Fragment,{})}},{title:Object(t.jsx)(n.a,{id:"created_at",defaultMessage:"Created at"}),dataIndex:"created_at",hideInSearch:!0,sorter:!0,render:function(i,a){return a.created_at&&Object(D.a)(new Date(a.created_at),U.a)}},{title:Object(t.jsx)(n.a,{id:"status",defaultMessage:"Status"}),dataIndex:"status",sorter:!0,valueType:"select",valueEnum:{pending:{text:"pending",status:"pending"},approved:{text:"approved",status:"approved"}},render:function(i,a){return a.status==="pending"?Object(t.jsx)(u.a,{danger:!0,size:"small",type:"primary",onClick:function(){G(a.id)},children:Object(t.jsx)(n.a,{id:"disapprove",defaultMessage:"Disapprove"})}):a.status}}];return Object(t.jsxs)(P.a,{children:[Object(t.jsx)(c,{term:N,onClose:function(){return Y(void 0)},onSuccess:function(){var i;return v&&((i=v.current)===null||i===void 0?void 0:i.reload())}}),Object(t.jsx)(ie,{id:S,onClose:function(){return G(void 0)},onSuccess:function(){var i;return v&&((i=v.current)===null||i===void 0?void 0:i.reload())}}),Object(t.jsx)(V.a,{headerTitle:j.formatMessage({id:"consultationAccessEnquiries",defaultMessage:"consultation Access Enquiries"}),search:{layout:"vertical"},actionRef:v,rowKey:"id",request:function(i,a){var x=i.pageSize,T=i.current,ce=i.consultation_id,X=i.status,q=i.user_id,fe=i.is_coming,me=i.proposed_at_from,je=i.proposed_at_to,ae=a&&Object.entries(a)[0];return te({pageSize:x,current:T,consultation_id:ce,status:X,user_id:q,is_coming:fe,proposed_at_from:me,proposed_at_to:je,order_by:ae&&ae[0],order:ae?ae[1]==="ascend"?"ASC":"DESC":void 0}).then(function(de){return de.success?{data:de.data,total:de.meta.total,success:!0}:[]})},columns:ue})]})},L=K.default=E},"4fRq":function(F,K){var e=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(e){var M=new Uint8Array(16);F.exports=function(){return e(M),M}}else{var h=new Array(16);F.exports=function(){for(var u=0,r;u<16;u++)(u&3)==0&&(r=Math.random()*4294967296),h[u]=r>>>((u&3)<<3)&255;return h}}},A6KM:function(F,K,e){"use strict";e.d(K,"a",function(){return D});var M=e("OaEy"),h=e("2fM7"),s=e("T2oS"),u=e("W9HT"),r=e("oBTY"),o=e("tJVT"),f=e("q1tI"),m=e.n(f),O=e("H6aw"),_=e("EmS3"),C=e("Gb5Y"),n=e("9kvl"),P=e("nKUr"),V=e.n(P),A=function(W){return W.map(function(p){return"name"in p?{id:Number(p.id),name:p.name}:{id:Number(p.id),name:p.title?p.title:""}})},D=function(W){var p=W.value,g=W.onChange,R=W.multiple,ve=R===void 0?!1:R,ee=W.defaultValue,Z=W.modelType,w=Z===void 0?"COURSE":Z,se=Object(f.useState)([]),te=Object(o.a)(se,2),H=te[0],ne=te[1],Q=Object(f.useState)(!1),re=Object(o.a)(Q,2),k=re[0],t=re[1],c=Object(f.useRef)(),oe=Object(f.useCallback)(function(l){var y,E,L,b;switch(w){case"COURSE":return Object(O.e)(l,{signal:c==null||(y=c.current)===null||y===void 0?void 0:y.signal});case"WEBINAR":return Object(_.f)(l,{signal:c==null||(E=c.current)===null||E===void 0?void 0:E.signal});case"CONSULTATIONS":return Object(C.b)(l,{signal:c==null||(L=c.current)===null||L===void 0?void 0:L.signal});default:return Object(O.e)(l,{signal:c==null||(b=c.current)===null||b===void 0?void 0:b.signal})}},[w,c]),ie=Object(f.useCallback)(function(l){var y,E,L,b;switch(w){case"COURSE":return Object(O.k)(Number(l),{signal:(y=c.current)===null||y===void 0?void 0:y.signal});case"WEBINAR":return Object(_.d)(Number(l),{signal:(E=c.current)===null||E===void 0?void 0:E.signal});case"CONSULTATIONS":return Object(C.e)(Number(l),{signal:(L=c.current)===null||L===void 0?void 0:L.signal});default:return Object(O.k)(Number(l),{signal:(b=c.current)===null||b===void 0?void 0:b.signal})}},[w,c]),z=Object(f.useCallback)(function(l){t(!0),c.current&&c.current.abort(),c.current=new AbortController,oe(l?{title:l}:{}).then(function(y){y.success&&ne(A(y.data)),t(!1)}).catch(function(){return t(!1)})},[w]),le=Object(f.useCallback)(function(l){z(l)},[z]);return Object(f.useEffect)(function(){return c.current=new AbortController,p&&ie(Number(p)).then(function(l){l&&l.success&&ne(function(y){return[].concat(Object(r.a)(y),Object(r.a)(A([l.data])))})}),function(){c.current&&c.current.abort()}},[p,w]),Object(P.jsx)(h.a,{defaultValue:ee,onFocus:function(){return z()},allowClear:!0,style:{width:"100%"},value:p,onChange:g,mode:ve?"multiple":void 0,showSearch:!0,onSearch:le,placeholder:Object(P.jsx)(n.a,{id:"select_content",defaultMessage:"select_content"}),optionFilterProp:"children",filterOption:function(y,E){if(E&&E.children){var L;return(E==null||(L=E.children)===null||L===void 0?void 0:L.toString().toLowerCase().indexOf(y.toLowerCase()))>=0}return!0},notFoundContent:k?Object(P.jsx)(u.a,{size:"small"}):null,optionLabelProp:"label",children:H.map(function(l){return Object(P.jsx)(h.a.Option,{value:l.id,label:l.name,children:l.name},l.id)})})}},EcEN:function(F,K,e){var M=e("xDdU"),h=e("xk4V"),s=h;s.v1=M,s.v4=h,F.exports=s},I2ZF:function(F,K){for(var e=[],M=0;M<256;++M)e[M]=(M+256).toString(16).substr(1);function h(s,u){var r=u||0,o=e;return[o[s[r++]],o[s[r++]],o[s[r++]],o[s[r++]],"-",o[s[r++]],o[s[r++]],"-",o[s[r++]],o[s[r++]],"-",o[s[r++]],o[s[r++]],"-",o[s[r++]],o[s[r++]],o[s[r++]],o[s[r++]],o[s[r++]],o[s[r++]]].join("")}F.exports=h},xDdU:function(F,K,e){var M=e("4fRq"),h=e("I2ZF"),s,u,r=0,o=0;function f(m,O,_){var C=O&&_||0,n=O||[];m=m||{};var P=m.node||s,V=m.clockseq!==void 0?m.clockseq:u;if(P==null||V==null){var A=M();P==null&&(P=s=[A[0]|1,A[1],A[2],A[3],A[4],A[5]]),V==null&&(V=u=(A[6]<<8|A[7])&16383)}var D=m.msecs!==void 0?m.msecs:new Date().getTime(),U=m.nsecs!==void 0?m.nsecs:o+1,W=D-r+(U-o)/1e4;if(W<0&&m.clockseq===void 0&&(V=V+1&16383),(W<0||D>r)&&m.nsecs===void 0&&(U=0),U>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");r=D,o=U,u=V,D+=122192928e5;var p=((D&268435455)*1e4+U)%4294967296;n[C++]=p>>>24&255,n[C++]=p>>>16&255,n[C++]=p>>>8&255,n[C++]=p&255;var g=D/4294967296*1e4&268435455;n[C++]=g>>>8&255,n[C++]=g&255,n[C++]=g>>>24&15|16,n[C++]=g>>>16&255,n[C++]=V>>>8|128,n[C++]=V&255;for(var R=0;R<6;++R)n[C+R]=P[R];return O||h(n)}F.exports=f},xk4V:function(F,K,e){var M=e("4fRq"),h=e("I2ZF");function s(u,r,o){var f=r&&o||0;typeof u=="string"&&(r=u==="binary"?new Array(16):null,u=null),u=u||{};var m=u.random||(u.rng||M)();if(m[6]=m[6]&15|64,m[8]=m[8]&63|128,r)for(var O=0;O<16;++O)r[f+O]=m[O];return r||h(m)}F.exports=s}}]);

//# sourceMappingURL=p__ConsultationsAccess.cb64d91b.async.js.map