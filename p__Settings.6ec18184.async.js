(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{"+up7":function(re,b,e){"use strict";e.d(b,"f",function(){return C}),e.d(b,"d",function(){return n}),e.d(b,"b",function(){return g}),e.d(b,"h",function(){return m}),e.d(b,"c",function(){return T}),e.d(b,"e",function(){return c}),e.d(b,"a",function(){return _}),e.d(b,"g",function(){return V});var A=e("k1fw"),P=e("9og8"),I=e("WmNS"),r=e.n(I),p=e("9kvl");function C(i,l){return F.apply(this,arguments)}function F(){return F=Object(P.a)(r.a.mark(function i(l,E){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(p.f)("/api/admin/settings",Object(A.a)({method:"GET",useCache:!1,params:Object(A.a)(Object(A.a)({},l),{},{per_page:l.pageSize,page:l.current})},E||{})));case 1:case"end":return a.stop()}},i)})),F.apply(this,arguments)}function n(i,l){return S.apply(this,arguments)}function S(){return S=Object(P.a)(r.a.mark(function i(l,E){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(p.f)("/api/admin/settings/".concat(l),Object(A.a)({method:"GET",useCache:!1},E||{})));case 1:case"end":return a.stop()}},i)})),S.apply(this,arguments)}function g(i,l){return w.apply(this,arguments)}function w(){return w=Object(P.a)(r.a.mark(function i(l,E){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(p.f)("/api/admin/settings",Object(A.a)({method:"POST",headers:{"Content-Type":"application/json"},data:l},E||{})));case 1:case"end":return a.stop()}},i)})),w.apply(this,arguments)}function m(i,l,E){return Q.apply(this,arguments)}function Q(){return Q=Object(P.a)(r.a.mark(function i(l,E,u){return r.a.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.abrupt("return",Object(p.f)("/api/admin/settings/".concat(l),Object(A.a)({method:"PUT",headers:{"Content-Type":"application/json"},data:E},u||{})));case 1:case"end":return ee.stop()}},i)})),Q.apply(this,arguments)}function T(i,l){return D.apply(this,arguments)}function D(){return D=Object(P.a)(r.a.mark(function i(l,E){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(p.f)("/api/admin/settings/".concat(l),Object(A.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},E||{})));case 1:case"end":return a.stop()}},i)})),D.apply(this,arguments)}function c(i){return B.apply(this,arguments)}function B(){return B=Object(P.a)(r.a.mark(function i(l){return r.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",Object(p.f)("/api/admin/settings/groups",Object(A.a)({method:"GET",useCache:!1},l||{})));case 1:case"end":return u.stop()}},i)})),B.apply(this,arguments)}function _(i){return j.apply(this,arguments)}function j(){return j=Object(P.a)(r.a.mark(function i(l){return r.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",Object(p.f)("/api/admin/config",Object(A.a)({method:"GET",useCache:!1},l||{})));case 1:case"end":return u.stop()}},i)})),j.apply(this,arguments)}function V(i,l){return N.apply(this,arguments)}function N(){return N=Object(P.a)(r.a.mark(function i(l,E){var u,a;return r.a.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return u=l.key,a=l.value,L.abrupt("return",Object(p.f)("/api/admin/config",Object(A.a)({method:"POST",data:{config:[{key:u,value:a}]}},E||{})));case 2:case"end":return L.stop()}},i)})),N.apply(this,arguments)}},"3fxf":function(re,b,e){"use strict";var A=e("DjyN"),P=e("NUBc"),I=e("Mwp2"),r=e("VXEj"),p=e("+L6B"),C=e("2/Rp"),F=e("5NDa"),n=e("5rEg"),S=e("oBTY"),g=e("k1fw"),w=e("tJVT"),m=e("DYRE"),Q=e("zeV3"),T=e("tU7J"),D=e("wFql"),c=e("q1tI"),B=e.n(c),_=e("BAh9"),j=e("/MfK"),V=e("mAF4"),N=e("dF/Y"),i=e("9kvl"),l=e("DBJ/"),E=e("lLVY"),u=e.n(E),a=e("nKUr"),ee=e.n(a),L=function(ie){var $=ie.directory,ae=ie.onUploaded;return Object(a.jsxs)(Q.b,{align:"start",children:[Object(a.jsxs)(D.a.Text,{children:[Object(a.jsx)(i.a,{id:"pages.files.filesBrowser"}),Object(a.jsx)(D.a.Text,{code:!0,children:$})]}),Object(a.jsx)(l.a,{url:"/api/admin/file/upload",name:"file[]",data:{target:$},onChange:function(le){return le.file.status==="done"&&ae($,le.file)}})]})},oe=function(ie){var $=ie.defaultDirectory,ae=$===void 0?"/":$,J=ie.onFile,le=Object(i.i)(),be=Object(c.useState)({loading:!1,name:"",directory:ae,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),me=Object(w.a)(be,2),z=me[0],je=me[1],se=Object(c.useRef)(),X=Object(c.useCallback)(function(R){je(function(O){return Object(g.a)(Object(g.a)({},O),{},{loading:R})})},[]),t=Object(c.useCallback)(function(R,O){je(function(Y){return Object(g.a)(Object(g.a)(Object(g.a)({},Y),R.data),{},{data:[{url:O.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(Object(S.a)(R.data.data.map(function(q){return Object(g.a)(Object(g.a)({},q),{},{url:q.mime==="directory"?"".concat(O,"/").concat(q.name):q.url})}))).filter(function(q){return O==="/"?q.name!=="..":!0}),directory:O,loading:!1})})},[X]),te=Object(c.useCallback)(function(R){var O,Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,q=function(){return se.current&&se.current.abort()};return q(),se.current=new AbortController,X(!0),Object(_.a)({directory:R,page:Y},{signal:(O=se.current)===null||O===void 0?void 0:O.signal}).then(function(ce){ce.success&&t(ce,R)}).catch(function(){return X(!1)}),function(){q()}},[X]);Object(c.useEffect)(function(){return te(ae)},[ae,te]);var he=Object(c.useCallback)(function(R){X(!0),Object(_.c)(R).then(function(){te(z.directory)}).catch(function(){X(!1)})},[te,X,z.directory]),ge=Object(c.useCallback)(function(R,O){var Y,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,ce=function(){return se.current&&se.current.abort()};return ce(),se.current=new AbortController,X(!0),Object(_.b)({directory:R,name:O,page:q},{signal:(Y=se.current)===null||Y===void 0?void 0:Y.signal}).then(function(Oe){Oe.success&&t(Oe,R)}).catch(function(){return X(!1)}),function(){ce()}},[X]);return Object(a.jsxs)("div",{className:"file-browser",children:[Object(a.jsxs)("div",{className:"file-browser__header",children:[Object(a.jsx)(n.a,{placeholder:le.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(O){return je(function(Y){return Object(g.a)(Object(g.a)({},Y),{},{name:O.target.value})})},value:z.name}),Object(a.jsxs)("div",{children:[Object(a.jsx)(C.a,{className:"file-browser__button",onClick:function(){return te(z.directory)},children:Object(a.jsx)(i.a,{id:"reset"})}),Object(a.jsx)(C.a,{className:"file-browser__button",type:"primary",onClick:function(){return ge(z.directory,z.name)},children:Object(a.jsx)(i.a,{id:"query"})})]})]}),Object(a.jsx)(r.b,{loading:z.loading,size:"small",itemLayout:"horizontal",dataSource:z.data,header:Object(a.jsx)(L,{directory:z.directory,onUploaded:function(O,Y){return te(O)&&J&&J(Y,O)}}),footer:Object(a.jsx)(L,{directory:z.directory,onUploaded:function(O){return te(O)&&J&&J(name,O)}}),renderItem:function(O){return Object(a.jsx)(r.b.Item,{actions:O.mime!=="directory"?[Object(a.jsx)(C.a,{type:"default",danger:!0,icon:Object(a.jsx)(j.a,{}),size:"small",onClick:function(){return he(O.url)}})]:[],children:Object(a.jsx)(r.b.Item.Meta,{avatar:O.mime==="directory"?Object(a.jsx)(C.a,{type:"primary",icon:Object(a.jsx)(V.a,{}),size:"small",onClick:function(){return te(O.url)}}):Object(a.jsx)("a",{href:O.url,target:"_blank",rel:"noreferrer",children:Object(a.jsx)(C.a,{type:"default",icon:Object(a.jsx)(N.a,{}),size:"small"})}),description:Object(a.jsx)(B.a.Fragment,{children:Object(a.jsx)(C.a,{type:"text",size:"small",onClick:function(){return O.mime==="directory"?te(O.url):J&&J(O,z.directory)},children:O.name})})})})}}),Object(a.jsx)(P.a,{pageSizeOptions:[],current:z.current_page,total:z.total,pageSize:z.per_page,onChange:function(O){return te(z.directory,O)}})]})};b.a=oe},BAh9:function(re,b,e){"use strict";e.d(b,"a",function(){return C}),e.d(b,"b",function(){return n}),e.d(b,"e",function(){return g}),e.d(b,"d",function(){return m}),e.d(b,"c",function(){return Q});var A=e("k1fw"),P=e("9og8"),I=e("WmNS"),r=e.n(I),p=e("9kvl");function C(D,c){return F.apply(this,arguments)}function F(){return F=Object(P.a)(r.a.mark(function D(c,B){return r.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(p.f)("/api/admin/file/list",Object(A.a)({method:"GET",params:c},B||{})));case 1:case"end":return j.stop()}},D)})),F.apply(this,arguments)}function n(D,c){return S.apply(this,arguments)}function S(){return S=Object(P.a)(r.a.mark(function D(c,B){return r.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(p.f)("/api/admin/file/find",Object(A.a)({method:"GET",params:c},B||{})));case 1:case"end":return j.stop()}},D)})),S.apply(this,arguments)}function g(D,c,B){return w.apply(this,arguments)}function w(){return w=Object(P.a)(r.a.mark(function D(c,B,_){var j;return r.a.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return j=new FormData,j.append("file[]",c),j.append("target",B),N.abrupt("return",Object(p.f)("/api/admin/file/upload",Object(A.a)({method:"POST",data:j},_||{})));case 4:case"end":return N.stop()}},D)})),w.apply(this,arguments)}var m=function(c){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(c,"&w=").concat(B)};function Q(D,c){return T.apply(this,arguments)}function T(){return T=Object(P.a)(r.a.mark(function D(c,B){return r.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object(p.f)("/api/admin/file/delete",Object(A.a)({method:"DELETE",data:{url:c}},B||{})));case 1:case"end":return j.stop()}},D)})),T.apply(this,arguments)}},BiO0:function(re,b,e){"use strict";var A=e("wx14"),P=e("Ff2n"),I=e("q1tI"),r=e.n(I),p=e("adzw"),C=["fieldProps","proFieldProps"],F=function(S,g){var w=S.fieldProps,m=S.proFieldProps,Q=Object(P.a)(S,C);return r.a.createElement(p.a,Object(A.a)({ref:g,mode:"edit",valueType:"textarea",fieldProps:w,proFieldProps:m},Q))};b.a=r.a.forwardRef(F)},"DBJ/":function(re,b,e){"use strict";var A=e("y8nQ"),P=e("Vl3Y"),I=e("etVw"),r=e("q1tI"),p=e.n(r),C=e("9kvl"),F=e("qFDU"),n=e("nKUr"),S=e.n(n),g=function(m){var Q=m.onChange,T=m.url,D=m.name,c=m.extra,B=m.accept,_=m.data,j=m.wrapInForm,V=j===void 0?!0:j,N=m.title,i=Object(C.i)();return _&&_[D]&&delete _[D],Object(n.jsx)(F.a,{condition:V,wrap:function(E){return Object(n.jsx)(P.a,{children:E})},children:Object(n.jsx)(I.a,{title:N||Object(n.jsx)(C.a,{id:"upload_click_here"}),placeholder:i.formatMessage({id:"upload_click_here"}),onChange:Q,label:Object(n.jsx)(C.a,{id:"upload"}),max:2,fieldProps:{data:_,accept:B,name:D,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(T),extra:c})})};b.a=g},YjuE:function(re,b,e){"use strict";e.r(b);var A=e("T2oS"),P=e("W9HT"),I=e("tJVT"),r=e("q1tI"),p=e.n(r),C=e("nhC9"),F=e("Ty5D"),n=e("9kvl"),S=e("tMyG"),g=e("+up7"),w=e("P2fV"),m=e("NJEC"),Q=e("5Dmo"),T=e("3S7+"),D=e("+L6B"),c=e("2/Rp"),B=e("+BJd"),_=e("mr32"),j=e("jrin"),V=e("k1fw"),N=e("miYZ"),i=e("tsqr"),l=e("9og8"),E=e("WmNS"),u=e.n(E),a=e("xvlK"),ee=e("Qiat"),L=e("y8nQ"),oe=e("Vl3Y"),ve=e("5NDa"),ie=e("5rEg"),$=e("VMEa"),ae=e("rmhi"),J=e("Qurx"),le=e("F/zT"),be=e("5qq5"),me=e("BiO0"),z=e("hd5d"),je=e("3fxf"),se=e("ovOe"),X=e.n(se),t=e("nKUr"),te=function(s){var o=s.value,f=s.onChange,M=s.type,K=M===void 0?"file":M,d=Object(r.useState)(!1),U=Object(I.a)(d,2),Z=U[0],v=U[1];return Object(t.jsxs)(p.a.Fragment,{children:[Object(t.jsxs)($.a.Group,{children:[Object(t.jsx)(ie.a,{value:o,readOnly:!0}),Object(t.jsxs)(c.a,{size:"small",type:"primary",onClick:function(){return v(!Z)},children:["toggle ",K," browser"]})]}),Z&&Object(t.jsx)(je.a,{onFile:function(H,x){return f&&f("".concat(x,"/").concat(H.name))}})]})},he=function(s){var o=Object(n.i)(),f=s.visible,M=s.onVisibleChange,K=s.onFinish,d=s.id,U=oe.a.useForm(),Z=Object(I.a)(U,1),v=Z[0],G=!d||d===-1,H=Object(r.useState)("text"),x=Object(I.a)(H,2),h=x[0],y=x[1];Object(r.useEffect)(function(){d&&d!==-1?Object(g.d)(d).then(function(k){k.success&&(v.setFieldsValue(k.data),y(k.data.type))}):(v.resetFields(),y("text"))},[d,v]);var ue=Object(r.useCallback)(function(k){k.type&&k.type!==h&&y(k.type)},[h]);return Object(t.jsxs)(ae.a,{form:v,title:o.formatMessage({id:d?"editSetting":"newSetting",defaultMessage:d?"editSetting":"newSetting"}),width:"60vw",visible:f,onVisibleChange:M,onFinish:K,onValuesChange:ue,children:[Object(t.jsxs)($.a.Group,{children:[Object(t.jsx)(J.a,{label:Object(t.jsx)(n.a,{id:"group",defaultMessage:"group"}),rules:[{required:!0}],width:"md",name:"group"})," ",Object(t.jsx)(J.a,{label:Object(t.jsx)(n.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"})]}),Object(t.jsxs)($.a.Group,{children:[Object(t.jsx)(le.a,{name:"enumerable",label:Object(t.jsx)(n.a,{id:"enumerable",defaultMessage:"enumerable"})}),Object(t.jsx)(le.a,{name:"public",label:Object(t.jsx)(n.a,{id:"public",defaultMessage:"public"})})]}),Object(t.jsx)($.a.Group,{children:Object(t.jsx)(be.a.Group,{disabled:!G,name:"type",label:Object(t.jsx)(n.a,{id:"type"}),options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"},{label:"json",value:"json"},{label:"file",value:"file"},{label:"image",value:"image"}]})}),Object(t.jsxs)("div",{children:[h==="text"&&Object(t.jsx)(J.a,{width:"lg",name:"value",label:Object(t.jsx)(n.a,{id:"value"})}),h==="json"&&Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(me.a,{width:"lg",name:"value",label:Object(t.jsx)(n.a,{id:"value"}),tooltip:"".concat(o.formatMessage({id:"example_json"}),': {"name":"John", "age":30, "city":["New York","Warsaw"]}')}),Object(t.jsx)($.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(X.a,{src:JSON.parse(v.getFieldValue("value"))})}catch(ne){return Object(t.jsx)(X.a,{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]}),(h==="file"||h==="image")&&Object(t.jsx)($.a.Item,{name:"value",label:"value",tooltip:"select file from current repository or upload new one",valuePropName:"value",children:Object(t.jsx)(te,{type:h})}),h==="markdown"&&Object(t.jsx)($.a.Item,{name:"value",label:"value",tooltip:"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.",valuePropName:"value",children:Object(t.jsx)(z.a,{directory:"settings/wysiwyg"})})]})]})},ge=he,R=e("G3dp"),O=e("/MfK"),Y=function(){var W=Object(l.a)(u.a.mark(function s(o,f,M){var K;return u.a.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return K=i.default.loading(o.formatMessage({id:"loading"})),U.prev=1,U.next=4,M&&M!==-1?Object(g.h)(M,Object(V.a)({},f)):Object(g.b)(Object(V.a)({},f));case 4:return K(),i.default.success(o.formatMessage({id:"success"})),U.abrupt("return",!0);case 9:return U.prev=9,U.t0=U.catch(1),K(),i.default.error(o.formatMessage({id:"error"})),U.abrupt("return",!1);case 14:case"end":return U.stop()}},s,null,[[1,9]])}));return function(o,f,M){return W.apply(this,arguments)}}(),q=function(){var W=Object(l.a)(u.a.mark(function s(o,f){var M;return u.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return M=i.default.loading(o.formatMessage({id:"loading"})),d.prev=1,d.next=4,Object(g.c)(f);case 4:return M(),i.default.success(o.formatMessage({id:"success"})),d.abrupt("return",!0);case 9:return d.prev=9,d.t0=d.catch(1),M(),i.default.error(o.formatMessage({id:"error"})),d.abrupt("return",!1);case 14:case"end":return d.stop()}},s,null,[[1,9]])}));return function(o,f){return W.apply(this,arguments)}}(),ce=function(){var s=Object(r.useState)(!1),o=Object(I.a)(s,2),f=o[0],M=o[1],K=Object(r.useState)([]),d=Object(I.a)(K,2),U=d[0],Z=d[1],v=Object(r.useRef)(),G=Object(n.i)();Object(r.useEffect)(function(){Object(g.e)().then(function(x){x.success&&Z(x.data)})},[]);var H=[{title:Object(t.jsx)(n.a,{id:"group",defaultMessage:"group"}),dataIndex:"group",hideInSearch:!1,key:"group",valueType:"select",width:100,valueEnum:U.sort().reduce(function(x,h){return Object(V.a)(Object(V.a)({},x),{},Object(j.a)({},h,h))},{})},{title:Object(t.jsx)(n.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(n.a,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:Object(t.jsx)(n.a,{id:"enumerable",defaultMessage:"enumerable"}),dataIndex:"enumerable",hideInForm:!0,hideInSearch:!0,render:function(h,y){return Object(t.jsx)(_.a,{color:y.enumerable?"success":"error",children:Object(t.jsx)(n.a,{id:y.enumerable?"true":"false",defaultMessage:y.enumerable?"true":"false"})})}},{title:Object(t.jsx)(n.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(h,y){return Object(t.jsx)(_.a,{color:y.public?"success":"error",children:Object(t.jsx)(n.a,{id:y.public?"true":"false",defaultMessage:y.public?"true":"false"})})}},{hideInSearch:!0,title:Object(t.jsx)(n.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(h,y){return[Object(t.jsx)(T.a,{title:Object(t.jsx)(n.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(c.a,{type:"primary",icon:Object(t.jsx)(R.a,{}),onClick:function(){return M(y.id)}})},"edit"),Object(t.jsx)(m.a,{title:Object(t.jsx)(n.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:Object(l.a)(u.a.mark(function ue(){var k;return u.a.wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.next=2,q(G,y.id);case 2:k=fe.sent,k&&(M(!1),v.current&&v.current.reload());case 4:case"end":return fe.stop()}},ue)})),okText:Object(t.jsx)(n.a,{id:"yes",defaultMessage:"Yes"}),cancelText:Object(t.jsx)(n.a,{id:"no",defaultMessage:"No"}),children:Object(t.jsx)(T.a,{title:Object(t.jsx)(n.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(c.a,{type:"primary",icon:Object(t.jsx)(O.a,{}),danger:!0})})},"delete")]}}];return Object(t.jsxs)(p.a.Fragment,{children:[Object(t.jsx)(ee.a,{headerTitle:G.formatMessage({id:"menu.settings"}),actionRef:v,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[Object(t.jsxs)(c.a,{type:"primary",onClick:function(){M(-1)},children:[Object(t.jsx)(a.a,{})," ",Object(t.jsx)(n.a,{id:"pages.searchTable.new"})]},"primary")]},request:function(h){var y=h.pageSize,ue=h.current,k=h.group;return Object(g.f)({pageSize:y,current:ue,group:k}).then(function(ne){return ne.success?{data:ne.data,total:ne.meta.total,success:!0}:[]})},columns:H}),Object(t.jsx)(ge,{groups:U,id:f,visible:Number.isInteger(f),onVisibleChange:function(h){return h===!1&&M(!1)},onFinish:function(){var x=Object(l.a)(u.a.mark(function h(y){var ue;return u.a.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,Y(G,y,Number(f));case 2:ue=ne.sent,ue&&(M(!1),v.current&&v.current.reload());case 4:case"end":return ne.stop()}},h)}));return function(h){return x.apply(this,arguments)}}()})]})},Oe=ce,Ue=e("tU7J"),pe=e("wFql"),_e=e("Fghh"),Ee=pe.a.Text,de;(function(W){W.Array="array",W.String="string"})(de||(de={}));var Me=function(s,o){return o===de.Array?s&&Array.isArray(s)?JSON.stringify(s):"[]":s},ye=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",o=arguments.length>1?arguments[1]:void 0;if(o===de.Array){var f=JSON.parse(s);return f&&Array.isArray(f)?f:[]}return s},Pe=function(s){var o=Object(_e.j)(),f=s.visible,M=s.onVisibleChange,K=s.onFinish,d=s.value,U=oe.a.useForm(),Z=Object(I.a)(U,1),v=Z[0],G=Object(r.useMemo)(function(){return(d.rules||[]).includes(de.Array)?de.Array:de.String},[d.rules]);return Object(r.useEffect)(function(){v.setFieldsValue(Object(V.a)(Object(V.a)({},d),{},{value:Me(d.value,G)}))},[G,d,v]),Object(t.jsxs)(ae.a,{form:v,title:d.full_key,width:"60vw",visible:f,onVisibleChange:M,onFinish:Object(l.a)(u.a.mark(function H(){var x;return u.a.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,Object(g.g)({key:d.full_key,value:ye(v.getFieldsValue().value,G)});case 2:if(x=y.sent,!x.success){y.next=6;break}return K(x.success===!0),y.abrupt("return",x.success);case 6:return y.abrupt("return");case 7:case"end":return y.stop()}},H)})),children:[Object(t.jsxs)($.a.Group,{children:[Object(t.jsx)(le.a,{disabled:!0,name:"public",label:Object(t.jsx)(n.a,{id:"public",defaultMessage:"public"})}),Object(t.jsx)(le.a,{disabled:!0,name:"readonly",label:Object(t.jsx)(n.a,{id:"readonly",defaultMessage:"readonly"})}),Object(t.jsx)($.a.Item,{shouldUpdate:!0,label:Object(t.jsx)(n.a,{id:"rules",defaultMessage:"rules"}),children:function(){return Object(t.jsx)(Ee,{code:!0,children:JSON.stringify(v.getFieldValue("rules"))})}})]}),G===de.Array?Object(t.jsxs)(t.Fragment,{children:[Object(t.jsx)(me.a,{width:"lg",name:"value",label:Object(t.jsx)(n.a,{id:"value"}),tooltip:"".concat(o.formatMessage({id:"example_json"}),': ["first_field_name", "second_field_name"]')}),Object(t.jsx)($.a.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return Object(t.jsx)(X.a,{src:JSON.parse(v.getFieldValue("value"))})}catch(x){return Object(t.jsx)(X.a,{src:JSON.parse('{ "error": "cannot parse this array" }')})}}})]}):Object(t.jsx)(J.a,{width:"lg",name:"value",label:Object(t.jsx)(n.a,{id:"value"})})]})},De=Pe,xe=[{title:Object(t.jsx)(n.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(t.jsx)(n.a,{id:"readonly",defaultMessage:"readonly"}),dataIndex:"readonly",hideInForm:!0,hideInSearch:!0,render:function(s,o){return Object(t.jsx)(_.a,{color:o.readonly?"success":"error",children:Object(t.jsx)(n.a,{id:o.readonly?"true":"false",defaultMessage:o.readonly?"true":"false"})})}},{title:Object(t.jsx)(n.a,{id:"public",defaultMessage:"public"}),dataIndex:"public",hideInForm:!0,hideInSearch:!0,render:function(s,o){return Object(t.jsx)(_.a,{color:o.public?"success":"error",children:Object(t.jsx)(n.a,{id:o.public?"true":"false",defaultMessage:o.public?"true":"false"})})}},{title:Object(t.jsx)(n.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0}],Ce=function W(s,o){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return!s||typeof s!="object"?!1:(Object.keys(s).forEach(function(M){var K=s[M];M===o?f.push(s):typeof K=="object"&&W(K,o,f)}),f)},Te=function(s){var o=s.packageName,f=s.values,M=s.onValueUpdated,K=Object(n.i)(),d=Object(r.useState)(),U=Object(I.a)(d,2),Z=U[0],v=U[1],G=Object(r.useMemo)(function(){var H=f[o];return Ce(H,"rules")},[f,o]);return Object(t.jsxs)(p.a.Fragment,{children:[Object(t.jsx)(ee.a,{headerTitle:K.formatMessage({id:"menu.settings"}),rowKey:"key",search:{labelWidth:120},dataSource:G,columns:[].concat(xe,[{hideInSearch:!0,title:Object(t.jsx)(n.a,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(x,h){return[Object(t.jsx)(T.a,{title:Object(t.jsx)(n.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(c.a,{type:"primary",icon:Object(t.jsx)(R.a,{}),onClick:function(){return v(h)}})},"edit")]}}])}),Z&&Object(t.jsx)(De,{value:Z,visible:Z!==void 0,onVisibleChange:function(x){return x===!1&&v(void 0)},onFinish:Object(l.a)(u.a.mark(function H(){return u.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:M();case 1:case"end":return h.stop()}},H)}))})]})},Ae=Te,Ie=function(s){return s.replaceAll("escolalms","").split("_").join("")},Be=b.default=function(){var W=Object(F.h)(),s=Object(n.i)(),o=W.tab,f=o===void 0?"user_settings":o,M=Object(r.useState)(),K=Object(I.a)(M,2),d=K[0],U=K[1],Z=Object(r.useCallback)(function(){Object(g.a)().then(function(v){v.success&&U(v.data)})},[]);return Object(r.useEffect)(function(){Z()},[]),d?Object(t.jsx)(S.a,{title:Object(t.jsx)(n.a,{id:"settings"}),header:{breadcrumb:{routes:[{path:"settings",breadcrumbName:s.formatMessage({id:"menu.Settings"})},{path:String(f),breadcrumbName:String(f)}]}},children:Object(t.jsxs)(C.a,{tabs:{type:"card",activeKey:f,onChange:function(G){return n.d.push("/settings/".concat(G))}},children:[Object(t.jsx)(C.a.TabPane,{tab:Object(t.jsx)(n.a,{id:"user.settings"}),children:Object(t.jsx)(Oe,{})},"user_settings"),Object.keys(d).map(function(v){return Object(t.jsxs)(C.a.TabPane,{tab:Object(t.jsxs)("span",{children:[Object(t.jsx)(n.a,{id:"package"})," ",Ie(v)]}),children:[Object(t.jsx)(Ae,{values:d,packageName:v,onValueUpdated:function(){return Z()}}),v]},v)})]})}):Object(t.jsx)(P.a,{})}},etVw:function(re,b,e){"use strict";var A=e("DZo9"),P=e("8z0m"),I=e("+L6B"),r=e("2/Rp"),p=e("wx14"),C=e("q1tI"),F=e.n(C),n=e("z7Xi"),S=e("WFLz"),g=function(m,Q){var T=m.fieldProps,D=m.name,c=m.action,B=m.accept,_=m.listType,j=m.title,V=j===void 0?"\u5355\u51FB\u4E0A\u4F20":j,N=m.max,i=m.icon,l=i===void 0?F.a.createElement(n.a,null):i,E=m.value,u=m.buttonProps,a=m.onChange,ee=m.disabled,L=m.proFieldProps,oe=m.fileList,ve=(N===void 0||!E||(E==null?void 0:E.length)<N)&&(L==null?void 0:L.mode)!=="read",ie=(_!=null?_:T==null?void 0:T.listType)==="picture-card";return F.a.createElement(P.a,Object(p.a)({action:c,accept:B,ref:Q,name:D||"file",listType:_||"picture",fileList:oe!=null?oe:E},T,{onChange:function(ae){var J;a==null||a(ae),T==null||(J=T.onChange)===null||J===void 0||J.call(T,ae)}}),ve&&(ie?F.a.createElement("span",null,l," ",V):F.a.createElement(r.a,Object(p.a)({disabled:ee||(T==null?void 0:T.disabled)},u),l,V)))};b.a=Object(S.a)(F.a.forwardRef(g),{getValueFromEvent:function(m){return m.fileList}})},hd5d:function(re,b,e){"use strict";var A=e("9og8"),P=e("WmNS"),I=e.n(P),r=e("q1tI"),p=e.n(r),C=e("3Ef1"),F=e.n(C),n=e("BAh9"),S=e("vtG9"),g=e.n(S),w=e("9kvl"),m=e("nKUr"),Q=e.n(m),T=function(c){var B=c.value,_=c.onChange,j=c.directory,V=j===void 0?"/wysiwyg":j,N=Object(w.i)();return Object(m.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(m.jsx)(F.a,{uploadImage:function(){var i=Object(A.a)(I.a.mark(function l(E){var u,a;return I.a.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,Object(n.e)(E,V);case 2:if(u=L.sent,!u.success){L.next=6;break}return a=u.data[0].name.includes("/")?u.data[0].name:"".concat(V).concat(u.data[0].name),L.abrupt("return",Object(n.d)(a,1e3));case 6:throw new Error("Error while uploading");case 7:case"end":return L.stop()}},l)}));return function(l){return i.apply(this,arguments)}}(),defaultValue:B||"",onChange:function(l){return _&&_(l())},placeholder:N.formatMessage({id:"wysiwyg_placeholder"})})})};b.a=T},lLVY:function(re,b,e){},qFDU:function(re,b,e){"use strict";var A=e("q1tI"),P=e.n(A);b.a=function(I){var r=I.condition,p=I.children,C=I.wrap;return r?P.a.cloneElement(C(p)):p}},vtG9:function(re,b,e){}}]);
