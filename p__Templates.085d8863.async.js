(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"9A0E":function(k,d,t){"use strict";t.r(d),t.d(d,"channelType",function(){return E});var s=t("q1tI"),j=t("Ty5D"),a=t("9kvl"),p=t("tMyG"),y=t("nhC9"),U=t("P2fV"),V=t("NJEC"),W=t("5Dmo"),J=t("3S7+"),F=t("+L6B"),D=t("2/Rp"),T=t("qLMh"),w=t("miYZ"),g=t("tsqr"),Y=t("9og8"),z=t("+BJd"),Q=t("mr32"),L=t("tJVT"),Z=t("xvlK"),$=t("G3dp"),H=t("/MfK"),x=t("55Ip"),n=t("sWYD"),r=t("Qiat"),i=t("rWUb"),l=t("mGZj"),e=t("nKUr"),c=function(O){var M=O.templateType,f=O.channel,b=Object(s.useRef)(),S=Object(a.l)(),G=Object(s.useState)(!1),v=Object(L.a)(G,2),P=v[0],o=v[1],K=[{title:Object(e.jsx)(a.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:Object(e.jsx)(a.a,{id:"created_at",defaultMessage:"created_at"}),dataIndex:"created_at",hideInSearch:!0,sorter:!0,render:function(h,m){return m.created_at&&Object(n.a)(new Date(m.created_at),l.a)}},{title:Object(e.jsx)(a.a,{id:"name",defaultMessage:"name"}),dataIndex:"name",hideInSearch:!1,sorter:!0},{title:Object(e.jsx)(a.a,{id:"event",defaultMessage:"event"}),dataIndex:"event",hideInSearch:!0,sorter:!1,render:function(h,m){return Object(e.jsx)(a.a,{id:m.event,defaultMessage:m.event})}},{title:Object(e.jsx)(a.a,{id:"templates.is_default"}),dataIndex:"default",hideInSearch:!0,valueEnum:{true:Object(e.jsx)(Q.a,{color:"success",children:Object(e.jsx)(a.a,{id:"yes"})}),false:Object(e.jsx)(Q.a,{color:"error",children:Object(e.jsx)(a.a,{id:"no"})})}}],ee=Object(s.useCallback)(function(){var R=Object(Y.a)(Object(T.a)().mark(function h(m){var A,B;return Object(T.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o(!0),A=g.b.loading(Object(e.jsx)(a.a,{id:"loading",defaultMessage:"loading"})),u.prev=2,u.next=5,Object(i.b)(m).then(function(I){o(!1),I.success&&g.b.success(I.message)});case 5:return A(),o(!1),(B=b.current)===null||B===void 0||B.reload(),u.abrupt("return",!0);case 11:return u.prev=11,u.t0=u.catch(2),A(),g.b.error(Object(e.jsx)(a.a,{id:"error",defaultMessage:"error"})),o(!1),u.abrupt("return",!1);case 17:case"end":return u.stop()}},h,null,[[2,11]])}));return function(h){return R.apply(this,arguments)}}(),[b]);return Object(e.jsx)(r.a,{headerTitle:S.formatMessage({id:"templates",defaultMessage:"templates"}),loading:P,actionRef:b,rowKey:"id",search:{layout:"vertical"},toolBarRender:function(){return[Object(e.jsx)(x.a,{to:"/configuration/templates/".concat(M,"/new"),children:Object(e.jsxs)(D.a,{type:"primary",children:[Object(e.jsx)(Z.a,{})," ",Object(e.jsx)(a.a,{id:"new",defaultMessage:"new"})]},"primary")},"new")]},request:function(h,m){var A=h.pageSize,B=h.current,X=h.name;o(!0);var u=m&&Object.entries(m)[0];return Object(i.e)({per_page:A,page:B,channel:f,name:X||void 0,order_by:u&&u[0],order:u?u[1]==="ascend"?"ASC":"DESC":void 0}).then(function(I){return I.success?(o(!1),{data:I.data,total:I.meta.total,success:!0}):[]})},columns:[].concat(K,[{hideInSearch:!0,title:Object(e.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",render:function(h,m){return[Object(e.jsx)(x.a,{to:"/configuration/templates/".concat(M,"/").concat(m.id),children:Object(e.jsx)(J.a,{title:Object(e.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(e.jsx)(D.a,{type:"primary",icon:Object(e.jsx)($.a,{})})})},"edit"),Object(e.jsx)(V.a,{title:Object(e.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:function(){return ee(m.id)},okText:Object(e.jsx)(a.a,{id:"yes"}),cancelText:Object(e.jsx)(a.a,{id:"no"}),children:Object(e.jsx)(J.a,{title:Object(e.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(e.jsx)(D.a,{type:"primary",icon:Object(e.jsx)(H.a,{}),danger:!0})})},"delete")]}}])})},N=c,q=function(){var O,M=Object(a.m)("@@initialState"),f=M.initialState,b=(f==null||(O=f.currentUser)===null||O===void 0?void 0:O.roles)||[],S=Object(s.useCallback)(function(G){var v,P,o=f==null||(v=f.config)===null||v===void 0||(P=v.find(function(K){return K.key===G}))===null||P===void 0?void 0:P.data;return Array.isArray(b)&&Array.isArray(o)?b.every(function(K){return o.includes(K)}):typeof o=="boolean"?o:!1},[]);return{checkRoles:S}},E;(function(C){C.email="EscolaLms\\TemplatesEmail\\Core\\EmailChannel",C.pdf="EscolaLms\\TemplatesPdf\\Core\\PdfChannel",C.sms="EscolaLms\\TemplatesSms\\Core\\SmsChannel"})(E||(E={}));var _=function(){var O=Object(j.l)(),M=O.template,f=Object(a.k)(),b=q(),S=b.checkRoles,G=S("hideTemplateTab-sms"),v=S("hideTemplateTab-email");return Object(e.jsx)(p.a,{children:Object(e.jsxs)(y.a,{tabs:{type:"card",activeKey:M,onChange:function(o){return a.f.push("/configuration/templates/".concat(o))}},children:[!v&&Object(e.jsx)(y.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"email"}),children:Object(e.jsx)(N,{templateType:"email",channel:E.email})},"email"),f.certificatesPermission&&Object(e.jsx)(y.a.TabPane,{tab:Object(e.jsx)(a.a,{id:"PDF"}),children:Object(e.jsx)(N,{templateType:"pdf",channel:E.pdf})},"pdf"),!G&&Object(e.jsx)(y.a.TabPane,{tab:Object(e.jsx)("span",{children:Object(e.jsx)(a.a,{id:"SMS"})}),children:Object(e.jsx)(N,{templateType:"sms",channel:E.sms})},"sms")]})})},te=d.default=_},rWUb:function(k,d,t){"use strict";t.d(d,"e",function(){return y}),t.d(d,"d",function(){return V}),t.d(d,"a",function(){return J}),t.d(d,"h",function(){return D}),t.d(d,"b",function(){return w}),t.d(d,"i",function(){return Y}),t.d(d,"c",function(){return Q}),t.d(d,"f",function(){return Z}),t.d(d,"g",function(){return H});var s=t("qLMh"),j=t("k1fw"),a=t("9og8"),p=t("9kvl");function y(n,r){return U.apply(this,arguments)}function U(){return U=Object(a.a)(Object(s.a)().mark(function n(r,i){return Object(s.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(p.i)("/api/admin/templates",Object(j.a)({method:"GET",useCache:!1,params:r},i||{})));case 1:case"end":return e.stop()}},n)})),U.apply(this,arguments)}function V(n,r){return W.apply(this,arguments)}function W(){return W=Object(a.a)(Object(s.a)().mark(function n(r,i){return Object(s.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(p.i)("/api/admin/templates/".concat(r),Object(j.a)({method:"GET"},i||{})));case 1:case"end":return e.stop()}},n)})),W.apply(this,arguments)}function J(n,r){return F.apply(this,arguments)}function F(){return F=Object(a.a)(Object(s.a)().mark(function n(r,i){return Object(s.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(p.i)("/api/admin/templates",Object(j.a)({method:"POST",headers:{"Content-Type":"application/json"},data:r},i||{})));case 1:case"end":return e.stop()}},n)})),F.apply(this,arguments)}function D(n,r,i){return T.apply(this,arguments)}function T(){return T=Object(a.a)(Object(s.a)().mark(function n(r,i,l){return Object(s.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(p.i)("/api/admin/templates/".concat(r),Object(j.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:i},l||{})));case 1:case"end":return c.stop()}},n)})),T.apply(this,arguments)}function w(n,r){return g.apply(this,arguments)}function g(){return g=Object(a.a)(Object(s.a)().mark(function n(r,i){return Object(s.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(p.i)("/api/admin/templates/".concat(r),Object(j.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},i||{})));case 1:case"end":return e.stop()}},n)})),g.apply(this,arguments)}function Y(n){return z.apply(this,arguments)}function z(){return z=Object(a.a)(Object(s.a)().mark(function n(r){return Object(s.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",Object(p.i)("/api/admin/templates/variables",Object(j.a)({method:"GET"},r||{})));case 1:case"end":return l.stop()}},n)})),z.apply(this,arguments)}function Q(n,r){return L.apply(this,arguments)}function L(){return L=Object(a.a)(Object(s.a)().mark(function n(r,i){return Object(s.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(p.i)("/api/admin/templates/".concat(r,"/preview"),Object(j.a)({method:"GET"},i||{})));case 1:case"end":return e.stop()}},n)})),L.apply(this,arguments)}function Z(n,r,i){return $.apply(this,arguments)}function $(){return $=Object(a.a)(Object(s.a)().mark(function n(r,i,l){return Object(s.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(p.i)("/api/admin/events/trigger-manually/".concat(r),Object(j.a)({method:"POST",headers:{"Content-Type":"application/json"},data:{users:i}},l||{})));case 1:case"end":return c.stop()}},n)})),$.apply(this,arguments)}function H(n,r,i){return x.apply(this,arguments)}function x(){return x=Object(a.a)(Object(s.a)().mark(function n(r,i,l){return Object(s.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(p.i)("/api/admin/products/".concat(i,"/trigger-event-manually/").concat(r),Object(j.a)({method:"POST",headers:{"Content-Type":"application/json"}},l||{})));case 1:case"end":return c.stop()}},n)})),x.apply(this,arguments)}}}]);
