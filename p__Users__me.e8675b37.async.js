(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"5ddx":function(F,O,e){"use strict";var A=e("9og8"),C=e("+L6B"),T=e("2/Rp"),_=e("tJVT"),j=e("WmNS"),h=e.n(j),l=e("q1tI"),f=e.n(l),o=e("9kvl"),p=e("Qiat"),v=e("VK58"),n=e("xvlK"),M=e("Xcxh"),m=e("y8nQ"),s=e("Vl3Y"),i=e("rmhi"),d=e("VMEa"),c=e("Qurx"),a=e("nKUr"),I=function(P){var E=Object(o.i)(),y=P.visible,b=P.onVisibleChange,w=P.onFinish,V=s.a.useForm(),D=Object(_.a)(V,1),B=D[0];return Object(l.useEffect)(function(){return function(){B.resetFields()}},[]),Object(a.jsx)(i.a,{form:B,title:E.formatMessage({id:"newSetting",defaultMessage:"newSetting"}),width:"30vw",visible:y,onVisibleChange:b,onFinish:w,children:Object(a.jsxs)(d.b.Group,{children:[Object(a.jsx)(c.a,{label:Object(a.jsx)(o.a,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key"}),Object(a.jsx)(c.a,{label:Object(a.jsx)(o.a,{id:"value",defaultMessage:"value"}),rules:[{required:!0}],width:"md",name:"value"})]})})},r=I,S=function(P){var E=P.user,y=P.isProfile,b=y===void 0?!1:y,w=Object(l.useRef)(),V=Object(o.i)(),D=Object(l.useState)(!1),B=Object(_.a)(D,2),z=B[0],G=B[1],K=Object(l.useState)("PATCH"),g=Object(_.a)(K,2),U=g[0],x=g[1],L=[{title:Object(a.jsx)(o.a,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0},{title:Object(a.jsx)(o.a,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInSearch:!0}],W=Object(l.useCallback)(function(u){var R=u&&Object.entries(u).map(function(J){return{key:J[0],value:J[1]}});return R},[E]);return Object(a.jsxs)(f.a.Fragment,{children:[Object(a.jsx)(p.a,{headerTitle:V.formatMessage({id:"menu.settings"}),actionRef:w,rowKey:"id",search:!1,toolBarRender:b?function(){return[Object(a.jsxs)(T.a,{type:"primary",onClick:function(){G(-1),x("PATCH")},children:[Object(a.jsx)(n.a,{})," ",Object(a.jsx)(o.a,{id:"pages.searchTable.new"})]},"primary"),Object(a.jsxs)(T.a,{color:"yellow",type:"primary",onClick:function(){G(-1),x("PUT")},children:[Object(a.jsx)(M.a,{})," ",Object(a.jsx)(o.a,{id:"user.settings.overwrite"})]},"primary")]}:!1,request:function(){return Object(v.c)(Number(E)).then(function(R){return R.success?{data:W(R.data)}:[]})},columns:L}),Object(a.jsx)(r,{id:z,visible:Number.isInteger(z),onVisibleChange:function(R){return R===!1&&G(!1)},onFinish:function(){var u=Object(A.a)(h.a.mark(function R(J){var Q;return h.a.wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,Object(v.f)(Number(E),U,J);case 2:Q=$.sent,Q.success&&(G(!1),w.current&&w.current.reload());case 4:case"end":return $.stop()}},R)}));return function(R){return u.apply(this,arguments)}}()})]})},t=O.a=S},BAh9:function(F,O,e){"use strict";e.d(O,"a",function(){return h}),e.d(O,"b",function(){return f}),e.d(O,"e",function(){return p}),e.d(O,"d",function(){return n}),e.d(O,"c",function(){return M});var A=e("k1fw"),C=e("9og8"),T=e("WmNS"),_=e.n(T),j=e("9kvl");function h(s,i){return l.apply(this,arguments)}function l(){return l=Object(C.a)(_.a.mark(function s(i,d){return _.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(j.f)("/api/admin/file/list",Object(A.a)({method:"GET",params:i},d||{})));case 1:case"end":return a.stop()}},s)})),l.apply(this,arguments)}function f(s,i){return o.apply(this,arguments)}function o(){return o=Object(C.a)(_.a.mark(function s(i,d){return _.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(j.f)("/api/admin/file/find",Object(A.a)({method:"GET",params:i},d||{})));case 1:case"end":return a.stop()}},s)})),o.apply(this,arguments)}function p(s,i,d){return v.apply(this,arguments)}function v(){return v=Object(C.a)(_.a.mark(function s(i,d,c){var a;return _.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=new FormData,a.append("file[]",i),a.append("target",d),r.abrupt("return",Object(j.f)("/api/admin/file/upload",Object(A.a)({method:"POST",data:a},c||{})));case 4:case"end":return r.stop()}},s)})),v.apply(this,arguments)}var n=function(i){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(i,"&w=").concat(d)};function M(s,i){return m.apply(this,arguments)}function m(){return m=Object(C.a)(_.a.mark(function s(i,d){return _.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Object(j.f)("/api/admin/file/delete",Object(A.a)({method:"DELETE",data:{url:i}},d||{})));case 1:case"end":return a.stop()}},s)})),m.apply(this,arguments)}},"DBJ/":function(F,O,e){"use strict";var A=e("y8nQ"),C=e("Vl3Y"),T=e("etVw"),_=e("q1tI"),j=e.n(_),h=e("9kvl"),l=e("qFDU"),f=e("nKUr"),o=e.n(f),p=function(n){var M=n.onChange,m=n.url,s=n.name,i=n.extra,d=n.accept,c=n.data,a=n.wrapInForm,I=a===void 0?!0:a,r=Object(h.i)();return c&&c[s]&&delete c[s],Object(f.jsx)(l.a,{condition:I,wrap:function(t){return Object(f.jsx)(C.a,{children:t})},children:Object(f.jsx)(T.a,{title:Object(f.jsx)(h.a,{id:"upload_click_here"}),placeholder:r.formatMessage({id:"upload_click_here"}),onChange:M,label:Object(f.jsx)(h.a,{id:"upload"}),max:2,fieldProps:{data:c,accept:d,name:s,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}},action:"".concat("https://api-stage.escolalms.com").concat(m),extra:i})})};O.a=p},Jfn2:function(F,O,e){"use strict";var A=e("k1fw"),C=e("XCrF"),T=e("1GRj"),_=e("PpiC"),j=e("q1tI"),h=e.n(j),l=e("nKUr"),f=e.n(l),o=function(v){var n=v.path,M=v.size,m=v.srcSizes,s=v.alt,i=s===void 0?"LMS Image":s,d=Object(_.a)(v,["path","size","srcSizes","alt"]),c="".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(n,"&w=").concat(m?m[0]:M),a=m&&m.map(function(I){return"".concat("https://api-stage.escolalms.com","/api/images/img?path=").concat(n,"&w=").concat(I," ").concat(I,"w")});return Object(l.jsx)("div",{className:"escolalms-image",children:Object(l.jsx)(T.a,Object(A.a)({src:c,srcSet:a&&a.join(","),alt:i},d))})};O.a=o},fWLy:function(F,O,e){"use strict";e.r(O);var A=e("T2oS"),C=e("W9HT"),T=e("miYZ"),_=e("tsqr"),j=e("k1fw"),h=e("9og8"),l=e("tJVT"),f=e("WmNS"),o=e.n(f),p=e("q1tI"),v=e.n(p),n=e("VMEa"),M=e("Qurx"),m=e("nhC9"),s=e("VK58"),i=e("hd5d"),d=e("tMyG"),c=e("DBJ/"),a=e("Jfn2"),I=e("Ty5D"),r=e("9kvl"),S=e("5ddx"),t=e("nKUr"),N=e.n(t);O.default=function(){var P=Object(I.g)(),E=Object(r.i)(),y=P.tab,b=y===void 0?"general":y,w=Object(p.useState)(),V=Object(l.a)(w,2),D=V[0],B=V[1];Object(p.useEffect)(function(){var K=function(){var g=Object(h.a)(o.a.mark(function U(){var x;return o.a.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,Object(s.d)();case 2:x=W.sent,x.success&&B(Object(j.a)(Object(j.a)({},x.data),{},{bio:x.data.bio||""}));case 4:case"end":return W.stop()}},U)}));return function(){return g.apply(this,arguments)}}();K()},[]);var z=Object(p.useMemo)(function(){return{onFinish:function(){var K=Object(h.a)(o.a.mark(function U(x){var L;return o.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Object(s.g)(x);case 2:L=u.sent,_.default.success(L.message);case 4:case"end":return u.stop()}},U)}));function g(U){return K.apply(this,arguments)}return g}(),initialValues:D}},[D]),G=Object(p.useMemo)(function(){return{onFinish:function(){var K=Object(h.a)(o.a.mark(function U(x){var L;return o.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Object(s.h)(x);case 2:L=u.sent,_.default.success(L.message);case 4:case"end":return u.stop()}},U)}));function g(U){return K.apply(this,arguments)}return g}(),initialValues:D}},[D]);return D?(console.log({data:D}),Object(t.jsx)(d.a,{title:Object(t.jsx)(r.a,{id:"my_profile"}),header:{breadcrumb:{routes:[{path:"users",breadcrumbName:E.formatMessage({id:"menu.Users"})},{path:"me",breadcrumbName:E.formatMessage({id:"my_profile"})},{path:String(b),breadcrumbName:E.formatMessage({id:String(b)})}]}},children:Object(t.jsxs)(m.a,{tabs:{type:"card",activeKey:b,onChange:function(g){return r.d.push("/users/me/".concat(g))}},children:[Object(t.jsx)(m.a.TabPane,{tab:Object(t.jsx)(r.a,{id:"general"}),children:Object(t.jsxs)(n.b,Object(j.a)(Object(j.a)({},z),{},{children:[Object(t.jsxs)(n.b.Group,{children:[Object(t.jsx)(M.a,{width:"md",name:"first_name",label:Object(t.jsx)(r.a,{id:"first_name"}),tooltip:Object(t.jsx)(r.a,{id:"first_name"}),placeholder:E.formatMessage({id:"first_name"}),required:!0}),Object(t.jsx)(M.a,{width:"md",name:"last_name",label:Object(t.jsx)(r.a,{id:"last_name"}),tooltip:Object(t.jsx)(r.a,{id:"last_name"}),placeholder:E.formatMessage({id:"last_name"}),required:!0})]}),Object(t.jsx)(n.b.Item,{name:"bio",label:Object(t.jsx)(r.a,{id:"bio"}),tooltip:Object(t.jsx)(r.a,{id:"bio_tooltip"}),valuePropName:"value",children:Object(t.jsx)(i.a,{directory:"users/wysiwyg"})}),Object(t.jsx)(n.b.Group,{children:Object(t.jsxs)(n.b.Item,{name:"avatar",label:Object(t.jsx)(r.a,{id:"avatar"}),children:[D.path_avatar&&Object(t.jsx)(a.a,{path:D.path_avatar,size:600,width:200}),Object(t.jsx)(c.a,{url:"/api/profile/upload-avatar",name:"avatar",accept:"image/*",onChange:function(g){g.file.status==="done"&&g.file.response.success&&B(g.file.response.data)}})]})})]}))},"general"),Object(t.jsx)(m.a.TabPane,{tab:Object(t.jsx)(r.a,{id:"change_password"}),children:Object(t.jsxs)(n.b,Object(j.a)(Object(j.a)({},G),{},{children:[Object(t.jsx)(n.b.Group,{children:Object(t.jsx)(M.a.Password,{width:"md",name:"current_password",label:Object(t.jsx)(r.a,{id:"current_password"}),placeholder:E.formatMessage({id:"current_password"}),required:!0})}),Object(t.jsxs)(n.b.Group,{children:[Object(t.jsx)(M.a.Password,{width:"md",name:"new_password",label:Object(t.jsx)(r.a,{id:"new_password"}),placeholder:E.formatMessage({id:"new_password"}),required:!0}),Object(t.jsx)(M.a.Password,{width:"md",name:"new_confirm_password",label:Object(t.jsx)(r.a,{id:"new_confirm_password"}),placeholder:E.formatMessage({id:"new_confirm_password"}),required:!0})]})]}))},"change_password"),Object(t.jsx)(m.a.TabPane,{tab:Object(t.jsx)(r.a,{id:"user.settings"}),children:Object(t.jsx)(S.a,{user:String(D.id),isProfile:!0})},"user_settings")]})})):Object(t.jsx)(C.a,{})}},hd5d:function(F,O,e){"use strict";var A=e("9og8"),C=e("WmNS"),T=e.n(C),_=e("q1tI"),j=e.n(_),h=e("3Ef1"),l=e.n(h),f=e("BAh9"),o=e("vtG9"),p=e.n(o),v=e("9kvl"),n=e("nKUr"),M=e.n(n),m=function(i){var d=i.value,c=i.onChange,a=i.directory,I=a===void 0?"/wysiwyg":a,r=Object(v.i)();return Object(n.jsx)("div",{className:"form-wysiwyg-markdown",children:Object(n.jsx)(l.a,{uploadImage:function(){var S=Object(A.a)(T.a.mark(function t(N){var P,E;return T.a.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,Object(f.e)(N,I);case 2:if(P=b.sent,!P.success){b.next=6;break}return E=P.data[0].name.includes("/")?P.data[0].name:"".concat(I).concat(P.data[0].name),b.abrupt("return",Object(f.d)(E,1e3));case 6:throw new Error("Error while uploading");case 7:case"end":return b.stop()}},t)}));return function(t){return S.apply(this,arguments)}}(),defaultValue:d||"",onChange:function(t){return c&&c(t())},placeholder:r.formatMessage({id:"wysiwyg_placeholder"})})})};O.a=m},vtG9:function(F,O,e){}}]);
