(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[4981,2803,2238,7883],{48959:function(Qe,xe,t){"use strict";var Me=t(28248),_=t(80854),me=t(85893),T=function(v){var L=v.open,u=v.onOk,N=v.onCancel,A=v.title,V=v.content,x=v.okText,ae=v.loading;return(0,me.jsx)(Me.Z,{width:"600px",title:A!=null?A:(0,me.jsx)(_.FormattedMessage,{id:"confirmModal.title"}),open:L,onOk:u,onCancel:N,okText:x!=null?x:(0,me.jsx)(_.FormattedMessage,{id:"save"}),cancelText:(0,me.jsx)(_.FormattedMessage,{id:"cancel"}),confirmLoading:ae,children:V!=null?V:(0,me.jsx)("p",{children:(0,me.jsx)(_.FormattedMessage,{id:"confirmModal.content"})})})};xe.Z=T},11312:function(Qe,xe,t){"use strict";t.d(xe,{nu:function(){return E},rL:function(){return se},Du:function(){return ce}});var Me=t(9783),_=t.n(Me),me=t(97857),T=t.n(me),ue=t(19632),v=t.n(ue),L=t(5574),u=t.n(L),N=t(45919),A=t(66419),V=t(78677),x=t(26271),ae=t(78957),D=t(66309),Q=t(72051),G=t(71230),B=t(72269),w=t(83863),o=t(60943),n=t(67294),U=t(70804),e=t(80854),H=t(62235),$=t(15009),q=t.n($),h=t(99289),te=t.n(h),_e=t(58638),pe=t(14726),R=t(76841),p=t(85893),m=function(F){var j=F.course_id,b=F.stat,J=b===void 0?"EscolaLms\\Reports\\Stats\\Course\\FinishedTopics":b,le=(0,n.useState)(!1),ne=u()(le,2),Z=ne[0],W=ne[1],oe=(0,n.useCallback)(function(re){return te()(q()().mark(function Ee(){var Pe,Te;return q()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return W(!0),K.prev=1,K.next=4,(0,R._g)(re,{stat:J});case 4:Pe=K.sent,Pe instanceof Blob&&(Te=document.createElement("a"),Te.href=window.URL.createObjectURL(Pe),Te.download="finished_topics_".concat(j,".xlsx"),document.body.appendChild(Te),Te.click(),document.body.removeChild(Te)),K.next=11;break;case 8:K.prev=8,K.t0=K.catch(1),console.error(K.t0);case 11:return K.prev=11,W(!1),K.finish(11);case 14:case"end":return K.stop()}},Ee,null,[[1,8,11,14]])}))},[J]);return(0,p.jsxs)(pe.ZP,{type:"primary",loading:Z,onClick:oe(j),children:[(0,p.jsx)(_e.Z,{})," ",(0,p.jsx)(e.FormattedMessage,{id:"export"})]})},k=function(F){return F.topicable.content.contents?Object.values(F.topicable.content.contents)[0].library:"H5P"},ce=function(F){var j=F.course_id,b=F.topics,J=F.stats,le=(0,n.useState)(!1),ne=u()(le,2),Z=ne[0],W=ne[1],oe=(0,n.useMemo)(function(){return[{title:(0,p.jsx)(e.FormattedMessage,{id:"user"}),dataIndex:"id",render:function(Pe){return(0,p.jsx)(H.Z,{type:"App\\Models\\User",type_id:Pe})}},{title:(0,p.jsx)(e.FormattedMessage,{id:"email"}),dataIndex:"email"}].concat(v()(b.map(function(Ee){var Pe,Te=(Pe=Ee.topicable_type)===null||Pe===void 0?void 0:Pe.split("\\").pop();return Te==="H5P"&&(Te=k(Ee)),{render:function(K){var we=0;switch(K&&(K.started_at&&K.finished_at?we=1:K.started_at&&(we=2)),we){case 1:return(0,p.jsxs)(ae.Z,{children:[(0,p.jsx)(D.Z,{color:"success",children:"F"}),Z&&(K==null?void 0:K.seconds)&&(0,p.jsx)("small",{children:(0,A.Im)(K.seconds)})]});case 2:return(0,p.jsxs)(ae.Z,{children:[(0,p.jsx)(D.Z,{color:"blue",children:"S"}),Z&&(K==null?void 0:K.seconds)&&(0,p.jsx)("small",{children:(0,A.Im)(K.seconds)})]});case 0:default:return(0,p.jsx)(n.Fragment,{children:(0,p.jsx)(D.Z,{color:"error",children:"N"})})}},title:(0,p.jsxs)("small",{children:[(0,p.jsx)(D.Z,{children:Te})," ",Ee.title]}),dataIndex:Ee.id}})))},[b,Z]),re=(0,n.useMemo)(function(){return J.map(function(Ee){return b.reduce(function(Pe,Te){var Oe=Ee.topics.find(function(K){return K.id===Te.id});return T()(T()({},Pe),{},_()({},Number(Te.id),Oe!=null?Oe:0))},{email:Ee.email,id:Ee.id})})},[J,b]);return(0,p.jsx)(Q.Z,{title:function(){return(0,p.jsxs)(G.Z,{justify:"space-between",align:"middle",children:[(0,p.jsxs)(ae.Z,{children:[(0,p.jsx)(e.FormattedMessage,{id:"Finished",defaultMessage:"Finished:"})," ",(0,p.jsx)(D.Z,{color:"success",children:"F"}),(0,p.jsx)(e.FormattedMessage,{id:"Started",defaultMessage:"Started:"})," ",(0,p.jsx)(D.Z,{color:"blue",children:"S"}),(0,p.jsx)(e.FormattedMessage,{id:"NotStarted",defaultMessage:"Not Started:"})," ",(0,p.jsx)(D.Z,{color:"error",children:"N"}),(0,p.jsx)(e.FormattedMessage,{id:"ShowMinutes",defaultMessage:"Show minutes spent on topic:"})," ",(0,p.jsx)(B.Z,{checked:Z,onChange:function(Te){return W(Te)}})]}),(0,p.jsx)(m,{course_id:j})]})},columns:oe,dataSource:re,size:"small",scroll:{x:1500},components:{table:function(Pe){return(0,p.jsx)(U.Z,{horizontal:!0,style:{maxWidth:"auto"},hideScrollbars:!1,children:(0,p.jsx)("table",T()({},Pe))})}}})},se=function(F){var j=F.stats,b=F.attempts,J=(0,n.useMemo)(function(){return[{title:(0,p.jsx)(e.FormattedMessage,{id:"user"}),dataIndex:"id",render:function(Z){return(0,p.jsx)(H.Z,{type:"App\\Models\\User",type_id:Z})}},{title:(0,p.jsx)(e.FormattedMessage,{id:"email"}),dataIndex:"email"},{title:(0,p.jsx)(e.FormattedMessage,{id:"attempt",defaultMessage:"Attempt"}),dataIndex:"attempt"},{title:(0,p.jsx)(e.FormattedMessage,{id:"finished_at",defaultMessage:"Finished at"}),dataIndex:"finished_at",render:function(Z){return Z?(0,o.WU)(new Date(Z),N.Cu):""}}]},[]),le=(0,n.useMemo)(function(){return j.map(function(ne){var Z=ne.id,W=ne.email,oe=ne.finished_at,re=b==null?void 0:b.find(function(Pe){return Pe.id===Z}),Ee=Array.isArray(re==null?void 0:re.attempts)?re==null?void 0:re.attempts.length:0;return{id:Z,email:W,finished_at:oe,attempt:Ee}})},[j]);return(0,p.jsx)(Q.Z,{title:function(){return(0,p.jsx)(ae.Z,{children:(0,p.jsx)(e.FormattedMessage,{id:"course.finished",defaultMessage:"Finished"})})},columns:J,dataSource:le,size:"small",scroll:{x:500}})},E=function(F){var j=F.stats,b=(0,n.useState)(null),J=u()(b,2),le=J[0],ne=J[1],Z=(0,n.useState)(null),W=u()(Z,2),oe=W[0],re=W[1],Ee=(0,e.useIntl)(),Pe=(0,n.useMemo)(function(){return j.flatMap(function(Oe){return Object.values(Oe.attempts).flatMap(function(K){var we=K.dates,Xe=K.attempt,Ue=Object.values(we).flatMap(function(Je){var ke=Je.date,Ve=Je.seconds_total;return{date:ke,attempt:Xe,seconds_total:Ve,email:Oe.email}});return Ue})})},[j]),Te={xField:"date",yField:"seconds_total",seriesField:"attempt",isStack:!0,xAxis:{label:{autoHide:!0,autoRotate:!1}},slider:{start:0,end:1},label:{position:"middle",layout:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"}]}};return(0,p.jsx)(x.ZP,{title:(0,p.jsxs)(ae.Z,{children:[(0,p.jsx)(e.FormattedMessage,{id:"course.interactions_time_in_days"}),(0,p.jsx)(w.default,{showSearch:!0,value:le,onChange:function(K){ne(K),re(null)},placeholder:(0,p.jsx)(e.FormattedMessage,{id:"select_person",defaultMessage:"Select a person"}),children:j.map(function(Oe){var K=Oe.id,we=Oe.email;return(0,p.jsx)(w.default.Option,{value:we,children:we},K)})}),(0,p.jsx)(w.default,{value:oe,onChange:function(K){return re(K)},disabled:le===null,placeholder:(0,p.jsx)(e.FormattedMessage,{id:"select_attempt",defaultMessage:"Select attempt"}),children:v()(new Set(Pe.filter(function(Oe){var K=Oe.email;return K===le}).map(function(Oe){var K=Oe.attempt;return K}))).map(function(Oe){return(0,p.jsxs)(w.default.Option,{value:Oe,children:[(0,p.jsx)(e.FormattedMessage,{id:"attempt",defaultMessage:"Attempt"})," ",Oe]},Oe)})})]}),colSpan:12,layout:"center",children:(0,p.jsx)("div",{style:{overflow:"auto",minHeight:"400px",width:"100%"},children:(0,p.jsx)(V.Z,T()(T()({},Te),{},{tooltip:{title:"".concat(Ee.formatMessage({id:"attempt"})),formatter:function(K){var we=Math.floor(+K.seconds_total/60),Xe=+K.seconds_total>60?+K.seconds_total-we*60:0;return{name:K.attempt,value:"".concat(we,"m ").concat(Xe,"s")}}},data:Pe.filter(function(Oe){var K=Oe.email;return K===le}).filter(function(Oe){var K=Oe.attempt;return Number.isInteger(oe)?K===oe:!0})}))})})}},28225:function(Qe,xe,t){"use strict";var Me=t(28248),_=t(80854),me=t(85893),T=function(v){var L=v.visible,u=v.setManage;return(0,me.jsx)(Me.Z,{width:"600px",title:(0,me.jsx)(_.FormattedMessage,{id:"course.validate_edit.header",defaultMessage:"course.validate_edit.header"}),visible:L,onOk:function(){return u({showModal:!1,disableEdit:!1,clicked:!0})},onCancel:function(){return u({showModal:!1,disableEdit:!0,clicked:!1})},okText:"OK",cancelText:"Cancel",children:(0,me.jsx)("p",{children:(0,me.jsx)(_.FormattedMessage,{id:"course.validate_edit.content",defaultMessage:"course.validate_edit.content"})})})};xe.Z=T},20568:function(Qe,xe,t){"use strict";t.d(xe,{Z:function(){return H}});var Me=t(19632),_=t.n(Me),me=t(97857),T=t.n(me),ue=t(5574),v=t.n(ue),L=t(67294),u=t(17578),N=t(78957),A=t(25093),V=t(96365),x=t(14726),ae=t(2487),D=t(72252),Q=t(82061),G=t(55725),B=t(69753),w=t(80854),o=t(29477),n=t(85893),U=function(q){var h=q.directory,te=q.onUploaded;return(0,n.jsxs)(N.Z,{align:"start",children:[(0,n.jsxs)(A.Z.Text,{children:[(0,n.jsx)(w.FormattedMessage,{id:"pages.files.filesBrowser"}),(0,n.jsx)(A.Z.Text,{code:!0,children:h})]}),(0,n.jsx)(o.Z,{url:"/api/admin/file/upload",name:"file[]",data:{target:h},onUpload:function(pe){pe.success&&te(h,pe.data)}})]})},e=function(q){var h=q.defaultDirectory,te=h===void 0?"/":h,_e=q.onFile,pe=q.hideDeleteBtn,R=pe===void 0?!1:pe,p=q.forceLoading,m=p===void 0?!1:p,k=(0,w.useIntl)(),ce=(0,L.useState)({loading:!1,name:"",directory:te,current_page:1,data:void 0,per_page:1,last_page:1,total:0}),se=v()(ce,2),E=se[0],P=se[1],F=(0,L.useRef)(),j=(0,L.useCallback)(function(Z){P(function(W){return T()(T()({},W),{},{loading:Z})})},[]),b=(0,L.useCallback)(function(Z,W){Z.success&&P(function(oe){return T()(T()(T()({},oe),Z.data),{},{data:[{url:W.split("/").slice(0,-1).join("/"),name:"..",created_at:"",mime:"directory"}].concat(_()(Z.data.data.map(function(re){return T()(T()({},re),{},{url:re.mime==="directory"?"".concat(W,"/").concat(re.name):re.url})}))).filter(function(re){return W==="/"||W===te?re.name!=="..":!0}),directory:W,loading:!1})})},[j]),J=(0,L.useCallback)(function(Z){var W,oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,re=function(){return F.current&&F.current.abort()};return re(),F.current=new AbortController,j(!0),(0,u.QZ)({directory:Z,page:oe},{signal:(W=F.current)===null||W===void 0?void 0:W.signal}).then(function(Ee){Ee.success&&b(Ee,Z)}).catch(function(){return j(!1)}),function(){re()}},[j]);(0,L.useEffect)(function(){return J(te)},[te,J]);var le=(0,L.useCallback)(function(Z){j(!0),(0,u.Od)(Z).then(function(){J(E.directory)}).catch(function(){j(!1)})},[J,j,E.directory]),ne=(0,L.useCallback)(function(Z,W){var oe,re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,Ee=function(){return F.current&&F.current.abort()};return Ee(),F.current=new AbortController,j(!0),(0,u.ht)({directory:Z,name:W,page:re},{signal:(oe=F.current)===null||oe===void 0?void 0:oe.signal}).then(function(Pe){Pe.success&&b(Pe,Z)}).catch(function(){return j(!1)}),function(){Ee()}},[j]);return(0,n.jsxs)("div",{className:"file-browser",children:[(0,n.jsxs)("div",{className:"file-browser__header",children:[(0,n.jsx)(V.Z,{placeholder:k.formatMessage({id:"search_file"}),className:"file-browser__input",onChange:function(W){return P(function(oe){return T()(T()({},oe),{},{name:W.target.value})})},value:E.name}),(0,n.jsxs)("div",{children:[(0,n.jsx)(x.ZP,{className:"file-browser__button",onClick:function(){return J(E.directory)},children:(0,n.jsx)(w.FormattedMessage,{id:"reset"})}),(0,n.jsx)(x.ZP,{className:"file-browser__button",type:"primary",onClick:function(){return ne(E.directory,E.name)},children:(0,n.jsx)(w.FormattedMessage,{id:"query"})})]})]}),(0,n.jsx)(ae.Z,{loading:E.loading||m,size:"small",itemLayout:"horizontal",dataSource:E.data,header:(0,n.jsx)(U,{directory:E.directory,onUploaded:function(W,oe){oe&&(J(W),_e&&_e(oe,W))}}),footer:(0,n.jsx)(U,{directory:E.directory,onUploaded:function(W,oe){J(W),oe&&_e&&_e(oe,W)}}),renderItem:function(W){return(0,n.jsx)(ae.Z.Item,{actions:W.mime!=="directory"&&!R?[(0,n.jsx)(x.ZP,{type:"default",danger:!0,icon:(0,n.jsx)(Q.Z,{}),size:"small",onClick:function(){return le(W.url)}},"dir")]:[],children:(0,n.jsx)(ae.Z.Item.Meta,{avatar:W.mime==="directory"?(0,n.jsx)(x.ZP,{type:"primary",icon:(0,n.jsx)(G.Z,{}),size:"small",onClick:function(){return J(W.url)}}):(0,n.jsx)("a",{href:W.url,target:"_blank",rel:"noreferrer",children:(0,n.jsx)(x.ZP,{type:"default",icon:(0,n.jsx)(B.Z,{}),size:"small"})}),description:(0,n.jsx)(L.Fragment,{children:(0,n.jsx)(x.ZP,{type:"text",size:"small",onClick:function(){return W.mime==="directory"?J(W.url):_e&&_e(W,E.directory)},children:W.name})})})})}}),(0,n.jsx)(D.Z,{pageSizeOptions:[],current:E.current_page,total:E.total,pageSize:E.per_page,onChange:function(W){return J(E.directory,W)}})]})},H=e},89825:function(Qe,xe,t){"use strict";t.d(xe,{Z:function(){return e}});var Me=t(26271),_=t(80854),me=t(5574),T=t.n(me),ue=t(50227),v=t(2453),L=t(15746),u=t(71230),N=t(38925),A=t(75081),V=t(67294);function x(H){var $=(0,V.useRef)(H);(0,V.useEffect)(function(){var q=function(){var te=localStorage.getItem("TOKEN");$.current(te)};return window.addEventListener("token_change",q),function(){window.removeEventListener("token_change",q)}},[])}var ae=t(97704),D=t(85893),Q="h5p-editor",G=function(H){return H.TokenChanged="TOKEN_CHANGED",H}(G||{}),B=function($){var q,h=document.getElementById(Q);if(!h){console.error("There is no iframe with id '".concat(Q,"'"));return}(q=h.contentWindow)===null||q===void 0||q.postMessage({type:G.TokenChanged,token:$},"*")},w=function($){var q=$.id,h=$.onSubmitted,te=$.onLoaded,_e=(0,V.useState)(),pe=T()(_e,2),R=pe[0],p=pe[1],m=(0,V.useState)(!1),k=T()(m,2),ce=k[0],se=k[1],E=(0,V.useState)(),P=T()(E,2),F=P[0],j=P[1],b=(0,_.useIntl)(),J=b.locale.split("-")[0];x(B),(0,V.useEffect)(function(){q&&(se(!0),(0,ae.RN)(q==="new"?void 0:q,J).then(function(ne){ne.success?(te&&te(ne.data),p(ne.data)):j(ne.message)}).catch(function(ne){return ne&&j(ne.toString())}).finally(function(){return se(!1)}))},[q]);var le=(0,V.useCallback)(function(ne){se(!0),(0,ae.x0)(ne,q==="new"?void 0:q).then(function(Z){Z.success?(h(Z.data.id),v.ZP.success((0,D.jsx)(_.FormattedMessage,{id:"h5p_edited",defaultMessage:"H5P Element edited and saved successfully"}))):j(Z.message)}).catch(function(Z){return Z&&j(Z.toString())}).finally(function(){return se(!1)})},[]);return R?(0,D.jsxs)(V.Fragment,{children:[F&&(0,D.jsx)(N.Z,{message:F,type:"error"}),R&&(0,D.jsx)(ue.ContextlessEditor,{onError:function(Z){return console.error(Z)},state:R,allowSameOrigin:!0,onSubmit:le,loading:ce,lang:J,iframeId:Q})]}):(0,D.jsx)(L.Z,{children:(0,D.jsxs)(u.Z,{justify:"center",align:"middle",children:[F&&(0,D.jsx)(N.Z,{message:F,type:"error"}),(0,D.jsx)(A.Z,{})]})})},o=w,n=t(66340),U=function($){var q=$.defaultCard,h=q===void 0?"edit":q,te=$.id,_e=$.onSubmit,pe=$.onLoaded;return(0,D.jsxs)(Me.ZP,{tabs:{type:"card",defaultActiveKey:h},children:[(0,D.jsx)(Me.ZP.TabPane,{disabled:!te,tab:(0,D.jsx)(_.FormattedMessage,{id:"edit"}),children:(0,D.jsx)(o,{id:te,onSubmitted:_e,onLoaded:pe},te)},"edit"),te!=="new"&&(0,D.jsx)(Me.ZP.TabPane,{disabled:!te,tab:(0,D.jsx)(_.FormattedMessage,{id:"preview"}),children:(0,D.jsx)(n.Z,{id:te,onLoaded:pe})},"preview")]})},e=U},66340:function(Qe,xe,t){"use strict";var Me=t(19632),_=t.n(Me),me=t(5574),T=t.n(me),ue=t(97704),v=t(50227),L=t.n(v),u=t(25093),N=t(15746),A=t(71230),V=t(38925),x=t(75081),ae=t(96074),D=t(67294),Q=t(55171),G=t.n(Q),B=t(80854),w=t(85893),o=u.Z.Title,n=function(e){var H=e.id,$=e.onXAPI,q=e.onLoaded,h=(0,D.useState)(),te=T()(h,2),_e=te[0],pe=te[1],R=(0,D.useState)(!1),p=T()(R,2),m=p[0],k=p[1],ce=(0,D.useState)([]),se=T()(ce,2),E=se[0],P=se[1],F=(0,D.useState)(),j=T()(F,2),b=j[0],J=j[1],le=(0,B.useIntl)(),ne=le.locale.split("-")[0];return(0,D.useEffect)(function(){H&&(k(!0),(0,ue.LK)(H,ne).then(function(Z){Z.success?(q&&q(Z.data),pe(Z.data)):J(Z.message)}).catch(function(Z){return Z&&J(Z.toString())}).finally(function(){return k(!1)}))},[H]),_e?(0,w.jsxs)(D.Fragment,{children:[b&&(0,w.jsx)(V.Z,{message:b,type:"error"}),(0,w.jsx)(v.ContextlessPlayer,{contentId:H,onError:function(W){return console.error(W)},state:_e,allowSameOrigin:!0,loading:m,onXAPI:function(W){$?$(W):P(function(oe){return[].concat(_()(oe),[W])})}}),!$&&(0,w.jsxs)(D.Fragment,{children:[(0,w.jsx)(ae.Z,{}),(0,w.jsxs)("div",{style:{overflow:"auto",maxHeight:"400px"},children:[(0,w.jsx)(o,{level:5,children:"XAPI Events"}),(0,w.jsx)(G(),{src:E})]})]})]}):(0,w.jsx)(N.Z,{children:(0,w.jsxs)(A.Z,{justify:"center",align:"middle",children:[b&&(0,w.jsx)(V.Z,{message:b,type:"error"}),(0,w.jsx)(x.Z,{})]})})};xe.Z=n},9412:function(Qe,xe,t){"use strict";var Me=t(29477),_=t(67294),me=t(85893),T=function(v){var L=v.onSuccess,u=v.onError,N=v.hideLabel;return(0,me.jsx)(Me.Z,{url:"/api/admin/hh5p/content/upload",name:"h5p_file",accept:".h5p",hideLabel:N,onChange:function(V){V.file.status==="done"&&V.file.response&&L(V.file.response),V.file.status==="error"&&u()}})};xe.C=T},95486:function(Qe,xe,t){"use strict";var Me=t(5574),_=t.n(Me),me=t(14726),T=t(28248),ue=t(55742),v=t(94315),L=t(45823),u=t(67294),N=t(80854),A=t(85893),V=function(ae){var D=ae.value,Q=ae.onChange,G=(0,u.useState)(!1),B=_()(G,2),w=B[0],o=B[1],n=(0,u.useCallback)(function(){o(!1)},[]),U=(0,u.useState)("code"),e=_()(U,2),H=e[0],$=e[1];return(0,A.jsxs)("div",{children:[(0,A.jsx)(me.ZP,{type:"primary",onClick:function(){return o(!0)},size:"small",children:(0,A.jsx)(N.FormattedMessage,{id:"json_editor"})}),(0,A.jsxs)(T.Z,{title:"JSON",open:w,onOk:n,onCancel:n,destroyOnClose:!0,children:[(0,A.jsxs)(ue.ZP.Group,{onChange:function(h){return $(h.target.value)},value:H,children:[(0,A.jsx)(ue.ZP,{value:"tree",children:"tree"}),(0,A.jsx)(ue.ZP,{value:"view",children:"view"}),(0,A.jsx)(ue.ZP,{value:"form",children:"form"}),(0,A.jsx)(ue.ZP,{value:"code",children:"code"}),(0,A.jsx)(ue.ZP,{value:"text",children:"text"})]}),(0,A.jsx)(v.A,{mode:H,value:D,onChange:Q},H)]})]})};xe.Z=V},34201:function(Qe,xe,t){"use strict";t.d(xe,{Z:function(){return se}});var Me=t(5574),_=t.n(Me),me=t(38925),T=t(75081),ue=t(96074),v=t(2487),L=t(25093),u=t(14726),N=t(67294),A=t(80854),V=t(19632),x=t.n(V),ae=t(93162),D=t(55733),Q=t.n(D),G=t(85893),B=function(P){var F=P.pdfIds,j=P.onProgress,b=P.onFinished,J=P.filename,le=J===void 0?"package.zip":J,ne=(0,N.useState)([]),Z=_()(ne,2),W=Z[0],oe=Z[1],re=(0,N.useCallback)(function(Ee){var Pe=new(Q());Ee.forEach(function(Te,Oe){return Pe.file("".concat(F[Oe],".pdf"),Te)}),Pe.generateAsync({type:"blob"}).then(function(Te){(0,ae.saveAs)(Te,le),b&&b()})},[W,le]);return(0,N.useEffect)(function(){F.forEach(function(Ee){var Pe=fetch("".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/pdfs/generate/").concat(Ee),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))}});Pe.then(function(Te){return Te.blob()}).then(function(Te){Te&&Te instanceof Blob&&oe(function(Oe){var K=(Oe.length+1)/F.length;return j&&j(K),K>=1&&re([].concat(x()(Oe),[Te])),[].concat(x()(Oe),[Te])})})})},[F]),(0,G.jsxs)("p",{children:["Progress ",W.length," / ",F.length]})},w=B,o=t(15009),n=t.n(o),U=t(97857),e=t.n(U),H=t(99289),$=t.n(H);function q(E,P){return h.apply(this,arguments)}function h(){return h=$()(n()().mark(function E(P,F){return n()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,A.request)("/api/admin/pdfs",e()({params:e()({},P),method:"GET"},F||{})));case 1:case"end":return b.stop()}},E)})),h.apply(this,arguments)}function te(E,P){return _e.apply(this,arguments)}function _e(){return _e=$()(n()().mark(function E(P,F){return n()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,A.request)("/api/pdfs/".concat(P),e()({method:"GET"},F||{})));case 1:case"end":return b.stop()}},E)})),_e.apply(this,arguments)}function pe(E,P){return R.apply(this,arguments)}function R(){return R=_asyncToGenerator(_regeneratorRuntime().mark(function E(P,F){return _regeneratorRuntime().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",request("/api/pdfs/generate/".concat(P),_objectSpread({method:"GET"},F||{})));case 1:case"end":return b.stop()}},E)})),R.apply(this,arguments)}var p=t(62235),m=t(69753),k=t(19326),ce=function(P){var F=P.user_id,j=P.template_id,b=P.title,J=(0,N.useState)({state:"initial"}),le=_()(J,2),ne=le[0],Z=le[1],W=(0,N.useState)({state:"initial"}),oe=_()(W,2),re=oe[0],Ee=oe[1],Pe=(0,N.useState)(!1),Te=_()(Pe,2),Oe=Te[0],K=Te[1];(0,N.useEffect)(function(){Z({state:"loading"});var Xe=new AbortController;return q({user_id:F,template_id:j},{signal:Xe.signal}).then(function(Ue){Ue&&Ue.success?Z({state:"loaded",list:Ue.data}):Ue&&!Ue.success&&Z({state:"error",error:Ue.message})}).catch(function(Ue){return Z({state:"error",error:Ue.toString()})}),function(){Xe.abort()}},[]);var we=(0,N.useCallback)(function(Xe){Ee({state:"loading"}),te(Xe).then(function(Ue){Ue.success?Ee({state:"loaded",data:Ue.data.content}):Ee({state:"initial"})})},[]);return ne.state==="error"?(0,G.jsx)(me.Z,{message:"Error Text",type:"error"}):ne.state==="loading"||ne.state==="initial"?(0,G.jsx)(T.Z,{}):(0,G.jsxs)(N.Fragment,{children:[(0,G.jsx)(ue.Z,{}),Oe&&(0,G.jsx)(w,{pdfIds:ne.list.map(function(Xe){return Xe.id}),onFinished:function(){return K(!1)}}),(0,G.jsx)(v.Z,{size:"small",itemLayout:"horizontal",dataSource:ne.list,header:(0,G.jsxs)("div",{children:[(0,G.jsx)(A.FormattedMessage,{id:"template"})," ",b&&(0,G.jsx)(L.Z.Text,{strong:!0,children:b}),". ",(0,G.jsx)(A.FormattedMessage,{id:"generated_pdfs",defaultMessage:"Generated PDFs"})," ",(0,G.jsx)(u.ZP,{loading:Oe,type:"primary",onClick:function(){return K(!0)},icon:(0,G.jsx)(m.Z,{}),size:"small",children:(0,G.jsx)(A.FormattedMessage,{id:"download_all",defaultMessage:"Download all PDFs"})})]}),renderItem:function(Ue){return(0,G.jsxs)(v.Z.Item,{actions:[(0,G.jsx)(k.Z,{url:"/api/pdfs/generate/".concat(Ue.id),filename:"generated-".concat(Ue.id,".pdf"),size:"small",icon:(0,G.jsx)(m.Z,{}),type:"primary",onClick:function(){return we(Ue.id)},loading:re.state==="loading",children:(0,G.jsx)(A.FormattedMessage,{id:"download_pdf",defaultMessage:"Download PDFs"})},"download")],children:[Ue.title," ",(0,G.jsx)(p.Z,{type:"App\\Models\\User",type_id:Ue.user_id})]})}})]})},se=ce},53957:function(Qe,xe,t){"use strict";var Me=t(5574),_=t.n(Me),me=t(50082),T=t(67294),ue=t(85893),v=function(u){var N=u.productable,A=u.type,V=A===void 0?"card":A,x=(0,T.useState)("attributes"),ae=_()(x,2),D=ae[0],Q=ae[1];return(0,ue.jsx)(me.Z,{productable:N,tab:D,onTabChange:function(B){return Q(B)},type:V})};xe.C=v},81424:function(Qe,xe,t){"use strict";var Me=t(52677),_=t.n(Me),me=t(5574),T=t.n(me),ue=t(83863),v=t(75081),L=t(67294),u=t(44837),N=t(80854),A=t(85893),V=function(ae){var D=ae.value,Q=ae.onChange,G=ae.multiple,B=G===void 0?!1:G,w=ae.type,o=(0,L.useState)([]),n=T()(o,2),U=n[0],e=n[1],H=(0,L.useState)(!1),$=T()(H,2),q=$[0],h=$[1],te=(0,L.useState)([]),_e=T()(te,2),pe=_e[0],R=_e[1],p=(0,L.useRef)(),m=(0,L.useCallback)(function(E){h(!0),p.current&&p.current.abort(),p.current=new AbortController,(0,u.RB)({productable_type:w,name:E||void 0},{signal:p.current.signal}).then(function(P){P.success&&e(w?P.data.filter(function(F){return F.type==="single"&&F.productables&&F.productables[0].id}):P.data),h(!1)}).catch(function(){return h(!1)})},[]);(0,L.useEffect)(function(){var E=new AbortController;if(D){var P=Array.isArray(D)?D:[D],F=P.map(function(j){return _()(j)==="object"?Number(j.id):Number(j)});R(F)}return function(){E.abort()}},[D]);var k=(0,L.useCallback)(function(E){m(E)},[m]),ce=(0,L.useCallback)(function(){R([])},[]),se=(0,L.useCallback)(function(E){E||ce(),Q&&Q(E)},[Q,ce]);return(0,A.jsx)(ue.default,{onFocus:function(){return m()},allowClear:!0,style:{width:"100%",minWidth:"150px"},value:pe,onChange:se,mode:B?"multiple":void 0,showSearch:!0,onSearch:k,onDeselect:ce,placeholder:(0,A.jsx)(N.FormattedMessage,{id:"select_product",defaultMessage:"Select a product"}),optionFilterProp:"children",filterOption:function(P,F){if(F&&F.children){var j;return(F==null||(j=F.children)===null||j===void 0?void 0:j.toString().toLowerCase().indexOf(P&&P.toLowerCase()||""))>=0}return!1},notFoundContent:q?(0,A.jsx)(v.Z,{size:"small"}):null,children:U.map(function(E){return(0,A.jsx)(ue.default.Option,{value:E.id,children:E.name},E.id)})})};xe.Z=V},87366:function(Qe,xe,t){"use strict";t.d(xe,{Il:function(){return pe},_y:function(){return w},uS:function(){return U}});var Me=t(15009),_=t.n(Me),me=t(99289),T=t.n(me),ue=t(5574),v=t.n(ue),L=t(97857),u=t.n(L),N=t(19632),A=t.n(N),V=t(2453),x=t(67294),ae=t(80854),D=t(99100),Q=t(31472),G=t(36309),B=t(85893),w=x.createContext({}),o=function(){return Math.round(Math.random()*99999)},n=function R(p){return p.reduce(function(m,k){return[].concat(A()(m),A()(k.lessons?R(k.lessons):[]),[k])},[])},U=function R(p){return p.reduce(function(m,k){var ce;return[].concat(A()(m),A()(k.lessons?R(k.lessons):[]),A()((ce=k.topics)!==null&&ce!==void 0?ce:[]))},[])},e=function R(p,m,k){return p.map(function(ce){var se,E;return u()(u()({},ce),{},{lessons:ce.lessons?R(ce.lessons,m,k):[],topics:ce.id===m?[].concat(A()((se=ce.topics)!==null&&se!==void 0?se:[]),[k]):(E=ce.topics)!==null&&E!==void 0?E:[]})})},H=function R(p,m,k){return k?p.map(function(ce){return u()(u()({},ce),{},{lessons:[].concat(A()(ce.lessons?R(ce.lessons,m,k):[]),A()(ce.id===k?[m]:[]))})}):[].concat(A()(p),[m])},$=function R(p,m,k){return p.map(function(ce){return u()(u()({},ce.id===m?k:ce),{},{lessons:ce.lessons?R(ce.lessons,m,k):[]})})},q=function R(p,m){return p.map(function(k){return u()(u()({},k),{},{parent_id:m,lessons:k.lessons?R(k.lessons,k.id):[]})})},h=function R(p,m){return p.filter(function(k){return k.id!==m}).map(function(k){return u()(u()({},k),{},{lessons:k.lessons?R(k.lessons,m):[]})})},te=function R(p,m){return p.map(function(k){return u()(u()({},k),{},{lessons:k.lessons?R(k.lessons,m):[],topics:k.topics?k.topics.filter(function(ce){return ce.id!==m}):[]})})},_e=function R(p,m,k,ce){return ce==null?void 0:ce.map(function(se){if(se.id===k){var E;return u()(u()({},se),{},{topics:(E=se.topics)===null||E===void 0?void 0:E.map(function(P){return P.id===p?m.file.response.data:P})})}else if(se.lessons)return u()(u()({},se),{},{lessons:R(p,m,k,se.lessons||[])});return se})},pe=function(p){var m=p.children,k=p.id,ce=(0,x.useState)(),se=v()(ce,2),E=se[0],P=se[1],F=(0,ae.useIntl)(),j=(0,x.useMemo)(function(){return E&&E.lessons?U(E.lessons):[]},[E]),b=(0,x.useMemo)(function(){return E&&E.lessons?n(E.lessons):[]},[E]),J=(0,x.useState)([]),le=v()(J,2),ne=le[0],Z=le[1],W=(0,x.useState)(!1),oe=v()(W,2),re=oe[0],Ee=oe[1],Pe=(0,ae.useLocation)(),Te=(0,x.useMemo)(function(){var Ae=new URLSearchParams(Pe.search);return{lesson:Ae.get("lesson"),topic:Ae.get("topic")}},[Pe]),Oe=(0,x.useCallback)(T()(_()().mark(function Ae(){var $e,be;return _()().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return Le.next=2,(0,G.XU)({class_type:"EscolaLms\\Courses\\Models\\Lesson"});case 2:$e=Le.sent,$e.success&&(be=$e.data.find(function(We){var it=We.name;return it==="assistant_id"}),Ee(!!(be!=null&&be.id)));case 4:case"end":return Le.stop()}},Ae)})),[]);(0,x.useEffect)(function(){Oe(),Z([])},[]);var K=(0,x.useCallback)(function(){(0,D.Nx)(k).then(function(Ae){return Ae.success&&P(u()(u()({},Ae.data),{},{lessons:q(Ae.data.lessons)}))})},[k]);(0,x.useEffect)(function(){K()},[K]);var we=(0,x.useCallback)(function(Ae){var $e=b.find(function(be){var fe;return be==null||(fe=be.topics)===null||fe===void 0?void 0:fe.find(function(Le){return Le.id===Ae})});return $e?$e.id:null},[b]),Xe=(0,x.useMemo)(function(){return Te.lesson?{mode:"lesson",id:Number(Te.lesson),value:b.find(function(Ae){return Ae.id===Number(Te.lesson)})}:Te.topic?{mode:"topic",id:Number(Te.topic),value:j.find(function(Ae){return Ae.id===Number(Te.topic)})}:{mode:"init"}},[Te,E,b,j]),Ue=(0,x.useCallback)(function(Ae){var $e={course_id:k,topics:[],isNew:!0,id:E?E.lessons.length+1:o(),order:0,title:F.formatMessage({id:"add_title_here"}),active:!0,parent_id:Ae};return P(function(be){var fe;return u()(u()({},be),{},{lessons:H((fe=be==null?void 0:be.lessons)!==null&&fe!==void 0?fe:[],$e,Ae)})}),$e},[k,E]),Je=(0,x.useCallback)(function(Ae,$e){var be=b.find(function(Le){return Le.id===Ae}),fe=be&&be.isNew;return(fe?(0,D.aA)($e):(0,D.sI)(Ae,$e)).then(function(Le){return V.ZP.success(Le.message),K(),Le.success&&P(function(We){var it;return u()(u()({},We),{},{lessons:$((it=We==null?void 0:We.lessons)!==null&&it!==void 0?it:[],Ae,u()(u()({},Le.data),{},{isNew:!1}))})})})},[E]),ke=(0,x.useCallback)(function(Ae){var $e=b.find(function(fe){return fe.id===Ae});if($e){var be=$e.isNew;be?P(function(fe){var Le;return u()(u()({},fe),{},{lessons:h((Le=fe==null?void 0:fe.lessons)!==null&&Le!==void 0?Le:[],Ae)})}):(0,D.iI)(Ae).then(function(fe){fe.success&&(V.ZP.success(fe.message),P(function(Le){var We;return u()(u()({},Le),{},{lessons:h((We=Le==null?void 0:Le.lessons)!==null&&We!==void 0?We:[],Ae)})}))})}},[E]),Ve=(0,x.useCallback)(function(Ae,$e){var be,fe=we(Ae),Le=b.find(function(ut){return ut.id===fe}),We=Le&&((be=Le.topics)===null||be===void 0?void 0:be.find(function(ut){return ut.id===Ae})),it=We==null?void 0:We.isNew;return(it?(0,D.HV)($e):(0,D.Cn)(Ae,$e)).then(function(ut){ut.success&&(V.ZP.success(ut.message),K(),ae.history.push("/courses/list/".concat(k,"/program/?topic=").concat(ut.data.id)),(We==null?void 0:We.topicable_type)===Q.oz.Video&&setTimeout(function(){K()},5e3))})},[we,E,K]),lt=(0,x.useCallback)(function(Ae){var $e=we(Ae),be=b.find(function(We){return We.id===$e});if(be){var fe=j==null?void 0:j.find(function(We){return We.id===Ae}),Le=fe==null?void 0:fe.isNew;Le&&!fe.topicable?P(function(We){var it;return u()(u()({},We),{},{lessons:te((it=We==null?void 0:We.lessons)!==null&&it!==void 0?it:[],Ae)})}):(0,D.vJ)(Ae).then(function(We){We.success&&(V.ZP.success(We.message),P(function(it){var ut;return u()(u()({},it),{},{lessons:te((ut=it==null?void 0:it.lessons)!==null&&ut!==void 0?ut:[],Ae)})}))})}},[E,we]),Ie=(0,x.useCallback)(function(Ae,$e){var be={lesson_id:Ae,isNew:!0,id:o(),title:F.formatMessage({id:"add_title_here"}),active:!0,topicable_type:$e};return P(function(fe){var Le;return u()(u()({},fe),{},{lessons:e((Le=fe==null?void 0:fe.lessons)!==null&&Le!==void 0?Le:[],Ae,be)})}),be},[]),st=function($e,be){var fe=we($e);P(function(Le){return u()(u()({},Le),{},{lessons:Le?_e($e,be,fe,Le.lessons||[]):[]})}),ae.history.push("/courses/list/".concat(k,"/program/?topic=").concat(be.file.response.data.id))},At=(0,x.useCallback)(function(Ae){return(0,D.Cx)(Ae).then(function($e){if($e.success){V.ZP.success($e.message);var be=we(Ae);P(function(fe){var Le;return u()(u()({},fe),{},{lessons:fe?(Le=fe.lessons)===null||Le===void 0?void 0:Le.map(function(We){if(We.id===be){var it=We.topics||[];return u()(u()({},We),{},{topics:[].concat(A()(it),[$e.data])})}return We}):[]})})}})},[E,we]),jt=(0,x.useCallback)(function(Ae){return(0,D.if)(Ae).then(function($e){$e.success&&(V.ZP.success($e.message),P(function(be){return u()(u()({},be),{},{lessons:be?[].concat(A()(be.lessons),[$e.data]):[]})}))})},[]),Qt={state:E,h5ps:ne,id:k,addNewLesson:Ue,updateLesson:Je,updateTopic:Ve,deleteLesson:ke,addNewTopic:Ie,deleteTopic:lt,onTopicUploaded:st,cloneTopic:At,cloneLesson:jt,currentEditMode:Xe,getLessons:K,isAssistant:re};return(0,B.jsx)(w.Provider,{value:Qt,children:m})}},75175:function(Qe,xe,t){"use strict";var Me=t(67294),_=t(85893),me=function(ue){var v=ue.uuid;return(0,_.jsx)("iframe",{style:{border:"none",background:"none",width:"100%",height:"100%"},className:"scorm-preview-player",src:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/scorm/play/").concat(v)})};xe.Z=me},82238:function(Qe,xe,t){"use strict";var Me=t(9783),_=t.n(Me),me=t(5574),T=t.n(me),ue=t(13769),v=t.n(ue),L=t(15009),u=t.n(L),N=t(97857),A=t.n(N),V=t(99289),x=t.n(V),ae=t(20568),D=t(29477),Q=t(54734),G=t(14726),B=t(28248),w=t(2453),o=t(67294),n=t(80854),U=t(85893),e=["folder","onResponse"],H=function(){var pe=x()(u()().mark(function R(p,m,k){return u()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.abrupt("return",(0,n.request)(p,A()({method:"POST",data:m},k||{})));case 1:case"end":return se.stop()}},R)}));return function(p,m,k){return pe.apply(this,arguments)}}(),$=function(R){var p=R.split("//").join("/");return p=p[p.length-1]==="/"?p:"".concat(p,"/"),p=p[0]==="/"?p.slice(1):p,p},q=function(R){return Array.isArray(R)&&R[0]?R[0].name:R.name},h=function(R,p){var m=$(R),k=q(p);return k.includes(m)?k:"".concat(m).concat(k)},te=function(R){return{file:{status:"done",uid:"fileFromBrowser",name:"fileFromBrowser",response:R},fileList:[]}};function _e(pe){var R=pe.folder,p=pe.onResponse,m=v()(pe,e),k=(0,o.useState)(!1),ce=T()(k,2),se=ce[0],E=ce[1],P=(0,o.useState)(!1),F=T()(P,2),j=F[0],b=F[1],J=m.url,le=m.name,ne=m.onChange,Z=m.data,W=(0,o.useCallback)(function(){E(!1)},[]);return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(G.ZP,{onClick:function(){return E(!0)},icon:(0,U.jsx)(Q.Z,{}),children:[" ",(0,U.jsx)(n.FormattedMessage,{id:"browse"})]}),se&&(0,U.jsx)(B.Z,{open:se,onCancel:W,onOk:W,width:"60vw",closeIcon:!1,children:(0,U.jsx)(ae.Z,{forceLoading:j,hideDeleteBtn:!0,defaultDirectory:R,onFile:function(re,Ee){Ee&&(b(!0),H(J,A()(A()({},Z),{},_()({},le,h(Ee,re)))).then(function(Pe){b(!1),p&&p(Pe),Pe.success?(W(),ne&&ne(te(Pe))):w.ZP.error(Pe.message)}).catch(function(Pe){b(!1),"data"in Pe?w.ZP.error(Pe.data.message):w.ZP.error("Unknown Error")}))}})}),(0,U.jsx)("div",{style:{marginTop:"10px"},children:(0,U.jsx)(D.Z,A()({},m))})]})}xe.Z=_e},29477:function(Qe,xe,t){"use strict";var Me=t(97857),_=t.n(Me),me=t(5574),T=t.n(me),ue=t(55523),v=t(75842),L=t(21974),u=t(67294),N=t(80854),A=t(85893);function V(x){var ae=x.onChange,D=x.onUpload,Q=x.url,G=x.name,B=x.extra,w=x.accept,o=x.data,n=x.wrapInForm,U=n===void 0?!0:n,e=x.title,H=x.formProps,$=x.maxFiles,q=x.clearListAfterUpload,h=x.hideLabel,te=x.disabled,_e=x.showUploadList,pe=(0,u.useState)(),R=T()(pe,2),p=R[0],m=R[1],k=(0,N.useIntl)();return o&&o[G]&&delete o[G],(0,A.jsx)(L.Z,{condition:U,wrap:function(se){return(0,A.jsx)(v.Z,_()(_()({},H),{},{children:se}))},children:(0,A.jsx)(ue.Z,{title:e||" ".concat(k.formatMessage({id:"upload_click_here"})),placeholder:k.formatMessage({id:"upload_click_here"}),label:!h&&(0,A.jsx)(N.FormattedMessage,{id:"upload"}),max:$!=null?$:2,fieldProps:{data:o,accept:w,name:G,showUploadList:_e,headers:{Authorization:"Bearer ".concat(localStorage.getItem("TOKEN"))},onChange:function(se){m(se),ae&&ae(se),se.file.status==="done"&&(D&&D(se.file.response),q&&m(void 0))}},action:"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com").concat(Q),extra:B,fileList:p==null?void 0:p.fileList,disabled:te})})}xe.Z=V},44167:function(Qe,xe,t){"use strict";var Me=t(52677),_=t.n(Me),me=t(19632),T=t.n(me),ue=t(5574),v=t.n(ue),L=t(83863),u=t(75081),N=t(67294),A=t(30869),V=t(80854),x=t(85893),ae=function(Q){var G=Q.value,B=Q.onChange,w=Q.multiple,o=w===void 0?!1:w,n=Q.role,U=Q.showEmail,e=Q.disabled,H=(0,N.useState)([]),$=v()(H,2),q=$[0],h=$[1],te=(0,N.useState)(!1),_e=v()(te,2),pe=_e[0],R=_e[1],p=(0,N.useState)([]),m=v()(p,2),k=m[0],ce=m[1],se=(0,N.useRef)(),E=(0,N.useRef)(),P=(0,N.useCallback)(function(le){h(function(ne){return[].concat(T()(ne),T()(le)).filter(function(Z,W,oe){return oe.findIndex(function(re){return U?re.email===Z.email:re.id===Z.id})===W})})},[]);(0,N.useEffect)(function(){se.current=q},[q]);var F=(0,N.useCallback)(function(le){R(!0),E.current&&E.current.abort(),E.current=new AbortController,(0,A.rC)({search:le,role:n},{signal:E.current.signal}).then(function(ne){ne&&ne.success&&(P(ne.data),R(!1))}).catch(function(){return R(!1)})},[]),j=(0,N.useCallback)(function(le){F(le)},[F]),b=(0,N.useCallback)(function(){ce([])},[]);(0,N.useEffect)(function(){var le=new AbortController;if(G){var ne=Array.isArray(G)?G:[G],Z=ne.map(function(W){return _()(W)==="object"?Number(W.id):Number(W)});ce(Z),Z.filter(function(W){var oe;return!((oe=se.current)!==null&&oe!==void 0&&oe.find(function(re){return re.id===W}))}).forEach(function(W){(0,A.EA)(Number(W),{signal:le.signal},!1).then(function(oe){oe&&oe.success&&P([oe.data])})})}return function(){le.abort()}},[G]);var J=(0,N.useCallback)(function(le,ne){le||b(),B&&B(le,ne)},[B,b]);return(0,x.jsx)(L.default,{disabled:e,onFocus:function(){return F()},allowClear:!0,style:{width:"100%",minWidth:"150px"},value:k,onChange:J,mode:o?"multiple":void 0,showSearch:!0,onSearch:j,onDeselect:b,placeholder:(0,x.jsx)(V.FormattedMessage,{id:"select_person",defaultMessage:"Select a person"}),optionFilterProp:"children",filterOption:function(ne,Z){return Z&&Z.children?String("".concat(Z.user.name," ").concat(Z.user.email)).toLowerCase().indexOf(ne&&ne.toLowerCase()||"")>=0:!0},notFoundContent:pe?(0,x.jsx)(u.Z,{size:"small"}):null,children:q.map(function(le){return(0,x.jsxs)(L.default.Option,{value:le.id,user:le,children:[le.name," ",U&&" - ".concat(le.email)]},le.id)})})};xe.Z=ae},14408:function(Qe,xe,t){"use strict";t.d(xe,{Z:function(){return L}});var Me=t(97857),_=t.n(Me),me=t(5574),T=t.n(me),ue=t(2254),v=t(67294);function L(){var u=(0,v.useState)({showModal:!1,disableEdit:!1,clicked:!1}),N=T()(u,2),A=N[0],V=N[1],x=function(D){(D==null?void 0:D.status)==="published"&&D!==null&&D!==void 0&&D.active_from&&(0,ue.C)(new Date(D==null?void 0:D.active_from))&&!A.clicked?V(_()(_()({},A),{},{showModal:!1,disableEdit:!0,clicked:!1})):V(_()(_()({},A),{},{showModal:!1,disableEdit:!1,clicked:!1}))};return{manageCourseEdit:A,setManageCourseEdit:V,validateCourseEdit:x}}},12648:function(Qe,xe,t){"use strict";t.r(xe),t.d(xe,{default:function(){return Vs}});var Me=t(9783),_=t.n(Me),me=t(52677),T=t.n(me),ue=t(15009),v=t.n(ue),L=t(97857),u=t.n(L),N=t(99289),A=t.n(N),V=t(5574),x=t.n(V),ae=t(49677),D=t.n(ae),Q=t(95020),G=t(16894),B=t(2453),w=t(72269),o=t(67294),n=t(80854),U=t(62235),e=t(85893),H={1:"course"},$=function(M){return M[M.COURSE=1]="COURSE",M}({}),q=[{title:(0,e.jsx)(n.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:(0,e.jsx)(n.FormattedMessage,{id:"title",defaultMessage:"title"}),dataIndex:"title",hideInSearch:!0,sorter:!0,width:"80%",render:function(r,s){return(0,e.jsx)(U.Z,{type:"Questionnaire",type_id:Number(s.id),text:s.title})}}],h=function(r){var s=r.modelType,l=r.id,a=(0,o.useRef)(),i=(0,n.useIntl)(),c=(0,o.useCallback)(function(){var C=A()(v()().mark(function S(f,y){var z,d,g;return v()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(z=B.ZP.loading(i.formatMessage({id:"loading"})),X.prev=1,!y){X.next=8;break}return X.next=5,(0,Q.cc)(H[s],l,f);case 5:X.t0=X.sent,X.next=11;break;case 8:return X.next=10,(0,Q.nX)(H[s],l,f);case 10:X.t0=X.sent;case 11:return d=X.t0,d.success&&(z(),B.ZP.success(d.message),(g=a.current)===null||g===void 0||g.reload()),X.abrupt("return");case 16:return X.prev=16,X.t1=X.catch(1),z(),B.ZP.error((0,e.jsx)(n.FormattedMessage,{id:"error",defaultMessage:"error"})),X.abrupt("return",!1);case 21:case"end":return X.stop()}},S,null,[[1,16]])}));return function(S,f){return C.apply(this,arguments)}}(),[s,l]);return(0,e.jsx)(G.ZP,{headerTitle:i.formatMessage({id:"questionnaires",defaultMessage:"questionnaires"}),actionRef:a,rowKey:"id",search:!1,request:function(S,f){D()(S);var y=f&&Object.entries(f)[0];return(0,Q.SC)({order_by:y&&y[0],order:y?y[1]==="ascend"?"ASC":"DESC":void 0}).then(function(z){return z.success?{data:z.data,success:!0}:[]})},columns:[].concat(q,[{title:(0,e.jsx)(n.FormattedMessage,{id:"assign",defaultMessage:"assign"}),dataIndex:"option",valueType:"option",render:function(S,f){var y;return[(0,e.jsx)(w.Z,{defaultChecked:f.models&&((y=f.models)===null||y===void 0?void 0:y.filter(function(z){return z.model_id===l}).length)>0,onChange:function(d){return c(Number(f.id),d)}},"assign")]}}])})},te=h,_e=t(7418),pe=t(48959),R=t(19632),p=t.n(R),m=t(31472),k=t(61227),ce=t.n(k),se=t(60943),E=t(45919),P=t(99100),F=t(58638),j=t(14726),b=t(76841),J=function(r){var s=r.topic_id,l=r.stat,a=(0,o.useState)(!1),i=x()(a,2),c=i[0],C=i[1],S=(0,o.useCallback)(function(f){return A()(v()().mark(function y(){var z,d;return v()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(f){O.next=2;break}return O.abrupt("return");case 2:return C(!0),O.prev=3,O.next=6,(0,b.Sx)(f,l);case 6:z=O.sent,z instanceof Blob&&(d=document.createElement("a"),d.href=window.URL.createObjectURL(z),d.download="".concat(l,"_").concat(f,".xlsx"),document.body.appendChild(d),d.click(),document.body.removeChild(d)),O.next=13;break;case 10:O.prev=10,O.t0=O.catch(3),console.error(O.t0);case 13:return O.prev=13,C(!1),O.finish(13);case 16:case"end":return O.stop()}},y,null,[[3,10,13,16]])}))},[l]);return(0,e.jsxs)(j.ZP,{type:"primary",loading:c,disabled:s===void 0,onClick:S(s),children:[(0,e.jsx)(F.Z,{})," ",(0,e.jsx)(n.FormattedMessage,{id:"export"})]})},le=[{dataIndex:"attempt",title:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.attempt"}),hideInSearch:!0,fixed:"left",width:100},{dataIndex:"email",title:(0,e.jsx)(n.FormattedMessage,{id:"email"}),hideInSearch:!0,fixed:"left"},{dataIndex:"user_id",title:(0,e.jsx)(n.FormattedMessage,{id:"user"}),hideInSearch:!0,render:function(r,s){return(0,e.jsx)(U.Z,{type:"App\\Models\\User",type_id:s.user_id})}},{dataIndex:"attempt_date",title:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.attemptDate"}),hideInSearch:!0,render:function(r,s){return s.attempt_date?(0,se.WU)(new Date(s.attempt_date),E.Cu):"-"}},{dataIndex:"attempt_time",title:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.attemptDuration"}),hideInSearch:!0,render:function(r,s){return s.attempt_time?"".concat(s.attempt_time,"s"):"-"}},{dataIndex:"summary",title:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.result"}),hideInSearch:!0,render:function(r,s){return typeof s.summary=="number"?"".concat((s.summary*100).toFixed(2),"%"):"-"}}],ne=function(r){return r!==void 0?Object.keys(r).filter(function(s){return s.includes("question")}).map(function(s,l){return{title:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.question",values:{i:l+1}}),dataIndex:s,hideInSearch:!0}}):[]},Z=function(r){var s,l=r.quizTopics,a=(0,o.useState)(l==null||(s=l[0])===null||s===void 0?void 0:s.id),i=x()(a,2),c=i[0],C=i[1],S=(0,o.useState)([]),f=x()(S,2),y=f[0],z=f[1],d=(0,o.useMemo)(function(){return l.reduce(function(X,I){var Y=I.id,de=I.title;return de!==void 0&&Y!==void 0?[].concat(p()(X),[{value:Y,label:de}]):X},[])},[l]),g=(0,o.useMemo)(function(){var X;return[{dataIndex:"topic_id",title:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.topic"}),hideInTable:!0,valueType:"select",fieldProps:{options:d,defaultValue:d==null||(X=d[0])===null||X===void 0?void 0:X.value,allowClear:!1}}].concat(le,p()(y))},[d,y]),O=(0,o.useCallback)(function(){var X=A()(v()().mark(function I(Y){var de,ie,Re,Ce,Se,Ke,Be,ot;return v()().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:if(ie=Y.topic_id,Re=ie===void 0?c:ie,Re){tt.next=3;break}return tt.abrupt("return",{success:!1,data:[],total:0});case 3:return tt.next=5,(0,P.ps)(Re,m.rX.QuizSummary);case 5:if(Ce=tt.sent,!(!Ce.success||!((de=Ce.data)!==null&&de!==void 0&&de[m.rX.QuizSummary]))){tt.next=8;break}return tt.abrupt("return",{success:!1,data:[],total:0});case 8:return Se=Ce.data[m.rX.QuizSummary],Ke=ce()(Se),Be=Ke[0],ot=Ke.slice(1),z(ne(Be)),tt.abrupt("return",{success:!0,data:ot,total:ot.length});case 11:case"end":return tt.stop()}},I)}));return function(I){return X.apply(this,arguments)}}(),[]);return(0,e.jsx)(G.ZP,{headerTitle:(0,e.jsx)(n.FormattedMessage,{id:"TopicStatistics.giftQuiz.title"}),onSubmit:function(I){var Y=I.topic_id;return C(Y)},onReset:function(){var I;return C(l==null||(I=l[0])===null||I===void 0?void 0:I.id)},toolBarRender:function(){return[(0,e.jsx)(J,{stat:m.rX.QuizSummary,topic_id:c},"export")]},className:"table-standalone",request:O,columns:g,search:{layout:"vertical"},scroll:{x:1500}})},W=function(r){var s=r.flatTopics,l=(0,o.useMemo)(function(){var a;return s.reduce(function(i,c){return u()(u()({},i),{},_()({},c.topicable_type,[].concat(p()(i[c.topicable_type]),[c])))},(a={},_()(_()(_()(_()(_()(_()(_()(_()(_()(_()(a,m.oz.RichText,[]),m.oz.OEmbed,[]),m.oz.Audio,[]),m.oz.Video,[]),m.oz.H5P,[]),m.oz.Image,[]),m.oz.PDF,[]),m.oz.SCORM,[]),m.oz.Project,[]),m.oz.GiftQuiz,[]),_()(a,m.oz.Unselected,[])))},[s]);return(0,e.jsx)(e.Fragment,{children:l[m.oz.GiftQuiz].length>0&&(0,e.jsx)(Z,{quizTopics:l[m.oz.GiftQuiz]})})},oe=t(87366),re=t(26271),Ee=t(25093),Pe=t(75081),Te=t(38925),Oe=t(78677),K=function(r){var s=r.config,l=r.value,a=r.title,i=r.children,c=r.valueLabel,C=(0,o.useCallback)(function(f,y){var z,d=(z=l.find(function(g){return g.type===y.type}))===null||z===void 0?void 0:z.topic;return d?"".concat(d.topicable_type.split("\\").pop(),":").concat(d.title):f},[l]),S=(0,o.useCallback)(function(f){return{name:c||f.type,value:f.value}},[c]);return(0,e.jsx)(re.ZP,{title:a,headerBordered:!0,children:(0,e.jsxs)("div",{style:{overflow:"auto",minHeight:"400px"},children:[(0,e.jsx)(Oe.Z,u()(u()({},s),{},{tooltip:{formatter:S,title:C},data:l})),i&&i]})})},we=K,Xe=t(11312),Ue={xField:"type",yField:"value",seriesField:"type",isRange:!1,title:null,xAxis:{label:{autoHide:!0,autoRotate:!1}},interactions:[{type:"active-region",enable:!1}],columnBackground:{style:{fill:"rgba(0,0,0,0.1)"}}},Je=function(r){var s,l,a,i,c=r.courseId,C=(0,o.useState)({mode:"init"}),S=x()(C,2),f=S[0],y=S[1],z=(0,o.useState)([]),d=x()(z,2),g=d[0],O=d[1],X=Ee.Z.Text,I=(0,n.useIntl)();return(0,o.useEffect)(function(){y({mode:"loading"}),Promise.all([(0,P.Nx)(Number(c)),(0,P.ue)(Number(c))]).then(function(Y){var de=x()(Y,2),ie=de[0],Re=de[1];ie.success&&Re.success&&(O((0,oe.uS)(ie.data.lessons)),y({mode:"loaded",value:Object.entries(Re.data).map(function(Ce){var Se=x()(Ce,2),Ke=Se[0],Be=Se[1],ot=I.formatMessage({id:Ke.split("\\").pop()});return{type:ot,value:Be}})}))})},[]),(0,e.jsxs)(re.ZP,{split:"vertical",children:[f.mode==="loading"&&(0,e.jsx)(Pe.Z,{}),f.mode==="loaded"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Xe.Du,{course_id:Number(c),topics:g,stats:(s=f.value.find(function(Y){return Y.type.includes("FinishedTopics")}))===null||s===void 0?void 0:s.value}),(0,e.jsx)(Xe.rL,{stats:(l=f.value.find(function(Y){return Y.type.includes("FinishedCourse")}))===null||l===void 0?void 0:l.value,attempts:(a=f.value.find(function(Y){return Y.type.includes("AttendanceList")}))===null||a===void 0?void 0:a.value}),(0,e.jsx)(Xe.nu,{stats:(i=f.value.find(function(Y){return Y.type.includes("AttendanceList")}))===null||i===void 0?void 0:i.value}),(0,e.jsxs)(X,{children:[(0,e.jsx)(n.FormattedMessage,{id:"MoneyEarned"}),": ".concat(f.value.find(function(Y){return Y.type.split("\\").pop()===I.formatMessage({id:"MoneyEarned"})}).value)]}),(0,e.jsx)(re.ZP,{colSpan:12,layout:"center",children:(0,e.jsx)(we,{config:Ue,title:(0,e.jsx)(n.FormattedMessage,{id:"People"}),value:f.value.filter(function(Y){var de=Y.type.split("\\").pop();return de===I.formatMessage({id:"PeopleBought"})||de===I.formatMessage({id:"PeopleFinished"})||de===I.formatMessage({id:"PeopleStarted"})})})}),(0,e.jsx)(re.ZP,{colSpan:12,layout:"center",children:(0,e.jsx)(we,{config:Ue,title:(0,e.jsx)(n.FormattedMessage,{id:"AverageTimePerTopic"}),valueLabel:I.formatMessage({id:"seconds",defaultMessage:"seconds"}),value:Object.entries(f.value.find(function(Y){return Y.type.split("\\").pop()===I.formatMessage({id:"AverageTimePerTopic"})}).value).map(function(Y){var de;return{type:Y[0],value:(de=Y[1])===null||de===void 0?void 0:de.average_time,topic:g.find(function(ie){return ie.id===Number(Y[0])})}}),children:(0,e.jsxs)(X,{children:[(0,e.jsx)(n.FormattedMessage,{id:"AverageTime"}),`:
                    `.concat(f.value.find(function(Y){return Y.type.split("\\").pop()===I.formatMessage({id:"AverageTime"})}).value,`
                  `)]})})}),(0,e.jsx)(re.ZP,{children:(0,e.jsx)(W,{flatTopics:g})})]}),f.mode==="error"&&(0,e.jsx)(Te.Z,{message:f.error,type:"error"})]})},ke=Je,Ve=t(28225),lt=t(23535),Ie=t(952),st=t(22004),At=t.n(st),jt=t(82238),Qt=function(r){var s=r.action,l=r.form_name,a=r.src_name,i=r.getUploadedSrcField,c=r.setPath,C=r.folder,S=r.hideLabel;return(0,e.jsxs)(Ie.ZP.Group,{title:(0,e.jsx)(n.FormattedMessage,{id:"video"}),children:[(0,e.jsx)(Ie.ZP.Item,{shouldUpdate:!0,children:function(y){return(0,e.jsxs)(o.Fragment,{children:[(0,e.jsx)(jt.Z,{folder:C,accept:"video/*",name:l,url:s,onChange:function(d){if(d.file.status==="done"){var g;y.setFieldsValue(_()({},a,i(d))),(g=d.file.response)!==null&&g!==void 0&&g.success&&c(_()(_()({},"".concat(l,"_url"),d.file.response.data["".concat(l,"_url")]),"".concat(l,"_path"),d.file.response.data["".concat(l,"_path")]))}},hideLabel:S}),(0,e.jsx)(j.ZP,{danger:!0,onClick:function(){return[c(_()(_()({},"".concat(l,"_url"),""),"".concat(l,"_path"),"")),y.setFieldsValue(_()({},a,""))]},children:(0,e.jsx)(n.FormattedMessage,{id:"delete"})})]})}}),(0,e.jsx)(Ie.ZP.Item,{shouldUpdate:!0,children:function(y){var z=y.getFieldValue(a);return z?(0,e.jsx)(At(),{width:"auto",height:200,url:z,controls:!0}):(0,e.jsx)(e.Fragment,{})}})]})},Ae=Qt,$e=t(53957),be=t(71230),fe=t(15746),Le=t(8266),We=t(64599),it=t.n(We),ut=function(r){var s=new FormData;for(var l in r)if(r[l]!=null||r[l]!=null){if(Array.isArray(r[l])){r[l].length||s.append("".concat(l,"[]"),"[]");var a=it()(r[l]),i;try{for(a.s();!(i=a.n()).done;){var c=i.value;s.append("".concat(l,"[]"),c)}}catch(C){a.e(C)}finally{a.f()}continue}s.set(l,r[l])}return s},bt=t(5966),Zt=t(52688),Wt=t(50335),yn=t(64218),Lt=t(78957),Tn=t(86738),Kt=t(96074),Sn=t(35614),An=t(2291),Ct=t(19411),wr=t(19054),Br=function M(r,s,l){return r.reduce(function(a,i){var c,C=s===i.id;return[].concat(p()(a),[{value:i.id,title:i.title,label:i.title,disabled:l||C,children:M((c=i==null?void 0:i.lessons)!==null&&c!==void 0?c:[],s,C||l)}])},[])},On=function(r){var s=r.name,l=r.currentLessonId,a=(0,n.useIntl)(),i=(0,o.useContext)(oe._y),c=i.state,C=(0,o.useMemo)(function(){var S;return[{value:"",title:a.formatMessage({id:"root",defaultMessage:"Root"}),label:a.formatMessage({id:"root",defaultMessage:"Root"}),children:Br((S=c==null?void 0:c.lessons)!==null&&S!==void 0?S:[],l)}]},[c,l]);return(0,e.jsx)("div",{className:"tree-select",children:(0,e.jsx)(wr.Z,{name:s,label:(0,e.jsx)(n.FormattedMessage,{id:"parent_lesson"}),fieldProps:{treeData:C,treeDefaultExpandAll:!0,treeLine:!0}})})},Wr=function(r){var s=r.onFinish,l=r.onValuesChange,a=r.onDelete,i=r.onClone,c=r.initialValues,C=r.lesson,S=r.loading,f=S===void 0?!1:S,y=(0,o.useContext)(oe._y),z=y.isAssistant,d=Ie.ZP.useForm(),g=x()(d,1),O=g[0],X=Ie.ZP.useWatch("active_from",O),I=Ie.ZP.useWatch("active_to",O),Y=(0,n.useIntl)();return(0,e.jsx)(Ie.ZP,{form:O,submitter:{render:function(ie){return(0,e.jsx)(be.Z,{gutter:16,children:(0,e.jsx)(fe.Z,{span:24-8,children:(0,e.jsx)(be.Z,{justify:"center",className:"program__cta-footer",children:(0,e.jsx)(yn.Z,{offsetBottom:4,children:(0,e.jsxs)(Lt.Z,{size:"large",children:[(0,e.jsx)(j.ZP,u()(u()({loading:f,type:"primary",onClick:function(){var Ce;return(Ce=ie.form)===null||Ce===void 0?void 0:Ce.submit()}},ie.submitButtonProps),{},{children:C.isNew?(0,e.jsx)(n.FormattedMessage,{id:"create"}):(0,e.jsx)(n.FormattedMessage,{id:"save"})}),"submit"),!C.isNew&&(0,e.jsx)(j.ZP,{onClick:i,loading:f,children:(0,e.jsx)(n.FormattedMessage,{id:"clone"})}),(0,e.jsx)(Tn.Z,{onConfirm:a,title:(0,e.jsx)(n.FormattedMessage,{id:"deleteQuestion"}),okText:(0,e.jsx)(n.FormattedMessage,{id:"yes"}),cancelText:(0,e.jsx)(n.FormattedMessage,{id:"no"}),children:(0,e.jsx)(j.ZP,u()(u()({type:"primary",danger:!0},ie.submitButtonProps),{},{loading:f,children:(0,e.jsx)(n.FormattedMessage,{id:"delete"})}))},"delete")]})})})})})}},layout:"vertical",onFinish:s,onValuesChange:l,initialValues:u()(u()({},c),{},{summary:c.summary||""}),style:{height:"100%"},children:(0,e.jsxs)(be.Z,{gutter:16,style:{height:"100%"},children:[(0,e.jsxs)(fe.Z,{span:24-8,children:[(0,e.jsx)(Kt.Z,{children:(0,e.jsx)(n.FormattedMessage,{id:"lesson"})}),(0,e.jsxs)(re.ZP,{children:[(0,e.jsx)(bt.Z,{name:"title",label:(0,e.jsx)(n.FormattedMessage,{id:"title"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"title"}),placeholder:Y.formatMessage({id:"title"}),required:!0,labelCol:{span:5}}),(0,e.jsx)(Ie.ZP.Item,{name:"summary",label:(0,e.jsx)(n.FormattedMessage,{id:"summary"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"summary_tooltip"}),valuePropName:"value",labelCol:{span:5},children:(0,e.jsx)(Ct.ZP,{directory:"course/".concat(C.course_id,"/lesson/").concat(C.id,"/wysiwyg")})})]})]}),(0,e.jsx)(fe.Z,{span:8,children:(0,e.jsxs)("aside",{className:"program-sidebar program-sidebar--right",children:[(0,e.jsx)(bt.Z,{name:"duration",label:(0,e.jsx)(n.FormattedMessage,{id:"duration"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"duration"}),placeholder:Y.formatMessage({id:"duration"})}),(0,e.jsx)(Zt.Z,{name:"active",label:(0,e.jsx)(n.FormattedMessage,{id:"is_active"})}),(0,e.jsx)(Wt.Z,{allowClear:!1,width:"lg",name:"active_from",label:(0,e.jsx)(n.FormattedMessage,{id:"active_from"}),placeholder:Y.formatMessage({id:"active_from",defaultMessage:"active_from"}),rules:[{validator:function(ie,Re){return Re&&I&&(0,Sn.A)(new Date(Re),new Date(I))?Promise.reject(new Error(Y.formatMessage({id:"invalidDate"}))):Promise.resolve()}}]}),(0,e.jsx)(Wt.Z,{allowClear:!1,width:"lg",name:"active_to",label:(0,e.jsx)(n.FormattedMessage,{id:"active_to"}),placeholder:Y.formatMessage({id:"active_to",defaultMessage:"active_to"}),disabled:!X&&!I,rules:[{validator:function(ie,Re){return Re&&X&&(0,An.R)(new Date(Re),new Date(X))?Promise.reject(new Error(Y.formatMessage({id:"invalidDate"}))):Promise.resolve()}}]}),(0,e.jsx)(On,{name:"parent_id",currentLessonId:C==null?void 0:C.id}),z&&(0,e.jsx)(bt.Z,{name:"assistant_id",label:(0,e.jsx)(n.FormattedMessage,{id:"assistant_id",defaultMessage:"Assistant ID"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"assistant_id_tooltip"}),placeholder:Y.formatMessage({id:"Assistant ID"})})]})})]})})},Kr=Wr,Dn=function(r){var s;return u()(u()({},r),{},{parent_id:(s=r.parent_id)!==null&&s!==void 0?s:""})},Nr=function(){var r=(0,o.useContext)(oe._y),s=r.updateLesson,l=r.deleteLesson,a=r.cloneLesson,i=r.currentEditMode,c=i&&i.mode==="lesson"&&i.value?i.value:{},C=(0,o.useState)(Dn(c)),S=x()(C,2),f=S[0],y=S[1],z=(0,o.useState)([]),d=x()(z,2),g=d[1],O=(0,o.useState)(!1),X=x()(O,2),I=X[0],Y=X[1],de=(0,n.useParams)();(0,o.useEffect)(function(){return y(Dn(c)),(c==null?void 0:c.topics)&&g(c.topics)},[c]);var ie=(0,o.useCallback)(function(){Y(!0);var Se=ut(u()(u()({course_id:(c==null?void 0:c.course_id)||de.course},f),{},{active:f.active?1:0,parent_lesson_id:f.parent_id}));return s&&f.id?s(f.id,Se).then(function(){return Y(!1)}).catch(function(Ke){console.error(Ke),Y(!1)}):Promise.resolve()},[f,c==null?void 0:c.course_id,s]),Re=(0,o.useCallback)(function(){return f.id&&l&&l(f.id),Promise.resolve()},[l,f.id]),Ce=(0,o.useCallback)(function(){return f.id&&(a==null?void 0:a(f.id))},[a,f.id]);return(0,e.jsx)(Kr,{loading:I,lesson:f,initialValues:f,onDelete:Re,onFinish:ie,onClone:Ce,onValuesChange:function(Ke){y(function(Be){return u()(u()({},Be),Ke)})}})},$r=Nr,zr=t(54734),In=t(55725),Jt=t(51042),Fn=t(75625),kr=t(62848),ct=t(83062),Gr=t(65400),Nt=t.n(Gr),Zn=t(74253),Vr=t(95486),xt=t(43669),Xt=t(28248),Hr=function(r){var s=r.handleOk,l=r.isModalVisible,a=r.initialValues,i=r.courseId;return(0,e.jsxs)(Xt.Z,{title:(0,e.jsx)(xt._H,{id:"description"}),visible:l,onOk:s,onCancel:s,width:1e3,footer:[(0,e.jsx)(j.ZP,{type:"primary",onClick:s,children:"Ok"},"back")],children:[(0,e.jsx)(Ie.ZP.Item,{name:"introduction",label:(0,e.jsx)(xt._H,{id:"introduction"}),labelCol:{span:5},wrapperCol:{span:19},tooltip:(0,e.jsx)(xt._H,{id:"introduction_tooltip"}),valuePropName:"value",children:(0,e.jsx)(Ct.ZP,{directory:"course/".concat(i,"/lesson/").concat(a.lesson_id,"/topic/").concat(a.id,"/wysiwyg")})}),(0,e.jsx)(Ie.ZP.Item,{name:"description",label:(0,e.jsx)(xt._H,{id:"description"}),labelCol:{span:5},wrapperCol:{span:19},tooltip:(0,e.jsx)(xt._H,{id:"description_tooltip"}),valuePropName:"value",children:(0,e.jsx)(Ct.ZP,{directory:"course/".concat(i,"/lesson/").concat(a.lesson_id,"/topic/").concat(a.id,"/wysiwyg")})}),(0,e.jsx)(Ie.ZP.Item,{name:"summary",label:(0,e.jsx)(xt._H,{id:"summary"}),labelCol:{span:5},wrapperCol:{span:19},tooltip:(0,e.jsx)(xt._H,{id:"summary_tooltip"}),valuePropName:"value",children:(0,e.jsx)(Ct.ZP,{directory:"course/".concat(i,"/lesson/").concat(a.lesson_id,"/topic/").concat(a.id,"/wysiwyg")})})]})},Qr=function(r){var s=r.onValuesChange,l=r.initialValues,a=r.courseId,i=(0,n.useIntl)(),c=o.useState(!1),C=x()(c,2),S=C[0],f=C[1];return(0,e.jsxs)(Ie.ZP,{submitter:!1,onValuesChange:s,initialValues:u()({},l),layout:"horizontal",children:[(0,e.jsx)(bt.Z,{name:"title",label:(0,e.jsx)(n.FormattedMessage,{id:"title"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"title"}),placeholder:i.formatMessage({id:"title",defaultMessage:"title"}),required:!0}),(0,e.jsx)(bt.Z,{name:"duration",label:(0,e.jsx)(n.FormattedMessage,{id:"duration"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"duration"}),placeholder:i.formatMessage({id:"duration"})}),(0,e.jsx)(On,{name:"lesson_id"}),(0,e.jsx)(Ie.ZP.Item,{label:(0,e.jsx)(n.FormattedMessage,{id:"description"}),children:(0,e.jsx)(j.ZP,{type:"primary",onClick:function(){return f(!0)},children:(0,e.jsx)(n.FormattedMessage,{id:"open_editor"})})}),(0,e.jsx)(Zt.Z,{name:"active",label:(0,e.jsx)(n.FormattedMessage,{id:"is_active"})}),(0,e.jsx)(Zt.Z,{name:"preview",label:(0,e.jsx)(n.FormattedMessage,{id:"able_to_preview"})}),(0,e.jsx)(Zt.Z,{name:"can_skip",label:(0,e.jsx)(n.FormattedMessage,{id:"can_skip"})}),(0,e.jsx)(Ie.ZP.Item,{name:"json",label:(0,e.jsx)(n.FormattedMessage,{id:"json"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"json_tooltip"}),valuePropName:"value",children:(0,e.jsx)(Vr.Z,{})}),(0,e.jsx)(Hr,{isModalVisible:S,handleOk:function(){return f(!1)},initialValues:l,courseId:a})]})},Jr=Qr,Yt=function(r){if(typeof(r==null?void 0:r.topicable_type)!="string"||!r.topicable_type)return"Unknown";var s=((r==null?void 0:r.topicable_type)||"").split("\\");return s.pop()||"Unknown"},Ln=t(97704),Ot=t(66419),yt=t(83863),Xr=function(r){var s=r.value,l=r.onChange,a=r.multiple,i=a===void 0?!1:a,c=(0,o.useState)([]),C=x()(c,2),S=C[0],f=C[1];return(0,o.useEffect)(function(){(0,Ln.gq)().then(function(y){return y.success&&f(y.data)})},[]),(0,o.useEffect)(function(){S.length&&(S.find(function(y){return Number(y.id)===Number(s)})||(0,Ln.gq)().then(function(y){return y.success&&f(y.data)}))},[s]),(0,e.jsx)(yt.default,{loading:S.length===0,style:{width:"100%"},value:s,onChange:l,mode:i?"multiple":void 0,showSearch:!0,placeholder:(0,e.jsx)(n.FormattedMessage,{id:"H5P_select_content"}),optionFilterProp:"children",filterOption:function(z,d){var g,O=d==null||(g=d.children)===null||g===void 0?void 0:g.slice(1,d==null?void 0:d.children.length).join("");return(0,Ot.ri)(O,z)},children:S.map(function(y){return(0,e.jsxs)(yt.default.Option,{value:y.id.toString(),children:[(0,e.jsx)("small",{children:y.id})," ",y.title," (",y.library.title,")"]},y.id.toString())})})},Yr=Xr,qr=t(9412),ea=t(89825),ta=function(r){var s=r.id,l=r.onChange,a=(0,n.useIntl)(),i=(0,o.useState)(s==="new"||s===void 0?"new":Number(s)),c=x()(i,2),C=c[0],S=c[1];return(0,e.jsxs)(o.Fragment,{children:[(0,e.jsxs)(be.Z,{gutter:16,align:"middle",className:"create-new",children:[(0,e.jsx)(fe.Z,{children:(0,e.jsxs)(j.ZP,{type:"primary",onClick:function(){return S("new")},children:[" ",(0,e.jsx)(n.FormattedMessage,{id:"create_new"})]})}),(0,e.jsx)(fe.Z,{span:4,children:(0,e.jsxs)(Ee.Z,{children:[(0,e.jsx)("small",{children:(0,e.jsx)(n.FormattedMessage,{id:"or"})})," ",(0,e.jsx)(n.FormattedMessage,{id:"reuse_existing"})]})}),(0,e.jsx)(fe.Z,{span:12,children:(0,e.jsx)(Yr,{value:s,onChange:function(y){l(y),S(s==="new"?"new":Number(s))}})})]}),(0,e.jsx)(be.Z,{style:{marginTop:"30px"},children:(0,e.jsx)(fe.Z,{span:24,children:(0,e.jsx)(ea.Z,{id:C,onSubmit:function(y){return l(String(y))}},C)})}),(0,e.jsx)(Kt.Z,{}),(0,e.jsx)(be.Z,{gutter:16,children:(0,e.jsx)(fe.Z,{span:24,children:(0,e.jsx)(be.Z,{children:(0,e.jsx)(qr.C,{onSuccess:function(y){y.data.id&&l(String(y.data.id))},onError:function(){return console.log(a.formatMessage({id:"error"}))}})})})})]})},na=ta,Rn=t(96365),ra=t(98980),aa=t.n(ra),sa=[{provider_name:"YouTube",provider_url:"https://www.youtube.com/",endpoints:[{schemes:["https://*.youtube.com/watch*","https://*.youtube.com/v/*","https://youtu.be/*","https://*.youtube.com/shorts/*","https://youtube.com/shorts/*"],url:"https://www.youtube.com/oembed",discovery:!0}]},{provider_name:"Reddit",provider_url:"https://reddit.com/",endpoints:[{schemes:["https://reddit.com/r/*/comments/*/*","https://www.reddit.com/r/*/comments/*/*"],url:"https://www.reddit.com/oembed"}]},{provider_name:"Flickr",provider_url:"https://www.flickr.com/",endpoints:[{schemes:["http://*.flickr.com/photos/*","http://flic.kr/p/*","https://*.flickr.com/photos/*","https://flic.kr/p/*"],url:"https://www.flickr.com/services/oembed/",discovery:!0}]},{provider_name:"Vimeo",provider_url:"https://vimeo.com/",endpoints:[{schemes:["https://vimeo.com/*","https://vimeo.com/album/*/video/*","https://vimeo.com/channels/*/*","https://vimeo.com/groups/*/videos/*","https://vimeo.com/ondemand/*/*","https://player.vimeo.com/video/*"],url:"https://vimeo.com/api/oembed.{format}",discovery:!0}]},{provider_name:"SoundCloud",provider_url:"http://soundcloud.com/",endpoints:[{schemes:["http://soundcloud.com/*","https://soundcloud.com/*","https://soundcloud.app.goog.gl/*"],url:"https://soundcloud.com/oembed"}]},{provider_name:"Twitter",provider_url:"http://www.twitter.com/",endpoints:[{schemes:["https://twitter.com/*/status/*","https://*.twitter.com/*/status/*","https://twitter.com/*/moments/*","https://*.twitter.com/*/moments/*"],url:"https://publish.twitter.com/oembed"}]},{provider_name:"GIPHY",provider_url:"https://giphy.com",endpoints:[{schemes:["https://giphy.com/gifs/*","http://gph.is/*","https://media.giphy.com/media/*/giphy.gif"],url:"https://giphy.com/services/oembed",discovery:!0}]}],ia=function(r){return(0,e.jsx)(aa(),u()(u()({},r),{},{providers:sa}))},oa=function(r){var s=r.text,l=r.onChange,a=(0,o.useState)(s),i=x()(a,2),c=i[0],C=i[1],S=(0,o.useState)(s),f=x()(S,2),y=f[0],z=f[1];return(0,e.jsxs)(o.Fragment,{children:[(0,e.jsxs)(be.Z,{children:[(0,e.jsx)(Rn.Z,{value:s,onChange:function(g){C(g.target.value),l(g.target.value)}}),(0,e.jsx)(j.ZP,{onClick:function(){return z(c)},children:(0,e.jsx)(n.FormattedMessage,{id:"preview"})})]}),(0,e.jsx)(be.Z,{children:y&&(0,e.jsx)(ia,{url:y},y)})]})},la=oa,ua=function(r){var s=r.text,l=r.onChange,a=r.directory,i=a===void 0?"topics/new":a;return(0,e.jsx)("div",{children:(0,e.jsx)(Ct.ZP,{directory:i,value:s,onChange:function(C){l(C)}})})},da=ua,ca=t(26859),ma=t(72252),_a=t(38703),Un=t(97042),pa=t(56117),fa=t(59037);Un.default.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(Un.default.version,"/pdf.worker.min.js");var va={acceptedTypes:_()(_()(_()({audio:".mp3,audio/*",video:".mp3,video/*",document:".doc,.docx,.pdf,.zip"},m.oz.Audio,".mp3,audio/*"),m.oz.Video,".mp3,video/*"),m.oz.PDF,".pdf,application/pdf")},ha=function(r){var s={},l;for(l in r)switch(T()(r[l])){case"boolean":s[l]=r[l]?1:0;break;case"object":s[l]=JSON.stringify(r[l]);break;case"string":case"number":s[l]=r[l];break;default:break}return s},ga=function(r){var s=r.file,l=(0,o.useState)(0),a=x()(l,2),i=a[0],c=a[1],C=(0,o.useState)(1),S=x()(C,2),f=S[0],y=S[1];return(0,e.jsxs)("div",{children:[i===0?(0,e.jsx)(Pe.Z,{}):(0,e.jsxs)("div",{style:{margin:"0.5em 0"},children:[(0,e.jsxs)(Ee.Z,{children:[(0,e.jsx)(n.FormattedMessage,{id:"page"}),":"]}),(0,e.jsx)(ma.Z,{defaultPageSize:1,size:"small",total:i,onChange:function(d){return y(d)},simple:!0})]}),(0,e.jsx)(pa.Z,{file:s,onLoadSuccess:function(d){var g=d.numPages;return c(g)},children:(0,e.jsx)(fa.Z,{pageNumber:f,className:"pdf-preview"})})]})},ja=function(r){var s,l=r.topic,a=(0,o.useContext)(oe._y),i=a.getLessons;if((0,o.useEffect)(function(){var C;if(((C=l.json)===null||C===void 0?void 0:C.ffmpeg.state)==="coding"){var S=setTimeout(function(){i&&i()},1e3);return function(){return clearTimeout(S)}}},[]),((s=l.json)===null||s===void 0?void 0:s.ffmpeg.state)==="coding"){var c;return(0,e.jsxs)(Ee.Z,{children:[(0,e.jsx)(n.FormattedMessage,{id:"encoding_progress",defaultMessage:"Encoding progress:"}),(0,e.jsx)(_a.Z,{percent:(c=l.json)===null||c===void 0||(c=c.ffmpeg)===null||c===void 0?void 0:c.percentage})]})}return(0,e.jsx)(o.Fragment,{})},xa=function(r){var s,l,a,i,c=r.type,C=r.topic;if(C&&C.topicable&&"url"in C.topicable)switch(c){case m.oz.Audio:return C.topicable_type===m.oz.Audio&&(s=C.topicable)!==null&&s!==void 0&&s.url?(0,e.jsx)("audio",{preload:"none",controls:!0,src:C.topicable.url}):(0,e.jsx)(o.Fragment,{});case m.oz.Video:return C.topicable_type===m.oz.Video&&(l=C.topicable)!==null&&l!==void 0&&l.url?(0,e.jsx)("video",{controls:!0,src:C.topicable.url,width:"100%"}):(0,e.jsx)(o.Fragment,{});case m.oz.Image:return C.topicable_type===m.oz.Image&&(a=C.topicable)!==null&&a!==void 0&&a.url?(0,e.jsx)("img",{title:"Topic image",src:C.topicable.url,width:"100%"}):(0,e.jsx)(o.Fragment,{});case m.oz.PDF:return C.topicable_type===m.oz.PDF&&(i=C.topicable)!==null&&i!==void 0&&i.url?(0,e.jsx)(ga,{file:C.topicable.url}):(0,e.jsx)(o.Fragment,{});default:return(0,e.jsx)(o.Fragment,{})}return(0,e.jsx)(o.Fragment,{})},ba=function(r){var s=r.topic,l=r.type,a=r.onUpdate,i=r.disabled,c=i===void 0?!1:i,C=r.currentState,S=r.onChange,f=r.folder,y=r.maxFiles,z=r.clearListAfterUpload,d=(0,o.useCallback)(function(O){return O.file.status==="done"?a&&a(O):S&&S(O)},[a,S]),g=u()(u()({},C),{},{topicable_type:l,active:C.active?1:0,preview:C.preview?1:0,can_skip:C.can_skip?1:0});return g.introduction||g==null||delete g.introduction,g.description||g==null||delete g.description,g.summary||g==null||delete g.summary,g.json||g==null||delete g.json,(0,e.jsxs)(o.Fragment,{children:[(0,e.jsx)(be.Z,{children:(0,e.jsx)(jt.Z,{folder:f,onChange:d,name:"value",url:s.isNew?"/api/admin/topics":"/api/admin/topics/".concat(s.id,"?_method=PUT"),accept:va.acceptedTypes[l],data:ha(g),maxFiles:y,clearListAfterUpload:z,children:(0,e.jsxs)(j.ZP,{disabled:c,icon:(0,e.jsx)(ca.Z,{}),children:["Click to upload ",l]})})}),(0,e.jsx)(be.Z,{children:(0,e.jsxs)("div",{style:{padding:"0 12px"},children:[s.topicable_type===m.oz.Video&&(0,e.jsx)(ja,{topic:s}),(0,e.jsx)(xa,{type:l,topic:C})]})})]})},Ma=ba,wn=t(82061),Ea=t(69753),qt=t(2487),Pa=function(r){var s=r.topicId,l=r.folder,a=(0,o.useState)(),i=x()(a,2),c=i[0],C=i[1],S=(0,o.useRef)(),f=(0,o.useCallback)(function(){S.current&&S.current.abort(),S.current=new AbortController,(0,P.Jb)(s,{signal:S.current.signal}).then(function(d){d&&d.success&&C(d.data)})},[s]),y=(0,o.useCallback)(function(d){d&&d.success&&(0,P.Jb)(s).then(function(g){g&&g.success&&C(g.data)})},[]),z=(0,o.useCallback)(function(d){(0,P.fg)(s,d).then(function(g){g.success&&f()})},[s]);return(0,o.useEffect)(function(){f()},[s]),(0,e.jsx)(qt.Z,{size:"small",itemLayout:"horizontal",dataSource:c,header:(0,e.jsx)(jt.Z,{folder:l,url:"/api/admin/topics/".concat(s,"/resources"),name:"resource",onChange:function(g){if(g.file.status==="done"){var O;(O=g.file.response)!==null&&O!==void 0&&O.success&&y(g.file.response)}}}),renderItem:function(g){return(0,e.jsx)(qt.Z.Item,{actions:[(0,e.jsx)(j.ZP,{type:"default",danger:!0,icon:(0,e.jsx)(wn.Z,{}),size:"small",onClick:function(){return z(g.id)}},"delete")],children:(0,e.jsx)(qt.Z.Item.Meta,{avatar:(0,e.jsx)("a",{href:g.url,target:"_blank",rel:"noreferrer",children:(0,e.jsx)(j.ZP,{type:"default",icon:(0,e.jsx)(Ea.Z,{}),size:"small"})}),description:(0,e.jsx)(o.Fragment,{children:(0,e.jsx)(j.ZP,{type:"text",size:"small",children:g.name})})})})}})},Ca=Pa,ya=t(75175),Ta=t(9649),Sa=function(r){var s=r.value,l=r.onChange,a=(0,o.useState)([]),i=x()(a,2),c=i[0],C=i[1],S=(0,o.useState)(!1),f=x()(S,2),y=f[0],z=f[1],d=(0,o.useState)(),g=x()(d,2),O=g[0],X=g[1],I=(0,o.useState)(),Y=x()(I,2),de=Y[0],ie=Y[1],Re=(0,o.useRef)(),Ce=(0,o.useCallback)(function(Ke){z(!0),Re.current&&Re.current.abort(),Re.current=new AbortController,(0,Ta.JZ)({search:Ke,pageSize:0},{signal:Re.current.signal}).then(function(Be){if(Be.success)return Array.isArray(Be.data.data)&&C(Be.data.data);z(!1)}).catch(function(){return z(!1)})},[]),Se=(0,o.useCallback)(function(Ke){Ce(Ke)},[Ce]);return(0,o.useEffect)(function(){Ce()},[s]),(0,o.useEffect)(function(){X(c.map(function(Ke){return Ke.scos.filter(function(Be){return Be.id===s})}).flat()[0])},[c]),(0,e.jsxs)(o.Fragment,{children:[de&&(0,e.jsx)(Xt.Z,{width:"80vw",bodyStyle:{height:"70vh"},visible:!0,onOk:function(){return ie(void 0)},onCancel:function(){return ie(void 0)},children:(0,e.jsx)(ya.Z,{uuid:de})}),(0,e.jsxs)(Lt.Z,{children:[(0,e.jsx)(yt.default,{allowClear:!0,style:{width:"100%",minWidth:"300px"},value:O?"".concat(O==null?void 0:O.id,": ").concat(O==null?void 0:O.title):void 0,onChange:function(Be){return l&&l(Be&&Be.split(":")[0])},showSearch:!0,onSearch:Se,placeholder:(0,e.jsx)(n.FormattedMessage,{id:"select_scorm_package"}),optionFilterProp:"children",filterOption:function(Be,ot){if(ot&&ot.children){var pt;return(ot==null||(pt=ot.children)===null||pt===void 0?void 0:pt.toString().toLowerCase().indexOf(Be.toLowerCase()))>=0}return!0},notFoundContent:y?(0,e.jsx)(Pe.Z,{size:"small"}):null,children:c.map(function(Ke){return(0,e.jsx)(yt.default.OptGroup,{label:"".concat(Ke.id,": ").concat(Ke.version),children:(0,e.jsx)(o.Fragment,{children:Ke.scos.map(function(Be){return(0,e.jsx)(yt.default.Option,{value:"".concat(Be.id,": ").concat(Be.title),children:Be.title},Be.id)})})},Ke.id)})}),O&&(0,e.jsx)(j.ZP,{onClick:function(){ie(O==null?void 0:O.uuid)},children:(0,e.jsx)(n.FormattedMessage,{id:"preview"})},s)]})]})},Aa=Sa,Oa=function(r){var s=r.value,l=r.onChange;return(0,e.jsxs)(Lt.Z,{size:"large",align:"start",children:[(0,e.jsx)(Aa,{value:s,onChange:function(i){return l&&l(Number(i))}}),(0,e.jsx)(j.ZP,{onClick:function(){return l&&l(void 0)},children:(0,e.jsx)(n.FormattedMessage,{id:"clear_selection"})})]})},Bn=Oa,en=t(4828),tn=t(49354),nn=t(35102),rn=t(45699),an=t(35326),sn=t(67337),on=t(68432),ln=t(15360),un=t(43973),dn=t(57619),Da=t(11475),Ia=t(38751),Fa=t(24739),$t=t(31199),Za=t(89652),La=function(r){var s=r.topicable,l=r.onAdded,a=r.onRemoved,i=r.onEdited,c=r.onChange,C=(0,n.useIntl)();return(0,e.jsxs)(o.Fragment,{children:[(0,e.jsx)(Ie.ZP,{initialValues:{max_attempts:s?s.max_attempts:void 0,max_execution_time:s?s.max_execution_time:void 0,min_pass_score:s?s.min_pass_score:void 0},onValuesChange:function(f){var y=Object.keys(f)[0];y&&c(y,f[y])},submitter:!1,children:(0,e.jsxs)(Fa.UW,{children:[(0,e.jsx)($t.Z,{name:"max_attempts",label:(0,e.jsx)(n.FormattedMessage,{id:"max_attempts"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"max_attempts"}),placeholder:C.formatMessage({id:"max_attempts",defaultMessage:"max_attempts"})}),(0,e.jsx)($t.Z,{name:"max_execution_time",label:(0,e.jsx)(n.FormattedMessage,{id:"max_execution_time"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"max_execution_time_tooltip"}),placeholder:C.formatMessage({id:"max_execution_time",defaultMessage:"max_execution_time"})}),(0,e.jsx)($t.Z,{name:"min_pass_score",max:100,label:(0,e.jsx)(n.FormattedMessage,{id:"min_pass_score"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"min_pass_score_tooltip"}),placeholder:C.formatMessage({id:"min_pass_score",defaultMessage:"min_pass_score"})})]})}),(0,e.jsx)(Kt.Z,{}),s?(0,e.jsx)(Ia.i,{questions:s.questions,quizId:s.id,onAdded:l,onEdited:i,onRemoved:a}):(0,e.jsx)(Za.default,{children:(0,e.jsx)(n.FormattedMessage,{id:"pressSaveToCreateQuestions",defaultMessage:"Create this Topic before adding questions"})})]})},Ra=La,zt=t(44167),Ua=function(r){var s,l=r.onChange,a=r.topicable,i=(0,o.useCallback)(function(c){var C=Object.keys(c)[0];C&&l(c[C])},[]);return(0,e.jsx)(o.Fragment,{children:(0,e.jsx)(Ie.ZP,{initialValues:{notify_users:(s=a==null?void 0:a.notify_users)!==null&&s!==void 0?s:[]},onValuesChange:i,submitter:!1,children:(0,e.jsx)(Ie.ZP.Item,{name:"notify_users",label:(0,e.jsx)(n.FormattedMessage,{id:"notify_users",defaultMessage:"Users to notify"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"notify_users_tooltip",defaultMessage:"Indicate which users should be notified about project upload"}),children:(0,e.jsx)(zt.Z,{multiple:!0})})})})},wa=Ua,Wn=function(r){if(r)switch(r){case"ScormSco":return(0,e.jsx)(en.Z,{});case"PDF":return(0,e.jsx)(tn.Z,{});case"Audio":return(0,e.jsx)(nn.Z,{});case"Image":return(0,e.jsx)(rn.Z,{});case"OEmbed":return(0,e.jsx)(an.Z,{});case"H5P":return(0,e.jsx)(sn.Z,{});case"Video":return(0,e.jsx)(on.Z,{});case"RichText":return(0,e.jsx)(ln.Z,{});case"Project":return(0,e.jsx)(un.Z,{});case"GiftQuiz":return(0,e.jsx)(dn.Z,{})}return(0,e.jsx)(Da.Z,{})},Kn=function(r){return[m.oz.GiftQuiz,m.oz.Project,m.oz.GiftQuiz].includes(r)},Ba=function(){var r,s,l,a=(0,o.useContext)(oe._y),i=a.state,c=a.currentEditMode,C=a.updateTopic,S=a.deleteTopic,f=a.onTopicUploaded,y=a.cloneTopic,z=a.getLessons,d=c&&c.mode==="topic"&&c.value?c.value:{},g=(0,o.useState)(!1),O=x()(g,2),X=O[0],I=O[1],Y=(0,o.useState)(u()(u()({},d),{},{value:d==null||(r=d.topicable)===null||r===void 0?void 0:r.value})),de=x()(Y,2),ie=de[0],Re=de[1],Ce=ie.topicable_type,Se=(0,o.useState)(ie.order),Ke=x()(Se,1),Be=Ke[0],ot=(0,o.useState)(!1),pt=x()(ot,2),tt=pt[0],Fe=pt[1],ve=(0,o.useState)(d),ye=x()(ve,2),ee=ye[0],Ge=ye[1];(0,o.useEffect)(function(){Ge(d)},[d]),(0,o.useEffect)(function(){Re(function(Ne){var he;return u()(u()(u()({},Ne),d),{},{value:Ce===(d==null?void 0:d.topicable_type)?d==null||(he=d.topicable)===null||he===void 0?void 0:he.value:""})}),d!=null&&d.isNew&&I(!Kn(d.topicable_type))},[Ce,d]),(0,o.useEffect)(function(){var Ne,he;if(!((ee==null?void 0:ee.topicable_type)!==m.oz.Video||!((Ne=ee.json)!==null&&Ne!==void 0&&Ne.ffmpeg.state)||((he=ee.json)===null||he===void 0?void 0:he.ffmpeg.state)==="finished")){var Ye=function(){var He=A()(v()().mark(function at(){var ge;return v()().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:if(!d.id){ze.next=5;break}return ze.next=3,(0,P.BN)(d.id);case 3:ge=ze.sent,ge.success&&Ge(ge.data);case 5:case"end":return ze.stop()}},at)}));return function(){return He.apply(this,arguments)}}(),mt=window.setInterval(Ye,5e3);return function(){window.clearInterval(mt)}}},[ee==null?void 0:ee.topicable_type,(s=ee.json)===null||s===void 0||(s=s.ffmpeg)===null||s===void 0?void 0:s.state]);var Ze=(0,o.useCallback)(function(Ne,he){Re(function(Ye){return u()(u()({},Ye),{},_()({},Ne,he))}),I(!1)},[d]),qe=(0,o.useCallback)(function(Ne){Re(function(he){return u()(u()({},he),Ne)})},[d]),Mt=(0,o.useCallback)(function(Ne){C&&ie.id&&(Fe(!0),C(ie.id,Ne).then(function(){return Fe(!1)}).catch(function(){Fe(!1)}))},[ie,C,d]),nt=(0,o.useCallback)(function(){var Ne=u()(u()({},ie),{},{active:ie.active?1:0,preview:ie.preview?1:0,can_skip:ie.can_skip?1:0,order:Be,json:ie.json?JSON.stringify(ie.json):null});Kn(d.topicable_type)&&!Ne.value&&(Ne.value="theProject");var he=ut(Ne);Mt(he)},[ie,Mt,Be]),gt=(0,o.useCallback)(function(){return d!=null&&d.isNew||Fe(!0),S&&ie.id&&S(ie.id)},[ie,S,d]),dt=(0,o.useCallback)(function(){return d.id&&y&&y(d.id)},[d,y]);return(0,e.jsx)(o.Fragment,{children:(0,e.jsxs)(be.Z,{gutter:16,style:{height:"100%"},children:[(0,e.jsxs)(fe.Z,{span:24-8,style:{marginBottom:"46px"},children:[(0,e.jsxs)(Zn.Z,{children:[d&&Wn(Yt(d))," ",(d==null?void 0:d.topicable_type)&&(d==null?void 0:d.topicable_type.split("\\").pop())," ",(0,e.jsx)(n.FormattedMessage,{id:"type"})]}),!Ce&&(0,e.jsx)(Te.Z,{message:(0,e.jsx)(n.FormattedMessage,{id:"select_type_topic"}),type:"info"}),Ce&&Ce===(m.oz===null||m.oz===void 0?void 0:m.oz.RichText)&&(0,e.jsx)(da,{directory:"course/".concat(i==null?void 0:i.id,"/lesson/").concat(d==null?void 0:d.lesson_id,"/topic/").concat(d==null?void 0:d.id,"/wysiwyg"),text:(d==null?void 0:d.topicable_type)===(m.oz===null||m.oz===void 0?void 0:m.oz.RichText)&&(d==null||(l=d.topicable)===null||l===void 0?void 0:l.value)||"",onChange:function(he){return Ze("value",he)}}),d&&Ce&&(Ce===m.oz.Video||Ce===m.oz.Audio||Ce===m.oz.Image||Ce===m.oz.PDF)&&(0,e.jsx)(Ma,{folder:"course/".concat(i==null?void 0:i.id),type:Ce,topic:ee,currentState:ie,onChange:function(he){Fe(!0),he.file.status==="removed"&&Fe(!1)},onUpdate:function(he){var Ye,mt,He,at;d.id&&f&&f(d.id,he),d.topicable_type===m.oz.Video&&setTimeout(function(){z&&z()},5e3),Re(u()(u()({},ie),{},{id:he==null||(Ye=he.file)===null||Ye===void 0||(Ye=Ye.response)===null||Ye===void 0||(Ye=Ye.data)===null||Ye===void 0?void 0:Ye.id,order:(mt=he.file.response.data)===null||mt===void 0?void 0:mt.order,value:he==null||(He=he.file)===null||He===void 0||(He=He.response.data)===null||He===void 0||(He=He.topicable)===null||He===void 0?void 0:He.value,topicable:he==null||(at=he.file)===null||at===void 0||(at=at.response.data)===null||at===void 0?void 0:at.topicable})),I(!1),Fe(!1)},disabled:!1,maxFiles:1,clearListAfterUpload:!0}),Ce&&Ce===m.oz.OEmbed&&(0,e.jsx)(la,{text:ie.value,onChange:function(he){return Ze("value",he)}}),Ce&&Ce===m.oz.Project&&(0,e.jsx)(wa,{onChange:function(he){return Ze("notify_users",he)},topicable:d.topicable}),Ce&&Ce===m.oz.GiftQuiz&&(0,e.jsx)(Ra,{onChange:function(he,Ye){Ze(he,Ye)},topicable:ie.topicable,onAdded:z,onRemoved:z,onEdited:z}),Ce&&Ce===m.oz.H5P&&(0,e.jsx)(na,{id:ie.value,onChange:function(he){return Ze("value",he)}}),Ce&&Ce===m.oz.SCORM&&(0,e.jsx)(Bn,{value:Number(ie.value),onChange:function(he){return Ze("value",he)}}),(0,e.jsx)(be.Z,{justify:"center",className:"program__cta-footer",children:(0,e.jsx)(yn.Z,{offsetBottom:4,children:(0,e.jsxs)(Lt.Z,{size:"large",children:[(0,e.jsx)(Nt(),{loading:tt,children:(0,e.jsx)(n.FormattedMessage,{id:"cancel"})}),!d.isNew&&(0,e.jsx)(Nt(),{onClick:dt,loading:tt,children:(0,e.jsx)(n.FormattedMessage,{id:"clone"})}),(0,e.jsx)(Nt(),{type:"primary",onClick:nt,disabled:X,loading:tt,children:(0,e.jsx)(n.FormattedMessage,{id:"save"})}),(0,e.jsx)(Nt(),{danger:!0,onClick:gt,loading:tt,children:(0,e.jsx)(n.FormattedMessage,{id:"delete"})})]})})})]}),(0,e.jsx)(fe.Z,{span:8,children:(0,e.jsxs)("aside",{className:"program-sidebar program-sidebar--right",children:[(i==null?void 0:i.lessons)&&(0,e.jsx)(Jr,{courseId:Number(i==null?void 0:i.id),courseLessons:i==null?void 0:i.lessons,initialValues:ie,onValuesChange:function(he){return qe(he)}}),!ie.isNew&&(0,e.jsxs)(o.Fragment,{children:[(0,e.jsx)(Zn.Z,{children:(0,e.jsx)(n.FormattedMessage,{id:"file_resources"})}),(0,e.jsx)(Ca,{topicId:Number(d==null?void 0:d.id),folder:"course/".concat(i==null?void 0:i.id)})]})]})})]})})},Wa=Ba,Pt=t(57818),Nn=t(43458),Ka=t(13769),$n=t.n(Ka),Na=["initialValue","onCreate"],$a=o.forwardRef(function(M,r){var s=M.initialValue,l=M.onCreate,a=$n()(M,Na),i=(0,o.useState)(""),c=x()(i,2),C=c[0],S=c[1];return(0,e.jsxs)("div",u()(u()({className:"program-sidebar__list-item program-sidebar__list-item--lesson-new",ref:r},a),{},{children:[(0,e.jsx)(In.Z,{}),(0,e.jsx)(Rn.Z,{value:C,onChange:function(y){return S(y.target.value)},placeholder:s.title}),(0,e.jsx)("div",{children:(0,e.jsx)(ct.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"create"}),children:(0,e.jsx)(j.ZP,{disabled:!C,size:"small",className:"btn-create-lesson",type:"primary",icon:(0,e.jsx)(F.Z,{}),onClick:function(){return l(C)}})})})]}))}),za=t(16165),ka=function(){return(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23.01",height:"18.077",viewBox:"0 0 23.01 18.077",children:(0,e.jsxs)("g",{id:"Group_5","data-name":"Group 5",transform:"translate(-97.496 -306.965)",children:[(0,e.jsx)("path",{id:"Path_2","data-name":"Path 2",d:"M138.934,401.557s8.685.579,12.972-6.836-11.893-6.747-7.254-1.854,16.02-8.07,16.02-8.07",transform:"translate(-40.906 -77.037)",fill:"none",stroke:"#58c35d",strokeLinecap:"round",strokeWidth:"1"}),(0,e.jsx)("path",{id:"Path_3","data-name":"Path 3",d:"M115.761,306.465h5.332V311.8",transform:"translate(-1.087 1)",fill:"none",stroke:"#58c35d",strokeLinecap:"round",strokeWidth:"1"})]})})},zn=function(r){return(0,e.jsx)(za.Z,u()({component:ka},r))},cn=t(21987);function Ga(M,r){return mn.apply(this,arguments)}function mn(){return mn=A()(v()().mark(function M(r,s){return v()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/admin/recommender/course/".concat(r," "),u()({method:"GET",useCache:!1},s||{})));case 1:case"end":return a.stop()}},M)})),mn.apply(this,arguments)}function Va(M,r){return _n.apply(this,arguments)}function _n(){return _n=A()(v()().mark(function M(r,s){return v()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/admin/recommender/lesson/".concat(r,"/topic "),u()({method:"GET",useCache:!1},s||{})));case 1:case"end":return a.stop()}},M)})),_n.apply(this,arguments)}var Ha=function(r){var s=(0,o.useState)(),l=x()(s,2),a=l[0],i=l[1];return(0,o.useEffect)(function(){Ga(r).then(function(c){return c.success&&i(c.data)})},[r]),a},Qa=function(r){var s=(0,o.useState)(),l=x()(s,2),a=l[0],i=l[1];return(0,o.useEffect)(function(){Va(r).then(function(c){return c.success&&i(c.data)})},[r]),a},Ja=function(r){return r.includes("H5P")?"H5P":r},Xa=function(r){return(r==null?void 0:r.includes("."))&&(r==null?void 0:r.split(".").join(" "))},kn=function(r){return Math.min(Math.ceil(Math.abs(r)*100),100)},Ya=function(r){var s=r.recommendedData,l=r.createTopic;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(cn.Z,{className:"recommender__paragraph",children:[(0,e.jsx)(n.FormattedMessage,{id:"recommender.add_exercise"}),(0,e.jsx)("span",{className:"recommender__paragraph--span",children:"".concat(Xa(s==null?void 0:s.topic_type),",")}),(0,e.jsx)("br",{}),(0,e.jsx)(n.FormattedMessage,{id:"recommender.increase"}),(0,e.jsx)("span",{className:"recommender__paragraph--span",children:"".concat(kn(s.probability),"%.")})]}),(0,e.jsx)(j.ZP,{className:"recommender__button",type:"default",onClick:l,children:(0,e.jsx)(n.FormattedMessage,{id:"recommender.add_button"})})]})},qa=function(){return(0,e.jsx)(cn.Z,{className:"recommender__paragraph",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender.save_exercise"})})},es=t(56717),ts=t(55241),ns=function(){return(0,e.jsxs)("div",{className:"recommender__popover-wrapper",children:[(0,e.jsx)("h3",{className:"recommender__popover-title",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender_info.title"})}),(0,e.jsx)("strong",{className:"recommender__popover-text",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender_info.first_title"})}),(0,e.jsx)("p",{className:"recommender__popover-text",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender_info.first_text"})}),(0,e.jsx)("strong",{className:"recommender__popover-text",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender_info.second_title"})}),(0,e.jsx)("p",{className:"recommender__popover-text",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender_info.second_text"})})]})},Gn=function(){return(0,e.jsx)(ts.Z,{placement:"bottomLeft",content:(0,e.jsx)(ns,{}),trigger:"click",showArrow:!1,className:"recommender__popover",children:(0,e.jsx)(es.Z,{style:{color:"#2DAC34"}})})},rs=function(r){var s=r.courseId,l=r.lessonId,a=r.recommenderType,i=a===void 0?m.Zg.Exercise:a,c=(0,o.useContext)(oe._y),C=c.addNewTopic,S=Qa(l),f=(0,o.useCallback)(function(d,g){if(C){var O=C(d,g);n.history.push("/courses/list/".concat(s,"/program/?topic=").concat(O.id))}},[C]),y=function(g){switch(g){case m.Zg.Info:return(0,e.jsx)(qa,{});case m.Zg.Exercise:return S&&(0,e.jsx)(Ya,{createTopic:function(){return f(l,m.oz[Ja(S==null?void 0:S.topic_type)])},recommendedData:S});default:return(0,e.jsx)(n.FormattedMessage,{id:"recommender.no_recommendation"})}},z=i===m.Zg.Exercise&&!S;return(0,e.jsxs)("div",{className:"recommender",children:[(0,e.jsx)(zn,{style:{marginTop:"4px"}}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"recommender__title",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender.title"})}),z&&(0,e.jsx)(Pe.Z,{}),y(i)]}),(0,e.jsx)(Gn,{})]})},as=function(r){var s=r.courseId,l=Ha(s);return l&&l.probability&&l.probability>-.016?null:l?(0,e.jsxs)("div",{className:"recommender",children:[(0,e.jsx)(zn,{style:{marginTop:"4px"}}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"recommender__title",children:(0,e.jsx)(n.FormattedMessage,{id:"recommender.title"})}),(0,e.jsxs)(cn.Z,{className:"recommender__paragraph",children:[(0,e.jsx)(n.FormattedMessage,{id:"recommender.finish"}),(0,e.jsx)("strong",{children:"".concat(kn(l.probability),"%. ")}),(0,e.jsx)("br",{}),(0,e.jsx)(n.FormattedMessage,{id:"recommender.too_long"})]})]}),(0,e.jsx)(Gn,{})]}):(0,e.jsx)(e.Fragment,{})},ss=t(52745),Vn=t(59234),is=[{type:m.oz.RichText,icon:(0,e.jsx)(ln.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"RichText"})},{type:m.oz.OEmbed,icon:(0,e.jsx)(an.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"OEmbed"})},{type:m.oz.Audio,icon:(0,e.jsx)(nn.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"Audio"})},{type:m.oz.Video,icon:(0,e.jsx)(on.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"Video"})},{type:m.oz.H5P,icon:(0,e.jsx)(sn.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"H5P"})},{type:m.oz.Image,icon:(0,e.jsx)(rn.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"Image"})},{type:m.oz.PDF,icon:(0,e.jsx)(tn.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"PDF"})},{type:m.oz.SCORM,icon:(0,e.jsx)(en.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"SCORM"})},{type:m.oz.Project,icon:(0,e.jsx)(un.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"Project"})},{type:m.oz.GiftQuiz,icon:(0,e.jsx)(dn.Z,{}),title:(0,e.jsx)(n.FormattedMessage,{id:"Quiz"})}],os=function(r){var s=r.onSelected,l=r.positionsToHide,a=(0,o.useState)(!1),i=x()(a,2),c=i[0],C=i[1],S=(0,n.useModel)("@@initialState"),f=S.initialState,y=(0,o.useCallback)(function(g){C(!1),s(g)},[]),z=(0,o.useCallback)((0,Nn.a)(f==null?void 0:f.packages),[f==null?void 0:f.packages]),d=(0,o.useCallback)(function(g){var O,X=Object.keys(m.oz).filter(function(Y){return m.oz[Y]==g}).pop(),I=X&&(f==null||(O=f.config)===null||O===void 0||(O=O.filter(function(Y){return Y.key===(0,Vn.Wg)(X)})[0])===null||O===void 0?void 0:O.data);if(I)return!0;switch(g){case m.oz.GiftQuiz:return!z(Pt.Z.TopicTypeGift);case m.oz.SCORM:return!z(Pt.Z.Scorm);case m.oz.Project:return!z(Pt.Z.TopicTypeProject);default:return!z(Pt.Z.TopicTypes)}},[f]);return(0,e.jsxs)("div",{className:`topic-types-selector topic-types-selector__recommender-wrapper
       `.concat(c?"topic-types-selector--visible":""),children:[(0,e.jsx)(j.ZP,{type:"text",size:"small",onClick:function(){return C(function(O){return!O})},className:"topic-types-selector__recommender--add-btn",icon:c?(0,e.jsx)(ss.Z,{}):(0,e.jsx)(Jt.Z,{}),children:(0,e.jsx)(n.FormattedMessage,{id:"recommender.add_new_exercise"})}),(0,e.jsx)("div",{className:"topic-types-selector__recommender".concat(`
          `,c?"topic-types-selector__recommender--active":""),children:is.map(function(g){return!(l!=null&&l.includes(g.type))&&!d(g.type)&&(0,e.jsx)(ct.Z,{title:g.title,children:(0,e.jsx)(j.ZP,{block:!0,onClick:function(){return y(g.type)},icon:g.icon})},g.type)})})]})},ls=t(86864),us=function(r){var s=r.onSelected,l=r.onNewLesson,a=r.positionsToHide,i=r.depth,c=i===void 0?0:i,C=(0,o.useState)(!1),S=x()(C,2),f=S[0],y=S[1],z=(0,n.useModel)("@@initialState"),d=z.initialState,g=(0,n.useIntl)(),O=(0,o.useCallback)(function(I){y(!1),s(I)},[]),X=(0,o.useCallback)(function(I){var Y,de,ie,Re,Ce,Se=Object.keys(m.oz).filter(function(Be){return m.oz[Be]==I}).pop(),Ke=Se&&(d==null||(Y=d.config)===null||Y===void 0||(Y=Y.filter(function(Be){return Be.key===(0,Vn.Wg)(Se)})[0])===null||Y===void 0?void 0:Y.data);if(Ke)return!0;switch(I){case m.oz.GiftQuiz:return!(d!=null&&d.packages&&d!==null&&d!==void 0&&(de=d.packages)!==null&&de!==void 0&&de[Pt.Z.TopicTypeGift]);case m.oz.SCORM:return!(d!=null&&d.packages&&d!==null&&d!==void 0&&(ie=d.packages)!==null&&ie!==void 0&&ie[Pt.Z.Scorm]);case m.oz.Project:return!(d!=null&&d.packages&&d!==null&&d!==void 0&&(Re=d.packages)!==null&&Re!==void 0&&Re[Pt.Z.TopicTypeProject]);default:return!(d!=null&&d.packages&&d!==null&&d!==void 0&&(Ce=d.packages)!==null&&Ce!==void 0&&Ce[Pt.Z.TopicTypes])}},[d]);return(0,e.jsxs)("div",{className:"topic-types-selector ".concat(f?"topic-types-selector--visible":""),children:[(0,e.jsx)(Lt.Z,{children:(0,e.jsx)(ct.Z,{placement:"top",title:(0,e.jsx)(n.FormattedMessage,{id:"add_new_topic"}),children:(0,e.jsx)(j.ZP,{type:"primary",size:"small",onClick:function(){return y(function(Y){return!Y})},icon:(0,e.jsx)(Jt.Z,{})})})}),(0,e.jsxs)("div",{className:"topic-types-selector__list ".concat(f?"topic-types-selector__list--visible":""),children:[!(a!=null&&a.includes("lesson"))&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ct.Z,{placement:"right",title:g.messages["Lesson_level-".concat(c)]?(0,e.jsx)(n.FormattedMessage,{id:"Lesson_level-".concat(c)}):(0,e.jsx)(n.FormattedMessage,{id:"Lesson",defaultMessage:"Lesson"}),children:(0,e.jsx)(j.ZP,{block:!0,onClick:function(){y(!1),l()},icon:(0,e.jsx)(ls.Z,{})})}),(0,e.jsx)(Kt.Z,{})]}),!(a!=null&&a.includes(m.oz.RichText))&&!X(m.oz.RichText)&&(0,e.jsx)(ct.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"RichText"}),children:(0,e.jsx)(j.ZP,{block:!0,onClick:function(){return O(m.oz.RichText)},icon:(0,e.jsx)(ln.Z,{})})}),!(a!=null&&a.includes(m.oz.OEmbed))&&!X(m.oz.OEmbed)&&(0,e.jsx)(ct.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"OEmbed"}),children:(0,e.jsx)(j.ZP,{block:!0,onClick:function(){return O(m.oz.OEmbed)},icon:(0,e.jsx)(an.Z,{})})}),!(a!=null&&a.includes(m.oz.Audio))&&!X(m.oz.Audio)&&(0,e.jsx)(ct.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"Audio"}),children:(0,e.jsx)(j.ZP,{block:!0,onClick:function(){return O(m.oz.Audio)},icon:(0,e.jsx)(nn.Z,{})})}),!(a!=null&&a.includes(m.oz.Video))&&!X(m.oz.Video)&&(0,e.jsx)(ct.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"Video"}),children:(0,e.jsx)(j.ZP,{block:!0,onClick:function(){return O(m.oz.Video)},icon:(0,e.jsx)(on.Z,{})})}),!(a!=null&&a.includes(m.oz.H5P))&&!X(m.oz.H5P)&&(0,e.jsx)(ct.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"H5P"}),children:(0,e.jsx)(j.ZP,{block:!0,onClick:function(){return O(m.oz.H5P)},icon:(0,e.jsx)(sn.Z,{})})}),!(a!=null&&a.includes(m.oz.Image))&&!X(m.oz.Image)&&(0,e.jsx)(ct.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"Image"}),children:(0,e.jsx)(j.ZP,{block:!0,onClick:function(){return O(m.oz.Image)},icon:(0,e.jsx)(rn.Z,{})})}),!(a!=null&&a.includes(m.oz.PDF))&&!X(m.oz.PDF)&&(0,e.jsx)(ct.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"PDF"}),children:(0,e.jsx)(j.ZP,{block:!0,onClick:function(){return O(m.oz.PDF)},icon:(0,e.jsx)(tn.Z,{})})}),!(a!=null&&a.includes(m.oz.SCORM))&&!X(m.oz.SCORM)&&(0,e.jsx)(ct.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"SCORM"}),children:(0,e.jsx)(j.ZP,{block:!0,onClick:function(){return O(m.oz.SCORM)},icon:(0,e.jsx)(en.Z,{})})}),!(a!=null&&a.includes(m.oz.Project))&&!X(m.oz.Project)&&(0,e.jsx)(ct.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"Project"}),children:(0,e.jsx)(j.ZP,{block:!0,onClick:function(){return O(m.oz.Project)},icon:(0,e.jsx)(un.Z,{})})}),!(a!=null&&a.includes(m.oz.GiftQuiz))&&!X(m.oz.GiftQuiz)&&(0,e.jsx)(ct.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:"Quiz"}),children:(0,e.jsx)(j.ZP,{block:!0,onClick:function(){return O(m.oz.GiftQuiz)},icon:(0,e.jsx)(dn.Z,{})})})]})]})},ds=t(70227),vt=function(M){return M.New="new",M.Lesson="lesson",M.Topic="topic",M}({}),Hn=function(r,s){return r.map(function(l){return u()(u()({},l),{},{id:"topic-".concat(l.id,"-").concat(s)})})},cs=function(r,s){return r.map(function(l){return u()(u()({},l),{},{id:l.isNew?"new-".concat(l.id,"-").concat(s):"lesson-".concat(l.id,"-").concat(s)})})},Qn=function(r,s){var l,a;return u()(u()({},r),{},{id:r.isNew?"new-".concat(r.id,"-").concat(s):"lesson-".concat(r.id,"-").concat(s),lessons:cs((l=r==null?void 0:r.lessons)!==null&&l!==void 0?l:[],s+1),topics:Hn((a=r==null?void 0:r.topics)!==null&&a!==void 0?a:[],s+1)})},ms=function M(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return r.reduce(function(l,a){var i;return[].concat(p()(l),p()(M((i=a==null?void 0:a.lessons)!==null&&i!==void 0?i:[],s+1)),[Qn(a,s)])},[])},_s=function M(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return r.reduce(function(l,a){var i,c;return[].concat(p()(l),p()(M((i=a==null?void 0:a.lessons)!==null&&i!==void 0?i:[],s+1)),p()(Hn((c=a==null?void 0:a.topics)!==null&&c!==void 0?c:[],s)))},[])},ps=function(r){return r.map(function(s){var l,a,i=Qn(s,0),c=[].concat(p()((l=i.lessons)!==null&&l!==void 0?l:[]),p()((a=i.topics)!==null&&a!==void 0?a:[])).map(function(C){var S=C.id;return S});return{id:i.id,children:c,hasChildren:c.length>0,isExpanded:!0,data:i}})},fs=function(r,s){return r.reduce(function(l,a){var i,c,C=[];if("lessons"in a||"topics"in a){var S,f;C=[].concat(p()((S=a.lessons)!==null&&S!==void 0?S:[]),p()((f=a.topics)!==null&&f!==void 0?f:[])).map(function(z){var d=z.id;return d})}var y=(i=s==null||(c=s["".concat(a.id)])===null||c===void 0?void 0:c.isExpanded)!==null&&i!==void 0?i:!0;return u()(u()({},l),{},_()({},"".concat(a.id),{id:a.id,children:C,hasChildren:C.length>0,isExpanded:y,data:a}))},{})},pn=function(r,s,l){var a=p()(r),i=s%a.length,c=l%a.length,C=a.splice(i,1),S=x()(C,1),f=S[0];return a.splice(c,0,f),a},kt=function(r,s,l){var a=p()(r),i=a.length===1||s===a.length?s:s%a.length;return a.splice(i,0,l),a},Tt=function(r){return r.map(function(s,l){var a=s.toString().split("-"),i=x()(a,2),c=i[1];return[+c,l]})},St=function(){var M=A()(v()().mark(function r(s,l,a){var i,c;return v()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return i=void 0,s(function(f){return i=f,ds.d.apply(void 0,[f].concat(p()(l)))}),S.prev=2,S.next=5,a();case 5:c=S.sent,T()(c)==="object"&&c!==null&&"success"in c&&typeof c.success=="boolean"&&!c.success&&i&&s(i),S.next=12;break;case 9:S.prev=9,S.t0=S.catch(2),i&&s(i);case 12:case"end":return S.stop()}},r,null,[[2,9]])}));return function(s,l,a){return M.apply(this,arguments)}}(),vs=function(r,s){return Object.values(r.items).find(function(l){var a=l.children;return a.includes(s)})},Jn=function(r,s,l){var a,i;return(a=(i=r.items)===null||i===void 0||(i=i[s])===null||i===void 0||(i=i.children)===null||i===void 0?void 0:i.indexOf(l))!==null&&a!==void 0?a:-1},hs=function(r){var s=r.onNewLesson,l=(0,o.useContext)(oe._y),a=l.state,i=l.currentEditMode,c=l.updateLesson,C=l.addNewTopic,S=l.addNewLesson,f=l.getLessons,y=a==null?void 0:a.id,z=(0,o.useMemo)(function(){var Fe;return ps((Fe=a==null?void 0:a.lessons)!==null&&Fe!==void 0?Fe:[])},[a==null?void 0:a.lessons]),d=(0,o.useMemo)(function(){var Fe,ve;return[].concat(p()(ms((Fe=a==null?void 0:a.lessons)!==null&&Fe!==void 0?Fe:[])),p()(_s((ve=a==null?void 0:a.lessons)!==null&&ve!==void 0?ve:[])))},[a==null?void 0:a.lessons]),g=(0,o.useState)({rootId:0,items:{}}),O=x()(g,2),X=O[0],I=O[1],Y=(0,n.useModel)("@@initialState"),de=Y.initialState,ie=(0,n.useIntl)(),Re=(0,o.useCallback)((0,Nn.a)(de==null?void 0:de.packages),[de==null?void 0:de.packages]);(0,o.useEffect)(function(){I(function(Fe){var ve={children:z.map(function(ee){var Ge=ee.id;return Ge}),id:"root",data:z,isExpanded:!0,hasChildren:z.length>0},ye=fs(d,Fe.items);return{rootId:ve.id,items:u()(u()({},ye),{},_()({},ve.id,ve))}})},[d]);var Ce=(0,o.useCallback)(function(Fe,ve){if(C){var ye=C(Fe,ve);n.history.push("/courses/list/".concat(y,"/program/?topic=").concat(ye.id))}},[C]),Se=(0,o.useMemo)(function(){var Fe;return((Fe=de==null?void 0:de.config)!==null&&Fe!==void 0?Fe:[]).reduce(function(ve,ye){return ye.key==="maxLessonsNestingInProgram"?u()(u()({},ve),{},{lesson:ye.data}):ye.key==="minTopicNestingInProgram"?u()(u()({},ve),{},{topic:ye.data}):ve},{})},[de==null?void 0:de.config]),Ke=(0,o.useCallback)(function(Fe){var ve,ye,ee=[],Ge=(ve=Se==null?void 0:Se.lesson)!==null&&ve!==void 0?ve:.5,Ze=(ye=Se==null?void 0:Se.topic)!==null&&ye!==void 0?ye:.5;return Number.isInteger(Ge)&&Fe>Ge&&ee.push("lesson"),Number.isInteger(Ze)&&Fe<Ze&&Object.values(m.oz).forEach(function(qe){return ee.push(qe)}),ee},[Se]),Be=(0,o.useCallback)(function(Fe){var ve,ye,ee=Fe.item,Ge=Fe.depth,Ze=Fe.provided,qe=Fe.onExpand,Mt=Fe.onCollapse,nt=ee.id.toString().split("-"),gt=x()(nt,2),dt=gt[0],Ne=gt[1],he=Number(Ne),Ye=function(He,at){var ge,De=d.find(function(et){return et.id.includes(String(He))}),ze=De==null||(ge=De.topics)===null||ge===void 0?void 0:ge[De.topics.length-1];return(ze==null?void 0:ze.id)===at};return dt==="new"&&ee.data.isNew?(0,e.jsx)($a,u()(u()(u()({},Ze.draggableProps),Ze.dragHandleProps),{},{ref:Ze.innerRef,initialValue:ee.data,onCreate:function(He){var at=ut(u()(u()({},ee.data),{},{parent_lesson_id:ee.data.parent_id,title:He,active:ee.data.active?1:0}));c&&c(he,at)}})):dt==="lesson"?(0,e.jsxs)("div",u()(u()(u()({},Ze.draggableProps),Ze.dragHandleProps),{},{ref:Ze.innerRef,className:"program-sidebar__list-item program-sidebar__list-item--lesson ".concat((i==null?void 0:i.mode)==="lesson"&&i.id===he?"program-sidebar__list-item--active":""),children:[(0,e.jsxs)("div",{className:"program-sidebar__text-wrap",children:[(0,e.jsx)("button",{className:"program-sidebar__collapse",onClick:function(){return ee.isExpanded?Mt(ee.id):qe(ee.id)},children:ee.isExpanded?(0,e.jsx)(zr.Z,{}):(0,e.jsx)(In.Z,{})}),(0,e.jsx)(ct.Z,{placement:"top",title:ee.data.title,children:(0,e.jsx)(n.NavLink,{to:"/courses/list/".concat(y,"/program/?").concat(dt,"=").concat(he),className:"program-sidebar__link",children:(0,e.jsx)("span",{className:"program-sidebar__title",children:ee.data.title})})})]}),(0,e.jsx)(us,{onNewLesson:function(){S&&S(he)},onSelected:function(He){return Ce(he,He)},positionsToHide:Ke(Ge+1),depth:Ge})]})):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.NavLink,u()(u()(u()({className:"program-sidebar__link program-sidebar__list-item program-sidebar__list-item--topic ".concat((i==null?void 0:i.mode)==="topic"&&i.id===he?"program-sidebar__list-item--active":""),to:"/courses/list/".concat(y,"/program/?").concat(dt,"=").concat(he)},Ze.draggableProps),Ze.dragHandleProps),{},{ref:Ze.innerRef,children:[(0,e.jsx)(ct.Z,{placement:"right",title:(0,e.jsx)(n.FormattedMessage,{id:Yt(ee.data)}),children:Wn(Yt(ee.data))}),(0,e.jsx)("span",{className:"title",children:ee.data.title})]})),Re(Pt.Z.Recommender)&&y&&(i==null?void 0:i.mode)==="topic"&&(i==null||(ve=i.value)===null||ve===void 0?void 0:ve.lesson_id)&&(i==null||(ye=i.value)===null||ye===void 0?void 0:ye.lesson_id)===ee.data.lesson_id&&Ye(i.value.lesson_id,ee.data.id)&&(0,e.jsxs)(e.Fragment,{children:[d.length>5&&(0,e.jsx)(as,{courseId:y}),(0,e.jsx)(rs,{courseId:y,lessonId:i.value.lesson_id,recommenderType:i.value.isNew?m.Zg.Info:m.Zg.Exercise}),(0,e.jsx)(os,{onSelected:function(He){return Ce(ee.data.lesson_id,He)},positionsToHide:Ke(Ge+1)})]})]})},[y,i]),ot=(0,o.useCallback)(function(Fe){return I(function(ve){return(0,Fn.U)(ve,Fe,{isExpanded:!0})})},[]),pt=(0,o.useCallback)(function(Fe){return I(function(ve){return(0,Fn.U)(ve,Fe,{isExpanded:!1})})},[]),tt=(0,o.useCallback)(function(){var Fe=A()(v()().mark(function ve(ye,ee){var Ge,Ze,qe,Mt,nt,gt,dt,Ne,he,Ye,mt,He,at,ge,De,ze,et,Et,ft,Gt,rt,Dt,Yn,qn,er,tr,nr,rr,ar,Rt,sr,ir,or,lr,ur,dr,cr,Vt,mr,_r,pr,fr,vr,hr,gr,jr,xr,bn,Mn,Ut,br,En,Pn,Mr,wt,It,Er,Pr,Cr,yr,Tr,Sr,Ar,Or,Cn,Ht,Bt,Ft,Dr,Ir,Fr,Zr,Lr,Rr,Ur;return v()().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:if(!(!ee||!y)){je.next=2;break}return je.abrupt("return");case 2:if(Ge=X.items[ye.parentId].children,Ze=Ge[ye.index].toString(),qe=Ze.split("-"),Mt=x()(qe,2),nt=Mt[0],gt=Mt[1],dt=X.items[ee.parentId].children,Ne=Se==null?void 0:Se.lesson,he=Se==null?void 0:Se.topic,nt!==vt.New){je.next=11;break}return B.ZP.warning(ie.formatMessage({id:"new_lessons_cant_be_moved"})),je.abrupt("return");case 11:if(!ee.parentId.toString().includes("topic")){je.next=63;break}if(at=Ge.filter(function(ht){return ht.toString().includes("topic")}),ge=vs(X,ee.parentId),De=Number((Ye=(mt=((He=ge==null?void 0:ge.id)!==null&&He!==void 0?He:"").toString().split("-"))===null||mt===void 0?void 0:mt[2])!==null&&Ye!==void 0?Ye:-2)+1,!(nt===vt.Lesson&&Ne!==void 0&&De>Ne)){je.next=18;break}return B.ZP.warning(ie.formatMessage({id:"max_lesson_nesting"},{max:Ne})),je.abrupt("return");case 18:if(!(nt===vt.Topic&&he!==void 0&&De<he)){je.next=21;break}return B.ZP.warning(ie.formatMessage({id:"min_topic_nesting"},{min:he})),je.abrupt("return");case 21:if(!((ge==null?void 0:ge.id)!==void 0&&ye.parentId===ge.id)){je.next=35;break}if(nt!==vt.Lesson){je.next=25;break}return B.ZP.warning(ie.formatMessage({id:"lessons_and_topics_cant_be_mixed"})),je.abrupt("return");case 25:if(nt!==vt.Topic){je.next=35;break}if(ze=Jn(X,ge.id,ee.parentId),!(ze<0)){je.next=29;break}return je.abrupt("return");case 29:return et=pn(at,ye.index,ze),Et=Tt(et),je.next=33,St(I,[ye,{parentId:ge.id,index:ze}],function(){return(0,P.DY)({class:"Topic",orders:Et,course_id:y})});case 33:return f==null||f(),je.abrupt("return");case 35:if(!((ge==null?void 0:ge.id)!==void 0&&ye.parentId!==ge.id)){je.next=62;break}if(ft=ge.children.filter(function(ht){return ht.toString().includes("lesson")}),Gt=ge.children.filter(function(ht){return ht.toString().includes("topic")}),nt!==vt.Lesson){je.next=50;break}return rt=ft.length,Dt=ge.id.toString().split("-"),Yn=x()(Dt,2),qn=Yn[1],er=X.items[Ze].data,tr={parent_lesson_id:ge.id==="root"?"":+qn,course_id:y,title:er.title,order:rt},nr=ut(tr),rr=kt(ft,rt,Ze),ar=Tt(rr),je.next=48,St(I,[ye,u()(u()({},ee),{},{index:rt})],function(){return(0,P.sI)(+gt,nr).then(function(){return(0,P.DY)({class:"Lesson",orders:ar,course_id:y})})});case 48:return f==null||f(),je.abrupt("return");case 50:if(nt!==vt.Topic){je.next=62;break}if(Rt=Jn(X,ge.id,ee.parentId)+1,!(Rt<1)){je.next=54;break}return je.abrupt("return");case 54:return sr=ge.id.toString().split("-"),ir=x()(sr,2),or=ir[1],lr={lesson_id:+or,order:Rt},ur=kt(Gt,Rt-ft.length,Ze),dr=Tt(ur),cr=ut(lr),je.next=61,St(I,[ye,{parentId:ge.id,index:Rt}],function(){return(0,P.Cn)(+gt,cr).then(function(){return(0,P.DY)({class:"Topic",orders:dr,course_id:y})})});case 61:f==null||f();case 62:return je.abrupt("return");case 63:if(!(ee.parentId==="root"&&nt===vt.Topic)){je.next=66;break}return B.ZP.warning(ie.formatMessage({id:"topic_cant_be_in_root"})),je.abrupt("return");case 66:if(!(ye.parentId===ee.parentId&&ee.index!==void 0)){je.next=93;break}if(Vt=Ge.filter(function(ht){return ht.toString().includes("lesson")}),mr=Ge.filter(function(ht){return ht.toString().includes("topic")}),nt!==vt.Lesson){je.next=81;break}if(_r=0,pr=Vt.length-1,!(ee.index<_r||ee.index>pr)){je.next=75;break}return B.ZP.warning(ie.formatMessage({id:"lessons_and_topics_cant_be_mixed"})),je.abrupt("return");case 75:return fr=pn(Vt,ye.index,ee.index),vr=Tt(fr),je.next=79,St(I,[ye,ee],function(){return(0,P.DY)({class:"Lesson",orders:vr,course_id:y})});case 79:return f==null||f(),je.abrupt("return");case 81:if(nt!==vt.Topic){je.next=93;break}if(hr=Vt.length,gr=Ge.length-1,!(ee.index<hr||ee.index>gr)){je.next=87;break}return B.ZP.warning(ie.formatMessage({id:"lessons_and_topics_cant_be_mixed"})),je.abrupt("return");case 87:return jr=pn(mr,ye.index,ee.index),xr=Tt(jr),je.next=91,St(I,[ye,ee],function(){return(0,P.DY)({class:"Topic",orders:xr,course_id:y})});case 91:return f==null||f(),je.abrupt("return");case 93:if(ye.parentId===ee.parentId){je.next=135;break}if(Ut=dt.filter(function(ht){return ht.toString().includes("lesson")}),br=dt.filter(function(ht){return ht.toString().includes("topic")}),En=Number((bn=(Mn=ee.parentId.toString().split("-"))===null||Mn===void 0?void 0:Mn[2])!==null&&bn!==void 0?bn:-2)+1,!(nt===vt.Lesson&&Ne!==void 0&&En>Ne)){je.next=100;break}return B.ZP.warning(ie.formatMessage({id:"max_lesson_nesting"},{max:Ne})),je.abrupt("return");case 100:if(!(nt===vt.Topic&&he!==void 0&&En<he)){je.next=103;break}return B.ZP.warning(ie.formatMessage({id:"min_topic_nesting"},{min:he})),je.abrupt("return");case 103:if(nt!==vt.Lesson){je.next=120;break}if(Mr=0,wt=Ut.length,It=(Pn=ee.index)!==null&&Pn!==void 0?Pn:wt,!(wt!==0&&It<Mr||wt!==0&&It>wt)){je.next=110;break}return B.ZP.warning(ie.formatMessage({id:"lessons_and_topics_cant_be_mixed"})),je.abrupt("return");case 110:return Er=ee.parentId.toString().split("-"),Pr=x()(Er,2),Cr=Pr[1],yr=X.items[Ze].data,Tr={parent_lesson_id:ee.parentId==="root"?"":+Cr,course_id:y,title:yr.title,order:It},Sr=ut(Tr),Ar=kt(Ut,It,Ze),Or=Tt(Ar),je.next=118,St(I,[ye,u()(u()({},ee),{},{index:It})],function(){return(0,P.sI)(+gt,Sr).then(function(){return(0,P.DY)({class:"Lesson",orders:Or,course_id:y})})});case 118:return f==null||f(),je.abrupt("return");case 120:if(nt!==vt.Topic){je.next=135;break}if(Ht=Ut.length,Bt=dt.length,Ft=(Cn=ee.index)!==null&&Cn!==void 0?Cn:Bt,!(Ht!==0&&Bt!==0&&Ft<Ht||Ht!==0&&Bt!==0&&Ft>Bt)){je.next=127;break}return B.ZP.warning(ie.formatMessage({id:"lessons_and_topics_cant_be_mixed"})),je.abrupt("return");case 127:return Dr=ee.parentId.toString().split("-"),Ir=x()(Dr,2),Fr=Ir[1],Zr={lesson_id:+Fr,order:Ft},Lr=kt(br,Ft-Ut.length,Ze),Rr=Tt(Lr),Ur=ut(Zr),je.next=134,St(I,[ye,u()(u()({},ee),{},{index:Ft})],function(){return(0,P.Cn)(+gt,Ur).then(function(){return(0,P.DY)({class:"Topic",orders:Rr,course_id:y})})});case 134:f==null||f();case 135:case"end":return je.stop()}},ve)}));return function(ve,ye){return Fe.apply(this,arguments)}}(),[ie,X,y,Se]);return(0,e.jsxs)("div",{style:{height:"100%"},children:[(0,e.jsx)(kr.Z,{offsetPerLevel:9,tree:X,onExpand:ot,onCollapse:pt,onDragEnd:tt,renderItem:Be,isDragEnabled:!0,isNestingEnabled:!0}),(0,e.jsx)(j.ZP,{onClick:s,type:"primary",className:"program-sidebar__add-btn",icon:(0,e.jsx)(Jt.Z,{}),children:(0,e.jsx)("span",{children:(0,e.jsx)(n.FormattedMessage,{id:"add_lesson"})})})]})},gs=function(){var r=(0,o.useContext)(oe._y),s=r.state,l=r.addNewLesson,a=(0,o.useCallback)(function(){if(l&&s){var i=l();n.history.push("/courses/list/".concat(s.id,"/program/?lesson=").concat(i.id))}},[l,s]);return s&&s.lessons?(0,e.jsx)("aside",{className:"program-sidebar program-sidebar--left ".concat(s.lessons.length>0?"":"program-sidebar--empty"),children:(0,e.jsx)(hs,{onNewLesson:a})}):(0,e.jsx)("div",{children:(0,e.jsx)(Pe.Z,{})})},js=gs,xs=function(){var r=(0,o.useContext)(oe._y),s=r.state,l=r.currentEditMode,a=Ee.Z.Title;return s&&s.lessons?(0,e.jsxs)("div",{className:"course-block",children:[(0,e.jsxs)(be.Z,{gutter:16,children:[(0,e.jsx)(fe.Z,{span:4,children:(0,e.jsx)(js,{})}),(0,e.jsxs)(fe.Z,{span:24-4,children:[l&&l.mode==="lesson"&&l.value&&(0,e.jsx)($r,{},l.id),l&&l.mode==="topic"&&l.value&&(0,e.jsx)(Wa,{},l.id),l&&l.mode==="init"&&(0,e.jsxs)(be.Z,{style:{height:"100%"},children:[(0,e.jsx)(fe.Z,{span:16,children:(0,e.jsx)("div",{className:"program__empty-message",children:s.lessons.length>0?(0,e.jsx)(a,{level:4,children:(0,e.jsx)(Le.Z,{id:"program_form_not_selected_list_message"})}):(0,e.jsx)(a,{level:4,children:(0,e.jsx)(Le.Z,{id:"program_form_empty_list_message"})})})}),(0,e.jsx)(fe.Z,{span:8,children:(0,e.jsx)("aside",{className:"program-sidebar program-sidebar--right"})})]})]})]}),(0,e.jsx)("div",{className:"curriculum-lessons-wrapper"})]}):(0,e.jsx)("div",{children:(0,e.jsx)(Pe.Z,{})})},bs=xs,Ms=function(r){var s=r.id;return(0,e.jsxs)(oe.Il,{id:Number(s),children:[(0,e.jsx)(bs,{})," "]})},Es=Ms;function Ps(M,r){return fn.apply(this,arguments)}function fn(){return fn=A()(v()().mark(function M(r,s){return v()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/admin/topic-project-solutions",u()({params:u()(u()({},r),{},{per_page:r.pageSize,page:r.current}),method:"GET",useCache:!1},s||{})));case 1:case"end":return a.stop()}},M)})),fn.apply(this,arguments)}function Cs(M,r){return vn.apply(this,arguments)}function vn(){return vn=A()(v()().mark(function M(r,s){return v()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/admin/topic-project-solutions/".concat(r),u()({method:"DELETE"},s||{})));case 1:case"end":return a.stop()}},M)})),vn.apply(this,arguments)}var ys=["type","defaultRender"],Ts=function(){var M=A()(v()().mark(function r(s){var l;return v()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Cs(s);case 2:return l=i.sent,l.success&&B.ZP.success(l.message),i.abrupt("return",!0);case 5:case"end":return i.stop()}},r)}));return function(s){return M.apply(this,arguments)}}(),Ss=function M(r){return r.reduce(function(s,l){var a;return[].concat(p()(s),p()(l.lessons?M(l.lessons):[]),p()((a=l.topics)!==null&&a!==void 0?a:[]))},[])},As=function(r){var s=r.courseId,l=(0,n.useIntl)(),a=(0,o.useState)([]),i=x()(a,2),c=i[0],C=i[1],S=(0,o.useMemo)(function(){return c.reduce(function(y,z){var d,g,O;return u()(u()({},y),{},_()({},(d=z.id)!==null&&d!==void 0?d:-1,{text:(g=z.title)!==null&&g!==void 0?g:"",status:(O=z.id)!==null&&O!==void 0?O:-1}))},{})},[c]),f=(0,o.useMemo)(function(){return[{title:(0,e.jsx)(n.FormattedMessage,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0,sorter:!0,width:"80px"},{title:(0,e.jsx)(n.FormattedMessage,{id:"topic",defaultMessage:"topic"}),dataIndex:"topic_id",hideInSearch:!1,sorter:!0,valueEnum:S,render:function(z,d){var g,O;return(0,e.jsx)(n.Link,{to:"/courses/list/".concat(s,"/program/?topic=").concat(d.topic_id),children:(g=S==null||(O=S[d.topic_id])===null||O===void 0?void 0:O.text)!==null&&g!==void 0?g:d.topic_id})}},{sorter:!0,title:(0,e.jsx)(n.FormattedMessage,{id:"user",defaultMessage:"user"}),dataIndex:"user_id",renderFormItem:function(z,d,g){var O=d.type,X=d.defaultRender,I=$n()(d,ys);if(O==="form")return null;var Y=g.getFieldValue("state");return(0,e.jsx)(zt.Z,u()(u()({},I),{},{state:{type:Y}}))},render:function(z,d){return d.user_id&&(0,e.jsx)(U.Z,{type:"EscolaLms\\Core\\Models\\User",type_id:d.user_id},"user")}},{sorter:!0,title:(0,e.jsx)(n.FormattedMessage,{id:"created_at",defaultMessage:"Created at"}),dataIndex:"created_at",hideInSearch:!0,render:function(z,d){return d.created_at&&(0,se.WU)(new Date(d.created_at),E.Cu)}},{title:(0,e.jsx)(n.FormattedMessage,{id:"download",defaultMessage:"Download"}),dataIndex:"file_url",hideInSearch:!0,render:function(z,d){return(0,e.jsx)(j.ZP,{type:"primary",target:"_blank",size:"small",href:d.file_url,children:(0,e.jsx)(n.FormattedMessage,{id:"download",defaultMessage:"Download"})})}},{hideInSearch:!0,title:(0,e.jsx)(n.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",render:function(z,d,g,O){return[(0,e.jsx)(Tn.Z,{title:(0,e.jsx)(n.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:A()(v()().mark(function X(){var I;return v()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=2,Ts(d.id);case 2:if(I=de.sent,I){de.next=5;break}return de.abrupt("return");case 5:O==null||O.reload();case 6:case"end":return de.stop()}},X)})),okText:(0,e.jsx)(n.FormattedMessage,{id:"yes"}),cancelText:(0,e.jsx)(n.FormattedMessage,{id:"no"}),children:(0,e.jsx)(ct.Z,{title:(0,e.jsx)(n.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,e.jsx)(j.ZP,{type:"primary",icon:(0,e.jsx)(wn.Z,{}),danger:!0})})},"delete")]}}]},[S]);return(0,o.useEffect)(function(){s&&(0,P.Nx)(s).then(function(y){if(y.success){var z=Ss(y.data.lessons).filter(function(d){return d.topicable_type===m.oz.Project});C(z)}})},[s]),(0,e.jsx)(G.ZP,{headerTitle:l.formatMessage({id:"project_solutions",defaultMessage:"Project Uploaded Solutions"}),search:{layout:"vertical"},rowKey:"id",request:function(){var y=A()(v()().mark(function z(d,g){var O,X,I,Y,de,ie,Re;return v()().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return O=d.pageSize,X=d.current,I=d.user_id,Y=d.topic_id,de=g&&Object.entries(g)[0],ie=de&&de[0],Se.next=5,Ps({pageSize:O,current:X,course_id:s,user_id:I,topic_id:Y,order_by:ie,order:de?de[1]==="ascend"?"ASC":"DESC":void 0});case 5:if(Re=Se.sent,Re.success){Se.next=8;break}return Se.abrupt("return",{data:[],total:0,success:!1});case 8:return Se.abrupt("return",{data:Re.data,total:Re.meta.total,success:!0});case 9:case"end":return Se.stop()}},z)}));return function(z,d){return y.apply(this,arguments)}}(),columns:f})},Hs=null,Os=t(39470),Ds=t(54434),Is=t(14408),Fs=function(r){var s=r.visible,l=s===void 0?!1:s,a=r.handleOk,i=r.handleCancel;return(0,e.jsx)(Xt.Z,{title:(0,e.jsx)(xt._H,{id:"course_success_modal_title",defaultMessage:"course_success_modal_title"}),visible:l,onOk:a,onCancel:i,footer:[(0,e.jsx)(j.ZP,{onClick:i,children:(0,e.jsx)(xt._H,{id:"course_success_modal_button_cancel",defaultMessage:"course_success_modal_button_cancel"})},"link"),(0,e.jsx)(j.ZP,{type:"primary",onClick:a,children:(0,e.jsx)(xt._H,{id:"course_success_modal_button_ok",defaultMessage:"course_success_modal_button_ok"})},"link")],children:(0,e.jsx)("p",{children:(0,e.jsx)(xt._H,{id:"course_success_modal_content",defaultMessage:"course_success_modal_content"})})})},Xn=t(64317),Zs=t(74453),Ls=t(76560),Rs=function(r){var s=r.id;return(0,e.jsxs)(Ie.ZP,{onFinish:function(){var l=A()(v()().mark(function a(i){return v()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:(0,P.O1)(Number(s),i).then(function(S){S.success&&B.ZP.success(S.message)});case 1:case"end":return C.stop()}},a)}));return function(a){return l.apply(this,arguments)}}(),request:function(){return(0,P.Pd)(Number(s)).then(function(a){return a.success?{users:a.data.users.map(function(i){return T()(i)==="object"?i.id:i}),groups:a.data.groups.map(function(i){return T()(i)==="object"?i.id:i})}:{users:[],groups:[]}})},children:[(0,e.jsx)(Ie.ZP.Item,{valuePropName:"value",name:"users",label:(0,e.jsx)(n.FormattedMessage,{id:"users",defaultMessage:"Users"}),children:(0,e.jsx)(zt.Z,{multiple:!0})}),(0,e.jsx)(Ie.ZP.Item,{valuePropName:"value",name:"groups",label:(0,e.jsx)(n.FormattedMessage,{id:"groups",defaultMessage:"Groups"}),children:(0,e.jsx)(Ls.Z,{multiple:!0})})]})},Us=Rs;function ws(M,r){return hn.apply(this,arguments)}function hn(){return hn=A()(v()().mark(function M(r,s){return v()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/admin/templates/assignable",u()({method:"GET",useCache:!1,params:r},s||{})));case 1:case"end":return a.stop()}},M)})),hn.apply(this,arguments)}function Bs(M,r,s){return gn.apply(this,arguments)}function gn(){return gn=A()(v()().mark(function M(r,s,l){return v()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,n.request)("/api/admin/templates/".concat(r,"/assign"),u()({method:"POST",headers:{"Content-Type":"application/json"},data:s},l||{})));case 1:case"end":return i.stop()}},M)})),gn.apply(this,arguments)}function Ws(M,r,s){return jn.apply(this,arguments)}function jn(){return jn=A()(v()().mark(function M(r,s,l){return v()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,n.request)("/api/admin/templates/".concat(r,"/unassign"),u()({method:"POST",headers:{"Content-Type":"application/json"},data:s},l||{})));case 1:case"end":return i.stop()}},M)})),jn.apply(this,arguments)}function Ks(M,r){return xn.apply(this,arguments)}function xn(){return xn=A()(v()().mark(function M(r,s){return v()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,n.request)("/api/admin/templates/assigned",u()({params:r,method:"GET",useCache:!1},s||{})));case 1:case"end":return a.stop()}},M)})),xn.apply(this,arguments)}var Ns=function(r){var s=r.onChange,l=r.multiple,a=l===void 0?!1:l,i=r.assignable_class,c=r.assignable_id,C=r.onAssign,S=r.onUnassign,f=r.onTemplates,y=(0,o.useState)([]),z=x()(y,2),d=z[0],g=z[1],O=(0,o.useState)([]),X=x()(O,2),I=X[0],Y=X[1],de=(0,o.useState)(!1),ie=x()(de,2),Re=ie[0],Ce=ie[1],Se=(0,o.useRef)(),Ke=(0,o.useCallback)(function(ve){g(ve),f&&f(ve)},[f]),Be=(0,o.useCallback)(function(){Ks({assignable_class:i,assignable_id:Number(c)}).then(function(ve){ve.success&&Y(ve.data.map(function(ye){return ye.id}))})},[i,c]),ot=(0,o.useCallback)(function(){return Ce(!0),Se.current&&Se.current.abort(),Se.current=new AbortController,ws({assignable_class:i},{signal:Se.current.signal}).then(function(ve){ve&&ve.success&&Ke(ve.data),Ce(!1)}).catch(function(){return Ce(!1)}),function(){Se.current&&Se.current.abort()}},[i,c]),pt=(0,o.useCallback)(function(ve){Y(function(ye){return ye.filter(function(ee){return ee!=ve})})},[]),tt=(0,o.useCallback)(function(ve){Y(function(ye){return ye.includes(ve)?ye:[].concat(p()(ye),[ve])})},[]),Fe=(0,o.useCallback)(function(ve){var ye=Array.isArray(ve)?ve:[ve],ee=ye.filter(function(Ze){return!I.includes(Ze)}),Ge=I.filter(function(Ze){return!ye.includes(Ze)});ee.forEach(function(Ze){Bs(Ze,{assignable_id:Number(c)}).then(function(qe){qe.success&&B.ZP.success(qe.message),qe.success||(B.ZP.error(qe.message),pt(Ze))}).catch(function(qe){B.ZP.error(qe.toString()),pt(Ze)})}),Ge.forEach(function(Ze){Ws(Ze,{assignable_id:Number(c)}).then(function(qe){qe.success&&B.ZP.success(qe.message),qe.success||(B.ZP.error(qe.message),tt(Ze))}).catch(function(qe){B.ZP.error(qe.toString()),tt(Ze)})}),ee.length!=0&&C&&C(ee),Ge.length!=0&&S&&S(Ge),Y(ye)},[I,c,C,S]);return(0,o.useEffect)(function(){ot(),Be()},[i,c]),(0,o.useEffect)(function(){s&&s(I)},[I,s]),(0,e.jsx)(yt.default,{style:{width:"100%"},value:I,onChange:Fe,mode:a?"multiple":void 0,showSearch:!0,placeholder:(0,e.jsx)(n.FormattedMessage,{id:"select_templates",defaultMessage:"Select a templates"}),optionFilterProp:"children",filterOption:function(ye,ee){if(ee&&ee.children){var Ge;return(ee==null||(Ge=ee.children)===null||Ge===void 0?void 0:Ge.toString().toLowerCase().indexOf(ye.toLowerCase()))>=0}return!0},notFoundContent:Re?(0,e.jsx)(Pe.Z,{size:"small"}):null,children:d.map(function(ve){return(0,e.jsxs)(yt.default.Option,{value:ve.id,children:[ve.name," ",(0,e.jsxs)("small",{children:[(0,e.jsx)(n.FormattedMessage,{id:ve.channel.split("\\").pop()}),":",(0,e.jsx)(n.FormattedMessage,{id:ve.event.split("\\").pop()})]})," "]},ve.id)})})},$s=Ns,zs=t(34201),ks=function(r){var s=r.id,l=Ee.Z.Text,a=(0,o.useState)([]),i=x()(a,2),c=i[0],C=i[1],S=(0,o.useState)([]),f=x()(S,2),y=f[0],z=f[1],d=(0,o.useMemo)(function(){return y.map(function(g){return c.find(function(O){return O.id===g})}).filter(function(g){return g!==void 0}).filter(function(g){return g&&g.channel==="EscolaLms\\TemplatesPdf\\Core\\PdfChannel"})},[c,y]);return(0,e.jsxs)("div",{children:[(0,e.jsxs)(be.Z,{align:"middle",children:[(0,e.jsx)(fe.Z,{span:3,children:(0,e.jsx)(l,{children:(0,e.jsx)(n.FormattedMessage,{id:"CertificateTemplates",defaultMessage:"Users"})})}),(0,e.jsx)(fe.Z,{span:12,children:(0,e.jsx)($s,{onTemplates:function(O){return C(O)},assignable_class:"EscolaLms\\Courses\\Models\\Course",assignable_id:Number(s),multiple:!0,onChange:function(O){return z(O)}})})]}),d.map(function(g){return g&&(0,e.jsx)(zs.Z,{template_id:g.id,title:g.name},g.id)})]})},Gs=ks,_t=function(M){return M.ATTRIBUTES="attributes",M.PRODUCT="product",M.MEDIA="media",M.USER_SUBMISSION="user_submission",M.CATEGORIES="categories",M.PROGRAM="program",M.SCORM="scorm",M.ACCESS="access",M.CERTIFICATES="certificates",M.QUESTIONNAIRES="questionnaires",M.STATISTICS="statistics",M.USER_PROJECTS="user_projects",M}(_t||{}),Vs=function(){var M,r,s,l,a=(0,n.useParams)(),i=(0,n.useIntl)(),c=a.course,C=a.tab,S=C===void 0?_t.ATTRIBUTES:C,f=c==="new",y=(0,n.useAccess)(),z=(0,o.useState)(),d=x()(z,2),g=d[0],O=d[1],X=(0,Is.Z)(),I=X.manageCourseEdit,Y=X.setManageCourseEdit,de=X.validateCourseEdit,ie=(0,o.useState)(null),Re=x()(ie,2),Ce=Re[0],Se=Re[1],Ke=(0,o.useState)(null),Be=x()(Ke,2),ot=Be[0],pt=Be[1],tt=(0,o.useState)({showModal:!1,courseId:0}),Fe=x()(tt,2),ve=Fe[0],ye=Fe[1],ee=(0,o.useState)(!0),Ge=x()(ee,2),Ze=Ge[0],qe=Ge[1],Mt=(0,n.getAllLocales)()||[],nt=(0,n.useModel)("@@initialState"),gt=nt.setInitialState,dt=nt.initialState,Ne=Ie.ZP.useForm(),he=x()(Ne,1),Ye=he[0],mt=(M=dt==null||(r=dt.config)===null||r===void 0||(r=r.find(function(ge){return ge.key==="showInCourseAdditionalSettings-public"}))===null||r===void 0?void 0:r.data)!==null&&M!==void 0?M:!1,He=(s=dt==null||(l=dt.config)===null||l===void 0||(l=l.filter(function(ge){return ge.key.includes("hideInCourseTabs")}))===null||l===void 0?void 0:l.reduce(function(ge,De){var ze=De.key,et=De.data;return ge[ze.split("-")[1]]=et,ge},{}))!==null&&s!==void 0?s:{};(0,o.useEffect)(function(){S===_t.ATTRIBUTES&&g&&Ze&&(de(g),qe(!1))},[g,S,Ze]),(0,o.useEffect)(function(){if(c==="new"){O({title:"new"});return}var ge=function(){var De=A()(v()().mark(function ze(){var et,Et,ft;return v()().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:return rt.next=2,(0,P.XR)(Number(c));case 2:et=rt.sent,et.success&&(O(u()(u()({},et.data),{},{categories:(Et=et.data.categories)===null||Et===void 0?void 0:Et.map(Ot.i4),tags:(ft=et.data.tags)===null||ft===void 0?void 0:ft.map(Ot.ZR),summary:et.data.summary||""})),Se(et.data.active_from),pt(et.data.active_to));case 4:case"end":return rt.stop()}},ze)}));return function(){return De.apply(this,arguments)}}();ge()},[c]);var at=(0,o.useMemo)(function(){return{onValuesChange:function(De){return Y(u()(u()({},I),{},{valuesChanged:!0})),De.active_from&&Se(De.active_from),De.active_to&&pt(De.active_to),De.title&&O({title:De.title})},onFinish:function(){var ge=A()(v()().mark(function ze(et){var Et,ft;return v()().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:if(!I.disableEdit){rt.next=3;break}return Y({showModal:!0,disableEdit:!0,clicked:!1}),rt.abrupt("return");case 3:if(Et=u()(u()({},et),{},{active_from:et.active_from||(g==null?void 0:g.active_from)||null,active_to:et.active_to||(g==null?void 0:g.active_to)||null,authors:et.authors&&et.authors.map(function(Dt){return T()(Dt)==="object"?Dt.id:Dt}),scorm_sco_id:et.scorm_sco_id?et.scorm_sco_id:null,image_url:g&&g.image_url,image_path:g&&g.image_url&&(0,Ot.Ox)(g.image_url),video_url:g&&g.video_url,video_path:g&&g.video_url&&(0,Ot.Ox)(g.video_url),poster_url:g&&g.poster_url,poster_path:g&&g.poster_url&&(0,Ot.Ox)(g.poster_url),hours_to_complete:et.hours_to_complete||null}),c!=="new"){rt.next=11;break}return rt.next=7,(0,P.P6)(Et);case 7:ft=rt.sent,ft.success&&ft.data.id&&ye({showModal:!0,courseId:ft.data.id}),rt.next=14;break;case 11:return rt.next=13,(0,P.Hf)(Number(c),Et);case 13:ft=rt.sent;case 14:B.ZP.success(i.formatMessage({id:ft.message})),Y(u()(u()({},I),{},{showConfirmModal:!1,loading:!1,valuesChanged:!1}));case 16:case"end":return rt.stop()}},ze)}));function De(ze){return ge.apply(this,arguments)}return De}(),initialValues:g,form:Ye}},[c,g,I,Ye]);return g?(0,e.jsxs)(Zs._z,{title:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.FormattedMessage,{id:g.title?"course":"new_course"}),", ",(0,e.jsx)(n.FormattedMessage,{id:S})]}),header:{breadcrumb:{routes:[{path:"courses/list",breadcrumbName:i.formatMessage({id:"menu.Courses"})},{path:String(c),breadcrumbName:i.formatMessage({id:"form"})},{path:"/",breadcrumbName:String(g.title)},{path:String(S),breadcrumbName:i.formatMessage({id:S,defaultMessage:String(S)})}]}},children:[(0,e.jsxs)(re.ZP,{bodyStyle:{padding:"24px"},tabs:{type:"card",activeKey:S,onChange:function(De){gt(u()(u()({},dt),{},{collapsed:De==="program"})),De!==_t.ATTRIBUTES&&I.valuesChanged?Y(u()(u()({},I),{},{showConfirmModal:!0})):n.history.push("/courses/list/".concat(c,"/").concat(De))}},children:[(0,e.jsxs)(re.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"attributes"}),children:[I.disableEdit&&(0,e.jsx)(Te.Z,{closable:!0,style:{marginBottom:"20px"},type:"warning",message:(0,e.jsx)(n.FormattedMessage,{id:"course_edit_warning_message",defaultMessage:"course_edit_warning_message"}),action:(0,e.jsx)(j.ZP,{onClick:function(){return Y({showModal:!0,disableEdit:!0,clicked:!0})},type:"primary",children:(0,e.jsx)(n.FormattedMessage,{id:"questionnaire.submit",defaultMessage:"questionnaire.submit"})})}),(0,e.jsx)(Ve.Z,{visible:I.showModal,setManage:Y}),(0,e.jsx)(Fs,{visible:ve.showModal,handleOk:function(){n.history.push("/courses/list/".concat(ve.courseId,"/program"))},handleCancel:function(){return n.history.push("/courses/list/".concat(ve.courseId,"/attributes"))}}),(0,e.jsxs)(Ie.ZP,u()(u()({},at),{},{children:[(0,e.jsxs)(Ie.ZP.Group,{label:(0,e.jsx)(n.FormattedMessage,{id:"description"}),children:[(0,e.jsx)(bt.Z,{width:"xl",name:"title",label:(0,e.jsx)(n.FormattedMessage,{id:"title"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.title"}),placeholder:i.formatMessage({id:"title",defaultMessage:"title"}),required:!0,disabled:I.disableEdit}),(0,e.jsx)(bt.Z,{width:"xl",name:"subtitle",label:(0,e.jsx)(n.FormattedMessage,{id:"subtitle"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.subtitle"}),placeholder:i.formatMessage({id:"subtitle",defaultMessage:"subtitle"}),disabled:I.disableEdit}),(0,e.jsx)(Ie.ZP.Item,{name:"summary",label:(0,e.jsx)(n.FormattedMessage,{id:"summary"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.summary"}),valuePropName:"value",style:{width:697},children:(0,e.jsx)(Ct.ZP,{directory:"course/".concat(c,"/wysiwyg")})}),(0,e.jsx)(Ie.ZP.Item,{name:"description",label:(0,e.jsx)(n.FormattedMessage,{id:"description"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.description"}),valuePropName:"value",style:{width:697},children:(0,e.jsx)(Ct.ZP,{directory:"course/".concat(c,"/wysiwyg")})})]}),(0,e.jsxs)(Ie.ZP.Group,{label:(0,e.jsx)(n.FormattedMessage,{id:"duration"}),children:[(0,e.jsx)(Wt.Z,{width:"md",name:"active_from",label:(0,e.jsx)(n.FormattedMessage,{id:"active_from"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.active_from"}),placeholder:i.formatMessage({id:"active_from",defaultMessage:"active_from"}),rules:[{validator:function(De,ze){return ze&&ot&&(0,Sn.A)(new Date(ze),new Date(ot))?Promise.reject(new Error(i.formatMessage({id:"invalidDate"}))):Promise.resolve()}}],disabled:I.disableEdit}),(0,e.jsx)(Wt.Z,{width:"md",name:"active_to",label:(0,e.jsx)(n.FormattedMessage,{id:"active_to"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.active_to"}),placeholder:i.formatMessage({id:"active_to",defaultMessage:"active_to"}),disabled:I.disableEdit||!Ce,rules:[{validator:function(De,ze){return ze&&Ce&&(0,An.R)(new Date(ze),new Date(Ce))?Promise.reject(new Error(i.formatMessage({id:"invalidDate"}))):Promise.resolve()}}]}),(0,e.jsx)(bt.Z,{width:"md",name:"duration",label:(0,e.jsx)(n.FormattedMessage,{id:"duration"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.duration"}),placeholder:i.formatMessage({id:"duration",defaultMessage:"duration"}),disabled:I.disableEdit}),(0,e.jsx)($t.Z,{width:"md",name:"hours_to_complete",label:(0,e.jsx)(n.FormattedMessage,{id:"hours_to_complete"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"hours_to_complete"}),placeholder:i.formatMessage({id:"hours_to_complete",defaultMessage:"hours_to_complete"}),disabled:I.disableEdit})]}),(0,e.jsxs)(Ie.ZP.Group,{label:(0,e.jsx)(n.FormattedMessage,{id:"additional"}),children:[mt&&(0,e.jsx)(Zt.Z,{width:"xs",name:"public",label:(0,e.jsx)(n.FormattedMessage,{id:"public_label"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"public_tooltip"}),placeholder:i.formatMessage({id:"public",defaultMessage:"public"})}),(0,e.jsx)(bt.Z,{width:"xs",name:"level",label:(0,e.jsx)(n.FormattedMessage,{id:"level"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.level"}),placeholder:i.formatMessage({id:"level",defaultMessage:"level"})}),(0,e.jsx)(Xn.Z,{name:"language",width:"xs",label:(0,e.jsx)(n.FormattedMessage,{id:"language"}),placeholder:i.formatMessage({id:"language",defaultMessage:"language"}),valueEnum:Mt.map(function(ge){return ge.split("-")[0]}).reduce(function(ge,De){return u()(u()({},ge),{},_()({},De,De))},{}),initialValue:(0,n.getLocale)().split("-")[0],disabled:I.disableEdit}),(0,e.jsx)(Xn.Z,{name:"status",width:"md",label:(0,e.jsx)(n.FormattedMessage,{id:"status"}),valueEnum:{draft:i.formatMessage({id:"draft",defaultMessage:"draft"}),published:i.formatMessage({id:"published",defaultMessage:"published"}),archived:i.formatMessage({id:"archived",defaultMessage:"archived"}),published_unactivated:i.formatMessage({id:"published_unactivated",defaultMessage:"published_unactivated"})},initialValue:{draft:i.formatMessage({id:"draft",defaultMessage:"draft"})},placeholder:i.formatMessage({id:"status"}),disabled:I.disableEdit,rules:[{required:!0,message:(0,e.jsx)(n.FormattedMessage,{id:"select"})}]}),(0,e.jsx)(bt.Z,{width:"sm",name:"target_group",label:(0,e.jsx)(n.FormattedMessage,{id:"target_group"}),tooltip:(0,e.jsx)(n.FormattedMessage,{id:"courses.tooltips.target_group"}),placeholder:i.formatMessage({id:"target_group",defaultMessage:"target_group"}),disabled:I.disableEdit}),(0,e.jsx)(Ie.ZP.Item,{name:"authors",label:(0,e.jsx)(n.FormattedMessage,{id:"author_tutor"}),valuePropName:"value",children:(0,e.jsx)(zt.Z,{multiple:!0})})]})]}))]},_t.ATTRIBUTES),!f&&y.salesPermission&&(0,e.jsx)(re.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"product"}),disabled:I.disableEdit,children:c&&(0,e.jsx)($e.C,{productable:{class_type:"App\\Models\\Course",class_id:c,name:String(g.title),quantity:1}})},_t.PRODUCT),!f&&(0,e.jsx)(re.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"media"}),disabled:I.disableEdit,children:(0,e.jsx)(Ie.ZP,u()(u()({},at),{},{layout:"horizontal",children:(0,e.jsxs)(be.Z,{children:[(0,e.jsx)(fe.Z,{span:24,children:(0,e.jsx)(lt.Z,{folder:"course/".concat(c),title:"image",action:"/api/admin/courses/".concat(c),src_name:"image_url",form_name:"image",getUploadedSrcField:function(De){return De.file.response.data.image_url},setPath:function(De){return O(function(ze){return u()(u()({},ze),De)})},hideLabel:!0})}),(0,e.jsx)(fe.Z,{span:24,children:(0,e.jsx)(Ae,{folder:"course/".concat(c),action:"/api/admin/courses/".concat(c),src_name:"video_url",form_name:"video",getUploadedSrcField:function(De){return De.file.response.data.video_url},setPath:function(De){return O(function(ze){return u()(u()({},ze),De)})},hideLabel:!0})}),(0,e.jsx)(fe.Z,{span:24,children:(0,e.jsx)(lt.Z,{folder:"course/".concat(c),title:"poster",action:"/api/admin/courses/".concat(c),src_name:"poster_url",form_name:"poster",getUploadedSrcField:function(De){return De.file.response.data.poster_url},setPath:function(De){return O(function(ze){return u()(u()({},ze),De)})},hideLabel:!0})})]})}))},_t.MEDIA),!f&&(0,e.jsx)(re.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"categories_tags"}),disabled:I.disableEdit,children:(0,e.jsx)(Ie.ZP,u()(u()({},at),{},{children:(0,e.jsxs)(be.Z,{children:[(0,e.jsx)(fe.Z,{span:12,children:(0,e.jsx)(Ie.ZP.Item,{label:(0,e.jsx)(n.FormattedMessage,{id:"categories"}),name:"categories",valuePropName:"value",children:(0,e.jsx)(_e.Z,{})})}),(0,e.jsx)(fe.Z,{span:12,children:(0,e.jsx)(Ie.ZP.Item,{label:(0,e.jsx)(n.FormattedMessage,{id:"tags"}),name:"tags",valuePropName:"value",children:(0,e.jsx)(Os.Z,{})})})]})}))},_t.CATEGORIES),!f&&(0,e.jsx)(re.ZP.TabPane,{className:"program",tab:(0,e.jsx)(n.FormattedMessage,{id:"program"}),disabled:I.disableEdit,cardProps:{bodyStyle:{padding:0}},children:c&&(0,e.jsx)(Es,{id:c})},_t.PROGRAM),!f&&y.scormListPermission&&(0,e.jsx)(re.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"scorm"}),disabled:I.disableEdit,children:(0,e.jsx)(Ie.ZP,u()(u()({},at),{},{children:(0,e.jsx)(Ie.ZP.Item,{label:"Scorm",name:"scorm_sco_id",valuePropName:"value",children:(0,e.jsx)(Bn,{})})}))},_t.SCORM),!f&&(0,e.jsx)(re.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"access"}),disabled:I.disableEdit,children:c&&(0,e.jsx)(Us,{id:c})},_t.ACCESS),!f&&y.certificatesPermission&&(0,e.jsx)(re.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"certificates"}),disabled:I.disableEdit,children:c&&(0,e.jsx)(Gs,{id:c})},_t.CERTIFICATES),!f&&y.questionnaireListPermission&&(0,e.jsx)(re.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"questionnaires"}),disabled:I.disableEdit,children:c&&(0,e.jsx)(te,{modelType:$.COURSE,id:Number(c)})},_t.QUESTIONNAIRES),!f&&!He.statistics&&(0,e.jsx)(re.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"statistics"}),disabled:I.disableEdit,children:c&&(0,e.jsx)(ke,{courseId:c})},_t.STATISTICS),!f&&!He.user_submission&&(0,e.jsx)(re.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"user_submission"}),disabled:I.disableEdit,children:c&&(0,e.jsx)(Ds.ZP,{id:Number(c),type:"App\\Models\\Course"})},_t.USER_SUBMISSION),!f&&!He.user_projects&&(0,e.jsx)(re.ZP.TabPane,{tab:(0,e.jsx)(n.FormattedMessage,{id:"user_projects"}),children:(0,e.jsx)(As,{courseId:Number(c)})},_t.USER_PROJECTS)]}),(0,e.jsx)(pe.Z,{open:!!I.showConfirmModal,onOk:function(){Y(u()(u()({},I),{},{loading:!0})),Ye.submit()},onCancel:function(){Y(u()(u()({},I),{},{showConfirmModal:!1}))},loading:!!I.loading})]}):(0,e.jsx)(Pe.Z,{})}},62343:function(Qe,xe,t){"use strict";var Me=t(52677),_=t.n(Me),me=t(5574),T=t.n(me),ue=t(952),v=t(37476),L=t(5966),u=t(52688),N=t(86615),A=t(90672),V=t(63434),x=t(31199),ae=t(96365),D=t(14726),Q=t(75842),G=t(49288),B=t(67294),w=t(43564),o=t(80854),n=t(20568),U=t(19411),e=t(88284),H=t(28508),$=t(55171),q=t.n($),h=t(85893),te=function(R){var p=R.value,m=R.onChange,k=R.type,ce=k===void 0?"file":k,se=(0,B.useState)(!1),E=T()(se,2),P=E[0],F=E[1];return(0,h.jsxs)(B.Fragment,{children:[(0,h.jsxs)(ue.ZP.Group,{children:[(0,h.jsx)(ae.Z,{value:p,readOnly:!0}),(0,h.jsxs)(D.ZP,{size:"small",type:"primary",onClick:function(){return F(!P)},children:["toggle ",ce," browser"]})]}),P&&(0,h.jsx)(n.Z,{onFile:function(b,J){return m&&m("".concat(J,"/").concat(b.name))}})]})},_e=function(R){var p=(0,o.useIntl)(),m=R.visible,k=R.onVisibleChange,ce=R.onFinish,se=R.id,E=R.initialData,P=R.groups,F=Q.Z.useForm(),j=T()(F,1),b=j[0],J=!se||se===-1,le=(0,B.useState)("text"),ne=T()(le,2),Z=ne[0],W=ne[1],oe=(0,B.useCallback)(function(){return!!(b.getFieldValue("group")==="global"||E)},[b,E]),re=(0,B.useState)(""),Ee=T()(re,2),Pe=Ee[0],Te=Ee[1];(0,B.useEffect)(function(){if(_()(se)==="object"){var K;b.setFieldsValue(se),W((K=se.type)!==null&&K!==void 0?K:"text")}else se&&se!==-1?(0,w.GF)(Number(se)).then(function(we){we.success&&(b.setFieldsValue(we.data),W(we.data.type),Te(we.data.group))}):(b.resetFields(),W("text"))},[se,b,E]);var Oe=(0,B.useCallback)(function(K){K.type&&K.type!==Z&&W(K.type)},[Z]);return(0,h.jsxs)(v.Y,{form:b,title:p.formatMessage({id:se?"editSetting":"newSetting",defaultMessage:se?"editSetting":"newSetting"}),width:"60vw",visible:!!m,onVisibleChange:k,onFinish:ce,onValuesChange:Oe,children:[(0,h.jsxs)(ue.ZP.Group,{children:[E?(0,h.jsx)(L.Z,{label:(0,h.jsx)(o.FormattedMessage,{id:"group",defaultMessage:"group"}),rules:[{required:!0}],width:"md",name:"group",disabled:oe()}):(0,h.jsx)(ue.ZP.Item,{label:(0,h.jsx)(o.FormattedMessage,{id:"group",defaultMessage:"group"}),name:"group",children:(0,h.jsx)(G.Z,{style:{width:"300px"},autoFocus:!0,value:Pe,onChange:function(we){return Te(we)},filterOption:function(we,Xe){var Ue;return(Xe==null||(Ue=Xe.children)===null||Ue===void 0?void 0:Ue.toString().toLowerCase().indexOf(we.toLowerCase()))!==-1},children:P.map(function(K){return(0,h.jsx)(G.Z.Option,{value:K,children:K},K)})})}),(0,h.jsx)(L.Z,{label:(0,h.jsx)(o.FormattedMessage,{id:"key",defaultMessage:"key"}),rules:[{required:!0}],width:"md",name:"key",disabled:oe()})]}),(0,h.jsxs)(ue.ZP.Group,{children:[(0,h.jsx)(u.Z,{name:"enumerable",disabled:oe(),label:(0,h.jsx)(o.FormattedMessage,{id:"enumerable",defaultMessage:"enumerable"})}),(0,h.jsx)(u.Z,{name:"public",disabled:oe(),label:(0,h.jsx)(o.FormattedMessage,{id:"public",defaultMessage:"public"})})]}),(0,h.jsx)(ue.ZP.Group,{children:(0,h.jsx)(N.Z.Group,{disabled:!!(!J||E),name:"type",label:(0,h.jsx)(o.FormattedMessage,{id:"type"}),options:[{label:"text",value:"text"},{label:"markdown",value:"markdown"},{label:"json",value:"json"},{label:"file",value:"file"},{label:"image",value:"image"},{label:"boolean",value:"boolean"},{label:"number",value:"number"},{label:"array",value:"array"}]})}),(0,h.jsxs)("div",{children:[Z==="text"&&(0,h.jsx)(L.Z,{width:"lg",name:"value",label:(0,h.jsx)(o.FormattedMessage,{id:"value"})}),Z==="json"&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(A.Z,{width:"lg",name:"value",label:(0,h.jsx)(o.FormattedMessage,{id:"value"}),tooltip:"".concat(p.formatMessage({id:"example_json"}),': {"name":"John", "age":30, "city":["New York","Warsaw"]}')}),(0,h.jsx)(ue.ZP.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return(0,h.jsx)(q(),{src:JSON.parse(b.getFieldValue("value"))})}catch(we){return(0,h.jsx)(q(),{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]}),(Z==="file"||Z==="image")&&(0,h.jsx)(ue.ZP.Item,{name:"value",label:"value",tooltip:"select file from current repository or upload new one",valuePropName:"value",children:(0,h.jsx)(te,{type:Z})}),Z==="markdown"&&(0,h.jsx)(ue.ZP.Item,{name:"value",label:"value",tooltip:"The editor is WYSIWYG and includes formatting tools whilst retaining the ability to write markdown shortcuts inline and output plain Markdown.",valuePropName:"value",children:(0,h.jsx)(U.ZP,{directory:"settings/wysiwyg"})}),Z==="boolean"?(0,h.jsx)(u.Z,{name:"value",label:(0,h.jsx)(o.FormattedMessage,{id:"value"}),checkedChildren:(0,h.jsx)(e.Z,{}),unCheckedChildren:(0,h.jsx)(H.Z,{})}):(0,h.jsx)(ue.ZP.Item,{noStyle:!0,hidden:!0,children:(0,h.jsx)(V.Z,{name:"data",valuePropName:"data"})}),Z==="number"&&(0,h.jsx)(x.Z,{name:"data",label:(0,h.jsx)(o.FormattedMessage,{id:"value"})}),Z==="array"&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(A.Z,{width:"lg",name:"value",label:(0,h.jsx)(o.FormattedMessage,{id:"value"}),tooltip:"".concat(p.formatMessage({id:"example_json"}),": ['tutor', 'student']")}),(0,h.jsx)(ue.ZP.Item,{noStyle:!0,shouldUpdate:!0,children:function(){try{return(0,h.jsx)(q(),{src:JSON.parse(b.getFieldValue("value"))})}catch(we){return(0,h.jsx)(q(),{src:JSON.parse('{ "error": "cannot parse this json" }')})}}})]})]})]})};xe.ZP=_e},59234:function(Qe,xe,t){"use strict";t.d(xe,{Wg:function(){return ce}});var Me=t(5574),_=t.n(Me),me=t(19632),T=t.n(me),ue=t(15009),v=t.n(ue),L=t(97857),u=t.n(L),N=t(99289),A=t.n(N),V=t(31472),x=t(51042),ae=t(16894),D=t(2453),Q=t(83062),G=t(14726),B=t(86738),w=t(67294),o=t(80854),n=t(43564),U=t(56717),e=t(47389),H=t(82061),$=t(62343),q=t(20188),h=t(85893),te=function(){var j=A()(v()().mark(function b(J,le,ne){var Z,W;return v()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return Z=D.ZP.loading(J.formatMessage({id:"loading"})),re.prev=1,re.next=4,ne&&ne!==-1?(0,n.VP)(ne,u()({},le)):(0,n.oh)(u()({},le));case 4:return W=re.sent,Z(),D.ZP.success(J.formatMessage({id:"success"})),re.abrupt("return",{success:!0,updatedSettings:W});case 10:return re.prev=10,re.t0=re.catch(1),Z(),D.ZP.error(J.formatMessage({id:"error"})),re.abrupt("return",{success:!1,updateSettings:null});case 15:case"end":return re.stop()}},b,null,[[1,10]])}));return function(J,le,ne){return j.apply(this,arguments)}}(),_e=function(){var j=A()(v()().mark(function b(J,le){var ne;return v()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return ne=D.ZP.loading(J.formatMessage({id:"loading"})),W.prev=1,W.next=4,(0,n.Rb)(le);case 4:return ne(),D.ZP.success(J.formatMessage({id:"success"})),W.abrupt("return",!0);case 9:return W.prev=9,W.t0=W.catch(1),ne(),D.ZP.error(J.formatMessage({id:"error"})),W.abrupt("return",!1);case 14:case"end":return W.stop()}},b,null,[[1,9]])}));return function(J,le){return j.apply(this,arguments)}}(),pe=function(b){return b.toLowerCase().replace(/(_\w)/g,function(J){return J.toUpperCase().substr(1)})},R=["statistics","user_submission","user_projects"],p=["public"],m=["email","sms"],k=function(b){return"hideInMenu-".concat(pe(b.split("/").join("_")))},ce=function(b){return"disableTopicType-".concat(b)},se=[].concat(T()(Object.keys(V.oz).map(function(j){return{key:ce(j),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),T()(["ECommerce","Certificates"].map(function(j){return{key:"disable-".concat(j),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),T()(p.map(function(j){return{key:"showInCourseAdditionalSettings-".concat(j),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),T()(R.map(function(j){return{key:"hideInCourseTabs-".concat(j),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}})),T()(m.map(function(j){return{key:"hideTemplateTab-".concat(j),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}}))).reduce(function(j,b,J){return j[b.key]=u()(u()({},b),{},{id:-100*J}),j},{}),E=u()({logo:{id:-1,key:"logo",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"image",data:"EscolaLMS"},frontURL:{id:-2,key:"frontURL",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},maxLessonsNestingInProgram:{id:-4,key:"maxLessonsNestingInProgram",group:"global",value:"0",public:!0,enumerable:!0,sort:1,type:"number",data:0},minTopicNestingInProgram:{id:-5,key:"minTopicNestingInProgram",group:"global",value:"0",public:!0,enumerable:!0,sort:1,type:"number",data:0},companyName:{id:-6,key:"companyName",group:"global",value:"Wellms",public:!0,enumerable:!0,sort:0,type:"text",data:"Wellms"},companyURL:{id:-7,key:"companyURL",group:"global",value:"https://www.wellms.io/",public:!0,enumerable:!0,sort:0,type:"text",data:"https://www.wellms.io/"},logoLogin:{id:-8,key:"logoLogin",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"image",data:"EscolaLMS"},logoFooter:{id:-9,key:"logoFooter",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"image",data:"EscolaLMS"},footerFontColor:{id:-10,key:"footerFontColor",group:"global",value:"#00000072",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},showLoginBackgroundImage:{id:-11,key:"showLoginBackgroundImage",group:"global",value:"true",public:!0,enumerable:!0,sort:0,type:"boolean",data:"EscolaLMS"},loginHeaderBackgroundColor:{id:-12,key:"loginHeaderBackgroundColor",group:"global",value:"#f0f2f5",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},loginHeaderFontColor:{id:-13,key:"loginHeaderFontColor",group:"global",value:"#000000D8",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},loginFormBackgroundColor:{id:-14,key:"loginFormBackgroundColor",group:"global",value:"#f0f2f5",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},contentBackgroundColor:{id:-15,key:"contentBackgroundColor",group:"global",value:"#f0f2f5",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"},technicalMaintenance:{id:-16,key:"technicalMaintenance",group:"global",value:"false",public:!0,enumerable:!0,sort:0,type:"boolean",data:"EscolaLMS"},technicalMaintenanceText:{id:-17,key:"technicalMaintenanceText",group:"global",value:"",public:!0,enumerable:!0,sort:0,type:"text",data:"EscolaLMS"}},se),P=function(b){return typeof b.path=="string"},F=function(){var b=(0,w.useState)(!1),J=_()(b,2),le=J[0],ne=J[1],Z=(0,w.useRef)(),W=(0,o.useIntl)(),oe=(0,w.useState)(E),re=_()(oe,2),Ee=re[0],Pe=re[1],Te=(0,o.useModel)("@@initialState"),Oe=Te.setInitialState,K=Te.initialState;(0,w.useEffect)(function(){(0,q.s)().then(function(Ue){var Je=Object.values(Ue.routes).filter(P).filter(function(ke){return ke.path&&ke.path!=="/"&&ke.layout!==!1}).map(function(ke){return{path:ke.path,key:k(ke.path),group:"global",value:"false",public:!0,enumerable:!0,sort:1,type:"boolean",data:!1}});Pe(function(ke){return u()(u()({},ke),Je)})})},[]),(0,w.useEffect)(function(){Z.current&&Z.current.reload()},[Ee]);var we=[{title:(0,h.jsx)(o.FormattedMessage,{id:"key",defaultMessage:"key"}),dataIndex:"key",hideInSearch:!0,render:function(Je,ke){return(0,h.jsx)(w.Fragment,{children:(0,h.jsxs)(Q.Z,{title:(0,h.jsx)(o.FormattedMessage,{id:"Settings.tooltip.".concat(ke.key)}),children:[ke.key," ",(0,h.jsx)(U.Z,{})]})})}},{title:(0,h.jsx)(o.FormattedMessage,{id:"type",defaultMessage:"type"}),dataIndex:"type",hideInSearch:!0},{title:(0,h.jsx)(o.FormattedMessage,{id:"value",defaultMessage:"value"}),dataIndex:"value",hideInForm:!0,hideInSearch:!0,render:function(Je,ke){return ke.value}},{hideInSearch:!0,title:(0,h.jsx)(o.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(Je,ke){return[ke.id>0?(0,h.jsx)(Q.Z,{title:(0,h.jsx)(o.FormattedMessage,{id:"edit",defaultMessage:"edit"}),children:(0,h.jsx)(G.ZP,{type:"primary",icon:(0,h.jsx)(e.Z,{}),onClick:function(){return ne(ke.id)}})},"edit"):(0,h.jsx)(Q.Z,{title:(0,h.jsx)(o.FormattedMessage,{id:"create",defaultMessage:"create"}),children:(0,h.jsx)(G.ZP,{type:"primary",icon:(0,h.jsx)(x.Z,{}),onClick:function(){ne(Ee[ke.key]||-1)}})},"create"),(0,h.jsx)(B.Z,{title:(0,h.jsx)(o.FormattedMessage,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:A()(v()().mark(function Ve(){var lt;return v()().wrap(function(st){for(;;)switch(st.prev=st.next){case 0:return st.next=2,_e(W,ke.id);case 2:lt=st.sent,lt&&(ne(!1),Z.current&&Z.current.reload());case 4:case"end":return st.stop()}},Ve)})),okText:(0,h.jsx)(o.FormattedMessage,{id:"yes",defaultMessage:"Yes"}),cancelText:(0,h.jsx)(o.FormattedMessage,{id:"no",defaultMessage:"No"}),children:ke.id>0?(0,h.jsx)(Q.Z,{title:(0,h.jsx)(o.FormattedMessage,{id:"delete",defaultMessage:"delete"}),children:(0,h.jsx)(G.ZP,{type:"primary",icon:(0,h.jsx)(H.Z,{}),danger:!0})}):null},"delete")]}}],Xe=function(Je){var ke;if(Je&&(!(K!=null&&(ke=K.config)!==null&&ke!==void 0&&ke.length)&&Je&&Oe(u()(u()({},K),{},{config:[Je]})),!!(K!=null&&K.config))){var Ve=K==null?void 0:K.config.map(function(lt){return lt.key===Je.key?u()(u()({},lt),Je):lt});Oe(u()(u()({},K),{},{config:Ve}))}};return(0,h.jsxs)(w.Fragment,{children:[(0,h.jsx)(ae.ZP,{headerTitle:W.formatMessage({id:"menu.settings"}),search:!1,toolBarRender:!1,actionRef:Z,rowKey:"id",request:function(Je){var ke=Je.pageSize,Ve=Je.current;return(0,n.Xd)({per_page:ke,current:Ve,group:"global"}).then(function(lt){if(lt.success){var Ie=[].concat(T()(Object.keys(Ee).map(function(st){return lt.data.find(function(At){return At.key===st})||Ee[st]})),T()(lt.data.filter(function(st){return!Object.keys(Ee).includes(st.key)})));return{data:Ie,total:Ie.length,success:!0}}return[]})},columns:we}),(0,h.jsx)($.ZP,{groups:[],id:le,visible:le,initialData:Ee,onVisibleChange:function(Je){return!Je&&ne(!1)},onFinish:function(){var Ue=A()(v()().mark(function Je(ke){var Ve,lt,Ie,st;return v()().wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return Ve=ke,Ve.type==="number"&&(Ve=u()(u()({},Ve),{},{value:String(Ve.data)})),Ve.type==="boolean"&&(Ve=u()(u()({},Ve),{},{value:Ve.data})),Ve.type==="array"&&(Ve=u()(u()({},Ve),{},{value:JSON.parse(Ve.value)})),jt.next=6,te(W,Ve,Number(le));case 6:lt=jt.sent,Ie=lt.success,st=lt.updatedSettings,Ie&&(st!=null&&st.success&&Xe(st.data),ne(!1),Z.current&&Z.current.reload());case 10:case"end":return jt.stop()}},Je)}));return function(Je){return Ue.apply(this,arguments)}}()})]})};xe.ZP=F},94116:function(Qe,xe,t){"use strict";t.d(xe,{CL:function(){return u},W3:function(){return x},bd:function(){return A},k4:function(){return D},uu:function(){return w},yr:function(){return G}});var Me=t(15009),_=t.n(Me),me=t(97857),T=t.n(me),ue=t(99289),v=t.n(ue),L=t(80854);function u(n){return N.apply(this,arguments)}function N(){return N=v()(_()().mark(function n(U){return _()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.abrupt("return",(0,L.request)("/api/admin/categories/tree",T()({method:"GET",useCache:!1},U||{})));case 1:case"end":return H.stop()}},n)})),N.apply(this,arguments)}function A(n,U){return V.apply(this,arguments)}function V(){return V=v()(_()().mark(function n(U,e){return _()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",(0,L.request)("/api/admin/categories",T()({method:"GET",useCache:!1,params:U},e||{})));case 1:case"end":return $.stop()}},n)})),V.apply(this,arguments)}function x(n,U){return ae.apply(this,arguments)}function ae(){return ae=v()(_()().mark(function n(U,e){return _()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",(0,L.request)("/api/admin/categories/".concat(U),T()({method:"GET",useCache:!1},e||{})));case 1:case"end":return $.stop()}},n)})),ae.apply(this,arguments)}function D(n,U){return Q.apply(this,arguments)}function Q(){return Q=v()(_()().mark(function n(U,e){return _()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",(0,L.request)("/api/admin/categories",T()({method:"POST",headers:{"Content-Type":"application/json"},data:U},e||{})));case 1:case"end":return $.stop()}},n)})),Q.apply(this,arguments)}function G(n,U,e){return B.apply(this,arguments)}function B(){return B=v()(_()().mark(function n(U,e,H){return _()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.abrupt("return",(0,L.request)("/api/admin/categories/".concat(U),T()({method:"POST",headers:{"Content-Type":"application/json"},data:e},H||{})));case 1:case"end":return q.stop()}},n)})),B.apply(this,arguments)}function w(n,U,e){return o.apply(this,arguments)}function o(){return o=v()(_()().mark(function n(U,e,H){return _()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.abrupt("return",(0,L.request)("/api/admin/categories/".concat(U),T()({method:"DELETE",headers:{"Content-Type":"application/json"},data:e},H||{})));case 1:case"end":return q.stop()}},n)})),o.apply(this,arguments)}},17578:function(Qe,xe,t){"use strict";t.d(xe,{Od:function(){return Q},QZ:function(){return u},ht:function(){return A},pV:function(){return D},ws:function(){return x}});var Me=t(15009),_=t.n(Me),me=t(97857),T=t.n(me),ue=t(99289),v=t.n(ue),L=t(80854);function u(B,w){return N.apply(this,arguments)}function N(){return N=v()(_()().mark(function B(w,o){return _()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",(0,L.request)("/api/admin/file/list",T()({method:"GET",params:w},o||{})));case 1:case"end":return U.stop()}},B)})),N.apply(this,arguments)}function A(B,w){return V.apply(this,arguments)}function V(){return V=v()(_()().mark(function B(w,o){return _()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",(0,L.request)("/api/admin/file/find",T()({method:"GET",params:w},o||{})));case 1:case"end":return U.stop()}},B)})),V.apply(this,arguments)}function x(B,w,o){return ae.apply(this,arguments)}function ae(){return ae=v()(_()().mark(function B(w,o,n){var U;return _()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return U=new FormData,U.append("file[]",w),U.append("target",o),H.abrupt("return",(0,L.request)("/api/admin/file/upload",T()({method:"POST",data:U},n||{})));case 4:case"end":return H.stop()}},B)})),ae.apply(this,arguments)}var D=function(w){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;return"".concat(window.REACT_APP_API_URL||"https://api-stage.escolalms.com","/api/images/img?path=").concat(w,"&w=").concat(o)};function Q(B,w){return G.apply(this,arguments)}function G(){return G=v()(_()().mark(function B(w,o){return _()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.abrupt("return",(0,L.request)("/api/admin/file/delete",T()({method:"DELETE",data:{url:w}},o||{})));case 1:case"end":return U.stop()}},B)})),G.apply(this,arguments)}},97704:function(Qe,xe,t){"use strict";t.d(xe,{Kn:function(){return u},LK:function(){return ae},RN:function(){return x},gq:function(){return w},jc:function(){return G},x0:function(){return D}});var Me=t(15009),_=t.n(Me),me=t(97857),T=t.n(me),ue=t(99289),v=t.n(ue),L=t(80854);function u(n,U){return N.apply(this,arguments)}function N(){return N=v()(_()().mark(function n(U,e){return _()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",(0,L.request)("/api/admin/hh5p/content",T()({method:"GET",params:U},e||{})));case 1:case"end":return $.stop()}},n)})),N.apply(this,arguments)}function A(n,U){return V.apply(this,arguments)}function V(){return V=_asyncToGenerator(_regeneratorRuntime().mark(function n(U,e){return _regeneratorRuntime().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",request("/api/admin/hh5p/content/".concat(U),_objectSpread({method:"GET"},e||{})));case 1:case"end":return $.stop()}},n)})),V.apply(this,arguments)}var x=function(U){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en",H=arguments.length>2?arguments[2]:void 0,$=U?"/api/admin/hh5p/editor/".concat(U):"/api/admin/hh5p/editor";return $=e?"".concat($,"?lang=").concat(e):$,(0,L.request)($,T()({method:"GET"},H||{}))},ae=function(U){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en",H=arguments.length>2?arguments[2]:void 0,$="/api/admin/hh5p/content/".concat(U);return $=e?"".concat($,"?lang=").concat(e):$,(0,L.request)($,T()({method:"GET"},H||{}))};function D(n,U,e){return Q.apply(this,arguments)}function Q(){return Q=v()(_()().mark(function n(U,e,H){return _()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.abrupt("return",(0,L.request)(e?"/api/admin/hh5p/content/".concat(e):"/api/admin/hh5p/content",T()({method:"POST",headers:{"Content-Type":"application/json"},data:U},H||{})));case 1:case"end":return q.stop()}},n)})),Q.apply(this,arguments)}function G(n){return B.apply(this,arguments)}function B(){return B=v()(_()().mark(function n(U){return _()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.abrupt("return",(0,L.request)("/api/admin/hh5p/content/".concat(U),{method:"DELETE"}));case 1:case"end":return H.stop()}},n)})),B.apply(this,arguments)}function w(n){return o.apply(this,arguments)}function o(){return o=v()(_()().mark(function n(U){return _()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.abrupt("return",(0,L.request)("/api/admin/hh5p/content?per_page=0",T()({method:"GET"},U||{})));case 1:case"end":return H.stop()}},n)})),o.apply(this,arguments)}},44837:function(Qe,xe,t){"use strict";t.d(xe,{Ir:function(){return G},RB:function(){return u},fw:function(){return e},nM:function(){return D},nS:function(){return n},q5:function(){return $},rc:function(){return w},ry:function(){return A},wv:function(){return x}});var Me=t(15009),_=t.n(Me),me=t(97857),T=t.n(me),ue=t(99289),v=t.n(ue),L=t(80854);function u(h,te){return N.apply(this,arguments)}function N(){return N=v()(_()().mark(function h(te,_e){return _()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",(0,L.request)("/api/admin/products",T()({method:"GET",params:T()(T()({},te),{},{free:typeof te.free!="undefined"?te.free==="true"?1:0:void 0,per_page:te.pageSize,page:te.current})},_e||{})));case 1:case"end":return R.stop()}},h)})),N.apply(this,arguments)}function A(h,te){return V.apply(this,arguments)}function V(){return V=v()(_()().mark(function h(te,_e){return _()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",(0,L.request)("/api/admin/products",T()({method:"POST",data:te},_e||{})));case 1:case"end":return R.stop()}},h)})),V.apply(this,arguments)}function x(h,te){return ae.apply(this,arguments)}function ae(){return ae=v()(_()().mark(function h(te,_e){return _()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",(0,L.request)("/api/admin/products/".concat(te),T()({method:"GET"},_e||{})));case 1:case"end":return R.stop()}},h)})),ae.apply(this,arguments)}function D(h,te,_e){return Q.apply(this,arguments)}function Q(){return Q=v()(_()().mark(function h(te,_e,pe){return _()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,L.request)("/api/admin/products/".concat(te,"?_method=PUT"),T()({method:"POST",data:_e},pe||{})));case 1:case"end":return p.stop()}},h)})),Q.apply(this,arguments)}function G(h,te){return B.apply(this,arguments)}function B(){return B=v()(_()().mark(function h(te,_e){return _()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",(0,L.request)("/api/admin/products/".concat(te),T()({method:"DELETE"},_e||{})));case 1:case"end":return R.stop()}},h)})),B.apply(this,arguments)}function w(h){return o.apply(this,arguments)}function o(){return o=v()(_()().mark(function h(te){return _()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.abrupt("return",(0,L.request)("/api/admin/productables",T()({method:"GET"},te||{})));case 1:case"end":return pe.stop()}},h)})),o.apply(this,arguments)}function n(h,te){return U.apply(this,arguments)}function U(){return U=v()(_()().mark(function h(te,_e){return _()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",(0,L.request)("/api/admin/productables/product",T()({method:"GET",params:te},_e||{})));case 1:case"end":return R.stop()}},h)})),U.apply(this,arguments)}function e(h,te,_e){return H.apply(this,arguments)}function H(){return H=v()(_()().mark(function h(te,_e,pe){return _()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,L.request)("/api/admin/products/".concat(te,"/attach"),T()({method:"POST",data:_e},pe||{})));case 1:case"end":return p.stop()}},h)})),H.apply(this,arguments)}function $(h,te,_e){return q.apply(this,arguments)}function q(){return q=v()(_()().mark(function h(te,_e,pe){return _()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,L.request)("/api/admin/products/".concat(te,"/detach"),T()({method:"POST",data:_e},pe||{})));case 1:case"end":return p.stop()}},h)})),q.apply(this,arguments)}},76841:function(Qe,xe,t){"use strict";t.d(xe,{Gm:function(){return u},Sx:function(){return x},_g:function(){return A}});var Me=t(15009),_=t.n(Me),me=t(97857),T=t.n(me),ue=t(99289),v=t.n(ue),L=t(80854);function u(D,Q){return N.apply(this,arguments)}function N(){return N=v()(_()().mark(function D(Q,G){return _()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,L.request)("/api/admin/reports/report",T()({params:Q,method:"GET",useCache:!1},G||{})));case 1:case"end":return w.stop()}},D)})),N.apply(this,arguments)}function A(D,Q,G){return V.apply(this,arguments)}function V(){return V=v()(_()().mark(function D(Q,G,B){return _()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,L.request)("/api/admin/stats/course/".concat(Q,"/export"),T()({params:G,method:"GET",useCache:!1,responseType:"blob",headers:{accept:"application/vnd.ms-excel"}},B||{})));case 1:case"end":return o.stop()}},D)})),V.apply(this,arguments)}function x(D,Q,G){return ae.apply(this,arguments)}function ae(){return ae=v()(_()().mark(function D(Q,G,B){return _()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,L.request)("/api/admin/stats/topic/".concat(Q,"/export"),T()({method:"GET",useCache:!1,params:{stat:G},responseType:"blob",headers:{accept:"application/vnd.ms-excel"}},B||{})));case 1:case"end":return o.stop()}},D)})),ae.apply(this,arguments)}},9649:function(Qe,xe,t){"use strict";t.d(xe,{JZ:function(){return u},NK:function(){return x}});var Me=t(15009),_=t.n(Me),me=t(97857),T=t.n(me),ue=t(99289),v=t.n(ue),L=t(80854);function u(D,Q){return N.apply(this,arguments)}function N(){return N=v()(_()().mark(function D(Q,G){return _()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,L.request)("/api/admin/scorm",T()({params:Q,method:"GET",useCache:!1},G||{})));case 1:case"end":return w.stop()}},D)})),N.apply(this,arguments)}function A(D,Q){return V.apply(this,arguments)}function V(){return V=_asyncToGenerator(_regeneratorRuntime().mark(function D(Q,G){return _regeneratorRuntime().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",request("/api/admin/scorm/scos",_objectSpread({params:_objectSpread(_objectSpread({},Q),{},{per_page:Q.pageSize,page:Q.current}),method:"GET",useCache:!1},G||{})));case 1:case"end":return w.stop()}},D)})),V.apply(this,arguments)}function x(D,Q){return ae.apply(this,arguments)}function ae(){return ae=v()(_()().mark(function D(Q,G){return _()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.abrupt("return",(0,L.request)("/api/admin/scorm/".concat(Q),T()({method:"DELETE"},G||{})));case 1:case"end":return w.stop()}},D)})),ae.apply(this,arguments)}},30869:function(Qe,xe,t){"use strict";t.d(xe,{EA:function(){return A},Je:function(){return G},LS:function(){return ce},N5:function(){return x},Nq:function(){return w},VB:function(){return R},WC:function(){return $},ck:function(){return D},h8:function(){return e},m9:function(){return _e},nS:function(){return h},r4:function(){return n},rC:function(){return u},yi:function(){return m}});var Me=t(15009),_=t.n(Me),me=t(97857),T=t.n(me),ue=t(99289),v=t.n(ue),L=t(80854);function u(E,P){return N.apply(this,arguments)}function N(){return N=v()(_()().mark(function E(P,F){return _()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,L.request)("/api/admin/users",T()({params:P,method:"GET",useCache:!1},F||{})));case 1:case"end":return b.stop()}},E)})),N.apply(this,arguments)}function A(E,P,F){return V.apply(this,arguments)}function V(){return V=v()(_()().mark(function E(P,F,j){return _()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.abrupt("return",(0,L.request)("/api/admin/users/".concat(P),T()({method:"GET",useCache:j!==void 0?j:!0},F||{})));case 1:case"end":return J.stop()}},E)})),V.apply(this,arguments)}function x(E){return ae.apply(this,arguments)}function ae(){return ae=v()(_()().mark(function E(P){return _()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",(0,L.request)("/api/profile/me",T()({method:"GET",useCache:!1},P||{})));case 1:case"end":return j.stop()}},E)})),ae.apply(this,arguments)}function D(E,P){return Q.apply(this,arguments)}function Q(){return Q=v()(_()().mark(function E(P,F){return _()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,L.request)("/api/profile/me",T()({data:P,method:"PUT"},F||{})));case 1:case"end":return b.stop()}},E)})),Q.apply(this,arguments)}function G(E,P){return B.apply(this,arguments)}function B(){return B=v()(_()().mark(function E(P,F){return _()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,L.request)("/api/profile/password",T()({data:P,method:"PUT"},F||{})));case 1:case"end":return b.stop()}},E)})),B.apply(this,arguments)}function w(E,P,F){return o.apply(this,arguments)}function o(){return o=v()(_()().mark(function E(P,F,j){return _()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.abrupt("return",(0,L.request)("/api/admin/users/".concat(P),T()({data:F,method:"PUT"},j||{})));case 1:case"end":return J.stop()}},E)})),o.apply(this,arguments)}function n(E,P){return U.apply(this,arguments)}function U(){return U=v()(_()().mark(function E(P,F){return _()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,L.request)("/api/admin/users",T()({data:P,method:"POST"},F||{})));case 1:case"end":return b.stop()}},E)})),U.apply(this,arguments)}function e(E,P){return H.apply(this,arguments)}function H(){return H=v()(_()().mark(function E(P,F){return _()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,L.request)("/api/admin/users/".concat(P),T()({method:"DELETE"},F||{})));case 1:case"end":return b.stop()}},E)})),H.apply(this,arguments)}function $(E,P,F){return q.apply(this,arguments)}function q(){return q=v()(_()().mark(function E(P,F,j){return _()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.abrupt("return",(0,L.request)("/api/auth/email/resend",T()({method:"POST",data:{email:P,return_url:F}},j||{})));case 1:case"end":return J.stop()}},E)})),q.apply(this,arguments)}function h(E,P){return te.apply(this,arguments)}function te(){return te=v()(_()().mark(function E(P,F){return _()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,L.request)("/api/admin/users/".concat(P,"/settings"),T()({method:"GET",useCache:!1},F||{})));case 1:case"end":return b.stop()}},E)})),te.apply(this,arguments)}function _e(E,P,F,j){return pe.apply(this,arguments)}function pe(){return pe=v()(_()().mark(function E(P,F,j,b){return _()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.abrupt("return",(0,L.request)("/api/admin/users/".concat(P,"/settings"),T()({method:F,data:{settings:[j]},useCache:!1},b||{})));case 1:case"end":return le.stop()}},E)})),pe.apply(this,arguments)}function R(E,P){return p.apply(this,arguments)}function p(){return p=v()(_()().mark(function E(P,F){return _()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,L.request)("/api/admin/users/".concat(P,"/avatar"),T()({method:"DELETE"},F||{})));case 1:case"end":return b.stop()}},E)})),p.apply(this,arguments)}function m(E,P,F){return k.apply(this,arguments)}function k(){return k=v()(_()().mark(function E(P,F,j){return _()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.abrupt("return",(0,L.request)("/api/admin/users/".concat(P,"/interests"),T()({data:F,method:"PUT"},j||{})));case 1:case"end":return J.stop()}},E)})),k.apply(this,arguments)}function ce(E,P){return se.apply(this,arguments)}function se(){return se=v()(_()().mark(function E(P,F){return _()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",(0,L.request)("/api/admin/stats/date-range",T()({params:P,method:"GET"},F||{})));case 1:case"end":return b.stop()}},E)})),se.apply(this,arguments)}},93414:function(){},70172:function(){},2001:function(){},33779:function(){},66558:function(){},82258:function(){}}]);
