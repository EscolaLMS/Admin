(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"9A0E":function(D,f,e){"use strict";e.r(f),e.d(f,"channelType",function(){return v});var b=e("q1tI"),p=e("Ty5D"),a=e("9kvl"),j=e("tMyG"),g=e("nhC9"),I=e("P2fV"),m=e("NJEC"),ee=e("5Dmo"),A=e("3S7+"),he=e("+L6B"),T=e("2/Rp"),ae=e("miYZ"),L=e("tsqr"),te=e("9og8"),z=e("tJVT"),ne=e("WmNS"),B=e.n(ne),S=e("xvlK"),K=e("G3dp"),re=e("/MfK"),U=e("55Ip"),le=e("sWYD"),W=e("Qiat"),o=e("rWUb"),r=e("mGZj"),t=e("nKUr"),i=function(Y){var F=Y.templateType,Q=Y.channel,H=Object(b.useRef)(),ge=Object(a.i)(),Oe=Object(b.useState)(!1),ye=Object(z.a)(Oe,2),Ce=ye[0],R=ye[1],Ee=[{title:Object(t.jsx)(a.a,{id:"ID",defaultMessage:"ID"}),dataIndex:"id",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"created_at",defaultMessage:"created_at"}),dataIndex:"created_at",hideInSearch:!0,render:function(N,x){return x.created_at&&Object(le.a)(new Date(x.created_at),r.a)}},{title:Object(t.jsx)(a.a,{id:"name",defaultMessage:"name"}),dataIndex:"name",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"event",defaultMessage:"event"}),dataIndex:"event",hideInSearch:!0},{title:Object(t.jsx)(a.a,{id:"templates.is_default"}),dataIndex:"default",hideInSearch:!0,render:function(N,x){return x.default&&Object(t.jsx)(a.a,{id:"yes"})}}],xe=Object(b.useCallback)(function(){var E=Object(te.a)(B.a.mark(function N(x){var n,s;return B.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return R(!0),n=L.default.loading(Object(t.jsx)(a.a,{id:"loading",defaultMessage:"loading"})),l.prev=2,l.next=5,Object(o.b)(x).then(function(y){R(!1),y.success&&L.default.success(y.message)});case 5:return n(),R(!1),(s=H.current)===null||s===void 0||s.reload(),l.abrupt("return",!0);case 11:return l.prev=11,l.t0=l.catch(2),n(),L.default.error(Object(t.jsx)(a.a,{id:"error",defaultMessage:"error"})),R(!1),l.abrupt("return",!1);case 17:case"end":return l.stop()}},N,null,[[2,11]])}));return function(N){return E.apply(this,arguments)}}(),[H]);return Object(t.jsx)(W.a,{headerTitle:ge.formatMessage({id:"templates",defaultMessage:"templates"}),loading:Ce,actionRef:H,rowKey:"id",search:!1,toolBarRender:function(){return[Object(t.jsx)(U.a,{to:"/templates/".concat(F,"/new"),children:Object(t.jsxs)(T.a,{type:"primary",children:[Object(t.jsx)(S.a,{})," ",Object(t.jsx)(a.a,{id:"new",defaultMessage:"new"})]},"primary")})]},request:function(N){var x=N.pageSize,n=N.current;return R(!0),Object(o.e)({pageSize:x,current:n,channel:Q}).then(function(s){return s.success?(R(!1),{data:s.data,total:s.meta.total,success:!0}):[]})},columns:[].concat(Ee,[{hideInSearch:!0,title:Object(t.jsx)(a.a,{id:"pages.searchTable.titleOption",defaultMessage:"option"}),dataIndex:"option",valueType:"option",render:function(N,x){return[Object(t.jsx)(U.a,{to:"/templates/".concat(F,"/").concat(x.id),children:Object(t.jsx)(A.a,{title:Object(t.jsx)(a.a,{id:"edit",defaultMessage:"edit"}),children:Object(t.jsx)(T.a,{type:"primary",icon:Object(t.jsx)(K.a,{})})})},"edit"),Object(t.jsx)(m.a,{title:Object(t.jsx)(a.a,{id:"deleteQuestion",defaultMessage:"Are you sure to delete this record?"}),onConfirm:function(){return xe(x.id)},okText:Object(t.jsx)(a.a,{id:"yes"}),cancelText:Object(t.jsx)(a.a,{id:"no"}),children:Object(t.jsx)(A.a,{title:Object(t.jsx)(a.a,{id:"delete",defaultMessage:"delete"}),children:Object(t.jsx)(T.a,{type:"primary",icon:Object(t.jsx)(re.a,{}),danger:!0})})},"delete")]}}])})},c=i,v;(function(J){J.email="EscolaLms\\TemplatesEmail\\Core\\EmailChannel",J.pdf="EscolaLms\\TemplatesPdf\\Core\\PdfChannel",J.sms="EscolaLms\\TemplatesSms\\Core\\SmsChannel"})(v||(v={}));var pe=function(){var Y=Object(p.l)(),F=Y.template;return Object(t.jsx)(j.a,{children:Object(t.jsxs)(g.a,{tabs:{type:"card",activeKey:F,onChange:function(H){return a.d.push("/templates/".concat(H))}},children:[Object(t.jsx)(g.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"email"}),children:Object(t.jsx)(c,{templateType:"email",channel:v.email})},"email"),Object(t.jsx)(g.a.TabPane,{tab:Object(t.jsx)(a.a,{id:"PDF"}),children:Object(t.jsx)(c,{templateType:"pdf",channel:v.pdf})},"pdf"),Object(t.jsx)(g.a.TabPane,{disabled:!0,tab:Object(t.jsx)("span",{children:Object(t.jsx)(a.a,{id:"Push"})}),children:"Push"},"Push"),Object(t.jsx)(g.a.TabPane,{tab:Object(t.jsx)("span",{children:Object(t.jsx)(a.a,{id:"SMS"})}),children:Object(t.jsx)(c,{templateType:"sms",channel:v.sms})},"sms")]})})},He=f.default=pe},S76h:function(D,f,e){},TLLU:function(D,f,e){"use strict";var b=e("5OYt");function p(){return Object(b.a)()}f.a={useBreakpoint:p}},VzZb:function(D,f,e){},"aK+R":function(D,f,e){},df8c:function(D,f,e){},nhC9:function(D,f,e){"use strict";var b=e("wx14"),p=e("q1tI"),a=e.n(p),j=e("Znn+"),g=e("ZTPi"),I=e("VTBJ"),m=e("rePB"),ee=e("U8pU"),A=e("ODXe"),he=e("GNNt"),T=e("wEI+"),ae=e("Ff2n"),L=e("1GLa"),te=e("TLLU"),z=e("UESt"),ne=e("YSkC"),B=e("TSYQ"),S=e.n(B),K=e("BGR+"),re=e("6cGi"),U=e("S76h"),le=function(s){var d=s.actions,l=s.prefixCls;return Array.isArray(d)&&(d==null?void 0:d.length)?a.a.createElement("ul",{className:"".concat(l,"-actions")},d.map(function(y,V){return a.a.createElement("li",{style:{width:"".concat(100/d.length,"%")},key:"action-".concat(V)},a.a.createElement("span",null,y))})):d?a.a.createElement("ul",{className:"".concat(l,"-actions")},d):null},W=le,o=e("14J3"),r=e("BMrR"),t=e("jCWc"),i=e("kPKH"),c=e("aK+R"),v=function(s){var d=s.style,l=s.prefix;return a.a.createElement("div",{className:"".concat(l,"-loading-content"),style:d},a.a.createElement(r.a,{gutter:8},a.a.createElement(i.a,{span:22},a.a.createElement("div",{className:"".concat(l,"-loading-block")}))),a.a.createElement(r.a,{gutter:8},a.a.createElement(i.a,{span:8},a.a.createElement("div",{className:"".concat(l,"-loading-block")})),a.a.createElement(i.a,{span:15},a.a.createElement("div",{className:"".concat(l,"-loading-block")}))),a.a.createElement(r.a,{gutter:8},a.a.createElement(i.a,{span:6},a.a.createElement("div",{className:"".concat(l,"-loading-block")})),a.a.createElement(i.a,{span:18},a.a.createElement("div",{className:"".concat(l,"-loading-block")}))),a.a.createElement(r.a,{gutter:8},a.a.createElement(i.a,{span:13},a.a.createElement("div",{className:"".concat(l,"-loading-block")})),a.a.createElement(i.a,{span:9},a.a.createElement("div",{className:"".concat(l,"-loading-block")}))),a.a.createElement(r.a,{gutter:8},a.a.createElement(i.a,{span:4},a.a.createElement("div",{className:"".concat(l,"-loading-block")})),a.a.createElement(i.a,{span:3},a.a.createElement("div",{className:"".concat(l,"-loading-block")})),a.a.createElement(i.a,{span:16},a.a.createElement("div",{className:"".concat(l,"-loading-block")}))))},pe=v,He=e("df8c"),J=["className","style","bodyStyle","headStyle","title","subTitle","extra","tip","wrap","layout","loading","gutter","tooltip","split","headerBordered","bordered","children","size","actions","ghost","hoverable","direction","collapsed","collapsible","collapsibleIconRender","defaultCollapsed","onCollapse","checked","onChecked","tabs","type"],Y=te.a.useBreakpoint,F=a.a.forwardRef(function(n,s){var d,l,y,V=n.className,X=n.style,w=n.bodyStyle,$=w===void 0?{}:w,k=n.headStyle,Te=k===void 0?{}:k,me=n.title,Pe=n.subTitle,ce=n.extra,Se=n.tip,ve=n.wrap,Xe=ve===void 0?!1:ve,we=n.layout,se=n.loading,Le=n.gutter,ke=Le===void 0?0:Le,qe=n.tooltip,oe=n.split,Be=n.headerBordered,_e=Be===void 0?!1:Be,Re=n.bordered,ea=Re===void 0?!1:Re,$e=n.children,Ge=n.size,aa=n.actions,ze=n.ghost,ta=ze===void 0?!1:ze,Ke=n.hoverable,na=Ke===void 0?!1:Ke,ra=n.direction,Ue=n.collapsed,We=n.collapsible,la=We===void 0?!1:We,Je=n.collapsibleIconRender,Ve=n.defaultCollapsed,ca=Ve===void 0?!1:Ve,sa=n.onCollapse,oa=n.checked,Ne=n.onChecked,Me=n.tabs,Ie=n.type,ie=Object(ae.a)(n,J),ia=Object(p.useContext)(T.default.ConfigContext),da=ia.getPrefixCls,Ze=Y(),ua=Object(re.a)(ca,{value:Ue,onChange:sa}),Ye=Object(A.a)(ua,2),fe=Ye[0],ma=Ye[1],be=["xxl","xl","lg","md","sm","xs"],va=function(O){var h=[0,0],P=Array.isArray(O)?O:[O,0];return P.forEach(function(M,Z){if(Object(ee.a)(M)==="object")for(var G=0;G<be.length;G+=1){var ue=be[G];if(Ze[ue]&&M[ue]!==void 0){h[Z]=M[ue];break}}else h[Z]=M||0}),h},de=function(O,h){return O?h:{}},fa=function(O){var h=O;if(Object(ee.a)(O)==="object")for(var P=0;P<be.length;P+=1){var M=be[P];if(Ze[M]&&O[M]!==void 0){h=O[M];break}}var Z=de(typeof h=="string"&&/\d%|\dpx/i.test(h),{width:h,flexShrink:0});return{span:h,colSpanStyle:Z}},u=da("pro-card"),ba=va(ke),Fe=Object(A.a)(ba,2),q=Fe[0],_=Fe[1],Ae=!1,De=a.a.Children.toArray($e),ja=De.map(function(C,O){var h;if(C==null||(h=C.type)===null||h===void 0?void 0:h.isProCard){var P;Ae=!0;var M=C.props.colSpan,Z=fa(M),G=Z.span,ue=Z.colSpanStyle,Oa=S()(["".concat(u,"-col")],(P={},Object(m.a)(P,"".concat(u,"-split-vertical"),oe==="vertical"&&O!==De.length-1),Object(m.a)(P,"".concat(u,"-split-horizontal"),oe==="horizontal"&&O!==De.length-1),Object(m.a)(P,"".concat(u,"-col-").concat(G),typeof G=="number"&&G>=0&&G<=24),P));return a.a.createElement("div",{style:Object(I.a)(Object(I.a)(Object(I.a)({},ue),de(q>0,{paddingRight:q/2,paddingLeft:q/2})),de(_>0,{paddingTop:_/2,paddingBottom:_/2})),key:"pro-card-col-".concat((C==null?void 0:C.key)||O),className:Oa},a.a.cloneElement(C))}return C}),ha=S()("".concat(u),V,(d={},Object(m.a)(d,"".concat(u,"-border"),ea),Object(m.a)(d,"".concat(u,"-contain-card"),Ae),Object(m.a)(d,"".concat(u,"-loading"),se),Object(m.a)(d,"".concat(u,"-split"),oe==="vertical"||oe==="horizontal"),Object(m.a)(d,"".concat(u,"-ghost"),ta),Object(m.a)(d,"".concat(u,"-hoverable"),na),Object(m.a)(d,"".concat(u,"-size-").concat(Ge),Ge),Object(m.a)(d,"".concat(u,"-type-").concat(Ie),Ie),Object(m.a)(d,"".concat(u,"-collapse"),fe),Object(m.a)(d,"".concat(u,"-checked"),oa),d)),pa=S()("".concat(u,"-body"),(l={},Object(m.a)(l,"".concat(u,"-body-center"),we==="center"),Object(m.a)(l,"".concat(u,"-body-direction-column"),oe==="horizontal"||ra==="column"),Object(m.a)(l,"".concat(u,"-body-wrap"),Xe&&Ae),l)),ga=Object(I.a)(Object(I.a)(Object(I.a)({},de(q>0,{marginRight:-q/2,marginLeft:-q/2})),de(_>0,{marginTop:-_/2,marginBottom:-_/2})),$),Qe=a.a.isValidElement(se)?se:a.a.createElement(pe,{prefix:u,style:$.padding===0||$.padding==="0px"?{padding:24}:void 0}),je=la&&Ue===void 0&&(Je?Je({collapsed:fe}):a.a.createElement(z.a,{rotate:fe?void 0:90,className:"".concat(u,"-collapsible-icon")}));return a.a.createElement("div",Object(b.a)({className:ha,style:X,ref:s,onClick:function(O){var h;Ne==null||Ne(O),ie==null||(h=ie.onClick)===null||h===void 0||h.call(ie,O)}},Object(K.a)(ie,["prefixCls","colSpan"])),(me||ce||je)&&a.a.createElement("div",{className:S()("".concat(u,"-header"),(y={},Object(m.a)(y,"".concat(u,"-header-border"),_e||Ie==="inner"),Object(m.a)(y,"".concat(u,"-header-collapsible"),je),y)),style:Te,onClick:function(){je&&ma(!fe)}},a.a.createElement("div",{className:"".concat(u,"-title")},je,a.a.createElement(ne.a,{label:me,tooltip:qe||Se,subTitle:Pe})),ce&&a.a.createElement("div",{className:"".concat(u,"-extra")},ce)),Me?a.a.createElement("div",{className:"".concat(u,"-tabs")},a.a.createElement(g.a,Object(b.a)({onChange:Me.onChange},Me),se?Qe:$e)):a.a.createElement("div",{className:pa,style:ga},se?Qe:ja),a.a.createElement(W,{actions:aa,prefixCls:u}))}),Q=F,H=e("u1OI"),ge=function(s){var d=Object(p.useContext)(T.default.ConfigContext),l=d.getPrefixCls,y=l("pro-card-divider"),V=s.className,X=s.style,w=X===void 0?{}:X,$=s.type,k=S()(y,V,Object(m.a)({},"".concat(y,"-").concat($),$));return a.a.createElement("div",{className:k,style:w})},Oe=ge,ye=e("VzZb"),Ce=["key","tab","tabKey","disabled","destroyInactiveTabPane","children","className","style","cardProps"],R=function(s){var d=s.key,l=s.tab,y=s.tabKey,V=s.disabled,X=s.destroyInactiveTabPane,w=s.children,$=s.className,k=s.style,Te=s.cardProps,me=Object(ae.a)(s,Ce),Pe=Object(p.useContext)(T.default.ConfigContext),ce=Pe.getPrefixCls,Se=ce("pro-card-tabpane"),ve=S()(Se,$);return a.a.createElement(g.a.TabPane,Object(b.a)({key:d,tabKey:y,tab:l,className:ve,style:k,disabled:V,destroyInactiveTabPane:X},me),a.a.createElement(Q,Te,w))},Ee=R,xe=function(s){return a.a.createElement(Q,Object(b.a)({bodyStyle:{padding:0}},s))},E=Q;E.isProCard=!0,E.Divider=Oe,E.TabPane=Ee,E.Group=xe;var N=E,x=f.a=N},rWUb:function(D,f,e){"use strict";e.d(f,"e",function(){return I}),e.d(f,"d",function(){return ee}),e.d(f,"a",function(){return he}),e.d(f,"h",function(){return ae}),e.d(f,"b",function(){return te}),e.d(f,"i",function(){return ne}),e.d(f,"c",function(){return S}),e.d(f,"f",function(){return re}),e.d(f,"g",function(){return le});var b=e("k1fw"),p=e("9og8"),a=e("WmNS"),j=e.n(a),g=e("9kvl");function I(o,r){return m.apply(this,arguments)}function m(){return m=Object(p.a)(j.a.mark(function o(r,t){return j.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(g.f)("/api/admin/templates",Object(b.a)({method:"GET",useCache:!1,params:Object(b.a)(Object(b.a)({},r),{},{per_page:r&&r.pageSize,page:r&&r.current})},t||{})));case 1:case"end":return c.stop()}},o)})),m.apply(this,arguments)}function ee(o,r){return A.apply(this,arguments)}function A(){return A=Object(p.a)(j.a.mark(function o(r,t){return j.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(g.f)("/api/admin/templates/".concat(r),Object(b.a)({method:"GET"},t||{})));case 1:case"end":return c.stop()}},o)})),A.apply(this,arguments)}function he(o,r){return T.apply(this,arguments)}function T(){return T=Object(p.a)(j.a.mark(function o(r,t){return j.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(g.f)("/api/admin/templates",Object(b.a)({method:"POST",headers:{"Content-Type":"application/json"},data:r},t||{})));case 1:case"end":return c.stop()}},o)})),T.apply(this,arguments)}function ae(o,r,t){return L.apply(this,arguments)}function L(){return L=Object(p.a)(j.a.mark(function o(r,t,i){return j.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",Object(g.f)("/api/admin/templates/".concat(r),Object(b.a)({method:"PATCH",headers:{"Content-Type":"application/json"},data:t},i||{})));case 1:case"end":return v.stop()}},o)})),L.apply(this,arguments)}function te(o,r){return z.apply(this,arguments)}function z(){return z=Object(p.a)(j.a.mark(function o(r,t){return j.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(g.f)("/api/admin/templates/".concat(r),Object(b.a)({method:"DELETE",headers:{"Content-Type":"application/json"}},t||{})));case 1:case"end":return c.stop()}},o)})),z.apply(this,arguments)}function ne(o){return B.apply(this,arguments)}function B(){return B=Object(p.a)(j.a.mark(function o(r){return j.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Object(g.f)("/api/admin/templates/variables",Object(b.a)({method:"GET"},r||{})));case 1:case"end":return i.stop()}},o)})),B.apply(this,arguments)}function S(o,r){return K.apply(this,arguments)}function K(){return K=Object(p.a)(j.a.mark(function o(r,t){return j.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",Object(g.f)("/api/admin/templates/".concat(r,"/preview"),Object(b.a)({method:"GET"},t||{})));case 1:case"end":return c.stop()}},o)})),K.apply(this,arguments)}function re(o,r,t){return U.apply(this,arguments)}function U(){return U=Object(p.a)(j.a.mark(function o(r,t,i){return j.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",Object(g.f)("/api/admin/events/trigger-manually/".concat(r),Object(b.a)({method:"POST",headers:{"Content-Type":"application/json"},data:{users:t}},i||{})));case 1:case"end":return v.stop()}},o)})),U.apply(this,arguments)}function le(o,r,t){return W.apply(this,arguments)}function W(){return W=Object(p.a)(j.a.mark(function o(r,t,i){return j.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",Object(g.f)("/api/admin/products/".concat(t,"/trigger-event-manually/").concat(r),Object(b.a)({method:"POST",headers:{"Content-Type":"application/json"}},i||{})));case 1:case"end":return v.stop()}},o)})),W.apply(this,arguments)}},u1OI:function(D,f,e){}}]);
